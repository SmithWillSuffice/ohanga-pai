<!doctype html><html lang=en data-mode=dark><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.101.0"><meta name=theme content="Color Your World -- gitlab.com/rmaguiar/hugo-theme-color-your-world"><title>NZ Macroconomics — I | Ōhanga Pai</title><meta name=author content="Bijou M. Smith"><meta name=robots content="index follow"><link rel=canonical href=https://smithwillsuffice.github.io/ohanga-pai/empirical/100_00_nzecon/><meta property="og:site_name" content="Ōhanga Pai"><meta property="og:title" content="NZ Macroconomics — I"><meta property="og:url" content="https://smithwillsuffice.github.io/ohanga-pai/empirical/100_00_nzecon/"><meta property="og:type" content="website"><meta name=twitter:dnt content="on"><meta name=theme-color content="#222"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="default"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","url":"https://smithwillsuffice.github.io/ohanga-pai/","inLanguage":"en","name":"Ōhanga Pai","description":"Geon Theory Development","publisher":"Bijou M. Smith"}</script><link rel=stylesheet href=https://smithwillsuffice.github.io/ohanga-pai/css/main.min.d33233e3d0eb633ea1fbb9e17553fe7c8ff07875b91d8186e046a48480987c8e.css integrity="sha256-0zIz49DrYz6h+7nhdVP+fI/weHW5HYGG4EakhICYfI4=" crossorigin=anonymous><noscript><meta name=theme-color content="#1585d5"><link rel=stylesheet href=https://smithwillsuffice.github.io/ohanga-pai/css/noscript.min.d73d9c33b150230799106ddda48c6861047535f400bf9ad26ec48665cf803050.css integrity="sha256-1z2cM7FQIweZEG3dpIxoYQR1NfQAv5rSbsSGZc+AMFA=" crossorigin=anonymous></noscript><link rel=preload href=/ohanga-pai/fonts/OpenSans-Bold.ttf as=font crossorigin=anonymous><link rel=preload href=/ohanga-pai/fonts/OpenSans-Italic.ttf as=font crossorigin=anonymous><link rel=preload href=/ohanga-pai/fonts/OpenSans-Regular.ttf as=font crossorigin=anonymous><link rel=preload href=/ohanga-pai/fonts/Oswald-Bold.ttf as=font crossorigin=anonymous><link rel=preload href=/libs/katex@0.16.0/dist/fonts/KaTeX_Main-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/libs/katex@0.16.0/dist/fonts/KaTeX_Math-Italic.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/libs/katex@0.16.0/dist/fonts/KaTeX_Size2-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/libs/katex@0.16.0/dist/fonts/KaTeX_Size4-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script src=https://smithwillsuffice.github.io/ohanga-pai/js/main.eaf40cb85ba7b448519428d1b6c856258731f0bb71f875d541ba615cfca4bdbc.js integrity="sha256-6vQMuFuntEhRlCjRtshWJYcx8Ltx+HXVQbphXPykvbw=" crossorigin=anonymous></script></head><body><header><a href=/ohanga-pai><img src=https://smithwillsuffice.github.io/ohanga-pai/images/ohp_logo.svg alt="T4GU logo" style=display:flex;width:40px;height:34px;float:left;margin-bottom:-2.5px;margin-right:10px></a>
<a href=/ohanga-pai>Ōhanga Pai</a><nav aria-label="Main menu."><ul><li><a class=btn href=/ohanga-pai/>Home</a></li><li><a class=btn href=/ohanga-pai/questions/>Questions</a></li><li><a class=btn href=/ohanga-pai/empirical/>Empirical</a></li><li><a class=btn href=/ohanga-pai/blog/>Posts</a></li><li><a class=btn href=/ohanga-pai/contact/>Contact</a></li><li><a class=btn href=/ohanga-pai/donations/>Donate</a></li></ul></nav></header><div class=filler><main><article><header><h1>NZ Macroconomics — I</h1><p>Published on <time datetime=2024-12-20>2024-12-20</time></p></header><details class=toc open><summary class=outline-dashed>Contents</summary><nav id=TableOfContents><ul><li><a href=#nz-government-real-deficit>NZ Government Real Deficit</a><ul><li><a href=#population-growth>Population Growth</a></li><li><a href=#avoid-confusion-with-real-goods-deficit-spend>Avoid Confusion with Real Goods Deficit Spend</a></li><li><a href=#bank-credit>Bank Credit</a></li><li><a href=#back-of-the-envelop-real-deficitsurplus>Back-of-the-envelop Real Deficit(Surplus)</a></li></ul></li><li><a href=#real-deficit-results-2016--2022>Real Deficit Results (2016&ndash;2022)</a><ul><li><a href=#sample-raw-nz-tsy-figures>Sample Raw NZ Tsy Figures</a></li></ul></li><li><a href=#pictures-tell-the-story>Pictures Tell the Story</a><ul><li><a href=#checking-flows>Checking Flows</a></li></ul></li><li><a href=#time-series-automation>Time Series Automation</a></li><li><a href=#the-usa-case>The USA Case</a></li><li><a href=#the-nz-case>The NZ Case</a><ul><li><a href=#problems>Problems</a></li><li><a href=#oecd-api>OECD API</a></li></ul></li><li><a href=#bank-data-rbnz>Bank Data (RBNZ)</a></li><li><a href=#nz-credit-data>NZ Credit Data</a></li></ul></nav></details><p>A new series on some aspects of NZ macroeconomics. Topics are just
whatever I bother to look at and write-up. Today, the Real NZ government
surplus(deficit).</p><h2 id=nz-government-real-deficit><a class=anchor href=#nz-government-real-deficit title='Anchor for: NZ Government Real Deficit.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>NZ Government Real Deficit</h2><p>This is topical whenever there is a significant inflation event, and
such has occurred post-COVID.</p><p>We need a formula that can show how a nominal deficit can become a
real surplus from the non-government sector&rsquo;s perspective when
inflation is high enough.</p><p>The question is about how inflation affects the real value of
government debt. Inflation can can turn a nominal deficit into a
real surplus! That&rsquo;s bad for an economy with a growing population.</p><p>The basic formula would be:
$$
\text{RealDeficit}_n = \text{NominalDeficit}<em>n - (\text{InflationRate}\times \text{GovDebt}</em>{n-1})
$$
For example, if:<br><strong>(i)</strong> Nominal deficit = $1 trillion<br><strong>(ii)</strong> Outstanding debt last year = $30 trillion<br><strong>(iii)</strong> Inflation = 5%<br>then,
$$
\text{Real deficit} = 1T - (0.05 \times 30T) = 1T - 1.5T = -0.5T
$$
This would actually be a real surplus of 500 billion, despite the
nominal deficit. Which would be <strong><em>very bad</em></strong> if the population was
growing, which it is in Aotearoa. We are likely to see more unemployment,
not less.</p><p><strong>For hardline MMT:</strong> the price level is irrelevant,
full employment is the goal & a lowest <em>real wage</em> rising the fastest
of all wages.</p><p>Why are we using the government debt as the adjuster?</p><p>Let&rsquo;s think this through:</p><ol><li>A nominal deficit of $1T means the government is injecting 1T of
purchasing power into the non-government sector.</li><li>At the same time, inflation (say 5%) is reducing the real value
of all nominal assets held by the non-government sector, including
government securities (the $30T).</li></ol><p>The original formula actually does capture this correctly I beleive:
Real deficit = Nominal deficit - (Inflation Rate × Outstanding Debt).</p><p>This works because:
<strong>(i)</strong> The nominal deficit represents new purchasing power injected
<strong>(ii)</strong> (Inflation Rate × Outstanding Debt) represents the loss of
real purchasing power on existing government securities held by the
non-government sector.</p><p>This negative value (real surplus) means the non-government sector is
actually losing purchasing power in real terms, despite the nominal
deficit, because inflation&rsquo;s erosion of the value of their government
asset holdings exceeds the new purchasing power injection.</p><h3 id=population-growth><a class=anchor href=#population-growth title='Anchor for: Population Growth.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Population Growth</h3><p>If we were going to be real meta-nerds, we should make a population
size adjustment, since if the population shrunk then a nominal
government surplus might still be a real deficit spending!</p><p>Here is the python for that:</p><pre tabindex=0><code class=language-pythn data-lang=pythn>pop_growth_rate = df[&#39;Population&#39;].pct_change()
real_deficit_adjusted = df[&#39;GovExp&#39;] - df[&#39;GovRev&#39;] - (inflation_rate - pop_growth_rate) * df[&#39;NZ_GDEBT&#39;]
</code></pre><p>I don&rsquo;t know about you, but I prefer the mathematics straight, so
it would be:</p><p>$$
\begin{align*}
g_p &= \frac{P_n - P_{n-1}}{P_{n-1}}, \\
\text{RealDeficit}_\text{adj} &= \text{NominalDeficit} - (\pi - g_p)\cdot \text{GovDebt}
\end{align*}
$$</p><p>where actual inflation rate $\pi$ is,
$$
\pi = \frac{\text{CPI}_n - \text{CPI}_{n-1}}{\text{CPI}_{n-1}}.
$$</p><p><strong>Note:</strong> You would have to apply the ratio $\pi$ there for the CPI if it
was the Index value (100 &ndash; 1000) or whatever. But our FRED series we
use <code>CPGRLE01NZQ659N</code> is the percentage change, so we are ok. I call
it &ldquo;CPI&rdquo; sometimes in my python dataframes, but I shouldn&rsquo;t, it really
is the backwards looking rate of inflation proxy! That means it is
also <em>not</em> today&rsquo;s rate of inflation!</p><h3 id=avoid-confusion-with-real-goods-deficit-spend><a class=anchor href=#avoid-confusion-with-real-goods-deficit-spend title='Anchor for: Avoid Confusion with Real Goods Deficit Spend.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Avoid Confusion with Real Goods Deficit Spend</h3><p>The spending power of the government deficit spending alone is a different
sort of &ldquo;real deficit&rdquo;. It is merely the inflation adjusted raw deficit
spending. You would compute it via,
$$
Deficit_\text{adjusted} = \text{NominalDeficit} \cdot \frac{\pi_{n-1}}{I\pi_n}
$$
where $n$ is the year, so $\pi_{n-1}$ is the inflation rate for the previous
year.</p><p>This Deficit is always going to have the same $\pm$ sign as the
Nominal Deficit, so does not reflect the real terms of the add from
government deficit spending. (Obviously, since the outstanding net
currency = total GovDebt is not in the formula anywhere.)</p><h3 id=bank-credit><a class=anchor href=#bank-credit title='Anchor for: Bank Credit.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Bank Credit</h3><p>Bank credit does not add any net currency assets into the economy, but
it can boost circulation of the currency if the <em>private</em> household
debt level is not too high. One should probably factor this
into the overall Real Deficit of the whole economy, but I am not going to
fetch all the NZ banking data, so I will leave that to PhD students.</p><p>We want to spank the government for being naughty, not private households.</p><h3 id=back-of-the-envelop-real-deficitsurplus><a class=anchor href=#back-of-the-envelop-real-deficitsurplus title='Anchor for: Back-of-the-envelop Real Deficit(Surplus).'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Back-of-the-envelop Real Deficit(Surplus)</h3><p><a href=https://www.treasury.govt.nz/sites/default/files/2023-10/fsgnz-2023.pdf target=_blank>NZ Treasury statement 2023</a>
was:</p><ul><li>Net GovDebt = 18% of GDP.</li><li>GDP = 2.52175506110 USD. NZ-Tsy nominal GDP = 3.95896 NZD.</li><li>Expenditure (core)= 1,276 billion nzd.</li><li>Revenue (core) = 1.124 billion nzd.</li><li>Expenditure total = 1.61822 billion.</li><li>CPI inflation = 5.7% (average), mid-year was 5.3%.</li></ul><p>GDP agrees with <a href="https://data.worldbank.org/indicator/NY.GDP.MKTP.CD?locations=NZ" target=_blank>World Bank</a>
. To convert to NZD the
effective exchange rate was 1.5699 nzd per usd. Looks about right, daily
was around 1.55 to 1.75.</p><p>So Net GovDebt = $3.95896\times 0.18$ $= 0.7126$ billion nzd. FRED
series <code>NZLGGXWDGG01GDPPT</code> has GrossGovDebt = 31.35% of GDP = $1.247$ billion nzd.</p><p>Nominal deficit = $1.276 - 1.124 = 0.152$ billion nzd.</p><p>Plugging this in:
$$
\text{Real deficit} = 0.152 - 0.057\times 1.247 = 0.081 \,\, \text{bil. nzd}
$$</p><p>To validate with external data like FRED and OECD, today, at the time
of writing we can look at the 2021,
<a href=https://www.treasury.govt.nz/sites/default/files/2022-10/fsgnz-2022_2.pdf target=_blank>2022</a>
, 2023
Treasury Statements as a representative sample.</p><p>The closet FRED series is <code>NZLGGXWDGG01GDPPT</code> and is in units %GDP, so we
need to pull the NZ GDP numbers as well, <code>MKTGDPNZA646NWDB</code>. FRED has these
in USD, so we have to pull the currency conversion <code>CCUSMA02NZM618N</code> series too. Unfortunately this FRED NZ GovDebt series only goes back to 2016. So we are
only using the FRED for data validation. The clunky
<a href=https://www.treasury.govt.nz/publications/financial-statements-government target=_blank>NZ Treasury spreadsheets</a>
will have to be out painful data source for more historical analysis. More
on that next chapter! It was a real mission to get those look-ups automated.</p><p><a href=https://www.treasury.govt.nz/publications/financial-statements-government target=_blank>NZ Treasury spreadsheets</a>
report fiscal year-end, so June. But we can use the December Monthly
statements for the calendar year.</p><ul><li><a href=https://www.treasury.govt.nz/publications/month-end/interim-financial-statements-government-new-zealand-six-months-ended-31-december-2023 target=_blank>December 2023 Statement</a></li><li><a href=https://www.treasury.govt.nz/publications/month-end/interim-financial-statements-government-new-zealand-six-months-ended-31-december-2022 target=_blank>December 2022 Statement</a></li><li><a href=https://www.treasury.govt.nz/publications/month-end/interim-financial-statements-government-new-zealand-six-months-ended-31-december-2021 target=_blank>December 2021 Statement</a></li></ul><p>I eventually got too tired of extracting the spreadsheet data. So I used
some series from the FRED and the OECD portal to run numbers for the
limited range allowed, 20126&ndash;2022.</p><h2 id=real-deficit-results-2016--2022><a class=anchor href=#real-deficit-results-2016--2022 title='Anchor for: Real Deficit Results (2016&ndash;2022).'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Real Deficit Results (2016&ndash;2022)</h2><img src=/ohanga-pai/images/nz_real_deficit_2017_2022.png alt="NZ Gov Real Deficit" style=width:600px;height:685px><p>Need it be said? Green bars + are government deficit = non-government
savings. Green is good. Or, +deficit of someone else ifs good for us, it
is our +saving.</p><hr><p>The rest of this chapter is technical mumblings and fumblings &mdash; just
a crude journal on how I was struggling to get consistent data sources.</p><h3 id=sample-raw-nz-tsy-figures><a class=anchor href=#sample-raw-nz-tsy-figures title='Anchor for: Sample Raw NZ Tsy Figures.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Sample Raw NZ Tsy Figures</h3><p>A few series are reported as %GDP, so we need to square the GDP numbers.
The first GDP column is direct from NZ Treasury Statements. Some years GDP
is not easy to find reported in nominal nzd in the Treasury Statement, so in
those case I estimate from other figures given twice, once as %GDP.</p><p>For exchange rate, (cur) means the Dec. of the last year of the FRED
GDP data, which was 2023. I am not sure if this is the correct adjustment
to the FRED GDP.</p><div class=scroll tabindex=0><table><thead><tr><th>Year</th><th>GDP (nzd_bil)</th><th>fred_gdp (usd)</th><th>usd:nzd</th><th>fred_GDP (nzd)</th></tr></thead><tbody><tr><td>2021</td><td>343.36</td><td>253.64</td><td>1.41 (ave)</td><td>358.6</td></tr><tr><td>2021</td><td>''</td><td>''</td><td>1.39 (jan)</td><td>352.6</td></tr><tr><td>2021</td><td>''</td><td>''</td><td>1.47 (dec)</td><td>372.8</td></tr><tr><td>2021</td><td>''</td><td>''</td><td>1.60 (cur)</td><td>405.8</td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td>2022</td><td>359.476</td><td>246.73</td><td>1.578 (ave)</td><td>389.3</td></tr><tr><td>2022</td><td>''</td><td>''</td><td>1.575 (dec)</td><td>388.6</td></tr><tr><td>2022</td><td>''</td><td>''</td><td>1.60 (cur)</td><td>394.8</td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td>2023 (a)</td><td>419.810</td><td>252.17</td><td>1.56 (ave)</td><td>394.3</td></tr><tr><td></td><td>''</td><td>''</td><td>1.60 (dec)</td><td>403.472</td></tr><tr><td></td><td>''</td><td>''</td><td>1.60 (cur)</td><td>403.472</td></tr><tr><td>2023 (b)</td><td>400.818</td><td></td><td></td><td></td></tr></tbody></table></div><p>The discrepancies could be due to NZ Tsy using July-to-June as
the &ldquo;year&rdquo; (fiscal year).</p><p>The World Bank values the FRED uses are calendar year.
See <a href=https://datahelpdesk.worldbank.org/knowledgebase/articles/201203-are-all-wdi-series-on-a-calendar-year-reporting-pe target=_blank>World Bank Helpdesk</a>
.</p><p>FRED seems consistently on the high side of NZ Tsy, maybe they do NIPA
accounting differently? Also, the source for the FRED series is the
World Bank. The source data uses &ldquo;current USD&rdquo; &mdash; but I find it hard to
know what that means, what date is &ldquo;current&rdquo;. The metadata says the WB
uses &ldquo;single year official exchange rate&rdquo;. They have a page for that here
<a href="https://data.worldbank.org/indicator/PA.NUS.FCRF?locations=NZ" target=_blank>Official LCU exchange to USD</a>
which for &ldquo;current&rdquo; being 2023 was 1.63. But you see from the table that
does not improve the agreement with NZ Tsy nominal GDP figures, which are
not price adjusted.</p><p>We might be ok using the FRED data with a calibration. For that we want
to look at NZ Tsy Deficits and GovDebt and compare with OECD. Working
with the NZ Tsy Statements was a mess without some automation, since the
figures published are monthly, or to-June fiscal year.</p><div class=scroll tabindex=0><table><thead><tr><th>Year</th><th>GovExp (bil. nzd)</th><th>GovRev (bil. nzd)</th><th>GDP (bl. nzd)</th></tr></thead><tbody><tr><td>2021</td><td>197.70 (total)</td><td>189.466 (total)</td><td>343.36</td></tr><tr><td>''</td><td>-</td><td>142.343 (tax)</td><td>''</td></tr><tr><td>''</td><td>-</td><td>152.791 (crown)</td><td>''</td></tr><tr><td>2022</td><td>225.225 (total)</td><td>207.819 (total)</td><td>359.476</td></tr><tr><td>''</td><td>-</td><td>158.551 (tax)</td><td>''</td></tr><tr><td>''</td><td>-</td><td>171.621 (crown)</td><td>''</td></tr></tbody></table></div><p>To compare NZ Tsy with OECD data (via World Bank I think) we need to
convert to %GDP:</p><div class=scroll tabindex=0><table><thead><tr><th>Year</th><th>GovExp (%gdp)</th><th>OECD GovExp (%gdp)</th><th>GovRev (%gdp)</th><th>OECD GovRev (%gdp)</th></tr></thead><tbody><tr><td>2021</td><td>57.58 (total)</td><td>44.9</td><td>55.18 (total)</td><td>40.78</td></tr><tr><td>''</td><td>-</td><td></td><td>41.46 (tax)</td><td>-</td></tr><tr><td>''</td><td>-</td><td></td><td>44.498 (crown)</td><td>-</td></tr><tr><td>2022</td><td>62.65 (total)</td><td>42.52</td><td>57.81 (total)</td><td>40.88</td></tr><tr><td>''</td><td>-</td><td></td><td>44.11 (tax)</td><td>-</td></tr><tr><td>''</td><td>-</td><td></td><td>47.74 (crown)</td><td>-</td></tr></tbody></table></div><p><strong>Interim Status:</strong> We only get $\pm$ 10 to 30 million NZD missing here and
there? Good enough? I do not mind that the percentage deficits are lower
for the Tsy data then for the OECD.</p><p>The more important series to check are GovDebt, GovExp, GovRev.
The change in GovDebt needs to be consistent with (GovRev$-$GovExp).
But I will get the better quality NZ Treasury data in the future, time
permitting, then e-run the RealDeficit analysis.</p><p><strong>Lesson:</strong> You never want to run serious econometric analyses with
nominal data. You want to convert to a dimensionless ratio.</p><p>For our Real Deficit analysis what can we do? We only need to make sure
our NominalDeficit and GovDebt numbers are based on the same year/price.
I think although using FRED is highly convenient, if we were being serious
we would use the NZ Treasury Statements, because the RealDeficit calculation
is only using one year of data, so price level adjustments will be
irrelevant.</p><p>However, when <strong><em>reporting</em></strong> the RealDeficit it would be better to convert
to dimensionless units, like %GDP for the given year. Then the whole
RealDeficit time series will be year-relative and dimensionless.</p><p>The purpose of data needs to be born in mind. We are interested in
how a Nominal GovDeficit can become a RealSurplus. That is a year-by-year
matter. We would not be looking to use a value for RealDeficit in NZD
from 1980 to say anything about 2024, since prices changed. But we could
say something about the &ldquo;health&rdquo; of the NZ economy by comparing the
RealDeficit as % annual nominal GDP from 1980 to 2024. So the above
conclusion & lesson seems justified.</p><p>For GovDebt the FRED series <code>NZLGGXWDGG01GDPPT</code> is closest, but only
goes back to 2016. Until I get the awful spreadsheet automation work
sorted out for the NZ Treasury Statements, I will just use the FRED
series, so only report the RealDeficit from 2016&ndash;present.<br>I am lazy, so I will use the FRED where possible. For For this
purpose I think it is fine the use the following series:</p><div class=scroll tabindex=0><table><thead><tr><th>Measure</th><th>Source</th><th>Code</th><th>Units</th></tr></thead><tbody><tr><td>GDP</td><td>FRED</td><td>MKTGDPNZA646NWDB</td><td>usd</td></tr><tr><td>$\pi$ (inflation)</td><td>FRED</td><td>CPGRLE01NZQ659N</td><td>-</td></tr><tr><td>GovDebt</td><td>FRED</td><td>NZLGGXWDGG01GDPPT</td><td>pct_gdp</td></tr><tr><td>USD2NZD</td><td>FRED</td><td>CCUSMA02NZM618N</td><td>-</td></tr><tr><td>GovExp</td><td>OECD portal</td><td>A.NZL.OTES13</td><td>pct_gdp</td></tr><tr><td>GovRev</td><td>OECD portal</td><td>A.NZL.OTRS13</td><td>pct_gdp</td></tr></tbody></table></div><p>In my python script <code>real_deficit_data.py</code> I only run the FRED fetch.
The OECD data was needed for other projects, and runs separately
saving to a CSV file. So in the RealDeficit script I just load that file.
We then output a RealDeficit CSV time series, and a nice plotly plot.</p><h2 id=pictures-tell-the-story><a class=anchor href=#pictures-tell-the-story title='Anchor for: Pictures Tell the Story.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Pictures Tell the Story</h2><p>While we are here, it is good to look at the OECD portal NZ GovRev and GovExp,
the difference being a nominal deficit(surplus). Hopefully this lnk here,
<a href="https://data-explorer.oecd.org/vis?lc=en&pg=0&snb=1&df[ds]=dsDisseminateFinalDMZ&df[id]=DSD_NAAG_VI%40DF_NAAG_EXP&df[ag]=OECD.SDD.NAD&df[vs]=1.0&dq=A.NZL.OTES13%2BOTRS13..PT_B1GQ.&pd=1986%2C2023&to[TIME_PERIOD]=false&vw=tl" target=_blank>OECD NZ government deficit(surplus)</a>
will open in your browser. In case not I took a snapshot c.2024, which
only ran from 1986 to 2023.</p><img src=/ohanga-pai/images/oecd_snapshot_nz_gov_deficits.png alt="NZ Gov Rev.s and Exps." style=width:600px;height:356px><p>First, note tax revenues are the bulk of the Crown revenue.
It would be nice to overlay the recession period shadows, as one does, but
I did not bother, so apologies. However, you can see when the decline in
percent GDP expenditures goes faster than decline in tax revenue it spells
trouble.</p><p>When the <font style="color: indianred">red line</font> is above the
<font style="color: #178055">green</font> = danger!</p><p>Also, the portrait on the NZ economy is dynamic, you can see tax revenues
fall off over the financial crisis period from 2006 to 2010. Even before
the crisis proper befell the USA and Europe, NZ was already going in a
declining turn-over direction.</p><p>This speaks to Mosler&rsquo;s Seventh deadly innocent fraud: higher government
deficits today means higher tax returns tomorrow. The myth is that it is a
bad thing, when in fact it si a good thing. The NZ government does not
need to <em>raise extra taxes</em> when it deficit spends, the tax return will
automatically reflux higher of the economy is doing well. The government
may <em>want</em> to raise taxes in the future to cool off inflation, but it
does not <em>ave</em> to do so.</p><p>Cooling off inflation is one use of taxation, but it is not the primary
use, and is not even all that essential. The primary purpose of taxes
(the liabilities that is, not the receipts) is to create a demand for
the currency in the non-government sector.</p><h3 id=checking-flows><a class=anchor href=#checking-flows title='Anchor for: Checking Flows.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Checking Flows</h3><p>For GDP (a flow variable) if you grab monthly data and wish to convert to
annual YE, then it is a good idea to check your down sampling preserves
the sum.</p><h4 id=down-sampling><a class=anchor href=#down-sampling title='Anchor for: Down Sampling.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Down Sampling</h4><p>This is easy, pandas provides a <code>resample()</code> method. For a stock
variable we would use an average,</p><pre aria-label="Box containing code sample." tabindex=0><code>df.resample(&#39;YE&#39;).mean()
</code></pre><p>of course, that is coarse and ignores seasonality.</p><p>For a flow variable we can use:</p><pre aria-label="Box containing code sample." tabindex=0><code>df.resample(&#39;YE&#39;).sum()
</code></pre><p>Here is a quick copypasta snippet to use for testing:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Generate dummy date monthly 2021, 2022, and 2023</span>
</span></span><span class=line><span class=cl><span class=n>date_range</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>date_range</span><span class=p>(</span><span class=n>start</span><span class=o>=</span><span class=s1>&#39;2021-01-01&#39;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39;2023-12-31&#39;</span><span class=p>,</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;ME&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Generate random GDP values in billions</span>
</span></span><span class=line><span class=cl><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>seed</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>gdp_values</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>rand</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>date_range</span><span class=p>))</span> <span class=o>*</span> <span class=mi>1000</span>  <span class=c1># GDP values between 0 and 1000 billion</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create the DataFrame</span>
</span></span><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;Date&#39;</span><span class=p>:</span> <span class=n>date_range</span><span class=p>,</span> <span class=s1>&#39;GDP_bil&#39;</span><span class=p>:</span> <span class=n>gdp_values</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set the &#39;Date&#39; column as the index</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>set_index</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span></code></pre></div><p>To down-sample the flow variable:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>gdp_annual</span> <span class=o>=</span>  <span class=n>df</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;YE&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span></code></pre></div><p>After this, the check the flow accumulation was preserved run:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>gdp_annual</span> <span class=o>=</span>  <span class=n>df</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;YE&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>gdp_annual</span>
</span></span><span class=line><span class=cl>                <span class=n>GDP_bil</span>
</span></span><span class=line><span class=cl><span class=n>Date</span>                   
</span></span><span class=line><span class=cl><span class=mi>2021</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>  <span class=mf>7478.282791</span>
</span></span><span class=line><span class=cl><span class=mi>2022</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>  <span class=mf>7172.599144</span>
</span></span><span class=line><span class=cl><span class=mi>2023</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>  <span class=mf>5482.526794</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>gdp_monthly_sum_by_year</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>year</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>gdp_monthly_sum_by_year</span>
</span></span><span class=line><span class=cl>          <span class=n>GDP_bil</span>
</span></span><span class=line><span class=cl><span class=n>Date</span>             
</span></span><span class=line><span class=cl><span class=mi>2021</span>  <span class=mf>7478.282791</span>
</span></span><span class=line><span class=cl><span class=mi>2022</span>  <span class=mf>7172.599144</span>
</span></span><span class=line><span class=cl><span class=mi>2023</span>  <span class=mf>5482.526794</span>
</span></span></code></pre></div><p>All good.</p><h4 id=up-sampling><a class=anchor href=#up-sampling title='Anchor for: Up Sampling.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Up Sampling</h4><p>Suppose we had Annual frequency data, and wanted Monthly. For a stock
variable we can simply interpolate linearly (again ignoring seasonality).
For a flow variable we can distribute at random, assuming a uniform
distribution.</p><p><strong>For Stock Variables:</strong></p><pre aria-label="Box containing code sample." tabindex=0><code>df_monthly = df_annual.resample(&#39;ME&#39;).ffill().interpolate(method=&#39;linear&#39;)
</code></pre><p><strong>For Flow Variables:</strong></p><pre aria-label="Box containing code sample." tabindex=0><code>df_monthyl =  df_annual.resample(&#39;ME&#39;).ffill() / 12
</code></pre><p>Here is a dummy example:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Create a DataFrame with Annual Data for three years</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Date&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;2021-12-31&#39;</span><span class=p>,</span> <span class=s1>&#39;2022-12-31&#39;</span><span class=p>,</span> <span class=s1>&#39;2023-12-31&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;GDP&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>24000</span><span class=p>,</span> <span class=mi>25000</span><span class=p>,</span> <span class=mi>26000</span><span class=p>],</span>  <span class=c1># Annual GDP in billions</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;GovDebt&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>100000</span><span class=p>,</span> <span class=mi>110000</span><span class=p>,</span> <span class=mi>120000</span><span class=p>]</span>  <span class=c1># Government Debt in billions</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>df_annual</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>df_annual</span><span class=p>[</span><span class=s1>&#39;Date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>df_annual</span><span class=p>[</span><span class=s1>&#39;Date&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>df_annual</span><span class=o>.</span><span class=n>set_index</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Display the annual DataFrame</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Annual DataFrame:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>df_annual</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Upsample to Monthly Frequency</span>
</span></span><span class=line><span class=cl><span class=n>df_monthly</span> <span class=o>=</span> <span class=n>df_annual</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;ME&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>asfreq</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Distribute Flow Variable (GDP) evenly across months</span>
</span></span><span class=line><span class=cl><span class=n>df_monthly</span><span class=p>[</span><span class=s1>&#39;GDP&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df_annual</span><span class=p>[</span><span class=s1>&#39;GDP&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;ME&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>ffill</span><span class=p>()</span> <span class=o>/</span> <span class=mi>12</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Interpolate Stock Variable (GovDebt) linearly</span>
</span></span><span class=line><span class=cl><span class=n>df_monthly</span><span class=p>[</span><span class=s1>&#39;GovDebt&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df_annual</span><span class=p>[</span><span class=s1>&#39;GovDebt&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;ME&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>ffill</span><span class=p>()</span><span class=o>.</span><span class=n>interpolate</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;linear&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>df_monthly</span><span class=p>)</span>
</span></span></code></pre></div><p>To double check the stock:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>df_annual</span>
</span></span><span class=line><span class=cl>              <span class=n>GDP</span>  <span class=n>GovDebt</span>
</span></span><span class=line><span class=cl><span class=n>Date</span>                      
</span></span><span class=line><span class=cl><span class=mi>2021</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>  <span class=mi>24000</span>   <span class=mi>100000</span>
</span></span><span class=line><span class=cl><span class=mi>2022</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>  <span class=mi>25000</span>   <span class=mi>110000</span>
</span></span><span class=line><span class=cl><span class=mi>2023</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>  <span class=mi>26000</span>   <span class=mi>120000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>debt_check</span> <span class=o>=</span> <span class=n>df_monthly</span><span class=p>[</span><span class=s1>&#39;GovDebt&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;YE&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>last</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>debt_check</span>
</span></span><span class=line><span class=cl><span class=n>Date</span>
</span></span><span class=line><span class=cl><span class=mi>2021</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>    <span class=mi>100000</span>
</span></span><span class=line><span class=cl><span class=mi>2022</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>    <span class=mi>110000</span>
</span></span><span class=line><span class=cl><span class=mi>2023</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>31</span>    <span class=mi>120000</span>
</span></span><span class=line><span class=cl><span class=n>Freq</span><span class=p>:</span> <span class=n>YE</span><span class=o>-</span><span class=n>DEC</span><span class=p>,</span> <span class=n>Name</span><span class=p>:</span> <span class=n>GovDebt</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span>
</span></span></code></pre></div><p>Good.</p><p>To double check the flow:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>gdp_monthly_sum_by_year</span> <span class=o>=</span> <span class=n>df_monthly</span><span class=p>[</span><span class=s1>&#39;GDP&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>year</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span></code></pre></div><p>But this was &ldquo;dumb&rdquo;. It is more natural to impose a monthly
fluctuation. Even though this will be fake, we are doing this
pedagogically as a build-up. The &ldquo;proper&rdquo; way to up-sample would be
to find some believe monthly correlator. Absent that sophistication,
let&rsquo;s just do it with a simple random fluctuation.</p><h4 id=adding-monthly-fluctuations><a class=anchor href=#adding-monthly-fluctuations title='Anchor for: Adding Monthly Fluctuations.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Adding Monthly Fluctuations</h4><p>If we do not want to worry about seasonality correlation we can just
assume uniform distributions, and add a random fluctuation. To be
more nuanced and correlate the monthly fluctuations we could use some
other data we think is correlated, like SPX, or monthly GovDeficit,
or whatever econometric series is available at the higher frequency and
which we believe might be correlated.</p><p>I have not gone to that bother in this write-up, so we&rsquo;ll just look at
a random uniform distribution. Here I use the yearly variance to infer
a monthly variance.</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>upsample_flow_annual_to_month</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>column</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    Upsample a flow variable (e.g., GDP) from annual to monthly frequency with random fluctuations.
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># Create a date range for the monthly frequency</span>
</span></span><span class=line><span class=cl>    <span class=n>monthly_dates</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>date_range</span><span class=p>(</span><span class=n>start</span><span class=o>=</span><span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>min</span><span class=p>(),</span> <span class=n>end</span><span class=o>=</span><span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>max</span><span class=p>(),</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;ME&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>monthly_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>index</span><span class=o>=</span><span class=n>monthly_dates</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Repeat the annual values to create a monthly average</span>
</span></span><span class=line><span class=cl>    <span class=n>repeated_annual_values</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>repeat</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>column</span><span class=p>]</span><span class=o>.</span><span class=n>values</span><span class=p>,</span> <span class=mi>12</span><span class=p>)[:</span><span class=nb>len</span><span class=p>(</span><span class=n>monthly_dates</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=c1># Calculate monthly variance based on annual variance</span>
</span></span><span class=line><span class=cl>    <span class=n>annual_variance</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>column</span><span class=p>]</span><span class=o>.</span><span class=n>var</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>monthly_variance</span> <span class=o>=</span> <span class=n>annual_variance</span> <span class=o>/</span> <span class=mi>12</span>
</span></span><span class=line><span class=cl>    <span class=c1># Generate monthly fluctuations around the average</span>
</span></span><span class=line><span class=cl>    <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>seed</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>  <span class=c1># For reproducibility</span>
</span></span><span class=line><span class=cl>    <span class=n>monthly_fluctuations</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>normal</span><span class=p>(</span><span class=n>loc</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>monthly_variance</span><span class=p>),</span> <span class=n>size</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>monthly_dates</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1># Distribute the annual sum across months with fluctuations</span>
</span></span><span class=line><span class=cl>    <span class=n>monthly_df</span><span class=p>[</span><span class=n>column</span><span class=p>]</span> <span class=o>=</span> <span class=n>repeated_annual_values</span> <span class=o>/</span> <span class=mi>12</span> <span class=o>+</span> <span class=n>monthly_fluctuations</span>
</span></span><span class=line><span class=cl>    <span class=c1># Renormalize to ensure the annual sum is preserved</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>year</span> <span class=ow>in</span> <span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>year</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>monthly_df_year</span> <span class=o>=</span> <span class=n>monthly_df</span><span class=p>[</span><span class=n>monthly_df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=n>year</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>annual_total</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=n>year</span><span class=p>,</span> <span class=n>column</span><span class=p>]</span><span class=o>.</span><span class=n>values</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>monthly_total</span> <span class=o>=</span> <span class=n>monthly_df_year</span><span class=p>[</span><span class=n>column</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>normalization_factor</span> <span class=o>=</span> <span class=n>annual_total</span> <span class=o>/</span> <span class=n>monthly_total</span>
</span></span><span class=line><span class=cl>        <span class=n>monthly_df</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>monthly_df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=n>year</span><span class=p>,</span> <span class=n>column</span><span class=p>]</span> <span class=o>*=</span> <span class=n>normalization_factor</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>monthly_df</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>upsample_stock_annual_to_month</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>column</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    Upsample a stock variable (e.g., GovDebt) from annual to monthly frequency with linear interpolation.
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>monthly_df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;ME&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>asfreq</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>monthly_df</span><span class=p>[</span><span class=n>column</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>column</span><span class=p>]</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;ME&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>ffill</span><span class=p>()</span><span class=o>.</span><span class=n>interpolate</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;linear&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Renormalize to ensure the year-end stock value is preserved</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>year</span> <span class=ow>in</span> <span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>year</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>month_end</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>year</span><span class=si>}</span><span class=s1>-12-31&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>month_end</span> <span class=ow>in</span> <span class=n>monthly_df</span><span class=o>.</span><span class=n>index</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>monthly_df</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>month_end</span><span class=p>,</span> <span class=n>column</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>year</span><span class=si>}</span><span class=s1>-12-31&#39;</span><span class=p>,</span> <span class=n>column</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>monthly_df</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>upsample</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>column</span><span class=p>,</span> <span class=n>var_type</span><span class=o>=</span><span class=s1>&#39;flow&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    Upsample a variable from annual to monthly frequency.
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>    - df: Pandas DataFrame with annual data.
</span></span></span><span class=line><span class=cl><span class=s2>    - column: The column name to upsample.
</span></span></span><span class=line><span class=cl><span class=s2>    - var_type: Type of the variable (&#39;flow&#39; or &#39;stock&#39;).
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Returns:
</span></span></span><span class=line><span class=cl><span class=s2>    - A DataFrame with monthly frequency.
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>var_type</span> <span class=o>==</span> <span class=s1>&#39;flow&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>upsample_flow_annual_to_month</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>column</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>upsample_stock_annual_to_month</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>column</span><span class=p>)</span>
</span></span></code></pre></div><p>Now we can run dummy data tests:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Mock Up Dummy Example</span>
</span></span><span class=line><span class=cl><span class=c1># Create a DataFrame with Annual Data for three years</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Date&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;2021-12-31&#39;</span><span class=p>,</span> <span class=s1>&#39;2022-12-31&#39;</span><span class=p>,</span> <span class=s1>&#39;2023-12-31&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;GDP&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>24000</span><span class=p>,</span> <span class=mi>25000</span><span class=p>,</span> <span class=mi>26000</span><span class=p>],</span>  <span class=c1># Annual GDP in billions</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;GovDebt&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>100000</span><span class=p>,</span> <span class=mi>110000</span><span class=p>,</span> <span class=mi>120000</span><span class=p>]</span>  <span class=c1># Government Debt in billions</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>df_annual</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>df_annual</span><span class=p>[</span><span class=s1>&#39;Date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>df_annual</span><span class=p>[</span><span class=s1>&#39;Date&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>df_annual</span><span class=o>.</span><span class=n>set_index</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Upsample GDP (flow variable)</span>
</span></span><span class=line><span class=cl><span class=n>df_monthly_gdp</span> <span class=o>=</span> <span class=n>upsample</span><span class=p>(</span><span class=n>df_annual</span><span class=p>[[</span><span class=s1>&#39;GDP&#39;</span><span class=p>]],</span> <span class=s1>&#39;GDP&#39;</span><span class=p>,</span> <span class=n>var_type</span><span class=o>=</span><span class=s1>&#39;flow&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Upsample GovDebt (stock variable)</span>
</span></span><span class=line><span class=cl><span class=n>df_monthly_govdebt</span> <span class=o>=</span> <span class=n>upsample</span><span class=p>(</span><span class=n>df_annual</span><span class=p>[[</span><span class=s1>&#39;GovDebt&#39;</span><span class=p>]],</span> <span class=s1>&#39;GovDebt&#39;</span><span class=p>,</span> <span class=n>var_type</span><span class=o>=</span><span class=s1>&#39;stock&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Combine the upsampled data</span>
</span></span><span class=line><span class=cl><span class=n>df_monthly</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>([</span><span class=n>df_monthly_gdp</span><span class=p>,</span> <span class=n>df_monthly_govdebt</span><span class=p>],</span> <span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Display the monthly DataFrame</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Monthly DataFrame with upsampled GDP and GovDebt:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>df_monthly</span><span class=p>)</span>
</span></span></code></pre></div><p>Check the flow conservation law:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>gdp_check</span> <span class=o>=</span> <span class=n>df_monthly</span><span class=p>[</span><span class=s1>&#39;GDP&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s1>&#39;YE&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span></code></pre></div><hr><p>Older Check</p><ul><li>GDP = 3.59476 billion nzd.</li><li>Net GovDebt = 0.61829872 billion nzd or 17.2% of GDP.</li><li>Gross GovDebt = 1.18986556 billion or 33.1% of GDP.</li></ul><p>Check: From OECD and FRED:</p><ul><li>FRED <code>NZLGGXWDGG01GDPPT</code>: GovDebt (total) 31.9% of GDP.</li><li>OECD: Gross GovDebt (total) 59.59% of GDP.</li></ul><p>Unfortunately, the API for Treasury data is an excel spreadsheet 🤣.
But I am glad I checked, since it looks like I had been using the
wrong FRED series <code>DEBTTLNZA188A</code> instead of the series more in alignment
with NZ Treasury which is <code>NZLGGXWDGG01GDPPT</code>.</p><p>Given the way the GovDebt is published it is probably a good thing that
what matters for MMT analysis is more the
change in the GovDebt. Since the outstanding absolute debt is really just
an <em>already established</em> price level effect, and we know the price level
roughly from other data. Further, what matters is relative prices,
price::wage ratio for necessary goods, and purchasing power, not the
absolute price level.</p><h2 id=time-series-automation><a class=anchor href=#time-series-automation title='Anchor for: Time Series Automation.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Time Series Automation</h2><p>I thought it worthwhile automating a time series for the Real Deficit.
It might be published somewhere else, but repetition does not hurt.</p><h2 id=the-usa-case><a class=anchor href=#the-usa-case title='Anchor for: The USA Case.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>The USA Case</h2><p>For empirical data input we have:</p><ol><li>MTSDS133FMS - Monthly Treasury Statement (Federal Surplus or Deficit)</li><li>PCEPI or CPI - Price indices for inflation adjustment.</li><li>Outstanding Debt Effect: the real deficit/surplus calculation should
account for how inflation erodes the real value of the existing .
debt stock, not just the nominal deficit flow. We&rsquo;ll need:</li></ol><ul><li>Total outstanding government debt (we can use GFDEBTN from FRED).</li></ul><p>The FRED series ID&rsquo;s just given will let you run a USA analysis, but
we are interested in the NZ analysis at Ōhanga Pai.</p><h2 id=the-nz-case><a class=anchor href=#the-nz-case title='Anchor for: The NZ Case.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>The NZ Case</h2><p>I think we can fetch most stuff from the FRED, but if not the BIS portal
is a good first fallback, then the OECD portal. The latter two are
clunkier to navigate, but here are some tips.</p><p>First, you only need to do this once, since we will get python code
for automating future data updates.</p><ul><li>Go to <a href=https://data.bis.org/ target=_blank>https://data.bis.org/</a></li><li>In the search box type a short accurate description of the series you
want, .e.g <code>NZ government total debt</code>.</li><li>Select from the result the series that looks like a closest match. For
example, I selected <a href=https://data.bis.org/topics/LBS/BIS,WS_LBS_D_PUB,1.0/Q.S.C.D.TO1.A.5J.A.5A.G.NZ.N target=_blank>https://data.bis.org/topics/LBS/BIS,WS_LBS_D_PUB,1.0/Q.S.C.D.TO1.A.5J.A.5A.G.NZ.N</a></li><li>Up on the top right of the webpage, above the Bookmark button
click the &ldquo;Export&rdquo; button,</li><li>Click on the &ldquo;Code Snippet&rdquo; tab.</li><li>Python radio button is default, so now just scroll down to the code
snippet and copy using the copy button icon. Paste into your python
script.</li><li>Note the BIS units for this series are US$mil., so we do not need to
convert (our other islm data series were converted to millions of usd.)</li></ul><p>Others for CPI (proxy for Inflation) and the deficit(surplus) :</p><pre aria-label="Box containing code sample." tabindex=0><code>TODO
CPI?
Deficit?
</code></pre><p>The BIS are a bit of a pain, since the <code>TIME_DATE</code> column has
format <code>yyyyy-Qn</code>.</p><p>We want to convert Quarters into <code>yyyy-mm-01</code> dates. The BIS docs suggests
the quarters are ending, so we want our actual datetimes to be end of
March, September and December, but offset one day to 1st of the next
month. So the quarters I use are e.g.,</p><pre aria-label="Box containing code sample." tabindex=0><code>2024-01-01 
2024-04-01
2024-07-01 
</code></pre><p>This function will do that for you:</p><div class=highlight><pre aria-label="Box containing code sample." tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>convert_quarter_to_date</span><span class=p>(</span><span class=n>quarter_str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>period</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Period</span><span class=p>(</span><span class=n>quarter_str</span><span class=p>,</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;Q&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>start_of_next_quarter</span> <span class=o>=</span> <span class=n>period</span><span class=o>.</span><span class=n>asfreq</span><span class=p>(</span><span class=s1>&#39;Q-JAN&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>start_time</span> <span class=o>+</span> <span class=n>pd</span><span class=o>.</span><span class=n>DateOffset</span><span class=p>(</span><span class=n>months</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>first_of_last_month</span> <span class=o>=</span> <span class=n>start_of_next_quarter</span> <span class=o>-</span> <span class=n>pd</span><span class=o>.</span><span class=n>DateOffset</span><span class=p>(</span><span class=n>months</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>first_of_last_month</span>
</span></span></code></pre></div><h3 id=problems><a class=anchor href=#problems title='Anchor for: Problems.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Problems</h3><p><strong>Problem 1.</strong><br>An immediate problem was that the BIS data set I choose did not look
like the NZ government debt. It was some obscure banking composite. But
it might be close to the series we ultimately want. So I had a go at
using the OECD SDMX-JSON Rest-API.</p><p><strong>Problem 2.</strong><br>The OECD Gross GovDebt figures are ballpark 59% of GDP (2022), whereas
NZ Treasury quotes 33.1%.</p><p>The FRED series <code>DEBTTLNZA188A</code> is close to the OECD. No good!</p><p>The FRED series <code>NZLGGXWDGG01GDPPT</code> is closer to NZ Treasury, but
starts at 2016. SO is not so useful.</p><p>I think we should be using the NZ Treasury Statements. But they are excel
spreadsheet files. I did automate some of that, so will return to look at
making a cron job for updating the data. The main thing is not not mess
with the historical data, and only do a most recent years update/append.</p><h3 id=oecd-api><a class=anchor href=#oecd-api title='Anchor for: OECD API.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>OECD API</h3><p>The Expenditure and Revenue series from the OECD are useful for comparing
with the NZ Treasury data pull. This is just for data validation. I prefer
to use the NZ Treasury Statements as the main source.</p><p>The NZ Government Expenditure and Revenue series seem to be available,
the difference of these two aught to be our $(G-T)$. Also a
&lsquo;Gross debt of general government&rsquo; series is published, the year-on-year
change in that should be close tot $G-T)$. All these series are in
units &lsquo;% of GDP&rsquo;, so we need to fetch the GDP data too.</p><p>In case I forget, here is the way to get this data.</p><ul><li>Go to the explorer <a href=https://data-explorer.oecd.org/ target=_blank>https://data-explorer.oecd.org/</a></li><li>Put in a search, &ldquo;Government expenditure&rdquo; should do the trick, or
&ldquo;National Accounts at a Glance (NAAG) Chapter 6: Government&rdquo;.
I actually got there from a higher level overview of the OECD statistics
here: <a href="https://www.oecd.org/en/data/indicators/general-government-deficit.html?oecdcontrol-8478925713-var1=NZL" target=_blank>https://www.oecd.org/en/data/indicators/general-government-deficit.html?oecdcontrol-8478925713-var1=NZL</a>
.</li><li>Deselect all the <em>other</em> countries in the Region filter, I left New Zealand
and the USA, since I want to check the USA against the FRED as my initial
data validation.</li><li>We should be on the &ldquo;NAAG Chapter 6: Government&rdquo; page.</li><li>In the Measure filter select what you want, I went for (1) Expenditure,
(2) Revenue. (We do not want the &ldquo;Gross debt&rdquo; series since that confounds
cross-border stuff and &ldquo;all currencies&rdquo;.)</li><li>In the Time period filter select the max range (1970 to present).</li><li>Click on the Chart header to check the plot is ok.</li><li>Click on &ldquo;Developer API&rdquo; on the top right of the dashboard.</li><li>Change &ldquo;SDMX flavour:&rdquo; to &ldquo;Time series&rdquo; option.</li><li>Copy the supplied Data query URL.</li></ul><p>Now we need to paste this URL into our python script and make the
request.</p><p>Your python snippet or URL will have the present date hard-coded, so it
is good to make a str replacement in your script for this, so that you do
not have to change the code in the future.</p><p>After all this it is a good idea to compare, at least between your eye balls,
with FRED series. You want to check the numbers and units roughly match.
Often FRED gets the raw data from the BIS or OECD, so often they are a
perfect match.</p><p>Other series needed:</p><pre aria-label="Box containing code sample." tabindex=0><code>fredapi
--------
gov_debt :  &#39;DEBTTLNZA188A&#39;,  &#39;unit&#39;: &#39;pct_gdp&#39;
cpi : &#39;MKTGDPNZA646NWDB&#39;
gdp: &#39;MKTGDPNZA646NWDB&#39;, &#39;unit&#39;: &#39;usd_current&#39;
</code></pre><p>Things to later check for data validation:</p><pre aria-label="Box containing code sample." tabindex=0><code>OECD has GDP per capita in USD:
https://sdmx.oecd.org/public/rest/data/OECD.SDD.NAD,DSD_NAMAIN10@DF_TABLE1_EXPENDITURE_HCPC,/A.NZL...B1GQ_POP.......?startPeriod=1960&amp;endPeriod=2023
</code></pre><p>So for that we need Population and Exchange rate:</p><pre aria-label="Box containing code sample." tabindex=0><code>nz_pop: 
-------
https://sdmx.oecd.org/public/rest/data/OECD.ELS.SAE,DSD_POPULATION@DF_POP_HIST,/NZL..PS._T._T.?startPeriod=1950&amp;endPeriod=2022

usd_nzd:
--------
fredapi: &#39;CCUSMA02NZM618N&#39;

bis: 
&lt;https://data.bis.org/topics/XRU/BIS,WS_XRU,1.0/M.NZ.NZD.E&gt;
import pandas as pd
urls = [&#34;https://stats.bis.org/api/v2/data/dataflow/BIS/WS_XRU/1.0/M.NZ.NZD.E?format=csv&#34;]
df = pd.concat([pd.read_csv(url) for url in urls])
</code></pre><h2 id=bank-data-rbnz><a class=anchor href=#bank-data-rbnz title='Anchor for: Bank Data (RBNZ).'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>Bank Data (RBNZ)</h2><p>The RBNZ <a href=https://www.rbnz.govt.nz/statistics/series/registered-banks/banks-liabilities-deposits-by-sector target=_blank>publish series (here)</a>
in xls spreadsheets.
There is an <strong>R</strong> <a href=https://rdrr.io/cran/RBNZ/f/README.md target=_blank>package ‘rdrr’ (here)</a>
.
We will probably need to build historical values for earlier years in some
other way.</p><p>Why? Because the bank liabilities <strong>S40</strong> table I want used to be <strong>C17</strong>,
and the bank assets <strong>S34</strong> used to be <strong>S9</strong>. The
<a href=https://rdrr.io/cran/RBNZ/man/ target=_blank>full list is (here)</a></p><p>*<em>NPISHs</em> = &lsquo;Non-Profit Institutions Serving Households&rsquo;.</p><p>There are two access options <a href=https://github.com/rntq472/RBNZ/blob/master/vignettes/Overview.Rmd target=_blank>explained here</a>
:</p><ol><li>Get and IP address white-listed by the RBNZ (send them an email).</li><li>Download the xls spreadsheets first. The <strong>rdrr</strong> can access them,
as explained <a href=https://github.com/rntq472/RBNZ/blob/master/vignettes/Overview.Rmd target=_blank>here</a>
.</li></ol><p>I think we&rsquo;ll build a python script to fetch the xls and then run an <strong>R</strong>
script via subprocess.</p><p><strong>Loans:</strong> (&lsquo;hs10-long-run.xlsx&rsquo;)<br>Start: Dec 2008 - last qtr</p><p><strong>Loans (total):</strong> &lsquo;BSCA.MAC1A4.A&rsquo; in &lsquo;hs30.xlsx&rsquo;)<br>Start: Dec 2016 - last qtr</p><p><strong>Loans (household):</strong> &lsquo;BSCA.MAC1A4.AR8&rsquo; in (&lsquo;hs30.xlsx&rsquo;)<br>Start: Dec 2016 - last qtr</p><p><strong>Loans (nonfinancial):</strong> &lsquo;BSCA.MAC1A4.AR05&rsquo; in (&lsquo;hs30.xlsx&rsquo;)<br>Start: Dec 2016 - last qtr</p><p><strong>Deposits (household):</strong> (&lsquo;hs40-long-run.xlsx&rsquo;)<br>Start: Dec 1998 -last qtr.</p><p><strong>Deposits (total):</strong> (&lsquo;hs41.xlsx&rsquo;)<br>Start: Dec 2016 -last qtr.</p><p>Pity the records are not more complete for a CNN-LSTM model. But this will
be fine for our PukahaPai ODES simulation project.</p><p>Here is a sample of the data visualization. You can see there are hints
at cycles that have some weak correlation, suggesting this data is probably
fair quality for a CNN-LSTM.</p><html><head><meta charset=utf-8></head><body><div><script type=text/javascript>window.PlotlyConfig={MathJaxConfig:"local"}</script><script type=text/javascript>!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Plotly=t():e.Plotly=t()}(self,function(){return function(){var n={79288:function(e,t,n){"use strict";var o,i,a=n(3400),s={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(o in s)i=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),a.addStyleRule(i,s[o])},86712:function(e,t,n){"use strict";e.exports=n(84224)},37240:function(e,t,n){"use strict";e.exports=n(51132)},29744:function(e,t,n){"use strict";e.exports=n(94456)},29352:function(e,t,n){"use strict";e.exports=n(67244)},96144:function(e,t,n){"use strict";e.exports=n(97776)},53219:function(e,t,n){"use strict";e.exports=n(61712)},4624:function(e,t,n){"use strict";e.exports=n(95856)},54543:function(e,t,n){"use strict";e.exports=n(54272)},45e3:function(e,t,n){"use strict";e.exports=n(85404)},62300:function(e,t,n){"use strict";e.exports=n(26048)},6920:function(e,t,n){"use strict";e.exports=n(66240)},10264:function(e,t,n){"use strict";e.exports=n(40448)},32016:function(e,t,n){"use strict";e.exports=n(64884)},27528:function(e,t,n){"use strict";e.exports=n(15088)},75556:function(e,t,n){"use strict";e.exports=n(76744)},39204:function(e,t,n){"use strict";e.exports=n(94704)},73996:function(e,t,n){"use strict";e.exports=n(62396)},16489:function(e,t,n){"use strict";e.exports=n(32028)},5e3:function(e,t,n){"use strict";e.exports=n(81932)},77280:function(e,t,n){"use strict";e.exports=n(45536)},33992:function(e,t,n){"use strict";e.exports=n(42600)},17600:function(e,t,n){"use strict";e.exports=n(21536)},49116:function(e,t,n){"use strict";e.exports=n(65664)},46808:function(e,t,n){"use strict";e.exports=n(29044)},36168:function(e,t,n){"use strict";e.exports=n(48928)},13792:function(e,t,n){"use strict";var s=n(32016);s.register([n(37240),n(29352),n(5e3),n(33992),n(17600),n(49116),n(6920),n(67484),n(79440),n(39204),n(83096),n(36168),n(20260),n(63560),n(65832),n(46808),n(73996),n(48824),n(89904),n(25120),n(13752),n(4340),n(62300),n(29800),n(8363),n(54543),n(86636),n(42192),n(32140),n(77280),n(89296),n(56816),n(70192),n(45e3),n(27528),n(84764),n(3920),n(50248),n(4624),n(69967),n(10264),n(86152),n(53219),n(81604),n(63796),n(29744),n(89336),n(86712),n(75556),n(16489),n(97312),n(96144)]),e.exports=s},3920:function(e,t,n){"use strict";e.exports=n(43480)},25120:function(e,t,n){"use strict";e.exports=n(6296)},4340:function(e,t,n){"use strict";e.exports=n(7404)},86152:function(e,t,n){"use strict";e.exports=n(65456)},56816:function(e,t,n){"use strict";e.exports=n(22020)},89296:function(e,t,n){"use strict";e.exports=n(29928)},20260:function(e,t,n){"use strict";e.exports=n(75792)},32140:function(e,t,n){"use strict";e.exports=n(156)},84764:function(e,t,n){"use strict";e.exports=n(45499)},48824:function(e,t,n){"use strict";e.exports=n(3296)},69967:function(e,t,n){"use strict";e.exports=n(4184)},8363:function(e,t,n){"use strict";e.exports=n(36952)},86636:function(e,t,n){"use strict";e.exports=n(38983)},70192:function(e,t,n){"use strict";e.exports=n(11572)},81604:function(e,t,n){"use strict";e.exports=n(76924)},63796:function(e,t,n){"use strict";e.exports=n(62944)},89336:function(e,t,n){"use strict";e.exports=n(95443)},67484:function(e,t,n){"use strict";e.exports=n(34864)},97312:function(e,t,n){"use strict";e.exports=n(76272)},42192:function(e,t,n){"use strict";e.exports=n(97924)},29800:function(e,t,n){"use strict";e.exports=n(15436)},63560:function(e,t,n){"use strict";e.exports=n(5621)},89904:function(e,t,n){"use strict";e.exports=n(91304)},50248:function(e,t,n){"use strict";e.exports=n(41724)},65832:function(e,t,n){"use strict";e.exports=n(31991)},79440:function(e,t,n){"use strict";e.exports=n(22869)},13752:function(e,t,n){"use strict";e.exports=n(67776)},83096:function(e,t,n){"use strict";e.exports=n(95952)},72196:function(e){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(e,t,n){"use strict";var o=n(72196),i=n(25376),s=n(33816),a=n(31780).templatedArray;n(36208),e.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:o.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:o.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(e,t,n){"use strict";var o=n(3400),s=n(54460),a=n(23816).draw;function r(e){var t=e._fullLayout;o.filterVisible(t.annotations).forEach(function(t){var n=s.getFromId(e,t.xref),o=s.getFromId(e,t.yref),a=s.getRefType(t.xref),r=s.getRefType(t.yref);t._extremes={},"range"===a&&i(t,n),"range"===r&&i(t,o)})}function i(e,t){var c,l,d,v=t._id,n=v.charAt(0),m=e[n],i=e["a"+n],j=e[n+"ref"],y=e["a"+n+"ref"],u=e["_"+n+"padplus"],h=e["_"+n+"padminus"],r={x:1,y:-1}[n]*e[n+"shift"],f=3*e.arrowsize*e.arrowwidth||0,b=f+r,p=f-r,g=3*e.startarrowsize*e.arrowwidth||0,a=g+r,o=g-r;y===j?(c=s.findExtremes(t,[t.r2c(m)],{ppadplus:b,ppadminus:p}),d=s.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(u,a),ppadminus:Math.max(h,o)}),l={min:[c.min[0],d.min[0]],max:[c.max[0],d.max[0]]}):(a=i?a+i:a,o=i?o-i:o,l=s.findExtremes(t,[t.r2c(m)],{ppadplus:Math.max(u,b,a),ppadminus:Math.max(h,p,o)})),e._extremes[v]=l}e.exports=function(e){var t=e._fullLayout;if(o.filterVisible(t.annotations).length&&e._fullData.length)return o.syncOrAsync([a,r],e)}},42300:function(e,t,n){"use strict";var s=n(3400),r=n(24040),o=n(31780).arrayEditor;function i(e,t){var n,s,o,i,r,c,l,u=e._fullLayout.annotations,h=[],d=[],m=[],f=(t||[]).length;for(s=0;s<u.length;s++)if(l=(n=u[s]).clicktoshow){for(o=0;o<f;o++)if(r=(i=t[o]).xaxis,c=i.yaxis,r._id===n.xref&&c._id===n.yref&&r.d2r(i.x)===a(n._xclick,r)&&c.d2r(i.y)===a(n._yclick,c)){(n.visible?"onout"===l?d:m:h).push(s);break}o===f&&n.visible&&"onout"===l&&d.push(s)}return{on:h,off:d,explicitOff:m}}function a(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}e.exports={hasClickToShow:function(e,t){var n=i(e,t);return n.on.length>0||n.explicitOff.length>0},onClick:function(e,t){var n,a,c=i(e,t),l=c.on,d=c.off.concat(c.explicitOff),u={},h=e._fullLayout.annotations;if(l.length||d.length){for(n=0;n<l.length;n++)(a=o(e.layout,"annotations",h[l[n]])).modifyItem("visible",!0),s.extendFlat(u,a.getUpdateObj());for(n=0;n<d.length;n++)(a=o(e.layout,"annotations",h[d[n]])).modifyItem("visible",!1),s.extendFlat(u,a.getUpdateObj());return r.call("update",e,{},u)}}}},87192:function(e,t,n){"use strict";var o=n(3400),s=n(76308);e.exports=function(e,t,n,i){i("opacity");var a,c,l,d,u,h,m,p=i("bgcolor"),g=i("bordercolor"),f=s.opacity(g);if(i("borderpad"),m=i("borderwidth"),d=i("showarrow"),(i("text",d?" ":n._dfltTitle.annotation),i("textangle"),o.coerceFont(i,"font",n.font),i("width"),i("align"),i("height")&&i("valign"),d)&&(l=i("arrowside"),-1!==l.indexOf("end")&&(h=i("arrowhead"),u=i("arrowsize")),-1!==l.indexOf("start")&&(i("startarrowhead",h),i("startarrowsize",u)),i("arrowcolor",f?t.bordercolor:s.defaultLine),i("arrowwidth",2*(f&&m||1)),i("standoff"),i("startstandoff")),c=i("hovertext"),a=n.hoverlabel||{},c){var v=i("hoverlabel.bgcolor",a.bgcolor||(s.opacity(p)?s.rgb(p):s.defaultLine)),b=i("hoverlabel.bordercolor",a.bordercolor||s.contrast(v)),r=o.extendFlat({},a.font);r.color||(r.color=b),o.coerceFont(i,"hoverlabel.font",r)}i("captureevents",!!c)}},26828:function(e,t,n){"use strict";var s=n(38248),o=n(36896);e.exports=function(e,t,n,i){if(t=t||{},l="log"===n&&"linear"===t.type,d="linear"===n&&"log"===t.type,l||d)for(var r,l,d,u,h=e._fullLayout.annotations,c=t._id.charAt(0),a=0;a<h.length;a++)r=h[a],u="annotations["+a+"].",r[c+"ref"]===t._id&&m(c),r["a"+c+"ref"]===t._id&&m("a"+c);function m(e){var a=r[e],n=null,n=l?o(a,t.range):Math.pow(10,a);s(n)||(n=null),i(u+e,n)}}},45216:function(e,t,n){"use strict";var o=n(3400),s=n(54460),i=n(51272),a=n(87192),r=n(13916);function c(e,t,n){function i(n,s){return o.coerce(e,t,r,n,s)}if(b=i("visible"),g=i("clicktoshow"),b||g){a(e,t,n,i);for(var l,d,u,h,f,p,g,b,j,v=t.showarrow,_=["x","y"],y=[-10,-30],c={_fullLayout:n},m=0;m<2;m++)d=_[m],u=s.coerceRef(e,t,c,d,"","paper"),("paper"!==u&&s.getFromId(c,u)._annIndices.push(t._index),s.coercePosition(t,c,i,u,d,.5),v)&&(h="a"+d,l=s.coerceRef(e,t,c,h,"pixel",["pixel","paper"]),"pixel"!==l&&l!==u&&(l=t[h]="pixel"),j="pixel"===l?y[m]:.4,s.coercePosition(t,c,i,l,h,j)),i(d+"anchor"),i(d+"shift");o.noneOrAll(e,t,["x","y"]),v&&o.noneOrAll(e,t,["ax","ay"]),g&&(f=i("xclick"),p=i("yclick"),t._xclick=void 0===f?t.x:s.cleanPosition(f,c,t.xref),t._yclick=void 0===p?t.y:s.cleanPosition(p,c,t.yref))}}e.exports=function(e,t){i(e,t,{name:"annotations",handleItemDefaults:c})}},23816:function(e,t,n){"use strict";var m=n(33428),u=n(24040),j=n(7316),i=n(3400),l=i.strTranslate,r=n(54460),a=n(76308),s=n(43616),f=n(93024),h=n(72736),d=n(93972),c=n(86476),b=n(31780).arrayEditor,v=n(33652);function p(e,t){var n=e._fullLayout.annotations[t]||{},s=r.getFromId(e,n.xref),o=r.getFromId(e,n.yref);s&&s.setScale(),o&&o.setScale(),g(e,n,t,!1,s,o)}function o(e,t,n,s,o){var i=o[n],c=o[n+"ref"],a=-1!==n.indexOf("y"),l="domain"===r.getRefType(c),d=a?s.h:s.w;return e?l?i+(a?-t:t)/e._length:e.p2r(e.r2p(i)+t):i+(a?-t:t)/d}function g(e,t,n,p,g,j){var z,H,x=e._fullLayout,y=e._fullLayout._size,F=e._context.edits;p?(z="annotation-"+p,H=p+".annotations"):(z="annotation",H="annotations");var P=b(e.layout,H,t),M=P.modifyBase,O=P.modifyItem,R=P.getUpdateObj;if(x._infolayer.selectAll("."+z+'[data-index="'+n+'"]').remove(),k="clip"+x._uid+"_ann"+n,t._input&&!1!==t.visible){var k,w={x:{},y:{}},D=+t.textangle||0,L=x._infolayer.append("g").classed(z,!0).attr("data-index",String(n)).style("opacity",t.opacity),S=L.append("g").classed("annotation-text-g",!0),$=F[t.showarrow?"annotationTail":"annotationPosition"],q=t.captureevents||F.annotationText||$,_=S.append("g").style("pointer-events",q?"all":null).call(d,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",V(m.event))});t.hovertext&&_.on("mouseover",function(){var o=t.hoverlabel,n=o.font,s=this.getBoundingClientRect(),i=e.getBoundingClientRect();f.loneHover({x0:s.left-i.left,x1:s.right-i.left,y:(s.top+s.bottom)/2-i.top,text:t.hovertext,color:o.bgcolor,borderColor:o.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color,fontWeight:n.weight,fontStyle:n.style,fontVariant:n.variant},{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:e})}).on("mouseout",function(){f.loneUnhover(x._hoverlayer.node())});var A=t.borderwidth,K=t.borderpad,C=A+K,T=_.append("rect").attr("class","bg").style("stroke-width",A+"px").call(a.stroke,t.bordercolor).call(a.fill,t.bgcolor),I=t.width||t.height,B=x._topclips.selectAll("#"+k).data(I?[0]:[]);B.enter().append("clipPath").classed("annclip",!0).attr("id",k).append("rect"),B.exit().remove();var U=t.font,W=x._meta?i.templateString(t.text,x._meta):t.text,E=_.append("text").classed("annotation-text",!0).text(W);F.annotationText?E.call(h.makeEditable,{delegate:_,gd:e}).call(N).on("edit",function(n){t.text=n,this.call(N),O("text",n),g&&g.autorange&&M(g._name+".autorange",!0),j&&j.autorange&&M(j._name+".autorange",!0),u.call("_guiRelayout",e,R())}):E.call(N)}else m.selectAll("#"+k).remove();function V(e){var s={index:n,annotation:t._input,fullAnnotation:t,event:e};return p&&(s.subplotId=p),s}function N(n){return n.call(s.font,U).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),h.convertToTspans(n,e,Y),n}function Y(){K=E.selectAll("a"),1===K.size()&&K.text()===E.text()&&_.insert("a",":first-child").attr({"xlink:xlink:href":K.attr("xlink:href"),"xlink:xlink:show":K.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(T.node());var te=_.select(".annotation-text-math-group"),_e=!te.empty(),J=s.bBox((_e?te:E).node()),ye=J.width,fe=J.height,ne=t.width||ye,se=t.height||fe,ue=Math.round(ne+2*C),de=Math.round(se+2*C);function me(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}for(var ce=!1,be=["x","y"],oe=0;oe<be.length;oe++){var b,z,N,P,H,W,K,Y,G,Z,he,n=be[oe],Q=t[n+"ref"]||n,X=t["a"+n+"ref"],f={x:g,y:j}[n],ve=(D+("x"===n?0:-90))*Math.PI/180,ge=ue*Math.cos(ve),pe=de*Math.sin(ve),q=Math.abs(ge)+Math.abs(pe),Ce=t[n+"anchor"],U=t[n+"shift"]*("x"===n?1:-1),m=w[n],xe=r.getRefType(Q),le,ae,ie,ee,we,Oe,je,re;f&&"domain"!==xe?(W=f.r2fraction(t[n]),(W<0||W>1)&&(X===Q?((W=f.r2fraction(t["a"+n]))<0||W>1)&&(ce=!0):ce=!0),N=f._offset+f.r2p(t[n]),he=.5):(le="domain"===xe,"x"===n?(P=t[n],N=le?f._offset+f._length*P:N=y.l+y.w*P):(P=1-t[n],N=le?f._offset+f._length*P:N=y.t+y.h*P),he=t.showarrow?.5:P),t.showarrow?(m.head=N,b=t["a"+n],z=ge*me(.5,t.xanchor)-pe*me(.5,t.yanchor),X===Q?(ae=r.getRefType(X),"domain"===ae?("y"===n&&(b=1-b),m.tail=f._offset+f._length*b):"paper"===ae?"y"===n?(b=1-b,m.tail=y.t+y.h*b):m.tail=y.l+y.w*b:m.tail=f._offset+f.r2p(b),H=z):(m.tail=N+b,H=z+b),m.text=m.tail+z,ie=x["x"===n?"width":"height"],("paper"===Q&&(m.head=i.constrain(m.head,1,ie-1)),"pixel"===X)&&(Y=-Math.max(m.tail-3,m.text),Z=Math.min(m.tail+3,m.text)-ie,Y>0?(m.tail+=Y,m.text+=Y):Z>0&&(m.tail-=Z,m.text-=Z)),m.tail+=U,m.head+=U):(H=z=q*me(he,Ce),m.text=N+z),m.text+=U,z+=U,H+=U,t["_"+n+"padplus"]=q/2+H,t["_"+n+"padminus"]=q/2-H,t["_"+n+"size"]=q,t["_"+n+"shift"]=z}ce?_.remove():(G=0,ee=0,"left"!==t.align&&(G=(ne-ye)*("center"===t.align?.5:1)),"top"!==t.valign&&(ee=(se-fe)*("middle"===t.valign?.5:1)),_e?te.select("svg").attr({x:C+G-1,y:C+ee}).call(s.setClipUrl,I?k:null,e):(we=C+ee-J.top,Oe=C+G-J.left,E.call(h.positionText,Oe,we).call(s.setClipUrl,I?k:null,e)),B.select("rect").call(s.setRect,C,C,ne,se),T.call(s.setRect,A/2,A/2,ue-A,de-A),_.call(s.setTranslate,Math.round(w.x.text-ue/2),Math.round(w.y.text-de/2)),S.attr({transform:"rotate("+D+","+w.x.text+","+w.y.text+")"}),re=function(n,r){L.selectAll(".annotation-arrow-g").remove();var E,k,N,q,Y,G,h=w.x.head,d=w.y.head,m=w.x.tail+n,f=w.y.tail+r,H=w.x.text+n,I=w.y.text+r,P=i.rotationXYMatrix(D,H,I),Z=i.apply2DTransform(P),Q=i.apply2DTransform2(P),U=+T.attr("width"),W=+T.attr("height"),b=H-.5*U,C=b+U,x=I-.5*W,A=x+W,B=[[b,x,b,A],[b,A,C,A],[C,A,C,x],[C,x,b,x]].map(Q);if(!B.reduce(function(e,t){return e^!!i.segmentsIntersect(h,d,h+1e6,d+1e6,t[0],t[1],t[2],t[3])},!1)){B.forEach(function(e){var t=i.segmentsIntersect(m,f,h,d,e[0],e[1],e[2],e[3]);t&&(m=t.x,f=t.y)});var V=t.arrowwidth,$=t.arrowcolor,X=t.arrowside,z=L.append("g").style({opacity:a.opacity($)}).classed("annotation-arrow-g",!0),K=z.append("path").attr("d","M"+m+","+f+"L"+h+","+d).style("stroke-width",V+"px").call(a.stroke,a.rgb($));v(K,X,t),F.annotationPosition&&K.node().parentNode&&!p&&(k=h,E=d,t.standoff&&(N=Math.sqrt(Math.pow(h-m,2)+Math.pow(d-f,2)),k+=t.standoff*(m-h)/N,E+=t.standoff*(f-d)/N),G=z.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(m-k)+","+(f-E),transform:l(k,E)}).style("stroke-width",V+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)"),c.init({element:G.node(),gd:e,prepFn:function(){var e=s.getTranslate(_);q=e.x,Y=e.y,g&&g.autorange&&M(g._name+".autorange",!0),j&&j.autorange&&M(j._name+".autorange",!0)},moveFn:function(e,n){var i=Z(q,Y),a=i[0]+e,r=i[1]+n;_.call(s.setTranslate,a,r),O("x",o(g,e,"x",y,t)),O("y",o(j,n,"y",y,t)),t.axref===t.xref&&O("ax",o(g,e,"ax",y,t)),t.ayref===t.yref&&O("ay",o(j,n,"ay",y,t)),z.attr("transform",l(e,n)),S.attr({transform:"rotate("+D+","+a+","+r+")"})},doneFn:function(){u.call("_guiRelayout",e,R());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}}))}},t.showarrow&&re(0,0),$&&c.init({element:_.node(),gd:e,prepFn:function(){je=S.attr("transform")},moveFn:function(e,n){if(a="pointer",t.showarrow)t.axref===t.xref?O("ax",o(g,e,"ax",y,t)):O("ax",t.ax+e),t.ayref===t.yref?O("ay",o(j,n,"ay",y.w,t)):O("ay",t.ay+n),re(e,n);else{if(p)return;if(g)s=o(g,e,"x",y,t);else{var s,i,a,r,h,u=t._xsize/y.w,m=t.x+(t._xshift-t.xshift)/y.w-u/2;s=c.align(m+e/y.w,u,0,1,t.xanchor)}j?i=o(j,n,"y",y,t):(r=t._ysize/y.h,h=t.y-(t._yshift+t.yshift)/y.h-r/2,i=c.align(h-n/y.h,r,0,1,t.yanchor)),O("x",s),O("y",i),g&&j||(a=c.getCursor(g?.5:s,j?.5:i,t.xanchor,t.yanchor))}S.attr({transform:l(e,n)+je}),d(_,a)},clickFn:function(n,s){t.captureevents&&e.emit("plotly_clickannotation",V(s))},doneFn:function(){d(_),u.call("_guiRelayout",e,R());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}}))}}e.exports={draw:function(e){var t,n=e._fullLayout;n._infolayer.selectAll(".annotation").remove();for(t=0;t<n.annotations.length;t++)n.annotations[t].visible&&p(e,t);return j.previousPromises(e)},drawOne:p,drawRaw:g}},33652:function(e,t,n){"use strict";var i=n(33428),a=n(76308),o=n(72196),s=n(3400),r=s.strScale,c=s.strRotate,l=s.strTranslate;e.exports=function(e,t,n){var h,m,f,p,g,v,b,y,_,w,O,x,E,k,A,S,u=e.node(),M=o[n.arrowhead||0],F=o[n.startarrowhead||0],T=(n.arrowwidth||1)*(n.arrowsize||1),C=(n.arrowwidth||1)*(n.startarrowsize||1),N=t.indexOf("start")>=0,D=t.indexOf("end")>=0,s=M.backoff*T+n.standoff,d=F.backoff*C+n.startstandoff;if("line"===u.nodeName){{if(m={x:+e.attr("x1"),y:+e.attr("y1")},h={x:+e.attr("x2"),y:+e.attr("y2")},g=m.x-h.x,p=m.y-h.y,x=(v=Math.atan2(p,g))+Math.PI,s&&d&&s+d>Math.sqrt(g*g+p*p))return void j();if(s){if(s*s>g*g+p*p)return void j();S=s*Math.cos(v),A=s*Math.sin(v),h.x+=S,h.y+=A,e.attr({x2:h.x,y2:h.y})}if(d){if(d*d>g*g+p*p)return void j();E=d*Math.cos(v),k=d*Math.sin(v),m.x-=E,m.y-=k,e.attr({x1:m.x,y1:m.y})}}}else if("path"===u.nodeName){if(f=u.getTotalLength(),b="",f<s+d)return void j();O=u.getPointAtLength(0),w=u.getPointAtLength(.1),v=Math.atan2(O.y-w.y,O.x-w.x),m=u.getPointAtLength(Math.min(d,f)),b="0px,"+d+"px,",_=u.getPointAtLength(f),y=u.getPointAtLength(f-.1),x=Math.atan2(_.y-y.y,_.x-y.x),h=u.getPointAtLength(Math.max(0,f-s)),b+=f-(b?d+s:s)+"px,"+f+"px",e.style("stroke-dasharray",b)}function j(){e.style("stroke-dasharray","0px,100px")}function z(t,s,o,d){t.path&&(t.noRotate&&(o=0),i.select(u.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:l(s.x,s.y)+c(180*o/Math.PI)+r(d)}).style({fill:a.rgb(n.arrowcolor),"stroke-width":0}))}N&&z(F,m,v,C),D&&z(M,h,x,T)}},79180:function(e,t,n){"use strict";var s=n(23816),o=n(42300);e.exports={moduleType:"component",name:"annotations",layoutAttributes:n(13916),supplyLayoutDefaults:n(45216),includeBasePlot:n(36632)("annotations"),calcAutorange:n(90272),draw:s.draw,drawOne:s.drawOne,drawRaw:s.drawRaw,hasClickToShow:o.hasClickToShow,onClick:o.onClick,convertCoords:n(26828)}},45899:function(e,t,n){"use strict";var s=n(13916),o=n(67824).overrideAll,i=n(31780).templatedArray;e.exports=o(i("annotation",{visible:s.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:s.xanchor,xshift:s.xshift,yanchor:s.yanchor,yshift:s.yshift,text:s.text,textangle:s.textangle,font:s.font,width:s.width,height:s.height,opacity:s.opacity,align:s.align,valign:s.valign,bgcolor:s.bgcolor,bordercolor:s.bordercolor,borderpad:s.borderpad,borderwidth:s.borderwidth,showarrow:s.showarrow,arrowcolor:s.arrowcolor,arrowhead:s.arrowhead,startarrowhead:s.startarrowhead,arrowside:s.arrowside,arrowsize:s.arrowsize,startarrowsize:s.startarrowsize,arrowwidth:s.arrowwidth,standoff:s.standoff,startstandoff:s.startstandoff,hovertext:s.hovertext,hoverlabel:s.hoverlabel,captureevents:s.captureevents}),"calc","from-root")},42456:function(e,t,n){"use strict";var s=n(3400),o=n(54460);function i(e,t){var n=t.fullSceneLayout.domain,i=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},s.extendFlat(e._xa,a),o.setConvert(e._xa),e._xa._offset=i.l+n.x[0]*i.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*i.w*(n.x[1]-n.x[0])},e._ya={},s.extendFlat(e._ya,a),o.setConvert(e._ya),e._ya._offset=i.t+(1-n.y[1])*i.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*i.h*(n.y[1]-n.y[0])}}e.exports=function(e){for(var n=e.fullSceneLayout.annotations,t=0;t<n.length;t++)i(n[t],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},52808:function(e,t,n){"use strict";var s=n(3400),o=n(54460),i=n(51272),a=n(87192),r=n(45899);function c(e,t,n,i){function c(n,o){return s.coerce(e,t,r,n,o)}function l(e){var s=e+"axis",i={_fullLayout:{}};return i._fullLayout[s]=n[s],o.coercePosition(t,i,c,e,e,.5)}c("visible")&&(a(e,t,i.fullLayout,c),l("x"),l("y"),l("z"),s.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",c("xanchor"),c("yanchor"),c("xshift"),c("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",c("ax",-10),c("ay",-30),s.noneOrAll(e,t,["ax","ay"])))}e.exports=function(e,t,n){i(e,t,{name:"annotations",handleItemDefaults:c,fullLayout:n.fullLayout})}},71836:function(e,t,n){"use strict";var s=n(23816).drawRaw,o=n(94424),i=["x","y","z"];e.exports=function(e){for(var n=e.fullSceneLayout,r=e.dataScale,l=n.annotations,a=0;a<l.length;a++){for(var t=l[a],d=!1,c=0;c<3;c++){var u=i[c],m=t[u],h=n[u+"axis"].r2fraction(m);if(h<0||h>1){d=!0;break}}d?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+a+'"]').remove():(t._pdata=o(e.glplot.cameraParams,[n.xaxis.r2l(t.x)*r[0],n.yaxis.r2l(t.y)*r[1],n.zaxis.r2l(t.z)*r[2]]),s(e.graphDiv,t,a,e.id,t._xa,t._ya))}}},56864:function(e,t,n){"use strict";var o=n(24040),s=n(3400);e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:n(45899)}}},layoutAttributes:n(45899),handleDefaults:n(52808),includeBasePlot:function(e,t){if(n=o.subplotsRegistry.gl3d,n)for(var n,i,c=n.attrRegex,r=Object.keys(e),a=0;a<r.length;a++)i=r[a],c.test(i)&&(e[i].annotations||[]).length&&(s.pushUnique(t._basePlotModules,n),s.pushUnique(t._subplots.gl3d,i))},convert:n(42456),draw:n(71836)}},54976:function(e,t,n){"use strict";e.exports=n(38700),n(15168),n(67020),n(89792),n(55668),n(65168),n(2084),n(26368),n(24747),n(65616),n(30632),n(73040),n(1104),n(51456),n(4592),n(45348)},97776:function(e,t,n){"use strict";var h=n(54976),a=n(3400),g=n(39032),b=g.EPOCHJD,v=g.ONEDAY,l={valType:"enumerated",values:a.sortObjectKeys(h.calendars),editType:"calc",dflt:"gregorian"},p=function(e,t,n,s){var o={};return o[n]=l,a.coerce(e,t,o,n,s)},r="##",j={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:r,w:r,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},f={};function m(e){var t=f[e];return t||(f[e]=h.instance(e))}function o(e){return a.extendFlat({},l,{description:e})}function d(e){return"Sets the calendar system to use with `"+e+"` date data."}var u={xcalendar:o(d("x"))},s=a.extendFlat({},u,{ycalendar:o(d("y"))}),c=a.extendFlat({},s,{zcalendar:o(d("z"))}),i=o(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));e.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:s,bar:s,box:s,heatmap:s,contour:s,histogram:s,histogram2d:s,histogram2dcontour:s,scatter3d:c,surface:c,mesh3d:c,scattergl:s,ohlc:u,candlestick:u},layout:{calendar:o(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:i},yaxis:{calendar:i},scene:{xaxis:{calendar:i},yaxis:{calendar:i},zaxis:{calendar:i}},polar:{radialaxis:{calendar:i}}},transforms:{filter:{valuecalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:l,handleDefaults:p,handleTraceDefaults:function(e,t,n,s){for(var o=0;o<n.length;o++)p(e,t,n[o]+"calendar",s.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:m,worldCalFmt:function(e,t,n){for(var s,i,a,c,l,d=Math.floor((t+.05)/v)+b,u=m(n).fromJD(d),o=0;-1!==(o=e.indexOf("%",o));)"0"===(s=e.charAt(o+1))||"-"===s||"_"===s?(i=3,l=e.charAt(o+2),"_"===s&&(s="-")):(l=s,s="0",i=2),(a=j[l])?(c=a===r?r:u.formatDate(a[s]),e=e.substr(0,o)+c+e.substr(o+i),o+=c.length):o+=i;return e}}},22548:function(e,t){"use strict";t.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],t.defaultLine="#444",t.lightLine="#eee",t.background="#fff",t.borderLine="#BEC8D9",t.lightFraction=1e3/11},76308:function(e,t,n){"use strict";var a,c,o=n(49760),d=n(38248),l=n(38116).isTypedArray,s=e.exports={},i=n(22548);s.defaults=i.defaults,c=s.defaultLine=i.defaultLine,s.lightLine=i.lightLine,a=s.background=i.background;function r(e){if(d(e)||"string"!=typeof e)return e;if(s=e.trim(),"rgb"!==s.substr(0,3))return e;if(o=s.match(/^rgba?\s*\(([^()]*)\)$/),!o)return e;var n,s,o,i,t=o[1].trim().split(/\s*[\s,]\s*/),a="a"===s.charAt(3)&&4===t.length;if(!a&&3!==t.length)return e;for(n=0;n<t.length;n++){if(!t[n].length)return e;if(t[n]=Number(t[n]),!(t[n]>=0))return e;if(3===n)t[n]>1&&(t[n]=1);else if(t[n]>=1)return e}return i=Math.round(255*t[0])+", "+Math.round(255*t[1])+", "+Math.round(255*t[2]),a?"rgba("+i+", "+t[3]+")":"rgb("+i+")"}s.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},s.rgb=function(e){return s.tinyRGB(o(e))},s.opacity=function(e){return e?o(e).getAlpha():0},s.addOpacity=function(e,t){var n=o(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},s.combine=function(e,t){if(n=o(e).toRgb(),1===n.a)return o(e).toRgbString();var n,s=o(t||a).toRgb(),i=1===s.a?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a},r={r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a};return o(r).toRgbString()},s.interpolate=function(e,t,n){var s=o(e).toRgb(),i=o(t).toRgb(),a={r:n*s.r+(1-n)*i.r,g:n*s.g+(1-n)*i.g,b:n*s.b+(1-n)*i.b};return o(a).toRgbString()},s.contrast=function(e,t,n){var i=o(e);return 1!==i.getAlpha()&&(i=o(s.combine(e,a))),(i.isDark()?t?i.lighten(t):a:n?i.darken(n):c).toString()},s.stroke=function(e,t){var n=o(t);e.style({stroke:s.tinyRGB(n),"stroke-opacity":n.getAlpha()})},s.fill=function(e,t){var n=o(t);e.style({fill:s.tinyRGB(n),"fill-opacity":n.getAlpha()})},s.clean=function(e){if(e&&"object"==typeof e){var t,n,o,i,a,c=Object.keys(e);for(i=0;i<c.length;i++)if(t=e[o=c[i]],"color"===o.substr(o.length-5))if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]=r(t[n]);else e[o]=r(t);else if("colorscale"===o.substr(o.length-10)&&Array.isArray(t))for(n=0;n<t.length;n++)Array.isArray(t[n])&&(t[n][1]=r(t[n][1]));else if(Array.isArray(t)){if(a=t[0],!Array.isArray(a)&&a&&"object"==typeof a)for(n=0;n<t.length;n++)s.clean(t[n])}else t&&"object"==typeof t&&!l(t)&&s.clean(t)}}},42996:function(e,t,n){"use strict";var s=n(94724),o=n(25376),i=n(92880).extendFlat,a=n(67824).overrideAll;e.exports=a({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:s.linecolor,outlinewidth:s.linewidth,bordercolor:s.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:i({},s.ticks,{dflt:""}),ticklabeloverflow:i({},s.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:o({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,title:{text:{valType:"string"},font:o({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:o({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(e){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(e,t,n){"use strict";var s=n(3400),o=n(31780),i=n(26332),a=n(25404),r=n(95936),c=n(42568),l=n(42996);e.exports=function(e,t,n){u=o.newContainer(t,"colorbar"),h=e.colorbar||{};function d(e,t){return s.coerce(h,u,l,e,t)}var u,h,m,f,y,w,C,A,g=n.margin||{t:0,b:0,l:0,r:0},k=n.width-g.l-g.r,E=n.height-g.t-g.b,p="v"===d("orientation"),S=d("thicknessmode");d("thickness","fraction"===S?30/(p?k:E):30),C=d("lenmode"),d("len","fraction"===C?1:p?E:k);var j,_,x,v="paper"===d("yref"),b="paper"===d("xref"),O="left";p?(_="middle",O=b?"left":"right",j=b?1.02:1,x=.5):(_=v?"bottom":"top",O="center",j=.5,x=v?1.02:1),s.coerce(h,u,{x:{valType:"number",min:b?-2:0,max:b?3:1,dflt:j}},"x"),s.coerce(h,u,{y:{valType:"number",min:v?-2:0,max:v?3:1,dflt:x}},"y"),d("xanchor",O),d("xpad"),d("yanchor",_),d("ypad"),s.noneOrAll(h,u,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor"),y=s.coerce(h,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:p?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition"),d("ticklabeloverflow",-1!==y.indexOf("inside")?"hide past domain":"hide past div"),i(h,u,d,"linear"),m=n.font,f={noAutotickangles:!0,outerTicks:!1,font:m},-1!==y.indexOf("inside")&&(f.bgColor="black"),c(h,u,d,"linear",f),r(h,u,d,"linear",f),a(h,u,d,"linear",f),d("title.text",n._dfltTitle.colorbar),w=u.showticklabels?u.tickfont:m,A=s.extendFlat({},w,{weight:m.weight,style:m.style,variant:m.variant,color:m.color,size:s.bigFont(w.size)}),s.coerceFont(d,"title.font",A),d("title.side",p?"top":"right")}},37848:function(e,t,n){"use strict";var c=n(33428),u=n(49760),d=n(7316),p=n(24040),r=n(54460),l=n(86476),o=n(3400),a=o.strTranslate,v=n(92880).extendFlat,m=n(93972),i=n(43616),f=n(76308),w=n(81668),O=n(72736),C=n(94288).flipScale,x=n(28336),y=n(37668),_=n(94724),h=n(84284),g=h.LINE_SPACING,j=h.FROM_TL,b=h.FROM_BR,s=n(63964).cn;e.exports={draw:function(e){var t=e._fullLayout._infolayer.selectAll("g."+s.colorbar).data(function(e){var t,n,s,o,i,a,c,l,u,m,r=e._fullLayout,b=e.calcdata,d=[];function j(e){return v(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function g(){"function"==typeof o.calc?o.calc(e,n,t):(t._fillgradient=s.reversescale?C(s.colorscale):s.colorscale,t._zrange=[s[o.min],s[o.max]])}for(l=0;l<b.length;l++)if(m=b[l],(n=m[0].trace)._module&&(a=n._module.colorbar,!0===n.visible&&a))for(var f=Array.isArray(a),p=f?a:[a],h=0;h<p.length;h++)i=(o=p[h]).container,(s=i?n[i]:n)&&s.showscale&&((t=j(s.colorbar))._id="cb"+n.uid+(f&&i?"-"+i:""),t._traceIndex=n.index,t._propPrefix=(i?i+".":"")+"colorbar.",t._meta=n._meta,g(),d.push(t));for(c in r._colorAxes)(s=r[c]).showscale&&(u=r._colorAxes[c],(t=j(s.colorbar))._id="cb"+c,t._propPrefix=c+".colorbar.",t._meta=r._meta,o={min:"cmin",max:"cmax"},"heatmap"!==u[0]&&(n=u[1],o.calc=n._module.colorbar.calc),g(),d.push(t));return d}(e),function(e){return e._id});t.enter().append("g").attr("class",function(e){return e._id}).classed(s.colorbar,!0),t.each(function(t){var h,n=c.select(this);o.ensureSingle(n,"rect",s.cbbg),o.ensureSingle(n,"g",s.cbfills),o.ensureSingle(n,"g",s.cblines),o.ensureSingle(n,"g",s.cbaxis,function(e){e.classed(s.crisp,!0)}),o.ensureSingle(n,"g",s.cbtitleunshift,function(e){e.append("g").classed(s.cbtitle,!0)}),o.ensureSingle(n,"rect",s.cboutline),h=function(e,t,n){var h,M,l="v"===t.orientation,G=t.len,ue=t.lenmode,q=t.thickness,le=t.thicknessmode,H=t.outlinewidth,U=t.borderwidth,ce=t.bgcolor,re=t.xanchor,se=t.yanchor,k=t.xpad,C=t.ypad,E=t.x,A=l?t.y:1-t.y,ne="paper"===t.yref,te="paper"===t.xref,z=n._fullLayout,m=z._size,Y=t._fillcolor,T=t._line,J=t.title,p=J.side,V=t._zrange||c.extent(("function"==typeof Y?Y:T.color).domain()),je="function"==typeof T.color?T.color:function(){return T.color},ye="function"==typeof Y?Y:function(){return Y},ee=t._levels,ge=function(e,t,n){var s,o,r,a=t._levels,d=[],i=[],c=a.end+a.size/100,l=a.size,u=1.001*n[0]-.001*n[1],h=1.001*n[1]-.001*n[0];for(o=0;o<1e5&&(s=a.start+o*l,!(l>0?s>=c:s<=c));o++)s>u&&s<h&&d.push(s);if(t._fillgradient)i=[0];else if("function"==typeof t._fillcolor)if(r=t._filllevels,r)for(c=r.end+r.size/100,l=r.size,o=0;o<1e5&&(s=r.start+o*l,!(l>0?s>=c:s<=c));o++)s>n[0]&&s<n[1]&&i.push(s);else(i=d.map(function(e){return e-a.size/2})).push(i[i.length-1]+a.size);else t._fillcolor&&"string"==typeof t._fillcolor&&(i=[0]);return a.size<0&&(d.reverse(),i.reverse()),{line:d,fill:i}}(0,t,V),K=ge.fill,_e=ge.line,R=Math.round(q*("fraction"===le?l?m.w:m.h:1)),Q=R/(l?m.w:m.h),F=Math.round(G*("fraction"===ue?l?m.h:m.w:1)),I=F/(l?m.h:m.w),$=te?m.w:n._fullLayout.width,P=ne?m.h:n._fullLayout.height,N=Math.round(l?E*$+k:A*P+C),ae={center:.5,right:1}[re]||0,ie={top:1,middle:.5}[se]||0,be=l?E-ae*Q:A-ie*Q,S=l?A-ie*I:E-ae*I,L=Math.round(l?P*(1-S):$*S),oe;if(t._lenFrac=I,t._thickFrac=Q,t._uFrac=be,t._vFrac=S,h=t._axis=function(e,t,n){var i=e._fullLayout,c="v"===t.orientation,a={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:c?"right":"bottom",position:1},r=c?"y":"x",s={type:"linear",_id:r+t._id},l={letter:r,font:i.font,noAutotickangles:"y"===r,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:i.calendar};function d(e,t){return o.coerce(a,s,_,e,t)}return x(a,s,d,l,i),y(a,s,d,l),s}(n,t,V),h.position=Q+(l?E+k/m.w:A+C/m.h),M=-1!==["top","bottom"].indexOf(p),l&&M&&(h.title.side=p,h.titlex=E+k/m.w,h.titley=S+("top"===J.side?I-C/m.h:C/m.h)),l||M||(h.title.side=p,h.titley=A+C/m.h,h.titlex=S+k/m.w),T.color&&"auto"===t.tickmode){h.tickmode="linear",h.tick0=ee.start;var de=ee.size,ve=o.constrain(F/50,4,15)+1,he=(V[1]-V[0])/((t.nticks||ve)*de);he>1&&(oe=Math.pow(10,Math.floor(Math.log(he)/Math.LN10)),de*=oe*o.roundUp(he/oe,[2,5,10]),(Math.abs(ee.start)/ee.size+1e-6)%1<2e-6&&(h.tick0=0)),h.dtick=de}h.domain=l?[S+C/m.h,S+I-C/m.h]:[S+k/m.w,S+I-k/m.w],h.setScale(),e.attr("transform",a(Math.round(m.l),Math.round(m.t)));var Z,me=e.select("."+s.cbtitleunshift).attr("transform",a(-Math.round(m.l),-Math.round(m.t))),pe=h.ticklabelposition,B=h.title.font.size,W=e.select("."+s.cbaxis),D=0,X=0;function fe(o,i){var r={propContainer:h,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:z._dfltTitle.colorbar,containerGroup:e.select("."+s.cbtitle)},a="h"===o.charAt(0)?o.substr(1):"h"+o;e.selectAll("."+a+",."+a+"-math-group").remove(),w.draw(n,o,v(r,i||{}))}return o.syncOrAsync([d.previousPromises,function(){var e,t;(l&&M||!l&&!M)&&("top"===p&&(e=k+m.l+$*E,t=C+m.t+P*(1-S-I)+3+.75*B),"bottom"===p&&(e=k+m.l+$*E,t=C+m.t+P*(1-S)-3-.25*B),"right"===p&&(t=C+m.t+P*A+3+.75*B,e=k+m.l+$*S),fe(h._id+"title",{attributes:{x:e,y:t,"text-anchor":l?"start":"middle"}}))},function(){if(!l&&!M||l&&M){var f,y,_,x,C,b=e.select("."+s.cbtitle),v=b.select("text"),d=[-H/2,H/2],k=b.select(".h"+h._id+"title-math-group").node(),j=15.6;v.node()&&(j=parseInt(v.node().style.fontSize,10)*g),k?(f=i.bBox(k),X=f.width,(D=f.height)>j&&(d[1]-=(D-j)/2)):v.node()&&!v.classed(s.jsPlaceholder)&&(f=i.bBox(v.node()),X=f.width,D=f.height),l?D&&(D+=5,"top"===p?(h.domain[1]-=D/m.h,d[1]*=-1):(h.domain[0]+=D/m.h,C=O.lineCount(v),d[1]+=(1-C)*j),b.attr("transform",a(d[0],d[1])),h.setScale()):X&&("right"===p&&(h.domain[0]+=(X+B/2)/m.w),b.attr("transform",a(d[0],d[1])),h.setScale())}e.selectAll("."+s.cbfills+",."+s.cblines).attr("transform",l?a(0,Math.round(m.h*(1-h.domain[1]))):a(Math.round(m.w*h.domain[0]),0)),W.attr("transform",l?a(0,Math.round(-m.t)):a(Math.round(-m.l),0)),_=e.select("."+s.cbfills).selectAll("rect."+s.cbfill).attr("style","").data(K),_.enter().append("rect").classed(s.cbfill,!0).attr("style",""),_.exit().remove(),x=V.map(h.c2p).map(Math.round).sort(function(e,t){return e-t}),_.each(function(e,s){var r,d,a=[0===s?V[0]:(K[s]+K[s-1])/2,s===K.length-1?V[1]:(K[s]+K[s+1])/2].map(h.c2p).map(Math.round);l&&(a[1]=o.constrain(a[1]+(a[1]>a[0])?1:-1,x[0],x[1])),r=c.select(this).attr(l?"x":"y",N).attr(l?"y":"x",c.min(a)).attr(l?"width":"height",Math.max(R,2)).attr(l?"height":"width",Math.max(c.max(a)-c.min(a),2)),t._fillgradient?i.gradient(r,n,t._id,l?"vertical":"horizontalreversed",t._fillgradient,"fill"):(d=ye(e).replace("e-",""),r.attr("fill",u(d).toHexString()))}),y=e.select("."+s.cblines).selectAll("path."+s.cbline).data(T.color&&T.width?_e:[]),y.enter().append("path").classed(s.cbline,!0),y.exit().remove(),y.each(function(e){var t=N,n=Math.round(h.c2p(e))+T.width/2%1;c.select(this).attr("d","M"+(l?t+","+n:n+","+t)+(l?"h":"v")+R).call(i.lineGroupStyle,T.width,je(e),T.dash)}),W.selectAll("g."+h._id+"tick,path").remove();var E=N+R+(H||0)/2-("outside"===t.ticks?1:0),w=r.calcTicks(h),A=r.getTickSigns(h)[2];return r.drawTicks(n,h,{vals:"inside"===h.ticks?r.clipEnds(h,w):w,layer:W,path:r.makeTickPath(h,E,A),transFn:r.makeTransTickFn(h)}),r.drawLabels(n,h,{vals:w,layer:W,transFn:r.makeTransTickLabelFn(h),labelFns:r.makeLabelFns(h,E)})},function(){if(l&&!M||!l&&M){var e,s,a,o=h.position||0,i=h._offset+h._length/2;"right"===p?(e=i,s=m.l+$*o+10+B*(h.showticklabels?1:.5)):(s=i,"bottom"===p&&(e=m.t+P*o+10+(-1===pe.indexOf("inside")?h.tickfont.size:0)+("intside"!==h.ticks&&t.ticklen||0)),"top"===p)&&(a=J.text.split("<br>").length,e=m.t+P*o+10-R-g*B*a),fe((l?"h":"v")+h._id+"title",{avoid:{selection:c.select(n).selectAll("g."+h._id+"tick"),side:p,offsetTop:l?0:m.t,offsetLeft:l?m.l:0,maxShift:l?z.width:z.height},attributes:{x:s,y:e,"text-anchor":"middle"},transform:{rotate:l?-90:0,offset:0}})}},d.previousPromises,function(){g=R+H/2,-1===pe.indexOf("inside")&&(c=i.bBox(W.node()),g+=l?c.width:c.height),Z=me.select("text");var v=0,ye=l&&"top"===p,ve=!l&&"right"===p,O=0;Z.node()&&!Z.classed(s.jsPlaceholder)&&(oe=me.select(".h"+h._id+"title-math-group").node(),oe&&(l&&M||!l&&!M)?(v=(c=i.bBox(oe)).width,X=c.height):(v=(c=i.bBox(me.node())).right-m.l-(l?N:L),X=c.bottom-m.t-(l?L:N),l||"top"!==p||(g+=c.height,O=c.height)),ve&&(Z.attr("transform",a(v/2+B/2,0)),v*=2),g=Math.max(g,l?v:X)),r=2*(l?k:C)+g+U+H/2,_=0,!l&&J.text&&"bottom"===se&&A<=0&&(r+=_=r/2,O+=_),z._hColorbarMoveTitle=_,z._hColorbarMoveCBTitle=O;var de=U+H,K=(l?N:L)-de/2-(l?k:0),ee=(l?L:N)-(l?F:C+O-_);if(e.select("."+s.cbbg).attr("x",K).attr("y",ee).attr(l?"width":"height",Math.max(r-_,2)).attr(l?"height":"width",Math.max(F+de,2)).call(f.fill,ce).call(f.stroke,t.bordercolor).style("stroke-width",U),Q=ve?Math.max(v-10,0):0,e.selectAll("."+s.cboutline).attr("x",(l?N:L+k)+Q).attr("y",(l?L+C-F:N)+(ye?D:0)).attr(l?"width":"height",Math.max(R,2)).attr(l?"height":"width",Math.max(F-(l?2*C+D:2*k+Q),2)).call(f.stroke,t.outlinecolor).style({fill:"none","stroke-width":H}),y=l?ae*r:0,w=l?0:(1-ie)*r-O,y=te?m.l-y:-y,w=ne?m.t-w:-w,e.attr("transform",a(y,w)),!l&&(U||u(ce).getAlpha()&&!u.equals(z.paper_bgcolor,ce))){var ge=W.selectAll("text"),fe=ge[0].length,je=e.select("."+s.cbbg).node(),be=i.bBox(je),he=i.getTranslate(e);ge.each(function(e,t){if(s=fe-1,0===t||t===s){var n,s,r,c,o=i.bBox(this),a=i.getTranslate(this);t===s?(r=o.right+a.x,(n=be.right+he.x+L-U-2+E-r)>0&&(n=0)):0===t&&(c=o.left+a.x,(n=be.left+he.x+L+U+2-c)<0&&(n=0)),n&&(fe<3?this.setAttribute("transform","translate("+n+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var r,c,g,y,_,w,T,V,Y,X,Q,oe,o={},P=j[re],I=b[re],x=j[se],S=b[se],$=r-R;l?("pixels"===ue?(o.y=A,o.t=F*x,o.b=F*S):(o.t=o.b=0,o.yt=A+G*x,o.yb=A-G*S),"pixels"===le?(o.x=E,o.l=r*P,o.r=r*I):(o.l=$*P,o.r=$*I,o.xl=E-q*P,o.xr=E+q*I)):("pixels"===ue?(o.x=E,o.l=F*P,o.r=F*I):(o.l=o.r=0,o.xl=E+G*P,o.xr=E-G*I),"pixels"===le?(o.y=1-A,o.t=r*x,o.b=r*S):(o.t=$*x,o.b=$*S,o.yt=A-q*x,o.yb=A+q*S)),T=t.y<.5?"b":"t",Y=t.x<.5?"l":"r",n._fullLayout._reservedMargin[t._id]={},V={r:z.width-K-y,l:K+o.r,b:z.height-ee-w,t:ee+o.b},te&&ne?d.autoMargin(n,t._id,o):te?n._fullLayout._reservedMargin[t._id][T]=V[T]:ne||l?n._fullLayout._reservedMargin[t._id][Y]=V[Y]:n._fullLayout._reservedMargin[t._id][T]=V[T]}],n)}(n,t,e),h&&h.then&&(e._promises||[]).push(h),e._context.edits.colorbarPosition&&function(e,t,n){var s,o,r,i="v"===t.orientation,c=n._fullLayout._size;l.init({element:e.node(),gd:n,prepFn:function(){r=e.attr("transform"),m(e)},moveFn:function(n,d){e.attr("transform",r+a(n,d)),s=l.align((i?t._uFrac:t._vFrac)+n/c.w,i?t._thickFrac:t._lenFrac,0,1,t.xanchor),o=l.align((i?t._vFrac:1-t._uFrac)-d/c.h,i?t._lenFrac:t._thickFrac,0,1,t.yanchor);var u=l.getCursor(s,o,t.xanchor,t.yanchor);m(e,u)},doneFn:function(){if(m(e),void 0!==s&&void 0!==o){var i={};i[t._propPrefix+"x"]=s,i[t._propPrefix+"y"]=o,void 0!==t._traceIndex?p.call("_guiRestyle",n,i,t._traceIndex):p.call("_guiRelayout",n,i)}}})}(n,t,e)}),t.exit().each(function(t){d.autoMargin(e,t._id)}).remove(),t.order()}}},90553:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e){return s.isPlainObject(e.colorbar)}},55080:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:n(42996),supplyDefaults:n(64013),draw:n(37848).draw,hasColorbar:n(90553)}},49084:function(e,t,n){"use strict";var i=n(42996),a=n(53756).counter,r=n(95376),o=n(88304).scales;function s(e){return"`"+e+"`"}r(o),e.exports=function(e,t){e=e||"";var n,l,p,r=(t=t||{}).cLetter||"c",j=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),b="showScaleDflt"in t?t.showScaleDflt:"z"===r,g="string"==typeof t.colorscaleDflt?o[t.colorscaleDflt]:null,h=t.editTypeOverride||"",c=e?e+".":"";"colorAttr"in t?(p=t.colorAttr,t.colorAttr):s(c+(p={z:"z",c:"color"}[r]));var f=r+"auto",m=r+"min",u=r+"max",v=r+"mid",d=(s(c+f),s(c+m),s(c+u),{});return d[m]=d[u]=void 0,l={},l[f]=!1,n={},"color"===p&&(n.color={valType:"color",arrayOk:!0,editType:h||"style"},t.anim&&(n.color.anim=!0)),n[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:d},n[m]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:l},n[u]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:l},n[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:d},n.colorscale={valType:"colorscale",editType:"calc",dflt:g,impliedEdits:{autocolorscale:!1}},n.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},n.reversescale={valType:"boolean",dflt:!1,editType:"plot"},j||(n.showscale={valType:"boolean",dflt:b,editType:"calc"},n.colorbar=i),t.noColorAxis||(n.coloraxis={valType:"subplotid",regex:a("coloraxis"),dflt:null,editType:"calc"}),n}},47128:function(e,t,n){"use strict";var o=n(38248),s=n(3400),i=n(94288).extractOpts;e.exports=function(e,t,n){var p,h=e._fullLayout,g=n.vals,v=n.containerStr,u=v?s.nestedProperty(t,v).get():t,l=i(u),d=!1!==l.auto,a=l.min,r=l.max,c=l.mid,m=function(){return s.aggNums(Math.min,null,g)},f=function(){return s.aggNums(Math.max,null,g)};void 0===a?a=m():d&&(a=u._colorAx&&o(a)?Math.min(a,m()):m()),void 0===r?r=f():d&&(r=u._colorAx&&o(r)?Math.max(r,f()):f()),d&&void 0!==c&&(r-c>c-a?a=c-(r-c):r-c<c-a&&(r=c+(c-a))),a===r&&(a-=.5,r+=.5),l._sync("min",a),l._sync("max",r),l.autocolorscale&&(p=a*r<0?h.colorscale.diverging:a>=0?h.colorscale.sequential:h.colorscale.sequentialminus,l._sync("colorscale",p))}},95504:function(e,t,n){"use strict";var s=n(3400),o=n(94288).hasColorscale,i=n(94288).extractOpts;e.exports=function(e,t){function d(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function r(e,n){if(o=n.container?s.nestedProperty(e,n.container).get():e,o)if(o.coloraxis)o._colorAx=t[o.coloraxis];else{var o,a=i(o),r=a.auto;(r||void 0===a.min)&&d(o,n.min),(r||void 0===a.max)&&d(o,n.max),a.autocolorscale&&d(o,"colorscale")}}for(c=0;c<e.length;c++){var c,l,u,n=e[c],a=n._module.colorbar;if(a)if(Array.isArray(a))for(l=0;l<a.length;l++)r(n,a[l]);else r(n,a);o(n,"marker.line")&&r(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(u in t._colorAxes)r(t[u],{min:"cmin",max:"cmax"})}},27260:function(e,t,n){"use strict";var a=n(38248),o=n(3400),r=n(90553),c=n(64013),i=n(88304).isValid,l=n(24040).traceIs;function s(e,t){var n=t.slice(0,t.length-1);return t?o.nestedProperty(e,n).get()||{}:e}e.exports=function e(t,n,d,u,h){var p,v,b,y,_,w,O,k,m=h.prefix,f=h.cLetter,A="_module"in n,g=s(t,m),E=s(n,m),j=s(n._template||{},m)||{},x=function(){return delete t.coloraxis,delete n.coloraxis,e(t,n,d,u,h)};if(A&&(y=d._colorAxes||{},p=u(m+"coloraxis"),p))return w=l(n,"contour")&&o.nestedProperty(n,"contours.coloring").get()||"heatmap",v=y[p],void(v?(v[2].push(x),v[0]!==w&&(v[0]=!1,o.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[p]=[w,n,[x]]);var S=g[f+"min"],C=g[f+"max"],M=a(S)&&a(C)&&S<C;u(m+f+"auto",!M)?u(m+f+"mid"):(u(m+f+"min"),u(m+f+"max")),_=g.colorscale,O=j.colorscale,void 0!==_&&(b=!i(_)),void 0!==O&&(b=!i(O)),u(m+"autocolorscale",b),u(m+"colorscale"),u(m+"reversescale"),"marker.line."!==m&&(m&&A&&(k=r(g)),u(m+"showscale",k)&&(m&&j&&(E._template=j),c(g,E,d)))}},94288:function(e,t,n){"use strict";var p=n(33428),i=n(49760),o=n(38248),a=n(3400),d=n(76308),f=n(88304).isValid,l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],s=["min","max","mid","auto"];function u(e){var t,n,a,r,c=e._colorAx,o=c||e,i={};for(t=0;t<l.length;t++)i[n=l[t]]=o[n];if(c)for(r="c",t=0;t<s.length;t++)i[n=s[t]]=o["c"+n];else{for(t=0;t<s.length;t++)((a="c"+(n=s[t]))in o||(a="z"+n)in o)&&(i[n]=o[a]);r=a.charAt(0)}return i._sync=function(e,t){var n=-1!==s.indexOf(e)?r+e:e;o[n]=o["_"+n]=t},i}function h(e){for(var s,t=u(e),c=t.min,l=t.max,i=t.reversescale?m(t.colorscale):t.colorscale,o=i.length,a=new Array(o),r=new Array(o),n=0;n<o;n++)s=i[n],a[n]=c+s[0]*(l-c),r[n]=s[1];return{domain:a,range:r}}function m(e){for(var n,s=e.length,o=new Array(s),t=s-1,i=0;t>=0;t--,i++)n=e[t],o[i]=[1-n[0],n[1]];return o}function c(e,t){t=t||{};for(var s,g=e.domain,l=e.range,u=l.length,h=new Array(u),a=0;a<u;a++)s=i(l[a]).toRgb(),h[a]=[s.r,s.g,s.b,s.a];var c,n=p.scale.linear().domain(g).range(h).clamp(!0),m=t.noNumericCheck,f=t.returnArray;return(c=m&&f?n:m?function(e){return r(n(e))}:f?function(e){return o(e)?n(e):i(e).isValid()?e:d.defaultLine}:function(e){return o(e)?r(n(e)):i(e).isValid()?e:d.defaultLine}).domain=n.domain,c.range=function(){return l},c}function r(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return i(t).toRgbString()}e.exports={hasColorscale:function(e,t,n){var r,c,s=t?a.nestedProperty(e,t).get()||{}:e,i=s[n||"color"];if(i&&i._inputArray&&(i=i._inputArray),c=!1,a.isArrayOrTypedArray(i))for(r=0;r<i.length;r++)if(o(i[r])){c=!0;break}return a.isPlainObject(s)&&(c||!0===s.showscale||o(s.cmin)&&o(s.cmax)||f(s.colorscale)||a.isPlainObject(s.colorbar))},extractOpts:u,extractScale:h,flipScale:m,makeColorScaleFunc:c,makeColorScaleFuncFromTrace:function(e,t){return c(h(e),t)}}},8932:function(e,t,n){"use strict";var o=n(88304),s=n(94288);e.exports={moduleType:"component",name:"colorscale",attributes:n(49084),layoutAttributes:n(92332),supplyLayoutDefaults:n(51608),handleDefaults:n(27260),crossTraceDefaults:n(95504),calc:n(47128),scales:o.scales,defaultScale:o.defaultScale,getScale:o.get,isValidScale:o.isValid,hasColorscale:s.hasColorscale,extractOpts:s.extractOpts,extractScale:s.extractScale,flipScale:s.flipScale,makeColorScaleFunc:s.makeColorScaleFunc,makeColorScaleFuncFromTrace:s.makeColorScaleFuncFromTrace}},92332:function(e,t,n){"use strict";var o=n(92880).extendFlat,i=n(49084),s=n(88304).scales;e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:s.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:s.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:s.RdBu,editType:"calc"}},coloraxis:o({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(e,t,n){"use strict";var s=n(3400),i=n(31780),o=n(92332),a=n(27260);e.exports=function(e,t){function d(n,i){return s.coerce(e,t,o,n,i)}d("colorscale.sequential"),d("colorscale.sequentialminus"),d("colorscale.diverging");var n,r,c,l,u,h=t._colorAxes;function m(e,t){return s.coerce(u,l,o.coloraxis,e,t)}for(n in h)if(r=h[n],r[0])u=e[n]||{},(l=i.newContainer(t,n,"coloraxis"))._name=n,a(u,l,t,m,{prefix:"",cLetter:"c"});else{for(c=0;c<r[2].length;c++)r[2][c]();delete t._colorAxes[n]}}},88304:function(e,t,n){"use strict";var a=n(49760),s={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=s.RdBu;function i(e){var t,n,s=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(n=0;n<e.length;n++){if(t=e[n],2!==t.length||+t[0]<s||!a(t[1]).isValid())return!1;s=+t[0]}return!0}e.exports={scales:s,defaultScale:o,get:function(e,t){if(t||(t=o),!e)return t;function n(){try{e=s[e]||JSON.parse(e)}catch{e=t}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),i(e)?e:t},isValid:function(e){return void 0!==s[e]||i(e)}}},78316:function(e){"use strict";e.exports=function(e,t,n,s,o){var i=(e-n)/(s-n),a=i+t/(s-n),r=(i+a)/2;return"left"===o||"bottom"===o?i:"center"===o||"middle"===o?r:"right"===o||"top"===o?a:i<2/3-r?i:a>4/3-r?a:r}},67416:function(e,t,n){"use strict";var s=n(3400),o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(e,t,n,i){return e="left"===n?0:"center"===n?1:"right"===n?2:s.constrain(Math.floor(3*e),0,2),t="bottom"===i?0:"middle"===i?1:"top"===i?2:s.constrain(Math.floor(3*t),0,2),o[t][e]}},72760:function(e,t){"use strict";t.selectMode=function(e){return"lasso"===e||"select"===e},t.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},t.openMode=function(e){return"drawline"===e||"drawopenpath"===e},t.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},t.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},t.selectingOrDrawing=function(e){return t.freeMode(e)||t.rectMode(e)}},86476:function(e,t,n){"use strict";var o,d=n(29128),i=n(52264),u=n(89184),c=n(3400).removeElement,l=n(33816),s=e.exports={};s.align=n(78316),s.getCursor=n(67416),o=n(2616);function r(){var e,t=document.createElement("div");return t.className="dragcover",e=t.style,e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function a(e){return d(e.changedTouches?e.changedTouches[0]:e,document.body)}s.unhover=o.wrapped,s.unhoverRaw=o.raw,s.init=function(e){var d,h,m,p,v,y,_,w,O,t=e.gd,o=1,j=t._context.doubleClickDelay,n=e.element;t._mouseDownTime||(t._mouseDownTime=0),n.style.pointerEvents="all",n.onmousedown=f,u?(n._ontouchstart&&n.removeEventListener("touchstart",n._ontouchstart),n._ontouchstart=f,n.addEventListener("touchstart",f,{passive:!1})):n.ontouchstart=f,_=e.clampFn||function(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]};function f(s){t._dragged=!1,t._dragging=!0;var c=a(s);v=c[0],d=c[1],y=s.target,w=s,p=2===s.buttons||s.ctrlKey,void 0===s.clientX&&void 0===s.clientY&&(s.clientX=v,s.clientY=d),(O=(new Date).getTime())-t._mouseDownTime<j?o+=1:(o=1,t._mouseDownTime=O),e.prepFn&&e.prepFn(s,v,d),i&&!p?(m=r()).style.cursor=window.getComputedStyle(n).cursor:i||(m=document,h=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(n).cursor),document.addEventListener("mouseup",b),document.addEventListener("touchend",b),!1!==e.dragmode&&(s.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(o){o.preventDefault();var c=a(o),h=e.minDrag||l.MINDRAG,u=_(c[0]-v,c[1]-d,h),i=u[0],r=u[1];(i||r)&&(t._dragged=!0,s.unhover(t,o)),t._dragged&&e.moveFn&&!p&&(t._dragdata={element:n,dx:i,dy:r},e.moveFn(i,r))}function b(n){if(delete t._dragdata,!1!==e.dragmode&&(n.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",b),document.removeEventListener("touchend",b),i?c(m):h&&(m.documentElement.style.cursor=h,h=null),t._dragging){if(t._dragging=!1,(new Date).getTime()-t._mouseDownTime>j&&(o=Math.max(o-1,1)),t._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(o,w),!p){try{s=new MouseEvent("click",n)}catch{var s,r=a(n);(s=document.createEvent("MouseEvents")).initMouseEvent("click",n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,r[0],r[1],n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)}y.dispatchEvent(s)}t._dragging=!1,t._dragged=!1}else t._dragged=!1}},s.coverSlip=r},2616:function(e,t,n){"use strict";var o=n(95924),i=n(91200),a=n(52200).getGraphDiv,r=n(92456),s=e.exports={};s.wrapped=function(e,t,n){(e=a(e))._fullLayout&&i.clear(e._fullLayout._uid+r.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,s=e._hoverdata;t||(t={}),t.target&&!e._dragged&&!1===o.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&s&&e.emit("plotly_unhover",{event:t,points:s}))}},98192:function(e,t){"use strict";t.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},t.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(e,t,n){"use strict";var p,v,_,x,C,z,D,L,B,V,$,q,i=n(33428),o=n(3400),J=o.numberFormat,c=n(38248),j=n(49760),g=n(24040),a=n(76308),Q=n(8932),f=o.strTranslate,O=n(72736),G=n(9616),X=n(84284).LINE_SPACING,T=n(13448).DESELECTDIM,Z=n(43028),ee=n(7152),te=n(10624).appendArrayPointValue,s=e.exports={};function W(e,t,n,o){var l=t.fillpattern,i=t.fillgradient,h=l&&s.getPatternAttr(l.shape,0,"");if(h){var r,c,d,u,v=s.getPatternAttr(l.bgcolor,0,null),g=s.getPatternAttr(l.fgcolor,0,null),m=l.fgopacity,b=s.getPatternAttr(l.size,0,8),f=s.getPatternAttr(l.solidity,0,.3),p=t.uid;s.pattern(e,"point",n,p,h,b,f,void 0,l.fillmode,v,g,m)}else i&&"none"!==i.type?(d=i.type,u="scatterfill-"+t.uid,o&&(u="legendfill-"+t.uid),o||void 0===i.start&&void 0===i.stop?("horizontal"===d&&(d+="reversed"),e.call(s.gradient,n,u,d,i.colorscale,"fill")):("horizontal"===d?(c={x:i.start,y:0},r={x:i.stop,y:0}):"vertical"===d&&(c={x:0,y:i.start},r={x:0,y:i.stop}),c.x=t._xA.c2p(void 0===c.x?t._extremes.x.min[0].val:c.x,!0),c.y=t._yA.c2p(void 0===c.y?t._extremes.y.min[0].val:c.y,!0),r.x=t._xA.c2p(void 0===r.x?t._extremes.x.max[0].val:r.x,!0),r.y=t._yA.c2p(void 0===r.y?t._extremes.y.max[0].val:r.y,!0),e.call(R,n,u,"linear",i.colorscale,"fill",c,r,!0,!1))):t.fillcolor&&e.call(a.fill,t.fillcolor)}s.font=function(e,t,n,s,i,r,c){o.isPlainObject(t)&&(c=t.variant,r=t.style,i=t.weight,s=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),s&&e.call(a.fill,s),i&&e.style("font-weight",i),r&&e.style("font-style",r),c&&e.style("font-variant",c)},s.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},s.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},s.setRect=function(e,t,n,o,i){e.call(s.setPosition,t,n).call(s.setSize,o,i)},s.translatePoint=function(e,t,n,s){var o=n.c2p(e.x),i=s.c2p(e.y);return!!(c(o)&&c(i)&&t.node())&&("text"===t.node().nodeName?t.attr("x",o).attr("y",i):t.attr("transform",f(o,i)),!0)},s.translatePoints=function(e,t,n){e.each(function(e){var o=i.select(this);s.translatePoint(e,o,t,n)})},s.hideOutsideRangePoint=function(e,t,n,s,o,i){t.attr("display",n.isPtWithinRange(e,o)&&s.isPtWithinRange(e,i)?null:"none")},s.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var n=t.xaxis,o=t.yaxis;e.each(function(t){var a=t[0].trace,r=a.xcalendar,c=a.ycalendar,l=g.traceIs(a,"bar-like")?".bartext":".point,.textpoint";e.selectAll(l).each(function(e){s.hideOutsideRangePoint(e,i.select(this),n,o,r,c)})})}},s.crispRound=function(e,t,n){return t&&c(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},s.singleLineStyle=function(e,t,n,o,i){t.style("fill","none");var r=(((e||[])[0]||{}).trace||{}).line||{},c=n||r.width||0,l=i||r.dash||"";a.stroke(t,o||r.color),s.dashLine(t,l,c)},s.lineGroupStyle=function(e,t,n,o){e.style("fill","none").each(function(e){var r=(((e||[])[0]||{}).trace||{}).line||{},c=t||r.width||0,l=o||r.dash||"";i.select(this).call(a.stroke,n||r.color).call(s.dashLine,l,c)})},s.dashLine=function(e,t,n){n=+n||0,t=s.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},s.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},s.singleFillStyle=function(e,t){var n=i.select(e.node());W(e,((n.data()[0]||[])[0]||{}).trace||{},t,!1)},s.fillGroupStyle=function(e,t,n){e.style("stroke-width",0).each(function(e){var s=i.select(this);e[0].trace&&W(s,e[0].trace,t,n)})},_=n(71984),s.symbolNames=[],s.symbolFuncs=[],s.symbolBackOffs=[],s.symbolNeedLines={},s.symbolNoDot={},s.symbolNoFill={},s.symbolList=[],Object.keys(_).forEach(function(e){var n=_[e],t=n.n;s.symbolList.push(t,String(t),e,t+100,String(t+100),e+"-open"),s.symbolNames[t]=e,s.symbolFuncs[t]=n.f,s.symbolBackOffs[t]=n.backoff||0,n.needLine&&(s.symbolNeedLines[t]=!0),n.noDot?s.symbolNoDot[t]=!0:s.symbolList.push(t+200,String(t+200),e+"-dot",t+300,String(t+300),e+"-open-dot"),n.noFill&&(s.symbolNoFill[t]=!0)}),B=s.symbolNames.length;function N(e,t,n,o){var i=e%100;return s.symbolFuncs[i](t,n,o)+(e>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}s.symbolNumber=function(e){if(c(e))e=+e;else if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),(e=s.symbolNames.indexOf(e))>=0&&(e+=t)}return e%100>=B||e>=400?0:Math.floor(Math.max(e,0))},x=J("~f"),C={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function R(e,t,n,s,r,c,l,d,u,h){g=r.length,"linear"===s?f={node:"linearGradient",attrs:{x1:l.x,y1:l.y,x2:d.x,y2:d.y,gradientUnits:u?"userSpaceOnUse":"objectBoundingBox"},reversed:h}:"radial"===s&&(f={node:"radialGradient",reversed:h});for(p=new Array(g),m=0;m<g;m++)f.reversed?p[g-1-m]=[x(100*(1-r[m][0])),r[m][1]]:p[m]=[x(100*r[m][0]),r[m][1]];var m,f,p,g,b=t._fullLayout,v="g"+b._uid+"-"+n,y=b._defs.select(".gradients").selectAll("#"+v).data([s+p.join(";")],o.identity);y.exit().remove(),y.enter().append(f.node).each(function(){var e,t=i.select(this);f.attrs&&t.attr(f.attrs),t.attr("id",v),e=t.selectAll("stop").data(p),e.exit().remove(),e.enter().append("stop"),e.each(function(e){var t=j(e[1]);i.select(this).attr({offset:e[0]+"%","stop-color":a.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(c,w(v,t)).style(c+"-opacity",null),e.classed("gradient_filled",!0)}s.gradient=function(e,t,n,s,o,i){var a=C[s];return R(e,t,n,a.type,o,i,a.start,a.stop,!1,a.reversed)},s.pattern=function(e,t,n,s,r,c,l,d,u,h,m,f){D="legend"===t,d&&("overlay"===u?(h=d,m=a.contrast(h)):(h=void 0,m=d));var p,g,v,b,y,C,E,k,S,T,z,D,F=n._fullLayout,A="p"+F._uid+"-"+s,_={},M=j(m),x=a.tinyRGB(M),O=f*M.getAlpha();switch(r){case"/":p=c*Math.sqrt(2),g=c*Math.sqrt(2),v="path",_={d:b="M-"+p/4+","+g/4+"l"+p/2+",-"+g/2+"M0,"+g+"L"+p+",0M"+p/4*3+","+g/4*5+"l"+p/2+",-"+g/2,opacity:O,stroke:x,"stroke-width":(y=l*c)+"px"};break;case"\\":p=c*Math.sqrt(2),g=c*Math.sqrt(2),v="path",_={d:b="M"+p/4*3+",-"+g/4+"l"+p/2+","+g/2+"M0,0L"+p+","+g+"M-"+p/4+","+g/4*3+"l"+p/2+","+g/2,opacity:O,stroke:x,"stroke-width":(y=l*c)+"px"};break;case"x":p=c*Math.sqrt(2),g=c*Math.sqrt(2),b="M-"+p/4+","+g/4+"l"+p/2+",-"+g/2+"M0,"+g+"L"+p+",0M"+p/4*3+","+g/4*5+"l"+p/2+",-"+g/2+"M"+p/4*3+",-"+g/4+"l"+p/2+","+g/2+"M0,0L"+p+","+g+"M-"+p/4+","+g/4*3+"l"+p/2+","+g/2,y=c-c*Math.sqrt(1-l),v="path",_={d:b,opacity:O,stroke:x,"stroke-width":y+"px"};break;case"|":v="path",v="path",_={d:b="M"+(p=c)/2+",0L"+p/2+","+(g=c),opacity:O,stroke:x,"stroke-width":(y=l*c)+"px"};break;case"-":v="path",v="path",_={d:b="M0,"+(g=c)/2+"L"+(p=c)+","+g/2,opacity:O,stroke:x,"stroke-width":(y=l*c)+"px"};break;case"+":v="path",b="M"+(p=c)/2+",0L"+p/2+","+(g=c)+"M0,"+g/2+"L"+p+","+g/2,y=c-c*Math.sqrt(1-l),v="path",_={d:b,opacity:O,stroke:x,"stroke-width":y+"px"};break;case".":p=c,g=c,l<Math.PI/4?C=Math.sqrt(l*c*c/Math.PI):(T=l,E=Math.PI/4,1,C=(S=c/2)+(c/Math.sqrt(2)-S)*(T-E)/(1-E)),v="circle",_={cx:p/2,cy:g/2,r:C,opacity:O,fill:x}}z=[r||"noSh",h||"noBg",m||"noFg",c,l].join(";"),k=F._defs.select(".patterns").selectAll("#"+A).data([z],o.identity),k.exit().remove(),k.enter().append("pattern").each(function(){if(e=i.select(this),e.attr({id:A,width:p+"px",height:g+"px",patternUnits:"userSpaceOnUse",patternTransform:D?"scale(0.8)":""}),h){var e,t,n=j(h),o=a.tinyRGB(n),r=n.getAlpha(),s=e.selectAll("rect").data([0]);s.exit().remove(),s.enter().append("rect").attr({width:p+"px",height:g+"px",fill:o,"fill-opacity":r})}t=e.selectAll(v).data([0]),t.exit().remove(),t.enter().append(v).attr(_)}),e.style("fill",w(A,n)).style("fill-opacity",null),e.classed("pattern_filled",!0)},s.initGradients=function(e){var t=e._fullLayout;o.ensureSingle(t._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),i.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)},s.initPatterns=function(e){var t=e._fullLayout;o.ensureSingle(t._defs,"g","patterns").selectAll("pattern").remove(),i.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)},s.getPatternAttr=function(e,t,n){return e&&o.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},s.pointStyle=function(e,t,n,o){if(e.size()){var a=s.makePointStyleFns(t);e.each(function(e){s.singlePointStyle(e,i.select(this),t,a,n,o)})}},s.singlePointStyle=function(e,t,n,i,r,c){if(u=n.marker,m=u.line,(c&&c.i>=0&&void 0===e.i&&(e.i=c.i),t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):void 0===e.mo?u.opacity:e.mo),i.ms2mrc)&&(_="various"===e.ms||"various"===u.size?3:i.ms2mrc(e.ms),e.mrc=_,i.selectedSizeFn&&(_=e.mrc=i.selectedSizeFn(e)),k=s.symbolNumber(e.mx||u.symbol)||0,e.om=k%200>=100,M=E(e,n),S=y(e,n),t.attr("d",N(k,_,M,S))),f=!1,e.so?(p=m.outlierwidth,O=m.outliercolor,h=u.outliercolor):(A=(m||{}).width,p=(e.mlw+1||A+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,O="mlc"in e?e.mlcc=i.lineScale(e.mlc):o.isArrayOrTypedArray(m.color)?a.defaultLine:m.color,o.isArrayOrTypedArray(u.color)&&(h=a.defaultLine,f=!0),h="mc"in e?e.mcc=i.markerScale(e.mc):u.color||u.colors||"rgba(0,0,0,0)",i.selectedColorFn&&(h=i.selectedColorFn(e))),e.om)t.call(a.stroke,h).style({"stroke-width":(p||1)+"px",fill:"none"});else{if(t.style("stroke-width",(e.isBlank?0:p)+"px"),j=u.gradient,d=e.mgt,d?f=!0:d=j&&j.type,o.isArrayOrTypedArray(d)&&(d=d[0],C[d]||(d=0)),l=u.pattern,x=l&&s.getPatternAttr(l.shape,e.i,""),d&&"none"!==d)b=e.mgc,b?f=!0:b=j.color,w=n.uid,f&&(w+="-"+e.i),s.gradient(t,r,w,d,[[0,b],[1,h]],"fill");else if(x){v=!1,g=l.fgcolor,!g&&c&&c.color&&(g=c.color,v=!0);var l,d,u,h,m,f,p,g,b,j,_,w,O,x,k,A,S,M,T=s.getPatternAttr(g,e.i,c&&c.color||null),z=s.getPatternAttr(l.bgcolor,e.i,null),D=l.fgopacity,L=s.getPatternAttr(l.size,e.i,8),R=s.getPatternAttr(l.solidity,e.i,.3),v=v||e.mcc||o.isArrayOrTypedArray(l.shape)||o.isArrayOrTypedArray(l.bgcolor)||o.isArrayOrTypedArray(l.fgcolor)||o.isArrayOrTypedArray(l.size)||o.isArrayOrTypedArray(l.solidity),F=n.uid;v&&(F+="-"+e.i),s.pattern(t,"point",r,F,x,L,R,e.mcc,l.fillmode,z,T,D)}else o.isArrayOrTypedArray(h)?a.fill(t,h[e.i]):a.fill(t,h);p&&a.stroke(t,O)}},s.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=s.tryColorscale(n,""),t.lineScale=s.tryColorscale(n,"line"),g.traceIs(e,"symbols")&&(t.ms2mrc=Z.isBubble(e)?ee(e):function(){return(n.size||6)/2}),e.selectedpoints&&o.extendFlat(t,s.makeSelectedPointStyleFns(e)),t},s.makeSelectedPointStyleFns=function(e){var n={},_=e.selected||{},y=e.unselected||{},t=e.marker||{},s=_.marker||{},i=y.marker||{},j=t.opacity,d=s.opacity,u=i.opacity,f=void 0!==d,h=void 0!==u;(o.isArrayOrTypedArray(j)||f||h)&&(n.selectedOpacityFn=function(e){var n=void 0===e.mo?t.opacity:e.mo;return e.selected?f?d:n:h?u:T*n});var v=t.color,a=s.color,m=i.color;(a||m)&&(n.selectedColorFn=function(e){var t=e.mcc||v;return e.selected?a||t:m||t});var b=t.size,l=s.size,c=i.size,r=void 0!==l,p=void 0!==c;return g.traceIs(e,"symbols")&&(r||p)&&(n.selectedSizeFn=function(e){var t=e.mrc||b/2;return e.selected?r?l/2:t:p?c/2:t}),n},s.makeSelectedTextStyleFns=function(e){var t={},l=e.selected||{},s=e.unselected||{},o=e.textfont||{},i=l.textfont||{},r=s.textfont||{},c=o.color,n=i.color,d=r.color;return t.selectedTextColorFn=function(e){var t=e.tc||c;return e.selected?n||t:d||(n?t:a.addOpacity(t,T))},t},s.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=s.makeSelectedPointStyleFns(t),r=t.marker||{},o=[];n.selectedOpacityFn&&o.push(function(e,t){e.style("opacity",n.selectedOpacityFn(t))}),n.selectedColorFn&&o.push(function(e,t){a.fill(e,n.selectedColorFn(t))}),n.selectedSizeFn&&o.push(function(e,o){var a=o.mx||r.symbol||0,i=n.selectedSizeFn(o);e.attr("d",N(s.symbolNumber(a),i,E(o,t),y(o,t))),o.mrc2=i}),o.length&&e.each(function(e){for(var n=i.select(this),t=0;t<o.length;t++)o[t](n,e)})}},s.tryColorscale=function(e,t){var s,n=t?o.nestedProperty(e,t).get():e;return n&&(s=n.color,(n.colorscale||n._colorAx)&&o.isArrayOrTypedArray(s))?Q.makeColorScaleFuncFromTrace(n):o.identity},v={start:1,end:-1,middle:0,bottom:1,top:-1};function M(e,t,n,s,o){var l=i.select(e.node().parentNode),a=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",r=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",c=s?s/.8+1:0,d=(O.lineCount(e)-1)*X+1,u=v[r]*c,h=.75*n+v[a]*c+(v[a]-1)*d*n/2;e.attr("text-anchor",r),o||l.attr("transform",f(u,h))}function F(e,t){var n=e.ts||t.textfont.size;return c(n)&&n>0?n:0}function h(e,t,n){return n&&(e=P(e)),t?d(e[1]):r(e[0])}function r(e){var t=i.round(e,2);return D=t,t}function d(e){var t=i.round(e,2);return z=t,t}function b(e,t,n,s){var l=e[0]-t[0],u=e[1]-t[1],h=n[0]-t[0],m=n[1]-t[1],o=Math.pow(l*l+u*u,.25),i=Math.pow(h*h+m*m,.25),f=(i*i*l-o*o*h)*s,p=(i*i*u-o*o*m)*s,a=3*i*(o+i),c=3*o*(o+i);return[[r(t[0]+(a&&f/a)),d(t[1]+(a&&p/a))],[r(t[0]-(c&&f/c)),d(t[1]-(c&&p/c))]]}s.textPointStyle=function(e,t,n){if(e.size()){t.selectedpoints&&(r=s.makeSelectedTextStyleFns(t),a=r.selectedTextColorFn);var a,r,c=t.texttemplate,l=n._fullLayout;e.each(function(e){if(d=i.select(this),r=c?o.extractOption(e,t,"txt","texttemplate"):o.extractOption(e,t,"tx","text"),r||0===r){if(c){var r,d,m,u=t._module.formatLabels,p=u?u(e,t,l):{},h={};te(h,t,e.i),m=t._meta||{},r=o.texttemplateString(r,p,l._d3locale,h,e,m)}var g=e.tp||t.textposition,f=F(e,t),v=a?a(e):e.tc||t.textfont.color;d.call(s.font,{family:e.tf||t.textfont.family,weight:e.tw||t.textfont.weight,style:e.ty||t.textfont.style,variant:e.tv||t.textfont.variant,size:f,color:v}).text(r).call(O.convertToTspans,n).call(M,g,f,e.mrc)}else d.remove()})}},s.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=s.makeSelectedTextStyleFns(t);e.each(function(e){var o,s=i.select(this),r=n.selectedTextColorFn(e),c=e.tp||t.textposition,l=F(e,t);a.fill(s,r),o=g.traceIs(t,"bar-like"),M(s,c,l,e.mrc2||e.mrc,o)})}},s.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,o="M"+e[0],s=[];for(n=1;n<e.length-1;n++)s.push(b(e[n-1],e[n],e[n+1],t));for(o+="Q"+s[0][0]+" "+e[1],n=2;n<e.length-1;n++)o+="C"+s[n-2][1]+" "+s[n-1][0]+" "+e[n];return o+"Q"+s[e.length-3][1]+" "+e[e.length-1]},s.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,i="M"+e[0],s=e.length-1,o=[b(e[s],e[0],e[1],t)];for(n=1;n<s;n++)o.push(b(e[n-1],e[n],e[n+1],t));for(o.push(b(e[s-1],e[s],e[0],t)),n=1;n<=s;n++)i+="C"+o[n-1][1]+" "+o[n][0]+" "+e[n];return i+"C"+o[s][1]+" "+o[0][0]+" "+e[0]+"Z"},L={hv:function(e,t,n){return"H"+r(t[0])+"V"+h(t,1,n)},vh:function(e,t,n){return"V"+d(t[1])+"H"+h(t,0,n)},hvh:function(e,t,n){return"H"+r((e[0]+t[0])/2)+"V"+d(t[1])+"H"+h(t,0,n)},vhv:function(e,t,n){return"V"+d((e[1]+t[1])/2)+"H"+r(t[0])+"V"+h(t,1,n)}},q=function(e,t,n){return"L"+h(t,0,n)+","+h(t,1,n)};function P(e,t){var p=e.backoff,n=e.trace,w=e.d,_=e.i;if(p&&n&&n.marker&&n.marker.angle%360==0&&n.line&&"spline"!==n.line.shape){var i,a,c,l,d,h,y=o.isArrayOrTypedArray(p),u=e,v=t?t[0]:D||0,g=t?t[1]:z||0,m=u[0],f=u[1],O=m-v,j=f-g,b=Math.atan2(j,O),r=y?p[_]:p;"auto"===r&&(l=u.i,"scatter"===n.type&&l--,h=u.marker,d=h.symbol,o.isArrayOrTypedArray(d)&&(d=d[l]),c=h.size,o.isArrayOrTypedArray(c)&&(c=c[l]),r=h?s.symbolBackOffs[s.symbolNumber(d)]*c:0,r+=s.getMarkerStandoff(w[l],n)||0),i=m-r*Math.cos(b),a=f-r*Math.sin(b),(i<=m&&i>=v||i>=m&&i<=v)&&(a<=f&&a>=g||a>=f&&a<=g)&&(e=[i,a])}return e}s.steps=function(e){var t=L[e]||q;return function(e){for(var s="M"+r(e[0][0])+","+d(e[0][1]),o=e.length,n=1;n<o;n++)s+=t(e[n-1],e[n],n===o-1);return s}},s.applyBackoff=P,s.makeTester=function(){var e=o.ensureSingleById(i.select("body"),"svg","js-plotly-tester",function(e){e.attr(G.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=o.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});s.tester=e,s.testref=t},s.savedBBoxes={},p=0;function I(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function w(e,t){if(!e)return null;var n=t._context,s=n._exportedPlot?"":n._baseUrl||"";return s?"url('"+s+"#"+e+"')":"url(#"+e+")"}s.bBox=function(e,t,n){if(n||(n=I(e)),n){if(u=s.savedBBoxes[n])return o.extendFlat({},u)}else if(1===e.childNodes.length&&(c=e.childNodes[0],n=I(c))){var a,r,c,l,d,u,f,g,h=+c.getAttribute("x")||0,m=+c.getAttribute("y")||0,v=c.getAttribute("transform");if(!v)return l=s.bBox(c,!1,n),h&&(l.left+=h,l.right+=h),m&&(l.top+=m,l.bottom+=m),l;if(n+="~"+h+"~"+m+"~"+v,u=s.savedBBoxes[n])return o.extendFlat({},u)}return t?r=e:(f=s.tester.node(),r=e.cloneNode(!0),f.appendChild(r)),i.select(r).attr("transform",null).call(O.positionText,0,0),a=r.getBoundingClientRect(),d=s.testref.node().getBoundingClientRect(),t||f.removeChild(r),g={height:a.height,width:a.width,left:a.left-d.left,top:a.top-d.top,right:a.right-d.left,bottom:a.bottom-d.top},p>=1e4&&(s.savedBBoxes={},p=0),n&&(s.savedBBoxes[n]=g),p++,o.extendFlat({},g)},s.setClipUrl=function(e,t,n){e.attr("clip-path",w(t,n))},s.getTranslate=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+t[0]||0,y:+t[1]||0}},s.setTranslate=function(e,t,n){var o=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",s=e[o]("transform")||"";return t=t||0,n=n||0,s=s.replace(/(\btranslate\(.*?\);?)/,"").trim(),s=(s+=f(t,n)).trim(),e[i]("transform",s),s},s.getScale=function(e){var t=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+t[0]||1,y:+t[1]||1}},s.setScale=function(e,t,n){var o=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",s=e[o]("transform")||"";return t=t||1,n=n||1,s=s.replace(/(\bscale\(.*?\);?)/,"").trim(),s=(s+="scale("+t+","+n+")").trim(),e[i]("transform",s),s},V=/\s*sc.*/,s.setPointGroupScale=function(e,t,n){if(t=t||1,n=n||1,e){var s=1===t&&1===n?"":"scale("+t+","+n+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(V,""),e=(e+=s).trim();this.setAttribute("transform",e)})}},$=/translate\([^)]*\)\s*$/;function y(e,t){var n;return e&&(n=e.mf),void 0===n&&(n=t.marker&&t.marker.standoff||0),t._geo||t._xA?n:-n}s.setTextPointsScale=function(e,t,n){e&&e.each(function(){if(e=i.select(this),s=e.select("text"),s.node()){var e,s,o,a=parseFloat(s.attr("x")||0),r=parseFloat(s.attr("y")||0),c=(e.attr("transform")||"").match($);o=1===t&&1===n?[]:[f(a,r),"scale("+t+","+n+")",f(-a,-r)],c&&o.push(c),e.attr("transform",o.join(""))}})},s.getMarkerStandoff=y;var k,A,S,U,K,Y,m=Math.atan2,l=Math.cos,u=Math.sin;function H(e,t){var n=t[0],s=t[1];return[n*l(e)-s*u(e),n*u(e)+s*l(e)]}function E(e,t){if(n=e.ma,void 0===n&&((n=t.marker.angle)&&!o.isArrayOrTypedArray(n)||(n=0)),a=t.marker.angleref,"previous"===a||"north"===a){if(t._geo)f=t._geo.project(e.lonlat),s=f[0],i=f[1];else{if(p=t._xA,g=t._yA,!p||!g)return 90;s=p.c2p(e.x),i=g.c2p(e.y)}if(t._geo){var r,d=e.lonlat[0],h=e.lonlat[1],E=t._geo.project([d,h+1e-5]),x=t._geo.project([d+1e-5,h]),N=m(x[1]-i,x[0]-s),L=m(E[1]-i,E[0]-s);if("north"===a)r=n/180*Math.PI;else if("previous"===a){var n,s,i,a,f,p,g,v,j,D=d/180*Math.PI,w=h/180*Math.PI,z=U/180*Math.PI,b=K/180*Math.PI,C=z-D,T=l(b)*u(C),F=u(b)*l(w)-l(b)*u(w)*l(C);r=-m(T,F)-Math.PI,U=d,K=h}v=H(N,[l(r),0]),j=H(L,[u(r),0]),n=m(v[1]+j[1],v[0]+j[0])/Math.PI*180,"previous"!==a||A===t.uid&&e.i===k+1||(n=null)}if("previous"===a&&!t._geo)if(A===t.uid&&e.i===k+1&&c(s)&&c(i)){var O=s-S,_=i-Y,y=t.line&&t.line.shape||"",M=y.slice(y.length-1);"h"===M&&(_=0),"v"===M&&(O=0),n+=m(_,O)/Math.PI*180+90}else n=null}return S=s,Y=i,k=e.i,A=t.uid,n}s.getMarkerAngle=E},71984:function(e,t,n){"use strict";var h,m,f,p,g=n(21984),s=n(33428).round,o="M0,0Z",u=Math.sqrt(2),r=Math.sqrt(3),l=Math.PI,c=Math.cos,d=Math.sin;function a(e){return null===e}function i(e,t,n){if(!(e&&e%360!=0||t))return n;if(m===e&&h===t&&p===n)return f;function _(e,n){var s=c(e),o=d(e),i=n[0],a=n[1]+(t||0);return[i*s-a*o,i*o+a*s]}m=e,h=t,p=n;for(var r,b,y=e/180*l,i=0,a=0,j=g(n),u="",v=0;v<j.length;v++){var o=j[v],s=o[0],w=i,O=a;"M"===s||"L"===s?(i=+o[1],a=+o[2]):"m"===s||"l"===s?(i+=+o[1],a+=+o[2]):"H"===s?i=+o[1]:"h"===s?i+=+o[1]:"V"===s?a=+o[1]:"v"===s?a+=+o[1]:"A"===s&&(i=+o[1],a=+o[2],r=_(y,[+o[6],+o[7]]),o[6]=r[0],o[7]=r[1],o[3]=+o[3]+e),"H"!==s&&"V"!==s||(s="L"),"h"!==s&&"v"!==s||(s="l"),"m"!==s&&"l"!==s||(i-=w,a-=O),b=_(y,[i,a]),"H"!==s&&"V"!==s||(s="L"),"M"!==s&&"L"!==s&&"m"!==s&&"l"!==s||(o[1]=b[0],o[2]=b[1]),o[0]=s,u+=o[0]+o.slice(1).join(",")}return f=u,u}e.exports={circle:{n:0,f:function(e,t,n){if(a(t))return o;var r=s(e,2),c="M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z";return n?i(t,n,c):c}},square:{n:1,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")}},diamond:{n:2,f:function(e,t,n){if(a(t))return o;var r=s(1.3*e,2);return i(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"Z")}},cross:{n:3,f:function(e,t,n){if(a(t))return o;var r=s(.4*e,2),c=s(1.2*e,2);return i(t,n,"M"+c+","+r+"H"+r+"V"+c+"H-"+r+"V"+r+"H-"+c+"V-"+r+"H-"+r+"V-"+c+"H"+r+"V-"+r+"H"+c+"Z")}},x:{n:4,f:function(e,t,n){if(a(t))return o;var r=s(.8*e/u,2),c="l"+r+","+r,h="l"+r+",-"+r,l="l-"+r+",-"+r,d="l-"+r+","+r;return i(t,n,"M0,"+r+c+h+l+h+l+d+l+d+c+d+c+"Z")}},"triangle-up":{n:5,f:function(e,t,n){if(a(t))return o;var c=s(2*e/r,2);return i(t,n,"M-"+c+","+s(e/2,2)+"H"+c+"L0,-"+s(e,2)+"Z")}},"triangle-down":{n:6,f:function(e,t,n){if(a(t))return o;var c=s(2*e/r,2);return i(t,n,"M-"+c+",-"+s(e/2,2)+"H"+c+"L0,"+s(e,2)+"Z")}},"triangle-left":{n:7,f:function(e,t,n){if(a(t))return o;var c=s(2*e/r,2);return i(t,n,"M"+s(e/2,2)+",-"+c+"V"+c+"L-"+s(e,2)+",0Z")}},"triangle-right":{n:8,f:function(e,t,n){if(a(t))return o;var c=s(2*e/r,2);return i(t,n,"M-"+s(e/2,2)+",-"+c+"V"+c+"L"+s(e,2)+",0Z")}},"triangle-ne":{n:9,f:function(e,t,n){if(a(t))return o;var r=s(.6*e,2),c=s(1.2*e,2);return i(t,n,"M-"+c+",-"+r+"H"+r+"V"+c+"Z")}},"triangle-se":{n:10,f:function(e,t,n){if(a(t))return o;var r=s(.6*e,2),c=s(1.2*e,2);return i(t,n,"M"+r+",-"+c+"V"+r+"H-"+c+"Z")}},"triangle-sw":{n:11,f:function(e,t,n){if(a(t))return o;var r=s(.6*e,2),c=s(1.2*e,2);return i(t,n,"M"+c+","+r+"H-"+r+"V-"+c+"Z")}},"triangle-nw":{n:12,f:function(e,t,n){if(a(t))return o;var r=s(.6*e,2),c=s(1.2*e,2);return i(t,n,"M-"+r+","+c+"V-"+r+"H"+c+"Z")}},pentagon:{n:13,f:function(e,t,n){if(a(t))return o;var r=s(.951*e,2),c=s(.588*e,2),d=s(-e,2),l=s(-.309*e,2);return i(t,n,"M"+r+","+l+"L"+c+","+s(.809*e,2)+"H-"+c+"L-"+r+","+l+"L0,"+d+"Z")}},hexagon:{n:14,f:function(e,t,n){if(a(t))return o;var l=s(e,2),c=s(e/2,2),d=s(e*r/2,2);return i(t,n,"M"+d+",-"+c+"V"+c+"L0,"+l+"L-"+d+","+c+"V-"+c+"L0,-"+l+"Z")}},hexagon2:{n:15,f:function(e,t,n){if(a(t))return o;var l=s(e,2),c=s(e/2,2),d=s(e*r/2,2);return i(t,n,"M-"+c+","+d+"H"+c+"L"+l+",0L"+c+",-"+d+"H-"+c+"L-"+l+",0Z")}},octagon:{n:16,f:function(e,t,n){if(a(t))return o;var c=s(.924*e,2),r=s(.383*e,2);return i(t,n,"M-"+r+",-"+c+"H"+r+"L"+c+",-"+r+"V"+r+"L"+r+","+c+"H-"+r+"L-"+c+","+r+"V-"+r+"Z")}},star:{n:17,f:function(e,t,n){if(a(t))return o;var r=1.4*e,c=s(.225*r,2),l=s(.951*r,2),d=s(.363*r,2),u=s(.588*r,2),p=s(-r,2),h=s(-.309*r,2),m=s(.118*r,2),f=s(.809*r,2);return i(t,n,"M"+c+","+h+"H"+l+"L"+d+","+m+"L"+u+","+f+"L0,"+s(.382*r,2)+"L-"+u+","+f+"L-"+d+","+m+"L-"+l+","+h+"H-"+c+"L0,"+p+"Z")}},hexagram:{n:18,f:function(e,t,n){if(a(t))return o;var r=s(.66*e,2),c=s(.38*e,2),l=s(.76*e,2);return i(t,n,"M-"+l+",0l-"+c+",-"+r+"h"+l+"l"+c+",-"+r+"l"+c+","+r+"h"+l+"l-"+c+","+r+"l"+c+","+r+"h-"+l+"l-"+c+","+r+"l-"+c+",-"+r+"h-"+l+"Z")}},"star-triangle-up":{n:19,f:function(e,t,n){if(a(t))return o;var c=s(e*r*.8,2),l=s(.8*e,2),h=s(1.6*e,2),u=s(4*e,2),d="A "+u+","+u+" 0 0 1 ";return i(t,n,"M-"+c+","+l+d+c+","+l+d+"0,-"+h+d+"-"+c+","+l+"Z")}},"star-triangle-down":{n:20,f:function(e,t,n){if(a(t))return o;var c=s(e*r*.8,2),l=s(.8*e,2),h=s(1.6*e,2),u=s(4*e,2),d="A "+u+","+u+" 0 0 1 ";return i(t,n,"M"+c+",-"+l+d+"-"+c+",-"+l+d+"0,"+h+d+c+",-"+l+"Z")}},"star-square":{n:21,f:function(e,t,n){if(a(t))return o;var r=s(1.1*e,2),l=s(2*e,2),c="A "+l+","+l+" 0 0 1 ";return i(t,n,"M-"+r+",-"+r+c+"-"+r+","+r+c+r+","+r+c+r+",-"+r+c+"-"+r+",-"+r+"Z")}},"star-diamond":{n:22,f:function(e,t,n){if(a(t))return o;var r=s(1.4*e,2),l=s(1.9*e,2),c="A "+l+","+l+" 0 0 1 ";return i(t,n,"M-"+r+",0"+c+"0,"+r+c+r+",0"+c+"0,-"+r+c+"-"+r+",0Z")}},"diamond-tall":{n:23,f:function(e,t,n){if(a(t))return o;var r=s(.7*e,2),c=s(1.4*e,2);return i(t,n,"M0,"+c+"L"+r+",0L0,-"+c+"L-"+r+",0Z")}},"diamond-wide":{n:24,f:function(e,t,n){if(a(t))return o;var r=s(1.4*e,2),c=s(.7*e,2);return i(t,n,"M0,"+c+"L"+r+",0L0,-"+c+"L-"+r+",0Z")}},hourglass:{n:25,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M"+r+","+r+"H-"+r+"L"+r+",-"+r+"H-"+r+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M"+r+","+r+"V-"+r+"L-"+r+","+r+"V-"+r+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,n){if(a(t))return o;var c=s(e,2),r=s(e/u,2);return i(t,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,n){if(a(t))return o;var r=s(1.3*e,2);return i(t,n,"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM0,-"+r+"V"+r+"M-"+r+",0H"+r)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,n){if(a(t))return o;var c=s(1.3*e,2),r=s(.65*e,2);return i(t,n,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,n){if(a(t))return o;var r=s(1.4*e,2);return i(t,n,"M0,"+r+"V-"+r+"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,n){if(a(t))return o;var c=s(1.2*e,2),r=s(.85*e,2);return i(t,n,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,n){if(a(t))return o;var c=s(e/2,2),r=s(e,2);return i(t,n,"M"+c+","+r+"V-"+r+"M"+(c-r)+",-"+r+"V"+r+"M"+r+","+c+"H-"+r+"M-"+r+","+(c-r)+"H"+r)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,n){if(a(t))return o;var r=s(1.2*e,2),l=s(1.6*e,2),c=s(.8*e,2);return i(t,n,"M-"+r+","+c+"L0,0M"+r+","+c+"L0,0M0,-"+l+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,n){if(a(t))return o;var r=s(1.2*e,2),l=s(1.6*e,2),c=s(.8*e,2);return i(t,n,"M-"+r+",-"+c+"L0,0M"+r+",-"+c+"L0,0M0,"+l+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,n){if(a(t))return o;var r=s(1.2*e,2),l=s(1.6*e,2),c=s(.8*e,2);return i(t,n,"M"+c+","+r+"L0,0M"+c+",-"+r+"L0,0M-"+l+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,n){if(a(t))return o;var r=s(1.2*e,2),l=s(1.6*e,2),c=s(.8*e,2);return i(t,n,"M-"+c+","+r+"L0,0M-"+c+",-"+r+"L0,0M"+l+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,n){if(a(t))return o;var r=s(1.4*e,2);return i(t,n,"M"+r+",0H-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,n){if(a(t))return o;var r=s(1.4*e,2);return i(t,n,"M0,"+r+"V-"+r)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M"+r+",-"+r+"L-"+r+","+r)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M"+r+","+r+"L-"+r+",-"+r)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M0,0L-"+r+","+s(2*e,2)+"H"+r+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M0,0L-"+r+",-"+s(2*e,2)+"H"+r+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,n){if(a(t))return o;var c=s(2*e,2),r=s(e,2);return i(t,n,"M0,0L"+c+",-"+r+"V"+r+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,n){if(a(t))return o;var c=s(2*e,2),r=s(e,2);return i(t,n,"M0,0L-"+c+",-"+r+"V"+r+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M-"+r+",0H"+r+"M0,0L-"+r+","+s(2*e,2)+"H"+r+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,n){if(a(t))return o;var r=s(e,2);return i(t,n,"M-"+r+",0H"+r+"M0,0L-"+r+",-"+s(2*e,2)+"H"+r+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,n){if(a(t))return o;var c=s(2*e,2),r=s(e,2);return i(t,n,"M0,-"+r+"V"+r+"M0,0L"+c+",-"+r+"V"+r+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,n){if(a(t))return o;var c=s(2*e,2),r=s(e,2);return i(t,n,"M0,-"+r+"V"+r+"M0,0L-"+c+",-"+r+"V"+r+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,n){if(a(t))return o;var s=l/2.5,r=2*e*c(s),u=2*e*d(s);return i(t,n,"M0,0L"+-r+","+u+"L"+r+","+u+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,n){if(a(t))return o;var s=l/4,r=2*e*c(s),u=2*e*d(s);return i(t,n,"M0,0L"+-r+","+u+"A "+2*e+","+2*e+" 0 0 1 "+r+","+u+"Z")},backoff:.4,noDot:!0}}},97644:function(e){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(e,t,n){"use strict";var s=n(38248),a=n(24040),o=n(54460),r=n(3400),c=n(93792);function i(e,t,n,i){if(p=t["error_"+i]||{},f=[],p.visible&&-1!==["linear","log"].indexOf(n.type)){for(b=c(p),d=0;d<e.length;d++){if(u=e[d],h=u.i,void 0===h)h=d;else if(null===h)continue;m=u[i],s(n.c2l(m))&&(a=b(m,h),s(a[0])&&s(a[1])&&(g=u[i+"s"]=m-a[0],v=u[i+"h"]=m+a[1],f.push(g,v)))}var a,d,u,h,m,f,p,g,v,b,y=n._id,l=t._extremes[y],j=o.findExtremes(n,f,r.extendFlat({tozero:l.opts.tozero},{padded:!0}));l.min=l.min.concat(j.min),l.max=l.max.concat(j.max)}}e.exports=function(e){for(var t,n,c,l,r=e.calcdata,s=0;s<r.length;s++)n=r[s],t=n[0].trace,!0===t.visible&&a.traceIs(t,"errorBarsOK")&&(c=o.getFromId(e,t.xaxis),l=o.getFromId(e,t.yaxis),i(n,t,c,"x"),i(n,t,l,"y"))}},93792:function(e){"use strict";function t(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}e.exports=function(e){var s,o,a,r,n=e.type,i=e.symmetric;return"data"===n?(s=e.array||[],i?function(e,t){var n=+s[t];return[n,n]}:(a=e.arrayminus||[],function(e,t){var n=+s[t],o=+a[t];return isNaN(n)&&isNaN(o)?[NaN,NaN]:[o||0,n||0]})):(o=t(n,e.value),r=t(n,e.valueminus),i||void 0===e.valueminus?function(e){var t=o(e);return[t,t]}:function(e){return[r(e),o(e)]})}},65200:function(e,t,n){"use strict";var s=n(38248),o=n(24040),i=n(3400),a=n(31780),r=n(97644);e.exports=function(e,t,n,c){var u,h,m,p="error_"+c.axis,f=a.newContainer(t,p),d=e[p]||{};function l(e,t){return i.coerce(d,f,r,e,t)}!1!==l("visible",void 0!==d.array||void 0!==d.value||"sqrt"===d.type)&&(u=l("type","array"in d?"data":"percent"),h=!0,"sqrt"!==u&&(h=l("symmetric",!(("data"===u?"arrayminus":"valueminus")in d))),"data"===u?(l("array"),l("traceref"),h||(l("arrayminus"),l("tracerefminus"))):"percent"!==u&&"constant"!==u||(l("value"),h||l("valueminus")),m="copy_"+c.inherit+"style",c.inherit&&(t["error_"+c.inherit]||{}).visible&&l(m,!(d.color||s(d.thickness)||s(d.width))),c.inherit&&f[m]||(l("color",n),l("thickness"),l("width",o.traceIs(t,"gl3d")?0:4)))}},64968:function(e,t,n){"use strict";var o,i=n(3400),r=n(67824).overrideAll,a=n(97644),s={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a)};delete s.error_x.copy_zstyle,delete s.error_y.copy_zstyle,delete s.error_y.copy_ystyle,o={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a),error_z:i.extendFlat({},a)},delete o.error_x.copy_ystyle,delete o.error_y.copy_ystyle,delete o.error_z.copy_ystyle,delete o.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:s,bar:s,histogram:s,scatter3d:r(o,"calc","nested"),scattergl:r(s,"calc","nested")}},supplyDefaults:n(65200),calc:n(14880),makeComputeError:n(93792),plot:n(78512),style:n(92036),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},78512:function(e,t,n){"use strict";var o=n(33428),s=n(38248),i=n(43616),a=n(43028);e.exports=function(e,t,n,r){var d=n.xaxis,u=n.yaxis,c=r&&r.duration>0,l=e._context.staticPlot;t.each(function(t){var h,g,v,b,m=t[0].trace,f=m.error_x||{},p=m.error_y||{};m.ids&&(g=function(e){return e.id}),v=a.hasMarkers(m)&&m.marker.maxdisplayed>0,p.visible||f.visible||(t=[]),h=o.select(this).selectAll("g.errorbar").data(t,g),(h.exit().remove(),t.length)&&(f.visible||h.selectAll("path.xerror").remove(),p.visible||h.selectAll("path.yerror").remove(),h.style("opacity",1),b=h.enter().append("g").classed("errorbar",!0),c&&b.style("opacity",0).transition().duration(r.duration).style("opacity",1),i.setClipUrl(h,n.layerClipId,e),h.each(function(e){var n,i,a,h,m,g=o.select(this),t=function(e,t,n){var o={x:t.c2p(e.x),y:n.c2p(e.y)};return void 0!==e.yh&&(o.yh=n.c2p(e.yh),o.ys=n.c2p(e.ys),s(o.ys)||(o.noYS=!0,o.ys=n.c2p(e.ys,!0))),void 0!==e.xh&&(o.xh=t.c2p(e.xh),o.xs=t.c2p(e.xs),s(o.xs)||(o.noXS=!0,o.xs=t.c2p(e.xs,!0))),o}(e,d,u);(!v||e.vis)&&(n=g.select("path.yerror"),p.visible&&s(t.x)&&s(t.yh)&&s(t.ys)?(m=p.width,h="M"+(t.x-m)+","+t.yh+"h"+2*m+"m-"+m+",0V"+t.ys,t.noYS||(h+="m-"+m+",0h"+2*m),n.size()?c&&(n=n.transition().duration(r.duration).ease(r.easing)):n=g.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("yerror",!0),n.attr("d",h)):n.remove(),i=g.select("path.xerror"),f.visible&&s(t.y)&&s(t.xh)&&s(t.xs)?(a=(f.copy_ystyle?p:f).width,h="M"+t.xh+","+(t.y-a)+"v"+2*a+"m0,-"+a+"H"+t.xs,t.noXS||(h+="m0,-"+a+"v"+2*a),i.size()?c&&(i=i.transition().duration(r.duration).ease(r.easing)):i=g.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("xerror",!0),i.attr("d",h)):i.remove())}))})}},92036:function(e,t,n){"use strict";var o=n(33428),s=n(76308);e.exports=function(e){e.each(function(e){var i=e[0].trace,n=i.error_y||{},t=i.error_x||{},a=o.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(s.stroke,n.color),t.copy_ystyle&&(t=n),a.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(s.stroke,t.color)})}},55756:function(e,t,n){"use strict";var i=n(25376),s=n(65460).hoverlabel,o=n(92880).extendFlat;e.exports={hoverlabel:{bgcolor:o({},s.bgcolor,{arrayOk:!0}),bordercolor:o({},s.bordercolor,{arrayOk:!0}),font:i({arrayOk:!0,editType:"none"}),align:o({},s.align,{arrayOk:!0}),namelength:o({},s.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(e,t,n){"use strict";var s=n(3400),o=n(24040);function i(e,t,n,o){o=o||s.identity,Array.isArray(e)&&(t[0][n]=o(e))}e.exports=function(e){var t,n,a,r,c=e.calcdata,l=e._fullLayout;function d(e){return function(t){return s.coerceHoverinfo({hoverinfo:t},{_module:e._module},l)}}for(r=0;r<c.length;r++)n=c[r],t=n[0].trace,o.traceIs(t,"pie-like")||(a=o.traceIs(t,"2dMap")?i:s.fillArray,a(t.hoverinfo,n,"hi",d(t)),t.hovertemplate&&a(t.hovertemplate,n,"ht"),t.hoverlabel&&(a(t.hoverlabel.bgcolor,n,"hbg"),a(t.hoverlabel.bordercolor,n,"hbc"),a(t.hoverlabel.font.size,n,"hts"),a(t.hoverlabel.font.color,n,"htc"),a(t.hoverlabel.font.family,n,"htf"),a(t.hoverlabel.font.weight,n,"htw"),a(t.hoverlabel.font.style,n,"hty"),a(t.hoverlabel.font.variant,n,"htv"),a(t.hoverlabel.namelength,n,"hnl"),a(t.hoverlabel.align,n,"hta")))}},62376:function(e,t,n){"use strict";var s=n(24040),o=n(83292).hover;e.exports=function(e,t,n){var i=s.getComponentMethod("annotations","onClick")(e,e._hoverdata);function a(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&o(e,t,n,!0),e._hoverdata&&t&&t.target&&(i&&i.then?i.then(a):a(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},92456:function(e){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(e,t,n){"use strict";var s=n(3400),o=n(55756),i=n(16132);e.exports=function(e,t,n,a){var r=s.extendFlat({},a.hoverlabel);t.hovertemplate&&(r.namelength=-1),i(e,t,function(n,i){return s.coerce(e,t,o,n,i)},r)}},10624:function(e,t,n){"use strict";s=n(3400),t.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},t.isTraceInSubplots=function(e,n){if("splom"===e.type){for(var s,i=e.xaxes||[],a=e.yaxes||[],o=0;o<i.length;o++)for(s=0;s<a.length;s++)if(-1!==n.indexOf(i[o]+a[s]))return!0;return!1}return-1!==n.indexOf(t.getSubplot(e))},t.flat=function(e,t){for(var s=new Array(e.length),n=0;n<e.length;n++)s[n]=t;return s},t.p2c=function(e,t){for(var s=new Array(e.length),n=0;n<e.length;n++)s[n]=e[n].p2c(t);return s},t.getDistanceFunction=function(e,n,s,o){return"closest"===e?o||t.quadrature(n,s):"x"===e.charAt(0)?n:s},t.getClosest=function(e,t,n){if(!1!==n.index)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var o,s=0;s<e.length;s++)o=t(e[s]),o<=n.distance&&(n.index=s,n.distance=o);return n},t.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},t.quadrature=function(e,t){return function(n){var s=e(n),o=t(n);return Math.sqrt(s*s+o*o)}},t.makeEventData=function(e,n,s){var a,i="index"in e?e.index:e.pointNumber,o={data:n._input,fullData:n,curveNumber:n.index,pointNumber:i};return n._indexToPoints?(a=n._indexToPoints[i],1===a.length?o.pointIndex=a[0]:o.pointIndices=a):o.pointIndex=i,n._module.eventData?o=n._module.eventData(o,e,n,s,i):("xVal"in e?o.x=e.xVal:"x"in e&&(o.x=e.x),"yVal"in e?o.y=e.yVal:"y"in e&&(o.y=e.y),e.xa&&(o.xaxis=e.xa),e.ya&&(o.yaxis=e.ya),void 0!==e.zLabelVal&&(o.z=e.zLabelVal)),t.appendArrayPointValue(o,n,i),o},t.appendArrayPointValue=function(e,t,n){if(o=t._arrayAttrs,o)for(r=0;r<o.length;r++){var o,r,c,l=o[r],d=i(l);void 0===e[d]&&(c=a(s.nestedProperty(t,l).get(),n),void 0!==c&&(e[d]=c))}},t.appendArrayMultiPointValues=function(e,t,n){if(o=t._arrayAttrs,o)for(r=0;r<o.length;r++)if(l=o[r],d=i(l),void 0===e[d]){for(var o,r,l,d,h=s.nestedProperty(t,l).get(),u=new Array(n.length),c=0;c<n.length;c++)u[c]=a(h,n[c]);e[d]=u}},o={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(e){return o[e]||e}function a(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var s,o,r={x:!0,y:!0},c={"x unified":!0,"y unified":!0};t.isUnifiedHover=function(e){return"string"==typeof e&&!!c[e]},t.isXYhover=function(e){return"string"==typeof e&&!!r[e]}},83292:function(e,t,n){"use strict";var j,h=n(33428),u=n(38248),A=n(49760),i=n(3400),W=i.pushUnique,v=i.strTranslate,$=i.strRotate,V=n(95924),r=n(72736),B=n(72213),d=n(43616),a=n(76308),g=n(86476),l=n(54460),f=n(24040),c=n(10624),m=n(92456),I=n(77864),U=n(31140),w=m.YANGLE,b=Math.PI*w/180,L=1/Math.sin(b),P=Math.cos(b),R=Math.sin(b),o=m.HOVERARROWSIZE,s=m.HOVERTEXTPAD,z={box:!0,ohlc:!0,violin:!0,candlestick:!0},N={scatter:!0,scattergl:!0,splom:!0};function F(e,t){return e.distance-t.distance}function T(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}t.hover=function(e,t,n,s){e=i.getGraphDiv(e);var r=t.target;i.throttle(e._fullLayout._uid+m.HOVERID,m.HOVERMINTIME,function(){!function(e,t,n,s,r){n||(n="xy");var p,S,R,I,$,U,Y,A=Array.isArray(n)?n:[n],d=e._fullLayout,ve=d.hoversubplots,ne=d._plots||[],He=ne[n],ae=d._has("cartesian"),b=t.hovermode||d.hovermode,tt="x"===(b||"").charAt(0),ct="y"===(b||"").charAt(0),Ye,pe,ie,le,Ge,Ae,ee,me,we,Oe,xe,Fe,Te,Me,We,Ne,Le,te,Se,ge,ke,nt;if(ae&&(tt||ct)&&"axis"===ve)for(Ye=A.length,pe=0;pe<Ye;pe++)if(ne[S=A[pe]]&&(Y=l.getFromId(e,S,"x"),I=l.getFromId(e,S,"y"),ie=(tt?Y:I)._subplotsWith,ie&&ie.length))for(le=0;le<ie.length;le++)W(A,ie[le]);He&&"single"!==ve&&(Ge=He.overlays.map(function(e){return e.id}),A=A.concat(Ge));for(var ye=A.length,q=new Array(ye),X=new Array(ye),Xe=!1,Z=0;Z<ye;Z++)if(ne[S=A[Z]])Xe=!0,q[Z]=ne[S].xaxis,X[Z]=ne[S].yaxis;else{if(!d[S]||!d[S]._subplot)return void i.warn("Unrecognized subplot: "+S);Ae=d[S]._subplot,q[Z]=Ae.xaxis,X[Z]=Ae.yaxis}if(b&&!Xe&&(b="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(b)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return g.unhoverRaw(e,t);ee=d.hoverdistance,-1===ee&&(ee=1/0),R=d.spikedistance,-1===R&&(R=1/0);var v,y,w,P,G,Q,J,de,fe,re,se,oe,je,m=[],ce=[],j={hLinePoint:null,vLinePoint:null},be=!1;if(Array.isArray(t))for(b="array",Q=0;Q<t.length;Q++)(w=e.calcdata[t[Q].curveNumber||0])&&(v=w[0].trace,"skip"!==w[0].trace.hoverinfo&&(ce.push(w),"h"===v.orientation&&(be=!0)));else{me=e.calcdata.slice();for(me.sort(function(e,t){return(e[0].trace.zorder||0)-(t[0].trace.zorder||0)}),P=0;P<me.length;P++)w=me[P],"skip"!==(v=w[0].trace).hoverinfo&&c.isTraceInSubplots(v,A)&&(ce.push(w),"h"===v.orientation&&(be=!0));if(r){{if(!1===V.triggerHandler(e,"plotly_beforehover",t))return;if(we=r.getBoundingClientRect(),$=t.clientX-we.left,U=t.clientY-we.top,d._calcInverseTransform(e),Oe=i.apply3DTransform(d._invTransform)($,U),$=Oe[0],U=Oe[1],$<0||$>q[0]._length||U<0||U>X[0]._length)return g.unhoverRaw(e,t)}}else $="xpx"in t?t.xpx:q[0]._length/2,U="ypx"in t?t.ypx:X[0]._length/2;if(t.pointerX=$+q[0]._offset,t.pointerY=U+X[0]._offset,de="xval"in t?c.flat(A,t.xval):c.p2c(q,$),fe="yval"in t?c.flat(A,t.yval):c.p2c(X,U),!u(de[0])||!u(fe[0]))return i.warn("Fx.hover failed",t,e),g.unhoverRaw(e,t)}xe=1/0;function Ue(n,s){for(P=0;P<ce.length;P++)if((w=ce[P])&&w[0]&&w[0].trace&&!0===(v=w[0].trace).visible&&0!==v._length&&-1===["carpet","contourcarpet"].indexOf(v._module.name)){if(y=b,c.isUnifiedHover(y)&&(y=y.charAt(0)),"splom"===v.type?re=A[J=0]:(re=c.getSubplot(v),J=A.indexOf(re)),G={cd:w,trace:v,xa:q[J],ya:X[J],maxHoverDistance:ee,maxSpikeDistance:R,index:!1,distance:Math.min(xe,ee),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:v.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},d[re]&&(G.subplot=d[re]._subplot),d._splomScenes&&d._splomScenes[v.uid]&&(G.scene=d._splomScenes[v.uid]),"array"===y){var o,l,h,f,p,g,_,O,x,r=t[P];"pointNumber"in r?(G.index=r.pointNumber,y="closest"):(y="","xval"in r&&(se=r.xval,y="x"),"yval"in r&&(oe=r.yval,y=y?"closest":"y"))}else void 0!==n&&void 0!==s?(se=n,oe=s):(se=de[J],oe=fe[J]);if(je=m.length,0!==ee)if(v._module&&v._module.hoverPoints){if(h=v._module.hoverPoints(G,se,oe,y,{finiteRange:!0,hoverLayer:d._hoverlayer,hoversubplots:ve,gd:e}),h)for(p=0;p<h.length;p++)f=h[p],u(f.x0)&&u(f.y0)&&m.push(H(f,b))}else i.log("Unrecognized trace type in hover:",v);"closest"===b&&m.length>je&&(m.splice(0,je),xe=m[0].distance),ae&&0!==R&&0===m.length&&(G.distance=R,G.index=!1,o=v._module.hoverPoints(G,se,oe,"closest",{hoverLayer:d._hoverlayer}),(o&&(o=o.filter(function(e){return e.spikeDistance<=R})),o&&o.length)&&(O=o.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap}),O.length&&(g=O[0],u(g.x0)&&u(g.y0)&&(l=he(g),(!j.vLinePoint||j.vLinePoint.spikeDistance>l.spikeDistance)&&(j.vLinePoint=l))),x=o.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap}),x.length&&(_=x[0],u(_.x0)&&u(_.y0)&&(l=he(_),(!j.hLinePoint||j.hLinePoint.spikeDistance>l.spikeDistance)&&(j.hLinePoint=l)))))}}function Be(e,t,n){for(var o,i=null,a=1/0,s=0;s<e.length;s++)Y&&Y._id!==e[s].xa._id||I&&I._id!==e[s].ya._id||(o=e[s].spikeDistance,n&&0===s&&(o=-1/0),o<=a&&o<=t&&(i=e[s],a=o));return i}function he(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}Ue();var Ie={fullLayout:d,container:d._hoverlayer,event:t},Pe=e._spikepoints,rt={vLinePoint:j.vLinePoint,hLinePoint:j.hLinePoint};if(e._spikepoints=rt,Fe=function(){var e=m.filter(function(e){return Y&&Y._id===e.xa._id&&I&&I._id===e.ya._id}),t=m.filter(function(e){return!(Y&&Y._id===e.xa._id&&I&&I._id===e.ya._id)});e.sort(F),t.sort(F),m=function(e,t){for(var n,r=t.charAt(0),o=[],i=[],a=[],s=0;s<e.length;s++)n=e[s],f.traceIs(n.trace,"bar-like")||f.traceIs(n.trace,"box-violin")?a.push(n):n.trace[r+"period"]?i.push(n):o.push(n);return o.concat(i).concat(a)}(m=e.concat(t),b)},Fe(),Te=b.charAt(0),Me=("x"===Te||"y"===Te)&&m[0]&&N[m[0].trace.type],ae&&0!==R&&0!==m.length&&(We=Be(m.filter(function(e){return e.ya.showspikes}),R,Me),j.hLinePoint=he(We),Ne=Be(m.filter(function(e){return e.xa.showspikes}),R,Me),j.vLinePoint=he(Ne)),0===m.length)return Le=g.unhoverRaw(e,t),!ae||null===j.hLinePoint&&null===j.vLinePoint||D(Pe)&&_(e,j,Ie),Le;if(ae&&D(Pe)&&_(e,j,Ie),c.isXYhover(y)&&0!==m[0].length&&"splom"!==m[0].trace.type){te=m[0],Se=(m=z[te.trace.type]?m.filter(function(e){return e.trace.index===te.trace.index}):[te]).length,Ue(O("x",te,d),O("y",te,d));var K,ue=[],Ee={},Ve=0,$e=function(e){if(t=z[e.trace.type]?T(e):e.trace.index,Ee[t]){var t,n=Ee[t]-1,s=ue[n];n>0&&Math.abs(e.distance)<Math.abs(s.distance)&&(ue[n]=e)}else Ve++,Ee[t]=Ve,ue.push(e)};for(K=0;K<Se;K++)$e(m[K]);for(K=m.length-1;K>Se-1;K--)$e(m[K]);m=ue,Fe()}var ze=e._hoverdata,Ce=[],Ke=x(e),qe=k(e);for(Q=0;Q<m.length;Q++){if(p=m[Q],ge=c.makeEventData(p,p.trace,p.cd),!1!==p.hovertemplate&&(ke=!1,p.cd[p.index]&&p.cd[p.index].ht&&(ke=p.cd[p.index].ht),p.hovertemplate=ke||p.trace.hovertemplate||!1),p.xa&&p.ya){var Qe=p.x0+p.xa._offset,Ze=p.x1+p.xa._offset,Je=p.y0+p.ya._offset,De=p.y1+p.ya._offset,it=Math.min(Qe,Ze),lt=Math.max(Qe,Ze),st=Math.min(Je,De),ot=Math.max(Je,De);ge.bbox={x0:it+qe,x1:lt+qe,y0:st+Ke,y1:ot+Ke}}p.eventData=[ge],Ce.push(ge)}e._hoverdata=Ce;var _e="y"===b&&(ce.length>1||m.length>1)||"closest"===b&&be&&m.length>1,at=a.combine(d.plot_bgcolor||a.background,d.paper_bgcolor),et=M(m,{gd:e,hovermode:b,rotateLabels:_e,bgColor:at,container:d._hoverlayer,outerContainer:d._paper.node(),commonLabelOpts:d.hoverlabel,hoverdistance:d.hoverdistance}),Re=et.hoverLabels;(c.isUnifiedHover(b)||(function(e,t,n,s){var i,a,r,d,u,h,b,j,y,_,z=t?"xa":"ya",T=t?"ya":"xa",S=0,A=1,k=e.size(),c=new Array(k),C=0,M=s.minX,x=s.maxX,O=s.minY,w=s.maxY,g=function(e){return e*n._invScaleX},m=function(e){return e*n._invScaleY};function F(e){var n,t=e[0],s=e[e.length-1];if(h=t.pmin-t.pos-t.dp+t.size,d=s.pos+s.dp+s.size-t.pmax,h>.01){for(i=e.length-1;i>=0;i--)e[i].dp+=h;u=!1}if(!(d<.01)){if(h<-.01){for(i=e.length-1;i>=0;i--)e[i].dp-=d;u=!1}if(u){n=0;for(a=0;a<e.length;a++)(r=e[a]).pos+r.dp+r.size>t.pmax&&n++;for(a=e.length-1;a>=0&&!(n<=0);a--)(r=e[a]).pos>t.pmax-1&&(r.del=!0,n--);for(a=0;a<e.length&&!(n<=0);a++)if((r=e[a]).pos<t.pmin+1)for(r.del=!0,n--,d=2*r.size,i=e.length-1;i>=0;i--)e[i].dp-=d;for(a=e.length-1;a>=0&&!(n<=0);a--)(r=e[a]).pos+r.dp+r.size>t.pmax&&(r.del=!0,n--)}}}for(e.each(function(e){var a,d,u,h,j=e[z],i=e[T],s="x"===j._id.charAt(0),p=j.range;if(0===C&&p&&p[0]>p[1]!==s&&(A=-1),u=0,a=s?n.width:n.height,"x"===n.hovermode||"y"===n.hovermode){var r,l,f=E(e,t),b=e.anchor,v="end"===b?-1:1;"middle"===b?r=(l=e.crossPos+(s?m(f.y-e.by/2):g(e.bx/2+e.tx2width/2)))+(s?m(e.by):g(e.bx)):s?r=(l=e.crossPos+m(o+f.y)-m(e.by/2-o))+m(e.by):(d=g(v*o+f.x),h=d+g(v*e.bx),l=e.crossPos+Math.min(d,h),r=e.crossPos+Math.max(d,h)),s?void 0!==O&&void 0!==w&&Math.min(r,w)-Math.max(l,O)>1&&("left"===i.side?(u=i._mainLinePosition,a=n.width):a=i._mainLinePosition):void 0!==M&&void 0!==x&&Math.min(r,x)-Math.max(l,M)>1&&("top"===i.side?(u=i._mainLinePosition,a=n.height):a=i._mainLinePosition)}c[C++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(s?L:1)/2,pmin:u,pmax:a}]}),c.sort(function(e,t){return e[0].posref-t[0].posref||A*(t[0].traceIndex-e[0].traceIndex)});!u&&S<=k;){for(S++,u=!0,a=0;a<c.length-1;){var l=c[a],v=c[a+1],p=l[l.length-1],f=v[0];if((h=p.pos+p.dp+p.size-f.pos-f.dp+f.size)>.01&&p.pmin===f.pmin&&p.pmax===f.pmax){for(i=v.length-1;i>=0;i--)v[i].dp+=h;for(l.push.apply(l,v),c.splice(a+1,1),j=0,i=l.length-1;i>=0;i--)j+=l[i].dp;for(d=j/l.length,i=l.length-1;i>=0;i--)l[i].dp-=d;u=!1}else a++}c.forEach(F)}for(a=c.length-1;a>=0;a--){y=c[a];for(i=y.length-1;i>=0;i--)b=y[i],_=b.datum,_.offset=b.dp,_.del=b.del}}(Re,_e,d,et.commonLabelBoundingBox),C(Re,_e,d._invScaleX,d._invScaleY)),r&&r.tagName)&&(nt=f.getComponentMethod("annotations","hasClickToShow")(e,Ce),B(h.select(r),nt?"pointer":"")),r&&!s&&function(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(s=n.length-1;s>=0;s--){var s,o=n[s],i=e._hoverdata[s];if(o.curveNumber!==i.curveNumber||String(o.pointNumber)!==String(i.pointNumber)||String(o.pointNumbers)!==String(i.pointNumbers))return!0}return!1}(e,0,ze)&&(ze&&e.emit("plotly_unhover",{event:t,points:ze}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:q,yaxes:X,xvals:de,yvals:fe}))}(e,t,n,s,r)})},t.loneHover=function(e,t){o=!0,Array.isArray(e)||(o=!1,e=[e]);var o,n=t.gd,r=x(n),c=k(n),s=M(e.map(function(e){var o=e._x0||e.x0||e.x||0,d=e._x1||e.x1||e.x||0,i=e._y0||e.y0||e.y||0,l=e._y1||e.y1||e.y||0,s=e.eventData;if(s){var u=Math.min(o,d),h=Math.max(o,d),m=Math.min(i,l),p=Math.max(i,l),g=e.trace;if(f.traceIs(g,"gl3d")){var v=n._fullLayout[g.scene]._scene.container,b=v.offsetLeft,j=v.offsetTop;u+=b,h+=b,m+=j,p+=j}s.bbox={x0:u+c,x1:h+c,y0:m+r,y1:p+r},t.inOut_bbox&&t.inOut_bbox.push(s.bbox)}else s=!1;return{color:e.color||a.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,hovertemplateLabels:e.hovertemplateLabels||!1,eventData:s}}),{gd:n,hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||a.background,container:h.select(t.container),outerContainer:t.outerContainer||t.container}).hoverLabels,i=0,l=0;return s.sort(function(e,t){return e.y0-t.y0}).each(function(e,n){var s=e.y0-e.by/2;e.offset=s-5<i?i-s+5:0,i=s+e.by+e.offset,n===t.anchorIndex&&(l=e.offset)}).each(function(e){e.offset-=l}),C(s,!1,n._fullLayout._invScaleX,n._fullLayout._invScaleY),o?s:s.node()},j=/<extra>([\s\S]*)<\/extra>/;function M(e,t){var b=t.gd,l=b._fullLayout,x=t.hovermode,be=t.rotateLabels,de=t.bgColor,H=t.container,Ce=t.outerContainer,C=t.commonLabelOpts||{};if(0===e.length)return[[]];var n,u,g,j,_,P,B,V,q,G,X,J=t.fontFamily||m.HOVERFONT,Y=t.fontSize||m.HOVERFONTSIZE,te=t.fontWeight||l.font.weight,ne=t.fontStyle||l.font.style,ae=t.fontVariant||l.font.variant,k=e[0],y=k.xa,F=k.ya,ge=x.charAt(0),Oe=ge+"Label",A=k[Oe],oe,re,pe,se,fe,ue;if(void 0===A&&"multicategory"===y.type)for(oe=0;oe<e.length&&void 0===(A=e[oe][Oe]);oe++);var he=p(b,Ce),Q=he.top,R=he.width,K=he.height,W=void 0!==A&&k.distance<=t.hoverdistance&&("x"===x||"y"===x);if(W){re=!0;for(P=0;P<e.length;P++)if((re&&void 0===e[P].zLabel&&(re=!1),X=e[P].hoverinfo||e[P].trace.hoverinfo)&&(pe=Array.isArray(X)?X:X.split("+"),-1===pe.indexOf("all")&&-1===pe.indexOf(x))){W=!1;break}re&&(W=!1)}if(G=H.selectAll("g.axistext").data(W?[0]:[]),G.enter().append("g").classed("axistext",!0),G.exit().remove(),g={minX:0,maxX:0,minY:0,maxY:0},G.each(function(){var e,t,n,c,m,j,_,w,E,T,D,O=h.select(this),z=i.ensureSingle(O,"path","",function(e){e.style({"stroke-width":"1px"})}),u=i.ensureSingle(O,"text","",function(e){e.attr("data-notex",1)}),N=C.bgcolor||a.defaultLine,H=C.bordercolor||a.contrast(N),P=a.contrast(N),R={weight:C.font.weight||te,style:C.font.style||ne,variant:C.font.variant||ae,family:C.font.family||J,size:C.font.size||Y,color:C.font.color||P};if(z.style({fill:N,stroke:H}),u.text(A).call(d.font,R).call(r.positionText,0,0).call(r.convertToTspans,b),O.attr("transform",""),e=p(b,u.node()),"x"===x)w="top"===y.side?"-":"",u.attr("text-anchor","middle").call(r.positionText,0,"top"===y.side?Q-e.bottom-o-s:Q-e.top+o+s),t=y._offset+(k.x0+k.x1)/2,c=F._offset+("top"===y.side?0:F._length),n=e.width/2+s,m=t,t<n?m=n:t>l.width-n&&(m=l.width-n),z.attr("d","M"+(t-m)+",0L"+(t-m+o)+","+w+o+"H"+n+"v"+w+(2*s+e.height)+"H"+-n+"V"+w+o+"H"+(t-m-o)+"Z"),t=m,g.minX=t-n,g.maxX=t+n,"top"===y.side?(g.minY=c-(2*s+e.height),g.maxY=c-s):(g.minY=c+s,g.maxY=c+(2*s+e.height));else{"right"===F.side?(_="start",T=1,j="",t=y._offset+y._length):(_="end",T=-1,j="-",t=y._offset),c=F._offset+(k.y0+k.y1)/2,u.attr("text-anchor",_),z.attr("d","M0,0L"+j+o+","+o+"V"+(s+e.height/2)+"h"+j+(2*s+e.width)+"V-"+(s+e.height/2)+"H"+j+o+"V-"+o+"Z"),g.minY=c-(s+e.height/2),g.maxY=c+(s+e.height/2),"right"===F.side?(g.minX=t+o,g.maxX=t+o+(2*s+e.width)):(g.minX=t-o-(2*s+e.width),g.maxX=t-o);var f,S=e.height/2,L=Q-e.top-S,M="clip"+l._uid+"commonlabel"+F._id;t<e.width+2*s+o?(f="M-"+(o+s)+"-"+S+"h-"+(e.width-s)+"V"+S+"h"+(e.width-s)+"Z",D=e.width-t+s,r.positionText(u,D,L),"end"===_&&u.selectAll("tspan").each(function(){var t=h.select(this),n=d.tester.append("text").text(t.text()).call(d.font,R),s=p(b,n.node());Math.round(s.width)<Math.round(e.width)&&t.attr("x",D-s.width),n.remove()})):(r.positionText(u,T*(s+o),L),f=null),E=l._topclips.selectAll("#"+M).data(f?[0]:[]),E.enter().append("clipPath").attr("id",M).append("path"),E.exit().remove(),E.select("path").attr("d",f),d.setClipUrl(u,f?M:null,b)}O.attr("transform",v(t,c))}),c.isUnifiedHover(x)){if(H.selectAll("g.hovertext").remove(),j=e.filter(function(e){return"none"!==e.hoverinfo}),0===j.length)return[];var Z=l.hoverlabel,ce=Z.font,xe={showlegend:!0,legend:{title:{text:A,font:ce},font:ce,bgcolor:Z.bgcolor,bordercolor:Z.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:l.legend?l.legend.traceorder:void 0,orientation:"v"}},je={font:ce};I(xe,je,b._fullData),_=je.legend,_.entries=[];for(se=0;se<j.length;se++)if(n=j[se],"none"!==n.hoverinfo){var we=S(n,!0,x,l,A),ve=we[0],le=we[1];n.name=le,n.text=""!==le?le+" : "+ve:ve,u=n.cd[n.index],u&&(u.mc&&(n.mc=u.mc),u.mcc&&(n.mc=u.mcc),u.mlc&&(n.mlc=u.mlc),u.mlcc&&(n.mlc=u.mlcc),u.mlw&&(n.mlw=u.mlw),u.mrc&&(n.mrc=u.mrc),u.dir&&(n.dir=u.dir)),n._distinct=!0,_.entries.push([n])}_.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),_.layer=H,_._inHover=!0,_._groupTitleFont=Z.grouptitlefont,U(b,_);var O,E,z,D,me=H.select("g.legend"),_e=p(b,me.node()),N=_e.width+2*s,M=_e.height+2*s,L=j[0],ie=(L.x0+L.x1)/2,ee=(L.y0+L.y1)/2,ye=!f.traceIs(L.trace,"bar-like")&&!f.traceIs(L.trace,"box-violin");return"y"===ge?ye?(O=ee-s,z=ee+s):(O=Math.min.apply(null,j.map(function(e){return Math.min(e.y0,e.y1)})),z=Math.max.apply(null,j.map(function(e){return Math.max(e.y0,e.y1)}))):O=z=i.mean(j.map(function(e){return(e.y0+e.y1)/2}))-M/2,"x"===ge?ye?(D=ie+s,E=ie-s):(D=Math.max.apply(null,j.map(function(e){return Math.max(e.x0,e.x1)})),E=Math.min.apply(null,j.map(function(e){return Math.min(e.x0,e.x1)}))):D=E=i.mean(j.map(function(e){return(e.x0+e.x1)/2}))-N/2,B=y._offset,V=F._offset,E+=B-N,O+=V-M,fe=(D+=B)+N<R&&D>=0?D:E+N<R&&E>=0?E:B+N<R?B:D-ie<ie-E+N?R-N:0,fe+=s,ue=(z+=V)+M<K&&z>=0?z:O+M<K&&O>=0?O:V+M<K?V:z-ee<ee-O+M?K-M:0,ue+=s,me.attr("transform",v(fe-1,ue-1)),me}return q=H.selectAll("g.hovertext").data(e,function(e){return T(e)}),q.enter().append("g").classed("hovertext",!0).each(function(){var e=h.select(this);e.append("rect").call(a.fill,a.addOpacity(de,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(d.font,{weight:te,style:ne,variant:ae,family:J,size:Y})}),q.exit().remove(),q.each(function(e){c=h.select(this).attr("transform",""),n=e.color,Array.isArray(n)&&(n=n[e.eventData[0].pointNumber]);var n,c,u,m,g,k,P=e.bgcolor||n,L=a.combine(a.opacity(P)?P:a.defaultLine,de),B=a.combine(a.opacity(n)?n:a.defaultLine,de),D=e.borderColor||a.contrast(L),z=S(e,W,x,l,A,c),T=z[0],O=z[1],F=c.select("text.nums").call(d.font,{family:e.fontFamily||J,size:e.fontSize||Y,color:e.fontColor||D,weight:e.fontWeight||te,style:e.fontStyle||ne,variant:e.fontVariant||ae}).text(T).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,b),y=c.select("text.name"),f=0,M=0;O&&O!==T?(y.call(d.font,{family:e.fontFamily||J,size:e.fontSize||Y,color:B,weight:e.fontWeight||te,style:e.fontStyle||ne,variant:e.fontVariant||ae}).text(O).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,b),k=p(b,y.node()),f=k.width+2*s,M=k.height+2*s):(y.remove(),c.select("rect").remove()),c.select("path").style({fill:L,stroke:D});var t=e.xa._offset+(e.x0+e.x1)/2,i=e.ya._offset+(e.y0+e.y1)/2,j=Math.abs(e.x1-e.x0),_=Math.abs(e.y1-e.y0),E=p(b,F.node()),C=E.width/l._invScaleX,V=E.height/l._invScaleY;if(e.ty0=(Q-E.top)/l._invScaleY,e.bx=C+2*s,e.by=Math.max(V+2*s,M),e.anchor="start",e.txwidth=C,e.tx2width=f,e.offset=0,m=(C+o+s+f)*l._invScaleX,be)e.pos=t,u=i+_/2+m<=K,g=i-_/2-m>=0,"top"!==e.idealAlign&&u||!g?u?(i+=_/2,e.anchor="start"):e.anchor="middle":(i-=_/2,e.anchor="end"),e.crossPos=i;else{if(e.pos=i,u=t+j/2+m<=R,g=t-j/2-m>=0,"left"!==e.idealAlign&&u||!g)if(u)t+=j/2,e.anchor="start";else{e.anchor="middle";var H=m/2,I=t+H-R,N=t-H;I>0&&(t-=I),N<0&&(t+=-N)}else t-=j/2,e.anchor="end";e.crossPos=t}F.attr("text-anchor",e.anchor),f&&y.attr("text-anchor",e.anchor),c.attr("transform",v(t,i)+(be?$(w):""))}),{hoverLabels:q,commonLabelBoundingBox:g}}function S(e,t,n,s,o,a){var c,l,u,h,d="",r="";return void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=i.templateString(e.name,e.trace._meta)),d=y(e.name,e.nameLength)),c=n.charAt(0),h="x"===c?"y":"x",void 0!==e.zLabel?(void 0!==e.xLabel&&(r+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(r+="y: "+e.yLabel+"<br>"),"choropleth"!==e.trace.type&&"choroplethmapbox"!==e.trace.type&&(r+=(r?"z: ":"")+e.zLabel)):t&&e[c+"Label"]===o?r=e[h+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&"scattercarpet"!==e.trace.type&&(r=e.yLabel):r=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(r+=(r?"<br>":"")+e.text),void 0!==e.extraText&&(r+=(r?"<br>":"")+e.extraText),a&&""===r&&!e.hovertemplate&&(""===d&&a.remove(),r=d),u=e.hovertemplate||!1,u&&(l=e.hovertemplateLabels||e,e[c+"Label"]!==o&&(l[c+"other"]=l[c+"Val"],l[c+"otherLabel"]=l[c+"Label"]),r=(r=i.hovertemplateString(u,l,s._d3locale,e.eventData[0]||{},e.trace._meta)).replace(j,function(t,n){return d=y(n,e.nameLength),""})),[r,d]}function E(e,t){var n=0,s=e.offset;return t&&(s*=-R,n=e.offset*P),{x:n,y:s}}function C(e,t,n,i){var a=function(e){return e*n},c=function(e){return e*i};e.each(function(e){if(n=h.select(this),e.del)return n.remove();var n,l,v,j,y,p=n.select("text.nums"),f=e.anchor,g="end"===f?-1:1,m=(v=(j=(y={start:1,end:-1,middle:0}[(l=e).anchor])*(o+s))+y*(l.txwidth+s),"middle"===l.anchor&&(j-=l.tx2width/2,v+=l.txwidth/2+s),{alignShift:y,textShiftX:j,text2ShiftX:v}),O=E(e,t),u=O.x,i=O.y,_="middle"===f;n.select("path").attr("d",_?"M-"+a(e.bx/2+e.tx2width/2)+","+c(i-e.by/2)+"h"+a(e.bx)+"v"+c(e.by)+"h-"+a(e.bx)+"Z":"M0,0L"+a(g*o+u)+","+c(o+i)+"v"+c(e.by/2-o)+"h"+a(g*e.bx)+"v-"+c(e.by)+"H"+a(g*o+u)+"V"+c(i-o)+"Z");var w=u+m.textShiftX,x=i+e.ty0-e.by/2+s,b=e.textAlign||"auto";"auto"!==b&&("left"===b&&"start"!==f?(p.attr("text-anchor","start"),w=_?-e.bx/2-e.tx2width/2+s:-e.bx-s):"right"===b&&"end"!==f&&(p.attr("text-anchor","end"),w=_?e.bx/2-e.tx2width/2-s:e.bx+s)),p.call(r.positionText,a(w),c(x)),e.tx2width&&(n.select("text.name").call(r.positionText,a(m.text2ShiftX+m.alignShift*s+u),c(i+e.ty0-e.by/2+s)),n.select("rect").call(d.setRect,a(m.text2ShiftX+(m.alignShift-1)*e.tx2width/2+u),c(i-e.by/2-1),a(e.tx2width),c(e.by+2)))})}function H(e,t){var s,a,c,h,r=e.index,o=e.trace||{},m=e.cd[0],f=e.cd[r]||{};function d(e){return e||u(e)&&0===e}h=Array.isArray(r)?function(e,t){var n=i.castOption(m,r,e);return d(n)?n:i.extractOption({},o,"",t)}:function(e,t){return i.extractOption(f,o,e,t)};function n(t,n,s){var o=h(n,s);d(o)&&(e[t]=o)}return(n("hoverinfo","hi","hoverinfo"),n("bgcolor","hbg","hoverlabel.bgcolor"),n("borderColor","hbc","hoverlabel.bordercolor"),n("fontFamily","htf","hoverlabel.font.family"),n("fontSize","hts","hoverlabel.font.size"),n("fontColor","htc","hoverlabel.font.color"),n("fontWeight","htw","hoverlabel.font.weight"),n("fontStyle","hty","hoverlabel.font.style"),n("fontVariant","htv","hoverlabel.font.variant"),n("nameLength","hnl","hoverlabel.namelength"),n("textAlign","hta","hoverlabel.align"),e.posref="y"===t||"closest"===t&&"h"===o.orientation?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=i.constrain(e.x0,0,e.xa._length),e.x1=i.constrain(e.x1,0,e.xa._length),e.y0=i.constrain(e.y0,0,e.ya._length),e.y1=i.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:l.hoverLabelText(e.xa,e.xLabelVal,o.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:l.hoverLabelText(e.ya,e.yLabelVal,o.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0))&&(c=l.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text,void 0!==e.xerrneg?e.xLabel+=" +"+c+" / -"+l.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" ± "+c,"x"===t&&(e.distance+=1)),isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0||(a=l.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text,void 0!==e.yerrneg?e.yLabel+=" +"+a+" / -"+l.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" ± "+a,"y"===t&&(e.distance+=1)),s=e.hoverinfo||e.trace.hoverinfo,s&&"all"!==s&&(-1===(s=Array.isArray(s)?s:s.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===s.indexOf("y")&&(e.yLabel=void 0),-1===s.indexOf("z")&&(e.zLabel=void 0),-1===s.indexOf("text")&&(e.text=void 0),-1===s.indexOf("name")&&(e.name=void 0)),e}function _(e,t,n){var s,o,i,r,u,m,f,_,w,C,E,M,F,h=n.container,S=n.fullLayout,c=S._size,O=n.event,T=!!t.hLinePoint,N=!!t.vLinePoint;if(h.selectAll(".spikeline").remove(),N||T){if(f=a.combine(S.plot_bgcolor,S.paper_bgcolor),T){i=t.hLinePoint,s=i&&i.xa,"cursor"===(o=i&&i.ya).spikesnap?(F=O.pointerX,u=O.pointerY):(F=s._offset+i.x,u=o._offset+i.y);var j,y,P=A.readability(i.color,f)<1.5?a.contrast(f):i.color,b=o.spikemode,g=o.spikethickness,D=o.spikecolor||P,z=l.getPxPosition(e,o);(-1!==b.indexOf("toaxis")||-1!==b.indexOf("across"))&&((-1!==b.indexOf("toaxis")&&(j=z,y=F),-1!==b.indexOf("across"))&&(C=o._counterDomainMin,E=o._counterDomainMax,"free"===o.anchor&&(C=Math.min(C,o.position),E=Math.max(E,o.position)),j=c.l+C*c.w,y=c.l+E*c.w),h.insert("line",":first-child").attr({x1:j,x2:y,y1:u,y2:u,"stroke-width":g,stroke:D,"stroke-dasharray":d.dashStyle(o.spikedash,g)}).classed("spikeline",!0).classed("crisp",!0),h.insert("line",":first-child").attr({x1:j,x2:y,y1:u,y2:u,"stroke-width":g+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)),-1!==b.indexOf("marker")&&h.insert("circle",":first-child").attr({cx:z+("right"!==o.side?g:-g),cy:u,r:g,fill:D}).classed("spikeline",!0)}if(N){r=t.vLinePoint,s=r&&r.xa,o=r&&r.ya,"cursor"===s.spikesnap?(m=O.pointerX,M=O.pointerY):(m=s._offset+r.x,M=o._offset+r.y);var x,k,H=A.readability(r.color,f)<1.5?a.contrast(f):r.color,v=s.spikemode,p=s.spikethickness,L=s.spikecolor||H,R=l.getPxPosition(e,s);(-1!==v.indexOf("toaxis")||-1!==v.indexOf("across"))&&((-1!==v.indexOf("toaxis")&&(k=R,x=M),-1!==v.indexOf("across"))&&(_=s._counterDomainMin,w=s._counterDomainMax,"free"===s.anchor&&(_=Math.min(_,s.position),w=Math.max(w,s.position)),k=c.t+(1-w)*c.h,x=c.t+(1-_)*c.h),h.insert("line",":first-child").attr({x1:m,x2:m,y1:k,y2:x,"stroke-width":p,stroke:L,"stroke-dasharray":d.dashStyle(s.spikedash,p)}).classed("spikeline",!0).classed("crisp",!0),h.insert("line",":first-child").attr({x1:m,x2:m,y1:k,y2:x,"stroke-width":p+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)),-1!==v.indexOf("marker")&&h.insert("circle",":first-child").attr({cx:m,cy:R-("top"!==s.side?p:-p),r:p,fill:L}).classed("spikeline",!0)}}}function D(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function y(e,t){return r.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function O(e,t,n){var i,r,c,l,d,o=t[e+"a"],s=t[e+"Val"],a=t.cd[0];return"category"===o.type||"multicategory"===o.type?s=o._categoriesMap[s]:"date"===o.type&&(r=t.trace[e+"periodalignment"],r&&(i=t.cd[t.index],c=i[e+"Start"],void 0===c&&(c=i[e]),l=i[e+"End"],void 0===l&&(l=i[e]),d=l-c,"end"===r?s+=d:"middle"===r&&(s+=d/2)),s=o.d2c(s)),a&&a.t&&a.t.posLetter===o._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(s+=a.t.dPos)),s}function x(e){return e.offsetTop+e.clientTop}function k(e){return e.offsetLeft+e.clientLeft}function p(e,t){var c=e._fullLayout,n=t.getBoundingClientRect(),u=n.left,h=n.top,m=u+n.width,f=h+n.height,l=i.apply3DTransform(c._invTransform)(u,h),d=i.apply3DTransform(c._invTransform)(m,f),s=l[0],o=l[1],a=d[0],r=d[1];return{x:s,y:o,width:a-s,height:r-o,top:Math.min(o,r),left:Math.min(s,a),right:Math.max(s,a),bottom:Math.max(o,r)}}},16132:function(e,t,n){"use strict";var s=n(3400),o=n(76308),i=n(10624).isUnifiedHover;e.exports=function(e,t,n,a){a=a||{};var c=t.legend;function r(e){a.font[e]||(a.font[e]=c?t.legend.font[e]:t.font[e])}t&&i(t.hovermode)&&(a.font||(a.font={}),r("size"),r("family"),r("color"),r("weight"),r("style"),r("variant"),c?(a.bgcolor||(a.bgcolor=o.combine(t.legend.bgcolor,t.paper_bgcolor)),a.bordercolor||(a.bordercolor=t.legend.bordercolor)):a.bgcolor||(a.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",a.bgcolor),n("hoverlabel.bordercolor",a.bordercolor),n("hoverlabel.namelength",a.namelength),s.coerceFont(n,"hoverlabel.font",a.font),n("hoverlabel.align",a.align)}},41008:function(e,t,n){"use strict";var s=n(3400),o=n(65460);e.exports=function(e,t){function n(n,i){return void 0!==t[n]?t[n]:s.coerce(e,t,o,n,i)}return n("clickmode"),n("hoversubplots"),n("hovermode")}},93024:function(e,t,n){"use strict";var r=n(33428),o=n(3400),c=n(86476),s=n(10624),i=n(65460),a=n(83292);e.exports={moduleType:"component",name:"fx",constants:n(92456),schema:{layout:i},attributes:n(55756),layoutAttributes:i,supplyLayoutGlobalDefaults:n(81976),supplyDefaults:n(95448),supplyLayoutDefaults:n(88336),calc:n(55056),getDistanceFunction:s.getDistanceFunction,getClosest:s.getClosest,inbox:s.inbox,quadrature:s.quadrature,appendArrayPointValue:s.appendArrayPointValue,castHoverOption:function(e,t,n){return o.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(e,t,n){return o.castOption(e,n,"hoverinfo",function(n){return o.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)})},hover:a.hover,unhover:c.unhover,loneHover:a.loneHover,loneUnhover:function(e){var t=o.isD3Selection(e)?e:r.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:n(62376)}},65460:function(e,t,n){"use strict";var o=n(92456),i=n(25376),s=i({editType:"none"});s.family.dflt=o.HOVERFONT,s.size.dflt=o.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:s,grouptitlefont:i({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(e,t,n){"use strict";var s=n(3400),o=n(65460),i=n(41008),a=n(16132);e.exports=function(e,t){function n(n,i){return s.coerce(e,t,o,n,i)}i(e,t)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var r=t._has("mapbox"),c=t._has("geo"),l=t._basePlotModules.length;"zoom"===t.dragmode&&((r||c)&&1===l||r&&c&&2===l)&&(t.dragmode="pan"),a(e,t,n),s.coerceFont(n,"hoverlabel.grouptitlefont",t.hoverlabel.font)}},81976:function(e,t,n){"use strict";var s=n(3400),o=n(16132),i=n(65460);e.exports=function(e,t){o(e,t,function(n,o){return s.coerce(e,t,i,n,o)})}},12704:function(e,t,n){"use strict";var l=n(3400),d=n(53756).counter,u=n(86968).u,r=n(33816).idRegex,c=n(31780),o={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[d("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[r.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[r.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:u({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(e,t,n){var s=t[n+"axes"],o=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(s)?s:o.length?o:void 0}function i(e,t,n,s,o,i){c=t(e+"gap",n),r=t("domain."+e),t(e+"side",s);for(var r,c,l,d=new Array(o),u=r[0],h=(r[1]-u)/(o-c),m=h*(1-c),a=0;a<o;a++)l=u+h*a,d[i?o-1-a:a]=[l,l+m];return d}function a(e,t,n,s,o){var i,a=new Array(n);function r(e,n){-1!==t.indexOf(n)&&void 0===s[n]?(a[e]=n,s[n]=e):a[e]=""}if(Array.isArray(e))for(i=0;i<n;i++)r(i,e[i]);else for(r(0,o),i=1;i<n;i++)r(i,o+(i+1));return a}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:o}},layoutAttributes:o,sizeDefaults:function(e,t){var n=e.grid||{},d=s(t,n,"x"),u=s(t,n,"y");if(e.grid||d||u){var h,p,a=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),m=Array.isArray(d),f=Array.isArray(u),_=m&&d!==n.xaxes&&f&&u!==n.yaxes;a?(p=n.subplots.length,h=n.subplots[0].length):(f&&(p=u.length),m&&(h=d.length));var g=c.newContainer(t,"grid"),y=r("rows",p),v=r("columns",h);if(y*v>1){a||m||f||"independent"===r("pattern")&&(a=!0),g._hasSubplotGrid=a;var b,j,w="top to bottom"===r("roworder"),O=a?.2:.1,x=a?.3:.1;_&&t._splomGridDflt&&(b=t._splomGridDflt.xside,j=t._splomGridDflt.yside),g._domains={x:i("x",r,O,b,v),y:i("y",r,x,j,y,w)}}else delete t.grid}function r(e,t){return l.coerce(n,g,o,e,t)}},contentDefaults:function(e,t){if(o=t.grid,o&&o._domains){var n,o,i,r,l,d,u,h,m,f,p,g,v,_,w,O,x,k,A,S,M,F,T,z,C=e.grid||{},b=t._subplots,E=o._hasSubplotGrid,y=o.rows,j=o.columns,D="independent"===o.pattern,c=o._axisMap={};if(E){{k=C.subplots||[],_=o.subplots=new Array(y),v=1;for(n=0;n<y;n++){O=_[n]=new Array(j),F=k[n]||[];for(h=0;h<j;h++)if(D?(i=1===v?"xy":"x"+v+"y"+v,v++):i=F[h],O[h]="",-1!==b.cartesian.indexOf(i)){if(l=i.indexOf("y"),f=i.slice(0,l),p=i.slice(l),void 0!==c[f]&&c[f]!==h||void 0!==c[p]&&c[p]!==n)continue;O[h]=i,c[f]=h,c[p]=n}}}}else M=s(t,C,"x"),S=s(t,C,"y"),o.xaxes=a(M,b.xaxis,j,c,"x"),o.yaxes=a(S,b.yaxis,y,c,"y");g=o._anchors={},A="top to bottom"===o.roworder;for(r in c)if(x=r.charAt(0),w=o[x+"side"],w.length<8)g[r]="free";else if("x"===x){if("t"===w.charAt(0)===A?(m=0,d=1,u=y):(m=y-1,d=-1,u=-1),E){{T=c[r];for(n=m;n!==u;n+=d)if((i=_[n][T])&&(l=i.indexOf("y"),i.slice(0,l)===r)){g[r]=i.slice(l);break}}}else for(n=m;n!==u;n+=d)if(p=o.yaxes[n],-1!==b.cartesian.indexOf(r+p)){g[r]=p;break}}else if("l"===w.charAt(0)?(m=0,d=1,u=j):(m=j-1,d=-1,u=-1),E){{z=c[r];for(n=m;n!==u;n+=d)if((i=_[z][n])&&(l=i.indexOf("y"),i.slice(l)===r)){g[r]=i.slice(0,l);break}}}else for(n=m;n!==u;n+=d)if(f=o.xaxes[n],-1!==b.cartesian.indexOf(f+r)){g[r]=f;break}}}}},65760:function(e,t,n){"use strict";var s=n(33816),o=n(31780).templatedArray;n(36208),e.exports=o("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(e,t,n){"use strict";var s=n(38248),o=n(36896);e.exports=function(e,t,n,i){if(t=t||{},h="log"===n&&"linear"===t.type,p="linear"===n&&"log"===t.type,h||p)for(var u,f,v=e._fullLayout.images,c=t._id.charAt(0),l=0;l<v.length;l++)if(f="images["+l+"].",(u=v[l])[c+"ref"]===t._id){var d,h,p,g=u[c],m=u["size"+c],a=null,r=null;h?(a=o(g,t.range),d=m/Math.pow(10,a)/2,r=2*Math.log(d+Math.sqrt(1+d*d))/Math.LN10):r=(a=Math.pow(10,g))*(Math.pow(10,m/2)-Math.pow(10,-m/2)),s(a)?s(r)||(r=null):(a=null,r=null),i(f+c,a),i(f+"size"+c,r)}}},25024:function(e,t,n){"use strict";var o=n(3400),s=n(54460),i=n(51272),a=n(65760);function r(e,t,n){function i(n,s){return o.coerce(e,t,a,n,s)}if(u=i("source"),!i("visible",!!u))return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var r,d,u,c={_fullLayout:n},h=["x","y"],l=0;l<2;l++)d=h[l],r=s.coerceRef(e,t,c,d,"paper",void 0),"paper"!==r&&s.getFromId(c,r)._imgIndices.push(t._index),s.coercePosition(t,c,i,r,d,0);return t}e.exports=function(e,t){i(e,t,{name:"images",handleItemDefaults:r})}},60963:function(e,t,n){"use strict";var o=n(33428),a=n(43616),s=n(54460),i=n(79811),r=n(9616);e.exports=function(e){var t,c,l,d,h,m,f,p,j,y,_,n=e._fullLayout,w=[],u={},b=[];for(l=0;l<n.images.length;l++)if(t=n.images[l],t.visible)if("below"===t.layer&&"paper"!==t.xref&&"paper"!==t.yref){if(c=i.ref2id(t.xref)+i.ref2id(t.yref),m=n._plots[c],!m){b.push(t);continue}m.mainplot&&(c=m.mainplot.id),u[c]||(u[c]=[]),u[c].push(t)}else"above"===t.layer?w.push(t):b.push(t);_={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},p={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function g(t){var s,n=o.select(this);this._imgSrc!==t.source&&(n.attr("xmlns",r.svg),t.source&&"data:"===t.source.slice(0,5)?(n.attr("xlink:href",t.source),this._imgSrc=t.source):(s=new Promise(function(e){var s=new Image;function o(){n.remove(),e()}this.img=s,s.setAttribute("crossOrigin","anonymous"),s.onerror=o,s.onload=function(){var s,t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0),s=t.toDataURL("image/png"),n.attr("xlink:href",s),e()},n.on("error",o),s.src=t.source,this._imgSrc=t.source}.bind(this)),e._promises.push(s)))}function v(t){var d,u,h,g=o.select(this),i=s.getFromId(e,t.xref),r=s.getFromId(e,t.yref),f="domain"===s.getRefType(t.xref),m="domain"===s.getRefType(t.yref),c=n._size,b=void 0!==i?"string"==typeof t.xref&&f?i._length*t.sizex:Math.abs(i.l2p(t.sizex)-i.l2p(0)):t.sizex*c.w,v=void 0!==r?"string"==typeof t.yref&&m?r._length*t.sizey:Math.abs(r.l2p(t.sizey)-r.l2p(0)):t.sizey*c.h,j=b*_[t.xanchor].offset,y=v*p[t.yanchor].offset,l=_[t.xanchor].sizing+p[t.yanchor].sizing;switch(u=void 0!==i?"string"==typeof t.xref&&f?i._length*t.x+i._offset:i.r2p(t.x)+i._offset:t.x*c.w+c.l,u+=j,d=void 0!==r?"string"==typeof t.yref&&m?r._length*(1-t.y)+r._offset:r.r2p(t.y)+r._offset:c.h-t.y*c.h+c.t,d+=y,t.sizing){case"fill":l+=" slice";break;case"stretch":l="none"}g.attr({x:u,y:d,width:b,height:v,preserveAspectRatio:l,opacity:t.opacity}),h=(i&&"domain"!==s.getRefType(t.xref)?i._id:"")+(r&&"domain"!==s.getRefType(t.yref)?r._id:""),a.setClipUrl(g,h?"clip"+n._uid+h:null,e)}h=n._imageLowerLayer.selectAll("image").data(b),d=n._imageUpperLayer.selectAll("image").data(w),h.enter().append("image"),d.enter().append("image"),h.exit().remove(),d.exit().remove(),h.each(function(e){g.bind(this)(e),v.bind(this)(e)}),d.each(function(e){g.bind(this)(e),v.bind(this)(e)}),j=Object.keys(n._plots);for(l=0;l<j.length;l++)c=j[l],y=n._plots[c],y.imagelayer&&(f=y.imagelayer.selectAll("image").data(u[c]||[]),f.enter().append("image"),f.exit().remove(),f.each(function(e){g.bind(this)(e),v.bind(this)(e)}))}},7402:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:n(65760),supplyLayoutDefaults:n(25024),includeBasePlot:n(36632)("images"),draw:n(60963),convertCoords:n(63556)}},3800:function(e,t,n){"use strict";var s=n(25376),o=n(22548);e.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:s({editType:"legend"}),grouptitlefont:s({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:s({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(e){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(e,t,n){"use strict";var o=n(24040),s=n(3400),a=n(31780),r=n(45464),c=n(3800),l=n(64859),i=n(42451);function d(e,t,n,d){f=t[e]||{},g=a.newContainer(n,e);function u(e,t){return s.coerce(f,g,c,e,t)}if(O=s.coerceFont(u,"font",n.font),u("bgcolor",n.paper_bgcolor),u("bordercolor"),u("visible")){for(var h,f,g,b,O,C,F,D=function(e,t){var n=h._input,o=h;return s.coerce(n,o,r,e,t)},A=n.font||{},z=s.coerceFont(u,"grouptitlefont",s.extendFlat({},A,{size:Math.round(1.1*A.size)})),w=0,k=!1,v="normal",T=(n.shapes||[]).filter(function(e){return e.showlegend}),E=d.concat(T).filter(function(t){return e===(t.legend||"legend")}),x=0;x<E.length;x++)(h=E[x]).visible&&(C=h._isShape,(h.showlegend||h._dfltShowLegend&&!(h._module&&h._module.attributes&&h._module.attributes.showlegend&&!1===h._module.attributes.showlegend.dflt))&&(w++,h.showlegend&&(k=!0,(!C&&o.traceIs(h,"pie-like")||!0===h._input.showlegend)&&w++),s.coerceFont(D,"legendgrouptitle.font",z)),(!C&&o.traceIs(h,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(v=i.isGrouped({traceorder:v})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(v=i.isReversed({traceorder:v})?"reversed+grouped":"grouped"));if(b=s.coerce(t,n,l,"showlegend",k&&w>("legend"===e?1:0)),!1===b&&(n[e]=void 0),(!1!==b||f.uirevision)&&(u("uirevision",n.uirevision),!1!==b)){u("borderwidth");var m,p,y,M="h"===u("orientation"),j="paper"===u("yref"),_="paper"===u("xref"),S="left";M?(y=0,o.getComponentMethod("rangeslider","isVisible")(t.xaxis)?j?(m=1.1,p="bottom"):(m=1,p="top"):j?(m=-.1,p="top"):(m=0,p="bottom")):(m=1,p="auto",_?y=1.02:(y=1,S="right")),s.coerce(f,g,{x:{valType:"number",editType:"legend",min:_?-2:0,max:_?3:1,dflt:y}},"x"),s.coerce(f,g,{y:{valType:"number",editType:"legend",min:j?-2:0,max:j?3:1,dflt:m}},"y"),u("traceorder",v),i.isGrouped(n[e])&&u("tracegroupgap"),u("entrywidth"),u("entrywidthmode"),u("indentation"),u("itemsizing"),u("itemwidth"),u("itemclick"),u("itemdoubleclick"),u("groupclick"),u("xanchor",S),u("yanchor",p),u("valign"),s.noneOrAll(f,g,["x","y"]),u("title.text")&&(u("title.side",M?"left":"top"),F=s.extendFlat({},O,{size:s.bigFont(O.size)}),s.coerceFont(u,"title.font",F))}}}e.exports=function(e,t,n){var o,i,a,c,u,r=n.slice(),l=t.shapes;if(l)for(o=0;o<l.length;o++)a=l[o],a.showlegend&&(u={_input:a._input,visible:a.visible,showlegend:a.showlegend,legend:a.legend},r.push(u));c=["legend"];for(o=0;o<r.length;o++)s.pushUnique(c,r[o].legend);for(t._legends=[],o=0;o<c.length;o++)i=c[o],d(i,e,t,r),t[i]&&t[i].visible&&(t[i]._id=i),t._legends.push(i)}},31140:function(e,t,n){"use strict";var a=n(33428),s=n(3400),v=n(7316),r=n(24040),w=n(95924),b=n(86476),o=n(43616),h=n(76308),c=n(72736),x=n(33048),i=n(65196),j=n(84284),_=j.LINE_SPACING,d=j.FROM_TL,k=j.FROM_BR,A=n(35456),T=n(2012),E=n(42451),l=1,F=/^legend[0-9]*$/;function O(e,t){var j,x,z,D,N,L,R,P,H,B,W,q,n=t||{},y=e._fullLayout,w=g(n),F=n._inHover;if(F?(D=n.layer,z="hover"):(D=y._infolayer,z=w),D){if(z+=y._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0),F){if(!n.entries)return;H=A(n.entries,n)}else{for(var K=(e.calcdata||[]).slice(),U=y.shapes,V=0;V<U.length;V++)j=U[V],j.showlegend&&(q={_isShape:!0,_fullInput:j,index:j._index,name:j.name||j.label.text||"shape "+j._index,legend:j.legend,legendgroup:j.legendgroup,legendgrouptitle:j.legendgrouptitle,legendrank:j.legendrank,legendwidth:j.legendwidth,showlegend:j.showlegend,visible:j.visible,opacity:j.opacity,mode:"line"===j.type?"lines":"markers",line:j.line,marker:{line:j.line,color:j.fillcolor,size:12,symbol:"rect"===j.type?"square":"circle"===j.type?"circle":"hexagon2"}},K.push([{trace:q}]));H=y.showlegend&&A(K,n,y._legends.length>1)}if(W=y.hiddenlabels||[],!(F||y.showlegend&&H.length))return D.selectAll("."+w).remove(),y._topdefs.select("#"+z).remove(),v.autoMargin(e,w);var O=s.ensureSingle(D,"g",w,function(e){F||e.attr("pointer-events","all")}),$=s.ensureSingleById(y._topdefs,"clipPath",z,function(e){e.append("rect")}),I=s.ensureSingle(O,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});I.call(h.stroke,n.bordercolor).call(h.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px"),x=s.ensureSingle(O,"g","scrollbox"),R=n.title,n._titleWidth=0,n._titleHeight=0,R.text?((B=s.ensureSingle(x,"text",w+"titletext")).attr("text-anchor","start").call(o.font,R.font).text(R.text),p(B,x,e,n,l)):x.selectAll("."+w+"titletext").remove(),L=s.ensureSingle(O,"rect","scrollbar",function(e){e.attr(i.scrollBarEnterAttrs).call(h.fill,i.scrollBarColor)}),N=x.selectAll("g.groups").data(H),N.enter().append("g").attr("class","groups"),N.exit().remove(),P=N.selectAll("g.traces").data(s.identity),P.enter().append("g").attr("class","traces"),P.exit().remove(),P.style("opacity",function(e){var t=e[0].trace;return r.traceIs(t,"pie-like")?-1!==W.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){a.select(this).call(M,e,n)}).call(T,e,n).each(function(){F||a.select(this).call(S,e,w)}),s.syncOrAsync([v.previousPromises,function(){return function(e,t,n,s){_=e._fullLayout,M=g(s),s||(s=_[M]);var l,p,_,O,C,A,S,M,W,j=_._size,D=E.isVertical(s),z=E.isGrouped(s),P="fraction"===s.entrywidthmode,r=s.borderwidth,w=2*r,c=i.itemGap,d=s.indentation+s.itemwidth+2*c,x=2*(r+c),R=f(s),N=s.y<0||0===s.y&&"top"===R,B=s.y>1||1===s.y&&"bottom"===R,Y=s.tracegroupgap,$={};if(s._maxHeight=Math.max(N||B?_.height/2:j.h,30),C=0,s._width=0,s._height=0,l=function(e){var n=0,s=0,t=e.title.side;return t&&(-1!==t.indexOf("left")&&(n=e._titleWidth),-1!==t.indexOf("top")&&(s=e._titleHeight)),[n,s]}(s),D)n.each(function(e){var t=e[0].height;o.setTranslate(this,r+l[0],r+l[1]+s._height+t/2+c),s._height+=t,s._width=Math.max(s._width,e[0].width)}),C=d+s._width,s._width+=c+d+w,s._height+=x,z&&(t.each(function(e,t){o.setTranslate(this,0,t*s.tracegroupgap)}),s._height+=(s._lgroupsLength-1)*s.tracegroupgap);else{var k=u(s),q=s.x<0||0===s.x&&"right"===k,K=s.x>1||1===s.x&&"left"===k,H=B||N,L=_.width/2;if(s._maxWidth=Math.max(q?H&&"left"===k?j.l+j.w:L:K?H&&"right"===k?j.r+j.w:L:j.w,2*d),O=0,A=0,n.each(function(e){var t=m(e,s,d);O=Math.max(O,t),A+=t}),C=null,p=0,z){var y=0,h=0,T=0;t.each(function(){var n,e=0,t=0;a.select(this).selectAll("g.traces").each(function(n){var a=m(n,s,d),i=n[0].height;o.setTranslate(this,l[0],l[1]+r+c+i/2+t),t+=i,e=Math.max(e,a),$[n[0].trace.legendgroup]=e}),n=e+c,h>0&&n+r+h>s._maxWidth?(p=Math.max(p,h),h=0,T+=y+Y,y=t):y=Math.max(y,t),o.setTranslate(this,h,T),h+=n}),s._width=Math.max(p,h)+r,s._height=T+y+x}else{var U=n.size(),V=A+w+(U-1)*c<s._maxWidth,v=0,b=0,I=0,F=0;n.each(function(e){var n=e[0].height,i=m(e,s,d),t=V?i:O;P||(t+=c),t+r+b-c>=s._maxWidth&&(p=Math.max(p,F),b=0,I+=v,s._height+=v,v=0),o.setTranslate(this,l[0]+r+b,l[1]+r+I+n/2+c),F=b+i+c,b+=t,v=Math.max(v,n)}),V?(s._width=b+w,s._height=v+x):(s._width=Math.max(p,F)+w,s._height+=v+x)}}s._width=Math.ceil(Math.max(s._width+l[0],s._titleWidth+2*(r+i.titlePad))),s._height=Math.ceil(Math.max(s._height+l[1],s._titleHeight+2*(r+i.itemGap))),s._effHeight=Math.min(s._height,s._maxHeight),S=e._context.edits,W=S.legendText||S.legendPosition,n.each(function(e){var t,l=a.select(this).select("."+M+"toggle"),n=e[0].height,i=e[0].trace.legendgroup,r=m(e,s,d);z&&""!==i&&(r=$[i]),t=W?d:C||r,D||P||(t+=c/2),o.setRect(l,0,-n/2,t,n)})}(e,N,P,n)},function(){var H,W,Y,G,h=y._size,t=n.borderwidth,q="paper"===n.xref,K="paper"===n.yref;if(R.text&&function(e,t,n){if("top center"===t.title.side||"top right"===t.title.side){var r=t.title.font.size*_,s=0,l=e.node(),a=o.bBox(l).width;"top center"===t.title.side?s=.5*(t._width-2*n-2*i.titlePad-a):"top right"===t.title.side&&(s=t._width-2*n-2*i.titlePad-a),c.positionText(e,n+i.titlePad+s,n+r)}}(B,n,t),!F){if(m=q?h.l+h.w*n.x-d[u(n)]*n._width:y.width*n.x-d[u(n)]*n._width,p=K?h.t+h.h*(1-n.y)-d[f(n)]*n._effHeight:y.height*(1-n.y)-d[f(n)]*n._effHeight,U=function(e,t,n,s){var r=e._fullLayout,o=r[t],p=u(o),c=f(o),l="paper"===o.xref,h="paper"===o.yref;e._fullLayout._reservedMargin[t]={};var i=o.y<.5?"b":"t",m=o.x<.5?"l":"r",a={r:r.width-n,l:n+o._width,b:r.height-s,t:s+o._effHeight};if(l&&h)return v.autoMargin(e,t,{x:o.x,y:o.y,l:o._width*d[p],r:o._width*k[p],b:o._effHeight*k[c],t:o._effHeight*d[c]});l?e._fullLayout._reservedMargin[t][i]=a[i]:h||"v"===o.orientation?e._fullLayout._reservedMargin[t][m]=a[m]:e._fullLayout._reservedMargin[t][i]=a[i]}(e,w,m,p),U)return;y.margin.autoexpand&&(P=m,V=p,m=q?s.constrain(m,0,y.width-n._width):P,p=K?s.constrain(p,0,y.height-n._effHeight):V,m!==P&&s.log("Constrain "+w+".x to make legend fit inside graph"),p!==V&&s.log("Constrain "+w+".y to make legend fit inside graph")),o.setTranslate(O,m,p)}if(L.on(".drag",null),O.on("wheel",null),F||n._height<=n._maxHeight||e._context.staticPlot)S=n._effHeight,F&&(S=n._height),I.attr({width:n._width-t,height:S-t,x:t/2,y:t/2}),o.setTranslate(x,0,0),$.select("rect").attr({width:n._width-2*t,height:S-2*t,x:t,y:t}),o.setClipUrl(x,z,e),o.setRect(L,0,0,0,0),delete n._scrollY;else{var m,p,A,S,M,N,P,V,U,X,Q,E=Math.max(i.scrollBarMinHeight,n._effHeight*n._effHeight/n._height),Z=n._effHeight-E-2*i.scrollBarMargin,g=n._height-n._effHeight,j=Z/g,l=Math.min(n._scrollY||0,g);I.attr({width:n._width-2*t+i.scrollBarWidth+i.scrollBarMargin,height:n._effHeight-t,x:t/2,y:t/2}),$.select("rect").attr({width:n._width-2*t+i.scrollBarWidth+i.scrollBarMargin,height:n._effHeight-2*t,x:t,y:t+l}),o.setClipUrl(x,z,e),T(l,E,j),O.on("wheel",function(){T(l=s.constrain(n._scrollY+a.event.deltaY/Z*g,0,g),E,j),0!==l&&l!==g&&a.event.preventDefault()}),X=a.behavior.drag().on("dragstart",function(){var e=a.event.sourceEvent;N="touchstart"===e.type?e.changedTouches[0].clientY:e.clientY,M=l}).on("drag",function(){var e=a.event.sourceEvent;2===e.buttons||e.ctrlKey||(A="touchmove"===e.type?e.changedTouches[0].clientY:e.clientY,l=function(e,t,n){var o=(n-t)/j+e;return s.constrain(o,0,g)}(M,N,A),T(l,E,j))}),L.call(X),Q=a.behavior.drag().on("dragstart",function(){var e=a.event.sourceEvent;"touchstart"===e.type&&(N=e.changedTouches[0].clientY,M=l)}).on("drag",function(){var e=a.event.sourceEvent;"touchmove"===e.type&&(A=e.changedTouches[0].clientY,l=function(e,t,n){var o=(t-n)/j+e;return s.constrain(o,0,g)}(M,N,A),T(l,E,j))}),x.call(Q)}function T(s,a,r){n._scrollY=e._fullLayout[w]._scrollY=s,o.setTranslate(x,0,-s),o.setRect(L,n._width,i.scrollBarMargin+s*r,i.scrollBarWidth,a),$.select("rect").attr("y",t+s)}e._context.edits.legendPosition&&(O.classed("cursor-move",!0),b.init({element:O.node(),gd:e,prepFn:function(){var e=o.getTranslate(O);G=e.x,Y=e.y},moveFn:function(e,t){var s=G+e,i=Y+t;o.setTranslate(O,s,i),W=b.align(s,n._width,h.l,h.l+h.w,n.xanchor),H=b.align(i+n._height,-n._height,h.t+h.h,h.t,n.yanchor)},doneFn:function(){if(void 0!==W&&void 0!==H){var t={};t[w+".x"]=W,t[w+".y"]=H,r.call("_guiRelayout",e,t)}},clickFn:function(t,n){var s=D.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return n.clientX>=e.left&&n.clientX<=e.right&&n.clientY>=e.top&&n.clientY<=e.bottom});s.size()>0&&C(e,O,s,t,n)}}))}],e)}}function m(e,t,n){var s=e[0],i=s.width,a=t.entrywidthmode,o=s.trace.legendwidth||t.entrywidth;return"fraction"===a?t._maxWidth*o:n+(o||i)}function C(e,t,n,s,o){var c,i=n.data()[0][0].trace,a={event:o,node:n.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group&&(a.group=i._group),r.traceIs(i,"pie-like")&&(a.label=n.datum()[0].label),c=w.triggerHandler(e,"plotly_legendclick",a),1===s){if(!1===c)return;t._clickTimeout=setTimeout(function(){e._fullLayout&&x(n,e,s)},e._context.doubleClickDelay)}else 2===s&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==w.triggerHandler(e,"plotly_legenddoubleclick",a)&&!1!==c&&x(n,e,s))}function M(e,t,n){var a,u,h,b,j=g(n),l=e.data()[0][0],d=l.trace,m=r.traceIs(d,"pie-like"),f=!n._inHover&&t._context.edits.legendText&&!m,v=n._maxNameLength;l.groupTitle?(a=l.groupTitle.text,h=l.groupTitle.font):(h=n.font,n.entries?a=l.text:(a=m?l.label:d.name,d._meta&&(a=s.templateString(a,d._meta)))),u=s.ensureSingle(e,"text",j+"text"),u.attr("text-anchor","start").call(o.font,h).text(f?y(a,v):a),b=n.indentation+n.itemwidth+2*i.itemGap,c.positionText(u,b,0),f?u.call(c.makeEditable,{gd:t,text:a}).call(p,e,t,n).on("edit",function(o){if(this.text(y(o,v)).call(p,e,t,n),i=l.trace._fullInput||{},a={},r.hasTransform(i,"groupby")){var i,a,c=r.getTransformIndices(i,"groupby"),h=c[c.length-1],u=s.keyedContainer(i,"transforms["+h+"].styles","target","value.name");u.set(l.trace._group,o),a=u.constructUpdate()}else a.name=o;return i._isShape?r.call("_guiRelayout",t,"shapes["+d.index+"].name",a.name):r.call("_guiRestyle",t,a,d.index)}):p(u,e,t,n)}function y(e,t){var n,s=Math.max(4,t);if(e&&e.trim().length>=s/2)return e;for(n=s-(e=e||"").length;n>0;n--)e+=" ";return e}function S(e,t,n){var i,r=t._context.doubleClickDelay,o=1,c=s.ensureSingle(e,"rect",n+"toggle",function(e){t._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(h.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(c.on("mousedown",function(){(i=(new Date).getTime())-t._legendMouseDownTime<r?o+=1:(o=1,t._legendMouseDownTime=i)}),c.on("mouseup",function(){if(!t._dragged&&!t._editing){var s=t._fullLayout[n];(new Date).getTime()-t._legendMouseDownTime>r&&(o=Math.max(o-1,1)),C(t,s,e,o,a.event)}}))}function p(e,t,n,s,a){s._inHover&&e.attr("data-notex",!0),c.convertToTspans(e,n,function(){!function(e,t,n,s){if(a=e.data()[0][0],n._inHover||!a||a.trace.showlegend){var f=e.select("g[class*=math-group]"),j=f.node(),b=g(n);if(n||(n=t._fullLayout[b]),u=n.borderwidth,h=(s===l?n.title.font:a.groupTitle?a.groupTitle.font:n.font).size*_,j)p=o.bBox(j),r=p.height,d=p.width,s===l?o.setTranslate(f,u,u+.75*r):o.setTranslate(f,0,.25*r);else{var a,r,d,u,h,p,v,O="."+b+(s===l?"title":"")+"text",m=e.select(O),y=c.lineCount(m),w=m.node();r=h*y,d=w?o.bBox(w).width:0,s===l?("left"===n.title.side&&(d+=2*i.itemGap),c.positionText(m,u+i.titlePad,u+h)):(v=2*i.itemGap+n.indentation+n.itemwidth,a.groupTitle&&(v=i.itemGap,d-=n.indentation+n.itemwidth),c.positionText(m,v,-h*((y-1)/2-.3)))}s===l?(n._titleWidth=d,n._titleHeight=r):(a.lineHeight=h,a.height=Math.max(r,16)+3,a.width=d)}else e.remove()}(t,n,s,a)})}function u(e){return s.isRightAnchor(e)?"right":s.isCenterAnchor(e)?"center":"left"}function f(e){return s.isBottomAnchor(e)?"bottom":s.isMiddleAnchor(e)?"middle":"top"}function g(e){return e._id||"legend"}e.exports=function(e,t){if(t)O(e,t);else{var n,i,o=e._fullLayout,s=o._legends;o._infolayer.selectAll('[class^="legend"]').each(function(){var e=a.select(this),t=e.attr("class").split(" ")[0];t.match(F)&&-1===s.indexOf(t)&&e.remove()});for(n=0;n<s.length;n++)i=s[n],O(e,e._fullLayout[i])}}},35456:function(e,t,n){"use strict";var o=n(24040),s=n(42451);e.exports=function(e,t,n){var i,a,r,m,f,p,g,j,y,_,w,O,k,x=t._inHover,F=s.isGrouped(t),T=s.isReversed(t),b={},d=[],M=!1,v={},S=0,h=0;function A(e,o,i){if(!1!==t.visible&&(!n||e===t._id))if(""!==o&&s.isGrouped(t))-1===d.indexOf(o)?(d.push(o),M=!0,b[o]=[i]):b[o].push(i);else{var a="~~i"+S;d.push(a),b[a]=[i],S++}}for(i=0;i<e.length;i++){var u=e[i],E=u[0],c=E.trace,C=c.legend,l=c.legendgroup;if(x||c.visible&&c.showlegend)if(o.traceIs(c,"pie-like"))for(v[l]||(v[l]={}),r=0;r<u.length;r++)f=u[r].label,v[l][f]||(A(C,l,{label:f,color:u[r].color,i:u[r].i,trace:c,pts:u[r].pts}),v[l][f]=!0,h=Math.max(h,(f||"").length));else A(C,l,E),h=Math.max(h,(c.name||"").length)}if(!d.length)return[];w=!M||!F,a=[];for(i=0;i<d.length;i++)y=b[d[i]],w?a.push(y[0]):a.push(y);for(w&&(a=[a]),i=0;i<a.length;i++){j=1/0;for(r=0;r<a[i].length;r++)_=a[i][r].trace.legendrank,j>_&&(j=_);a[i][0]._groupMinRank=j,a[i][0]._preGroupSort=i}k=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};for(a.forEach(function(e,t){e[0]._preGroupSort=t}),a.sort(function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort}),i=0;i<a.length;i++){a[i].forEach(function(e,t){e._preSort=t}),a[i].sort(k),p=a[i][0].trace,g=null;for(r=0;r<a[i].length;r++)if(m=a[i][r].trace.legendgrouptitle,m&&m.text){g=m,x&&(m.font=t._groupTitleFont);break}if(T&&a[i].reverse(),g){O=!1;for(r=0;r<a[i].length;r++)if(o.traceIs(a[i][r].trace,"pie-like")){O=!0;break}a[i].unshift({i:-1,groupTitle:g,noClick:O,trace:{showlegend:p.showlegend,legendgroup:p.legendgroup,visible:"toggleitem"===t.groupclick||p.visible}})}for(r=0;r<a[i].length;r++)a[i][r]=[a[i][r]]}return t._lgroupsLength=a.length,t._maxNameLength=h,a}},33048:function(e,t,n){"use strict";var s=n(24040),o=n(3400),a=o.pushUnique,i=!0;e.exports=function(e,t,n){if(h=t._fullLayout,!t._dragged&&!t._editing){var p,G=h.legend.itemclick,X=h.legend.itemdoubleclick,Z=h.legend.groupclick;if(1===n&&"toggle"===G&&"toggleothers"===X&&i&&t.data&&t._context.showTips?(o.notifier(o._(t,"Double-click on legend to isolate one trace"),"long"),i=!1):i=!1,1===n?p=G:2===n&&(p=X),p){var Y="togglegroup"===Z,f=h.hiddenlabels?h.hiddenlabels.slice():[],y=e.data()[0][0];if(!y.groupTitle||!y.noClick){var J=t._fullData,ee=(h.shapes||[]).filter(function(e){return e.showlegend}),m=J.concat(ee),d=y.trace;d._isShape&&(d=d._fullInput);var r,c,l,h,g,j,w,O,x,C,E,A,S,M,F,T,z,D,N,L,P,H,I,B,W,K,b=d.legendgroup,u={},v=[],k=[],V=[],$=(h.shapes||[]).map(function(e){return e._input}),q=!1,R=d.legend,Q=d._fullInput;if(Q&&Q._isShape||!s.traceIs(d,"pie-like")){if(O=b&&b.length,W=[],O)for(r=0;r<m.length;r++)(K=m[r]).visible&&K.legendgroup===b&&W.push(r);if("toggle"===p){switch(d.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0}if(O)if(Y)for(r=0;r<m.length;r++)F=m[r],!1!==F.visible&&F.legendgroup===b&&_(F,j);else _(d,j);else _(d,j)}else if("toggleothers"===p){P=!0;for(r=0;r<m.length;r++)if(A=(c=m[r])===d,x=!0!==c.showlegend,!(A||x||O&&c.legendgroup===b||c.legend!==R||!0!==c.visible||s.traceIs(c,"notLegendIsolatable"))){P=!1;break}for(r=0;r<m.length;r++)if(!1!==(c=m[r]).visible&&c.legend===R&&!s.traceIs(c,"notLegendIsolatable"))switch(d.visible){case"legendonly":_(c,!0);break;case!0:I=!!P||"legendonly",A=c===d,x=!0!==c.showlegend&&!c.legendgroup,_(c,!!(A||O&&c.legendgroup===b||x)||I)}}for(r=0;r<k.length;r++)if(B=k[r]){H=B.constructUpdate(),L=Object.keys(H);for(l=0;l<L.length;l++)g=L[l],(u[g]=u[g]||[])[V[r]]=H[g]}for(z=Object.keys(u),r=0;r<z.length;r++)for(g=z[r],l=0;l<v.length;l++)u[g].hasOwnProperty(l)||(u[g][l]=void 0);q?s.call("_guiUpdate",t,u,{shapes:$},v):s.call("_guiRestyle",t,u,v)}else{if(S=y.label,M=f.indexOf(S),"toggle"===p)-1===M?f.push(S):f.splice(M,1);else if("toggleothers"===p){N=-1!==M,T=[];for(r=0;r<t.calcdata.length;r++){E=t.calcdata[r];for(l=0;l<E.length;l++)w=E[l].label,R===E[0].trace.legend&&S!==w&&(-1===f.indexOf(w)&&(N=!0),a(f,w),T.push(w))}if(!N)for(C=0;C<T.length;C++)D=f.indexOf(T[C]),-1!==D&&f.splice(D,1)}s.call("_guiRelayout",t,"hiddenlabels",f)}}}}function U(e,t){var n=v.indexOf(e),s=u.visible;return s||(s=u.visible=[]),-1===v.indexOf(e)&&(v.push(e),n=v.length-1),s[n]=t,n}function _(e,t){if(!y.groupTitle||Y){var a,r,c,l,d,u,n=e._fullInput||e,h=n._isShape,i=n.index;void 0===i&&(i=n._index),s.hasTransform(n,"groupby")?(a=k[i],a||(l=s.getTransformIndices(n,"groupby"),u=l[l.length-1],a=o.keyedContainer(n,"transforms["+u+"].styles","target","value.visible"),k[i]=a),r=a.get(e._group),void 0===r&&(r=!0),!1!==r&&a.set(e._group,t),V[i]=U(i,!1!==n.visible)):(c=!1!==n.visible&&t,h?(d=c,$[i].visible=d,q=!0):U(i,c))}}}},42451:function(e,t){"use strict";t.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},t.isVertical=function(e){return"h"!==e.orientation},t.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},2780:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:n(3800),supplyLayoutDefaults:n(77864),draw:n(31140),style:n(2012)}},2012:function(e,t,n){"use strict";var o=n(33428),d=n(24040),s=n(3400),u=s.strTranslate,i=n(43616),a=n(76308),l=n(94288).extractOpts,r=n(43028),f=n(10528),p=n(69656).castOption,g=n(65196);function c(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function h(e){var n,t=e[0].trace,s=t.contours,o=r.hasLines(t),l=r.hasMarkers(t),i=t.visible&&t.fill&&"none"!==t.fill,a=!1,c=!1;return s&&(n=s.coloring,"lines"===n?a=!0:o="none"===n||"heatmap"===n||s.showlines,"constraint"===s.type?i="="!==s._operation:"fill"!==n&&"heatmap"!==n||(c=!0)),{showMarker:l,showLine:o,showFill:i,showGradientLine:a,showGradientFill:c,anyLine:o||a,anyFill:i||c}}function m(e,t,n){return e&&s.isArrayOrTypedArray(e)?t:e>n?n:e}e.exports=function(e,t,n){w=t._fullLayout,n||(n=w.legend);var w,_="constant"===n.itemsizing,j=n.itemwidth,x=(j+2*g.itemGap)/2,v=u(x,0),b=function(e,t,n,s){var o;if(e+1)o=e;else{if(!(t&&t.width>0))return 0;o=t.width}return _?s:Math.min(o,n)};function y(e,s,r){var u=e[0].trace,c=u.marker||{},f=c.line||{},p=c.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",g=r?u.visible&&u.type===r:d.traceIs(u,"bar"),h=o.select(s).select("g.legendpoints").selectAll("path.legend"+r).data(g?[e]:[]);h.enter().append("path").classed("legend"+r,!0).attr("d",p).attr("transform",v),h.exit().remove(),h.each(function(e){var g=o.select(this),r=e[0],v=b(r.mlw,c.line,5,2);g.style("stroke-width",v+"px"),h=r.mcc,!n._inHover&&"mc"in r&&(p=l(c),d=p.mid,void 0===d&&(d=(p.max+p.min)/2),h=i.tryColorscale(c,"")(d));var y=h||r.mc||c.color,s=c.pattern,j=s&&i.getPatternAttr(s.shape,0,"");if(j){var d,h,p,_=i.getPatternAttr(s.bgcolor,0,null),w=i.getPatternAttr(s.fgcolor,0,null),O=s.fgopacity,x=m(s.size,8,10),C=m(s.solidity,.5,1),E="legend-"+u.uid;g.call(i.pattern,"legend",t,E,j,x,C,h,s.fillmode,_,w,O)}else g.call(a.fill,y);v&&a.stroke(g,r.mlc||f.color)})}function O(e,n,i){var c=e[0],a=c.trace,m=i?a.visible&&a.type===i:d.traceIs(a,i),r=o.select(n).select("g.legendpoints").selectAll("path.legend"+i).data(m?[e]:[]);if(r.enter().append("path").classed("legend"+i,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),r.exit().remove(),r.size()){var l=a.marker||{},g=b(p(l.line.width,c.pts),l.line,5,2),u="pieLike",h=s.minExtend(a,{marker:{line:{width:g}}},u),j=s.minExtend(c,{trace:h},u);f(r,j,h,t)}}e.each(function(e){a=o.select(this),t=s.ensureSingle(a,"g","layers"),t.style("opacity",e[0].trace.opacity);var t,i,a,d,h,m=n.indentation,r=n.valign,c=e[0].lineHeight,l=e[0].height;"middle"===r&&0===m||!c||!l?t.attr("transform",null):(d={top:1,bottom:-1}[r]*(.5*(c-l+3))||0,h=n.indentation,t.attr("transform",u(h,d))),t.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),t.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0),i=t.selectAll("g.legendsymbols").data([e]),i.enter().append("g").classed("legendsymbols",!0),i.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var n,u,d=e[0].trace,r=[];if(d.visible)switch(d.type){case"histogram2d":case"heatmap":r=[["M-15,-2V4H15V-2Z"]],n=!0;break;case"choropleth":case"choroplethmapbox":r=[["M-6,-6V6H6V-6Z"]],n=!0;break;case"densitymapbox":r=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],n="radial";break;case"cone":r=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],n=!1;break;case"streamtube":r=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],n=!1;break;case"surface":r=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],n=!0;break;case"mesh3d":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!1;break;case"volume":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!0;break;case"isosurface":r=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],n=!1}u=o.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(r),u.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),u.exit().remove(),u.each(function(e,r){var h,m,f,p=o.select(this),v=l(d),u=v.colorscale,g=v.reversescale;u?n||(m=u.length,f=0===r?u[g?m-1:0][1]:1===r?u[g?0:m-1][1]:u[Math.floor((m-1)/2)][1]):(h=d.vertexcolor||d.facecolor||d.color,f=s.isArrayOrTypedArray(h)?h[r]||h[0]:h),p.attr("d",e[0]),f?p.call(a.fill,f):p.call(function(e){if(e.size()){var s="legendfill-"+d.uid;i.gradient(e,t,s,c(g,"radial"===n),u,"fill")}})})}).each(function(e){var t,n,i,s=e[0].trace,r="waterfall"===s.type;if(e[0]._distinct&&r)return t=e[0].trace[e[0].dir].marker,e[0].mc=t.color,e[0].mlw=t.line.width,e[0].mlc=t.line.color,y(e,this,"waterfall");i=[],s.visible&&r&&(i=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]),n=o.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(i),n.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e){var n=o.select(this),t=s[e[0]].marker,i=b(void 0,t.line,5,2);n.attr("d",e[1]).style("stroke-width",i+"px").call(a.fill,t.color),i&&n.call(a.stroke,t.line.color)})}).each(function(e){y(e,this,"funnel")}).each(function(e){y(e,this)}).each(function(e){var n=e[0].trace,r=o.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&d.traceIs(n,"box-violin")?[e]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),r.exit().remove(),r.each(function(){var e,l,c=o.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==a.opacity(n.fillcolor)||0!==a.opacity((n.line||{}).color)?(e=b(void 0,n.line,5,2),c.style("stroke-width",e+"px").call(a.fill,n.fillcolor),e&&a.stroke(c,n.line.color)):(l=s.minExtend(n,{marker:{size:_?12:s.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(i.pointStyle,l,t))})}).each(function(e){O(e,this,"funnelarea")}).each(function(e){O(e,this,"pie")}).each(function(e){var d,g,_,E,a=h(e),y=a.showFill,m=a.showLine,f=a.showGradientLine,S=a.showGradientFill,A=a.anyFill,k=a.anyLine,p=e[0],n=p.trace,w=l(n),O=w.colorscale,x=w.reversescale,C=r.hasMarkers(n)||!A?"M5,0":k?"M5,-2":"M5,-3",v=o.select(this),u=v.select(".legendfill").selectAll("path").data(y||S?[e]:[]);(u.enter().append("path").classed("js-fill",!0),u.exit().remove(),u.attr("d",C+"h"+j+"v6h-"+j+"z").call(function(e){if(e.size())if(y)i.fillGroupStyle(e,t,!0);else{var s="legendfill-"+n.uid;i.gradient(e,t,s,c(x),O,"fill")}}),m||f)&&(g=b(void 0,n.line,10,5),_=s.minExtend(n,{line:{width:g}}),E=[s.minExtend(p,{trace:_})]),d=v.select(".legendlines").selectAll("path").data(m||f?[E]:[]),d.enter().append("path").classed("js-line",!0),d.exit().remove(),d.attr("d",C+(f?"l"+j+",0.0001":"h"+j)).call(m?i.lineGroupStyle:function(e){if(e.size()){var s="legendline-"+n.uid;i.lineGroupStyle(e),i.gradient(e,t,s,c(x),O,"stroke")}})}).each(function(e){var n,d,m,f,g,b,y,w,p=h(e),E=p.anyFill,C=p.anyLine,x=p.showLine,u=p.showMarker,l=e[0],j=l.trace,O=!u&&!C&&!E&&r.hasText(j);function a(e,t,n,o){var a=s.nestedProperty(j,e).get(),i=s.isArrayOrTypedArray(a)&&t?t(a):a;if(_&&i&&void 0!==o&&(i=o),n){if(i<n[0])return n[0];if(i>n[1])return n[1]}return i}function c(e){return l._distinct&&l.index&&e[l.index]?e[l.index]:e[0]}(u||O||x)&&(n={},d={},u&&(n.mc=a("marker.color",c),n.mx=a("marker.symbol",c),n.mo=a("marker.opacity",s.mean,[.2,1]),n.mlc=a("marker.line.color",c),n.mlw=a("marker.line.width",s.mean,[0,5],2),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"},y=a("marker.size",s.mean,[2,16],12),n.ms=y,d.marker.size=y),x&&(d.line={width:a("line.width",c,[0,10],5)}),O&&(n.tx="Aa",n.tp=a("textposition",c),n.ts=10,n.tc=a("textfont.color",c),n.tf=a("textfont.family",c),n.tw=a("textfont.weight",c),n.ty=a("textfont.style",c),n.tv=a("textfont.variant",c)),g=[s.minExtend(l,n)],(f=s.minExtend(j,d)).selectedpoints=null,f.texttemplate=null),w=o.select(this).select("g.legendpoints"),m=w.selectAll("path.scatterpts").data(u?g:[]),m.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),m.exit().remove(),m.call(i.pointStyle,f,t),u&&(g[0].mrc=3),b=w.selectAll("g.pointtext").data(O?g:[]),b.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),b.exit().remove(),b.selectAll("text").call(i.textPointStyle,f,t)}).each(function(e){var t=e[0].trace,n=o.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.visible&&"candlestick"===t.type?[e,e]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e,n){var i=o.select(this),s=t[n?"increasing":"decreasing"],r=b(void 0,s.line,5,2);i.style("stroke-width",r+"px").call(a.fill,s.fillcolor),r&&a.stroke(i,s.line.color)})}).each(function(e){var t=e[0].trace,n=o.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.visible&&"ohlc"===t.type?[e,e]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e,n){var r=o.select(this),s=t[n?"increasing":"decreasing"],c=b(void 0,s.line,5,2);r.style("fill","none").call(i.dashLine,s.line.dash,c),c&&a.stroke(r,s.line.color)})})}},66540:function(e,t,n){"use strict";n(76052),e.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(e,t,n){"use strict";var r=n(24040),v=n(7316),f=n(79811),i=n(9224),j=n(4016).eraseActiveShape,c=n(3400),s=c._,o=e.exports={};function a(e,t){var n,a,c,l,m=t.currentTarget,h=m.getAttribute("data-attr"),i=m.getAttribute("data-val")||!0,d=e._fullLayout,s={},b=f.list(e,null,!0),u=d._cartesianSpikesEnabled;if("zoom"===h){var o,v="in"===i?.5:2,p=(1+v)/2,g=(1-v)/2;for(c=0;c<b.length;c++)(n=b[c]).fixedrange||(o=n._name,"auto"===i?s[o+".autorange"]=!0:"reset"===i?(void 0===n._rangeInitial0&&void 0===n._rangeInitial1?s[o+".autorange"]=!0:void 0===n._rangeInitial0?(s[o+".autorange"]=n._autorangeInitial,s[o+".range"]=[null,n._rangeInitial1]):void 0===n._rangeInitial1?(s[o+".range"]=[n._rangeInitial0,null],s[o+".autorange"]=n._autorangeInitial):s[o+".range"]=[n._rangeInitial0,n._rangeInitial1],void 0!==n._showSpikeInitial&&(s[o+".showspikes"]=n._showSpikeInitial,"on"!==u||n._showSpikeInitial||(u="off"))):(a=[n.r2l(n.range[0]),n.r2l(n.range[1])],l=[p*a[0]+g*a[1],p*a[1]+g*a[0]],s[o+".range[0]"]=n.l2r(l[0]),s[o+".range[1]"]=n.l2r(l[1])))}else"hovermode"!==h||"x"!==i&&"y"!==i||(i=d._isHoriz?"y":"x",m.setAttribute("data-val",i)),s[h]=i;d._cartesianSpikesEnabled=u,r.call("_guiRelayout",e,s)}function l(e,t){for(var i,c=t.currentTarget,d=c.getAttribute("data-attr"),s=c.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],o={},l=d.split("."),n=0;n<a.length;n++)o[a[n]+"."+l[1]]=s;i="pan"===s?s:"zoom",o.dragmode=i,r.call("_guiRelayout",e,o)}function m(e,t){for(var h=t.currentTarget.getAttribute("data-attr"),f="resetLastSave"===h,m="resetDefault"===h,u=e._fullLayout,d=u._subplots.gl3d||[],n={},l=0;l<d.length;l++){var c,i=d[l],o=i+".camera",a=i+".aspectratio",p=i+".aspectmode",s=u[i]._scene;f?(n[o+".up"]=s.viewInitial.up,n[o+".eye"]=s.viewInitial.eye,n[o+".center"]=s.viewInitial.center,c=!0):m&&(n[o+".up"]=null,n[o+".eye"]=null,n[o+".center"]=null,c=!0),c&&(n[a+".x"]=s.viewInitial.aspectratio.x,n[a+".y"]=s.viewInitial.aspectratio.y,n[a+".z"]=s.viewInitial.aspectratio.z,n[p]=s.viewInitial.aspectmode)}r.call("_guiRelayout",e,n)}function p(e,t){var s,o,i,l,c=t.currentTarget,f=c._previousVal,m=e._fullLayout,d=m._subplots.gl3d||[],p=["xaxis","yaxis","zaxis"],r={},n={};if(f)n=f,c._previousVal=null;else{for(o=0;o<d.length;o++){var a=d[o],u=m[a],h=a+".hovermode";r[h]=u.hovermode,n[h]=!1;for(s=0;s<3;s++)i=p[s],l=a+"."+i+".showspikes",n[l]=!1,r[l]=u[i].showspikes}c._previousVal=r}return n}function u(e,t){for(var n,s,u,h,l=t.currentTarget,i=l.getAttribute("data-attr"),m=l.getAttribute("data-val")||!0,a=e._fullLayout,c=a._subplots.geo||[],o=0;o<c.length;o++)n=c[o],u=a[n],"zoom"===i&&(s=u.projection.scale,h="in"===m?2*s:.5*s,r.call("_guiRelayout",e,n+".projection.scale",h));"reset"===i&&d(e,"geo")}function g(e){var t=e._fullLayout;return!t.hovermode&&(t._has("cartesian")?t._isHoriz?"y":"x":"closest")}function h(e){var t=g(e);r.call("_guiRelayout",e,"hovermode",t)}function b(e,t){for(var l=t.currentTarget.getAttribute("data-val"),o=e._fullLayout,i=o._subplots.mapbox||[],a={},n=0;n<i.length;n++){var c=i[n],s=o[c].zoom,d="in"===l?1.05*s:s/1.05;a[c+".zoom"]=d}r.call("_guiRelayout",e,a)}function d(e,t){for(var s,i=e._fullLayout,d=i._subplots[t]||[],u={},o=0;o<d.length;o++)for(var a=d[o],c=i[a]._subplot.viewInitial,l=Object.keys(c),n=0;n<l.length;n++)s=l[n],u[a+"."+s]=c[s];r.call("_guiRelayout",e,u)}o.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return s(e,"png"===t?"Download plot as a png":"Download plot")},icon:i.camera,click:function(e){var n=e._context.toImageButtonOptions,t={format:n.format||"png"};c.notifier(s(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==t.format&&c.isIE()&&(c.notifier(s(e,"IE only supports svg.  Changing format to svg."),"long"),t.format="svg"),["filename","width","height","scale"].forEach(function(e){e in n&&(t[e]=n[e])}),r.call("downloadImage",e,t).then(function(t){c.notifier(s(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){c.notifier(s(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}},o.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.disk,click:function(e){v.sendDataToCloud(e)}},o.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:i.pencil,click:function(e){v.sendDataToCloud(e)}},o.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:i.zoombox,click:a},o.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:i.pan,click:a},o.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:i.selectbox,click:a},o.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:i.lasso,click:a},o.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:i.drawclosedpath,click:a},o.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:i.drawopenpath,click:a},o.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:i.drawline,click:a},o.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:i.drawrect,click:a},o.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:i.drawcircle,click:a},o.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:i.eraseshape,click:j},o.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:a},o.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:a},o.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:i.autoscale,click:a},o.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:i.home,click:a},o.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:a},o.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:i.tooltip_compare,gravity:"ne",click:a},o.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:i.zoombox,click:l},o.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:i.pan,click:l},o.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:i["3d_rotate"],click:l},o.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:i["z-axis"],click:l},o.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:i.home,click:m},o.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:i.movie,click:m},o.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){var n=p(e,t);r.call("_guiRelayout",e,n)}},o.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:u},o.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:u},o.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:i.autoscale,click:u},o.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:h},o.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:h},o.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:i.tooltip_basic,gravity:"ne",click:h},o.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:i.home,click:function(e){for(var n,t={"node.groups":[],"node.x":[],"node.y":[]},s=0;s<e._fullData.length;s++)n=e._fullData[s]._viewInitial,t["node.groups"].push(n.node.groups.slice()),t["node.x"].push(n.node.x.slice()),t["node.y"].push(n.node.y.slice());r.call("restyle",e,t)}},o.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:i.tooltip_basic,gravity:"ne",click:function(e,t){var n=p(e,t);n.hovermode=g(e),r.call("_guiRelayout",e,n)}},o.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:i.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),a(e,t),n.setAttribute("data-attr","resetLastSave"),m(e,t),d(e,"geo"),d(e,"mapbox")}},o.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:i.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",r.call("_guiRelayout",e,function(e){for(var n,i="on"===e._fullLayout._cartesianSpikesEnabled,s=f.list(e,null,!0),o={},t=0;t<s.length;t++)n=s[t],o[n._name+".showspikes"]=!!i||n._showSpikeInitial;return o}(e))}},o.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:i.home,click:function(e){d(e,"mapbox")}},o.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:i.zoom_plus,click:b},o.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:i.zoom_minus,click:b}},76052:function(e,t,n){"use strict";var o=n(44248),r=Object.keys(o),i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],a=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i),s=[];r.forEach(function(e){!function(e){if(-1===a.indexOf(e._cat||e.name)){var t=e.name,n=(e._cat||e.name).toLowerCase();-1===s.indexOf(t)&&s.push(t),-1===s.indexOf(n)&&s.push(n)}}(o[e])}),s.sort(),e.exports={DRAW_MODES:i,backButtons:a,foreButtons:s}},90824:function(e,t,n){"use strict";var o=n(3400),s=n(76308),i=n(31780),a=n(66540);e.exports=function(e,t){var r,c=e.modebar||{},l=i.newContainer(t,"modebar");function n(e,t){return o.coerce(c,l,a,e,t)}n("orientation"),n("bgcolor",s.addOpacity(t.paper_bgcolor,.5)),r=s.contrast(s.rgb(t.modebar.bgcolor)),n("color",s.addOpacity(r,.3)),n("activecolor",s.addOpacity(r,.7)),n("uirevision",t.uirevision),n("add"),n("remove")}},45460:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"modebar",layoutAttributes:n(66540),supplyLayoutDefaults:n(90824),manage:n(18816)}},18816:function(e,t,n){"use strict";var a=n(79811),i=n(43028),o=n(24040),r=n(10624).isUnifiedHover,c=n(66400),s=n(44248),l=n(76052).DRAW_MODES,d=n(3400).extendDeep;e.exports=function(e){var u,m,h=e._fullLayout,t=e._context,n=h._modeBar;if(t.displayModeBar||t.watermark){if(!Array.isArray(t.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(t.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));u=t.modeBarButtons,m=Array.isArray(u)&&u.length?function(e){for(var t,i,a,n=d([],e),o=0;o<n.length;o++)for(a=n[o],t=0;t<a.length;t++)if(i=a[t],"string"==typeof i){if(void 0===s[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));n[o][t]=s[i]}return n}(u):!t.displayModeBar&&t.watermark?[]:function(e){var t=e._fullLayout,M=e._fullData,u=e._context;function T(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return!0}else{var n=t.name,s=t._cat||t.name;if(n===e||s===e.toLowerCase())return!0}return!1}p=t.modebar.add,"string"==typeof p&&(p=[p]),g=t.modebar.remove,"string"==typeof g&&(g=[g]);var n,c,p,g,v,j,O,C,f=u.modeBarButtonsToAdd.concat(p.filter(function(e){for(var t=0;t<u.modeBarButtonsToRemove.length;t++)if(T(e,u.modeBarButtonsToRemove[t]))return!1;return!0})),N=u.modeBarButtonsToRemove.concat(g.filter(function(e){for(var t=0;t<u.modeBarButtonsToAdd.length;t++)if(T(e,u.modeBarButtonsToAdd[t]))return!1;return!0})),_=t._has("cartesian"),k=t._has("gl3d"),E=t._has("geo"),D=t._has("pie"),P=t._has("funnelarea"),y=t._has("gl2d"),z=t._has("ternary"),x=t._has("mapbox"),A=t._has("polar"),R=t._has("smith"),H=t._has("sankey"),F=function(e){for(var n=a.list({_fullLayout:e},null,!0),t=0;t<n.length;t++)if(!n[t].fixedrange)return!1;return!0}(t),L=r(t.hovermode),S=[];function w(e){if(e.length){for(n=[],t=0;t<e.length;t++){for(var t,n,o,c=e[t],i=s[c],l=i.name.toLowerCase(),d=(i._cat||i.name).toLowerCase(),r=!1,a=0;a<N.length;a++)if(o=N[a].toLowerCase(),o===l||o===d){r=!0;break}r||n.push(s[c])}S.push(n)}}O=["toImage"],u.showEditInChartStudio?O.push("editInChartStudio"):u.showSendToCloud&&O.push("sendDataToCloud"),w(O);var b=[],d=[],h=[],m=[];if((_||y||D||P||z)+E+k+x+A+R>1?(d=["toggleHover"],h=["resetViews"]):E?(b=["zoomInGeo","zoomOutGeo"],d=["hoverClosestGeo"],h=["resetGeo"]):k?(d=["hoverClosest3d"],h=["resetCameraDefault3d","resetCameraLastSave3d"]):x?(b=["zoomInMapbox","zoomOutMapbox"],d=["toggleHover"],h=["resetViewMapbox"]):y?d=["hoverClosestGl2d"]:D?d=["hoverClosestPie"]:H?(d=["hoverClosestCartesian","hoverCompareCartesian"],h=["resetViewSankey"]):d=["toggleHover"],_&&(d=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(e){for(var t=0;t<e.length;t++)if(!o.traceIs(e[t],"noHover"))return!1;return!0}(M)||L)&&(d=[]),!_&&!y||F||(b=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==h[0]&&(h=["resetScale2d"])),k?m=["zoom3d","pan3d","orbitRotation","tableRotation"]:(_||y)&&!F||z?m=["zoom2d","pan2d"]:x||E?m=["pan2d"]:A&&(m=["zoom2d"]),function(e){for(var t,n=!1,s=0;s<e.length&&!n;s++)t=e[s],t._module&&t._module.selectPoints&&(o.traceIs(t,"scatter-like")?(i.hasMarkers(t)||i.hasText(t))&&(n=!0):o.traceIs(t,"box-violin")&&"all"!==t.boxpoints&&"all"!==t.points||(n=!0));return n}(M)&&m.push("select2d","lasso2d"),v=[],n=function(e){-1===v.indexOf(e)&&-1!==d.indexOf(e)&&v.push(e)},Array.isArray(f)){for(C=[],j=0;j<f.length;j++)c=f[j],"string"==typeof c?(c=c.toLowerCase(),-1!==l.indexOf(c)?(t._has("mapbox")||t._has("cartesian"))&&m.push(c):"togglespikelines"===c?n("toggleSpikelines"):"togglehover"===c?n("toggleHover"):"hovercompare"===c?n("hoverCompareCartesian"):"hoverclosest"===c?(n("hoverClosestCartesian"),n("hoverClosestGeo"),n("hoverClosest3d"),n("hoverClosestGl2d"),n("hoverClosestPie")):"v1hovermode"===c&&(n("toggleHover"),n("hoverClosestCartesian"),n("hoverCompareCartesian"),n("hoverClosestGeo"),n("hoverClosest3d"),n("hoverClosestGl2d"),n("hoverClosestPie"))):C.push(c);f=C}return w(m),w(b.concat(h)),w(v),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(S,f)}(e),n?n.update(e,m):h._modeBar=c(e,m)}else n&&(n.destroy(),delete h._modeBar)}},66400:function(e,t,n){"use strict";var s,i=n(33428),d=n(38248),o=n(3400),a=n(9224),c=n(25788).version,l=new DOMParser;function r(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}s=r.prototype,s.update=function(e,t){this.graphInfo=e;var i,a,c,s=this.graphInfo._context,r=this.graphInfo._fullLayout,n="modebar-"+r._uid;this.element.setAttribute("id",n),this._uid=n,this.element.className="modebar","hover"===s.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse()),i=r.modebar,c="hover"===s.displayModeBar?".js-plotly-plot .plotly:hover ":"",o.deleteRelatedStyleRule(n),o.addRelatedStyleRule(n,c+"#"+n+" .modebar-group","background-color: "+i.bgcolor),o.addRelatedStyleRule(n,"#"+n+" .modebar-btn .icon path","fill: "+i.color),o.addRelatedStyleRule(n,"#"+n+" .modebar-btn:hover .icon path","fill: "+i.activecolor),o.addRelatedStyleRule(n,"#"+n+" .modebar-btn.active .icon path","fill: "+i.activecolor);var l=!this.hasButtons(t),d=this.hasLogo!==s.displaylogo,u=this.locale!==s.locale;(this.locale=s.locale,(l||d||u)&&(this.removeAllButtons(),this.updateButtons(t),s.watermark||s.displaylogo))&&(a=this.getLogo(),s.watermark&&(a.className=a.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(a,this.element.childNodes[0]):this.element.appendChild(a),this.hasLogo=!0),this.updateActiveButton()},s.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=t.createGroup();e.forEach(function(e){var o,s=e.name;if(!s)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(s))throw new Error("button name '"+s+"' is taken");t.buttonsNames.push(s),o=t.createButton(e),t.buttonElements.push(o),n.appendChild(o)}),t.element.appendChild(n)})},s.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},s.createButton=function(e){var n,s,o,r=this,t=document.createElement("a");if(t.setAttribute("rel","tooltip"),t.className="modebar-btn",n=e.title,void 0===n?n=e.name:"function"==typeof n&&(n=n(this.graphInfo)),(n||0===n)&&t.setAttribute("data-title",n),void 0!==e.attr&&t.setAttribute("data-attr",e.attr),s=e.val,void 0!==s&&("function"==typeof s&&(s=s(this.graphInfo)),t.setAttribute("data-val",s)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");return t.addEventListener("click",function(t){e.click(r.graphInfo,t),r.updateActiveButton(t.currentTarget)}),t.setAttribute("data-toggle",e.toggle||!1),e.toggle&&i.select(t).classed("active",!0),o=e.icon,"function"==typeof o?t.appendChild(o()):t.appendChild(this.createIcon(o||a.question)),t.setAttribute("data-gravity",e.gravity||"n"),t},s.createIcon=function(e){var t,n,o=d(e.height)?Number(e.height):e.ascent-e.descent,s="http://www.w3.org/2000/svg";return e.path&&((t=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,e.width,o].join(" ")),t.setAttribute("class","icon"),n=document.createElementNS(s,"path"),n.setAttribute("d",e.path),e.transform?n.setAttribute("transform",e.transform):void 0!==e.ascent&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(n)),e.svg&&(t=l.parseFromString(e.svg,"application/xml").childNodes[0]),t.setAttribute("height","1em"),t.setAttribute("width","1em"),t},s.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var r,c=e.getAttribute("data-val")||!0,s=e.getAttribute("data-attr"),l="true"===e.getAttribute("data-toggle"),a=i.select(e);l?s===n&&a.classed("active",!a.classed("active")):(r=null===s?s:o.nestedProperty(t,s).get(),a.classed("active",r===c))})},s.hasButtons=function(e){var t,n,s=this.buttons;if(!s)return!1;if(e.length!==s.length)return!1;for(t=0;t<e.length;++t){if(e[t].length!==s[t].length)return!1;for(n=0;n<e[t].length;n++)if(e[t][n].name!==s[t][n].name)return!1}return!0},s.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plotly.com/",e.target="_blank",e.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+c+")"),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(a.newplotlylogo)),t.appendChild(e),t},s.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},s.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},e.exports=function(e,t){var n=e._fullLayout,s=new r({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&i.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},26680:function(e,t,n){"use strict";var o=n(25376),s=n(22548),i=(0,n(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:i,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:o({editType:"plot"}),bgcolor:{valType:"color",dflt:s.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(e){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(e,t,n){"use strict";var s=n(3400),a=n(76308),r=n(31780),c=n(51272),i=n(26680),o=n(85984);function l(e,t,n,o){var r,c=o.calendar;function a(n,o){return s.coerce(e,t,i.buttons,n,o)}a("visible")&&(r=a("step"),"all"!==r&&(!c||"gregorian"===c||"month"!==r&&"year"!==r?a("stepmode"):t.stepmode="backward",a("count")),a("label"))}e.exports=function(e,t,n,d,u){var m,g,f=e.rangeselector||{},p=r.newContainer(t,"rangeselector");function h(e,t){return s.coerce(f,p,i,e,t)}h("visible",c(f,p,{name:"buttons",handleItemDefaults:l,calendar:u}).length>0)&&(m=function(e,t,n){for(var a,r=n.filter(function(n){return t[n].anchor===e._id}),s=0,i=0;i<r.length;i++)a=t[r[i]].domain,a&&(s=Math.max(a[1],s));return[e.domain[0],s+o.yPad]}(t,n,d),h("x",m[0]),h("y",m[1]),s.noneOrAll(e,t,["x","y"]),h("xanchor"),h("yanchor"),s.coerceFont(h,"font",n.font),g=h("bgcolor"),h("activecolor",a.contrast(g,o.lightAmount,o.darkAmount)),h("bordercolor"),h("borderwidth"))}},50216:function(e,t,n){"use strict";var o=n(33428),j=n(24040),g=n(7316),u=n(76308),d=n(43616),s=n(3400),l=s.strTranslate,i=n(72736),p=n(79811),c=n(84284),h=c.LINE_SPACING,m=c.FROM_TL,f=c.FROM_BR,r=n(85984),v=n(48040);function b(e){return e._id}function a(e,t,n){var o=s.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});o.attr({rx:r.rx,ry:r.ry}),o.call(u.stroke,t.bordercolor).call(u.fill,function(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}(t,n)).style("stroke-width",t.borderwidth+"px")}function y(e,t,n,o){var a,r;s.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")}).call(d.font,t.font).text((a=n,r=o._fullLayout._meta,a.label?r?s.templateString(a.label,r):a.label:"all"===a.step?"all":a.count+a.step.charAt(0))).call(function(e){i.convertToTspans(e,o)})}e.exports=function(e){var t=e._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t,s=p.list(e,"x",!0),o=[],n=0;n<s.length;n++)t=s[n],t.rangeselector&&t.rangeselector.visible&&o.push(t);return o}(e),b);t.enter().append("g").classed("rangeselector",!0),t.exit().remove(),t.style({cursor:"pointer","pointer-events":"all"}),t.each(function(t){var p=o.select(this),c=t,n=c.rangeselector,u=p.selectAll("g.button").data(s.filterVisible(n.buttons));u.enter().append("g").classed("button",!0),u.exit().remove(),u.each(function(t){var s=o.select(this),i=v(c,t);t._isActive=function(e,t,n){if("all"===t.step)return!0===e.autorange;var s=Object.keys(n);return e.range[0]===n[s[0]]&&e.range[1]===n[s[1]]}(c,t,i),s.call(a,n,t),s.call(y,n,t,e),s.on("click",function(){e._dragged||j.call("_guiRelayout",e,i)}),s.on("mouseover",function(){t._isHovered=!0,s.call(a,n,t)}),s.on("mouseout",function(){t._isHovered=!1,s.call(a,n,t)})}),function(e,t,n,a,c){var p=0,u=0,w=n.borderwidth;t.each(function(){var e=o.select(this).select(".selector-text"),t=n.font.size*h,s=Math.max(t*i.lineCount(e),16)+3;u=Math.max(u,s)}),t.each(function(){var t=o.select(this),a=t.select(".selector-rect"),e=t.select(".selector-text"),c=e.node()&&d.bBox(e.node()).width,m=n.font.size*h,f=i.lineCount(e),s=Math.max(c+10,r.minButtonWidth);t.attr("transform",l(w+p,w)),a.attr({x:0,y:0,width:s,height:u}),i.positionText(e,s/2,u/2-(f-1)*m/2+3),p+=s+5});var j,y=e._fullLayout._size,v=y.l+y.w*n.x,b=y.t+y.h*(1-n.y),_="left";s.isRightAnchor(n)&&(v-=p,_="right"),s.isCenterAnchor(n)&&(v-=p/2,_="center"),j="top",s.isBottomAnchor(n)&&(b-=u,j="bottom"),s.isMiddleAnchor(n)&&(b-=u/2,j="middle"),p=Math.ceil(p),u=Math.ceil(u),v=Math.round(v),b=Math.round(b),g.autoMargin(e,a+"-range-selector",{x:n.x,y:n.y,l:p*m[_],r:p*f[_],b:u*f[j],t:u*m[j]}),c.attr("transform",l(v,b))}(e,u,n,c._name,p)})}},48040:function(e,t,n){"use strict";var s=n(73220),o=n(3400).titleCase;e.exports=function(e,t){var a,i=e._name,n={};return"all"===t.step?n[i+".autorange"]=!0:(a=function(e,t){var n,l,a=e.range,r=new Date(e.r2l(a[1])),d=t.step,i=s["utc"+o(d)],c=t.count;switch(t.stepmode){case"backward":n=e.l2r(+i.offset(r,-c));break;case"todate":l=i.offset(r,-c),n=e.l2r(+i.ceil(l))}return[n,a[1]]}(e,t),n[i+".range[0]"]=a[0],n[i+".range[1]"]=a[1]),n}},41152:function(e,t,n){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:n(26680)}}},layoutAttributes:n(26680),handleDefaults:n(22148),draw:n(50216)}},11200:function(e,t,n){"use strict";var s=n(22548);e.exports={bgcolor:{valType:"color",dflt:s.background,editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(e,t,n){"use strict";var s=n(79811).list,o=n(19280).getAutoRange,i=n(74636);e.exports=function(e){for(var t,a,r=s(e,"x",!0),n=0;n<r.length;n++)a=r[n],t=a[i.name],t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=o(e,a))}},74636:function(e){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(e,t,n){"use strict";var s=n(3400),o=n(31780),i=n(79811),a=n(11200),r=n(10936);e.exports=function(e,t,n){if(l=e[n],f=t[n],(l.rangeslider||t._requestRangeslider[f._id])&&(s.isPlainObject(l.rangeslider)||(l.rangeslider={}),d=l.rangeslider,m=o.newContainer(f,"rangeslider"),c("visible"))){if(c("bgcolor",t.plot_bgcolor),c("bordercolor"),c("borderwidth"),c("thickness"),c("autorange",!f.isValidRange(d.range)),c("range"),p=t._subplots,p)for(var l,d,u,h,m,f,p,g,j,_,w=p.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===i.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),y=s.simpleMap(w,i.id2name),v=0;v<y.length;v++)u=y[v],h=d[u]||{},_=o.newContainer(m,u,"yaxis"),g=t[u],h.range&&g.isValidRange(h.range)&&(j="fixed"),"match"!==b("rangemode",j)&&b("range",g.range.slice());m._input=d}function c(e,t){return s.coerce(d,m,a,e,t)}function b(e,t){return s.coerce(h,_,r,e,t)}}},20060:function(e,t,n){"use strict";var a=n(33428),g=n(24040),p=n(7316),o=n(3400),r=o.strTranslate,l=n(43616),i=n(76308),m=n(81668),h=n(57952),c=n(79811),u=n(86476),f=n(93972),s=n(74636);function d(e){return"number"==typeof e.clientX?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function v(e,t,n,a){var u=o.ensureSingle(e,"rect",s.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),c=a.borderwidth%2==0?a.borderwidth:a.borderwidth-1,d=-a._offsetShift,h=l.crispRound(t,a.borderwidth);u.attr({width:a._width+c,height:a._height+c,transform:r(d,d),"stroke-width":h}).call(i.stroke,a.bordercolor).call(i.fill,a.bgcolor)}function b(e,t,n,s){var i=t._fullLayout;o.ensureSingleById(i._topdefs,"clipPath",s._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:s._width,height:s._height})}function j(e,t,n,i){var d,u=t.calcdata,r=e.selectAll("g."+s.rangePlotClassName).data(n._subplotsWith,o.identity);r.enter().append("g").attr("class",function(e){return s.rangePlotClassName+" "+e}).call(l.setClipUrl,i._clipId,t),r.order(),r.exit().remove(),r.each(function(e,s){var l,m,f,b=a.select(this),j=0===s,o=c.getFromId(t,e,"y"),g=o._name,v=i[g],r={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};n.rangebreaks&&(r.layout.xaxis.rangebreaks=n.rangebreaks),r.layout[g]={type:o.type,domain:[0,1],range:"match"!==v.rangemode?v.range.slice():o.range.slice(),calendar:o.calendar},o.rangebreaks&&(r.layout[g].rangebreaks=o.rangebreaks),p.supplyDefaults(r),m=r._fullLayout.xaxis,f=r._fullLayout[g],m.clearCalc(),m.setScale(),f.clearCalc(),f.setScale(),l={id:e,plotgroup:b,xaxis:m,yaxis:f,isRangePlot:!0},j?d=l:(l.mainplot="xy",l.mainplotinfo=d),h.rangePlot(t,l,function(e,t){for(var s,o,i=[],n=0;n<e.length;n++)s=e[n],o=s[0].trace,o.xaxis+o.yaxis===t&&i.push(s);return i}(u,e))})}function y(e,t,n,a,r){o.ensureSingle(e,"rect",s.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",a._height).call(i.fill,s.maskColor),o.ensureSingle(e,"rect",s.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",a._height).call(i.fill,s.maskColor),"match"!==r.rangemode&&(o.ensureSingle(e,"rect",s.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",a._width).call(i.fill,s.maskOppAxisColor),o.ensureSingle(e,"rect",s.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",a._width).style("border-top",s.maskOppBorder).call(i.fill,s.maskOppAxisColor))}function _(e,t,n,i){t._context.staticPlot||o.ensureSingle(e,"rect",s.slideBoxClassName,function(e){e.attr({y:0,cursor:s.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:i._height,fill:s.slideBoxFill})}function w(e,t,n,a){var r,c=o.ensureSingle(e,"g",s.grabberMinClassName),l=o.ensureSingle(e,"g",s.grabberMaxClassName),d={x:0,width:s.handleWidth,rx:s.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":s.handleStrokeWidth,"shape-rendering":"crispEdges"},u={y:Math.round(a._height/4),height:Math.round(a._height/2)};o.ensureSingle(c,"rect",s.handleMinClassName,function(e){e.attr(d)}).attr(u),o.ensureSingle(l,"rect",s.handleMaxClassName,function(e){e.attr(d)}).attr(u),r={width:s.grabAreaWidth,x:0,y:0,fill:s.grabAreaFill,cursor:t._context.staticPlot?void 0:s.grabAreaCursor},o.ensureSingle(c,"rect",s.grabAreaMinClassName,function(e){e.attr(r)}).attr("height",a._height),o.ensureSingle(l,"rect",s.grabAreaMaxClassName,function(e){e.attr(r)}).attr("height",a._height)}e.exports=function(e){for(var i,h,t=e._fullLayout,n=t._rangeSliderData,l=0;l<n.length;l++)h=n[l][s.name],h._clipId=h._id+"-"+t._uid;i=t._infolayer.selectAll("g."+s.containerClassName).data(n,function(e){return e._name}),i.exit().each(function(e){var n=e[s.name];t._topdefs.select("#"+n._clipId).remove()}).remove(),0!==n.length&&(i.enter().append("g").classed(s.containerClassName,!0).attr("pointer-events","all"),i.each(function(n){var l,h,p,O,x,E,A,S,M,D,N,L,R,P,I,F=a.select(this),i=n[s.name],T=t[c.id2name(n.anchor)],k=i[c.id2name(n.anchor)];i.range&&(S=o.simpleMap(i.range,n.r2l),x=o.simpleMap(n.range,n.r2l),P=x[0]<x[1]?[Math.min(S[0],x[0]),Math.max(S[1],x[1])]:[Math.max(S[0],x[0]),Math.min(S[1],x[1])],i.range=i._input.range=o.simpleMap(P,n.l2r)),n.cleanRange("rangeslider.range"),E=t._size,M=n.domain,i._width=E.w*(M[1]-M[0]),R=Math.round(E.l+E.w*M[0]),D=Math.round(E.t+E.h*(1-n._counterDomainMin)+("bottom"===n.side?n._depth:0)+i._offsetShift+s.extraPad),F.attr("transform",r(R,D)),i._rl=o.simpleMap(i.range,n.r2l);var C=i._rl[0],z=i._rl[1],H=z-C;if(i.p2d=function(e){return e/i._width*H+C},i.d2p=function(e){return(e-C)/H*i._width},n.rangebreaks&&(l=n.locateBreaks(C,z),l.length)){N=0;for(h=0;h<l.length;h++)N+=(p=l[h]).max-p.min;A=i._width/(z-C-N),O=[-A*C];for(h=0;h<l.length;h++)p=l[h],O.push(O[O.length-1]-A*(p.max-p.min));for(i.d2p=function(e){for(var n,s=O[0],t=0;t<l.length;t++)if(n=l[t],e>=n.max)s=O[t+1];else if(e<n.min)break;return s+A*e},h=0;h<l.length;h++)(p=l[h]).pmin=i.d2p(p.min),p.pmax=i.d2p(p.max);i.p2d=function(e){for(var n,s=O[0],t=0;t<l.length;t++)if(n=l[t],e>=n.pmax)s=O[t+1];else if(e<n.pmin)break;return(e-s)/A}}"match"!==k.rangemode&&(L=T.r2l(k.range[0]),I=T.r2l(k.range[1])-L,i.d2pOppAxis=function(e){return(e-L)/I*i._height}),F.call(v,e,n,i).call(b,e,n,i).call(j,e,n,i).call(y,e,n,i,k).call(_,e,n,i).call(w,e,n,i),function(e,t,n,i){if(!t._context.staticPlot){var c=e.select("rect."+s.slideBoxClassName).node(),l=e.select("rect."+s.grabAreaMinClassName).node(),h=e.select("rect."+s.grabAreaMaxClassName).node();e.on("mousedown",r),e.on("touchstart",r)}function r(){var j=a.event,_=j.target,y=d(j),b=y-e.node().getBoundingClientRect().left,r=i.d2p(n._rl[0]),m=i.d2p(n._rl[1]),s=u.coverSlip();function p(e){var p,v,j,w,u=+d(e)-y;switch(_){case c:if(j="ew-resize",r+u>n._length||m+u<0)return;p=r+u,v=m+u;break;case l:if(j="col-resize",r+u>n._length)return;p=r+u,v=m;break;case h:if(j="col-resize",m+u<0)return;p=r,v=m+u;break;default:j="ew-resize",p=b,v=b+u}v<p&&(w=v,v=p,p=w),i._pixelMin=p,i._pixelMax=v,f(a.select(s),j),function(e,t,n,s){function i(e){return n.l2r(o.constrain(e,s._rl[0],s._rl[1]))}var a=i(s.p2d(s._pixelMin)),r=i(s.p2d(s._pixelMax));window.requestAnimationFrame(function(){g.call("_guiRelayout",t,n._name+".range",[a,r])})}(0,t,n,i)}function v(){s.removeEventListener("mousemove",p),s.removeEventListener("mouseup",v),this.removeEventListener("touchmove",p),this.removeEventListener("touchend",v),o.removeElement(s)}this.addEventListener("touchmove",p),this.addEventListener("touchend",v),s.addEventListener("mousemove",p),s.addEventListener("mouseup",v)}}(F,e,n,i),function(e,t,n,i,a,c){u=s.handleWidth/2;function g(e){return o.constrain(e,0,i._width)}function v(e){return o.constrain(e,0,i._height)}function p(e){return o.constrain(e,-u,i._width+u)}l=g(i.d2p(n._rl[0])),d=g(i.d2p(n._rl[1])),(e.select("rect."+s.slideBoxClassName).attr("x",l).attr("width",d-l),e.select("rect."+s.maskMinClassName).attr("width",l),e.select("rect."+s.maskMaxClassName).attr("x",d).attr("width",i._width-d),"match"!==c.rangemode)&&(f=i._height-v(i.d2pOppAxis(a._rl[1])),h=i._height-v(i.d2pOppAxis(a._rl[0])),e.select("rect."+s.maskMinOppAxisClassName).attr("x",l).attr("height",f).attr("width",d-l),e.select("rect."+s.maskMaxOppAxisClassName).attr("x",l).attr("y",h).attr("height",i._height-h).attr("width",d-l),e.select("rect."+s.slideBoxClassName).attr("y",f).attr("height",h-f));var l,d,u,h,f,m=.5,b=Math.round(p(l-u))-m,j=Math.round(p(d-u))+m;e.select("g."+s.grabberMinClassName).attr("transform",r(b,m)),e.select("g."+s.grabberMaxClassName).attr("transform",r(j,m))}(F,0,n,i,T,k),"bottom"===n.side&&m.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:t._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:D+i._height+i._offsetShift+10+1.5*n.title.font.size,"text-anchor":"middle"}})}))}},97944:function(e,t,n){"use strict";var a=n(79811),r=n(72736),o=n(74636),c=n(84284).LINE_SPACING,s=o.name;function i(e){var t=e&&e[s];return t&&t.visible}t.isVisible=i,t.makeData=function(e){var t,n,o,r=a.list({_fullLayout:e},"x",!0),c=e.margin,l=[];if(!e._has("gl2d"))for(o=0;o<r.length;o++)n=r[o],i(n)&&(l.push(n),t=n[s],t._id=s+n._id,t._height=(e.height-c.b-c.t)*t.thickness,t._offsetShift=Math.floor(t.borderwidth/2));e._rangeSliderData=l},t.autoMarginOpts=function(e,t){var a=e._fullLayout,n=t[s],d=t._id.charAt(0),l=0,i=0;return"bottom"===t.side&&(l=t._depth,t.title.text!==a._dfltTitle[d]&&(i=1.5*t.title.font.size+10+n._offsetShift,i+=(t.title.text.match(r.BR_TAG_ALL)||[]).length*t.title.font.size*c)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+l+Math.max(a.margin.b,i),pad:o.extraPad+2*n._offsetShift}}},49692:function(e,t,n){"use strict";var o=n(3400),i=n(11200),a=n(10936),s=n(97944);e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:o.extendFlat({},i,{yaxis:a})}}},layoutAttributes:n(11200),handleDefaults:n(94040),calcAutorange:n(26652),draw:n(20060),isVisible:s.isVisible,makeData:s.makeData,autoMarginOpts:s.autoMarginOpts}},10936:function(e){"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(e,t,n){"use strict";var o=n(13916),i=n(52904).line,a=n(98192).u,s=n(92880).extendFlat,r=n(67824).overrideAll,c=n(31780).templatedArray;n(36208),e.exports=r(c("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:s({},o.xref,{}),yref:s({},o.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:i.color,width:s({},i.width,{min:1,dflt:1}),dash:s({},a,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(e){"use strict";e.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(e,t,n){"use strict";var o=n(3400),s=n(54460),a=n(51272),r=n(93956),i=n(65152);function c(e,t,n){function a(n,s){return o.coerce(e,t,r,n,s)}_=a("path"),u="path"!==a("type",_?"path":"rect"),u&&delete t.path,a("opacity"),a("line.color"),a("line.width"),a("line.dash");for(y=["x","y"],d=0;d<2;d++){var f,p,g,b=y[d],h={_fullLayout:n},v=s.coerceRef(e,t,h,b);if((f=s.getFromId(h,v))._selectionIndices.push(t._index),g=i.rangeToShapePosition(f),p=i.shapePositionToRange(f),u){var d,u,m,j,y,_,c=b+"0",l=b+"1",w=e[c],O=e[l];e[c]=p(e[c],!0),e[l]=p(e[l],!0),s.coercePosition(t,h,a,v,c),s.coercePosition(t,h,a,v,l),m=t[c],j=t[l],void 0!==m&&void 0!==j&&(t[c]=g(m),t[l]=g(j),e[c]=w,e[l]=O)}}u&&o.noneOrAll(e,t,["x0","x1","y0","y1"])}e.exports=function(e,t){a(e,t,{name:"selections",handleItemDefaults:c});for(var n,o=t.selections,s=0;s<o.length;s++)n=o[s],n&&void 0===n.path&&(void 0!==n.x0&&void 0!==n.x1&&void 0!==n.y0&&void 0!==n.y1||(t.selections[s]=null))}},23640:function(e,t,n){"use strict";var p=n(9856).readPaths,m=n(55496),c=n(1936).clearOutlineControllers,i=n(76308),l=n(43616),h=n(31780).arrayEditor,d=n(65152),u=d.getPathString;function s(e){var n,s,o,t=e._fullLayout;for(o in c(e),t._selectionLayer.selectAll("path").remove(),t._plots)s=t._plots[o].selectionLayer,s&&s.selectAll("path").remove();for(n=0;n<t.selections.length;n++)r(e,n)}function o(e){return e._context.editSelection}function r(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=d.makeSelectionsOptionsAndPlotinfo(e,t),n=r.options,c=r.plotinfo;n._input&&function(r){var d,g,b,j,w,C,E,k,y=u(e,n),S={"data-index":t,"fill-rule":"evenodd",d:y},x=n.opacity,O="rgba(0,0,0,0)",A=n.line.color||i.contrast(e._fullLayout.plot_bgcolor),v=n.line.width,_=n.line.dash;v||(v=5,_="solid"),j=o(e)&&e._fullLayout._activeSelectionIndex===t,j&&(O=e._fullLayout.activeselection.fillcolor,x=e._fullLayout.activeselection.opacity);for(b=[],d=1;d>=0;d--)g=r.append("path").attr(S).style("opacity",d?.1:x).call(i.stroke,A).call(i.fill,O).call(l.dashLine,d?"solid":_,d?4+v:v),f(g,e,n),j?(E=h(e.layout,"selections",n),g.style({cursor:"move"}),w={element:g.node(),plotinfo:c,gd:e,editHelpers:E,isActiveSelection:!0},C=p(y,e),m(C,g,w)):g.style("pointer-events",d?"all":"none"),b[d]=g;k=b[0],b[1].node().addEventListener("click",function(){return function(e,t){if(o(e)){var n=+t.node().getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeSelectionIndex)return void a(e);e._fullLayout._activeSelectionIndex=n,e._fullLayout._deactivateSelection=a,s(e)}}}(e,k)})}(e._fullLayout._selectionLayer)}function f(e,t,n){var s=n.xref+n.yref;l.setClipUrl(e,"clip"+t._fullLayout._uid+s,t)}function a(e){o(e)&&e._fullLayout._activeSelectionIndex>=0&&(c(e),delete e._fullLayout._activeSelectionIndex,s(e))}e.exports={draw:s,drawOne:r,activateLastSelection:function(e){if(o(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=a,s(e)}}}},34200:function(e,t,n){"use strict";var s=n(98192).u,o=n(92880).extendFlat;e.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:o({},s,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(e){"use strict";e.exports=function(e,t,n){n("newselection.mode"),n("newselection.line.width")&&(n("newselection.line.color"),n("newselection.line.dash")),n("activeselection.fillcolor"),n("activeselection.opacity")}},5968:function(e,t,n){"use strict";var o=n(72760).selectMode,i=n(1936).clearOutline,s=n(9856),a=s.readPaths,r=s.writePaths,c=s.fixDatesForPaths;e.exports=function(e,t){if(e.length&&(x=e[0][0],x)){var n,l,u,h,m,j,x,E=x.getAttribute("d"),s=t.gd,v=s._fullLayout.newselection,O=t.plotinfo,w=O.xaxis,y=O.yaxis,p=t.isActiveSelection,g=t.dragmode,C=(s.layout||{}).selections||[];if(!o(g)&&void 0!==p&&(j=s._fullLayout._activeSelectionIndex,j<C.length))switch(s._fullLayout.selections[j].type){case"rect":g="select";break;case"path":g="lasso"}m=a(E,s,O,p),n={xref:w._id,yref:y._id,opacity:v.opacity,line:{color:v.line.color,width:v.line.width,dash:v.line.dash}},1===m.length&&(l=m[0]),l&&5===l.length&&"select"===g?(n.type="rect",n.x0=l[0][1],n.y0=l[0][2],n.x1=l[2][1],n.y1=l[2][2]):(n.type="path",w&&y&&c(m,w,y),n.path=r(m),l=null),i(s);for(var _=t.editHelpers,f=(_||{}).modifyItem,b=[],d=0;d<C.length;d++)if(h=s._fullLayout.selections[d],h){if(b[d]=h._input,void 0!==p&&d===s._fullLayout._activeSelectionIndex)switch(u=n,h.type){case"rect":f("x0",u.x0),f("x1",u.x1),f("y0",u.y0),f("y1",u.y1);break;case"path":f("path",u.path)}}else b[d]=h;return void 0===p?(b.push(n),b):_?_.getUpdateObj():{}}}},5840:function(e,t,n){"use strict";var o=n(3400).strTranslate;function s(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}e.exports={p2r:s,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return s(e,n[t])}},getTransform:function(e){return o(e.xaxis._offset,e.yaxis._offset)}}},22676:function(e,t,n){"use strict";var o=n(23640),s=n(43156);e.exports={moduleType:"component",name:"selections",layoutAttributes:n(93956),supplyLayoutDefaults:n(74224),supplyDrawNewSelectionDefaults:n(81004),includeBasePlot:n(36632)("selections"),draw:o.draw,drawOne:o.drawOne,reselect:s.reselect,prepSelect:s.prepSelect,clearOutline:s.clearOutline,clearSelectionsCache:s.clearSelectionsCache,selectOnClick:s.selectOnClick}},43156:function(e,t,n){"use strict";var W=n(14756),ue=n(61456),l=n(24040),de=n(43616).dashStyle,r=n(76308),le=n(93024),ce=n(10624).makeEventData,d=n(72760),ae=d.freeMode,re=d.rectMode,c=d.drawMode,w=d.openMode,y=d.selectMode,B=n(65152),H=n(85448),L=n(55496),Y=n(1936).clearOutline,S=n(9856),_=S.handleEllipse,oe=S.readPaths,se=n(93940).newShapes,ne=n(5968),te=n(23640).activateLastSelection,g=n(3400),he=g.sorterAsc,z=n(92065),m=n(91200),s=n(79811).getFromId,ee=n(73696),J=n(39172).redrawReglTraces,v=n(83280),o=v.MINSELECT,X=z.filter,b=z.tester,C=n(5840),P=C.p2r,Z=C.axValue,Q=C.getTransform;function A(e){return void 0!==e.subplot}function R(e,t,n,s,o,i,r){var c,l,d,m,p,g,b,_,x,C,k,A,S,y=t._hoverdata,O=t._fullLayout.clickmode.indexOf("event")>-1,v=[];if(function(e){return e&&Array.isArray(e)&&!0!==e[0].hoverOnBox}(y))if(K(e,t,i),d=function(e,t){var s,o,n=e[0],i=-1,a=[];for(s=0;s<t.length;s++)if(o=t[s],n.fullData._expandedIndex===o.cd[0].trace._expandedIndex){if(!0===n.hoverOnBox)break;void 0!==n.pointNumber?i=n.pointNumber:void 0!==n.binNumber&&(i=n.binNumber,a=n.pointNumbers);break}return{pointNumber:i,pointNumbers:a,searchInfo:o}}(y,c=f(t,n,s,o)),d.pointNumbers.length>0?function(e,t){var n,s,i,o=[];for(n=0;n<e.length;n++)(s=e[n]).cd[0].trace.selectedpoints&&s.cd[0].trace.selectedpoints.length>0&&o.push(s);if(1===o.length&&o[0]===t.searchInfo&&(i=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(n=0;n<t.pointNumbers.length;n++)if(i.selectedpoints.indexOf(t.pointNumbers[n])<0)return!1;return!0}return!1}(c,d):function(e){var t,n,s=0;for(t=0;t<e.length;t++)if((n=e[t].cd[0].trace).selectedpoints){if(n.selectedpoints.length>1)return!1;if((s+=n.selectedpoints.length)>1)return!1}return 1===s}(c)&&(b=I(d))){for(r&&r.remove(),l=0;l<c.length;l++)(_=c[l])._module.selectPoints(_,!1);a(t,c),u(i),O&&j(t)}else{for(C=e.shiftKey&&(void 0!==b?b:I(d)),m=function(e,t,n){return{pointNumber:e,searchInfo:t,subtract:!!n}}(d.pointNumber,d.searchInfo,C),k=E(i.selectionDefs.concat([m])),l=0;l<c.length;l++)if(g=F(c[l]._module.selectPoints(c[l],k),c[l]),v.length)for(p=0;p<g.length;p++)v.push(g[p]);else v=g;(a(t,c,x={points:v}),m&&i&&i.selectionDefs.push(m),r)&&(A=i.mergedPolygons,S=w(i.dragmode),L(M(A,S),r,i)),O&&h(t,x)}}function k(e){return"pointNumber"in e&&"searchInfo"in e}function G(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,n,s,o){var i=e.searchInfo.cd[0].trace._expandedIndex;return o.cd[0].trace._expandedIndex===i&&s===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function E(e){if(e.length){for(var t,s=[],o=k(e[0])?0:e[0][0][0],a=o,i=k(e[0])?0:e[0][0][1],r=i,n=0;n<e.length;n++)k(e[n])?s.push(G(e[n])):(t=b(e[n]),t.subtract=!!e[n].subtract,s.push(t),o=Math.min(o,t.xmin),a=Math.max(a,t.xmax),i=Math.min(i,t.ymin),r=Math.max(r,t.ymax));return{xmin:o,xmax:a,ymin:i,ymax:r,pts:[],contains:function(e,t,n,o){for(var a=!1,i=0;i<s.length;i++)s[i].contains(e,t,n,o)&&(a=!s[i].subtract);return a},isRect:!1,degenerate:!1}}}function K(e,t,n){var o=t._fullLayout,s=n.plotinfo,i=n.dragmode,a=o._lastSelectedSubplot&&o._lastSelectedSubplot===s.id,r=(e.shiftKey||e.altKey)&&!(c(i)&&w(i));a&&r&&s.selection&&s.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=s.selection.selectionDefs,n.mergedPolygons=s.selection.mergedPolygons):r&&s.selection||u(n),a||(Y(t),o._lastSelectedSubplot=s.id)}function u(e,t){var o,i,a,u=e.dragmode,s=e.plotinfo,n=e.gd;(function(e){return e._fullLayout._activeShapeIndex>=0})(n)&&n._fullLayout._deactivateShape(n),function(e){return e._fullLayout._activeSelectionIndex>=0}(n)&&n._fullLayout._deactivateSelection(n);var h=n._fullLayout._zoomlayer,r=c(u),d=y(u);(r||d)&&(o=h.selectAll(".select-outline-"+s.id),o&&n._fullLayout._outlining&&(r&&(i=se(o,e)),i&&l.call("_guiRelayout",n,{shapes:i}),d&&!A(e)&&(a=ne(o,e)),a&&(n._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",n,{selections:a}).then(function(){t&&te(n)})),n._fullLayout._outlining=!1)),s.selection={},s.selection.selectionDefs=e.selectionDefs=[],s.selection.mergedPolygons=e.mergedPolygons=[]}function V(e){return e._id}function f(e,t,n,o){if(!e.calcdata)return[];var i,a,c,l,h,r=[],d=t.map(V),u=n.map(V);for(c=0;c<e.calcdata.length;c++)if(!0===(i=(a=e.calcdata[c])[0].trace).visible&&i._module&&i._module.selectPoints)if(!A({subplot:o})||i.subplot!==o&&i.geo!==o)if("splom"===i.type)i._xaxes[d[0]]&&i._yaxes[u[0]]&&(l=p(i._module,a,t[0],n[0]),l.scene=e._fullLayout._splomScenes[i.uid],r.push(l));else if("sankey"===i.type)h=p(i._module,a,t[0],n[0]),r.push(h);else{if(!(-1!==d.indexOf(i.xaxis)||i._xA&&i._xA.overlaying))continue;if(!(-1!==u.indexOf(i.yaxis)||i._yA&&i._yA.overlaying))continue;r.push(p(i._module,a,s(e,i.xaxis),s(e,i.yaxis)))}else r.push(p(i._module,a,t[0],n[0]));return r}function p(e,t,n,s){return{_module:e,cd:t,xaxis:n,yaxis:s}}function I(e){var t=e.searchInfo.cd[0].trace,s=e.pointNumber,n=e.pointNumbers,o=n.length>0?n[0]:s;return!!t.selectedpoints&&t.selectedpoints.indexOf(o)>-1}function a(e,t,n){for(o=0;o<t.length;o++)r=t[o].cd[0].trace._fullInput,c=e._fullLayout._tracePreGUI[r.uid]||{},void 0===c.selectedpoints&&(c.selectedpoints=r._input.selectedpoints||null);if(n){d=n.points||[];for(o=0;o<t.length;o++)(s=t[o].cd[0].trace)._input.selectedpoints=s._fullInput.selectedpoints=[],s._fullInput!==s&&(s.selectedpoints=[]);for(i=0;i<d.length;i++){var s,o,i,r,c,d,a=d[i],h=a.data,m=a.fullData,f=a.pointIndex,u=a.pointIndices;u?([].push.apply(h.selectedpoints,u),s._fullInput!==s&&[].push.apply(m.selectedpoints,u)):(h.selectedpoints.push(f),s._fullInput!==s&&m.selectedpoints.push(f))}}else for(o=0;o<t.length;o++)delete(s=t[o].cd[0].trace).selectedpoints,delete s._input.selectedpoints,s._fullInput!==s&&delete s._fullInput.selectedpoints;!function(e,t){for(var n,s,i,a,r=!1,o=0;o<t.length;o++)i=t[o],n=i.cd,l.traceIs(n[0].trace,"regl")&&(r=!0),a=i._module,s=a.styleOnSelect||a.style,s&&(s(e,n,n[0].node3),n[0].nodeRangePlot3&&s(e,n,n[0].nodeRangePlot3));r&&(ee(e),J(e))}(e,t)}function T(e,t,n){for(var i,s=(n?W.difference:W.union)({regions:e},{regions:[t]}).regions.reverse(),o=0;o<s.length;o++)i=s[o],i.subtract=x(i,s.slice(0,o));return s}function F(e,t){if(Array.isArray(e))for(var s=t.cd,o=t.cd[0].trace,n=0;n<e.length;n++)e[n]=ce(e[n],o,s);return e}function M(e,t){for(var s,i,o=[],n=0;n<e.length;n++){o[n]=[];for(s=0;s<e[n].length;s++){o[n][s]=[],o[n][s][0]=s?"L":"M";for(i=0;i<e[n][s].length;i++)o[n][s].push(e[n][s][i])}t||o[n].push(["Z",o[n][0][1],o[n][0][2]])}return o}function D(e,t){for(var n,s,a,o=[],r=[],i=0;i<t.length;i++)n=t[i],s=n._module.selectPoints(n,e),r.push(s),a=F(s,n),o=o.concat(a);return o}function O(e,t,n,o,r){ae=!!o,r&&(v=r.plotinfo,d=r.xaxes[0]._id,u=r.yaxes[0]._id);var V=[],C=[],Z=N(e),l=e._fullLayout;if(v){var le=l._zoomlayer,ee=l.dragmode,pe=c(ee),de=y(ee);if((pe||de)&&(I=s(e,d,"x"),R=s(e,u,"y"),I&&R&&(S=le.selectAll(".select-outline-"+v.id),S&&e._fullLayout._outlining&&S.length))){for(var he=S[0][0].getAttribute("d"),se=oe(he,e,v),F=[],G=0;G<se.length;G++){for(var z=se[G],_=[],A=0;A<z.length;A++)_.push([i(I,z[A][1]),i(R,z[A][2])]);_.xref=d,_.yref=u,_.subtract=x(_,F),F.push(_)}Z=Z.concat(F)}}P=d&&u?[d+u]:l._subplots.cartesian,!function(e){if(t=e.calcdata,t)for(n=0;n<t.length;n++){var t,n,s,i=t[n][0].trace,o=e._fullLayout._splomScenes;o&&(s=o[i.uid],s&&(s.selectBatch=[]))}}(e);for(H={},M=0;M<P.length;M++){var d,u,m,p,v,b,O,E,S,M,T,L,R,P,H,I,B,W,X,Q,J,ae,k=P[M],re=k.indexOf("y"),te=k.slice(0,re),ce=k.slice(re),Y=d&&u?n:void 0,ne;if(Y=ie(Z,te,ce,Y)){if(b=o,!ae){X=s(e,te,"x"),Q=s(e,ce,"y"),b=f(e,[X],[Q],k);for(E=0;E<b.length;E++){var K=b[E],g=K.cd[0],w=g.trace;if("scattergl"===K._module.name&&!g.t.xpx){var fe=w.x,me=w.y,ue=w._length;g.t.xpx=[],g.t.ypx=[];for(p=0;p<ue;p++)g.t.xpx[p]=X.c2p(fe[p]),g.t.ypx[p]=Q.c2p(me[p])}"splom"===K._module.name&&(H[w.uid]||(H[w.uid]=!0))}}J=D(Y,b),V=V.concat(J),C=C.concat(b)}}return m={points:V},a(e,C,m),B=l.clickmode.indexOf("event")>-1&&t,!v&&t&&(O=N(e,!0),O.length&&(L=O[0].xref,T=O[0].yref,L&&T&&(ne=q(O),U([s(e,L,"x"),s(e,T,"y")])(m,ne))),e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:B&&h(e,m),l._reselect=!1),!v&&l._deselect&&(W=l._deselect,function(e,t,n){for(var s,o=0;o<n.length;o++)if(s=n[o],s.xaxis&&s.xaxis._id===e&&s.yaxis&&s.yaxis._id===t)return!0;return!1}(d=W.xref,u=W.yref,C)||$(e,d,u,o),B&&(m.points.length?h(e,m):j(e)),l._deselect=!1),{eventData:m,selectionTesters:n}}function $(e,t,n,o){o=f(e,[s(e,t,"x")],[s(e,n,"y")],t+n);for(var r,i=0;i<o.length;i++)r=o[i],r._module.selectPoints(r,!1);a(e,o)}function ie(e,t,n,s){for(var o,i,a=0;a<e.length;a++)o=e[a],t===o.xref&&n===o.yref&&(i?s=E(i=T(i,o,!!o.subtract)):(i=[o],s=b(o)));return s}function N(e,t){for(var o,d,u,f,v,y,A,E=[],M=e._fullLayout,S=M.selections,T=S.length,h=0;h<T;h++)if((!t||h===M._activeSelectionIndex)&&(o=S[h],o)){var n,a,r,c,l,_=o.xref,w=o.yref,j=s(e,_,"x"),C=s(e,w,"y");if("rect"===o.type){n=[];var m=i(j,o.x0),b=i(j,o.x1),p=i(C,o.y0),g=i(C,o.y1);n=[[m,p],[m,g],[b,g],[b,p]],l=Math.min(m,b),a=Math.max(m,b),c=Math.min(p,g),r=Math.max(p,g),n.xmin=l,n.xmax=a,n.ymin=c,n.ymax=r,n.xref=_,n.yref=w,n.subtract=!1,n.isRect=!0,E.push(n)}else if("path"===o.type)for(var k=o.path.split("Z"),F=[],O=0;O<k.length;O++)if(u=k[O],u){u+="Z",y=B.extractPathCoords(u,H.paramIsX,"raw"),A=B.extractPathCoords(u,H.paramIsY,"raw"),l=1/0,a=-1/0,c=1/0,r=-1/0,n=[];for(d=0;d<y.length;d++)f=i(j,y[d]),v=i(C,A[d]),n.push([f,v]),l=Math.min(f,l),a=Math.max(f,a),c=Math.min(v,c),r=Math.max(v,r);n.xmin=l,n.xmax=a,n.ymin=c,n.ymax=r,n.xref=_,n.yref=w,n.subtract=x(n,F),F.push(n),E.push(n)}}return E}function x(e,t){for(var n,i,s=!1,o=0;o<t.length;o++)for(i=t[o],n=0;n<e.length;n++)if(ue(e[n],i)){s=!s;break}return s}function i(e,t){return"date"===e.type&&(t=t.replace("_"," ")),"log"===e.type?e.c2p(t):e.r2p(t,null,e.calendar)}function q(e){for(var t,o,i=e.length,n=[],s=0;s<i;s++)o=e[s],n=(n=n.concat(o)).concat([o[0]]);return(t=n).isRect=5===t.length&&t[0][0]===t[4][0]&&t[0][1]===t[4][1]&&t[0][0]===t[1][0]&&t[2][0]===t[3][0]&&t[0][1]===t[3][1]&&t[1][1]===t[2][1]||t[0][1]===t[1][1]&&t[2][1]===t[3][1]&&t[0][0]===t[3][0]&&t[1][0]===t[2][0],t.isRect&&(t.xmin=Math.min(t[0][0],t[2][0]),t.xmax=Math.max(t[0][0],t[2][0]),t.ymin=Math.min(t[0][1],t[2][1]),t.ymax=Math.max(t[0][1],t[2][1])),t}function U(e){return function(t,n){for(i=0;i<e.length;i++){var s,o,i,c,l,a=e[i],r=a._id,d=r.charAt(0);n.isRect?(s||(s={}),c=n[d+"min"],l=n[d+"max"],void 0!==c&&void 0!==l&&(s[r]=[P(a,c),P(a,l)].sort(he))):(o||(o={}),o[r]=n.map(Z(a)))}s&&(t.range=s),o&&(t.lassoPoints=o)}}function h(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function j(e){e.emit("plotly_deselect",null)}e.exports={reselect:O,prepSelect:function(e,t,n,s,i){var P,V,fe=!A(s),xe=ae(i),Ee=re(i),me=w(i),N=c(i),ne=y(i),H="drawcircle"===i,I="drawline"===i||H,p=s.gd,F=p._fullLayout,ce=ne&&"immediate"===F.newselection.mode&&fe,oe=F._zoomlayer,pe=s.element.getBoundingClientRect(),se=s.plotinfo,be=Q(se),C=t-pe.left,x=n-pe.top,te,we,Oe,he,je;F._calcInverseTransform(p);var d,B,W,Z,J,Ce=g.apply3DTransform(F._invTransform)(C,x),C=Ce[0],x=Ce[1],ie,ve,Ae=F._invScaleX,Se=F._invScaleY,S=C,k=x,ke="M"+C+","+x,ye=s.xaxes[0],ge=s.yaxes[0],ee=ye._length,Y=ge._length,ue=e.altKey&&!(c(i)&&me);K(e,p,s),xe&&(Z=X([[C,x]],v.BENDPX)),te=oe.selectAll("path.select-outline-"+se.id).data([1]),P=N?F.newshape:F.newselection,N&&(s.hasText=P.label.text||P.label.texttemplate),we=N&&!me?P.fillcolor:"rgba(0,0,0,0)",Oe=P.line.color||(fe?r.contrast(p._fullLayout.plot_bgcolor):"#7f7f7f"),te.enter().append("path").attr("class","select-outline select-outline-"+se.id).style({opacity:N?P.opacity/2:1,"stroke-dasharray":de(P.line.dash,P.line.width),"stroke-width":P.line.width+"px","shape-rendering":"crispEdges"}).call(r.stroke,Oe).call(r.fill,we).attr("fill-rule","evenodd").classed("cursor-move",!!N).attr("transform",be).attr("d",ke+"Z"),V=oe.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1}).attr("transform",be).attr("d","M0,0Z"),N&&s.hasText&&(he=oe.select(".label-temp"),he.empty()&&(he=oe.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8})));var G=F._uid+v.SELECTID,_e=[],z=f(p,s.xaxes,s.yaxes,s.subplot);ce&&!e.shiftKey&&(s._clearSubplotSelections=function(){if(fe){t=ye._id,n=ge._id,$(p,t,n,z);for(var t,n,s,o=(p.layout||{}).selections||[],i=[],a=!1,e=0;e<o.length;e++)s=F.selections[e],s.xref!==t||s.yref!==n?i.push(o[e]):a=!0;a&&(p._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",p,{selections:i}))}}),je=function(e){return e.plotinfo.fillRangeItems||U(e.xaxes.concat(e.yaxes))}(s),s.moveFn=function(e,t){s._clearSubplotSelections&&(s._clearSubplotSelections(),s._clearSubplotSelections=void 0),S=Math.max(0,Math.min(ee,Ae*e+C)),k=Math.max(0,Math.min(Y,Se*t+x));var n,i,a,r,l,h,f,c=Math.abs(S-C),u=Math.abs(k-x);if(Ee){if(ne)switch(l=F.selectdirection,a="any"===l?u<Math.min(.6*c,o)?"h":c<Math.min(.6*u,o)?"v":"d":l){case"h":n=H?Y/2:0,i=Y;break;case"v":n=H?ee/2:0,i=ee}if(N)switch(F.newshape.drawdirection){case"vertical":a="h",n=H?Y/2:0,i=Y;break;case"horizontal":a="v",n=H?ee/2:0,i=ee;break;case"ortho":c<u?(a="h",n=x,i=k):(a="v",n=C,i=S);break;default:a="d"}"h"===a?((d=I?_(H,[S,n],[S,i]):[[C,n],[C,i],[S,i],[S,n]]).xmin=I?S:Math.min(C,S),d.xmax=I?S:Math.max(C,S),d.ymin=Math.min(n,i),d.ymax=Math.max(n,i),V.attr("d","M"+d.xmin+","+(x-o)+"h-4v"+2*o+"h4ZM"+(d.xmax-1)+","+(x-o)+"h4v"+2*o+"h-4Z")):"v"===a?((d=I?_(H,[n,k],[i,k]):[[n,x],[n,k],[i,k],[i,x]]).xmin=Math.min(n,i),d.xmax=Math.max(n,i),d.ymin=I?k:Math.min(x,k),d.ymax=I?k:Math.max(x,k),V.attr("d","M"+(C-o)+","+d.ymin+"v-4h"+2*o+"v4ZM"+(C-o)+","+(d.ymax-1)+"v4h"+2*o+"v-4Z")):"d"===a&&((d=I?_(H,[C,x],[S,k]):[[C,x],[C,k],[S,k],[S,x]]).xmin=Math.min(C,S),d.xmax=Math.max(C,S),d.ymin=Math.min(x,k),d.ymax=Math.max(x,k),V.attr("d","M0,0Z"))}else xe&&(Z.addPt([S,k]),d=Z.filtered);s.selectionDefs&&s.selectionDefs.length?(J=T(s.mergedPolygons,d,ue),d.subtract=ue,W=E(s.selectionDefs.concat([d]))):(J=[d],W=b(d)),L(M(J,me),te,s),ne&&(r=O(p,!1),h=r.eventData?r.eventData.points.slice():[],r=O(p,!1,W,z,s),W=r.selectionTesters,B=r.eventData,f=Z?Z.filtered:q(J),m.throttle(G,v.SELECTDELAY,function(){for(e=(_e=D(W,z)).slice(),t=0;t<h.length;t++){for(var e,t,s=h[t],o=!1,n=0;n<e.length;n++)if(e[n].curveNumber===s.curveNumber&&e[n].pointNumber===s.pointNumber){o=!0;break}o||e.push(s)}e.length&&(B||(B={}),B.points=e),je(B,f),function(e,t){e.emit("plotly_selecting",t)}(p,B)}))},s.clickFn=function(e,t){if(V.remove(),p._fullLayout._activeShapeIndex>=0)p._fullLayout._deactivateShape(p);else if(!N){var n=F.clickmode;m.done(G).then(function(){if(m.clear(G),2===e){{for(te.remove(),ie=0;ie<z.length;ie++)(ve=z[ie])._module.selectPoints(ve,!1);if(a(p,z),u(s),j(p),z.length&&(i=z[0].xaxis,r=z[0].yaxis,i&&r)){for(var o,i,r,c=[],d=p._fullLayout.selections,f=0;f<d.length;f++)o=d[f],o&&(o.xref===i._id&&o.yref===r._id||c.push(o));c.length<d.length&&(p._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",p,{selections:c}))}}}else n.indexOf("select")>-1&&R(t,p,s.xaxes,s.yaxes,s.subplot,s,te),"event"===n&&h(p,void 0);le.click(p,t,se.id)}).catch(g.error)}},s.doneFn=function(){V.remove(),m.done(G).then(function(){m.clear(G),!ce&&d&&s.selectionDefs&&(d.subtract=ue,s.selectionDefs.push(d),s.mergedPolygons.length=0,[].push.apply(s.mergedPolygons,J)),(ce||N)&&u(s,ce),s.doneFnCompleted&&s.doneFnCompleted(_e),ne&&h(p,B)}).catch(g.error)}},clearOutline:Y,clearSelectionsCache:u,selectOnClick:R}},46056:function(e,t,n){"use strict";var r=n(13916),i=n(25376),a=n(52904).line,c=n(98192).u,s=n(92880).extendFlat,l=n(31780).templatedArray,o=(n(36208),n(45464)),d=n(21776).ye,u=n(97728);e.exports=l("shape",{visible:s({},o.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:s({},o.legend,{editType:"calc+arraydraw"}),legendgroup:s({},o.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:s({},o.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:i({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:s({},o.legendrank,{editType:"calc+arraydraw"}),legendwidth:s({},o.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:s({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:s({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:s({},a.color,{editType:"arraydraw"}),width:s({},a.width,{editType:"calc+arraydraw"}),dash:s({},c,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:d({},{keys:Object.keys(u)}),font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(e,t,n){"use strict";var i=n(3400),s=n(54460),o=n(85448),a=n(65152);function l(e){return r(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function d(e){return r(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function r(e,t,n,s,r,c){if(l=e/2,d=c,"pixel"===t){var l,d,u=r?a.extractPathCoords(r,c?o.paramIsY:o.paramIsX):[n,s],h=i.aggNums(Math.max,null,u),m=i.aggNums(Math.min,null,u),f=m<0?Math.abs(m)+l:l,p=h>0?h+l:l;return{ppad:l,ppadplus:d?f:p,ppadminus:d?p:f}}return{ppad:l}}function c(e,t,n,s,i){if(r="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c,void 0!==t)return[r(t),r(n)];if(s){var r,c,l,h,m,d=1/0,u=-1/0,f=s.match(o.segmentRE);for("date"===e.type&&(r=a.decodeDate(r)),c=0;c<f.length;c++)void 0!==(h=i[f[c].charAt(0)].drawn)&&(!(m=f[c].substr(1).match(o.paramRE))||m.length<h||((l=r(m[h]))<d&&(d=l),l>u&&(u=l)));return u>=d?[d,u]:void 0}}e.exports=function(e){var t,n,a,r,h,m,f,p,g,v,b=e._fullLayout,u=i.filterVisible(b.shapes);if(u.length&&e._fullData.length)for(a=0;a<u.length;a++)t=u[a],t._extremes={},h=s.getRefType(t.xref),m=s.getRefType(t.yref),"paper"!==t.xref&&"domain"!==h&&(f="pixel"===t.xsizemode?t.xanchor:t.x0,p="pixel"===t.xsizemode?t.xanchor:t.x1,(r=c(n=s.getFromId(e,t.xref),f,p,t.path,o.paramIsX))&&(t._extremes[n._id]=s.findExtremes(n,r,l(t)))),"paper"!==t.yref&&"domain"!==m&&(g="pixel"===t.ysizemode?t.yanchor:t.y0,v="pixel"===t.ysizemode?t.yanchor:t.y1,(r=c(n=s.getFromId(e,t.yref),g,v,t.path,o.paramIsY))&&(t._extremes[n._id]=s.findExtremes(n,r,d(t))))}},85448:function(e){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(e,t,n){"use strict";var o=n(3400),s=n(54460),a=n(51272),r=n(46056),i=n(65152);function c(e,t,n){function a(n,s){return o.coerce(e,t,r,n,s)}if(t._isShape=!0,a("visible")){a("showlegend")&&(a("legend"),a("legendwidth"),a("legendgroup"),a("legendgrouptitle.text"),o.coerceFont(a,"legendgrouptitle.font"),a("legendrank"));var A=a("path"),O=a("type",A?"path":"rect"),g="path"!==O;g&&delete t.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule"),a("line.width")&&(a("line.color"),a("line.dash"));for(var F=a("xsizemode"),M=a("ysizemode"),S=["x","y"],j=0;j<2;j++){var u,p,v,b,y,w,x,C,f=S[j],d=f+"anchor",_="x"===f?F:M,h={_fullLayout:n},m=s.coerceRef(e,t,h,f,void 0,"paper");if("range"===s.getRefType(m)?((b=s.getFromId(h,m))._shapeIndices.push(t._index),u=i.rangeToShapePosition(b),p=i.shapePositionToRange(b)):p=u=o.identity,g){var l=f+"0",c=f+"1",k=e[l],E=e[c];e[l]=p(e[l],!0),e[c]=p(e[c],!0),"pixel"===_?(a(l,0),a(c,10)):(s.coercePosition(t,h,a,m,l,.25),s.coercePosition(t,h,a,m,c,.75)),t[l]=u(t[l]),t[c]=u(t[c]),e[l]=k,e[c]=E}"pixel"===_&&(x=e[d],e[d]=p(e[d],!0),s.coercePosition(t,h,a,m,d,.25),t[d]=u(t[d]),e[d]=x)}g&&o.noneOrAll(e,t,["x0","x1","y0","y1"]),y="line"===O,(g&&(v=a("label.texttemplate")),v||(w=a("label.text")),w||v)&&(a("label.textangle"),C=a("label.textposition",y?"middle":"middle center"),a("label.xanchor"),a("label.yanchor",function(e,t){return e?"bottom":-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle"}(y,C)),a("label.padding"),o.coerceFont(a,"label.font",n.font))}}e.exports=function(e,t){a(e,t,{name:"shapes",handleItemDefaults:c})}},60728:function(e,t,n){"use strict";var c=n(3400),s=n(54460),i=n(72736),a=n(43616),l=n(9856).readPaths,o=n(65152),d=o.getPathString,r=n(97728),u=n(84284).FROM_TL;e.exports=function(e,t,n,h){if(h.selectAll(".shape-label").remove(),n.label.text||n.label.texttemplate){if(n.label.texttemplate){if(A={},"path"!==n.type){z=s.getFromId(e,n.xref),D=s.getFromId(e,n.yref);for(N in r)O=r[N](n,z,D),void 0!==O&&(A[N]=O)}F=c.texttemplateStringForShapes(n.label.texttemplate,{},e._fullLayout._d3locale,A)}else F=n.label.text;var m,f,p,g,I={"data-index":t},$=n.label.font,C=h.append("g").attr(I).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(F);if(n.path){R=d(e,n),y=l(R,e),m=1/0,p=1/0,g=-1/0,f=-1/0;for(v=0;v<y.length;v++)for(_=0;_<y[v].length;_++)for(w=y[v][_],j=1;j<w.length;j+=2)E=w[j],M=w[j+1],m=Math.min(m,E),g=Math.max(g,E),p=Math.min(p,M),f=Math.max(f,M)}else{var v,b,j,y,_,w,O,E,A,M,F,z,D,N,R,V=s.getFromId(e,n.xref),B=s.getRefType(n.xref),H=s.getFromId(e,n.yref),P=s.getRefType(n.yref),T=o.getDataToPixel(e,V,!1,B),L=o.getDataToPixel(e,H,!0,P);m=T(n.x0),g=T(n.x1),p=L(n.y0),f=L(n.y1)}b=n.label.textangle,"auto"===b&&(b="line"===n.type?function(e,t,n,s){var o,i;return i=Math.abs(n-e),o=n>=e?t-s:s-t,-180/Math.PI*Math.atan2(o,i)}(m,p,g,f):0),C.call(function(t){return t.call(a.font,$).attr({}),i.convertToTspans(t,e),t});var k=function(e,t,n,s,o,i,a){var c,l,h,f,v,b,d=o.label.textposition,g=o.label.textangle,m=o.label.padding,C=o.type,_=Math.PI/180*i,j=Math.sin(_),y=Math.cos(_),r=o.label.xanchor,p=o.label.yanchor;"line"===C?("start"===d?(l=e,c=t):"end"===d?(l=n,c=s):(l=(e+n)/2,c=(t+s)/2),"auto"===r&&(r="start"===d?"auto"===g?n>e?"left":n<e?"right":"center":n>e?"right":n<e?"left":"center":"end"===d?"auto"===g?n>e?"right":n<e?"left":"center":n>e?"left":n<e?"right":"center":"center"),b={bottom:-1,middle:0,top:1},"auto"===g?(v=b[p],h=-m*j*v,f=m*y*v):(h=m*{left:1,center:0,right:-1}[r],f=m*b[p]),l+=h,c+=f):(h=m+3,-1!==d.indexOf("right")?(l=Math.max(e,n)-h,"auto"===r&&(r="right")):-1!==d.indexOf("left")?(l=Math.min(e,n)+h,"auto"===r&&(r="left")):(l=(e+n)/2,"auto"===r&&(r="center")),c=-1!==d.indexOf("top")?Math.min(t,s):-1!==d.indexOf("bottom")?Math.max(t,s):(t+s)/2,f=m,"bottom"===p?c-=f:"top"===p&&(c+=f));var O=u[p],w=o.label.font.size,x=a.height;return{textx:l+(x*O-w)*j,texty:c+-(x*O-w)*y,xanchor:r}}(m,p,g,f,n,b,a.bBox(C.node())),x=k.textx,S=k.texty,W=k.xanchor;C.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[W],y:S,x,transform:"rotate("+b+","+x+","+S+")"}).call(i.positionText,x,S)}}},55496:function(e,t,n){"use strict";var x=n(3400).strTranslate,u=n(86476),h=n(72760),b=h.drawMode,c=h.selectMode,l=n(24040),d=n(76308),s=n(7e3),v=s.i000,g=s.i090,p=s.i180,f=s.i270,m=n(1936).clearOutlineControllers,a=n(9856),o=a.pointsOnRectangle,i=a.pointsOnEllipse,j=a.writePaths,y=n(93940).newShapes,_=n(93940).createShapeObj,w=n(5968),O=n(60728);function r(e,t){var n,s,o,a=e[t][1],r=e[t][2],i=e.length;return s=e[n=(t+1)%i][1],o=e[n][2],s===a&&o===r&&(s=e[n=(t+2)%i][1],o=e[n][2]),[n,s,o]}e.exports=function e(t,n,s,a){a||(a=0),E=s.gd;function F(){e(t,n,s,a++),(i(t[0])||s.hasText)&&S({redrawing:!0})}function S(e){var t={};void 0!==s.isActiveShape&&(s.isActiveShape=!1,t=y(n,s)),void 0!==s.isActiveSelection&&(s.isActiveSelection=!1,t=w(n,s),E._fullLayout._reselect=!0),Object.keys(t).length&&l.call((e||{}).redrawing?"relayout":"_guiRelayout",E,t)}var h,C,E,k,A,M,T,L,N=E._fullLayout._zoomlayer,z=s.dragmode,D=b(z),R=c(z);(D||R)&&(E._fullLayout._outlining=!0),m(E),n.attr("d",j(t)),a||!s.isActiveShape&&!s.isActiveSelection||(k=function(e,t){for(var n,o,i,s=0;s<t.length;s++){i=t[s],e[s]=[];for(n=0;n<i.length;n++){e[s][n]=[];for(o=0;o<i[n].length;o++)e[s][n][o]=i[n][o]}}return e}([],t),function(e){A=[];for(a=0;a<t.length;a++){var c=t[a],C=o(c),S=!C&&i(c);A[a]=[];for(O=c.length,n=0;n<O;n++)if("Z"!==c[n][0]&&(!S||n===v||n===g||n===p||n===f)){h=C&&s.isActiveSelection,h&&(b=r(c,n));var j=c[n][1],y=c[n][2],_=e.append(h?"rect":"circle").attr("data-i",a).attr("data-j",n).style({fill:d.background,stroke:d.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(h){var n,a,h,b,O,m=b[1]-j,l=b[2]-y,w=l?5:Math.max(Math.min(25,Math.abs(m)-5),5),k=m?5:Math.max(Math.min(25,Math.abs(l)-5),5);_.classed(l?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",w).attr("height",k).attr("x",j-w/2).attr("y",y-k/2).attr("transform",x(m/2,l/2))}else _.classed("cursor-grab",!0).attr("r",5).attr("cx",j).attr("cy",y);A[a][n]={element:_.node(),gd:E,prepFn:P,doneFn:I,clickFn:B},u.init(A[a][n])}}}(N.append("g").attr("class","outline-controllers")),function(){M=[],t.length&&(M[0]={element:n[0][0],gd:E,prepFn:$,doneFn:W,clickFn:U},u.init(M[0]))}()),D&&s.hasText&&(L=N.select(".label-temp"),T=_(n,s,s.dragmode),O(E,"label-temp",T,L));function P(e){C=+e.srcElement.getAttribute("data-i"),h=+e.srcElement.getAttribute("data-j"),A[C][h].moveFn=H}function H(e,n){if(t.length){var a,c,l,d,u,m,f=k[C][h][1],p=k[C][h][2],i=t[C],g=i.length;if(o(i)){{u=e,m=n,s.isActiveSelection&&(r(i,h)[1]===i[h][1]?m=0:u=0);for(c=0;c<g;c++)c!==h&&(l=i[c],l[1]===i[h][1]&&(l[1]=f+u),l[2]===i[h][2]&&(l[2]=p+m));if(i[h][1]=f+u,i[h][2]=p+m,!o(i))for(a=0;a<g;a++)for(d=0;d<i[a].length;d++)i[a][d]=k[C][a][d]}}else i[h][1]=f+e,i[h][2]=p+n;F()}}function I(){S()}function B(e,n){if(2===e){C=+n.srcElement.getAttribute("data-i"),h=+n.srcElement.getAttribute("data-j");var s=t[C];o(s)||i(s)||function(){if(t.length&&t[C]&&t[C].length){for(var e=[],n=0;n<t[C].length;n++)n!==h&&e.push(t[C][n]);e.length>1&&(2!==e.length||"Z"!==e[1][0])&&(0===h&&(e[0][0]="M"),t[C]=e,F(),S())}}()}}function V(e,n){!function(e,n){if(t.length)for(var o,i,s=0;s<t.length;s++)for(o=0;o<t[s].length;o++)for(i=0;i+2<t[s][o].length;i+=2)t[s][o][i+1]=k[s][o][i+1]+e,t[s][o][i+2]=k[s][o][i+2]+n}(e,n),F()}function $(e){(C=+e.srcElement.getAttribute("data-i"))||(C=0),M[C].moveFn=V}function W(){S()}function U(e){2===e&&function(e){if(c(e._fullLayout.dragmode)){m(e);var t,o,i,n=e._fullLayout._activeSelectionIndex,s=(e.layout||{}).selections||[];if(n<s.length){for(o=[],t=0;t<s.length;t++)t!==n&&o.push(s[t]);delete e._fullLayout._activeSelectionIndex,i=e._fullLayout.selections[n],e._fullLayout._deselect={xref:i.xref,yref:i.yref},l.call("_guiRelayout",e,{selections:o})}}}(E)}}},4016:function(e,t,n){"use strict";var C=n(33428),_=n(24040),y=n(3400),i=n(54460),x=n(9856).readPaths,O=n(55496),r=n(60728),v=n(1936).clearOutlineControllers,u=n(76308),h=n(43616),w=n(31780).arrayEditor,f=n(86476),p=n(93972),o=n(85448),s=n(65152),d=s.getPathString;function l(e){var n,s,o,t=e._fullLayout;for(o in t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove(),t._plots)s=t._plots[o].shapelayer,s&&(s.selectAll("path").remove(),s.selectAll("text").remove());for(n=0;n<t.shapes.length;n++)!0===t.shapes[n].visible&&g(e,n)}function a(e){return!!e._fullLayout._outlining}function c(e){return!e._context.edits.shapePosition}function g(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var E=s.makeShapesOptionsAndPlotinfo(e,t),n=E.options,g=E.plotinfo;function v(v){var E,k,A,z,D,L,R,S=d(e,n),H={"data-index":t,"fill-rule":n.fillrule,d:S},M=n.opacity,F=n.fillcolor,P=n.line.width?n.line.color:"rgba(0,0,0,0)",T=n.line.width,N=n.line.dash;T||!0!==n.editable||(T=5,N="solid"),D="Z"!==S[S.length-1],k=c(e)&&n.editable&&e._fullLayout._activeShapeIndex===t,k&&(F=D?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,M=e._fullLayout.activeshape.opacity),A=v.append("g").classed("shape-group",!0).attr({"data-index":t}),E=A.append("path").attr(H).style("opacity",M).call(u.stroke,P).call(u.fill,F).call(h.dashLine,N,T),b(A,e,n),r(e,t,n,A),(k||e._context.edits.shapePosition)&&(z=w(e.layout,"shapes",n)),k?(E.style({cursor:"move"}),L={element:E.node(),plotinfo:g,gd:e,editHelpers:z,hasText:n.label.text||n.label.texttemplate,isActiveShape:!0},R=x(S,e),O(R,E,L)):e._context.edits.shapePosition?function(e,t,n,c,l,u){var k,A,S,T,z,D,N,L,R,P,H,I,B,V,$,Y,te=10,K=10,v="pixel"===n.xsizemode,m="pixel"===n.ysizemode,q="line"===n.type,J="path"===n.type,g=u.modifyItem,Q=C.select(t.node().parentNode),F=i.getFromId(e,n.xref),X=i.getRefType(n.xref),M=i.getFromId(e,n.yref),G=i.getRefType(n.yref),x=s.getDataToPixel(e,F,!1,X),E=s.getDataToPixel(e,M,!0,G),O=s.getPixelToData(e,F,!1,X),w=s.getPixelToData(e,M,!0,G),Z=q?function(){var s,o,i=10,a=Math.max(n.line.width,i),e=l.append("g").attr("data-index",c).attr("drag-helper",!0);return e.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"}),s={"fill-opacity":"0"},o=Math.max(a/2,i),e.append("circle").attr({"data-line-point":"start-point",cx:v?x(n.xanchor)+n.x0:x(n.x0),cy:m?E(n.yanchor)-n.y0:E(n.y0),r:o}).style(s).classed("cursor-grab",!0),e.append("circle").attr({"data-line-point":"end-point",cx:v?x(n.xanchor)+n.x1:x(n.x1),cy:m?E(n.yanchor)-n.y1:E(n.y1),r:o}).style(s).classed("cursor-grab",!0),e}():t,W={element:Z.node(),gd:e,prepFn:function(s){a(e)||(v&&(R=x(n.xanchor)),m&&($=E(n.yanchor)),"path"===n.type?Y=n.path:(z=v?n.x0:x(n.x0),A=m?n.y0:E(n.y0),T=v?n.x1:x(n.x1),k=m?n.y1:E(n.y1)),z<T?(I=z,P="x0",V=T,B="x1"):(I=T,P="x1",V=z,B="x0"),!m&&A<k||m&&A>k?(N=A,L="y0",D=k,H="y1"):(N=k,L="y1",D=A,H="y0"),ee(s),U(l,n),function(e,t,n){var o=t.xref,a=t.yref,r=i.getFromId(n,o),c=i.getFromId(n,a),s="";"paper"===o||r.autorange||(s+=o),"paper"===a||c.autorange||(s+=a),h.setClipUrl(e,s?"clip"+n._fullLayout._uid+s:null,n)}(t,n,e),W.moveFn="move"===S?se:oe,W.altKey=s.altKey)},doneFn:function(){a(e)||(p(t),ne(l),b(t,e,n),_.call("_guiRelayout",e,u.getUpdateObj()))},clickFn:function(){a(e)||ne(l)}};function ee(n){if(a(e))S=null;else if(q)S="path"===n.target.tagName?"move":"start-point"===n.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var s=W.element.getBoundingClientRect(),o=s.right-s.left,i=s.bottom-s.top,c=n.clientX-s.left,l=n.clientY-s.top,r=!J&&o>te&&i>K&&!n.shiftKey?f.getCursor(c/o,1-l/i):"move";p(t,r),S=r.split("-")[0]}}function se(o,i){if("path"===n.type){var h=function(e){return e},a=h,u=h;v?g("xanchor",n.xanchor=O(R+o)):(a=function(e){return O(x(e)+o)},F&&"date"===F.type&&(a=s.encodeDate(a))),m?g("yanchor",n.yanchor=w($+i)):(u=function(e){return w(E(e)+i)},M&&"date"===M.type&&(u=s.encodeDate(u))),g("path",n.path=j(Y,a,u))}else v?g("xanchor",n.xanchor=O(R+o)):(g("x0",n.x0=O(z+o)),g("x1",n.x1=O(T+o))),m?g("yanchor",n.yanchor=w($+i)):(g("y0",n.y0=w(A+i)),g("y1",n.y1=w(k+i)));t.attr("d",d(e,n)),U(l,n),r(e,c,n,Q)}function oe(o,i){if(J){var ee=function(e){return e},h=ee,f=ee;v?g("xanchor",n.xanchor=O(R+o)):(h=function(e){return O(x(e)+o)},F&&"date"===F.type&&(h=s.encodeDate(h))),m?g("yanchor",n.yanchor=w($+i)):(f=function(e){return w(E(e)+i)},M&&"date"===M.type&&(f=s.encodeDate(f))),g("path",n.path=j(Y,h,f))}else if(q)"resize-over-start-point"===S?(W=z+o,b=m?A-i:A+i,g("x0",n.x0=v?W:O(W)),g("y0",n.y0=m?b:w(b))):"resize-over-end-point"===S&&(y=T+o,_=m?k-i:k+i,g("x1",n.x1=v?y:O(y)),g("y1",n.y1=m?_:w(_)));else{var b,y,_,W,p=function(e){return-1!==S.indexOf(e)},X=p("n"),Z=p("s"),se=p("w"),ne=p("e"),u=X?N+i:N,a=Z?D+i:D,G=se?I+o:I,C=ne?V+o:V;m&&(X&&(u=N-i),Z&&(a=D-i)),(!m&&a-u>K||m&&u-a>K)&&(g(L,n[L]=m?u:w(u)),g(H,n[H]=m?a:w(a))),C-G>te&&(g(P,n[P]=v?G:O(G)),g(B,n[B]=v?C:O(C)))}t.attr("d",d(e,n)),U(l,n),r(e,c,n,Q)}function U(e,t){(v||m)&&function(){var n,i,c,l,d,r="path"!==t.type,a=e.selectAll(".visual-cue").data([0]);a.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0),n=x(v?t.xanchor:y.midRange(r?[t.x0,t.x1]:s.extractPathCoords(t.path,o.paramIsX))),i=E(m?t.yanchor:y.midRange(r?[t.y0,t.y1]:s.extractPathCoords(t.path,o.paramIsY))),n=s.roundPositionForSharpStrokeRendering(n,1),i=s.roundPositionForSharpStrokeRendering(i,1),v&&m?(c="M"+(n-1-1)+","+(i-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",a.attr("d",c)):v?(l="M"+(n-1-1)+","+(i-9-1)+"v18 h2 v-18 Z",a.attr("d",l)):(d="M"+(n-9-1)+","+(i-1-1)+"h18 v2 h-18 Z",a.attr("d",d))}()}function ne(e){e.selectAll(".visual-cue").remove()}f.init(W),Z.node().onmousemove=ee}(e,E,n,t,v,z):!0===n.editable&&E.style("pointer-events",D||u.opacity(F)*M<=.5?"stroke":"all"),E.node().addEventListener("click",function(){return function(e,t){if(c(e)){var n=+t.node().getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeShapeIndex)return void m(e);e._fullLayout._activeShapeIndex=n,e._fullLayout._deactivateShape=m,l(e)}}}(e,E)})}n._input&&!0===n.visible&&("above"===n.layer?v(e._fullLayout._shapeUpperLayer):"paper"===n.xref||"paper"===n.yref?v(e._fullLayout._shapeLowerLayer):"between"===n.layer?v(g.shapelayerBetween):v(g._hadPlotinfo?(g.mainplotinfo||g).shapelayer:e._fullLayout._shapeLowerLayer))}function b(e,t,n){var s=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");h.setClipUrl(e,s?"clip"+t._fullLayout._uid+s:null,t)}function j(e,t,n){return e.replace(o.segmentRE,function(e){var s=0,i=e.charAt(0),a=o.paramIsX[i],r=o.paramIsY[i],c=o.numParams[i];return i+e.substr(1).replace(o.paramRE,function(e){return s>=c||(a[s]?e=t(e):r[s]&&(e=n(e)),s++),e})})}function m(e){c(e)&&e._fullLayout._activeShapeIndex>=0&&(v(e),delete e._fullLayout._activeShapeIndex,l(e))}e.exports={draw:l,drawOne:g,eraseActiveShape:function(e){if(c(e)){v(e);var t,s,o=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(o<n.length){for(s=[],t=0;t<n.length;t++)t!==o&&s.push(n[t]);return delete e._fullLayout._activeShapeIndex,_.call("_guiRelayout",e,{shapes:s})}}},drawLabel:r}},92872:function(e,t,n){"use strict";var a=n(67824).overrideAll,o=n(45464),i=n(25376),r=n(98192).u,s=n(92880).extendFlat,c=n(21776).ye,l=n(97728);e.exports=a({newshape:{visible:s({},o.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:s({},o.legend,{}),legendgroup:s({},o.legendgroup,{}),legendgrouptitle:{text:s({},o.legendgrouptitle.text,{}),font:i({})},legendrank:s({},o.legendrank,{}),legendwidth:s({},o.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:s({},r,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:s({},o.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:c({newshape:!0},{keys:Object.keys(l)}),font:i({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(e){"use strict";e.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(e,t,n){"use strict";var o=n(76308),s=n(3400);e.exports=function(e,t,n){n("newshape.visible"),n("newshape.name"),n("newshape.showlegend"),n("newshape.legend"),n("newshape.legendwidth"),n("newshape.legendgroup"),n("newshape.legendgrouptitle.text"),s.coerceFont(n,"newshape.legendgrouptitle.font"),n("newshape.legendrank"),n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(i=(e||{}).plot_bgcolor||"#FFF",n("newshape.line.color",o.contrast(i)),n("newshape.line.dash"));var i,r,a="drawline"===e.dragmode,c=n("newshape.label.text"),l=n("newshape.label.texttemplate");(c||l)&&(n("newshape.label.textangle"),r=n("newshape.label.textposition",a?"middle":"middle center"),n("newshape.label.xanchor"),n("newshape.label.yanchor",function(e,t){return e?"bottom":-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle"}(a,r)),n("newshape.label.padding"),s.coerceFont(n,"newshape.label.font",t.font)),n("activeshape.fillcolor"),n("activeshape.opacity")}},9856:function(e,t,n){"use strict";var u=n(21984),c=n(7e3),s=c.CIRCLE_SIDES,a=c.SQRT2,d=n(5840),l=d.p2r,r=d.r2p,h=[0,3,4,5,6,1,2],m=[0,3,4,1,2];function o(e,t){return Math.abs(e-t)<=1e-6}function i(e,t){var n=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(n*n+s*s)}t.writePaths=function(e){if(r=e.length,!r)return"M0,0Z";for(var t,s,o,a,r,c,l,i="",n=0;n<r;n++)for(l=e[n].length,s=0;s<l;s++)if(o=e[n][s][0],"Z"===o)i+="Z";else for(c=e[n][s].length,t=0;t<c;t++)a=t,"Q"===o||"S"===o?a=m[t]:"C"===o&&(a=h[t]),i+=e[n][s][a],t>0&&t<c-1&&(i+=",");return i},t.readPaths=function(e,t,n,o){var i,m,f,g,j,x,C,k,A,M,F,a=u(e),E=[],T=-1,d=0,c=0,S=function(){A=d,k=c};S();for(i=0;i<a.length;i++){var y,_,z,D,h=[],N=a[i][0],p=N;switch(N){case"M":E[++T]=[],d=+a[i][1],c=+a[i][2],h.push([p,d,c]),S();break;case"Q":case"S":y=+a[i][1],_=+a[i][2],d=+a[i][3],c=+a[i][4],h.push([p,d,c,y,_]);break;case"C":y=+a[i][1],_=+a[i][2],D=+a[i][3],z=+a[i][4],d=+a[i][5],c=+a[i][6],h.push([p,d,c,y,_,D,z]);break;case"T":case"L":d=+a[i][1],c=+a[i][2],h.push([p,d,c]);break;case"H":p="L",d=+a[i][1],h.push([p,d,c]);break;case"V":p="L",c=+a[i][1],h.push([p,d,c]);break;case"A":p="L",j=+a[i][1],x=+a[i][2],+a[i][4]||(j=-j,x=-x),F=d-j,M=c;for(g=1;g<=s/2;g++)C=2*Math.PI*g/s,h.push([p,F+j*Math.cos(C),M+x*Math.sin(C)]);break;case"Z":d===A&&c===k||(d=A,c=k,h.push([p,d,c]))}for(var w=(n||{}).domain,b=t._fullLayout._size,R=n&&"pixel"===n.xsizemode,L=n&&"pixel"===n.ysizemode,O=!1===o,v=0;v<h.length;v++){for(g=0;g+2<7;g+=2)f=h[v][g+1],m=h[v][g+2],void 0!==f&&void 0!==m&&(d=f,c=m,n&&(n.xaxis&&n.xaxis.p2r?(O&&(f-=n.xaxis._offset),f=R?r(n.xaxis,n.xanchor)+f:l(n.xaxis,f)):(O&&(f-=b.l),w?f=w.x[0]+f/b.w:f/=b.w),n.yaxis&&n.yaxis.p2r?(O&&(m-=n.yaxis._offset),m=L?r(n.yaxis,n.yanchor)-m:l(n.yaxis,m)):(O&&(m-=b.t),m=w?w.y[1]-m/b.h:1-m/b.h)),h[v][g+1]=f,h[v][g+2]=m);E[T].push(h[v].slice())}}return E},t.pointsOnRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!o(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!o(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!o(e[0][1],e[1][1])&&!o(e[0][1],e[3][1])||!(i(e[0],e[1])*i(e[0],e[3])))},t.pointsOnEllipse=function(e){if(t=e.length,t!==s+1)return!1;t=s;for(n=0;n<t;n++){var t,n,a=(2*t-n)%t,r=(t/2+a)%t,c=(t/2+n)%t;if(!o(i(e[n],e[c]),i(e[a],e[r])))return!1}return!0},t.handleEllipse=function(e,n,o){if(!e)return[n,o];var l,d,u,i=t.ellipseOver({x0:n[0],y0:n[1],x1:o[0],y1:o[1]}),m=(i.x1+i.x0)/2,h=(i.y1+i.y0)/2,r=(i.x1-i.x0)/2,c=(i.y1-i.y0)/2;r||(r=c/=a),c||(c=r/=a);for(u=[],l=0;l<s;l++)d=2*l*Math.PI/s,u.push([m+r*Math.cos(d),h+c*Math.sin(d)]);return u},t.ellipseOver=function(e){var s=e.x0,o=e.y0,i=e.x1,r=e.y1,t=i-s,n=r-o,c=((s-=t)+i)/2,l=((o-=n)+r)/2;return{x0:c-(t*=a),y0:l-(n*=a),x1:c+t,y1:l+n}},t.fixDatesForPaths=function(e,t,n){var s,o,i,a="date"===t.type,r="date"===n.type;if(!a&&!r)return e;for(s=0;s<e.length;s++)for(o=0;o<e[s].length;o++)for(i=0;i+2<e[s][o].length;i+=2)a&&(e[s][o][i+1]=e[s][o][i+1].replace(" ","_")),r&&(e[s][o][i+2]=e[s][o][i+2].replace(" ","_"));return e}},93940:function(e,t,n){"use strict";var h=n(72760),v=h.drawMode,g=h.openMode,o=n(7e3),c=o.i000,l=o.i090,d=o.i180,u=o.i270,p=o.cos45,f=o.sin45,r=n(5840),a=r.p2r,s=r.r2p,w=n(1936).clearOutline,i=n(9856),b=i.readPaths,j=i.writePaths,y=i.ellipseOver,_=i.fixDatesForPaths;function m(e,t,n){var i,H=e[0][0],L=t.gd,V=H.getAttribute("d"),h=L._fullLayout.newshape,o=t.plotinfo,P=t.isActiveShape,k=o.xaxis,M=o.yaxis,I=!!o.domain||!o.xaxis,R=!!o.domain||!o.yaxis,B=g(n),v=b(V,L,o,P),r={editable:!0,visible:h.visible,name:h.name,showlegend:h.showlegend,legend:h.legend,legendwidth:h.legendwidth,legendgroup:h.legendgroup,legendgrouptitle:{text:h.legendgrouptitle.text,font:h.legendgrouptitle.font},legendrank:h.legendrank,label:h.label,xref:I?"paper":k._id,yref:R?"paper":M._id,layer:h.layer,opacity:h.opacity,line:{color:h.line.color,width:h.line.width,dash:h.line.dash}};if(B||(r.fillcolor=h.fillcolor,r.fillrule=h.fillrule),1===v.length&&(i=v[0]),i&&5===i.length&&"drawrect"===n)r.type="rect",r.x0=i[0][1],r.y0=i[0][2],r.x1=i[2][1],r.y1=i[2][2];else if(i&&"drawline"===n)r.type="line",r.x0=i[0][1],r.y0=i[0][2],r.x1=i[1][1],r.y1=i[1][2];else if(i&&"drawcircle"===n){r.type="circle";var S=i[c][1],C=i[l][1],F=i[d][1],x=i[u][1],O=i[c][2],A=i[l][2],w=i[d][2],E=i[u][2],D=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),N=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type);D&&(S=s(o.xaxis,S),C=s(o.xaxis,C),F=s(o.xaxis,F),x=s(o.xaxis,x)),N&&(O=s(o.yaxis,O),A=s(o.yaxis,A),w=s(o.yaxis,w),E=s(o.yaxis,E));var T=(C+x)/2,z=(O+w)/2,m=y({x0:T,y0:z,x1:T+(x-C+F-S)/2*p,y1:z+(E-A+w-O)/2*f});D&&(m.x0=a(o.xaxis,m.x0),m.x1=a(o.xaxis,m.x1)),N&&(m.y0=a(o.yaxis,m.y0),m.y1=a(o.yaxis,m.y1)),r.x0=m.x0,r.y0=m.y0,r.x1=m.x1,r.y1=m.y1}else r.type="path",k&&M&&_(v,k,M),r.path=j(v),i=null;return r}e.exports={newShapes:function(e,t){if(e.length&&e[0][0]){var o,r,l,f,p,s=t.gd,d=t.isActiveShape,n=t.dragmode,c=(s.layout||{}).shapes||[];if(!v(n)&&void 0!==d&&(r=s._fullLayout._activeShapeIndex,r<c.length))switch(s._fullLayout.shapes[r].type){case"rect":n="drawrect";break;case"circle":n="drawcircle";break;case"line":n="drawline";break;case"path":l=c[r].path||"",n="Z"===l[l.length-1]?"drawclosedpath":"drawopenpath"}p=m(e,t,n),w(s);for(var u=t.editHelpers,a=(u||{}).modifyItem,h=[],i=0;i<c.length;i++)if(f=s._fullLayout.shapes[i],h[i]=f._input,void 0!==d&&i===s._fullLayout._activeShapeIndex)switch(o=p,f.type){case"line":case"rect":case"circle":a("x0",o.x0),a("x1",o.x1),a("y0",o.y0),a("y1",o.y1);break;case"path":a("path",o.path)}return void 0===d?(h.push(p),h):u?u.getUpdateObj():{}}},createShapeObj:m}},1936:function(e){"use strict";e.exports={clearOutlineControllers:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()},clearOutline:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}}},65152:function(e,t,n){"use strict";var s=n(85448),i=n(3400),o=n(54460);t.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},t.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},t.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},t.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},t.extractPathCoords=function(e,t,n){var o=[];return e.match(s.segmentRE).forEach(function(e){if(a=t[e.charAt(0)].drawn,void 0!==a&&(r=e.substr(1).match(s.paramRE),r&&!(r.length<a))){var a,r,c=r[a],l=n?c:i.cleanNumber(c);o.push(l)}}),o},t.getDataToPixel=function(e,n,s,o){var i,r,a=e._fullLayout._size;return n?"domain"===o?i=function(e){return n._length*(s?1-e:e)+n._offset}:(r=t.shapePositionToRange(n),i=function(e){return n._offset+n.r2p(r(e,!0))},"date"===n.type&&(i=t.decodeDate(i))):i=s?function(e){return a.t+a.h*(1-e)}:function(e){return a.l+a.w*e},i},t.getPixelToData=function(e,n,s,o){var i,r,a=e._fullLayout._size;return n?"domain"===o?i=function(e){var t=(e-n._offset)/n._length;return s?1-t:t}:(r=t.rangeToShapePosition(n),i=function(e){return r(n.p2r(e-n._offset))}):i=s?function(e){return 1-(e-a.t)/a.h}:function(e){return(e-a.l)/a.w},i},t.roundPositionForSharpStrokeRendering=function(e,t){var s=1===Math.round(t%2),n=Math.round(e);return s?n+.5:n},t.makeShapesOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.shapes[t]||{},s=e._fullLayout._plots[n.xref+n.yref];return s?s._hadPlotinfo=!0:(s={},n.xref&&"paper"!==n.xref&&(s.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(s.yaxis=e._fullLayout[n.yref+"axis"])),s.xsizemode=n.xsizemode,s.ysizemode=n.ysizemode,s.xanchor=n.xanchor,s.yanchor=n.yanchor,{options:n,plotinfo:s}},t.makeSelectionsOptionsAndPlotinfo=function(e,t){var n=e._fullLayout.selections[t]||{},s=e._fullLayout._plots[n.xref+n.yref];return s?s._hadPlotinfo=!0:(s={},n.xref&&(s.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&(s.yaxis=e._fullLayout[n.yref+"axis"])),{options:n,plotinfo:s}},t.getPathString=function(e,n){var a,r,d,u,h,m,g,j,y,O,v=n.type,k=o.getRefType(n.xref),E=o.getRefType(n.yref),c=o.getFromId(e,n.xref),l=o.getFromId(e,n.yref),f=e._fullLayout._size;if(c?"domain"===k?a=function(e){return c._offset+c._length*e}:(y=t.shapePositionToRange(c),a=function(e){return c._offset+c.r2p(y(e,!0))}):a=function(e){return f.l+f.w*e},l?"domain"===E?r=function(e){return l._offset+l._length*(1-e)}:(O=t.shapePositionToRange(l),r=function(e){return l._offset+l.r2p(O(e,!0))}):r=function(e){return f.t+f.h*(1-e)},"path"===v)return c&&"date"===c.type&&(a=t.decodeDate(a)),l&&"date"===l.type&&(r=t.decodeDate(r)),function(e,t,n){var o=e.path,a=e.xsizemode,r=e.ysizemode,c=e.xanchor,l=e.yanchor;return o.replace(s.segmentRE,function(e){var o=0,d=e.charAt(0),m=s.paramIsX[d],f=s.paramIsY[d],h=s.numParams[d],u=e.substr(1).replace(s.paramRE,function(e){return m[o]?e="pixel"===a?t(c)+Number(e):t(e):f[o]&&(e="pixel"===r?n(l)-Number(e):n(e)),++o>h&&(e="X"),e});return o>h&&(u=u.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+e)),d+u})}(n,a,r);if("pixel"===n.xsizemode?(j=a(n.xanchor),d=j+n.x0,h=j+n.x1):(d=a(n.x0),h=a(n.x1)),"pixel"===n.ysizemode?(g=r(n.yanchor),u=g-n.y0,m=g-n.y1):(u=r(n.y0),m=r(n.y1)),"line"===v)return"M"+d+","+u+"L"+h+","+m;if("rect"===v)return"M"+d+","+u+"H"+h+"V"+m+"H"+d+"Z";var p=(d+h)/2,b=(u+m)/2,x=Math.abs(p-d),_=Math.abs(b-u),w="A"+x+","+_,C=p+x+","+b;return"M"+C+w+" 0 1,1 "+p+","+(b-_)+w+" 0 0,1 "+C+"Z"}},41592:function(e,t,n){"use strict";var s=n(4016);e.exports={moduleType:"component",name:"shapes",layoutAttributes:n(46056),supplyLayoutDefaults:n(43712),supplyDrawNewShapeDefaults:n(65144),includeBasePlot:n(36632)("shapes"),calcAutorange:n(96084),draw:s.draw,drawOne:s.drawOne}},97728:function(e){"use strict";function t(e,t){return t?t.d2l(e):e}function o(e,t){return t?t.l2d(e):e}function n(e,n){return t(e.x1,n)-t(e.x0,n)}function s(e,n,s){return t(e.y1,s)-t(e.y0,s)}e.exports={x0:function(e){return e.x0},x1:function(e){return e.x1},y0:function(e){return e.y0},y1:function(e){return e.y1},slope:function(e,t,o){return"line"!==e.type?void 0:s(e,0,o)/n(e,t)},dx:n,dy:s,width:function(e,t){return Math.abs(n(e,t))},height:function(e,t,n){return Math.abs(s(e,0,n))},length:function(e,t,o){return"line"!==e.type?void 0:Math.sqrt(Math.pow(n(e,t),2)+Math.pow(s(e,0,o),2))},xcenter:function(e,n){return o((t(e.x1,n)+t(e.x0,n))/2,n)},ycenter:function(e,n,s){return o((t(e.y1,s)+t(e.y0,s))/2,s)}}},89861:function(e,t,n){"use strict";var i=n(25376),a=n(66741),r=n(92880).extendDeepAll,c=n(67824).overrideAll,l=n(85656),o=n(31780).templatedArray,s=n(60876),d=o("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});e.exports=c(o("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:d,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:r(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:l.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:i({})},font:i({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(e){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(e,t,n){"use strict";var s=n(3400),o=n(51272),i=n(89861),a=n(60876).name,r=i.steps;function c(e,t,n){function a(n,o){return s.coerce(e,t,i,n,o)}for(var u,r=o(e,t,{name:"steps",handleItemDefaults:l}),c=0,d=0;d<r.length;d++)r[d].visible&&c++;(c<2?t.visible=!1:a("visible"))&&(t._stepCount=c,u=t._visibleSteps=s.filterVisible(r),(r[a("active")]||{}).visible||(t.active=u[0]._index),a("x"),a("y"),s.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),s.coerceFont(a,"font",n.font),a("currentvalue.visible")&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),s.coerceFont(a,"currentvalue.font",t.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen"))}function l(e,t){function n(n,o){return s.coerce(e,t,r,n,o)}if("skip"===e.method||Array.isArray(e.args)?n("visible"):t.visible=!1){n("method"),n("args");var o=n("label","step-"+t._index);n("value",o),n("execute")}}e.exports=function(e,t){o(e,t,{name:a,handleItemDefaults:c})}},79664:function(e,t,n){"use strict";var a=n(33428),l=n(7316),r=n(76308),i=n(43616),o=n(3400),S=o.strTranslate,c=n(72736),A=n(31780).arrayEditor,s=n(60876),m=n(84284),v=m.LINE_SPACING,f=m.FROM_TL,u=m.FROM_BR;function g(e){return s.autoMarginIdRoot+e._index}function O(e){return e._index}function k(e,t){p=i.tester.selectAll("g."+s.labelGroupClass).data(t._visibleSteps),p.enter().append("g").classed(s.labelGroupClass,!0);var n,r,h,m,p,v,j,w,O,b=0,y=0;p.each(function(e){var n,s=_(a.select(this),{step:e},t).node();s&&(n=i.bBox(s),y=Math.max(y,n.height),b=Math.max(b,n.width))}),p.remove(),n=t._dims={},n.inputAreaWidth=Math.max(s.railWidth,s.gripHeight),m=e._fullLayout._size,n.lx=m.l+m.w*t.x,n.ly=m.t+m.h*(1-t.y),"fraction"===t.lenmode?n.outerLength=Math.round(m.w*t.len):n.outerLength=t.len,n.inputAreaStart=0,n.inputAreaLength=Math.round(n.outerLength-t.pad.l-t.pad.r),w=(n.inputAreaLength-2*s.stepInset)/(t._stepCount-1),O=b+s.labelPadding,(n.labelStride=Math.max(1,Math.ceil(O/w)),n.labelHeight=y,n.currentValueMaxWidth=0,n.currentValueHeight=0,n.currentValueTotalHeight=0,n.currentValueMaxLines=1,t.currentvalue.visible)&&(j=i.tester.append("g"),p.each(function(e){var s=d(j,t,e.label),o=s.node()&&i.bBox(s.node())||{width:0,height:0},a=c.lineCount(s);n.currentValueMaxWidth=Math.max(n.currentValueMaxWidth,Math.ceil(o.width)),n.currentValueHeight=Math.max(n.currentValueHeight,Math.ceil(o.height)),n.currentValueMaxLines=Math.max(n.currentValueMaxLines,a)}),n.currentValueTotalHeight=n.currentValueHeight+t.currentvalue.offset,j.remove()),n.height=n.currentValueTotalHeight+s.tickOffset+t.ticklen+s.labelOffset+n.labelHeight+t.pad.t+t.pad.b,h="left",o.isRightAnchor(t)&&(n.lx-=n.outerLength,h="right"),o.isCenterAnchor(t)&&(n.lx-=n.outerLength/2,h="center"),v="top",o.isBottomAnchor(t)&&(n.ly-=n.height,v="bottom"),o.isMiddleAnchor(t)&&(n.ly-=n.height/2,v="middle"),n.outerLength=Math.ceil(n.outerLength),n.height=Math.ceil(n.height),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),r={y:t.y,b:n.height*u[v],t:n.height*f[v]},"fraction"===t.lenmode?(r.l=0,r.xl=t.x-t.len*f[h],r.r=0,r.xr=t.x+t.len*u[h]):(r.x=t.x,r.l=n.outerLength*f[h],r.r=n.outerLength*u[h]),l.autoMargin(e,g(t),r)}function d(e,t,n){if(t.currentvalue.visible){switch(a=t._dims,t.currentvalue.xanchor){case"right":r=a.inputAreaLength-s.currentValueInset-a.currentValueMaxWidth,l="left";break;case"center":r=.5*a.inputAreaLength,l="middle";break;default:r=s.currentValueInset,l="left"}var a,r,l,h,m,f,p,d=o.ensureSingle(e,"text",s.labelClass,function(e){e.attr({"text-anchor":l,"data-notex":1})}),u=t.currentvalue.prefix?t.currentvalue.prefix:"";return"string"==typeof n?u+=n:(h=t.steps[t.active].label,m=t._gd._fullLayout._meta,m&&(h=o.templateString(h,m)),u+=h),t.currentvalue.suffix&&(u+=t.currentvalue.suffix),d.call(i.font,t.currentvalue.font).text(u).call(c.convertToTspans,t._gd),f=c.lineCount(d),p=(a.currentValueMaxLines+1-f)*t.currentvalue.font.size*v,c.positionText(d,r,p),d}}function C(e,t,n){o.ensureSingle(e,"rect",s.gripRectClass,function(s){s.call(y,t,e,n).style("pointer-events","all")}).attr({width:s.gripWidth,height:s.gripHeight,rx:s.gripRadius,ry:s.gripRadius}).call(r.stroke,n.bordercolor).call(r.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function _(e,t,n){var r=o.ensureSingle(e,"text",s.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})}),a=t.step.label,l=n._gd._fullLayout._meta;return l&&(a=o.templateString(a,l)),r.call(i.font,n.font).text(a).call(c.convertToTspans,n._gd),r}function x(e,t){var c=o.ensureSingle(e,"g",s.labelsClass),r=t._dims,n=c.selectAll("g."+s.labelGroupClass).data(r.labelSteps);n.enter().append("g").classed(s.labelGroupClass,!0),n.exit().remove(),n.each(function(e){var n=a.select(this);n.call(_,e,t),i.setTranslate(n,h(t,e.fraction),s.tickOffset+t.ticklen+t.font.size*v+s.labelOffset+r.currentValueTotalHeight)})}function p(e,t,n,s,o){var a=Math.round(s*(n._stepCount-1)),i=n._visibleSteps[a]._index;i!==n.active&&w(e,t,n,i,!0,o)}function w(e,t,n,o,i,a){var r,c=n.active;n.active=o,A(e.layout,s.name,n).applyUpdate("active",o),r=n.steps[n.active],t.call(b,n,a),t.call(d,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:i,previousActive:c}),r&&r.method&&i&&(t._nextMethod?(t._nextMethod.step=r,t._nextMethod.doCallback=i,t._nextMethod.doTransition=a):(t._nextMethod={step:r,doCallback:i,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame(function(){var n=t._nextMethod.step;n.method&&(n.execute&&l.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function y(e,t,n){if(!t._context.staticPlot){var c=n.node(),o=a.select(t);e.on("mousedown",l),e.on("touchstart",l)}function i(){return n.data()[0]}function l(){var l,d,e=i();t.emit("plotly_sliderstart",{slider:e}),l=n.select("."+s.gripRectClass),a.event.stopPropagation(),a.event.preventDefault(),l.call(r.fill,e.activebgcolor),d=j(e,a.mouse(c)[0]);function u(){var e=i(),s=j(e,a.mouse(c)[0]);p(t,n,e,s,!1)}function h(){var e=i();e._dragging=!1,l.call(r.fill,e.bgcolor),o.on("mouseup",null),o.on("mousemove",null),o.on("touchend",null),o.on("touchmove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}p(t,n,e,d,!0),e._dragging=!0,o.on("mousemove",u),o.on("touchmove",u),o.on("mouseup",h),o.on("touchend",h)}}function E(e,t){var n=e.selectAll("rect."+s.tickRectClass).data(t._visibleSteps),o=t._dims;n.enter().append("rect").classed(s.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(e,n){var c=n%o.labelStride==0,l=a.select(this);l.attr({height:c?t.ticklen:t.minorticklen}).call(r.fill,t.tickcolor),i.setTranslate(l,h(t,n/(t._stepCount-1))-.5*t.tickwidth,(c?s.tickOffset:s.minorTickOffset)+o.currentValueTotalHeight)})}function b(e,t,n){for(var i,r,c=e.select("rect."+s.gripRectClass),a=0,o=0;o<t._stepCount;o++)if(t._visibleSteps[o]._index===t.active){a=o;break}r=h(t,a/(t._stepCount-1)),t._invokingCommand||(i=c,n&&t.transition.duration>0&&(i=i.transition().duration(t.transition.duration).ease(t.transition.easing)),i.attr("transform",S(r-.5*s.gripWidth,t._dims.currentValueTotalHeight)))}function h(e,t){var n=e._dims;return n.inputAreaStart+s.stepInset+(n.inputAreaLength-2*s.stepInset)*Math.min(1,Math.max(0,t))}function j(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-s.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*s.stepInset-2*n.inputAreaStart)))}function M(e,t,n){var a=n._dims,c=o.ensureSingle(e,"rect",s.railTouchRectClass,function(s){s.call(y,t,e,n).style("pointer-events","all")});c.attr({width:a.inputAreaLength,height:Math.max(a.inputAreaWidth,s.tickOffset+n.ticklen+a.labelHeight)}).call(r.fill,n.bgcolor).attr("opacity",0),i.setTranslate(c,0,a.currentValueTotalHeight)}function F(e,t){var n=t._dims,c=n.inputAreaLength-2*s.railInset,a=o.ensureSingle(e,"rect",s.railRectClass);a.attr({width:c,height:s.railWidth,rx:s.railRadius,ry:s.railRadius,"shape-rendering":"crispEdges"}).call(r.stroke,t.bordercolor).call(r.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),i.setTranslate(a,s.railInset,.5*(n.inputAreaWidth-s.railWidth)+n.currentValueTotalHeight)}e.exports=function(e){var n,o,h,m=e._context.staticPlot,c=e._fullLayout,t=function(e,t){for(var n,i=e[s.name],a=[],o=0;o<i.length;o++)n=i[o],n.visible&&(n._gd=t,a.push(n));return a}(c,e),r=c._infolayer.selectAll("g."+s.containerClassName).data(t.length>0?[0]:[]);function u(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),l.autoMargin(e,g(t))}if(r.enter().append("g").classed(s.containerClassName,!0).style("cursor",m?null:"ew-resize"),r.exit().each(function(){a.select(this).selectAll("g."+s.groupClassName).each(u)}).remove(),0!==t.length){o=r.selectAll("g."+s.groupClassName).data(t,O),o.enter().append("g").classed(s.groupClassName,!0),o.exit().each(u).remove();for(n=0;n<t.length;n++)h=t[n],k(e,h);o.each(function(t){var n=a.select(this);!function(e){t=e._dims,t.labelSteps=[];for(var t,s=e._stepCount,n=0;n<s;n+=t.labelStride)t.labelSteps.push({fraction:n/(s-1),step:e._visibleSteps[n]})}(t),l.manageCommandObserver(e,t,t._visibleSteps,function(t){var s=n.data()[0];s.active!==t.index&&(s._dragging||w(e,n,s,t.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),t.call(d,n).call(F,n).call(x,n).call(E,n).call(M,e,n).call(C,e,n);var s=n._dims;i.setTranslate(t,s.lx+n.pad.l,s.ly+n.pad.t),t.call(b,n,!1),t.call(d,n)}(e,a.select(this),t)})}}},97544:function(e,t,n){"use strict";var s=n(60876);e.exports={moduleType:"component",name:s.name,layoutAttributes:n(89861),supplyLayoutDefaults:n(8132),draw:n(79664)}},81668:function(e,t,n){"use strict";var o=n(33428),h=n(38248),m=n(7316),r=n(24040),s=n(3400),c=s.strTranslate,l=n(43616),a=n(76308),i=n(72736),d=n(13448),f=n(84284).OPPOSITE_SIDE,u=/ [XY][0-9]* /;e.exports={draw:function(e,t,n){var v,C,E,A,M,T=n.propContainer,O=n.propName,D=n.placeholder,N=n.traceIndex,p=n.avoid||{},x=n.attributes,b=n.transform,w=n.containerGroup,y=e._fullLayout,k=1,S=!1,_=T.title,g=(_&&_.text?_.text:"").trim(),j=_&&_.font?_.font:{},I=j.family,H=j.size,z=j.color,P=j.weight,R=j.style,L=j.variant;if("title.text"===O?A="titleText":-1!==O.indexOf("axis")?A="axisTitleText":O.indexOf(!0)&&(A="colorbarTitleText"),C=e._context.edits[A],""===g?k=0:g.replace(u," % ")===D.replace(u," % ")&&(k=.2,S=!0,C||(g="")),n._meta?g=s.templateString(g,n._meta):y._meta&&(g=s.templateString(g,y._meta)),M=g||C,w||(w=s.ensureSingle(y._infolayer,"g","g-"+t),E=y._hColorbarMoveTitle),v=w.selectAll("text").data(M?[0]:[]),v.enter().append("text"),v.text(g).attr("class",t),v.exit().remove(),!M)return w;function F(e){s.syncOrAsync([B,V],e)}function B(t){var n;return!b&&E&&(b={}),b?(n="",b.rotate&&(n+="rotate("+[b.rotate,x.x,x.y]+")"),(b.offset||E)&&(n+=c(0,(b.offset||0)-(E||0)))):n=null,t.attr("transform",n),t.style({"font-family":I,"font-size":o.round(H,2)+"px",fill:a.rgb(z),opacity:k*a.opacity(z),"font-weight":P,"font-style":R,"font-variant":L}).attr(x).call(i.convertToTspans,e),m.previousPromises(e)}function V(t){if(r=o.select(t.node().parentNode),p&&p.selection&&p.side&&g){r.attr("transform",null);var r,u,v,b,j,_,x,E=f[p.side],O="left"===p.side||"top"===p.side?-1:1,w=h(p.pad)?p.pad:2,i=l.bBox(r.node()),a={t:0,b:0,l:0,r:0},m=e._fullLayout._reservedMargin;for(_ in m)for(b in m[_])x=m[_][b],a[b]=Math.max(a[b],x);var C={left:a.l,top:a.t,right:y.width-a.r,bottom:y.height-a.b},d=p.maxShift||O*(C[p.side]-i[p.side]),n=0;d<0?n=d:(u=p.offsetLeft||0,v=p.offsetTop||0,i.left-=u,i.right-=u,i.top-=v,i.bottom-=v,p.selection.each(function(){var e=l.bBox(this);s.bBoxIntersect(i,e,w)&&(n=Math.max(n,O*(e[p.side]-i[E])+w))}),n=Math.min(d,n),T._titleScoot=Math.abs(n)),(n>0||d<0)&&(j={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[p.side],r.attr("transform",c(j[0],j[1])))}}return v.call(F),C&&(g?v.on(".opacity",null):(k=0,S=!0,v.text(D).on("mouseover.opacity",function(){o.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){o.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),v.call(i.makeEditable,{gd:e}).on("edit",function(t){void 0!==N?r.call("_guiRestyle",e,O,t,N):r.call("_guiRelayout",e,O,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(F)}).on("input",function(e){this.text(e||" ").call(i.positionText,x.x,x.y)})),v.classed("js-placeholder",S),w}}},88444:function(e,t,n){"use strict";var o=n(25376),i=n(22548),a=n(92880).extendFlat,r=n(67824).overrideAll,c=n(66741),s=n(31780).templatedArray,l=s("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});e.exports=r(s("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:l,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(c({editType:"arraydraw"}),{}),font:o({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(e){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},91384:function(e,t,n){"use strict";var s=n(3400),o=n(51272),i=n(88444),a=n(73712).name,r=i.buttons;function c(e,t,n){function a(n,o){return s.coerce(e,t,i,n,o)}a("visible",o(e,t,{name:"buttons",handleItemDefaults:l}).length>0)&&(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),s.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),s.coerceFont(a,"font",n.font),a("bgcolor",n.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function l(e,t){function n(n,o){return s.coerce(e,t,r,n,o)}n("visible","skip"===e.method||Array.isArray(e.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}e.exports=function(e,t){o(e,t,{name:a,handleItemDefaults:c})}},14420:function(e,t,n){"use strict";var i=n(33428),r=n(7316),l=n(76308),a=n(43616),o=n(3400),d=n(72736),C=n(31780).arrayEditor,v=n(84284).LINE_SPACING,s=n(73712),E=n(37400);function k(e){return e._index}function y(e,t){return+e.attr(s.menuIndexAttrName)===t._index}function h(e,t,n,o,i,a,r,l){t.active=r,C(e.layout,s.name,t).applyUpdate("active",r),"buttons"===t.type?c(e,o,null,null,t):"dropdown"===t.type&&(i.attr(s.menuIndexAttrName,"-1"),g(e,o,i,a,t),l||c(e,o,i,a,t))}function g(e,t,n,i,r){var l=o.ensureSingle(t,"g",s.headerClassName,function(e){e.style("pointer-events","all")}),d=r._dims,h=r.active,g=r.buttons[h]||s.blankHeaderOpts,v={y:r.pad.t,yPad:0,x:r.pad.l,xPad:0,index:0},b={width:d.headerWidth,height:d.headerHeight};l.call(u,r,g,e).call(p,r,v,b),o.ensureSingle(t,"text",s.headerArrowClassName,function(e){e.attr("text-anchor","end").call(a.font,r.font).text(s.arrowSymbol[r.direction])}).attr({x:d.headerWidth-s.arrowOffsetX+r.pad.l,y:d.headerHeight/2+s.textOffsetY+r.pad.t}),l.on("click",function(){n.call(m,String(y(n,r)?-1:r._index)),c(e,t,n,i,r)}),l.on("mouseover",function(){l.call(f)}),l.on("mouseout",function(){l.call(j,r)}),a.setTranslate(t,d.lx,d.ly)}function c(e,t,n,a,c){n||(n=t).attr("pointer-events","all");var d,g,x=function(e){return-1==+e.attr(s.menuIndexAttrName)}(n)&&"buttons"!==c.type?[]:c.buttons,y="dropdown"===c.type?s.dropdownButtonClassName:s.buttonClassName,m=n.selectAll("g."+y).data(o.filterVisible(x)),C=m.enter().append("g").classed(y,!0),O=m.exit();"dropdown"===c.type?(C.attr("opacity","0").transition().attr("opacity","1"),O.transition().attr("opacity","0").remove()):O.remove();var b=0,v=0,l=c._dims,w=-1!==["up","down"].indexOf(c.direction);"dropdown"===c.type&&(w?v=l.headerHeight+s.gapButtonHeader:b=l.headerWidth+s.gapButtonHeader),"dropdown"===c.type&&"up"===c.direction&&(v=-s.gapButtonHeader+s.gapButton-l.openHeight),"dropdown"===c.type&&"left"===c.direction&&(b=-s.gapButtonHeader+s.gapButton-l.openWidth),g={x:l.lx+b+c.pad.l,y:l.ly+v+c.pad.t,yPad:s.gapButton,xPad:s.gapButton,index:0},d={l:g.x+c.borderwidth,t:g.y+c.borderwidth},m.each(function(s,o){var l=i.select(this);l.call(u,c,s,e).call(p,c,g),l.on("click",function(){i.event.defaultPrevented||(s.execute&&(s.args2&&c.active===o?(h(e,c,0,t,n,a,-1),r.executeAPICommand(e,s.method,s.args2)):(h(e,c,0,t,n,a,o),r.executeAPICommand(e,s.method,s.args))),e.emit("plotly_buttonclicked",{menu:c,button:s,active:c.active}))}),l.on("mouseover",function(){l.call(f)}),l.on("mouseout",function(){l.call(j,c),m.call(_,c)})}),m.call(_,c),w?(d.w=Math.max(l.openWidth,l.headerWidth),d.h=g.y-d.t):(d.w=g.x-d.l,d.h=Math.max(l.openHeight,l.headerHeight)),d.direction=c.direction,a&&(m.size()?function(e,t,n,o,i,a){var r,c,l,d=i.direction,m="up"===d||"down"===d,u=i._dims,h=i.active;if(m)for(l=0,r=0;r<h;r++)l+=u.heights[r]+s.gapButton;else for(c=0,r=0;r<h;r++)c+=u.widths[r]+s.gapButton;o.enable(a,c,l),o.hbar&&o.hbar.attr("opacity","0").transition().attr("opacity","1"),o.vbar&&o.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,c,d):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()}),n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(a))}function u(e,t,n,s){e.call(O,t).call(w,t,n,s)}function O(e,t){o.ensureSingle(e,"rect",s.itemRectClassName,function(e){e.attr({rx:s.rx,ry:s.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function w(e,t,n,i){var l=o.ensureSingle(e,"text",s.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})}),r=n.label,c=i._fullLayout._meta;c&&(r=o.templateString(r,c)),l.call(a.font,t.font).text(r).call(d.convertToTspans,i)}function _(e,t){var n=t.active;e.each(function(e,o){var a=i.select(this);o===n&&t.showactive&&a.select("rect."+s.itemRectClassName).call(l.fill,s.activeColor)})}function f(e){e.select("rect."+s.itemRectClassName).call(l.fill,s.hoverColor)}function j(e,t){e.select("rect."+s.itemRectClassName).call(l.fill,t.bgcolor)}function x(e,t){n=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},g=a.tester.selectAll("g."+s.dropdownButtonClassName).data(o.filterVisible(t.buttons)),g.enter().append("g").classed(s.dropdownButtonClassName,!0),h=-1!==["up","down"].indexOf(t.direction),g.each(function(o,r){f=i.select(this),f.call(u,t,o,e);var f,m=f.select("."+s.itemTextClassName),p=m.node()&&a.bBox(m.node()).width,l=Math.max(p+s.textPadX,s.minWidth),g=t.font.size*v,b=d.lineCount(m),c=Math.max(g*b,s.minHeight)+s.textOffsetY,c=Math.ceil(c),l=Math.ceil(l);n.widths[r]=l,n.heights[r]=c,n.height1=Math.max(n.height1,c),n.width1=Math.max(n.width1,l),h?(n.totalWidth=Math.max(n.totalWidth,l),n.openWidth=n.totalWidth,n.totalHeight+=c+s.gapButton,n.openHeight+=c+s.gapButton):(n.totalWidth+=l+s.gapButton,n.openWidth+=l+s.gapButton,n.totalHeight=Math.max(n.totalHeight,c),n.openHeight=n.totalHeight)}),h?n.totalHeight-=s.gapButton:n.totalWidth-=s.gapButton,n.headerWidth=n.width1+s.arrowPadX,n.headerHeight=n.height1,"dropdown"===t.type&&(h?(n.width1+=s.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=s.arrowPadX),g.remove();var n,c,l,h,g,m=n.totalWidth+t.pad.l+t.pad.r,f=n.totalHeight+t.pad.t+t.pad.b,p=e._fullLayout._size;n.lx=p.l+p.w*t.x,n.ly=p.t+p.h*(1-t.y),l="left",o.isRightAnchor(t)&&(n.lx-=m,l="right"),o.isCenterAnchor(t)&&(n.lx-=m/2,l="center"),c="top",o.isBottomAnchor(t)&&(n.ly-=f,c="bottom"),o.isMiddleAnchor(t)&&(n.ly-=f/2,c="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),r.autoMargin(e,b(t),{x:t.x,y:t.y,l:m*({right:1,center:.5}[l]||0),r:m*({left:1,center:.5}[l]||0),b:f*({top:1,middle:.5}[c]||0),t:f*({bottom:1,middle:.5}[c]||0)})}function b(e){return s.autoMarginIdRoot+e._index}function p(e,t,n,o){o=o||{};var c,l,m,f,p=e.select("."+s.itemRectClassName),u=e.select("."+s.itemTextClassName),h=t.borderwidth,r=n.index,i=t._dims;a.setTranslate(e,h+n.x,h+n.y),c=-1!==["up","down"].indexOf(t.direction),l=o.height||(c?i.heights[r]:i.height1),p.attr({x:0,y:0,width:o.width||(c?i.width1:i.widths[r]),height:l}),m=t.font.size*v,f=(d.lineCount(u)-1)*m/2,d.positionText(u,s.textOffsetX,l/2-f+s.textOffsetY),c?n.y+=i.heights[r]+n.yPad:n.x+=i.widths[r]+n.xPad,n.index++}function m(e,t){e.attr(s.menuIndexAttrName,t||"-1").selectAll("g."+s.dropdownButtonClassName).remove()}e.exports=function(e){var t,a,l,d,u,v,j,f=e._fullLayout,n=o.filterVisible(f[s.name]);function p(t){r.autoMargin(e,b(t))}if(a=f._menulayer.selectAll("g."+s.containerClassName).data(n.length>0?[0]:[]),a.enter().append("g").classed(s.containerClassName,!0).style("cursor","pointer"),a.exit().each(function(){i.select(this).selectAll("g."+s.headerGroupClassName).each(p)}).remove(),0!==n.length){l=a.selectAll("g."+s.headerGroupClassName).data(n,k),l.enter().append("g").classed(s.headerGroupClassName,!0);for(t=o.ensureSingle(a,"g",s.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),d=0;d<n.length;d++)v=n[d],x(e,v);j="updatemenus"+f._uid,u=new E(e,t,j),l.enter().size()&&(t.node().parentNode.appendChild(t.node()),t.call(m)),l.exit().each(function(e){t.call(m),p(e)}).remove(),l.each(function(n){var s=i.select(this),o="dropdown"===n.type?t:null;r.manageCommandObserver(e,n,n.buttons,function(t){h(e,n,n.buttons[t.index],s,o,u,t.index,!0)}),"dropdown"===n.type?(g(e,s,t,u,n),y(t,n)&&c(e,s,t,u,n)):c(e,s,null,null,n)})}}},76908:function(e,t,n){"use strict";var s=n(73712);e.exports={moduleType:"component",name:s.name,layoutAttributes:n(88444),supplyLayoutDefaults:n(91384),draw:n(14420)}},37400:function(e,t,n){"use strict";e.exports=s;var o=n(33428),r=n(76308),i=n(43616),a=n(3400);function s(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(e,t,n){var z=this.gd._fullLayout,F=z.width,M=z.height;this.position=e;var d,u,m,f,y,_,D,I,p=this.position.l,w=this.position.w,g=this.position.t,v=this.position.h,b=this.position.direction,j="down"===b,H="left"===b,R="up"===b,c=w,a=v;j||H||"right"===b||R||(this.position.direction="down",j=!0),j||R?(m=(d=p)+c,j?(u=g,a=(f=Math.min(u+a,M))-u):a=(f=g+a)-(u=Math.max(f-a,0))):(f=(u=g)+a,H?c=(m=p+c)-(d=Math.max(m-c,0)):(d=p,c=(m=Math.min(d+c,F))-d)),this._box={l:d,t:u,w:c,h:a};var l=w>c,E=s.barLength+2*s.barPad,x=s.barWidth+2*s.barPad,L=p,A=g+v;A+x>M&&(A=M-x),y=this.container.selectAll("rect.scrollbar-horizontal").data(l?[0]:[]),y.exit().on(".drag",null).remove(),y.enter().append("rect").classed("scrollbar-horizontal",!0).call(r.fill,s.barColor),l?(this.hbar=y.attr({rx:s.barRadius,ry:s.barRadius,x:L,y:A,width:E,height:x}),this._hbarXMin=L+E/2,this._hbarTranslateMax=c-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var h=v>a,O=s.barWidth+2*s.barPad,T=s.barLength+2*s.barPad,C=p+w,N=g;C+O>F&&(C=F-O),_=this.container.selectAll("rect.scrollbar-vertical").data(h?[0]:[]),_.exit().on(".drag",null).remove(),_.enter().append("rect").classed("scrollbar-vertical",!0).call(r.fill,s.barColor),h?(this.vbar=_.attr({rx:s.barRadius,ry:s.barRadius,x:C,y:N,width:O,height:T}),this._vbarYMin=N+T/2,this._vbarTranslateMax=a-T):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var k=this.id,B=d-.5,V=h?m+O+.5:m+.5,P=u-.5,$=l?f+x+.5:f+.5,S=z._topdefs.selectAll("#"+k).data(l||h?[0]:[]);(S.exit().remove(),S.enter().append("clipPath").attr("id",k).append("rect"),l||h?(this._clipRect=S.select("rect").attr({x:Math.floor(B),y:Math.floor(P),width:Math.ceil(V)-Math.floor(B),height:Math.ceil($)-Math.floor(P)}),this.container.call(i.setClipUrl,k,this.gd),this.bg.attr({x:p,y:g,width:w,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),l||h)&&(I=o.behavior.drag().on("dragstart",function(){o.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(I),D=o.behavior.drag().on("dragstart",function(){o.event.sourceEvent.preventDefault(),o.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),l&&this.hbar.on(".drag",null).call(D),h&&this.vbar.on(".drag",null).call(D)),this.setTranslate(t,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=o.event.dx),this.vbar&&(t-=o.event.dy),this.setTranslate(e,t)},s.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=o.event.deltaY),this.vbar&&(t+=o.event.deltaY),this.setTranslate(e,t)},s.prototype._onBarDrag=function(){var e,t,i,r,n=this.translateX,s=this.translateY;this.hbar&&(e=n+this._hbarXMin,i=e+this._hbarTranslateMax,n=(a.constrain(o.event.x,e,i)-e)/(i-e)*(this.position.w-this._box.w)),this.vbar&&(t=s+this._vbarYMin,r=t+this._vbarTranslateMax,s=(a.constrain(o.event.y,t,r)-t)/(r-t)*(this.position.h-this._box.h)),this.setTranslate(n,s)},s.prototype.setTranslate=function(e,t){var o,r,n=this.position.w-this._box.w,s=this.position.h-this._box.h;(e=a.constrain(e||0,0,n),t=a.constrain(t||0,0,s),this.translateX=e,this.translateY=t,this.container.call(i.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar)&&(o=e/n,this.hbar.call(i.setTranslate,e+o*this._hbarTranslateMax,t)),this.vbar&&(r=t/s,this.vbar.call(i.setTranslate,e,t+r*this._vbarTranslateMax))}},84284:function(e){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(e){"use strict";e.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},48164:function(e){"use strict";e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},26880:function(e){"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(e){"use strict";e.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(e){"use strict";e.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(e){"use strict";e.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},13448:function(e){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(e){"use strict";e.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},2264:function(e,t){"use strict";t.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],t.STYLE=t.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(e,t){"use strict";t.xmlns="http://www.w3.org/2000/xmlns/",t.svg="http://www.w3.org/2000/svg",t.xlink="http://www.w3.org/1999/xlink",t.svgAttrs={xmlns:t.svg,"xmlns:xlink":t.xlink}},64884:function(e,t,n){"use strict";t.version=n(25788).version,n(88324),n(79288);for(var s,o,a,d=n(24040),i=t.register=d.register,r=n(22448),l=Object.keys(r),c=0;c<l.length;c++)s=l[c],"_"!==s.charAt(0)&&(t[s]=r[s]),i({moduleType:"apiMethod",name:s,fn:r[s]});i(n(65875)),i([n(79180),n(56864),n(22676),n(41592),n(7402),n(76908),n(97544),n(49692),n(41152),n(12704),n(64968),n(8932),n(55080),n(2780),n(93024),n(45460)]),i([n(6580),n(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),t.Icons=n(9224),o=n(93024),a=n(7316),t.Plots={resize:a.resize,graphJson:a.graphJson,sendDataToCloud:a.sendDataToCloud},t.Fx={hover:o.hover,unhover:o.unhover,loneHover:o.loneHover,loneUnhover:o.loneUnhover},t.Snapshot=n(78904),t.PlotSchema=n(73060)},9224:function(e){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(e,t){"use strict";t.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},t.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},t.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},t.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},t.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},t.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},11864:function(e,t,n){"use strict";var c=n(20435),i=c.mod,u=c.modHalf,o=Math.PI,s=2*o;function r(e){return Math.abs(e[1]-e[0])>s-1e-14}function l(e,t){return u(t-e,s)}function d(e,t){if(r(t))return!0;t[0]<t[1]?(o=t[0],n=t[1]):(o=t[1],n=t[0]),(o=i(o,s))>(n=i(n,s))&&(n+=s);var n,o,a=i(e,s),c=a+s;return a>=o&&a<=n||c>=o&&c<=n}function a(e,t,n,i,a,c,l){a=a||0,c=c||0;var d,u,h,m,g,v,j,b=r([n,i]);function p(e,t){return[e*Math.cos(t)+a,c-e*Math.sin(t)]}b?(u=0,v=o,h=s):n<i?(u=n,h=i):(u=i,h=n),e<t?(m=e,d=t):(m=t,d=e),j=Math.abs(h-u)<=o?0:1;function f(e,t,n){return"A"+[e,e]+" "+[0,j,n]+" "+p(e,t)}return b?g=null===m?"M"+p(d,u)+f(d,v,0)+f(d,h,0)+"Z":"M"+p(m,u)+f(m,v,0)+f(m,h,0)+"ZM"+p(d,u)+f(d,v,1)+f(d,h,1)+"Z":null===m?(g="M"+p(d,u)+f(d,h,0),l&&(g+="L0,0Z")):g="M"+p(m,u)+"L"+p(d,u)+f(d,h,0)+"L"+p(m,h)+f(m,u,1)+"Z",g}e.exports={deg2rad:function(e){return e/180*o},rad2deg:function(e){return e/o*180},angleDelta:l,angleDist:function(e,t){return Math.abs(l(e,t))},isFullCircle:r,isAngleInsideSector:d,isPtInsideSector:function(e,t,n,s){return!!d(t,s)&&(n[0]<n[1]?(o=n[0],i=n[1]):(o=n[1],i=n[0]),e>=o&&e<=i);var o,i},pathArc:function(e,t,n,s,o){return a(null,e,t,n,s,o,0)},pathSector:function(e,t,n,s,o){return a(null,e,t,n,s,o,1)},pathAnnulus:function(e,t,n,s,o,i){return a(e,t,n,s,o,i,1)}}},38116:function(e,t,n){"use strict";var s,d=n(83160).decode,u=n(63620),i=Array.isArray,h=ArrayBuffer,l=DataView;function c(e){return h.isView(e)&&!(e instanceof l)}function o(e){return i(e)||c(e)}t.isTypedArray=c,t.isArrayOrTypedArray=o,t.isArray1D=function(e){return!o(e[0])},t.ensureArray=function(e,t){return i(e)||(e=[]),e.length=t,e},s={u1c:"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,i1:"undefined"==typeof Int8Array?void 0:Int8Array,u1:"undefined"==typeof Uint8Array?void 0:Uint8Array,i2:"undefined"==typeof Int16Array?void 0:Int16Array,u2:"undefined"==typeof Uint16Array?void 0:Uint16Array,i4:"undefined"==typeof Int32Array?void 0:Int32Array,u4:"undefined"==typeof Uint32Array?void 0:Uint32Array,f4:"undefined"==typeof Float32Array?void 0:Float32Array,f8:"undefined"==typeof Float64Array?void 0:Float64Array};function a(e){return e.constructor===ArrayBuffer}function r(e,t,n){if(o(e)){if(o(e[0])){for(var s=n,i=0;i<e.length;i++)s=t(s,e[i].length);return s}return e.length}return 0}s.uint8c=s.u1c,s.uint8=s.u1,s.int8=s.i1,s.uint16=s.u2,s.int16=s.i2,s.uint32=s.u4,s.int32=s.i4,s.float32=s.f4,s.float64=s.f8,t.isArrayBuffer=a,t.decodeTypedArraySpec=function(e){var n,i,l,f,v,t=[],r=function(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}(e),b=r.dtype,c=s[b];if(!c)throw new Error('Error in dtype: "'+b+'"');f=c.BYTES_PER_ELEMENT,i=r.bdata,a(i)||(i=d(i)),n=void 0===r.shape?[i.byteLength/f]:(""+r.shape).split(","),n.reverse();var o,u,h=n.length,p=+n[0],g=f*p,m=0;if(1===h)t=new c(i);else if(2===h)for(u=+n[1],o=0;o<u;o++)t[o]=new c(i,m,p),m+=g;else{if(3!==h)throw new Error("ndim: "+h+'is not supported with the shape:"'+r.shape+'"');u=+n[1];for(v=+n[2],l=0;l<v;l++)for(t[l]=[],o=0;o<u;o++)t[l][o]=new c(i,m,p),m+=g}return t.bdata=r.bdata,t.dtype=r.dtype,t.shape=n.reverse().join(","),e._inputArray=t,t},t.isTypedArraySpec=function(e){return u(e)&&e.hasOwnProperty("dtype")&&"string"==typeof e.dtype&&e.hasOwnProperty("bdata")&&("string"==typeof e.bdata||a(e.bdata))&&(void 0===e.shape||e.hasOwnProperty("shape")&&("string"==typeof e.shape||"number"==typeof e.shape))},t.concat=function(){var e,t,n,s,o,r,c,d,a=[],u=!0,l=0;for(e=0;e<arguments.length;e++)(d=(t=arguments[e]).length)&&(s?a.push(t):(s=t,c=d),i(t)?r=!1:(u=!1,l?r!==t.constructor&&(r=!1):r=t.constructor),l+=d);if(!l)return[];if(!a.length)return s;if(u)return s.concat.apply(s,a);if(r){for((o=new r(l)).set(s),e=0;e<a.length;e++)t=a[e],o.set(t,c),c+=t.length;return o}for(o=new Array(l),n=0;n<s.length;n++)o[n]=s[n];for(e=0;e<a.length;e++){for(t=a[e],n=0;n<t.length;n++)o[c+n]=t[n];c+=n}return o},t.maxRowLength=function(e){return r(e,Math.max,0)},t.minRowLength=function(e){return r(e,Math.min,1/0)}},54037:function(e,t,n){"use strict";var s=n(38248),o=n(39032).BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(e){return"string"==typeof e&&(e=e.replace(i,"")),s(e)?Number(e):o}},73696:function(e){"use strict";e.exports=function(e){var t=e._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},75352:function(e){"use strict";e.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},63064:function(e,t,n){"use strict";var c=n(38248),l=n(49760),m=n(45464),h=n(88304),p=n(76308),f=n(13448).DESELECTDIM,o=n(22296),d=n(53756).counter,u=n(20435).modHalf,s=n(38116).isArrayOrTypedArray,a=n(38116).isTypedArraySpec,i=n(38116).decodeTypedArraySpec;function r(e,n){if(o=t.valObjectMeta[n.valType],n.arrayOk&&s(e))return!0;if(o.validateFunction)return o.validateFunction(e,n);var o,i={},a=i,r={set:function(e){a=e}};return o.coerceFunction(e,r,i,n),a!==i}t.valObjectMeta={data_array:{coerceFunction:function(e,t,n){t.set(s(e)?e:a(e)?i(e):n)}},enumerated:{coerceFunction:function(e,t,n,s){s.coerceNumber&&(e=+e),-1===s.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n,o=t.values,s=0;s<o.length;s++)if(n=String(o[s]),"/"===n.charAt(0)&&"/"===n.charAt(n.length-1)){if(new RegExp(n.substr(1,n.length-2)).test(e))return!0}else if(e===o[s])return!0;return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,s){!c(e)||void 0!==s.min&&e<s.min||void 0!==s.max&&e>s.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,s){e%1||!c(e)||void 0!==s.min&&e<s.min||void 0!==s.max&&e>s.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,s){if("string"!=typeof e){var o="number"==typeof e;!0!==s.strict&&o?t.set(String(e)):t.set(n)}else s.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){l(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return l(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(h.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):c(e)?t.set(u(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,s){var o=s.regex||d(n);"string"==typeof e&&o.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"==typeof e&&!!d(n).test(e)}},flaglist:{coerceFunction:function(e,t,n,s){if(-1===(s.extras||[]).indexOf(e))if("string"==typeof e){for(var a,o=e.split("+"),i=0;i<o.length;)a=o[i],-1===s.flags.indexOf(a)||o.indexOf(a)<i?o.splice(i,1):i++;o.length?t.set(o.join("+")):t.set(n)}else t.set(n);else t.set(e)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(a(e)?i(e):e)}},info_array:{coerceFunction:function(e,n,o,r){function v(e,n,s){var o,i={set:function(e){o=e}};return void 0===s&&(s=n.dflt),t.valObjectMeta[n.valType].coerceFunction(e,i,s,n),o}if(a(e)&&(e=i(e)),s(e)){var c,d,m,f,b,j,g=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&s(e[0]),l=r.items,h=[],u=Array.isArray(l),_=u&&g&&s(l[0]),p=g&&u&&!_,y=u&&!p?l.length:e.length;if(o=Array.isArray(o)?o:[],g)for(c=0;c<y;c++)for(h[c]=[],f=s(e[c])?e[c]:[],b=p?l.length:u?l[c].length:f.length,d=0;d<b;d++)j=p?l[d]:u?l[c][d]:l,void 0!==(m=v(f[d],j,(o[c]||[])[d]))&&(h[c][d]=m);else for(c=0;c<y;c++)void 0!==(m=v(e[c],u?l[c]:l,o[c]))&&(h[c]=m);n.set(h)}else n.set(o)},validateFunction:function(e,t){if(!s(e))return!1;var n,i,o=t.items,a=Array.isArray(o),c=2===t.dimensions;if(!t.freeLength&&e.length!==o.length)return!1;for(n=0;n<e.length;n++)if(c){{if(!s(e[n])||!t.freeLength&&e[n].length!==o[n].length)return!1;for(i=0;i<e[n].length;i++)if(!r(e[n][i],a?o[n][i]:o))return!1}}else if(!r(e[n],a?o[n]:o))return!1;return!0}}},t.coerce=function(e,n,c,l,d){var p,g,h=o(c,l).get(),v=o(e,l),m=o(n,l),u=v.get(),f=n._template;if(void 0===u&&f&&(u=o(f,l).get(),f=0),void 0===d&&(d=h.dflt),h.arrayOk){if(s(u))return m.set(u),u;if(a(u))return u=i(u),m.set(u),u}return g=t.valObjectMeta[h.valType].coerceFunction,g(u,m,d,h),p=m.get(),f&&p===d&&!r(u,h)&&(g(u=o(f,l).get(),m,d,h),p=m.get()),p},t.coerce2=function(e,n,s,i,a){var r=o(e,i),c=t.coerce(e,n,s,i,a);return null!=r.get()&&c},t.coerceFont=function(e,t,n,s){s||(s={});var o={};return n=n||{},o.family=e(t+".family",n.family),o.size=e(t+".size",n.size),o.color=e(t+".color",n.color),o.weight=e(t+".weight",n.weight),o.style=e(t+".style",n.style),s.noFontVariant||(o.variant=e(t+".variant",n.variant)),o},t.coercePattern=function(e,t,n,s){if(e(t+".shape")){e(t+".solidity"),e(t+".size");var i,o="overlay"===e(t+".fillmode");s||(i=e(t+".bgcolor",o?n:void 0),e(t+".fgcolor",o?p.contrast(i):n)),e(t+".fgopacity",o?.5:1)}},t.coerceHoverinfo=function(e,n,s){var o,a,r=n._module.attributes,c=r.hoverinfo?r:m,i=c.hoverinfo;return 1===s._dataLength&&(o="all"===i.dflt?i.flags.slice():i.dflt.split("+"),o.splice(o.indexOf("name"),1),a=o.join("+")),t.coerce(e,n,c,"hoverinfo",a)},t.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var o,i,n=e.marker.opacity;void 0!==n&&(s(n)||e.selected||e.unselected||(o=n,i=f*n),t("selected.marker.opacity",o),t("unselected.marker.opacity",i))}},t.validate=r},67555:function(e,t,n){"use strict";var p,g,b,O,F=n(94336).Yn,w=n(38248),v=n(24248),c=n(20435).mod,l=n(39032),o=l.BADNUM,s=l.ONEDAY,h=l.ONEHOUR,r=l.ONEMIN,u=l.ONESEC,m=l.EPOCHJD,i=n(24040),_=n(94336).E9,T=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,k=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=(new Date).getFullYear()-70;function a(e){return e&&i.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function d(e,t){return String(e+Math.pow(10,t)).substr(1)}t.dateTick0=function(e,n){var o,r=function(e,t){return a(e)?t?i.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:i.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}(e,!!n);return n<2?r:(o=t.dateTime2ms(r,e),o+=s*(n-1),t.ms2DateTime(o,0,e))},t.dfltRange=function(e){return a(e)?i.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},t.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},t.dateTime2ms=function(e,n){if(t.isJSDate(e))return v=e.getTimezoneOffset()*r,E=(e.getUTCMinutes()-e.getMinutes())*r+(e.getUTCSeconds()-e.getSeconds())*u+(e.getUTCMilliseconds()-e.getMilliseconds()),E&&(w=3*r,v=v-w/2+c(E-v+w/2,w)),(e=Number(e)-v)>=g&&e<=p?e:o;if("string"!=typeof e&&"number"!=typeof e)return o;if(e=String(e),_=a(n),C=e.charAt(0),!_||"G"!==C&&"g"!==C||(e=e.substr(1),n=""),A=_&&"chinese"===n.substr(0,7),f=e.match(A?k:T),!f)return o;var f,v,b,j,_,w,O,C,E,A,F,l=f[1],d=f[3]||"1",x=Number(f[5]||1),z=Number(f[7]||0),M=Number(f[9]||0),S=Number(f[11]||0);if(_){if(2===l.length)return o;l=Number(l);try{O=i.getComponentMethod("calendars","getCal")(n),A?(F="i"===d.charAt(d.length-1),d=parseInt(d,10),j=O.newDate(l,O.toMonthIndex(l,d,F),x)):j=O.newDate(l,Number(d),x)}catch{return o}return j?(j.toJD()-m)*s+z*h+M*r+S*u:o}return l=2===l.length?(Number(l)+2e3-y)%100+y:Number(l),d-=1,b=new Date(Date.UTC(2e3,d,x,z,M)),b.setUTCFullYear(l),b.getUTCMonth()!==d||b.getUTCDate()!==x?o:b.getTime()+S*u},g=t.MIN_MS=t.dateTime2ms("-9999"),p=t.MAX_MS=t.dateTime2ms("9999-12-31 23:59:59.9999"),t.isDateTime=function(e,n){return t.dateTime2ms(e,n)!==o};var f=90*s,x=3*h,C=5*r;function E(e,t,n,s,o){if((t||n||s||o)&&(e+=" "+d(t,2)+":"+d(n,2),(s||o)&&(e+=":"+d(s,2),o))){for(var i=4;o%10==0;)i-=1,o/=10;e+="."+d(o,i)}return e}t.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(e>=g&&e<=p))return o;t||(t=0);var l,d,v,b,j,y,k,A,w=Math.floor(10*c(e+.05,1)),O=Math.round(e-w/10);if(a(n)){A=Math.floor(O/s)+m,v=Math.floor(c(e,s));try{l=i.getComponentMethod("calendars","getCal")(n).fromJD(A).formatDate("yyyy-mm-dd")}catch{l=_("G%Y-%m-%d")(new Date(O))}if("-"===l.charAt(0))for(;l.length<11;)l="-0"+l.substr(1);else for(;l.length<10;)l="0"+l;b=t<f?Math.floor(v/h):0,j=t<f?Math.floor(v%h/r):0,k=t<x?Math.floor(v%r/u):0,y=t<C?v%u*10+w:0}else d=new Date(O),l=_("%Y-%m-%d")(d),b=t<f?d.getUTCHours():0,j=t<f?d.getUTCMinutes():0,k=t<x?d.getUTCSeconds():0,y=t<C?10*d.getUTCMilliseconds()+w:0;return E(l,b,j,k,y)},t.ms2DateTimeLocal=function(e){if(!(e>=g+s&&e<=p-s))return o;var n=Math.floor(10*c(e+.05,1)),t=new Date(Math.round(e-n/10));return E(F("%Y-%m-%d")(t),t.getHours(),t.getMinutes(),t.getSeconds(),10*t.getUTCMilliseconds()+n)},t.cleanDate=function(e,n,s){if(e===o)return n;if(t.isJSDate(e)||"number"==typeof e&&isFinite(e)){{if(a(s))return v.error("JS Dates and milliseconds are incompatible with world calendars",e),n;if(!(e=t.ms2DateTimeLocal(+e))&&void 0!==n)return n}}else if(!t.isDateTime(e,s))return v.error("unrecognized date",e),n;return e};var M=/%\d?f/g,A=/%h/g,S={1:"1",2:"1",3:"2",4:"2"};function j(e,t,n,s){e=e.replace(M,function(e){var n=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"});var o=new Date(Math.floor(t+.05));if(e=e.replace(A,function(){return S[n("%q")(o)]}),a(s))try{e=i.getComponentMethod("calendars","worldCalFmt")(e,t,s)}catch{return"Invalid"}return n(e)(o)}O=[59,59.9,59.99,59.999,59.9999],t.formatDate=function(e,t,n,o,i,l){if(i=a(i)&&i,!t)if("y"===n)t=l.year;else if("m"===n)t=l.month;else{if("d"!==n)return function(e,t){var n,o=c(e+.05,s),i=d(Math.floor(o/h),2)+":"+d(c(Math.floor(o/r),60),2);return"M"!==t&&(w(t)||(t=0),n=(100+Math.min(c(e/u,60),O[t])).toFixed(t).substr(1),t>0&&(n=n.replace(/0+$/,"").replace(/[.]$/,"")),i+=":"+n),i}(e,n)+`
`+j(l.dayMonthYear,e,o,i);t=l.dayMonth+`
`+l.year}return j(t,e,o,i)},b=3*s,t.incrementMonth=function(e,t,n){if(n=a(n)&&n,o=c(e,s),e=Math.round(e-o),n)try{var o,d,u=Math.round(e/s)+m,r=i.getComponentMethod("calendars","getCal")(n),l=r.fromJD(u);return t%12?r.add(l,t,"m"):r.add(l,t/12,"y"),(l.toJD()-m)*s+o}catch{v.error("invalid ms "+e+" in calendar "+n)}return d=new Date(e+b),d.setUTCMonth(d.getUTCMonth()+t)+o-b},t.findExactDates=function(e,t){for(var n,o,d,r=0,c=0,l=0,h=0,f=a(t)&&i.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++)if(n=e[u],w(n)){if(!(n%s))if(f)try{1===(o=f.fromJD(n/s+m)).day()?1===o.month()?r++:c++:l++}catch{}else 1===(o=new Date(n)).getUTCDate()?0===o.getUTCMonth()?r++:c++:l++}else h++;return l+=c+=r,d=e.length-h,{exactYears:r/d,exactMonths:c/d,exactDays:l/d}}},52200:function(e,t,n){"use strict";var l=n(33428),d=n(24248),r=n(52248),c=n(36524);function i(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function a(e,t,n){var o,i="plotly.js-style-"+e,s=document.getElementById(i);s||((s=document.createElement("style")).setAttribute("id",i),s.appendChild(document.createTextNode("")),document.head.appendChild(s)),o=s.sheet,o.insertRule?o.insertRule(t+"{"+n+"}",0):o.addRule?o.addRule(t,n,0):d.warn("addStyleRule failed")}function s(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return"none"===n?null:n.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function o(e){for(var t=[];u(e);)t.push(e),e=e.parentNode;return t}function u(e){return e&&(e instanceof Element||e instanceof HTMLElement)}e.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(e==null)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){var t=l.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},removeElement:i,addStyleRule:function(e,t){a("global",e,t)},addRelatedStyleRule:a,deleteRelatedStyleRule:function(e){var n="plotly.js-style-"+e,t=document.getElementById(n);t&&i(t)},getFullTransformMatrix:function(e){var n=o(e),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(e){var o,n=s(e);n&&(o=r.convertCssMatrix(n),t=c.multiply(t,t,o))}),t},getElementTransformMatrix:s,getElementAndAncestors:o,equalDomRects:function(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},95924:function(e,t,n){"use strict";var s=n(61252).EventEmitter,o={init:function(e){if(e._ev instanceof s)return e;var t=new s,n=new s;return e._ev=t,e._internalEv=n,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(s,o){"undefined"!=typeof jQuery&&jQuery(e).trigger(s,o),t.emit(s,o),n.emit(s,o)},e},triggerHandler:function(e,t,n){"undefined"!=typeof jQuery&&(o=jQuery(e).triggerHandler(t,n));var s,o,a,r,i=e._ev;if(!i)return o;if(s=i._events[t],!s)return o;function c(e){return e.listener?(i.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(i,[n]))):e.apply(i,[n])}for(s=Array.isArray(s)?s:[s],a=0;a<s.length-1;a++)c(s[a]);return r=c(s[a]),void 0!==o?o:r},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};e.exports=o},92880:function(e,t,n){"use strict";var i=n(63620),s=Array.isArray;function o(e,t,n,a){var c,l,d,u,h,m,f,p,r=e[0],g=e.length;if(2===g&&s(r)&&s(e[1])&&0===r.length){if(p=function(e,t){var n,s;for(n=0;n<e.length;n++){if(null!==(s=e[n])&&"object"==typeof s)return!1;void 0!==s&&(t[n]=s)}return!0}(e[1],r),p)return r;r.splice(0,r.length)}for(u=1;u<g;u++)for(d in f=e[u])l=r[d],c=f[d],a&&s(c)?r[d]=c:t&&c&&(i(c)||(h=s(c)))?(h?(h=!1,m=l&&s(l)?l:[]):m=l&&i(l)?l:{},r[d]=o([m,c],t,n,a)):(void 0!==c||n)&&(r[d]=c);return r}t.extendFlat=function(){return o(arguments,!1,!1,!1)},t.extendDeep=function(){return o(arguments,!0,!1,!1)},t.extendDeepAll=function(){return o(arguments,!0,!0,!1)},t.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(e){"use strict";e.exports=function(e){for(var t,s={},o=[],i=0,n=0;n<e.length;n++)t=e[n],1!==s[t]&&(s[t]=1,o[i++]=t);return o}},43880:function(e){"use strict";function t(e){return!0===e.visible}function n(e){var t=e[0].trace;return!0===t.visible&&0!==t._length}e.exports=function(e){for(var s,i,r=(s=e,Array.isArray(s)&&Array.isArray(s[0])&&s[0][0]&&s[0][0].trace?n:t),a=[],o=0;o<e.length;o++)i=e[o],r(i)&&a.push(i);return a}},27144:function(e,t,n){"use strict";var p=n(33428),a=n(36116),m=n(40440),h=n(77844),l=n(42428),i=n(35536),s=n(24248),d=n(63620),u=n(22296),o=n(92065),r=Object.keys(a),f={"ISO-3":i,"USA-states":i,"country names":function(e){for(var n,t=0;t<r.length;t++)if(n=r[t],new RegExp(a[n]).test(e.trim().toLowerCase()))return n;return s.log("Unrecognized country name: "+e+"."),!1}};function c(e){var t=e.geojson,o=window.PlotlyGeoAssets||{},n="string"==typeof t?o[t]:t;return d(n)?n:(s.error("Oops ... something went wrong when fetching "+t),!1)}e.exports={locationToFeature:function(e,t,n){if(!t||"string"!=typeof t)return!1;var o,i,a,r=f[e](t);if(r){if("USA-states"===e)for(a=[],o=0;o<n.length;o++)(i=n[o]).properties&&i.properties.gu&&"USA"===i.properties.gu&&a.push(i);else a=n;for(o=0;o<a.length;o++)if((i=a[o]).id===r)return i;s.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(e){var t,n,a,r,l=e.geometry,s=l.coordinates,c=e.id,i=[];function d(e){for(var t=0;t<e.length-1;t++)if(e[t][0]>0&&e[t+1][0]<0)return t;return null}switch(r="RUS"===c||"FJI"===c?function(e){var n;if(null===d(e))n=e;else for(n=new Array(e.length),t=0;t<e.length;t++)n[t]=[e[t][0]<0?e[t][0]+360:e[t][0],e[t][1]];i.push(o.tester(n))}:"ATA"===c?function(e){if(s=d(e),null===s)return i.push(o.tester(e));var s,r,n=new Array(e.length+1),a=0;for(t=0;t<e.length;t++)t>s?n[a++]=[e[t][0]+360,e[t][1]]:t===s?(n[a++]=e[t],n[a++]=[e[t][0],-90]):n[a++]=e[t];r=o.tester(n),r.pts.pop(),i.push(r)}:function(e){i.push(o.tester(e))},l.type){case"MultiPolygon":for(n=0;n<s.length;n++)for(a=0;a<s[n].length;a++)r(s[n][a]);break;case"Polygon":for(n=0;n<s.length;n++)r(s[n])}return i},getTraceGeojson:c,extractTraceFeature:function(e){var t,o,i,r,l,f,a=e[0].trace,n=c(a);if(!n)return!1;o={},r=[];for(t=0;t<a._length;t++)i=e[t],(i.loc||0===i.loc)&&(o[i.loc]=i);function d(e){var t,i,c=u(e,a.featureidkey||"id").get(),n=o[c];n&&(i=e.geometry,"Polygon"===i.type||"MultiPolygon"===i.type?(t={type:"Feature",id:c,geometry:i,properties:{}},t.properties.ct=function(e){if(t=e.geometry,"MultiPolygon"===t.type)for(var t,n,o,i,a=t.coordinates,r=0,s=0;s<a.length;s++)o={type:"Polygon",coordinates:a[s]},i=m.default(o),i>r&&(r=i,n=o);else n=t;return h.default(n).geometry.coordinates}(t),n.fIn=e,n.fOut=t,r.push(t)):s.log(["Location",n.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))),delete o[c]}switch(n.type){case"FeatureCollection":l=n.features;for(t=0;t<l.length;t++)d(l[t]);break;case"Feature":d(n);break;default:return s.warn(["Invalid GeoJSON type",(n.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(f in o)s.log(["Location *"+f+"*","does not have a matching feature with id-key","*"+a.featureidkey+"*."].join(" "));return r},fetchTraceGeoData:function(e){var n,s,t=window.PlotlyGeoAssets||{},o=[];function i(e){return new Promise(function(n,s){p.json(e,function(o,i){if(o){delete t[e];var a=404===o.status?'GeoJSON at URL "'+e+'" does not exist.':"Unexpected error while fetching from "+e;return s(new Error(a))}return t[e]=i,n(i)})})}function a(e){return new Promise(function(n,s){var o=0,i=setInterval(function(){return t[e]&&"pending"!==t[e]?(clearInterval(i),n(t[e])):o>100?(clearInterval(i),s("Unexpected error while fetching from "+e)):void o++},50)})}for(s=0;s<e.length;s++)n=e[s][0].trace.geojson,"string"==typeof n&&(t[n]?"pending"===t[n]&&o.push(a(n)):(t[n]="pending",o.push(i(n))));return o},computeBbox:function(e){return l.default(e)}}},44808:function(e,t,n){"use strict";var s=n(39032).BADNUM;t.calcTraceToLineCoords=function(e){for(var i,a=e[0].trace.connectgaps,n=[],t=[],o=0;o<e.length;o++)i=e[o].lonlat,i[0]!==s?t.push(i):!a&&t.length>0&&(n.push(t),t=[]);return t.length>0&&n.push(t),n},t.makeLine=function(e){return 1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}},t.makePolygon=function(e){if(1===e.length)return{type:"Polygon",coordinates:e};for(var n=new Array(e.length),t=0;t<e.length;t++)n[t]=[e[t]];return{type:"MultiPolygon",coordinates:n}},t.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(e,t,n){"use strict";var s,i,r,a=n(20435).mod;function c(e,t,n,s,o,i,a,r){var c,d,l=n-e,p=o-e,g=a-o,u=s-t,m=i-t,f=r-i,h=l*f-g*u;return 0===h?null:(c=(p*f-g*m)/h,d=(p*u-l*m)/h,d<0||d>1||c<0||c>1?null:{x:e+l*c,y:t+u*c})}function o(e,t,n,s,o){if(i=s*e+o*t,i<0)return s*s+o*o;if(i>n){var i,a,r=s-e,c=o-t;return r*r+c*c}return a=s*t-o*e,a*a/n}t.segmentsIntersect=c,t.segmentDistance=function(e,t,n,s,i,a,r,l){if(c(e,t,n,s,i,a,r,l))return 0;var d=n-e,u=s-t,h=r-i,m=l-a,f=d*d+u*u,p=h*h+m*m,g=Math.min(o(d,u,f,i-e,a-t),o(d,u,f,r-e,l-t),o(h,m,p,e-i,t-a),o(h,m,p,n-i,s-a));return Math.sqrt(g)},t.getTextLocation=function(e,t,n,o){if(e===i&&o===r||(s={},i=e,r=o),s[n])return s[n];var c=e.getPointAtLength(a(n-o/2,t)),l=e.getPointAtLength(a(n+o/2,t)),h=Math.atan((l.y-c.y)/(l.x-c.x)),d=e.getPointAtLength(a(n,t)),u={x:(4*d.x+c.x+l.x)/6,y:(4*d.y+c.y+l.y)/6,theta:h};return s[n]=u,u},t.clearLocationCache=function(){i=null},t.getVisibleSegment=function(e,t,n){var s,c,l,u=t.left,h=t.right,m=t.top,d=t.bottom,o=0,a=e.getTotalLength(),i=a;function r(t){n=e.getPointAtLength(t),0===t?c=n:t===a&&(l=n);var n,s=n.x<u?u-n.x:n.x>h?n.x-h:0,o=n.y<m?m-n.y:n.y>d?n.y-d:0;return Math.sqrt(s*s+o*o)}for(s=r(o);s;){if((o+=s+n)>i)return;s=r(o)}for(s=r(i);s;){if(o>(i-=s+n))return;s=r(i)}return{min:o,max:i,len:i-o,total:a,isClosed:0===o&&i===a&&Math.abs(c.x-l.x)<.1&&Math.abs(c.y-l.y)<.1}},t.findPointOnPath=function(e,t,n,s){for(var o,i,a,r=(s=s||{}).pathLength||e.getTotalLength(),u=s.tolerance||.001,h=s.iterationLimit||30,m=e.getPointAtLength(0)[n]>e.getPointAtLength(r)[n]?-1:1,c=0,l=0,d=r;c<h;){if(o=(l+d)/2,a=(i=e.getPointAtLength(o))[n]-t,Math.abs(a)<u)return i;m*a>0?d=o:l=o,c++}return i}},33040:function(e,t,n){"use strict";var c=n(38248),h=n(49760),s=n(72160),o=n(8932),u=n(22548).defaultLine,r=n(38116).isArrayOrTypedArray,i=s(u);function a(e,t){var n=e;return n[3]*=t,n}function l(e){if(c(e))return i;var t=s(e);return t.length?t:i}function d(e){return c(e)?e:1}e.exports={formatColor:function(e,t,n){c=e.color,c&&c._inputArray&&(c=c._inputArray);var c,u,m,f,p,b,j,g=r(c),v=r(t),y=o.extractOpts(e),h=[];if(m=void 0!==y.colorscale?o.makeColorScaleFuncFromTrace(e):l,f=g?function(e,t){return void 0===e[t]?i:s(m(e[t]))}:l,b=v?function(e,t){return void 0===e[t]?1:d(e[t])}:d,g||v)for(u=0;u<n;u++)j=f(c,u),p=b(t,u),h[u]=a(j,p);else h=a(s(c),t);return h},parseColorScale:function(e){var t=o.extractOpts(e),n=t.colorscale;return t.reversescale&&(n=o.flipScale(t.colorscale)),n.map(function(e){var n=e[0],t=h(e[1]).toRgb();return{index:n,rgb:[t.r,t.g,t.b,t.a]}})}}},71688:function(e,t,n){"use strict";var o=n(35536);function s(e){return[e]}e.exports={keyFun:function(e){return e.key},repeat:s,descend:o,wrap:s,unwrap:function(e){return e[0]}}},35536:function(e){"use strict";e.exports=function(e){return e}},1396:function(e){"use strict";e.exports=function(e,t){if(!t)return e;var o,a,n=1/Math.abs(t),s=n>1?(n*e+n*t)/n:e+t,i=String(s).length;return i>16&&(a=String(t).length,i>=String(e).length+a&&(o=parseFloat(s).toPrecision(12),-1===o.indexOf("e+")&&(s=+o))),s}},3400:function(e,t,n){"use strict";var o,i,a,r,c,l,d,u,h,m,f,g,v,j,y,_,w,x,C,E,S,M,F,z,D,N,L,R,P,B,p=n(33428),$=n(94336).E9,V=n(57624).E9,k=n(38248),T=n(39032),I=T.FP_SAFE,W=-I,H=T.BADNUM,s=e.exports={};s.adjustFormat=function(e){return!e||/^\d[.]\df/.test(e)||/[.]\d%/.test(e)?e:"0.f"===e?"~f":/^\d%/.test(e)?"~%":/^\ds/.test(e)?"~s":!/^[~,.0$]/.test(e)&&/[&fps]/.test(e)?"~"+e:e},w={},s.warnBadFormat=function(e){var t=String(e);w[t]||(w[t]=1,s.warn('encountered bad format: "'+t+'"'))},s.noFormat=function(e){return String(e)},s.numberFormat=function(e){var t;try{t=V(s.adjustFormat(e))}catch{return s.warnBadFormat(e),s.noFormat}return t},s.nestedProperty=n(22296),s.keyedContainer=n(37804),s.relativeAttr=n(23193),s.isPlainObject=n(63620),s.toLogRange=n(36896),s.relinkPrivateKeys=n(51528),l=n(38116),s.isArrayBuffer=l.isArrayBuffer,s.isTypedArray=l.isTypedArray,s.isArrayOrTypedArray=l.isArrayOrTypedArray,s.isArray1D=l.isArray1D,s.ensureArray=l.ensureArray,s.concat=l.concat,s.maxRowLength=l.maxRowLength,s.minRowLength=l.minRowLength,y=n(20435),s.mod=y.mod,s.modHalf=y.modHalf,c=n(63064),s.valObjectMeta=c.valObjectMeta,s.coerce=c.coerce,s.coerce2=c.coerce2,s.coerceFont=c.coerceFont,s.coercePattern=c.coercePattern,s.coerceHoverinfo=c.coerceHoverinfo,s.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,s.validate=c.validate,o=n(67555),s.dateTime2ms=o.dateTime2ms,s.isDateTime=o.isDateTime,s.ms2DateTime=o.ms2DateTime,s.ms2DateTimeLocal=o.ms2DateTimeLocal,s.cleanDate=o.cleanDate,s.isJSDate=o.isJSDate,s.formatDate=o.formatDate,s.incrementMonth=o.incrementMonth,s.dateTick0=o.dateTick0,s.dfltRange=o.dfltRange,s.findExactDates=o.findExactDates,s.MIN_MS=o.MIN_MS,s.MAX_MS=o.MAX_MS,u=n(14952),s.findBin=u.findBin,s.sorterAsc=u.sorterAsc,s.sorterDes=u.sorterDes,s.distinctVals=u.distinctVals,s.roundUp=u.roundUp,s.sort=u.sort,s.findIndexOfMin=u.findIndexOfMin,s.sortObjectKeys=n(95376),d=n(63084),s.aggNums=d.aggNums,s.len=d.len,s.mean=d.mean,s.median=d.median,s.midRange=d.midRange,s.variance=d.variance,s.stdev=d.stdev,s.interp=d.interp,i=n(52248),s.init2dArray=i.init2dArray,s.transposeRagged=i.transposeRagged,s.dot=i.dot,s.translationMatrix=i.translationMatrix,s.rotationMatrix=i.rotationMatrix,s.rotationXYMatrix=i.rotationXYMatrix,s.apply3DTransform=i.apply3DTransform,s.apply2DTransform=i.apply2DTransform,s.apply2DTransform2=i.apply2DTransform2,s.convertCssMatrix=i.convertCssMatrix,s.inverseTransformMatrix=i.inverseTransformMatrix,r=n(11864),s.deg2rad=r.deg2rad,s.rad2deg=r.rad2deg,s.angleDelta=r.angleDelta,s.angleDist=r.angleDist,s.isFullCircle=r.isFullCircle,s.isAngleInsideSector=r.isAngleInsideSector,s.isPtInsideSector=r.isPtInsideSector,s.pathArc=r.pathArc,s.pathSector=r.pathSector,s.pathAnnulus=r.pathAnnulus,m=n(98308),s.isLeftAnchor=m.isLeftAnchor,s.isCenterAnchor=m.isCenterAnchor,s.isRightAnchor=m.isRightAnchor,s.isTopAnchor=m.isTopAnchor,s.isMiddleAnchor=m.isMiddleAnchor,s.isBottomAnchor=m.isBottomAnchor,h=n(92348),s.segmentsIntersect=h.segmentsIntersect,s.segmentDistance=h.segmentDistance,s.getTextLocation=h.getTextLocation,s.clearLocationCache=h.clearLocationCache,s.getVisibleSegment=h.getVisibleSegment,s.findPointOnPath=h.findPointOnPath,g=n(92880),s.extendFlat=g.extendFlat,s.extendDeep=g.extendDeep,s.extendDeepAll=g.extendDeepAll,s.extendDeepNoArrays=g.extendDeepNoArrays,j=n(24248),s.log=j.log,s.warn=j.warn,s.error=j.error,N=n(53756),s.counterRegex=N.counter,v=n(91200),s.throttle=v.throttle,s.throttleDone=v.done,s.clearThrottle=v.clear,a=n(52200);function A(e){t={};for(s in e)for(var t,s,o=e[s],n=0;n<o.length;n++)t[o[n]]=+s;return t}s.getGraphDiv=a.getGraphDiv,s.isPlotDiv=a.isPlotDiv,s.removeElement=a.removeElement,s.addStyleRule=a.addStyleRule,s.addRelatedStyleRule=a.addRelatedStyleRule,s.deleteRelatedStyleRule=a.deleteRelatedStyleRule,s.getFullTransformMatrix=a.getFullTransformMatrix,s.getElementTransformMatrix=a.getElementTransformMatrix,s.getElementAndAncestors=a.getElementAndAncestors,s.equalDomRects=a.equalDomRects,s.clearResponsive=n(75352),s.preserveDrawingBuffer=n(34296),s.makeTraceGroups=n(30988),s._=n(98356),s.notifier=n(41792),s.filterUnique=n(68944),s.filterVisible=n(43880),s.pushUnique=n(52416),s.increment=n(1396),s.cleanNumber=n(54037),s.ensureNumber=function(e){return k(e)?(e=Number(e))>I||e<W?H:e:H},s.isIndex=function(e,t){return!(void 0!==t&&e>=t)&&k(e)&&e>=0&&e%1==0},s.noop=n(16628),s.identity=n(35536),s.repeat=function(e,t){for(var s=new Array(t),n=0;n<t;n++)s[n]=e;return s},s.swapAttrs=function(e,t,n,o){n||(n="x"),o||(o="y");for(i=0;i<t.length;i++){var i,a=t[i],r=s.nestedProperty(e,a.replace("?",n)),c=s.nestedProperty(e,a.replace("?",o)),l=r.get();r.set(c.get()),c.set(l)}},s.raiseToTop=function(e){e.parentNode.appendChild(e)},s.cancelTransition=function(e){return e.transition().duration(0)},s.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},s.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},s.simpleMap=function(e,t,n,s,o){for(var a=e.length,r=new Array(a),i=0;i<a;i++)r[i]=t(e[i],n,s,o);return r},s.randstr=function e(t,n,o,i){if(o||(o=16),void 0===n&&(n=24),n<=0)return"0";var r,l,d,u,c=Math.log(Math.pow(2,n))/Math.log(o),a="";for(r=2;c===1/0;r*=2)c=Math.log(Math.pow(2,n/r))/Math.log(o)*r;l=c-Math.floor(c);for(r=0;r<Math.floor(c);r++)a=Math.floor(Math.random()*o).toString(o)+a;return l&&(u=Math.pow(o,l),a=Math.floor(Math.random()*u).toString(o)+a),d=parseInt(a,o),t&&t[a]||d!==1/0&&d>=Math.pow(2,n)?i>10?(s.warn("randstr failed uniqueness"),a):e(t,n,o,(i||0)+1):a},s.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={optionList:[],_newoption:function(s){s[t]=e,n[s.name]=s,n.optionList.push(s)}};return n["_"+t]=e,n},s.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,s,i,r,a=e.length,o=2*a,c=2*t-1,l=new Array(c),d=new Array(a);for(s=0;s<c;s++)l[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t);for(s=0;s<a;s++){for(r=0,i=0;i<c;i++)(n=s+i+1-t)<-a?n-=o*Math.round(n/o):n>=o&&(n-=o*Math.floor(n/o)),n<0?n=-1-n:n>=a&&(n=o-1-n),r+=e[n]*l[i];d[s]=r}return d},s.syncOrAsync=function(e,t,n){function i(){return s.syncOrAsync(e,t,n)}for(var o;e.length;)if((o=(0,e.splice(0,1)[0])(t))&&o.then)return o.then(i);return n&&n(t)},s.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},s.noneOrAll=function(e,t,n){if(e){var s,o=!1,i=!0;for(s=0;s<n.length;s++)null!=e[n[s]]?o=!0:i=!1;if(o&&!i)for(s=0;s<n.length;s++)e[n[s]]=t[n[s]]}},s.mergeArray=function(e,t,n,o){if(r="function"==typeof o,s.isArrayOrTypedArray(e))for(var a,r,c=Math.min(e.length,t.length),i=0;i<c;i++)a=e[i],t[i][n]=r?o(a):a},s.mergeArrayCastPositive=function(e,t,n){return s.mergeArray(e,t,n,function(e){var t=+e;return isFinite(t)&&t>0?t:0})},s.fillArray=function(e,t,n,o){if(o=o||s.identity,s.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=o(e[i])},s.castOption=function(e,t,n,o){o=o||s.identity;var i=s.nestedProperty(e,n).get();return s.isArrayOrTypedArray(i)?o(Array.isArray(t)&&s.isArrayOrTypedArray(i[t[0]])?i[t[0]][t[1]]:i[t]):i},s.extractOption=function(e,t,n,o){if(n in e)return e[n];var i=s.nestedProperty(t,o).get();return Array.isArray(i)?void 0:i},s.tagSelected=function(e,t,n){var o,i,a,r,c,u,l=t.selectedpoints,d=t._indexToPoints;d&&(a=A(d));for(i=0;i<l.length;i++)o=l[i],(s.isIndex(o)||s.isArrayOrTypedArray(o)&&s.isIndex(o[0])&&s.isIndex(o[1]))&&(c=a?a[o]:o,r=n?n[c]:c,void 0!==(u=r)&&u<e.length&&(e[r].selected=1))},s.selIndices2selPoints=function(e){if(t=e.selectedpoints,n=e._indexToPoints,n){for(var t,n,i,a,c=A(n),r=[],o=0;o<t.length;o++)i=t[o],s.isIndex(i)&&(a=c[i],s.isIndex(a)&&r.push(a));return r}return t},s.getTargetArray=function(e,t){var o,n=t.target;return"string"==typeof n&&n?(o=s.nestedProperty(e,n).get(),!!s.isArrayOrTypedArray(o)&&o):!!s.isArrayOrTypedArray(n)&&n},s.minExtend=function e(t,n,o){r={},"object"!=typeof n&&(n={});var i,a,r,c,d="pieLike"===o?-1:3,l=Object.keys(t);for(c=0;c<l.length;c++)a=t[i=l[c]],"_"!==i.charAt(0)&&"function"!=typeof a&&("module"===i?r[i]=a:Array.isArray(a)?r[i]="colorscale"===i||-1===d?a.slice():a.slice(0,d):s.isTypedArray(a)?r[i]=-1===d?a.subarray():a.subarray(0,d):r[i]=a&&"object"==typeof a?e(t[i],n[i],o):a);for(l=Object.keys(n),c=0;c<l.length;c++)"object"==typeof(a=n[i=l[c]])&&i in r&&"object"==typeof r[i]||(r[i]=a);return r},s.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},s.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},s.isIE=function(){return void 0!==window.navigator.msSaveBlob},S=/Version\/[\d.]+.*Safari/,s.isSafari=function(){return S.test(window.navigator.userAgent)},M=/iPad|iPhone|iPod/,s.isIOS=function(){return M.test(window.navigator.userAgent)},F=/Firefox\/(\d+)\.\d+/,s.getFirefoxVersion=function(){var t,e=F.exec(window.navigator.userAgent);return e&&2===e.length&&(t=parseInt(e[1]),!isNaN(t))?t:null},s.isD3Selection=function(e){return e instanceof p.selection},s.ensureSingle=function(e,t,n,s){var o,i=e.select(t+(n?"."+n:""));return i.size()?i:(o=e.append(t),n&&o.classed(n,!0),s&&o.call(s),o)},s.ensureSingleById=function(e,t,n,s){var o,i=e.select(t+"#"+n);return i.size()?i:(o=e.append(t).attr("id",n),s&&o.call(s),o)},s.objectFromPath=function(e,t){for(var n,o=e.split("."),c=n={},s=0;s<o.length;s++){var i=o[s],a=null,r=o[s].match(/(.*)\[([0-9]+)\]/);r?(i=r[1],a=r[2],n=n[i]=[],s===o.length-1?n[a]=t:n[a]={},n=n[a]):(s===o.length-1?n[i]=t:n[i]={},n=n[i])}return c},E=/^([^[.]+)\.(.+)?/,z=/^([^.]+)\[([0-9]+)\](\.)?(.+)?/;function b(e){return"__"===e.slice(0,2)}s.expandObjectPaths=function(e){var t,n,o,i,a,r,c;if("object"==typeof e&&!Array.isArray(e))for(t in e)if(e.hasOwnProperty(t))if(o=t.match(E)){if(i=e[t],b(n=o[1]))continue;delete e[t],e[n]=s.extendDeepNoArrays(e[n]||{},s.objectFromPath(t,s.expandObjectPaths(i))[n])}else if(o=t.match(z)){if(i=e[t],b(n=o[1]))continue;if(a=parseInt(o[2]),delete e[t],e[n]=e[n]||[],"."===o[3])c=o[4],r=e[n][a]=e[n][a]||{},s.extendDeepNoArrays(r,s.objectFromPath(c,s.expandObjectPaths(i)));else{if(b(n))continue;e[n][a]=s.expandObjectPaths(i)}}else{if(b(t))continue;e[t]=s.expandObjectPaths(e[t])}return e},s.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var i=/(\d+)(\d{3})/,r=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],c=o.length>1?r+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;i.test(s);)s=s.replace(i,"$1"+a+"$2");return s+c},s.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:||][^}]*)?}/g,C=/^\w*$/,s.templateString=function(e,t){var n={};return e.replace(s.TEMPLATE_STRING_REGEX,function(e,o){var i;return C.test(o)?i=t[o]:(n[o]=n[o]||s.nestedProperty(t,o).get,i=n[o]()),s.isValidTextValue(i)?i:""})},L={max:10,count:0,name:"hovertemplate"},s.hovertemplateString=function(){return O.apply(L,arguments)},R={max:10,count:0,name:"texttemplate"},s.texttemplateString=function(){return O.apply(R,arguments)},P=/^(\S+)([*/])(-?\d+(\.\d+)?)$/,B={max:10,count:0,name:"texttemplate",parseMultDiv:!0},s.texttemplateStringForShapes=function(){return O.apply(B,arguments)},_=/^[:||]/;function O(e,t,n){var i,o=this,a=arguments;return t||(t={}),i={},e.replace(s.TEMPLATE_STRING_REGEX,function(e,r,c){var l,u,m,f,p,g,v,y,O,b="_xother"===r||"_yother"===r,h="_xother_"===r||"_yother_"===r,j="xother_"===r||"yother_"===r,w="xother"===r||"yother"===r||b||j||h,d=r;if((b||h)&&(d=d.substring(1)),(j||h)&&(d=d.substring(0,d.length-1)),v=null,p=null,o.parseMultDiv&&(m=function(e){var t=e.match(P);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}(d),d=m.key,v=m.op,p=m.number),w){if(void 0===(l=t[d]))return""}else for(g=3;g<a.length;g++)if(u=a[g]){if(u.hasOwnProperty(d)){l=u[d];break}if(C.test(d)||(l=s.nestedProperty(u,d).get(),(l=i[d]||s.nestedProperty(u,d).get())&&(i[d]=l)),void 0!==l)break}return void 0!==l&&("*"===v&&(l*=p),"/"===v&&(l/=p)),void 0===l&&o?(o.count<o.max&&(s.warn("Variable '"+d+"' in "+o.name+" could not be found!"),l=e),o.count===o.max&&s.warn("Too many "+o.name+" warnings - additional warnings will be suppressed"),o.count++,e):(c?(":"===c[0]&&(f=n?n.numberFormat:s.numberFormat,""!==l&&(l=f(c.replace(_,""))(l))),"|"===c[0])&&(f=n?n.timeFormat:$,O=s.dateTime2ms(l),l=s.formatDate(O,c.replace(_,""),!1,f)):(y=d+"Label",t.hasOwnProperty(y)&&(l=t[y])),w&&(l="("+l+")",(b||h)&&(l=" "+l),(j||h)&&(l+=" ")),l)})}s.subplotSort=function(e,t){for(var l=Math.min(e.length,t.length)+1,n=0,s=0,a=0;a<l;a++){var o=e.charCodeAt(a)||0,i=t.charCodeAt(a)||0,r=o>=48&&o<=57,c=i>=48&&i<=57;if(r&&(n=10*n+o-48),c&&(s=10*s+i-48),!r||!c){if(n!==s)return n-s;if(o!==i)return o-i}}return s-n},f=2e9,s.seedPseudoRandom=function(){f=2e9},s.pseudoRandom=function(){var e=f;return f=(69069*f+1)%4294967296,Math.abs(f-e)<429496729?s.pseudoRandom():f/4294967296},s.fillText=function(e,t,n){var o,i=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},a=s.extractOption(e,t,"htx","hovertext");return s.isValidTextValue(a)?i(a):(o=s.extractOption(e,t,"tx","text"),s.isValidTextValue(o)?i(o):void 0)},s.isValidTextValue=function(e){return e||0===e},s.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",s=0;s<t;s++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},s.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||"none"===t},s.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},s.strRotate=function(e){return e?"rotate("+e+")":""},s.strScale=function(e){return 1!==e?"scale("+e+")":""},s.getTextTransform=function(e){var a=e.noCenter,n=e.textX,i=e.textY,r=e.targetX,c=e.targetY,l=e.anchorX||0,d=e.anchorY||0,o=e.rotate,t=e.scale;return t?t>1&&(t=1):t=0,s.strTranslate(r-t*(n+l),c-t*(i+d))+s.strScale(t)+(o?"rotate("+o+(a?"":" "+n+" "+i)+")":"")},s.setTransormAndDisplay=function(e,t){e.attr("transform",s.getTextTransform(t)),e.style("display",t.scale?null:"none")},s.ensureUniformFontSize=function(e,t){var n=s.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},s.join2=function(e,t,n){var s=e.length;return s>1?e.slice(0,-1).join(t)+n+e[s-1]:e.join(t)},s.bigFont=function(e){return Math.round(1.2*e)},x=s.getFirefoxVersion(),D=null!==x&&x<86,s.getPositionFromD3Event=function(){return D?[p.event.layerX,p.event.layerY]:[p.event.offsetX,p.event.offsetY]}},63620:function(e){"use strict";e.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},37804:function(e,t,n){"use strict";var s=n(22296),o=/^\w*$/;e.exports=function(e,t,n,i){if(n=n||"name",i=i||"value",r={},t&&t.length?(h=s(e,t),a=h.get()):a=e,t=t||"",l={},a)for(c=0;c<a.length;c++)l[a[c][n]]=c;var a,r,c,l,h,u=o.test(i),d={set:function(e,t){var o,m,c=null===t?4:0;if(!a){if(!h||4===c)return;a=[],h.set(a)}if(o=l[e],void 0===o){if(4===c)return;c|=3,o=a.length,l[e]=o}else t!==(u?a[o][i]:s(a[o],i).get())&&(c|=2);return m=a[o]=a[o]||{},m[n]=e,u?m[i]=t:s(m,i).set(t),null!==t&&(c&=-5),r[o]=r[o]|c,d},get:function(e){if(a){var t=l[e];return void 0===t?void 0:u?a[t][i]:s(a[t],i).get()}},rename:function(e,t){var s=l[e];return void 0===s||(r[s]=1|r[s],l[t]=s,delete l[e],a[s][n]=t),d},remove:function(e){var o,t=l[e];if(void 0===t)return d;if(o=a[t],Object.keys(o).length>2)return r[t]=2|r[t],d.set(e,null);if(u){for(c=t;c<a.length;c++)r[c]=3|r[c];for(c=t;c<a.length;c++)l[a[c][n]]--;a.splice(t,1),delete l[e]}else s(o,i).set(null),r[t]=6|r[t];return d},constructUpdate:function(){for(var e,o,c={},d=Object.keys(r),l=0;l<d.length;l++)e=d[l],o=t+"["+e+"]",a[e]?(1&r[e]&&(c[o+"."+n]=a[e][n]),2&r[e]&&(c[o+"."+i]=u?4&r[e]?null:a[e][i]:4&r[e]?null:s(a[e],i).get())):c[o]=null;return c}};return d}},98356:function(e,t,n){"use strict";var s=n(24040);e.exports=function(e,t){for(var o,i,a,r,c,n=e._context.locale,l=0;l<2;l++){for(o=e._context.locales,i=0;i<2;i++){if(a=(o[n]||{}).dictionary,a&&(r=a[t],r))return r;o=s.localeRegistry}if(c=n.split("-")[0],c===n)break;n=c}return t}},24248:function(e,t,n){"use strict";var s=n(20556).dfltConfig,o=n(41792),i=e.exports={};i.log=function(){if(s.logging>1){var e,t,n=["LOG:"];for(e=0;e<arguments.length;e++)n.push(arguments[e]);console.trace.apply(console,n)}if(s.notifyOnLogging>1){t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);o(t.join("<br>"),"long")}},i.warn=function(){if(s.logging>0){var e,t,n=["WARN:"];for(e=0;e<arguments.length;e++)n.push(arguments[e]);console.trace.apply(console,n)}if(s.notifyOnLogging>0){t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);o(t.join("<br>"),"stick")}},i.error=function(){if(s.logging>0){var e,t,n=["ERROR:"];for(e=0;e<arguments.length;e++)n.push(arguments[e]);console.error.apply(console,n)}if(s.notifyOnLogging>0){t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);o(t.join("<br>"),"stick")}}},30988:function(e,t,n){"use strict";var s=n(33428);e.exports=function(e,t,n){var i,o=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});return o.exit().remove(),o.enter().append("g").attr("class",n),o.order(),i=e.classed("rangeplot")?"nodeRangePlot3":"node3",o.each(function(e){e[0][i]=s.select(this)}),o}},52248:function(e,t,n){"use strict";var s=n(36524);t.init2dArray=function(e,t){for(var s=new Array(e),n=0;n<e;n++)s[n]=new Array(t);return s},t.transposeRagged=function(e){var t,n,o,s=0,i=e.length;for(t=0;t<i;t++)s=Math.max(s,e[t].length);o=new Array(s);for(t=0;t<s;t++)for(o[t]=new Array(i),n=0;n<i;n++)o[t][n]=e[n][t];return o},t.dot=function(e,n){if(!e.length||!n.length||e.length!==n.length)return null;var s,o,i,a=e.length;if(e[0].length)for(o=new Array(a),s=0;s<a;s++)o[s]=t.dot(e[s],n);else if(n[0].length){i=t.transposeRagged(n);for(o=new Array(i.length),s=0;s<i.length;s++)o[s]=t.dot(e,i[s])}else for(o=0,s=0;s<a;s++)o+=e[s]*n[s];return o},t.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},t.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},t.rotationXYMatrix=function(e,n,s){return t.dot(t.dot(t.translationMatrix(n,s),t.rotationMatrix(e)),t.translationMatrix(-n,-s))},t.apply3DTransform=function(e){return function(){var n=arguments,s=1===arguments.length?n[0]:[n[0],n[1],n[2]||0];return t.dot(e,[s[0],s[1],s[2],1]).slice(0,3)}},t.apply2DTransform=function(e){return function(){var s,n=arguments;return 3===n.length&&(n=n[0]),s=1===arguments.length?n[0]:[n[0],n[1]],t.dot(e,[s[0],s[1],1]).slice(0,2)}},t.apply2DTransform2=function(e){var n=t.apply2DTransform(e);return function(e){return n(e.slice(0,2)).concat(n(e.slice(2,4)))}},t.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.inverseTransformMatrix=function(e){var t=[];return s.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},20435:function(e){"use strict";e.exports={mod:function(e,t){var n=e%t;return n<0?n+t:n},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},22296:function(e,t,n){"use strict";var r,i=n(38248),s=n(38116).isArrayOrTypedArray;function a(e,t){return function(){var o,i,r,c,l,n=e;for(i=0;i<t.length-1;i++){if(-1===(c=t[i])){for(l=!0,o=[],r=0;r<n.length;r++)o[r]=a(n[r],t.slice(i+1))(),o[r]!==o[0]&&(l=!1);return l?o[0]:o}if("number"==typeof c&&!s(n))return;if("object"!=typeof(n=n[c])||null===n)return}if("object"==typeof n&&null!==n&&null!==(o=n[t[i]]))return o}}e.exports=function(e,t){if(i(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";var n,o,r,l,s=t.split(".");for(n=0;n<s.length;n++)if("__"===String(s[n]).slice(0,2))throw"bad property string";for(n=0;n<s.length;){if(o=String(s[n]).match(/^([^[\]]*)((\[-?[0-9]*\])+)$/)){if(o[1])s[n]=o[1];else{if(0!==n)throw"bad property string";s.splice(0,1)}for(l=o[2].substr(1,o[2].length-2).split("]["),r=0;r<l.length;r++)n++,s.splice(n,0,Number(l[r]))}n++}return"object"!=typeof e?function(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}(e,t,s):{set:c(e,s,t),get:a(e,s),astr:t,parts:s,obj:e}},r=/(^|\.)args\[/;function o(e,t){return void 0===e||null===e&&!t.match(r)}function c(e,t,n){return function(i){var r,c,a=e,h="",f=[[e,h]],m=o(i,n);for(r=0;r<t.length-1;r++){if("number"==typeof(c=t[r])&&!s(a))throw"array index but container is not an array";if(-1===c){if(m=!u(a,t.slice(r+1),i,n))break;return}if(!l(a,c,t[r+1],m))break;if("object"!=typeof(a=a[c])||null===a)throw"container is not an object";h=d(h,c),f.push([a,h])}if(m){if(r===t.length-1&&(delete a[t[r]],Array.isArray(a)&&+t[r]==a.length-1))for(;a.length&&void 0===a[a.length-1];)a.pop()}else a[t[r]]=i}}function d(e,t){var n=t;return i(t)?n="["+t+"]":e&&(n="."+t),e+n}function u(e,t,n,i){var a,u=s(n),h=!0,m=n,r=i.replace("-1",0),d=!u&&o(n,r),f=t[0];for(a=0;a<e.length;a++)r=i.replace("-1",a),u&&(d=o(m=n[a%n.length],r)),d&&(h=!1),l(e,a,f,d)&&c(e[a],t,i.replace("-1",a))(m);return h}function l(e,t,n,s){if(void 0===e[t]){if(s)return!1;e[t]="number"==typeof n?[]:{}}return!0}},16628:function(e){"use strict";e.exports=function(){}},41792:function(e,t,n){"use strict";var o=n(33428),i=n(38248),s=[];e.exports=function(e,t){if(-1===s.indexOf(e)){s.push(e);var a,n=1e3;i(t)?n=t:"long"===t&&(n=3e3),a=o.select("body").selectAll(".plotly-notifier").data([0]),a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(s).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){s=o.select(this),s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(r)});for(var s,a=s.append("p"),c=e.split(/<br\s*\/?>/g),i=0;i<c.length;i++)i&&a.append("br"),a.append("span").text(c[i]);"stick"===t?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(n).call(r)})}function r(e){e.duration(700).style("opacity",0).each("end",function(e){var t=s.indexOf(e);-1!==t&&s.splice(t,1),o.select(this).remove()})}}},72213:function(e,t,n){"use strict";var o=n(93972),s="data-savedcursor";e.exports=function(e,t){if(n=e.attr(s),t){if(!n){for(var n,i,r=(e.attr("class")||"").split(" "),a=0;a<r.length;a++)i=r[a],0===i.indexOf("cursor-")&&e.attr(s,i.substr(7)).classed(i,!1);e.attr(s)||e.attr(s,"!!")}o(e,t)}else n&&(e.attr(s,null),"!!"===n?o(e):o(e,n))}},92065:function(e,t,n){"use strict";var i=n(52248).dot,s=n(39032).BADNUM,o=e.exports={};o.tester=function(e){var n,c,l,d,u,t=e.slice(),o=t[0][0],a=o,i=t[0][1],r=i;for(t[t.length-1][0]===t[0][0]&&t[t.length-1][1]===t[0][1]||t.push(t[0]),n=1;n<t.length;n++)o=Math.min(o,t[n][0]),a=Math.max(a,t[n][0]),i=Math.min(i,t[n][1]),r=Math.max(r,t[n][1]);c=!1,5===t.length&&(t[0][0]===t[1][0]?t[2][0]===t[3][0]&&t[0][1]===t[3][1]&&t[1][1]===t[2][1]&&(c=!0,l=function(e){return e[0]===t[0][0]}):t[0][1]===t[1][1]&&t[2][1]===t[3][1]&&t[0][0]===t[3][0]&&t[1][0]===t[2][0]&&(c=!0,l=function(e){return e[1]===t[0][1]})),d=!0,u=t[0];for(n=1;n<t.length;n++)if(u[0]!==t[n][0]||u[1]!==t[n][1]){d=!1;break}return{xmin:o,xmax:a,ymin:i,ymax:r,pts:t,contains:c?function(e,t){var n=e[0],c=e[1];return!(n===s||n<o||n>a||c===s||c<i||c>r||t&&l(e))}:function(e,n){if(c=e[0],l=e[1],c===s||c<o||c>a||l===s||l<i||l>r)return!1;var c,l,d,u,m,p,v,b=t.length,h=t[0][0],f=t[0][1],g=0;for(d=1;d<b;d++)if(u=h,m=f,h=t[d][0],f=t[d][1],!(c<(p=Math.min(u,h))||c>Math.max(u,h)||l>Math.max(m,f)))if(l<Math.min(m,f))c!==p&&g++;else{if(l===(v=h===u?l:m+(c-u)*(f-m)/(h-u)))return 1!==d||!n;l<=v&&c!==p&&g++}return g%2==1},isRect:c,degenerate:d}},o.isSegmentBent=function(e,t,n,s){var o,c,l,r=e[t],a=[e[n][0]-r[0],e[n][1]-r[1]],d=i(a,a),u=Math.sqrt(d),h=[-a[1]/u,a[0]/u];for(o=t+1;o<n;o++)if(c=[e[o][0]-r[0],e[o][1]-r[1]],(l=i(c,a))<0||l>d||Math.abs(i(c,h))>s)return!0;return!1},o.filter=function(e,t){var n=[e[0]],s=0,i=0;function a(a){e.push(a);var r,l=n.length,c=s;n.splice(i+1);for(r=c+1;r<e.length;r++)(r===e.length-1||o.isSegmentBent(e,c,r+1,t))&&(n.push(e[r]),n.length<l-2&&(s=r,i=n.length-1),c=r)}return e.length>1&&a(e.pop()),{addPt:a,raw:e,filtered:n}}},5048:function(e,t,n){"use strict";var s=n(16576),o=n(28624);e.exports=function(e,t,i){var r=e._fullLayout,a=!0;return r._glcanvas.each(function(s){if(s.regl)s.regl.preloadCachedCode(i);else if(!s.pick||r._has("parcoords")){try{s.regl=o({canvas:this,attributes:{antialias:!s.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||n.g.devicePixelRatio,extensions:t||[],cachedCode:i||{}})}catch{a=!1}s.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(t){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:t,layer:s.key})},!1)}}),a||s({container:r._glcontainer.node()}),a}},34296:function(e,t,n){"use strict";var s=n(38248),o=n(25928);e.exports=function(e){if("string"!=typeof(l=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;return"undefined"!=typeof navigator&&(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),e}()))return!0;if(a=o({ua:{headers:{"user-agent":l}},tablet:!0,featureDetect:!1}),!a)for(var t,i,a,c,l,r=l.split(" "),n=1;n<r.length;n++)if(-1!==r[n].indexOf("Safari"))for(i=n-1;i>-1;i--)if(c=r[i],"Version/"===c.substr(0,8)&&(t=c.substr(8).split(".")[0],s(t)&&(t=+t),t>=13))return!0;return a}},52416:function(e){"use strict";e.exports=function(e,t){if(t instanceof RegExp){for(var s=t.toString(),n=0;n<e.length;n++)if(e[n]instanceof RegExp&&e[n].toString()===s)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},94552:function(e,t,n){"use strict";var o=n(3400),i=n(20556).dfltConfig,s={add:function(e,t,n,s,o){var a,r;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},r=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(r,e.undoQueue.queue.length-r,a),e.undoQueue.index+=1):a=e.undoQueue.queue[r-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(n),a.redo.calls.push(s),a.redo.args.push(o)),e.undoQueue.queue.length>i.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,n=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,t=0;t<n.undo.calls.length;t++)s.plotDo(e,n.undo.calls[t],n.undo.args[t]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(n=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,t=0;t<n.redo.calls.length;t++)s.plotDo(e,n.redo.calls[t],n.redo.args[t]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}},plotDo:function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,i=[],s=0;s<t.length;s++)n=t[s],i[s]=n===e?n:"object"==typeof n?Array.isArray(n)?o.extendDeep([],n):o.extendDeepAll({},n):n;return i}(e,n),t.apply(null,n)}};e.exports=s},53756:function(e,t){"use strict";t.counter=function(e,t,n,s){var o=(t||"")+(n?"":"$"),i=!1===s?"":"^";return"xy"===e?new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+o):new RegExp(i+e+"([2-9]|[1-9][0-9]+)?"+o)}},23193:function(e){"use strict";var t=/^(.*)(\.[^.[\]]+|\[\d\])$/,n=/^[^.[\]]+$/;e.exports=function(e,s){for(;s;){var o=e.match(t);if(o)e=o[1];else{if(!e.match(n))throw new Error("bad relativeAttr call:"+[e,s]);e=""}if("^"!==s.charAt(0))break;s=s.slice(1)}return e&&"["!==s.charAt(0)?e+"."+s:e+s}},51528:function(e,t,n){"use strict";var o=n(38116).isArrayOrTypedArray,s=n(63620);e.exports=function e(t,n){for(c in n){var r,c,l,i=n[c],a=t[c];if(a!==i)if("_"===c.charAt(0)||"function"==typeof i){if(c in t)continue;t[c]=i}else if(o(i)&&o(a)&&s(i[0])){if("customdata"===c||"ids"===c)continue;for(l=Math.min(i.length,a.length),r=0;r<l;r++)a[r]!==i[r]&&s(i[r])&&s(a[r])&&e(a[r],i[r])}else s(i)&&s(a)&&(e(a,i),Object.keys(a).length||delete t[c])}}},14952:function(e,t,n){"use strict";var o=n(38248),i=n(24248),a=n(35536),r=n(39032).BADNUM,s=1e-9;function c(e,t){return e<t}function l(e,t){return e<=t}function d(e,t){return e>t}function u(e,t){return e>=t}t.findBin=function(e,t,n){if(o(t.start))return n?Math.ceil((e-t.start)/t.size-s)-1:Math.floor((e-t.start)/t.size+s);var h,f,r=0,a=t.length,p=0,m=a>1?(t[a-1]-t[0])/(a-1):1;for(f=m>=0?n?c:l:n?u:d,e+=m*s*(n?-1:1)*(m>=0?1:-1);r<a&&p++<100;)f(t[h=Math.floor((r+a)/2)],e)?r=h+1:a=h;return p>90&&i.log("Long binary search..."),r-1},t.sorterAsc=function(e,t){return e-t},t.sorterDes=function(e,t){return t-e},t.distinctVals=function(e){s=e.slice();for(s.sort(t.sorterAsc),n=s.length-1;n>-1&&s[n]===r;n--);for(var n,s,o,i,d,a=s[n]-s[0]||1,u=a/(n||1)/1e4,c=[],l=0;l<=n;l++)o=s[l],d=o-i,void 0===i?(c.push(o),i=o):d>u&&(a=Math.min(a,d),c.push(o),i=o);return{vals:c,minDiff:a}},t.roundUp=function(e,t,n){for(var o,s=0,i=t.length-1,a=0,r=n?0:1,c=n?1:0,l=n?Math.ceil:Math.floor;s<i&&a++<100;)t[o=l((s+i)/2)]<=e?s=o+r:i=o-c;return t[s]},t.sort=function(e,t){for(var o,i=0,s=0,n=1;n<e.length;n++)if(o=t(e[n],e[n-1]),o<0?i=1:o>0&&(s=1),i&&s)return e.sort(t);return s?e:e.reverse()},t.findIndexOfMin=function(e,t){t=t||a;for(var s,o,i=1/0,n=0;n<e.length;n++)s=t(e[n]),s<i&&(i=s,o=n);return o}},93972:function(e){"use strict";e.exports=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)}},16576:function(e,t,n){"use strict";var s=n(76308),o=function(){};e.exports=function(e){for(i in e)"function"==typeof e[i]&&(e[i]=o);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var n,i,t=document.createElement("div");return t.className="no-webgl",t.style.cursor="pointer",t.style.fontSize="24px",t.style.color=s.defaults[0],t.style.position="absolute",t.style.left=t.style.top="0px",t.style.width=t.style.height="100%",t.style["background-color"]=s.lightLine,t.style["z-index"]=30,n=document.createElement("p"),n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",t.appendChild(n),e.container.appendChild(t),e.container.style.background="#FFFFFF",e.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(e){"use strict";e.exports=function(e){return Object.keys(e).sort()}},63084:function(e,t,n){"use strict";var s=n(38248),o=n(38116).isArrayOrTypedArray;t.aggNums=function(e,n,i,a){var r,c;if((!a||a>i.length)&&(a=i.length),s(n)||(n=!1),o(i[0])){for(c=new Array(a),r=0;r<a;r++)c[r]=t.aggNums(e,n,i[r]);i=c}for(r=0;r<a;r++)s(n)?s(i[r])&&(n=e(+n,+i[r])):n=i[r];return n},t.len=function(e){return t.aggNums(function(e){return e+1},0,e)},t.mean=function(e,n){return n||(n=t.len(e)),t.aggNums(function(e,t){return e+t},0,e)/n},t.midRange=function(e){if(void 0!==e&&0!==e.length)return(t.aggNums(Math.max,null,e)+t.aggNums(Math.min,null,e))/2},t.variance=function(e,n,o){return n||(n=t.len(e)),s(o)||(o=t.mean(e,n)),t.aggNums(function(e,t){return e+Math.pow(t-o,2)},0,e)/n},t.stdev=function(e,n,s){return Math.sqrt(t.variance(e,n,s))},t.median=function(e){var n=e.slice().sort();return t.interp(n,.5)},t.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},43080:function(e,t,n){"use strict";var s=n(72160);e.exports=function(e){return e?s(e):[0,0,0,1]}},9188:function(e,t,n){"use strict";var i=n(2264),a=n(43616),o=n(3400),s=null;e.exports=function(){if(null!==s)return s;if(s=!1,n=o.isIE()||o.isSafari()||o.isIOS(),window.navigator.userAgent&&!n){var e,t,n,r=Array.from(i.CSS_DECLARATIONS).reverse(),c=window.CSS&&window.CSS.supports||window.supportsCSS;"function"==typeof c?s=r.some(function(e){return c.apply(null,e)}):(e=a.tester.append("image").attr("style",i.STYLE),t=window.getComputedStyle(e.node()).imageRendering,s=r.some(function(e){var n=e[1];return t===n||t===n.toLowerCase()}),e.remove())}return s}},72736:function(e,t,n){"use strict";var s=n(33428),i=n(3400),T=i.strTranslate,c=n(9616),S=n(84284).LINE_SPACING,C=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;t.convertToTspans=function(e,n,o){var m,b=e.text(),j=!e.attr("data-notex")&&n&&n._context.typesetMath&&"undefined"!=typeof MathJax&&b.match(C),g=s.select(e.node().parentNode);if(!g.empty())return m=e.attr("class")?e.attr("class").split(" ")[0]:"text",m+="-math",g.selectAll("svg."+m).remove(),g.selectAll("g."+m+"-group").remove(),e.style("display",null).attr({"data-unformatted":b,"data-math":"N"}),j?(n&&n._promises||[]).push(new Promise(function(t){e.style("display","none");var n=parseInt(e.node().style.fontSize,10),a={fontSize:n};!function(e,t,n){if(o=parseInt((MathJax.version||"").split(".")[0]),2===o||3===o){var o,a,r,c,l,d=function(){var a="math-output-"+i.randstr({},64),n=(c=s.select("body").append("div").attr({id:a}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(e.replace(k,"\\lt ").replace(A,"\\gt "))).node();return 2===o?MathJax.Hub.Typeset(n):MathJax.typeset([n])},u=function(){var r,l,t=c.select(2===o?".MathJax_SVG":".MathJax"),a=!t.empty()&&c.select("svg").node();a?(l=a.getBoundingClientRect(),r=2===o?s.select("body").select("#MathJax_SVG_glyphs"):t.select("defs"),n(t,r,l)):(i.log("There was an error in the tex syntax.",e),n()),c.remove()};2===o?MathJax.Hub.Queue(function(){return r=i.extendDeepAll({},MathJax.Hub.config),l=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:O},displayAlign:"left"})},function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},d,u,function(){if("SVG"!==a)return MathJax.Hub.setRenderer(a)},function(){return void 0!==l&&(MathJax.Hub.processSectionDelay=l),MathJax.Hub.Config(r)}):3===o&&(r=i.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=O,"svg"!==(a=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){d(),u(),"svg"!==a&&(MathJax.config.startup.output=a),MathJax.config=r}))}else i.warn("No MathJax version:",MathJax.version)}(j[2],a,function(s,i,a){if(g.selectAll("svg."+m).remove(),g.selectAll("g."+m+"-group").remove(),r=s&&s.select("svg"),!r||!r.node())return z(),void t();l=g.append("g").classed(m+"-group",!0).attr({"pointer-events":"none","data-unformatted":b,"data-math":"Y"}),l.node().appendChild(r.node()),i&&i.node()&&r.node().insertBefore(i.node().cloneNode(!0),r.node().firstChild),w=a.width,y=a.height,r.attr({class:m,height:y,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"}),j=e.node().style.fill||"black",v=r.select("g"),v.attr({fill:j,stroke:j});var r,l,v,j,y,_,w,p=v.node().getBoundingClientRect(),f=p.width,d=p.height;(f>w||d>y)&&(r.style("overflow","hidden"),f=(p=r.node().getBoundingClientRect()).width,d=p.height);var h=+e.attr("x"),c=+e.attr("y"),u=-(n||e.node().getBoundingClientRect().height)/4;"y"===m[0]?l.attr({transform:"rotate("+[-90,h,c]+")"+T(-f/2,u-d/2)}):"l"===m[0]?c=u-d/2:"a"===m[0]&&0!==m.indexOf("atitle")?(h=0,c=u):(_=e.attr("text-anchor"),h-=f*("middle"===_?.5:"end"===_?1:0),c=c+u-d/2),r.attr({x:h,y:c}),o&&o.call(e,l),t(l)})})):z(),e;function z(){g.empty()||(m=e.attr("class")+"-math",g.select("svg."+m).remove()),e.text("").style("white-space","pre");var n=function(e,t){t=t.replace(v," ");var n,H=!1,o=[],P=-1;function R(){P++;var i,a,t=document.createElementNS(c.svg,"tspan");if(s.select(t).attr({class:"line",dy:P*S+"em"}),e.appendChild(t),n=t,i=o,o=[{node:t}],i.length>1)for(a=1;a<i.length;a++)L(i[a])}function L(e){if(i=e.type,a={},"a"===i){d="a";var t,i,a,r,d,l=e.target,u=e.href,h=e.popup;u&&(a={"xlink:xlink:show":"_blank"===l||"_"!==l.charAt(0)?"new":"replace",target:l,"xlink:xlink:href":u},h&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+h+'");return false;'))}else d="tspan";e.style&&(a.style=e.style),t=document.createElementNS(c.svg,d),"sup"===i||"sub"===i?(z(n,p),n.appendChild(t),r=document.createElementNS(c.svg,"tspan"),z(r,p),s.select(r).attr("dy",M[i]),a.dy=F[i],n.appendChild(t),n.appendChild(r)):n.appendChild(t),s.select(t).attr(a),n=e.node=t,o.push(e)}function z(e,t){e.appendChild(document.createTextNode(t))}function I(e){if(1!==o.length){var s=o.pop();e!==s.type&&i.log("Start tag <"+s.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t),n=o[o.length-1].node}else i.log("Ignoring unexpected end tag </"+e+">.",t)}E.test(t)?R():(n=e,o=[{node:e}]);for(A=t.split(d),k=0;k<A.length;k++){var k,A,T,D,N=A[k],C=N.match(l),j=C&&C[2].toLowerCase(),b=h[j];if("br"===j)R();else if(void 0===b)z(n,r(N));else if(C[1])I(j);else{var O=C[4],g={type:j},m=a(O,_);(m?(m=m.replace(y,"$1 fill:"),b&&(m+=";"+b)):b&&(m=b),m&&(g.style=m),"a"===j)&&(H=!0,T=a(O,w),T&&(D=f(T),D&&(g.href=D,g.target=a(O,u)||"_blank",g.popup=a(O,x)))),L(g)}}return H}(e.node(),b);n&&e.style("pointer-events","all"),t.positionText(e),o&&o.call(e)}};var o,b,j,y,k=/(<|&lt;|&#60;)/g,A=/(>|&gt;|&#62;)/g,O=[["$","$"],["\\(","\\)"]],h={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},F={sub:"0.3em",sup:"-0.6em"},M={sub:"-0.21em",sup:"0.42em"},p="​",g=["http:","https:","mailto:","",void 0,":"],v=t.NEWLINES=/(\r\n?|\n)/g,d=/(<[^<>]*>)/,l=/<(\/?)([^ >]*)(\s+(.*))?>/i,E=/<br(\s+.*)?>/i;t.BR_TAG_ALL=/<br(\s+.*)?>/gi;var _=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,u=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,x=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function a(e,t){if(!e)return null;var n=e.match(t),s=n&&(n[3]||n[4]);return s&&r(s)}y=/(^|;)\s*color:/,t.plainText=function(e,t){for(var r,c,o=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,p=void 0!==t.allowedTags?t.allowedTags:["br"],m=e.split(d),s=[],i="",a=0,u=0;u<m.length;u++){var n=m[u],f=n.match(l),h=f&&f[2].toLowerCase();if(h)-1!==p.indexOf(h)&&(s.push(n),i=h);else{if(r=n.length,a+r<o)s.push(n),a+=r;else if(a<o){c=o-a,i&&("br"!==i||c<=3||r<=3)&&s.pop(),o>3?s.push(n.substr(0,c-3)+"..."):s.push(n.substr(0,c));break}i=""}}return s.join("")},j={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},b=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function r(e){return e.replace(b,function(e,t){return("#"===t.charAt(0)?function(e){if(!(e>1114111)){var t,n=String.fromCodePoint;return n?n(e):(t=String.fromCharCode,e<=65535?t(e):t(55232+(e>>10),e%1024+56320))}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):j[t])||e})}function f(e){var o,i,t=encodeURI(decodeURI(e)),n=document.createElement("a"),s=document.createElement("a");return n.href=e,s.href=t,o=n.protocol,i=s.protocol,-1!==g.indexOf(o)&&-1!==g.indexOf(i)?t:""}function m(e,t,n){var o,a,r,c=n.horizontalAlign,l=n.verticalAlign||"top",s=e.node().getBoundingClientRect(),d=t.node().getBoundingClientRect();return a="bottom"===l?function(){return s.bottom-o.height}:"middle"===l?function(){return s.top+(s.height-o.height)/2}:function(){return s.top},r="right"===c?function(){return s.right-o.width}:"center"===c?function(){return s.left+(s.width-o.width)/2}:function(){return s.left},function(){o=this.node().getBoundingClientRect();var c,e=r()-d.left,t=a()-d.top,s=n.gd||{};return n.gd&&(s._fullLayout._calcInverseTransform(s),c=i.apply3DTransform(s._fullLayout._invTransform)(e,t),e=c[0],t=c[1]),this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}t.convertEntities=r,t.sanitizeHTML=function(e){e=e.replace(v," ");for(var t,m,p,j,E=document.createElement("p"),o=E,g=[],C=e.split(d),c=0;c<C.length;c++){var x=C[c],n=x.match(l),i=n&&n[2].toLowerCase();if(i in h)if(n[1])g.length&&(o=g.pop());else{var b=n[4],O=a(b,_),y=O?{style:O}:{};"a"===i&&(j=a(b,w),j&&(m=f(j),m&&(y.href=m,p=a(b,u),p&&(y.target=p)))),t=document.createElement(i),o.appendChild(t),s.select(t).attr(y),o=t,g.push(t)}else o.appendChild(document.createTextNode(r(x)))}return E.innerHTML},t.lineCount=function(e){return e.selectAll("tspan.line").size()||1},t.positionText=function(e,t,n){return e.each(function(){e=s.select(this);function o(t,n){return void 0===n?null===(n=e.attr(t))&&(e.attr(t,0),n=0):e.attr(t,n),n}var e,i=o("x",t),a=o("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:i,y:a})})},o="1px ",t.makeTextShadow=function(e){return o+o+o+e+", -"+o+"-"+o+o+e+", "+o+"-"+o+o+e+", -"+o+o+o+e},t.makeEditable=function(e,t){var n=t.gd,i=t.delegate,o=s.dispatch("edit","input","cancel"),a=i||e;if(e.style({"pointer-events":i?"none":"all"}),1!==e.size())throw new Error("boo");function r(){i=s.select(n).select(".svg-container"),r=i.append("div"),l=e.node().style,d=parseFloat(l.fontSize||12),void 0===(u=t.text)&&(u=e.attr("data-unformatted")),r.classed("plugin-editable editable",!0).style({position:"absolute","font-family":l.fontFamily||"Arial","font-size":d,color:t.fill||l.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-d/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(m(e,i,t)).on("blur",function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var t,a,i=s.select(this).attr("class");(t=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&s.select(e.node().parentNode).select(t).style({opacity:0}),a=this.textContent,s.select(this).transition().duration(0).remove(),s.select(document).on("mouseup",null),o.edit.call(e,a)}).on("focus",function(){var e=this;n._editing=!0,s.select(document).on("mouseup",function(){if(s.event.target===e)return!1;document.activeElement===r.node()&&r.node().blur()})}).on("keyup",function(){27===s.event.which?(n._editing=!1,e.style({opacity:1}),s.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),o.cancel.call(e,this.textContent)):(o.input.call(e,this.textContent),s.select(this).call(m(e,i,t)))}).on("keydown",function(){13===s.event.which&&this.blur()}).call(c),e.style({opacity:0});var i,r,l,d,u,h,f=a.attr("class");(h=f?"."+f.split(" ")[0]+"-math-group":"[class*=-math-group]")&&s.select(e.node().parentNode).select(h).style({opacity:0})}function c(e){var t,n=e.node(),s=document.createRange();s.selectNodeContents(n),t=window.getSelection(),t.removeAllRanges(),t.addRange(s),n.focus()}return t.immediate?r():a.on("click",r),s.rebind(e,o,"on")}},91200:function(e,t){"use strict";var n={};function s(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}t.throttle=function(e,t,o){var r,i=n[e],a=Date.now();if(!i){for(r in n)n[r].ts<a-6e4&&delete n[r];i=n[e]={ts:0,timer:null}}function c(){o(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}s(i),a>i.ts+t?c():i.timer=setTimeout(function(){c(),i.timer=null},t)},t.done=function(e){var t=n[e];return t&&t.timer?new Promise(function(e){var n=t.onDone;t.onDone=function(){n&&n(),e(),t.onDone=null}}):Promise.resolve()},t.clear=function(e){if(e)s(n[e]),delete n[e];else for(var o in n)t.clear(o)}},36896:function(e,t,n){"use strict";var s=n(38248);e.exports=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return s(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n}},59972:function(e,t,n){"use strict";var s=e.exports={},o=n(79552).locationmodeToLayer,i=n(55712).NO;s.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")},s.getTopojsonPath=function(e,t){return e+t+".json"},s.getTopojsonFeatures=function(e,t){var n=o[e.locationmode],s=t.objects[n];return i(t,s).features}},11680:function(e){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(e){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(e,t,n){"use strict";var s=n(24040);e.exports=function(e){for(var t,n,i,a=s.layoutArrayContainers,r=s.layoutArrayRegexes,c=e.split("[")[0],o=0;o<r.length;o++)if((n=e.match(r[o]))&&0===n.index){t=n[0];break}return t||(t=a[a.indexOf(c)]),!!t&&(i=e.substr(t.length),i?!!(n=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""})}},67824:function(e,t,n){"use strict";var s=n(92880).extendFlat,u=n(63620),i={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},a={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},l=i.flags.slice().concat(["fullReplot"]),d=a.flags.slice().concat("layoutReplot");function r(e){for(var n={},t=0;t<e.length;t++)n[e[t]]=!1;return n}function o(e,t,n){var i,a,o=s({},e);for(i in o)a=o[i],u(a)&&(o[i]=c(a,t,0,i));return"from-root"===n&&(o.editType=t),o}function c(e,t,n,i){if(e.valType){var a,r=s({},e);if(r.editType=t,Array.isArray(e.items)){r.items=new Array(e.items.length);for(a=0;a<e.items.length;a++)r.items[a]=c(e.items[a],t)}return r}return o(e,t,"_"===i.charAt(0)?"nested":"from-root")}e.exports={traces:i,layout:a,traceFlags:function(){return r(l)},layoutFlags:function(){return r(d)},update:function(e,t){if(n=t.editType,n&&"none"!==n)for(var n,o=n.split("+"),s=0;s<o.length;s++)e[o[s]]=!0},overrideAll:o}},93404:function(e,t,n){"use strict";var h,b,u=n(38248),_=n(61784),f=n(24040),o=n(3400),c=n(7316),m=n(79811),i=n(76308),r=m.cleanId,y=m.getFromTrace,l=f.traceIs;function a(e,t){var n=e[t],s=t.charAt(0);n&&"paper"!==n&&(e[t]=r(n,s,!0))}function s(e){function t(t,n){var s=e[t],o=e.title&&e.title[n];s&&!o&&(e.title||(e.title={}),e.title[n]=e[t],delete e[t])}e&&("string"!=typeof e.title&&"number"!=typeof e.title||(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"))}function p(e){if(!o.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function j(e,t,n,s){if(n&&!s)return e;if(s&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var o,i=Math.min(e.length,t.length);for(o=0;o<i&&e.charAt(o)===t.charAt(o);o++);return e.substr(0,o).trim()}function v(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function d(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}t.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&o.log("Clearing previous rejected promises from queue."),e._promises=[]},t.cleanLayout=function(e){e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var n,l,u,h,m,f,p,g,b,j,y,C,k,S,x=(c.subplotsRegistry.cartesian||{}).attrRegex,O=(c.subplotsRegistry.polar||{}).attrRegex,M=(c.subplotsRegistry.ternary||{}).attrRegex,A=(c.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(e);for(l=0;l<E.length;l++)if(m=E[l],x&&x.test(m))n=e[m],n.anchor&&"free"!==n.anchor&&(n.anchor=r(n.anchor)),n.overlaying&&(n.overlaying=r(n.overlaying)),n.type||(n.isdate?n.type="date":n.islog?n.type="log":!1===n.isdate&&!1===n.islog&&(n.type="linear")),"withzero"!==n.autorange&&"tozero"!==n.autorange||(n.autorange=!0,n.rangemode="tozero"),n.insiderange&&delete n.range,delete n.islog,delete n.isdate,delete n.categories,d(n,"domain")&&delete n.domain,void 0!==n.autotick&&(void 0===n.tickmode&&(n.tickmode=n.autotick?"auto":"linear"),delete n.autotick),s(n);else if(O&&O.test(m))s(e[m].radialaxis);else if(M&&M.test(m))j=e[m],s(j.aaxis),s(j.baxis),s(j.caxis);else if(A&&A.test(m)){if(f=e[m],g=f.cameraposition,Array.isArray(g)&&4===g[0].length){var z=g[0],v=g[1],T=g[2],F=_([],z),w=[];for(p=0;p<3;++p)w[p]=v[p]+T*F[2+4*p];f.camera={eye:{x:w[0],y:w[1],z:w[2]},center:{x:v[0],y:v[1],z:v[2]},up:{x:0,y:0,z:1}},delete f.cameraposition}s(f.xaxis),s(f.yaxis),s(f.zaxis)}k=Array.isArray(e.annotations)?e.annotations.length:0;for(l=0;l<k;l++)h=e.annotations[l],o.isPlainObject(h)&&(h.ref&&("paper"===h.ref?(h.xref="paper",h.yref="paper"):"data"===h.ref&&(h.xref="x",h.yref="y"),delete h.ref),a(h,"xref"),a(h,"yref"));S=Array.isArray(e.shapes)?e.shapes.length:0;for(l=0;l<S;l++)y=e.shapes[l],o.isPlainObject(y)&&(a(y,"xref"),a(y,"yref"));C=Array.isArray(e.images)?e.images.length:0;for(l=0;l<C;l++)b=e.images[l],o.isPlainObject(b)&&(a(b,"xref"),a(b,"yref"));return u=e.legend,u&&(u.x>3?(u.x=1.02,u.xanchor="left"):u.x<-2&&(u.x=-.02,u.xanchor="right"),u.y>3?(u.y=1.02,u.yanchor="bottom"):u.y<-2&&(u.y=-.02,u.yanchor="top")),s(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),i.clean(e),e.template&&e.template.layout&&t.cleanLayout(e.template.layout),e},t.cleanData=function(e){for(g=0;g<e.length;g++){if(n=e[g],("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y)&&(S=i.defaults,C=n.error_y.color||(l(n,"bar")?i.defaultLine:S[g%S.length]),n.error_y.color=i.addOpacity(i.rgb(C),i.opacity(C)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!l(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",t.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&t.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=r(n.xaxis,"x")),n.yaxis&&(n.yaxis=r(n.yaxis,"y")),l(n,"gl3d")&&n.scene&&(n.scene=c.subplotsRegistry.gl3d.cleanId(n.scene)),!l(n,"pie-like")&&!l(n,"bar-like"))if(Array.isArray(n.textposition))for(u=0;u<n.textposition.length;u++)n.textposition[u]=v(n.textposition[u]);else n.textposition&&(n.textposition=v(n.textposition));if(w=f.getModule(n),w&&w.colorbar&&(x=w.colorbar.container,m=x?n[x]:n,m&&m.colorscale&&("YIGnBu"===m.colorscale&&(m.colorscale="YlGnBu"),"YIOrRd"===m.colorscale&&(m.colorscale="YlOrRd"))),"surface"===n.type&&o.isPlainObject(n.contours)){E=["x","y","z"];for(u=0;u<E.length;u++)h=n.contours[E[u]],o.isPlainObject(h)&&(h.highlightColor&&(h.highlightcolor=h.highlightColor,delete h.highlightColor),h.highlightWidth&&(h.highlightwidth=h.highlightWidth,delete h.highlightWidth))}if("candlestick"===n.type||"ohlc"===n.type){var n,a,u,h,m,g,b,y,w,x,C,E,k,A,S,M,T=!1!==(n.increasing||{}).showlegend,F=!1!==(n.decreasing||{}).showlegend,O=p(n.increasing),_=p(n.decreasing);!1!==O&&!1!==_?(k=j(O,_,T,F),k&&(n.name=k)):!O&&!_||n.name||(n.name=O||_)}if(Array.isArray(n.transforms)){A=n.transforms;for(u=0;u<A.length;u++)if(a=A[u],o.isPlainObject(a))switch(a.type){case"filter":a.filtersrc&&(a.target=a.filtersrc,delete a.filtersrc),a.calendar&&(a.valuecalendar||(a.valuecalendar=a.calendar),delete a.calendar);break;case"groupby":if(a.styles=a.styles||a.style,a.styles&&!Array.isArray(a.styles)){M=a.styles,y=Object.keys(M),a.styles=[];for(b=0;b<y.length;b++)a.styles.push({target:y[b],value:M[y[b]]})}}}d(n,"line")&&delete n.line,"marker"in n&&(d(n.marker,"line")&&delete n.marker.line,d(n,"marker")&&delete n.marker),i.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),s(n),n.colorbar&&s(n.colorbar),n.marker&&n.marker.colorbar&&s(n.marker.colorbar),n.line&&n.line.colorbar&&s(n.line.colorbar),n.aaxis&&s(n.aaxis),n.baxis&&s(n.baxis)}},t.swapXYData=function(e){if(o.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var t,n,s=e.error_y,i="copy_ystyle"in s?s.copy_ystyle:!(s.color||s.thickness||s.width);o.swapAttrs(e,["error_?.copy_ystyle"]),i&&o.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){n=e.hoverinfo.split("+");for(t=0;t<n.length;t++)"x"===n[t]?n[t]="y":"y"===n[t]&&(n[t]="x");e.hoverinfo=n.join("+")}},t.coerceTraceIndices=function(e,t){if(u(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var s=[],n=0;n<t.length;n++)o.isIndex(t[n],e.data.length)?s.push(t[n]):o.warn("trace index (",t[n],") is not a number or is out of bounds");return s}return t},t.manageArrayContainers=function(e,t,n){var c,l=e.obj,s=e.parts,i=s.length,a=s[i-1],r=u(a);r&&null===t?(c=s.slice(0,i-1).join("."),o.nestedProperty(l,c).get().splice(a,1)):r&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(t)):e.set(t)},h=/(\.[^[\].]+|\[[^[\].]+\])$/;function g(e){var t=e.search(h);if(t>0)return e.substr(0,t)}t.hasParent=function(e,t){for(var n=g(t);n;){if(n in e)return!0;n=g(n)}return!1},b=["x","y","z"],t.clearAxisTypes=function(e,t,n){for(a=0;a<t.length;a++)for(var s,i,a,r,l,d=e._fullData[a],c=0;c<3;c++)if(s=y(e,d,b[c]),s&&"log"!==s.type){if(i=s._name,r=s._id.substr(1),"scene"===r.substr(0,5)){if(void 0!==n[r])continue;i=r+"."+i}l=i+".type",void 0===n[i]&&void 0===n[l]&&o.nestedProperty(e.layout,l).set(null)}}},22448:function(e,t,n){"use strict";s=n(36424),t._doPlot=s._doPlot,t.newPlot=s.newPlot,t.restyle=s.restyle,t.relayout=s.relayout,t.redraw=s.redraw,t.update=s.update,t._guiRestyle=s._guiRestyle,t._guiRelayout=s._guiRelayout,t._guiUpdate=s._guiUpdate,t._storeDirectGUIEdit=s._storeDirectGUIEdit,t.react=s.react,t.extendTraces=s.extendTraces,t.prependTraces=s.prependTraces,t.addTraces=s.addTraces,t.deleteTraces=s.deleteTraces,t.moveTraces=s.moveTraces,t.purge=s.purge,t.addFrames=s.addFrames,t.deleteFrames=s.deleteFrames,t.animate=s.animate,t.setPlotConfig=s.setPlotConfig;var s,o,i=n(52200).getGraphDiv,a=n(4016).eraseActiveShape;t.deleteActiveShape=function(e){return a(i(e))},t.toImage=n(67024),t.validate=n(21480),t.downloadImage=n(39792),o=n(94828),t.makeTemplate=o.makeTemplate,t.validateTemplate=o.validateTemplate},17680:function(e,t,n){"use strict";var o,r,l=n(63620),i=n(16628),s=n(24248),c=n(14952).sorterAsc,a=n(24040);t.containerArrayMatch=n(69820),r=t.isAddVal=function(e){return"add"===e||l(e)},o=t.isRemoveVal=function(e){return null===e||"remove"===e},t.applyContainerArrayChanges=function(e,t,n,l,d){var g,v,m=t.astr,E=a.getComponentMethod(m,"supplyLayoutDefaults"),k=a.getComponentMethod(m,"draw"),F=a.getComponentMethod(m,"drawOne"),T=l.replot||l.recalc||E===i||k===i,z=e.layout,S=e._fullLayout;if(n[""]){if(Object.keys(n).length>1&&s.warn("Full array edits are incompatible with other edits",m),v=n[""][""],o(v))t.set(null);else{if(!Array.isArray(v))return s.warn("Unrecognized full array edit value",m,v),!0;t.set(v)}return!T&&(E(z,S),k(e),!0)}var u,h,p,b,y,O,A,D,_=Object.keys(n).map(Number).sort(c),M=t.get(),f=M||[],x=d(S,m).get(),w=[],j=-1,C=f.length;for(u=0;u<_.length;u++)if(O=n[h=_[u]],y=Object.keys(O),p=O[""],A=r(p),h<0||h>f.length-(A?0:1))s.warn("index out of range",m,h);else if(void 0!==p)y.length>1&&s.warn("Insertion & removal are incompatible with edits to the same index.",m,h),o(p)?w.push(h):A?("add"===p&&(p={}),f.splice(h,0,p),x&&x.splice(h,0,{})):s.warn("Unrecognized full object edit value",m,h,p),-1===j&&(j=h);else for(b=0;b<y.length;b++)D=m+"["+h+"].",d(f[h],y[b],D).set(O[y[b]]);for(u=w.length-1;u>=0;u--)f.splice(w[u],1),x&&x.splice(w[u],1);if(f.length?M||t.set(f):t.set(null),T)return!1;if(E(z,S),F!==i){if(-1===j)g=_;else{for(C=Math.max(f.length,C),g=[],u=0;u<_.length&&!((h=_[u])>=j);u++)g.push(h);for(u=j;u<C;u++)g.push(u)}for(u=0;u<g.length;u++)F(e,g[u])}else k(e);return!0}},36424:function(e,t,n){"use strict";var R,H,C=n(33428),ae=n(38248),Q=n(52264),s=n(3400),a=s.nestedProperty,S=n(95924),l=n(94552),d=n(24040),p=n(73060),o=n(7316),c=n(54460),ne=n(96312),J=n(94724),E=n(43616),ee=n(76308),te=n(42464).initInteractions,X=n(9616),re=n(22676).clearOutline,Y=n(20556).dfltConfig,w=n(17680),r=n(93404),i=n(39172),h=n(67824),Z=n(33816).AX_NAME_PATTERN,k=0;function m(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function U(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){s.error(e)}}function ie(e,t){U(e,ee.combine(t,"white"))}function P(e,t){if(e._context||(e._context=s.extendDeep({},Y),d=C.select("base"),e._context._baseUrl=d.size()&&d.attr("href")?window.location.href.split("#")[0]:""),n=e._context,t){for(a=Object.keys(t),o=0;o<a.length;o++)"editable"!==(i=a[o])&&"edits"!==i&&i in n&&("setBackground"===i&&"opaque"===t[i]?n[i]=ie:n[i]=t[i]);if(t.plot3dPixelRatio&&!n.plotGlPixelRatio&&(n.plotGlPixelRatio=n.plot3dPixelRatio),l=t.editable,void 0!==l)for(n.editable=l,a=Object.keys(n.edits),o=0;o<a.length;o++)n.edits[a[o]]=l;if(t.edits)for(a=Object.keys(t.edits),o=0;o<a.length;o++)(i=a[o])in n.edits&&(n.edits[i]=t.edits[i]);n._exportedPlot=t._exportedPlot}n.staticPlot&&(n.editable=!1,n.edits={},n.autosizable=!1,n.scrollZoom=!1,n.doubleClick=!1,n.showTips=!1,n.showLink=!1,n.displayModeBar=!1),"hover"!==n.displayModeBar||Q||(n.displayModeBar=!0),"transparent"!==n.setBackground&&"function"==typeof n.setBackground||(n.setBackground=U),n._hasZeroHeight=n._hasZeroHeight||0===e.clientHeight,n._hasZeroWidth=n._hasZeroWidth||0===e.clientWidth;var n,o,i,a,l,d,u,c=n.scrollZoom,r=n._scrollZoom={};if(!0===c)r.cartesian=1,r.gl3d=1,r.geo=1,r.mapbox=1;else if("string"==typeof c){u=c.split("+");for(o=0;o<u.length;o++)r[u[o]]=1}else!1!==c&&(r.gl3d=1,r.geo=1,r.mapbox=1)}function j(e,t){var n,s,i=t+1,o=[];for(n=0;n<e.length;n++)(s=e[n])<0?o.push(i+s):o.push(s);return o}function _(e,t,n){var s,o;for(o=0;o<t.length;o++){if((s=t[o])!==parseInt(s,10))throw new Error("all values in "+n+" must be integers");if(s>=e.data.length||s<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(s,o+1)>-1||s>=0&&t.indexOf(-e.data.length+s)>-1||s<0&&t.indexOf(e.data.length+s)>-1)throw new Error("each index in "+n+" must be unique.")}}function D(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),_(e,t,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&_(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function N(e,t,n,o,i){!function(e,t,n,o){var i,a=s.isPlainObject(o);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!s.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(i in _(e,n,"indices"),t){if(!Array.isArray(t[i])||t[i].length!==n.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(a&&(!(i in o)||!Array.isArray(o[i])||o[i].length!==t[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,o);for(var l=function(e,t,n,o){var i,r,c,l,d,u,m,f=s.isPlainObject(o),h=[];for(r in Array.isArray(n)||(n=[n]),n=j(n,e.data.length-1),t)for(i=0;i<n.length;i++){if(u=e.data[n[i]],d=(m=a(u,r)).get(),c=t[r][i],!s.isArrayOrTypedArray(c))throw new Error("attribute: "+r+" index: "+i+" must be an array");if(!s.isArrayOrTypedArray(d))throw new Error("cannot extend missing or non-array attribute: "+r);if(d.constructor!==c.constructor)throw new Error("cannot extend array with an array of a different type: "+r);l=f?o[r][i]:o,ae(l)||(l=-1),h.push({prop:m,target:d,insert:c,maxp:Math.floor(l)})}return h}(e,t,n,o),d={},u={},r=0;r<l.length;r++){var c=l[r].prop,m=l[r].maxp,h=i(l[r].target,l[r].insert,m);c.set(h[0]),Array.isArray(d[c.astr])||(d[c.astr]=[]),d[c.astr].push(h[1]),Array.isArray(u[c.astr])||(u[c.astr]=[]),u[c.astr].push(l[r].target.length)}return{update:d,maxPoints:u}}function L(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function b(e,n,a,c){if(e=s.getGraphDiv(e),r.clearPromiseQueue(e),f={},"string"==typeof n)f[n]=a;else{if(!s.isPlainObject(n))return s.warn("Restyle fail.",n,a,c),Promise.reject();f=s.extendFlat({},n),void 0===c&&(c=a)}Object.keys(f).length&&(e.changed=!0);var d,f,p,g=r.coerceTraceIndices(e,c),u=B(e,f,g),h=u.flags;return h.calc&&(e.calcdata=void 0),h.clearAxisTypes&&r.clearAxisTypes(e,g,{}),d=[],h.fullReplot?d.push(t._doPlot):(d.push(o.previousPromises),o.supplyDefaults(e),h.markerSize&&(o.doCalcdata(e),y(d)),h.style&&d.push(i.doTraceStyle),h.colorbars&&d.push(i.doColorBars),d.push(m)),d.push(o.rehover,o.redrag,o.reselect),l.add(e,b,[e,u.undoit,u.traces],b,[e,u.redoit,u.traces]),p=s.syncOrAsync(d,e),p&&p.then||(p=Promise.resolve()),p.then(function(){return e.emit("plotly_restyle",u.eventData),e})}function u(e){return void 0===e?null:e}function g(e,t){return t?function(t,n,s){var o=a(t,n),i=o.set;return o.set=function(t){x((s||"")+n,o.get(),t,e),i(t)},o}:a}function x(e,t,n,o){if(Array.isArray(t)||Array.isArray(n))for(var a,r=Array.isArray(t)?t:[],d=Array.isArray(n)?n:[],h=Math.max(r.length,d.length),i=0;i<h;i++)x(e+"["+i+"]",r[i],d[i],o);else if(s.isPlainObject(t)||s.isPlainObject(n)){var c=s.isPlainObject(t)?t:{},l=s.isPlainObject(n)?n:{},m=s.extendFlat({},c,l);for(a in m)x(e+"."+a,c[a],l[a],o)}else void 0===o[e]&&(o[e]=u(t))}function B(e,t,n){var i,l,m,f,v,b,_,w,O,C,k,D,L,R,P,H,U,Y,E=e._fullLayout,S=e._fullData,N=e.data,I=E._guiEditing,Q=g(E._preGUI,I),J=s.extendDeepAll({},t);V(t);var A,j=h.traceFlags(),X={},y={};function K(){return n.map(function(){})}function q(e){var t=c.id2name(e);-1===A.indexOf(t)&&A.push(t)}function Z(e){return"LAYOUT"+e+".autorange"}function ee(e){return"LAYOUT"+e+".range"}function W(e){for(var t=e;t<S.length;t++)if(S[t]._input===N[e])return S[t]}function x(s,o,i){if(Array.isArray(s))s.forEach(function(e){x(e,o,i)});else if(!(s in t)&&!r.hasParent(t,s)){if("LAYOUT"===s.substr(0,6))a=Q(e.layout,s.replace("LAYOUT",""));else{var a,c=n[i];a=g(E._tracePreGUI[W(c)._fullInput.uid],I)(N[c],s)}s in y||(y[s]=K()),void 0===y[s][i]&&(y[s][i]=u(a.get())),void 0!==o&&a.set(o)}}function ne(e){return function(t){return S[t][e]}}function te(e){return function(t,s){return!1===t?S[n[s]][e]:null}}for(i in t){if(r.hasParent(t,i))throw new Error("cannot set "+i+" and a parent attribute simultaneously");if(v=t[i],"autobinx"!==i&&"autobiny"!==i||(i=i.charAt(i.length-1)+"bins",v=Array.isArray(v)?v.map(te(i)):!1===v?n.map(ne(i)):null),X[i]=v,"LAYOUT"!==i.substr(0,6)){{for(y[i]=K(),m=0;m<n.length;m++)if(l=N[n[m]],w=W(n[m]),_=(b=g(E._tracePreGUI[w._fullInput.uid],I)(l,i)).get(),void 0!==(f=Array.isArray(v)?v[m%v.length]:v)){var F=b.parts[b.parts.length-1],M=i.substr(0,i.length-F.length-1),$=M?M+".":"",T=M?a(w,M).get():w;if((O=p.getTraceValObject(w,b.parts))&&O.impliedEdits&&null!==f)for(U in O.impliedEdits)x(s.relativeAttr(i,U),O.impliedEdits[U],m);else if("thicknessmode"!==F&&"lenmode"!==F||_===f||"fraction"!==f&&"pixels"!==f||!T)"type"===i&&("pie"===f!=("pie"===_)||"funnelarea"===f!=("funnelarea"===_))&&(L="x",H="y","bar"!==f&&"bar"!==_||"h"!==l.orientation||(L="y",H="x"),s.swapAttrs(l,["?","?src"],"labels",L),s.swapAttrs(l,["d?","?0"],"label",L),s.swapAttrs(l,["?","?src"],"values",H),"pie"===_||"funnelarea"===_?(a(l,"marker.color").set(a(l,"marker.colors").get()),E._pielayer.selectAll("g.trace").remove()):d.traceIs(l,"cartesian")&&a(l,"marker.colors").set(a(l,"marker.color").get()));else{var z=E._size,G=T.orient,B="top"===G||"bottom"===G;"thicknessmode"===F?(R=B?z.h:z.w,x($+"thickness",T.thickness*("fraction"===f?1/R:R),m)):(P=B?z.w:z.h,x($+"len",T.len*("fraction"===f?1/P:P),m))}if(y[i][m]=u(_),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(i)){if("orientation"===i){if(b.set(f),Y=l.x&&!l.y?"h":"v",(b.get()||Y)===w.orientation)continue}else"orientationaxes"===i&&(l.orientation={v:"h",h:"v"}[w.orientation]);r.swapXYData(l),j.calc=j.clearAxisTypes=!0}else-1!==o.dataArrayContainers.indexOf(b.parts[0])?(r.manageArrayContainers(b,f,y),j.calc=!0):(O?O.arrayOk&&!d.traceIs(w,"regl")&&(s.isArrayOrTypedArray(f)||s.isArrayOrTypedArray(_))?j.calc=!0:h.update(j,O):j.calc=!0,b.set(f))}if((-1!==["swapxyaxes","orientationaxes"].indexOf(i)&&c.swap(e,n),"orientationaxes"===i)&&(C=a(e.layout,"hovermode"),k=C.get(),"x"===k?C.set("y"):"y"===k?C.set("x"):"x unified"===k?C.set("y unified"):"y unified"===k&&C.set("x unified")),-1!==["orientation","type"].indexOf(i)){for(A=[],m=0;m<n.length;m++)D=N[n[m]],d.traceIs(D,"cartesian")&&(q(D.xaxis||"x"),q(D.yaxis||"y"));x(A.map(Z),!0,0),x(A.map(ee),[0,1],0)}}}else b=Q(e.layout,i.replace("LAYOUT","")),y[i]=[u(b.get())],b.set(Array.isArray(v)?v[0]:v),j.calc=!0}return(j.calc||j.plot)&&(j.fullReplot=!0),{flags:j,undoit:y,redoit:X,traces:n,eventData:s.extendDeepNoArrays([],[J,n])}}function V(e){var t,o,i,r=s.counterRegex("axis",".title",!1,!1),c=/colorbar\.title$/,a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],i=e[t],"title"!==t&&!r.test(t)&&!c.test(t)||"string"!=typeof i&&"number"!=typeof i?t.indexOf("titlefont")>-1&&-1===t.indexOf("grouptitlefont")?n(t,t.replace("titlefont","title.font")):t.indexOf("titleposition")>-1?n(t,t.replace("titleposition","title.position")):t.indexOf("titleside")>-1?n(t,t.replace("titleside","title.side")):t.indexOf("titleoffset")>-1&&n(t,t.replace("titleoffset","title.offset")):n(t,t.replace("title","title.text"));function n(t,n){e[n]=e[t],delete e[t]}}function f(e,t,n){if(e=s.getGraphDiv(e),r.clearPromiseQueue(e),d={},"string"==typeof t)d[t]=n;else{if(!s.isPlainObject(t))return s.warn("Relayout fail.",t,n),Promise.reject();d=s.extendFlat({},t)}Object.keys(d).length&&(e.changed=!0);var a,d,h,u=F(e,d),c=u.flags;return c.calc&&(e.calcdata=void 0),a=[o.previousPromises],c.layoutReplot?a.push(i.layoutReplot):Object.keys(d).length&&(W(e,c,u)||o.supplyDefaults(e),c.legend&&a.push(i.doLegend),c.layoutstyle&&a.push(i.layoutStyles),c.axrange&&y(a,u.rangesAltered),c.ticks&&a.push(i.doTicksRelayout),c.modebar&&a.push(i.doModeBar),c.camera&&a.push(i.doCamera),c.colorbars&&a.push(i.doColorBars),a.push(m)),a.push(o.rehover,o.redrag,o.reselect),l.add(e,f,[e,u.undoit],f,[e,u.redoit]),h=s.syncOrAsync(a,e),h&&h.then||(h=Promise.resolve(e)),h.then(function(){return e.emit("plotly_relayout",u.eventData),e})}function W(e,t,n){if(r=e._fullLayout,!t.axrange)return!1;for(h in t)if("axrange"!==h&&t[h])return!1;var o,i,a,r,l,d,u,h,m=function(e,t){return s.coerce(a,o,J,e,t)},f={};for(d in n.rangesAltered)if(l=c.id2name(d),a=e.layout[l],o=r[l],ne(a,o,m,f),o._matchGroup)for(u in o._matchGroup)u!==d&&(i=r[c.id2name(u)],i.autorange=o.autorange,i.range=o.range.slice(),i._input.range=o.range.slice());return!0}function y(e,t){var n=t?function(e){var n,o,i,s=[];for(o in t)if(n=c.getFromId(e,o),s.push(o),-1!==(n.ticklabelposition||"").indexOf("inside")&&n._anchorAxis&&s.push(n._anchorAxis._id),n._matchGroup)for(i in n._matchGroup)t[i]||s.push(i);return c.draw(e,s,{skipTitle:!0})}:function(e){return c.draw(e,"redraw")};e.push(re,i.doAutoRangeAndConstraints,n,i.drawData,i.finalDraw)}var K=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,q=/^[xyz]axis[0-9]*\.autorange$/,G=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function F(e,t){var l,m,j,y,_,O,x,A,T,z,N,R,P,B,U,Y,X,Q,H=e.layout,n=e._fullLayout,de=n._guiEditing,W=g(n._preGUI,de),S=Object.keys(t),J=c.list(e),he=s.extendDeepAll({},t),C={},ce,oe,re,le,se,ee;for(V(t),S=Object.keys(t),m=0;m<S.length;m++)if(0===S[m].indexOf("allaxes")){for(N=0;N<J.length;N++){var ne=J[N]._id.substr(1),ue=-1!==ne.indexOf("scene")?ne+".":"",ie=S[m].replace("allaxes",ue+J[N]._name);t[ie]||(t[ie]=t[S[m]])}delete t[S[m]]}var v=h.layoutFlags(),ae={},k={};function i(e,n){if(Array.isArray(e))e.forEach(function(e){i(e,n)});else if(!(e in t)&&!r.hasParent(t,e)){var s=W(H,e);e in k||(k[e]=u(s.get())),void 0!==n&&s.set(n)}}z={};function te(e){var t=c.name2id(e.split(".")[0]);return z[t]=1,t}for(l in t){if(r.hasParent(t,l))throw new Error("cannot set "+l+" and a parent attribute simultaneously");for(var b=W(H,l),o=t[l],M=b.parts.length-1;M>0&&"string"!=typeof b.parts[M];)M--;var F=b.parts[M],D=b.parts[M-1]+"."+F,f=b.parts.slice(0,M).join("."),I=a(e.layout,f).get(),E=a(n,f).get(),L=b.get();if(void 0!==o){if(ae[l]=o,k[l]="reverse"===F?o:u(L),_=p.getLayoutValObject(n,b.parts),_&&_.impliedEdits&&null!==o)for(ce in _.impliedEdits)i(s.relativeAttr(l,ce),_.impliedEdits[ce]);-1!==["width","height"].indexOf(l)?o?(i("autosize",null),X="height"===l?"width":"height",i(X,n[X])):n[l]=e._initialAutoSize[l]:"autosize"===l?(i("width",o?null:n.width),i("height",o?null:n.height)):D.match(K)?(te(D),a(n,f+"._inputRange").set(null)):D.match(q)?(te(D),a(n,f+"._inputRange").set(null),B=a(n,f).get(),B._inputDomain&&(B._input.domain=B._inputDomain.slice())):D.match(G)&&a(n,f+"._inputDomain").set(null),"type"===F?(j=I,R="linear"===E.type&&"log"===o,oe="log"===E.type&&"linear"===o,R||oe?(j&&j.range?E.autorange?R&&(j.range=j.range[1]>j.range[0]?[1,2]:[2,1]):(x=j.range[0],O=j.range[1],R?(x<=0&&O<=0&&i(f+".autorange",!0),x<=0?x=O/1e6:O<=0&&(O=x/1e6),i(f+".range[0]",Math.log(x)/Math.LN10),i(f+".range[1]",Math.log(O)/Math.LN10)):(i(f+".range[0]",Math.pow(10,x)),i(f+".range[1]",Math.pow(10,O)))):i(f+".autorange",!0),Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[b.parts[0]]&&"radialaxis"===b.parts[1]&&delete n[b.parts[0]]._subplot.viewInitial["radialaxis.range"],d.getComponentMethod("annotations","convertCoords")(e,E,o,i),d.getComponentMethod("images","convertCoords")(e,E,o,i)):(i(f+".autorange",!0),i(f+".range",null)),a(n,f+"._inputRange").set(null)):F.match(Z)&&(U=a(n,l).get(),A=(o||{}).type,A&&"-"!==A||(A="linear"),d.getComponentMethod("annotations","convertCoords")(e,U,A,i),d.getComponentMethod("images","convertCoords")(e,U,A,i)),T=w.containerArrayMatch(l),T?(y=T.array,m=T.index,Q=T.property,re=_||{editType:"calc"},""!==m&&""===Q&&(w.isAddVal(o)?k[l]=null:w.isRemoveVal(o)?k[l]=(a(H,y).get()||[])[m]:s.warn("unrecognized full object value",t)),h.update(v,re),C[y]||(C[y]={}),P=C[y][m],P||(P=C[y][m]={}),P[Q]=o,delete t[l]):"reverse"===F?(I.range?I.range.reverse():(i(f+".autorange",!0),I.range=[1,0]),E.autorange?v.calc=!0:v.plot=!0):("dragmode"===l&&(!1===o&&!1!==L||!1!==o&&!1===L)||n._has("scatter-like")&&n._has("regl")&&"dragmode"===l&&("lasso"===o||"select"===o)&&"lasso"!==L&&"select"!==L||n._has("gl2d")?v.plot=!0:_?h.update(v,_):v.calc=!0,b.set(o))}}for(y in C)w.applyContainerArrayChanges(e,W(H,y),C[y],v,W)||(v.plot=!0);for(le in z)if(Y=(j=c.getFromId(e,le))&&j._constraintGroup,Y)for(se in v.calc=!0,Y)z[se]||(c.getFromId(e,se)._constraintShrinkable=!0);($(e)||t.height||t.width)&&(v.plot=!0),ee=n.shapes;for(m=0;m<ee.length;m++)if(ee[m].showlegend){v.calc=!0;break}return(v.plot||v.calc)&&(v.layoutReplot=!0),{flags:v,rangesAltered:z,undoit:k,redoit:ae,eventData:he}}function $(e){var t=e._fullLayout,n=t.width,s=t.height;return e.layout.autosize&&o.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==s}function v(e,n,a,c){e=s.getGraphDiv(e),r.clearPromiseQueue(e),s.isPlainObject(n)||(n={}),s.isPlainObject(a)||(a={}),Object.keys(n).length&&(e.changed=!0),Object.keys(a).length&&(e.changed=!0);var d,p,b=r.coerceTraceIndices(e,c),h=B(e,s.extendFlat({},n),b),g=h.flags,f=F(e,s.extendFlat({},a)),u=f.flags;return(g.calc||u.calc)&&(e.calcdata=void 0),g.clearAxisTypes&&r.clearAxisTypes(e,b,a),d=[],u.layoutReplot?d.push(i.layoutReplot):g.fullReplot?d.push(t._doPlot):(d.push(o.previousPromises),W(e,u,f)||o.supplyDefaults(e),g.style&&d.push(i.doTraceStyle),(g.colorbars||u.colorbars)&&d.push(i.doColorBars),u.legend&&d.push(i.doLegend),u.layoutstyle&&d.push(i.layoutStyles),u.axrange&&y(d,f.rangesAltered),u.ticks&&d.push(i.doTicksRelayout),u.modebar&&d.push(i.doModeBar),u.camera&&d.push(i.doCamera),d.push(m)),d.push(o.rehover,o.redrag,o.reselect),l.add(e,v,[e,h.undoit,f.undoit,h.traces],v,[e,h.redoit,f.redoit,h.traces]),p=s.syncOrAsync(d,e),p&&p.then||(p=Promise.resolve(e)),p.then(function(){return e.emit("plotly_update",{data:h.eventData,layout:f.eventData}),e})}function M(e){return function(t){t._fullLayout._guiEditing=!0;var n=e.apply(null,arguments);return t._fullLayout._guiEditing=!1,n}}H=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],R=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function z(e,t){for(n=0;n<t.length;n++){var n,s,o=t[n],i=e.match(o.pattern);if(i)return s=i[1]||"",{head:s,tail:e.substr(s.length+1),attr:o.attr}}}function T(e,t){var n,s=a(t,e).get();if(void 0!==s)return s;n=e.split(".");for(n.pop();n.length>1;)if(n.pop(),void 0!==(s=a(t,n.join(".")+".uirevision").get()))return s;return t.uirevision}function se(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}function oe(e,t,n){for(var s=0;s<t.length;s++)if(t[s].uid===e)return s;return!t[n]||t[n].uid?-1:n}function I(e,t){var n=s.isPlainObject(e),o=Array.isArray(e);return n||o?(n&&s.isPlainObject(t)||o&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function O(e,t,n,o){var i,d,g,v,j,_,w,x,S=o.getValObject,r=o.flags,E=o.immutable,y=o.inArray,z=o.arrayIndex;function m(){var e=d.editType;y&&-1!==e.indexOf("arraydraw")?s.pushUnique(r.arrays[y],z):(h.update(r,d),"none"!==e&&r.nChanges++,o.transition&&d.anim&&r.nChangesAnim++,(K.test(g)||q.test(g))&&(r.rangesAltered[n[0]]=1),G.test(g)&&a(t,"_inputDomain").set(null),"datarevision"===i&&(r.newDataRevision=1))}function M(e){return"data_array"===e.valType||e.arrayOk}for(i in e){if(r.calc&&!o.transition)return;var l=e[i],u=t[i],p=n.concat(i);if(g=p.join("."),"_"!==i.charAt(0)&&"function"!=typeof l&&l!==u){if(("tick0"===i||"dtick"===i)&&"geo"!==n[0]&&(j=t.tickmode,"auto"===j||"array"===j||!j))continue;if(("range"!==i||!t.autorange)&&("zmin"!==i&&"zmax"!==i||"contourcarpet"!==t.type)&&(d=S(p))&&(!d._compareAsJSON||JSON.stringify(l)!==JSON.stringify(u))){var c,T=d.valType,k=M(d),f=Array.isArray(l),b=Array.isArray(u);if(f&&b){var C="_input_"+i,A=e[C],F=t[C];if(Array.isArray(A)&&A===F)continue}if(void 0===u)k&&f?r.calc=!0:m();else if(d._isLinkedToArray){{if(_=[],w=!1,y||(r.arrays[i]=_),v=Math.min(l.length,u.length),x=Math.max(l.length,u.length),v!==x){if("arraydraw"!==d.editType){m();continue}w=!0}for(c=0;c<v;c++)O(l[c],u[c],p.concat(c),s.extendFlat({inArray:i,arrayIndex:c},o));if(w)for(c=v;c<x;c++)_.push(c)}}else!T&&s.isPlainObject(l)?O(l,u,p,o):k?f&&b?(E&&(r.calc=!0),(E||o.newDataRevision)&&m()):f!==b?r.calc=!0:m():f&&b&&l.length===u.length&&String(l)===String(u)||m()}}}for(i in t)if(!(i in e)&&"_"!==i.charAt(0)&&"function"!=typeof t[i]){if(M(d=S(n.concat(i)))&&Array.isArray(t[i]))return void(r.calc=!0);m()}}function A(e,t){for(a in e)if("_"!==a.charAt(0)){var o,a,n=e[a],i=t[a];if(n!==i)if(s.isPlainObject(n)&&s.isPlainObject(i)){if(A(n,i))return!0}else{if(!Array.isArray(n)||!Array.isArray(i))return!0;if(n.length!==i.length)return!0;for(o=0;o<n.length;o++)if(n[o]!==i[o]){if(!s.isPlainObject(n[o])||!s.isPlainObject(i[o]))return!0;if(A(n[o],i[o]))return!0}}}}function ce(e){var t,n=e._fullLayout,o=e.getBoundingClientRect();s.equalDomRects(o,n._lastBBox)||(t=n._invTransform=s.inverseTransformMatrix(s.getFullTransformMatrix(e)),n._invScaleX=Math.sqrt(t[0][0]*t[0][0]+t[0][1]*t[0][1]+t[0][2]*t[0][2]),n._invScaleY=Math.sqrt(t[1][0]*t[1][0]+t[1][1]*t[1][1]+t[1][2]*t[1][2]),n._lastBBox=o)}t.animate=function(e,t,n){if(e=s.getGraphDiv(e),!s.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");i=e._transitionData,i._frameQueue||(i._frameQueue=[]);var i,a=(n=o.supplyAnimationDefaults(n)).transition,c=n.frame;function l(e){return Array.isArray(a)?e>=a.length?a[0]:a[e]:a}function d(e){return Array.isArray(c)?e>=c.length?c[0]:c[e]:c}function u(e,t){var n=0;return function(){if(e&&++n===t)return e()}}return void 0===i._frameWaitingCnt&&(i._frameWaitingCnt=0),new Promise(function(c,h){function x(){e.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var t=function(){i._animationRaf=window.requestAnimationFrame(t),Date.now()-i._lastFrameAt>i._timeToNext&&function(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var n,t=i._currentFrame=i._frameQueue.shift();t?(n=t.name?t.name.toString():null,e._fullLayout._currentFrame=n,i._lastFrameAt=Date.now(),i._timeToNext=t.frameOpts.duration,o.transition(e,t.frame.data,t.frame.layout,r.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){t.onComplete&&t.onComplete()}),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})):(e.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null)}()};t()}b=0;function j(e){return Array.isArray(a)?b>=a.length?e.transitionOpts=a[b]:e.transitionOpts=a[0]:e.transitionOpts=a,b++,e}var m,p,g,v,b,_,w,f=[],y=t==null,O=Array.isArray(t);if(y||O||!s.isPlainObject(t)){if(y||-1!==["string","number"].indexOf(typeof t))for(m=0;m<i._frames.length;m++)(p=i._frames[m])&&(y||String(p.group)===String(t))&&f.push({type:"byname",name:String(p.name),data:j({name:p.name})});else if(O)for(m=0;m<t.length;m++)g=t[m],-1!==["number","string"].indexOf(typeof g)?(g=String(g),f.push({type:"byname",name:g,data:j({name:g})})):s.isPlainObject(g)&&f.push({type:"object",data:j(s.extendFlat({},g))})}else f.push({type:"object",data:j(s.extendFlat({},t))});for(m=0;m<f.length;m++)if("byname"===(p=f[m]).type&&!i._frameHash[p.data.name])return s.warn('animate failure: frame not found: "'+p.data.name+'"'),void h();if(-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==i._frameQueue.length){for(;i._frameQueue.length;){var t=i._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&f.reverse(),_=e._fullLayout._currentFrame,_&&n.fromcurrent){v=-1;for(m=0;m<f.length;m++)if("byname"===(p=f[m]).type&&p.name===_){v=m;break}if(v>0&&v<f.length-1){w=[];for(m=0;m<f.length;m++)p=f[m],("byname"!==f[m].type||m>v)&&w.push(p);f=w}}f.length>0?function(t){if(0!==t.length){for(s=0;s<t.length;s++){var s,a,m="byname"===t[s].type?o.computeFrame(e,t[s].name):t[s].data,f=d(s),r=l(s);r.duration=Math.min(r.duration,f.duration),a={frame:m,name:t[s].name,frameOpts:f,transitionOpts:r},s===t.length-1&&(a.onComplete=u(c,2),a.onInterrupt=h),i._frameQueue.push(a)}"immediate"===n.mode&&(i._lastFrameAt=-1/0),i._animationRaf||x()}}(f):(e.emit("plotly_animated"),c())})},t.addFrames=function(e,t,n){if(e=s.getGraphDiv(e),t==null)return Promise.resolve();if(!s.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");if(d=e._transitionData._frames,c=e._transitionData._frameHash,!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var y=d.length+2*t.length,h=[],m={};for(i=t.length-1;i>=0;i--)if(s.isPlainObject(t[i])){var i,a,r,c,d,v,f=t[i].name,u=(c[f]||m[f]||{}).name,b=t[i].name,_=c[u]||m[u];u&&b&&"number"==typeof b&&_&&k<5&&(k++,s.warn('addFrames: overwriting frame "'+(c[u]||m[u]).name+'" with a frame whose name of type "number" also equates to "'+u+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===k&&s.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),m[f]={name:f},h.push({frame:o.supplyFrameDefaults(t[i]),index:n&&void 0!==n[i]&&null!==n[i]?n[i]:y+i})}h.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var p=[],g=[],j=d.length;for(i=h.length-1;i>=0;i--){if("number"==typeof(a=h[i].frame).name&&s.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;c[a.name="frame "+e._transitionData._counter++];);if(c[a.name]){for(r=0;r<d.length&&(d[r]||{}).name!==a.name;r++);p.push({type:"replace",index:r,value:a}),g.unshift({type:"replace",index:r,value:d[r]})}else v=Math.max(0,Math.min(h[i].index,j)),p.push({type:"insert",index:v,value:a}),g.unshift({type:"delete",index:v}),j++}var w=o.modifyFrames,O=o.modifyFrames,x=[e,g],C=[e,p];return l&&l.add(e,w,x,O,C),o.modifyFrames(e,p)},t.deleteFrames=function(e,t){if(e=s.getGraphDiv(e),!s.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,i,r=e._transitionData._frames,a=[],c=[];if(!t)for(t=[],n=0;n<r.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;n>=0;n--)i=t[n],a.push({type:"delete",index:i}),c.unshift({type:"insert",index:i,value:r[i]});var d=o.modifyFrames,u=o.modifyFrames,h=[e,c],m=[e,a];return l&&l.add(e,d,h,u,m),o.modifyFrames(e,a)},t.addTraces=function e(n,o,i){n=s.getGraphDiv(n);var a,c,d=[],u=t.deleteTraces,h=e,m=[n,d],f=[n,o];for(function(e,t,n){var s,o;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),s=0;s<t.length;s++)if("object"!=typeof(o=t[s])||Array.isArray(o)||null===o)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(n,o,i),Array.isArray(o)||(o=[o]),o=o.map(function(e){return s.extendFlat({},e)}),r.cleanData(o),a=0;a<o.length;a++)n.data.push(o[a]);for(a=0;a<o.length;a++)d.push(-o.length+a);if(void 0===i)return c=t.redraw(n),l.add(n,u,m,h,f),c;Array.isArray(i)||(i=[i]);try{D(n,d,i)}catch(e){throw n.data.splice(n.data.length-o.length,o.length),e}return l.startSequence(n),l.add(n,u,m,h,f),c=t.moveTraces(n,d,i),l.stopSequence(n),c},t.deleteTraces=function e(n,o){n=s.getGraphDiv(n);var i,a,c,r=[],d=t.addTraces,u=e,h=[n,r,o],m=[n,o];if(void 0===o)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(o)||(o=[o]),_(n,o,"indices"),(o=j(o,n.data.length-1)).sort(s.sorterDes),i=0;i<o.length;i+=1)a=n.data.splice(o[i],1)[0],r.push(a);return c=t.redraw(n),l.add(n,d,h,u,m),c},t.extendTraces=function e(n,o,i,a){var r=N(n=s.getGraphDiv(n),o,i,a,function(e,t,n){if(s.isTypedArray(e))if(n<0){var o,i,a,r,c,l=new e.constructor(0),d=L(e,t);n<0?(o=d,i=l):(o=l,i=d)}else o=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),i.set(e)):n<t.length?(a=t.length-n,o.set(t.subarray(a)),i.set(e),i.set(t.subarray(0,a),e.length)):(r=n-t.length,c=e.length-r,o.set(e.subarray(c)),o.set(t,r),i.set(e.subarray(0,c)));else o=e.concat(t),i=n>=0&&n<o.length?o.splice(0,o.length-n):[];return[o,i]}),c=t.redraw(n),d=[n,r.update,i,r.maxPoints];return l.add(n,t.prependTraces,d,e,arguments),c},t.moveTraces=function e(n,o,i){var a,d,c=[],r=[],u=e,h=e,m=[n=s.getGraphDiv(n),i,o],f=[n,o,i];if(D(n,o,i),o=Array.isArray(o)?o:[o],void 0===i)for(i=[],a=0;a<o.length;a++)i.push(-o.length+a);for(i=Array.isArray(i)?i:[i],o=j(o,n.data.length-1),i=j(i,n.data.length-1),a=0;a<n.data.length;a++)-1===o.indexOf(a)&&c.push(n.data[a]);for(a=0;a<o.length;a++)r.push({newIndex:i[a],trace:n.data[o[a]]});for(r.sort(function(e,t){return e.newIndex-t.newIndex}),a=0;a<r.length;a+=1)c.splice(r[a].newIndex,0,r[a].trace);return n.data=c,d=t.redraw(n),l.add(n,u,m,h,f),d},t.prependTraces=function e(n,o,i,a){var r=N(n=s.getGraphDiv(n),o,i,a,function(e,t,n){if(s.isTypedArray(e))if(n<=0){var o,i,a,r,c=new e.constructor(0),l=L(t,e);n<0?(o=l,i=c):(o=c,i=l)}else o=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),i.set(e)):n<t.length?(a=t.length-n,o.set(t.subarray(0,a)),i.set(t.subarray(a)),i.set(e,a)):(r=n-t.length,o.set(t),o.set(e.subarray(0,r),t.length),i.set(e.subarray(r)));else o=t.concat(e),i=n>=0&&n<o.length?o.splice(n,o.length):[];return[o,i]}),c=t.redraw(n),d=[n,r.update,i,r.maxPoints];return l.add(n,t.extendTraces,d,e,arguments),c},t.newPlot=function(e,n,i,a){return e=s.getGraphDiv(e),o.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),o.purge(e),t._doPlot(e,n,i,a)},t._doPlot=function(e,n,a,l){if((e=s.getGraphDiv(e),S.init(e),s.isPlainObject(n))&&(v=n,n=v.data,a=v.layout,l=v.config,_=v.frames),!1===S.triggerHandler(e,"plotly_beforeplot",[n,a,l]))return Promise.reject();n||a||s.isPlotDiv(e)||s.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e),P(e,l),a||(a={}),C.select(e).classed("js-plotly-plot",!0),E.makeTester(),Array.isArray(e._promises)||(e._promises=[]),h=0===(e.data||[]).length&&Array.isArray(n),Array.isArray(n)&&(r.cleanData(n),h?e.data=n:e.data.push.apply(e.data,n),e.empty=!1),e.layout&&!h||(e.layout=r.cleanLayout(a)),o.supplyDefaults(e);var h,p,g,v,b,j,y,_,w,u=e._fullLayout,k=u._has("cartesian");u._replotting=!0,(h||u._shouldCreateBgLayer)&&(function(e){var n,o,i,a=C.select(e),t=e._fullLayout;(t._calcInverseTransform=ce,t._calcInverseTransform(e),t._container=a.selectAll(".plot-container").data([0]),t._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),t._paperdiv=t._container.selectAll(".svg-container").data([0]),t._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),t._glcontainer=t._paperdiv.selectAll(".gl-container").data([{}]),t._glcontainer.enter().append("div").classed("gl-container",!0),t._paperdiv.selectAll(".main-svg").remove(),t._paperdiv.select(".modebar-container").remove(),t._paper=t._paperdiv.insert("svg",":first-child").classed("main-svg",!0),t._toppaper=t._paperdiv.append("svg").classed("main-svg",!0),t._modebardiv=t._paperdiv.append("div"),delete t._modeBar,t._hoverpaper=t._paperdiv.append("svg").classed("main-svg",!0),!t._uid)&&(n={},C.selectAll("defs").each(function(){this.id&&(n[this.id.split("-")[1]]=1)}),t._uid=s.randstr(n)),t._paperdiv.selectAll(".main-svg").attr(X.svgAttrs),t._defs=t._paper.append("defs").attr("id","defs-"+t._uid),t._clips=t._defs.append("g").classed("clips",!0),t._topdefs=t._toppaper.append("defs").attr("id","topdefs-"+t._uid),t._topclips=t._topdefs.append("g").classed("clips",!0),t._bgLayer=t._paper.append("g").classed("bglayer",!0),t._draggers=t._paper.append("g").classed("draglayer",!0),o=t._paper.append("g").classed("layer-below",!0),t._imageLowerLayer=o.append("g").classed("imagelayer",!0),t._shapeLowerLayer=o.append("g").classed("shapelayer",!0),t._cartesianlayer=t._paper.append("g").classed("cartesianlayer",!0),t._polarlayer=t._paper.append("g").classed("polarlayer",!0),t._smithlayer=t._paper.append("g").classed("smithlayer",!0),t._ternarylayer=t._paper.append("g").classed("ternarylayer",!0),t._geolayer=t._paper.append("g").classed("geolayer",!0),t._funnelarealayer=t._paper.append("g").classed("funnelarealayer",!0),t._pielayer=t._paper.append("g").classed("pielayer",!0),t._iciclelayer=t._paper.append("g").classed("iciclelayer",!0),t._treemaplayer=t._paper.append("g").classed("treemaplayer",!0),t._sunburstlayer=t._paper.append("g").classed("sunburstlayer",!0),t._indicatorlayer=t._toppaper.append("g").classed("indicatorlayer",!0),t._glimages=t._paper.append("g").classed("glimages",!0),i=t._toppaper.append("g").classed("layer-above",!0),t._imageUpperLayer=i.append("g").classed("imagelayer",!0),t._shapeUpperLayer=i.append("g").classed("shapelayer",!0),t._selectionLayer=t._toppaper.append("g").classed("selectionlayer",!0),t._infolayer=t._toppaper.append("g").classed("infolayer",!0),t._menulayer=t._toppaper.append("g").classed("menulayer",!0),t._zoomlayer=t._toppaper.append("g").classed("zoomlayer",!0),t._hoverlayer=t._hoverpaper.append("g").classed("hoverlayer",!0),t._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}(e),u._shouldCreateBgLayer&&delete u._shouldCreateBgLayer),E.initGradients(e),E.initPatterns(e),h&&c.saveShowSpikeInitial(e),j=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length,j&&o.doCalcdata(e);for(g=0;g<e.calcdata.length;g++)e.calcdata[g][0].trace=e._fullData[g];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){s.isHidden(e)||o.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):s.clearResponsive(e),w=s.extendFlat({},u._size),y=0;function O(){if(o.clearAutoMarginIds(e),i.drawMarginPushers(e),c.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&o.allowAutoMargin(e,"title.automargin"),u._has("pie"))for(var t,s=e._fullData,n=0;n<s.length;n++)t=s[n],"pie"===t.type&&t.automargin&&o.allowAutoMargin(e,"pie."+t.uid+".automargin");return o.doAutoMargin(e),o.previousPromises(e)}function x(){e._transitioning||(i.doAutoRangeAndConstraints(e),h&&c.saveRangeInitial(e),d.getComponentMethod("rangeslider","calcAutorange")(e))}return p=[o.previousPromises,function(){if(_)return t.addFrames(e,_)},function t(){for(var n,a,c,r=u._basePlotModules,i=0;i<r.length;i++)r[i].drawFramework&&r[i].drawFramework(e);if(!u._glcanvas&&u._has("gl")&&(u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),u._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),n=e._context.plotGlPixelRatio,u._glcanvas&&(u._glcanvas.attr("width",u.width*n).attr("height",u.height*n).style("width",u.width+"px").style("height",u.height+"px"),a=u._glcanvas.data()[0].regl,a&&(Math.floor(u.width*n)!==a._gl.drawingBufferWidth||Math.floor(u.height*n)!==a._gl.drawingBufferHeight))){if(c="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!y)return s.log(c+" Clearing graph and plotting again."),o.cleanPlot([],{},e._fullData,u),o.supplyDefaults(e),u=e._fullLayout,o.doCalcdata(e),y++,t();s.error(c)}return"h"===u.modebar.orientation?u._modebardiv.style("height",null).style("width","100%"):u._modebardiv.style("width",null).style("height",u.height+"px"),o.previousPromises(e)},O,function(){if(o.didMarginChange(w,u._size))return s.syncOrAsync([O,i.layoutStyles],e)}],k&&p.push(function(){if(j)return s.syncOrAsync([d.getComponentMethod("shapes","calcAutorange"),d.getComponentMethod("annotations","calcAutorange"),x],e);x()}),p.push(i.layoutStyles),k&&p.push(function(){return c.draw(e,h?"":"redraw")},function(e){var t=e._fullLayout._insideTickLabelsUpdaterange;if(t)return e._fullLayout._insideTickLabelsUpdaterange=void 0,f(e,t).then(function(){c.saveRangeInitial(e,!0)})}),p.push(i.drawData,i.finalDraw,te,o.addLinks,o.rehover,o.redrag,o.reselect,o.doAutoMargin,o.previousPromises),b=s.syncOrAsync(p,e),b&&b.then||(b=Promise.resolve()),b.then(function(){return m(e),e})},t.purge=function(e){var t=(e=s.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return o.cleanPlot([],{},n,t),o.purge(e),S.purge(e),t._container&&t._container.remove(),delete e._context,e},t.react=function(e,n,c,l){if(e=s.getGraphDiv(e),r.clearPromiseQueue(e),C=e._fullData,w=e._fullLayout,s.isPlotDiv(e)&&C&&w){s.isPlainObject(n)&&(j=n,n=j.data,c=j.layout,l=j.config,W=j.frames),S=!1,l&&(Y=s.extendDeep({},e._context),e._context=void 0,P(e,l),S=A(Y,e._context)),e.data=n||[],r.cleanData(e.data),e.layout=c||{},r.cleanLayout(e.layout),function(e,t,n,o){var i,r,c,l,h,m,f,p,g,v,b,j,y,_,w,O,E,k,A,S,M,d=o._preGUI,C=[],x={},D={};for(i in d){if(r=z(i,H)){if(c=r.head,y=r.tail,S=r.attr||c+".uirevision",(l=(v=a(o,S).get())&&T(S,t))&&l===v){if(null===(h=d[i])&&(h=void 0),I(A=(g=a(t,i)).get(),h)){void 0===A&&"autorange"===y&&C.push(c),g.set(u(a(o,i).get()));continue}if("autorange"===y||"range["===y.substr(0,6)){var L=d[c+".range[0]"],N=d[c+".range[1]"],F=d[c+".autorange"];if((F||null===F&&null===L&&null===N)&&(c in x||(m=a(t,c).get(),x[c]=m&&(m.autorange||!1!==m.autorange&&(!m.range||2!==m.range.length))),x[c])){g.set(u(a(o,i).get()));continue}}}}else s.warn("unrecognized GUI edit: "+i);delete d[i],r&&"range["===r.tail.substr(0,6)&&(D[r.head]=1)}for(j=0;j<C.length;j++)E=C[j],D[E]&&(k=a(t,E).get(),k&&delete k.autorange);p=o._tracePreGUI;for(f in p){_=p[f],b=null;for(i in _){if(!b){if(O=se(f,n),O<0){delete p[f];break}if(w=oe(f,e,(M=n[O]._fullInput).index),w<0){delete p[f];break}b=e[w]}if(r=z(i,R)){if(r.attr?l=(v=a(o,r.attr).get())&&T(r.attr,t):(v=M.uirevision,void 0===(l=b.uirevision)&&(l=t.uirevision)),l&&l===v&&(null===(h=_[i])&&(h=void 0),I(A=(g=a(b,i)).get(),h))){g.set(u(a(M,i).get()));continue}}else s.warn("unrecognized GUI edit: "+i+" in trace uid "+f);delete _[i]}}}(e.data,e.layout,C,w),o.supplyDefaults(e,{skipUpdateCalc:!0});var f,j,_,w,x,C,E,k,S,M,F,D,N,L,B,V,W,Y,q=e._fullData,v=e._fullLayout,K=void 0===v.datarevision,U=v.transition,g=function(e,t,n,s,o){var i=h.layoutFlags();return i.arrays={},i.rangesAltered={},i.nChanges=0,i.nChangesAnim=0,O(t,n,[],{getValObject:function(e){return p.getLayoutValObject(n,e)},flags:i,immutable:s,transition:o,gd:e}),(i.plot||i.calc)&&(i.layoutReplot=!0),o&&i.nChanges&&i.nChangesAnim&&(i.anim=i.nChanges===i.nChangesAnim?"all":"some"),i}(e,w,v,K,U),G=g.newDataRevision,b=function(e,t,n,s,i,a){if(d=t.length===n.length,!i&&!d)return{fullReplot:!0,calc:!0};r=h.traceFlags(),r.arrays={},r.nChanges=0,r.nChangesAnim=0;var r,c,l,d,m={getValObject:function(e){var t=p.getTraceValObject(c,e);return!c._module.animatable&&t.anim&&(t.anim=!1),t},flags:r,immutable:s,transition:i,newDataRevision:a,gd:e},u={};for(l=0;l<t.length;l++)if(n[l]){if(c=n[l]._fullInput,o.hasMakesDataTransform(c)&&(c=n[l]),u[c.uid])continue;u[c.uid]=1,O(t[l]._fullInput,c,[],m)}return(r.calc||r.plot)&&(r.fullReplot=!0),i&&r.nChanges&&r.nChangesAnim&&(r.anim=r.nChanges===r.nChangesAnim&&d?"all":"some"),r}(e,C,q,K,U,G);if($(e)&&(g.layoutReplot=!0),b.calc||g.calc){e.calcdata=void 0;for(D=Object.getOwnPropertyNames(v),x=0;x<D.length;x++)L=D[x],B=L.substring(0,5),("xaxis"===B||"yaxis"===B)&&(F=v[L]._emptyCategories,F&&F())}else o.supplyDefaultsUpdateCalc(e.calcdata,q);if(f=[],W&&(e._transitionData={},o.createTransitionData(e),f.push(function(){return t.addFrames(e,W)})),v.transition&&!S&&(b.anim||g.anim))g.ticks&&f.push(i.doTicksRelayout),o.doCalcdata(e),i.doAutoRangeAndConstraints(e),f.push(function(){return o.transitionFromReact(e,b,g,w)});else if(b.fullReplot||g.layoutReplot||S)e._fullLayout._skipDefaults=!0,f.push(t._doPlot);else{for(k in g.arrays)if(E=g.arrays[k],E.length)if(N=d.getComponentMethod(k,"drawOne"),N!==s.noop)for(M=0;M<E.length;M++)N(e,E[M]);else{if(V=d.getComponentMethod(k,"draw"),V===s.noop)throw new Error("cannot draw components: "+k);V(e)}f.push(o.previousPromises),b.style&&f.push(i.doTraceStyle),(b.colorbars||g.colorbars)&&f.push(i.doColorBars),g.legend&&f.push(i.doLegend),g.layoutstyle&&f.push(i.layoutStyles),g.axrange&&y(f),g.ticks&&f.push(i.doTicksRelayout),g.modebar&&f.push(i.doModeBar),g.camera&&f.push(i.doCamera),f.push(m)}f.push(o.rehover,o.redrag,o.reselect),(_=s.syncOrAsync(f,e))&&_.then||(_=Promise.resolve(e))}else _=t.newPlot(e,n,c,l);return _.then(function(){return e.emit("plotly_react",{data:n,layout:c}),e})},t.redraw=function(e){if(e=s.getGraphDiv(e),!s.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return r.cleanData(e.data),r.cleanLayout(e.layout),e.calcdata=void 0,t._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})},t.relayout=f,t.restyle=b,t.setPlotConfig=function(e){return s.extendFlat(Y,e)},t.update=v,t._guiRelayout=M(f),t._guiRestyle=M(b),t._guiUpdate=M(v),t._storeDirectGUIEdit=function(e,t,n){for(var s in n)x(s,a(e,s).get(),n[s],t)}},20556:function(e){"use strict";var t={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},n={};!function e(t,n){for(s in t){var s,o=t[s];o.valType?n[s]=o.dflt:(n[s]||(n[s]={}),e(o,n[s]))}}(t,n),e.exports={configAttributes:t,dfltConfig:n}},73060:function(e,t,n){"use strict";var s=n(24040),l=n(3400),r=n(45464),h=n(64859),_=n(16672),C=n(85656),O=n(20556).configAttributes,b=n(67824),o=l.extendDeepAll,a=l.isPlainObject,x=l.isArrayOrTypedArray,u=l.nestedProperty,y=l.valObjectMeta,m="_isSubplotObj",d="_isLinkedToArray",p="_deprecated",f=[m,d,"_arrayAttrRegexps",p];function v(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(c(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var s,o,i,r=e[t[n]];if(!a(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!c(t[++n]))return!1}else if("info_array"===e.valType){if(o=t[++n],!c(o))return!1;if(s=e.items,Array.isArray(s)){if(o>=s.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;if(i=t[n],!c(i))return!1;e=s[o][i]}else e=s[o]}else e=s}}return e}function c(e){return e===Math.round(e)&&e>=0}function w(){var e,n,a,r,c,l,t={};for(r in o(t,h),s.subplotsRegistry)if((e=s.subplotsRegistry[r]).layoutAttributes)if(Array.isArray(e.attr))for(c=0;c<e.attr.length;c++)g(t,e,e.attr[c]);else g(t,e,"subplot"===e.attr?e.name:e.attr);for(r in s.componentsRegistry)if(n=(e=s.componentsRegistry[r]).schema,n&&(n.subplots||n.layout)){if(a=n.subplots,a&&a.xaxis&&!a.yaxis)for(l in a.xaxis)delete t.yaxis[l];delete t.xaxis.shift,delete t.xaxis.autoshift}else"colorscale"===e.name?o(t,e.layoutAttributes):e.layoutAttributes&&j(t,e.layoutAttributes,e.name);return{layoutAttributes:i(t)}}function i(e){return function(e){t.crawl(e,function(e,n,s){t.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(s[n+"src"]={valType:"string",editType:"none"}):a(e)&&(e.role="object")})}(e),function(e){t.crawl(e,function(e,t,n){if(e){var s=e[d];s&&(delete e[d],n[t]={items:{}},n[t].items[s]=e,n[t].role="object")}})}(e),function(e){!function e(t){for(n in t)if(a(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var n,s=0;s<t[n].length;s++)e(t[n][s]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e)}(e),e}function g(e,t,n){var i=u(e,n),s=o({},t.layoutAttributes);s[m]=!0,i.set(s)}function j(e,t,n){var s=u(e,n);s.set(o(s.get()||{},t))}t.IS_SUBPLOT_OBJ=m,t.IS_LINKED_TO_ARRAY=d,t.DEPRECATED=p,t.UNDERSCORE_ATTRS=f,t.get=function(){var e,n,a={};return s.allTypes.forEach(function(e){a[e]=function(e){var a,c,d,h=(a=s.modules[e]._module).basePlotModule,n={type:null},m=o({},r),l=o({},a.attributes);return t.crawl(l,function(e,t,n,s,o){u(m,o).set(void 0),void 0===e&&u(l,o).set(void 0)}),o(n,m),s.traceIs(e,"noOpacity")&&delete n.opacity,s.traceIs(e,"showLegend")||(delete n.showlegend,delete n.legendgroup),s.traceIs(e,"noHover")&&(delete n.hoverinfo,delete n.hoverlabel),a.selectPoints||delete n.selectedpoints,o(n,l),h.attributes&&o(n,h.attributes),n.type=e,c={meta:a.meta||{},categories:a.categories||{},animatable:Boolean(a.animatable),type:e,attributes:i(n)},a.layoutAttributes&&(d={},o(d,a.layoutAttributes),c.layoutAttributes=i(d)),a.animatable||t.crawl(c,function(e){t.isValObject(e)&&"anim"in e&&delete e.anim}),c}(e)}),n={},Object.keys(s.transformsRegistry).forEach(function(e){n[e]=function(e){var n=s.transformsRegistry[e],t=o({},n.attributes);return Object.keys(s.componentsRegistry).forEach(function(n){var o=s.componentsRegistry[n];o.schema&&o.schema.transforms&&o.schema.transforms[e]&&Object.keys(o.schema.transforms[e]).forEach(function(n){j(t,o.schema.transforms[e][n],n)})}),{attributes:i(t)}}(e)}),{defs:{valObjects:y,metaKeys:f.concat(["description","role","editType","impliedEdits"]),editType:{traces:b.traces,layout:b.layout},impliedEdits:{}},traces:a,layout:w(),transforms:n,frames:(e={frames:o({},_)},i(e),e.frames),animation:i(C),config:i(O)}},t.crawl=function(e,n,s,o){var i=s||0;o=o||"",Object.keys(e).forEach(function(s){var c,r=e[s];-1===f.indexOf(s)&&(c=(o?o+".":"")+s,n(r,s,e,i,c),t.isValObject(r)||a(r)&&"impliedEdits"!==s&&t.crawl(r,n,i+1,c))})},t.isValObject=function(e){return e&&void 0!==e.valType},t.findArrayAttributes=function(e){var s,o,i,u,h,m,f=[],n=[],c=[];function l(e,t,s,o){n=n.slice(0,o).concat([t]),c=c.slice(0,o).concat([e&&e._isLinkedToArray]),e&&("data_array"===e.valType||!0===e.arrayOk)&&("colorbar"!==n[o-1]||"ticktext"!==t&&"tickvals"!==t)&&d(i,0,"")}function d(e,t,s){var i,o=e[n[t]],r=s+n[t];if(t===n.length-1)x(o)&&f.push(u+r);else if(c[t]){if(Array.isArray(o))for(i=0;i<o.length;i++)a(o[i])&&d(o[i],t+1,r+"["+i+"].")}else a(o)&&d(o,t+1,r+".")}if(i=e,u="",t.crawl(r,l),e._module&&e._module.attributes&&t.crawl(e._module.attributes,l),o=e.transforms,o)for(s=0;s<o.length;s++)h=o[s],m=h._module,m&&(u="transforms["+s+"].",i=h,t.crawl(m.attributes,l));return f},t.getTraceValObject=function(e,t){var n,o,i,l,d,u,a=t[0],h=1;if("transforms"===a){if(1===t.length)return r.transforms;if(i=e.transforms,!Array.isArray(i)||!i.length)return!1;if(l=t[1],!c(l)||l>=i.length)return!1;o=(d=(s.transformsRegistry[i[l].type]||{}).attributes)&&d[t[2]],h=3}else{if(n=e._module,n||(n=(s.modules[e.type||r.type.dflt]||{})._module),!n)return!1;(o=(d=n.attributes)&&d[a])||(u=n.basePlotModule,u&&u.attributes&&(o=u.attributes[a])),o||(o=r[a])}return v(o,t,h)},t.getLayoutValObject=function(e,t){var n=function(e,t){var n,o,i,a,r,c,d,l=e._basePlotModules;if(l){for(o=0;o<l.length;o++){if((n=l[o]).attrRegex&&n.attrRegex.test(t)){if(n.layoutAttrOverrides)return n.layoutAttrOverrides;!a&&n.layoutAttributes&&(a=n.layoutAttributes)}if(r=n.baseLayoutAttrOverrides,r&&t in r)return r[t]}if(a)return a}if(i=e._modules,i)for(o=0;o<i.length;o++)if((c=i[o].layoutAttributes)&&t in c)return c[t];for(d in s.componentsRegistry){if("colorscale"===(n=s.componentsRegistry[d]).name&&0===t.indexOf("coloraxis"))return n.layoutAttributes[t];if(!n.schema&&t===n.name)return n.layoutAttributes}return t in h&&h[t]}(e,t[0]);return v(n,t,1)}},31780:function(e,t,n){"use strict";var o=n(3400),c=n(45464),s="templateitemname",i={name:{valType:"string",editType:"none"}};function a(e){return e&&"string"==typeof e}function r(e){var t=e.length-1;return"s"!==e.charAt(t)&&o.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}i[s]={valType:"string",editType:"calc"},t.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=i.name,t[s]=i[s],t},t.traceTemplater=function(e){var t,n,s={};for(t in e)n=e[t],Array.isArray(n)&&n.length&&(s[t]=0);return{newTrace:function(i){var r,a={type:t=o.coerce(i,{},c,"type"),_template:null};return t in s&&(n=e[t],r=s[t]%n.length,s[t]++,a._template=n[r]),a}}},t.newContainer=function(e,t,n){var s=e._template,i=s&&(s[t]||n&&s[n]);return o.isPlainObject(i)||(i=null),e[t]={_template:i}},t.arrayTemplater=function(e,t,n){var c,i=e._template,l=i&&i[r(t)],o=i&&i[t];return Array.isArray(o)&&o.length||(o=[]),c={},{newItem:function(e){var i,d,t={name:e.name,_input:e},r=t[s]=e[s];if(!a(r))return t._template=l,t;for(i=0;i<o.length;i++)if(d=o[i],d.name===r)return c[r]=1,t._template=d,t;return t[n]=e[n]||!1,t._template=!1,t},defaultItems:function(){for(var e,t,i,r=[],n=0;n<o.length;n++)t=o[n],e=t.name,a(e)&&!c[e]&&(i={_template:t,name:e,_input:{_templateitemname:e}},i[s]=t[s],r.push(i),c[e]=1);return r}}},t.arrayDefaultKey=r,t.arrayEditor=function(e,t,n){var i,a,l=(o.nestedProperty(e,t).get()||[]).length,c=n._index,r=c>=l&&(n._input||{})._templateitemname;r&&(c=l),a=t+"["+c+"]";function d(){i={},r&&(i[a]={},i[a][s]=r)}function u(e,t){r?o.nestedProperty(i[a],e).set(t):i[a+"."+e]=t}function h(){var e=i;return d(),e}return d(),{modifyBase:function(e,t){i[e]=t},modifyItem:u,getUpdateObj:h,applyUpdate:function(t,n){t&&u(t,n);var i,s=h();for(i in s)o.nestedProperty(e,i).set(s[i])}}}},39172:function(e,t,n){"use strict";var j=n(33428),s=n(24040),o=n(7316),i=n(3400),f=n(72736),u=n(73696),l=n(76308),r=n(43616),x=n(81668),m=n(45460),c=n(54460),a=n(84284),p=n(71888),O=p.enforce,w=p.clean,b=n(19280).doAutoRange,h="start";function y(e,t,n){for(s=0;s<n.length;s++){var s,o=n[s][0],i=n[s][1];if(!(o[0]>=e[1]||o[1]<=e[0])&&i[0]<t[1]&&i[1]>t[0])return!0}return!1}function _(e){var n,s,u,f,g,b,x,C,k,A,S,M,F,T,z,R,P,H,I,B,V,W,U,K,q,G,X,Q,h=e._fullLayout,O=h._size,p=O.p,_=c.list(e,"",!0),te;if(h._paperdiv.style({width:e._context.responsive&&h.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":h.width+"px",height:e._context.responsive&&h.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":h.height+"px"}).selectAll(".main-svg").call(r.setSize,h.width,h.height),e._context.setBackground(e,h.paper_bgcolor),t.drawMainTitle(e),m.manage(e),!h._has("cartesian"))return o.previousPromises(e);function w(e,t,n){var s=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-p-s:t._offset+t._length+p+s:O.t+O.h*(1-(e.position||0))+s%1:t?"right"===n?t._offset+t._length+p+s:t._offset-p-s:O.l+O.w*(e.position||0)+s%1}for(b=0;b<_.length;b++)k=(g=_[b])._anchorAxis,g._linepositions={},g._lw=r.crispRound(e,g.linewidth,1),g._mainLinePosition=w(g,k,g.side),g._mainMirrorPosition=g.mirror&&k?w(g,k,a.OPPOSITE_SIDE[g.side]):null;var Y=[],E=[],ee=[],se=1===l.opacity(h.paper_bgcolor)&&1===l.opacity(h.plot_bgcolor)&&h.paper_bgcolor===h.plot_bgcolor;for(f in h._plots)if((u=h._plots[f]).mainplot)u.bg&&u.bg.remove(),u.bg=void 0;else{var Z=u.xaxis.domain,$=u.yaxis.domain,D=u.plotgroup;y(Z,$,ee)?(T=D.node(),G=u.bg=i.ensureSingle(D,"rect","bg"),T.insertBefore(G.node(),T.childNodes[0]),E.push(f)):(D.select("rect.bg").remove(),ee.push([Z,$]),se||(Y.push(f),E.push(f)))}x=h._bgLayer.selectAll(".bg").data(Y);for(x.enter().append("rect").classed("bg",!0),x.exit().remove(),x.each(function(e){h._plots[e].bg=j.select(this)}),b=0;b<E.length;b++)u=h._plots[E[b]],s=u.xaxis,n=u.yaxis,u.bg&&void 0!==s._offset&&void 0!==n._offset&&u.bg.call(r.setRect,s._offset-p,n._offset-p,s._length+2*p,n._length+2*p).call(l.fill,h.plot_bgcolor).style("stroke-width",0);if(!h._hasOnlyLargeSploms)for(f in h._plots)u=h._plots[f],s=u.xaxis,n=u.yaxis,M=u.clipId="clip"+h._uid+f+"plot",Q=i.ensureSingleById(h._clips,"clipPath",M,function(e){e.classed("plotclip",!0).append("rect")}),u.clipRect=Q.select("rect").attr({width:s._length,height:n._length}),r.setTranslate(u.plot,s._offset,n._offset),u._hasClipOnAxisFalse?(V=null,z=M):(V=M,z=null),r.setClipUrl(u.plot,V,e),u.layerClipId=z;function N(e){return"M"+q+","+e+"H"+K}function oe(e){return"M"+s._offset+","+e+"h"+s._length}function L(e){return"M"+e+","+te+"V"+X}function ne(e){return void 0!==n._shift&&(e+=n._shift),"M"+e+","+n._offset+"v"+n._length}function J(e,t,n){if(!e.showline||f!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var s=t(e._mainLinePosition);return e.mirror&&(s+=t(e._mainMirrorPosition)),s}for(f in h._plots)u=h._plots[f],s=u.xaxis,n=u.yaxis,C="M0,0",v(s,f)&&(P=d(s,"left",n,_),q=s._offset-(P?p+P:0),H=d(s,"right",n,_),K=s._offset+s._length+(H?p+H:0),B=w(s,n,"bottom"),R=w(s,n,"top"),!(S=!s._anchorAxis||f!==s._mainSubplot)||"allticks"!==s.mirror&&"all"!==s.mirror||(s._linepositions[f]=[B,R]),C=J(s,N,oe),S&&s.showline&&("all"===s.mirror||"allticks"===s.mirror)&&(C+=N(B)+N(R)),u.xlines.style("stroke-width",s._lw+"px").call(l.stroke,s.showline?s.linecolor:"rgba(0,0,0,0)")),u.xlines.attr("d",C),A="M0,0",v(n,f)&&(W=d(n,"bottom",s,_),X=n._offset+n._length+(W?p:0),U=d(n,"top",s,_),te=n._offset-(U?p:0),F=w(n,s,"left"),I=w(n,s,"right"),!(S=!n._anchorAxis||f!==n._mainSubplot)||"allticks"!==n.mirror&&"all"!==n.mirror||(n._linepositions[f]=[F,I]),A=J(n,L,ne),S&&n.showline&&("all"===n.mirror||"allticks"===n.mirror)&&(A+=L(F)+L(I)),u.ylines.style("stroke-width",n._lw+"px").call(l.stroke,n.showline?n.linecolor:"rgba(0,0,0,0)")),u.ylines.attr("d",A);return c.makeClipPaths(e),o.previousPromises(e)}function v(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function g(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var s,o=n._anchorAxis;return!!o&&(s=a.FROM_BL[t],n.side===t?o.domain[s]===e.domain[s]:n.mirror&&o.domain[1-s]===e.domain[1-s])}function d(e,t,n,s){if(g(e,t,n))return n._lw;for(var o,i=0;i<s.length;i++)if(o=s[i],o._mainAxis===n._mainAxis&&g(e,t,o))return o._lw;return 0}t.layoutStyles=function(e){return i.syncOrAsync([o.doAutoMargin,_],e)},t.drawMainTitle=function(e){var c,l,u,t=e._fullLayout.title,n=e._fullLayout,d=function(e){var n=e.title,t="middle";return i.isRightAnchor(n)?t="end":i.isLeftAnchor(n)&&(t=h),t}(n),b=function(e){var n=e.title,t="0em";return i.isTopAnchor(n)?t=a.CAP_SHIFT+"em":i.isMiddleAnchor(n)&&(t=a.MID_SHIFT+"em"),t}(n),s=function(e,t){var n=e.title,s=e._size,o=0;return"0em"!==t&&t?t===a.CAP_SHIFT+"em"&&(o=n.pad.t):o=-n.pad.b,"auto"===n.y?s.t/2:"paper"===n.yref?s.t+s.h-s.h*n.y+o:e.height-e.height*n.y+o}(n,b),m=function(e,t){var n=e.title,o=e._size,s=0;return t===h?s=n.pad.l:"end"===t&&(s=-n.pad.r),"paper"===n.xref?o.l+o.w*n.x+s:e.width*n.x+s}(n,d);if(x.draw(e,"gtitle",{propContainer:n,propName:"title.text",placeholder:n._dfltTitle.plot,attributes:{x:m,y:s,"text-anchor":d,dy:b}}),t.text&&t.automargin){var p=j.selectAll(".gtitle"),g=r.bBox(p.node()).height,v=function(e,t,n){var o=t.y,a=t.yanchor,i=o>.5?"t":"b",r=e._fullLayout.margin[i],s=0;return"paper"===t.yref?s=n+t.pad.t+t.pad.b:"container"===t.yref&&(s=function(e,t,n,s,o){var i=0;return"middle"===n&&(i+=o/2),"t"===e?("top"===n&&(i+=o),i+=s-t*s):("bottom"===n&&(i+=o),i+=t*s),i}(i,o,a,e._fullLayout.height,n)+t.pad.t+t.pad.b),s>r?s:0}(e,t,g);v>0&&(!function(e,t,n,s){var r="title.automargin",a=e._fullLayout.title,c=a.y>.5?"t":"b",l={x:a.x,y:a.y,t:0,b:0},d={};"paper"===a.yref&&function(e,t,n,s,o){var r="paper"===t.yref?e._fullLayout._size.h:e._fullLayout.height,a=i.isTopAnchor(t)?s:s-o,c="b"===n?r-a:a;return!(i.isTopAnchor(t)&&"t"===n||i.isBottomAnchor(t)&&"b"===n)&&c<o}(e,a,c,t,s)?l[c]=n:"container"===a.yref&&(d[c]=n,e._fullLayout._reservedMargin[r]=d),o.allowAutoMargin(e,r),o.autoMargin(e,r,l)}(e,s,v,g),p.attr({x:m,y:s,"text-anchor":d,dy:(l=t.yanchor,"top"===l?a.CAP_SHIFT+.3+"em":"bottom"===l?"-0.3em":a.MID_SHIFT+"em")}).call(f.positionText,m,s),u=(t.text.match(f.BR_TAG_ALL)||[]).length,u&&(c=a.LINE_SPACING*u+a.MID_SHIFT,0===t.y&&(c=-c),p.selectAll(".line").each(function(){var e=+this.getAttribute("dy").slice(0,-2)-c+"em";this.setAttribute("dy",e)})))}},t.doTraceStyle=function(e){a=e.calcdata,i=[];for(n=0;n<a.length;n++){var n,i,a,r,c,f=a[n],l=f[0]||{},d=l.trace||{},h=d._module||{},m=h.arraysToCalcdata;m&&m(f,d),c=h.editStyle,c&&i.push({fn:c,cd0:l})}if(i.length){for(n=0;n<i.length;n++)r=i[n],r.fn(e,r.cd0);u(e),t.redrawReglTraces(e)}return o.style(e),s.getComponentMethod("legend","draw")(e),o.previousPromises(e)},t.doColorBars=function(e){return s.getComponentMethod("colorbar","draw")(e),o.previousPromises(e)},t.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,s.call("_doPlot",e,"",t)},t.doLegend=function(e){return s.getComponentMethod("legend","draw")(e),o.previousPromises(e)},t.doTicksRelayout=function(e){return c.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(s.subplotsRegistry.splom.updateGrid(e),u(e),t.redrawReglTraces(e)),t.drawMainTitle(e),o.previousPromises(e)},t.doModeBar=function(e){var t,n,s=e._fullLayout;m.manage(e);for(t=0;t<s._basePlotModules.length;t++)n=s._basePlotModules[t].updateFx,n&&n(e);return o.previousPromises(e)},t.doCamera=function(e){for(var n,s=e._fullLayout,o=s._subplots.gl3d,t=0;t<o.length;t++)n=s[o[t]],n._scene.setViewport(n)},t.drawData=function(e){n=e._fullLayout,u(e);for(var n,a=n._basePlotModules,i=0;i<a.length;i++)a[i].plot(e);return t.redrawReglTraces(e),o.style(e),s.getComponentMethod("selections","draw")(e),s.getComponentMethod("shapes","draw")(e),s.getComponentMethod("annotations","draw")(e),s.getComponentMethod("images","draw")(e),n._replotting=!1,o.previousPromises(e)},t.redrawReglTraces=function(e){if(s=e._fullLayout,s._has("regl")){var t,n,s,o,c=e._fullData,a=[],r=[];for(s._hasOnlyLargeSploms&&s._splomGrid.draw(),t=0;t<c.length;t++)n=c[t],!0===n.visible&&0!==n._length&&("splom"===n.type?s._splomScenes[n.uid].draw():"scattergl"===n.type?i.pushUnique(a,n.xaxis+n.yaxis):"scatterpolargl"===n.type&&i.pushUnique(r,n.subplot));for(t=0;t<a.length;t++)(o=s._plots[a[t]])._scene&&o._scene.draw();for(t=0;t<r.length;t++)(o=s[r[t]]._subplot)._scene&&o._scene.draw()}},t.doAutoRangeAndConstraints=function(e){for(var t,o,a,r,i=c.list(e,"",!0),n={},s=0;s<i.length;s++)if(!n[(t=i[s])._id]&&(n[t._id]=1,w(e,t),b(e,t),o=t._matchGroup,o))for(a in o)r=c.getFromId(e,a),b(e,r,t.range),n[a]=1;O(e)},t.finalDraw=function(e){s.getComponentMethod("rangeslider","draw")(e),s.getComponentMethod("rangeselector","draw")(e)},t.drawMarginPushers=function(e){s.getComponentMethod("legend","draw")(e),s.getComponentMethod("rangeselector","draw")(e),s.getComponentMethod("sliders","draw")(e),s.getComponentMethod("updatemenus","draw")(e),s.getComponentMethod("colorbar","draw")(e)}},94828:function(e,t,n){"use strict";var s=n(3400),o=s.isPlainObject,h=n(73060),u=n(7316),m=n(45464),d=n(31780),l=n(20556).dfltConfig;function c(e,t){e=s.extendDeep({},e),u=Object.keys(e).sort();function f(t,s,i){if(o(s)&&o(t))c(t,s);else if(Array.isArray(s)&&Array.isArray(t)){a=d.arrayTemplater({_template:e},i);for(n=0;n<s.length;n++){var a,r,l=s[n],u=a.newItem(l)._template;u&&c(u,l)}r=a.defaultItems();for(n=0;n<r.length;n++)s.push(r[n]._template);for(n=0;n<s.length;n++)delete s[n].templateitemname}}for(a=0;a<u.length;a++){var n,a,l,u,m,i=u[a],h=e[i];if(i in t?f(h,t[i],i):t[i]=h,r(i)===i)for(l in t)m=r(l),l===m||m!==i||l in e||f(h,t[l],i)}}function r(e){return e.replace(/[0-9]+$/,"")}function a(e,t,n,c,l){j=l&&n(l);for(m in e){var m,g,b,j,y,w,O,C,u=e[m],v=i(e,m,c),p=i(e,m,l),h=n(p);if(h||(w=r(m),w!==m&&(h=n(p=i(e,w,l)))),!(j&&j===h||!h||h._noTemplating||"data_array"===h.valType||h.arrayOk&&Array.isArray(u)))if(!h.valType&&o(u))a(u,t,n,v,p);else if(h._isLinkedToArray&&Array.isArray(u))for(var E=!1,f=0,x={},_=0;_<u.length;_++)g=u[_],o(g)&&(b=g.name,b?x[b]||(a(g,t,n,i(u,f,v),i(u,f,p)),f++,x[b]=1):E||(C=i(e,d.arrayDefaultKey(m),c),y=i(u,f,v),a(g,t,n,y,i(u,f,p)),O=s.nestedProperty(t,y),s.nestedProperty(t,C).set(O.get()),O.set(null),E=!0));else s.nestedProperty(t,v).set(u)}}function f(e,t){return h.getLayoutValObject(e,s.nestedProperty({},t).parts)}function p(e,t){return h.getTraceValObject(e,s.nestedProperty({},t).parts)}function i(e,t,n){return n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t}function g(e){for(var t=0;t<e.length;t++)if(o(e[t]))return!0}function v(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}t.makeTemplate=function(e){e=s.isPlainObject(e)?e:s.getGraphDiv(e),e=s.extendDeep({_context:l},{data:e.data,layout:e.layout}),u.supplyDefaults(e);var t,n,i,r,h,g,v,b,j,y,_=e.data||[],d=e.layout||{};if(d._basePlotModules=e._fullLayout._basePlotModules,d._modules=e._fullLayout._modules,t={data:{},layout:{}},_.forEach(function(e){n={},a(e,n,p.bind(null,e));var n,i=s.coerce(e,{},m,"type"),o=t.data[i];o||(o=t.data[i]=[]),o.push(n)}),a(d,t.layout,f.bind(null,d)),delete t.layout.template,g=d.template,o(g)&&(y=g.layout,o(y)&&c(y,t.layout),h=g.data,o(h))){for(i in t.data)if(r=h[i],Array.isArray(r)){for(j=(b=t.data[i]).length,v=r.length,n=0;n<j;n++)c(r[n%v],b[n]);for(n=j;n<v;n++)b.push(s.extendDeep({},r[n]))}for(i in h)i in t.data||(t.data[i]=s.extendDeep([],h[i]))}return t},t.validateTemplate=function(e,t){c=s.extendDeep({},{_context:l,data:e.data,layout:e.layout}),y=c.layout||{},o(t)||(t=y.template||{});var a,c,d,h,m,f,p,y,_=t.layout,j=t.data,n=[];c.layout=y,c.layout.template=t,u.supplyDefaults(c);var w=c._fullLayout,b=c._fullData,O={};if(o(_)?(function e(t,n){for(a in t)if("_"!==a.charAt(0)&&o(t[a])){var s,a,l=r(a),c=[];for(s=0;s<n.length;s++)c.push(i(t,a,n[s])),l!==a&&c.push(i(t,l,n[s]));for(s=0;s<c.length;s++)O[c[s]]=1;e(t[a],c)}}(w,["layout"]),function e(t,s){for(a in t)if(-1===a.indexOf("defaults")&&o(t[a])){var a,r=i(t,a,s);O[r]?e(t[a],r):n.push({code:"unused",path:r})}}(_,"layout")):n.push({code:"layout"}),o(j)){for(f={},p=0;p<b.length;p++)m=b[p],f[a=m.type]=(f[a]||0)+1,m._fullInput._template||n.push({code:"missing",index:m._fullInput.index,traceType:a});for(a in j)d=j[a].length,h=f[a]||0,d>h?n.push({code:"unused",traceType:a,templateCount:d,dataCount:h}):h>d&&n.push({code:"reused",traceType:a,templateCount:d,dataCount:h})}else n.push({code:"data"});if(function e(t,s){for(r in t)if("_"!==r.charAt(0)){var r,a=t[r],c=i(t,r,s);o(a)?(Array.isArray(t)&&!1===a._template&&a.templateitemname&&n.push({code:"missing",path:c,templateitemname:a.templateitemname}),e(a,c)):Array.isArray(a)&&g(a)&&e(a,c)}}({data:b,layout:w},""),n.length)return n.map(v)}},67024:function(e,t,n){"use strict";var a=n(38248),r=n(36424),u=n(7316),s=n(3400),o=n(81792),c=n(37164),l=n(63268),d=n(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};e.exports=function(e,t){function g(e){return!(e in t)||s.validate(t[e],i[e])}if(t=t||{},s.isPlainObject(e)?(y=e.data||[],b=e.layout||{},j=e.config||{},m={}):(e=s.getGraphDiv(e),y=s.extendDeep([],e.data),b=s.extendDeep({},e.layout),j=e._context,m=e._fullLayout||{}),!g("width")&&null!==t.width||!g("height")&&null!==t.height)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Export format is not "+s.join2(i.format.values,", "," or ")+".");C={};function h(e,n){return s.coerce(t,C,i,e,n)}var m,f,b,j,y,w,C,E,p=h("format"),x=h("width"),_=h("height"),O=h("scale"),k=h("setBackground"),v=h("imageDataOnly"),n=document.createElement("div");n.style.position="absolute",n.style.left="-5000px",document.body.appendChild(n),f=s.extendFlat({},b),x?f.width=x:null===t.width&&a(m.width)&&(f.width=m.width),_?f.height=_:null===t.height&&a(m.height)&&(f.height=m.height),E=s.extendFlat({},j,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),w=o.getRedrawFunc(n);function A(){return new Promise(function(e){setTimeout(e,o.getDelay(n._fullLayout))})}function S(){return new Promise(function(e,t){var i,h,a=c(n,p,O),f=n._fullLayout.width,g=n._fullLayout.height;function m(){r.purge(n),document.body.removeChild(n)}if("full-json"===p)return i=u.graphJson(n,!1,"keepdata","object",!0,!0),i.version=d,i=JSON.stringify(i),m(),e(v?i:o.encodeJSON(i));if(m(),"svg"===p)return e(v?a:o.encodeSVG(a));h=document.createElement("canvas"),h.id=s.randstr(),l({format:p,width:f,height:g,scale:O,canvas:h,svg:a,promise:!0}).then(e).catch(t)})}return new Promise(function(e,t){r.newPlot(n,y,f,E).then(w).then(A).then(S).then(function(t){e(function(e){return v?e.replace(o.IMAGE_URL_PREFIX,""):e}(t))}).catch(function(e){t(e)})})}},21480:function(e,t,n){"use strict";var d,u,o=n(3400),f=n(7316),m=n(73060),v=n(20556).dfltConfig,i=o.isPlainObject,a=Array.isArray,l=o.isArrayOrTypedArray;function c(e,t,n,r,d,u){u=u||[];for(T=Object.keys(e),M=0;M<T.length;M++)if(_=T[M],"transforms"!==_){v=u.slice(),v.push(_);var h,v,b,j,_,O,x,C,E,k,A,S,M,F,T,z,L,R,P,m=e[_],f=t[_],w=g(n,_),N=(w||{}).valType,D="info_array"===N,H="colorscale"===N,y=(w||{}).items;if(p(n,_))if(i(m)&&i(f)&&"any"!==N)c(m,f,w,r,d,v);else if(D&&a(m))if(m.length>f.length&&r.push(s("unused",d,v.concat(f.length))),A=f.length,E=Array.isArray(y),E&&(A=Math.min(A,y.length)),2===w.dimensions)for(h=0;h<A;h++)if(a(m[h])){m[h].length>f[h].length&&r.push(s("unused",d,v.concat(h,f[h].length))),z=f[h].length;for(x=0;x<(E?Math.min(z,y[h].length):z);x++)S=E?y[h][x]:y,j=m[h][x],O=f[h][x],o.validate(j,S)?O!==j&&O!==+j&&r.push(s("dynamic",d,v.concat(h,x),j,O)):r.push(s("value",d,v.concat(h,x),j))}else r.push(s("array",d,v.concat(h),m[h]));else for(h=0;h<A;h++)S=E?y[h]:y,j=m[h],O=f[h],o.validate(j,S)?O!==j&&O!==+j&&r.push(s("dynamic",d,v.concat(h),j,O)):r.push(s("value",d,v.concat(h),j));else if(w.items&&!D&&a(m)){P=y[Object.keys(y)[0]],L=[];for(b=0;b<f.length;b++)k=f[b]._index||b,((C=v.slice()).push(k),i(m[k])&&i(f[b]))&&(L.push(k),F=m[k],R=f[b],i(F)&&!1!==F.visible&&!1===R.visible?r.push(s("invisible",d,C)):c(F,R,P,r,d,C));for(b=0;b<m.length;b++)(C=v.slice()).push(b),i(m[b])?-1===L.indexOf(b)&&r.push(s("unused",d,C)):r.push(s("object",d,C,m[b]))}else!i(m)&&i(f)?r.push(s("object",d,v,m)):l(m)||!l(f)||D||H?_ in t?o.validate(m,w)?"enumerated"===w.valType&&(w.coerceNumber&&m!==+f||m!==f)&&r.push(s("dynamic",d,v,m,f)):r.push(s("value",d,v,m)):r.push(s("unused",d,v,m)):r.push(s("array",d,v,m));else r.push(s("schema",d,v))}return r}e.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});var r,l,u,g,j,y,_,w,O,C,A,S,h=m.get(),n=[],d={_context:o.extendFlat({},v)};a(e)?(d.data=o.extendDeep([],e),j=e):(d.data=[],j=[],n.push(s("array","data"))),i(t)?(d.layout=o.extendDeep({},t),O=t):(d.layout={},O={},arguments.length>1&&n.push(s("object","layout"))),f.supplyDefaults(d);for(var x=d._fullData,M=j.length,p=0;p<M;p++)if(g=j[p],r=["data",p],i(g)){{var b=x[p],E=b.type,k=h.traces[E].attributes;if(k.type={valType:"enumerated",values:[E]},!1===b.visible&&!1!==g.visible&&n.push(s("invisible",r)),c(g,b,k,n,r),u=g.transforms,C=b.transforms,u){a(u)||n.push(s("array",r,["transforms"])),r.push("transforms");for(l=0;l<u.length;l++)y=["transforms",l],_=u[l].type,i(u[l])?(w=h.transforms[_]?h.transforms[_].attributes:{},w.type={valType:"enumerated",values:Object.keys(h.transforms)},c(u[l],C[l],w,n,r,y)):n.push(s("object",r,y))}}}else n.push(s("object",r));return A=d._fullLayout,S=function(e,t){for(n=e.layout.layoutAttributes,s=0;s<t.length;s++){var n,s,a=t[s],r=e.traces[a.type],i=r.layoutAttributes;i&&(a.subplot?o.extendFlat(n[r.attributes.subplot.dflt],i):o.extendFlat(n,i))}return n}(h,x),c(O,A,S,n,"layout"),0===n.length?void 0:n},u={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":r(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":r(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return r(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var s=i(n)?"container":"key";return r(e)+s+" "+t+" did not get coerced"},dynamic:function(e,t,n,s){return[r(e)+"key",t,"(set to '"+n+"')","got reset to","'"+s+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?r(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[r(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function r(e){return a(e)?"In data trace "+e[1]+", ":"In "+e+", "}function s(e,t,n,s,i){n=n||"",a(t)?(r=t[0],c=t[1]):(r=t,c=null);var r,c,l=function(e){if(!a(e))return String(e);for(var s,t="",n=0;n<e.length;n++)s=e[n],"number"==typeof s?t=t.substr(0,t.length-1)+"["+s+"]":t+=s,n<e.length-1&&(t+=".");return t}(n),d=u[e](t,l,s,i);return o.log(d),{code:e,container:r,trace:c,path:n,astr:l,msg:d}}function p(e,t){var n=h(t),s=n.keyMinusId,o=n.id;return!!(s in e&&e[s]._isSubplotObj&&o)||t in e}function g(e,t){return t in e?e[t]:e[h(t).keyMinusId]}d=o.counterRegex("([a-z]+)");function h(e){var t=e.match(d);return{keyMinusId:t&&t[1],id:t&&t[2]}}},85656:function(e){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(e,t,n){"use strict";var s=n(3400),o=n(31780);e.exports=function(e,t,n){var i,a,l,m,p,c=n.name,d=n.inclusionAttr||"visible",u=t[c],f=s.isArrayOrTypedArray(e[c])?e[c]:[],r=t[c]=[],h=o.arrayTemplater(t,c,d);for(i=0;i<f.length;i++)l=f[i],s.isPlainObject(l)?a=h.newItem(l):(a=h.newItem({}))[d]=!1,a._index=i,!1!==a[d]&&n.handleItemDefaults(l,a,t,n),r.push(a);m=h.defaultItems();for(i=0;i<m.length;i++)(a=m[i])._index=r.length,n.handleItemDefaults({},a,t,n,{}),r.push(a);if(s.isArrayOrTypedArray(u)){p=Math.min(u.length,r.length);for(i=0;i<p;i++)s.relinkPrivateKeys(r[i],u[i])}return r}},45464:function(e,t,n){"use strict";var s=n(25376),o=n(55756);e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:s({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:o.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(e,t,n){"use strict";var i=n(38248),o=n(3400),a=o.dateTime2ms,s=o.incrementMonth,r=n(39032).ONEAVGMONTH;e.exports=function(e,t,n,o){if("date"!==t.type)return{vals:o};if(v=e[n+"periodalignment"],!v)return{vals:o};if(l=e[n+"period"],i(l)){if((l=+l)<=0)return{vals:o}}else if("string"==typeof l&&"M"===l.charAt(0)){if(m=+l.substring(1),!(m>0&&Math.round(m)===m))return{vals:o};u=m}for(var c,l,d,u,m,p,v,b,f=t.calendar,C="start"===v,x="end"===v,O=e[n+"period0"],g=a(O,f)||0,_=[],j=[],y=[],w=o.length,h=0;h<w;h++){if(d=o[h],u){for(b=Math.round((d-g)/(u*r)),c=s(g,u*b,f);c>d;)c=s(c,-u,f);for(;c<=d;)c=s(c,u,f);p=s(c,-u,f)}else{for(c=g+(b=Math.round((d-g)/l))*l;c>d;)c-=l;for(;c<=d;)c+=l;p=c-l}_[h]=C?p:x?c:(p+c)/2,j[h]=p,y[h]=c}return{vals:_,starts:j,ends:y}}},26720:function(e){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(e,t,n){"use strict";var r,x=n(33428),p=n(38248),s=n(3400),o=n(39032).FP_SAFE,O=n(24040),y=n(43616),h=n(79811),j=h.getFromId,b=h.isLinked;function l(e,t){var n,o,g,y,_,w,E,k,A,S,D,l=[],M=e._fullLayout,x=c(M,t,0),O=c(M,t,1),z=u(e,t),h=z.min,f=z.max;if(0===h.length||0===f.length)return s.simpleMap(t.range,t.r2l);o=h[0].val,g=f[0].val;for(n=1;n<h.length&&o===g;n++)o=Math.min(o,h[n].val);for(n=1;n<f.length&&o===g;n++)g=Math.max(g,f[n].val);_=t.autorange,w="reversed"===_||"min reversed"===_||"max reversed"===_,!w&&t.range&&(E=s.simpleMap(t.range,t.r2l),w=E[1]<E[0]),"reversed"===t.autorange&&(t.autorange=!0);var i,a,d,b,j,C,T=t.rangemode,N="tozero"===T,F="nonnegative"===T,p=t._length,L=p/10,r=0;for(n=0;n<h.length;n++)for(d=h[n],y=0;y<f.length;y++)(j=(b=f[y]).val-d.val-m(t,d.val,b.val))>0&&((C=p-x(d)-O(b))>L?j/C>r&&(i=d,a=b,r=j/C):j/p>r&&(i={val:d.val,nopad:1},a={val:b.val,nopad:1},r=j/p));return o===g?(k=o-1,A=o+1,N?0===o?l=[0,1]:(D=(o>0?f:h).reduce(function(e,t){return Math.max(e,O(t))},0),S=o/(1-Math.min(.5,D/p)),l=o>0?[0,S]:[S,0]):l=F?[Math.max(0,k),Math.max(1,A)]:[k,A]):(N?(i.val>=0&&(i={val:0,nopad:1}),a.val<=0&&(a={val:0,nopad:1})):F&&(i.val-r*x(i)<0&&(i={val:0,nopad:1}),a.val<=0&&(a={val:1,nopad:1})),r=(a.val-i.val-m(t,d.val,b.val))/(p-x(i)-O(a)),l=[i.val-r*x(i),a.val+r*O(a)]),l=v(l,t),t.limitRange&&t.limitRange(),w&&l.reverse(),s.simpleMap(l,t.l2r||Number)}function m(e,t,n){if(s=0,e.rangebreaks)for(var s,i,a=e.locateBreaks(t,n),o=0;o<a.length;o++)i=a[o],s+=i.max-i.min;return s}function c(e,t,n){var i,a,c,o=.05*t._length,l=t._anchorAxis||{};return(-1!==(t.ticklabelposition||"").indexOf("inside")||-1!==(l.ticklabelposition||"").indexOf("inside"))&&(i=t.isReversed(),i||(c=s.simpleMap(t.range,t.r2l),i=c[1]<c[0]),i&&(n=!n)),a=0,b(e,t._id)||(a=function(e,t,n){i=0,d="x"===t._id.charAt(0);for(v in e._plots)if(a=e._plots[v],(t._id===a.xaxis._id||t._id===a.yaxis._id)&&(o=(d?a.yaxis:a.xaxis)||{},-1!==(o.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===o.side||"bottom"===o.side)||n&&("top"===o.side||"right"===o.side)))){if(o._vals){var o,i,a,c,l,d,u,h,m,v,p=s.deg2rad(o._tickAngles[o._id+"tick"]||0),g=Math.abs(Math.cos(p)),f=Math.abs(Math.sin(p));o._vals[0].bb||(m=o._id+"tick",o._selections[m].each(function(e){var t=x.select(this);t.select(".text-math-group").empty()&&(e.bb=y.bBox(t.node()))}));for(l=0;l<o._vals.length;l++)c=o._vals[l].bb,c&&(u=2*r+c.width,h=2*r+c.height,i=Math.max(i,d?Math.max(u*g,h*f):Math.max(h*g,u*f)))}"inside"===o.ticks&&"inside"===o.ticklabelposition&&(i+=o.ticklen||0)}return i}(e,t,n)),o=Math.max(a,o),"domain"===t.constrain&&t._inputDomain&&(o*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?o:a)}}e.exports={applyAutorangeOptions:v,getAutoRange:l,makePadFn:c,doAutoRange:function(e,t,n){if(t.setScale(),t.autorange){t.range=n?n.slice():l(e,t),t._r=t.range.slice(),t._rl=s.simpleMap(t._r,t.r2l);var o,i,r=t._input,a={};a[t._attr+".range"]=t.range,a[t._attr+".autorange"]=t.autorange,O.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,a),r.range=t.range.slice(),r.autorange=t.autorange}o=t._anchorAxis,o&&o.rangeslider&&(i=o.rangeslider[t._name],i&&"auto"===i.rangemode&&(i.range=l(e,t)),o._input.rangeslider[t._name]=s.extendFlat({},i))},findExtremes:function(e,t,n){n||(n={}),e._m||e.setScale();var s,i,r,c,l,u,h,v,b,C,k,y=[],E=[],m=t.length,T=n.padded||!1,_=n.tozero&&("linear"===e.type||"-"===e.type),w="log"===e.type,O=!1,F=n.vpadLinearized||!1;function g(e){if(Array.isArray(e))return O=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var S=g((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),M=g((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),A=g(n.vpadplus||n.vpad),j=g(n.vpadminus||n.vpad);if(!O){if(c=1/0,r=-1/0,w)for(s=0;s<m;s++)(i=t[s])<c&&i>0&&(c=i),i>r&&i<o&&(r=i);else for(s=0;s<m;s++)(i=t[s])<c&&i>-o&&(c=i),i>r&&i<o&&(r=i);t=[c,r],m=2}v={tozero:_,extrapad:T};function x(n){u=t[n],p(u)&&(k=S(n),C=M(n),F?(h=e.c2l(u)-j(n),l=e.c2l(u)+A(n)):(c=u-j(n),r=u+A(n),w&&c<r/10&&(c=r/10),h=e.c2l(c),l=e.c2l(r)),_&&(h=Math.min(0,h),l=Math.max(0,l)),f(h)&&d(y,h,C,v),f(l)&&a(E,l,k,v))}b=Math.min(6,m);for(s=0;s<b;s++)x(s);for(s=m-1;s>=b;s--)x(s);return{min:y,max:E,opts:n}},concatExtremes:u},r=3;function u(e,t,n){var s,o,i,f,b=t._id,v=e._fullData,m=e._fullLayout,h=[],l=[];function c(e,t){for(i=0;i<t.length;i++){var r=e[t[i]],n=(r._extremes||{})[b];if(!0===r.visible&&n){for(s=0;s<n.min.length;s++)o=n.min[s],d(h,o.val,o.pad,{extrapad:o.extrapad});for(s=0;s<n.max.length;s++)o=n.max[s],a(l,o.val,o.pad,{extrapad:o.extrapad})}}}if(c(v,t._traceIndices),c(m.annotations||[],t._annIndices||[]),c(m.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(f in t._matchGroup)if(f!==t._id){var p=j(e,f),r=u(e,p,!0),g=t._length/p._length;for(s=0;s<r.min.length;s++)o=r.min[s],d(h,o.val,o.pad*g,{extrapad:o.extrapad});for(s=0;s<r.max.length;s++)o=r.max[s],a(l,o.val,o.pad*g,{extrapad:o.extrapad})}return{min:h,max:l}}function d(e,t,n,s){g(e,t,n,s,_)}function a(e,t,n,s){g(e,t,n,s,w)}function g(e,t,n,s,o){for(var i,l,d=s.tozero,r=s.extrapad,c=!0,a=0;a<e.length&&c;a++){if(i=e[a],o(i.val,t)&&i.pad>=n&&(i.extrapad||!r)){c=!1;break}o(t,i.val)&&i.pad<=n&&(r||!i.extrapad)&&(e.splice(a,1),a--)}c&&(l=d&&0===t,e.push({val:t,pad:l?0:n,extrapad:!l&&r}))}function f(e){return p(e)&&Math.abs(e)<o}function _(e,t){return e<=t}function w(e,t){return e>=t}function i(e,t,n){return void 0===t||void 0===n||(t=e.d2l(t))<e.d2l(n)}function v(e,t){if(!t||!t.autorangeoptions)return e;var n,c,l,d,r=e[0],a=e[1],o=t.autorangeoptions.include;if(void 0!==o){l=t.d2l(r),d=t.d2l(a),s.isArrayOrTypedArray(o)||(o=[o]);for(c=0;c<o.length;c++)n=t.d2l(o[c]),l>=n&&(l=n,r=n),d<=n&&(d=n,a=n)}return r=function(e,t){var n=t.autorangeoptions;return n&&void 0!==n.minallowed&&i(t,n.minallowed,n.maxallowed)?n.minallowed:n&&void 0!==n.clipmin&&i(t,n.clipmin,n.clipmax)?Math.max(e,t.d2l(n.clipmin)):e}(r,t),a=function(e,t){var n=t.autorangeoptions;return n&&void 0!==n.maxallowed&&i(t,n.minallowed,n.maxallowed)?n.maxallowed:n&&void 0!==n.clipmax&&i(t,n.clipmin,n.clipmax)?Math.min(e,t.d2l(n.clipmax)):e}(a,t),[r,a]}},76808:function(e){"use strict";e.exports=function(e,t,n){n&&(i="reversed"===t||"min reversed"===t||"max reversed"===t,s=n[i?1:0],o=n[i?0:1]);var s,o,i,a=e("autorangeoptions.minallowed",null===o?s:void 0),r=e("autorangeoptions.maxallowed",null===s?o:void 0);void 0===a&&e("autorangeoptions.clipmin"),void 0===r&&e("autorangeoptions.clipmax"),e("autorangeoptions.include")}},54460:function(e,t,n){"use strict";var G,l=n(33428),i=n(38248),j=n(7316),O=n(24040),o=n(3400),b=o.strTranslate,g=n(72736),Re=n(81668),w=n(76308),c=n(43616),Le=n(94724),me=n(98728),a=n(39032),Ne=a.ONEMAXYEAR,A=a.ONEAVGYEAR,Y=a.ONEMINYEAR,De=a.ONEMAXQUARTER,K=a.ONEAVGQUARTER,L=a.ONEMINQUARTER,Fe=a.ONEMAXMONTH,y=a.ONEAVGMONTH,$=a.ONEMINMONTH,d=a.ONEWEEK,r=a.ONEDAY,v=r/2,m=a.ONEHOUR,S=a.ONEMIN,I=a.ONESEC,f=a.MINUS_SIGN,T=a.BADNUM,H={K:"zeroline"},R={K:"gridline",L:"path"},J={K:"minor-gridline",L:"path"},be={K:"tick",L:"path"},te={K:"tick",L:"text"},Oe={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},z=n(84284),E=z.MID_SHIFT,p=z.CAP_SHIFT,C=z.LINE_SPACING,xe=z.OPPOSITE_SIDE,s=e.exports={},fe,re,ve;s.setConvert=n(78344);var Ee=n(52976),h=n(79811),ke=h.idSort,Pe=h.isLinked;s.id2name=h.id2name,s.name2id=h.name2id,s.cleanId=h.cleanId,s.list=h.list,s.listIds=h.listIds,s.getFromId=h.getFromId,s.getFromTrace=h.getFromTrace,G=n(19280),s.getAutoRange=G.getAutoRange,s.findExtremes=G.findExtremes,fe=1e-4;function Q(e){var t=(e[1]-e[0])*fe;return[e[0]-t,e[1]+t]}s.coerceRef=function(e,t,n,s,i,a){var d=s.charAt(s.length-1),r=n._fullLayout._subplots[d+"axis"],c=s+"ref",l={};return i||(i=r[0]||("string"==typeof a?a:a[0])),a||(a=i),r=r.concat(r.map(function(e){return e+" domain"})),l[c]={valType:"enumerated",values:r.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},o.coerce(e,t,l,c)},s.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},s.coercePosition=function(e,t,n,i,a,r){if("range"!==s.getRefType(i))c=o.ensureNumber,l=n(a,r);else{var c,l,d=s.getFromId(t,i);l=n(a,r=d.fraction2r(r)),c=d.cleanPos}e[a]=c(l)},s.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?o.ensureNumber:s.getFromId(t,n).cleanPos)(e)},s.redrawComponents=function(e,t){t=t||s.listIds(e);var o=e._fullLayout;function n(n,i,a,r){for(var c,l,u,m=O.getComponentMethod(n,i),h={},d=0;d<t.length;d++)for(u=o[s.id2name(t[d])][a],c=0;c<u.length;c++)if(l=u[c],!h[l]&&(m(e,l),h[l]=1,r))return}n("annotations","drawOne","_annIndices"),n("shapes","drawOne","_shapeIndices"),n("images","draw","_imgIndices",!0),n("selections","drawOne","_selectionIndices")},re=s.getDataConversions=function(e,t,n,i){var a,r,c="x"===n||"y"===n||"z"===n?n:i;if(o.isArrayOrTypedArray(c)){if(a={type:Ee(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},s.setConvert(a),"category"===a.type)for(r=0;r<i.length;r++)a.d2c(i[r])}else a=s.getFromTrace(e,t,c);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===c?{d2c:ye,c2d:ye}:{d2c:se,c2d:se}};function se(e){return+e}function ye(e){return String(e)}function Z(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function ne(e,t){return Math.abs(e/t-1)<.001}function B(e){return+e.substring(1)}function oe(e,t){return e.rangebreaks&&(t=t.filter(function(t){return e.maskBreaks(t.x)!==T})),t}function Me(e){if(t=e._mainAxis,o=[],t._vals)for(n=0;n<t._vals.length;n++)if(!t._vals[n].noTick){var t,n,o,a=t.l2p(t._vals[n].x),r=e.p2l(a),i=s.tickText(e,r);t._vals[n].minor&&(i.minor=!0,i.text=""),o.push(i)}return oe(e,o)}function ae(e,t){var n,i,r,c,l,d,u,a=Q(o.simpleMap(e.range,e.r2l)),h=Math.min(a[0],a[1]),m=Math.max(a[0],a[1]),f="category"===e.type?e.d2l_noadd:e.d2l;"log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(u=[],n=0;n<=1;n++)if((void 0===t||!(t&&n||!1===t&&!n))&&(!n||e.minor)&&(d=n?e.minor.tickvals:e.tickvals,r=n?[]:e.ticktext,d)){o.isArrayOrTypedArray(r)||(r=[]);for(i=0;i<d.length;i++)c=f(d[i]),c>h&&c<m&&(l=s.tickText(e,c,!1,String(r[i])),n&&(l.minor=!0,l.text=""),u.push(l))}return oe(e,u)}s.getDataToCoordFunc=function(e,t,n,s){return re(e,t,n,s).d2c},s.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},s.minDtick=function(e,t,n,s){-1===["log","category","multicategory"].indexOf(e.type)&&s?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},s.saveRangeInitial=function(e,t){for(var c=s.list(e,"",!0),a=!1,i=0;i<c.length;i++){var n=c[i],r=void 0===n._rangeInitial0&&void 0===n._rangeInitial1,l=r||n.range[0]!==n._rangeInitial0||n.range[1]!==n._rangeInitial1,o=n.autorange;(r&&!0!==o||t&&l)&&(n._rangeInitial0="min"===o||"max reversed"===o?void 0:n.range[0],n._rangeInitial1="max"===o||"min reversed"===o?void 0:n.range[1],n._autorangeInitial=o,a=!0)}return a},s.saveShowSpikeInitial=function(e,t){for(var a=s.list(e,"",!0),r=!1,o="on",i=0;i<a.length;i++){var n=a[i],c=void 0===n._showSpikeInitial,l=c||n.showspikes!==n._showspikes;(c||t&&l)&&(n._showSpikeInitial=n.showspikes,r=!0),"on"!==o||n.showspikes||(o="off")}return e._fullLayout._cartesianSpikesEnabled=o,r},s.autoBin=function(e,t,n,a,c,l){if(h=o.aggNums(Math.min,null,e),u=o.aggNums(Math.max,null,e),"category"===t.type||"multicategory"===t.type)return{start:h-.5,end:u+.5,size:Math.max(1,Math.round(l)||1),_dataSpan:u-h};if(c||(c=t.calendar),d="log"===t.type?{type:"linear",range:[h,u]}:{type:t.type,range:o.simpleMap([h,u],t.c2r,0,c),calendar:c},s.setConvert(d),l=l&&me.dtick(l,d.type))d.dtick=l,d.tick0=me.tick0(void 0,d.type,c);else{if(n)g=(u-h)/n;else{var d,u,h,m,f,p,g,b=o.distinctVals(e),j=Math.pow(10,Math.floor(Math.log(b.minDiff)/Math.LN10)),y=j*o.roundUp(b.minDiff/j,[.9,1.9,4.9,9.9],!0);g=Math.max(y,2*o.stdev(e)/Math.pow(e.length,a?.25:.4)),i(g)||(g=1)}s.autoTicks(d,g)}if(f=d.dtick,m=s.tickIncrement(s.tickFirst(d),f,"reverse",c),"number"==typeof f)m=function(e,t,n,s,o){var a,r,c,h=0,m=0,d=0,u=0;function l(t){return(1+100*(t-e)/n.dtick)%100<2}for(a=0;a<t.length;a++)t[a]%1==0?d++:i(t[a])||u++,l(t[a])&&h++,l(t[a]+n.dtick/2)&&m++;return r=t.length-u,d===r&&"date"!==n.type?n.dtick<1?e=s-.5*n.dtick:(e-=.5)+n.dtick<s&&(e+=n.dtick):m<.1*r&&(h>.3*r||l(s)||l(o))&&(c=n.dtick/2,e+=e+c<s?c:-c),e}(m,e,d,h,u),p=m+(1+Math.floor((u-m)/f))*f;else for("M"===d.dtick.charAt(0)&&(m=function(e,t,n,i,a){var l,d,c=o.findExactDates(t,a);return c.exactDays>.8&&(d=Number(n.substr(1)),c.exactYears>.8&&d%12==0?e=s.tickIncrement(e,"M6","reverse")+1.5*r:c.exactMonths>.8?e=s.tickIncrement(e,"M1","reverse")+15.5*r:e-=v,l=s.tickIncrement(e,n),l<=i)?l:e}(m,e,f,h,c)),p=m;p<=u;)p=s.tickIncrement(p,f,!1,c);return{start:t.c2r(m,0,c),end:t.c2r(p,0,c),size:f,_dataSpan:u-h}},s.prepMinorTicks=function(e,t,n){if(!t.minor.dtick){if(delete e.dtick,m=t.dtick&&i(t._tmin),m?(f=s.tickIncrement(t._tmin,t.dtick,!0),h=[t._tmin,.99*f+.01*t._tmin]):(l=o.simpleMap(t.range,t.r2l),h=[l[0],.8*l[0]+.2*l[1]]),e.range=o.simpleMap(h,t.l2r),e._isMinor=!0,s.prepTicks(e,n),m){var l,h,m,f,p=i(t.dtick),u=i(e.dtick),a=p?t.dtick:+t.dtick.substring(1),c=u?e.dtick:+e.dtick.substring(1);p&&u?Z(a,c)?a===2*d&&c===2*r&&(e.dtick=d):a===2*d&&c===3*r?e.dtick=d:a!==d||(t._input.minor||{}).nticks?ne(a/c,2.5)?e.dtick=a/2:e.dtick=a:e.dtick=r:"M"===String(t.dtick).charAt(0)?u?e.dtick="M1":Z(a,c)?a>=12&&2===c&&(e.dtick="M3"):e.dtick=t.dtick:"L"===String(e.dtick).charAt(0)?"L"===String(t.dtick).charAt(0)?Z(a,c)||(e.dtick=ne(a/c,2.5)?t.dtick/2:t.dtick):e.dtick="D1":"D2"===e.dtick&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}void 0===t.minor._tick0Init&&(e.tick0=t.tick0)},s.prepTicks=function(e,t){var n,a,c=o.simpleMap(e.range,e.r2l,void 0,void 0,t);("auto"===e.tickmode||!e.dtick)&&(n=e.nticks,n||("category"===e.type||"multicategory"===e.type?(a=e.tickfont?o.bigFont(e.tickfont.size||12):15,n=e._length/a):(a="y"===e._id.charAt(0)?40:80,n=o.constrain(e._length/a,4,9)+1),"radialaxis"===e._name&&(n*=2)),e.minor&&"array"!==e.minor.tickmode||"array"===e.tickmode&&(n*=100),e._roughDTick=Math.abs(c[1]-c[0])/n,s.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))),"period"===e.ticklabelmode&&function(e){function c(){return!i(e.dtick)&&"M"===e.dtick.charAt(0)}var n,a,o=c(),t=s.getTickFormat(e);t&&(a=e._dtickInit!==e.dtick,/%[fLQsSMX]/.test(t)||(/%[HI]/.test(t)?(n=m,a&&!o&&e.dtick<m&&(e.dtick=m)):/%p/.test(t)?(n=v,a&&!o&&e.dtick<v&&(e.dtick=v)):/%[Aadejuwx]/.test(t)?(n=r,a&&!o&&e.dtick<r&&(e.dtick=r)):/%[UVW]/.test(t)?(n=d,a&&!o&&e.dtick<d&&(e.dtick=d)):/%[Bbm]/.test(t)?(n=y,a&&(o?B(e.dtick)<1:e.dtick<$)&&(e.dtick="M1")):/%[q]/.test(t)?(n=K,a&&(o?B(e.dtick)<3:e.dtick<L)&&(e.dtick="M3")):/%[Yy]/.test(t)&&(n=A,a&&(o?B(e.dtick)<12:e.dtick<Y)&&(e.dtick="M12")))),(o=c())&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=n}(e),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),pe(e)},s.calcTicks=function(e,t){for(var a,c,l,g,b,j,O,x,C,k,S,M,F,D,N,P,I,W,U,G,le,E=e.type,H=e.calendar,re=e.ticklabelstep,J="period"===e.ticklabelmode,f=o.simpleMap(e.range,e.r2l,void 0,void 0,t),h=f[1]<f[0],B=Math.min(f[0],f[1]),z=Math.max(f[0],f[1]),de=Math.max(1e3,e._length||0),p=[],V=[],n=[],_=[],te=e.minor&&(e.minor.ticks||e.minor.showgrid),u=1,se,ie;u>=(te?0:1);u--)if(k=!u,u?(e._dtickInit=e.dtick,e._tick0Init=e.tick0):(e.minor._dtickInit=e.minor.dtick,e.minor._tick0Init=e.minor.tick0),l=u?e:o.extendFlat({},e,e.minor),k?s.prepMinorTicks(l,e,t):s.prepTicks(l,t),"array"!==l.tickmode)if("sync"!==l.tickmode){var ne=Q(f),ce=ne[0],w=ne[1],oe=i(l.dtick),he="log"===E&&!oe&&"L"!==l.dtick.charAt(0),Z=s.tickFirst(l,t);if(u){if(e._tmin=Z,Z<ce!==h)break;"category"!==E&&"multicategory"!==E||(w=h?Math.max(-.5,w):Math.min(e._categories.length-.5,w))}I=null,a=Z,u&&(oe?F=e.dtick:"date"===E?"string"==typeof e.dtick&&"M"===e.dtick.charAt(0)&&(F=y*e.dtick.substring(1)):F=e._roughDTick,D=Math.round((e.r2l(a)-e.r2l(e.tick0))/F)-1),M=l.dtick;for(l.rangebreaks&&l._tick0Init!==l.tick0&&(a=X(a,e),h||(a=s.tickIncrement(a,M,!h,H))),u&&J&&(a=s.tickIncrement(a,M,!h,H),D--);h?a>=w:a<=w;a=s.tickIncrement(a,M,h,H)){if(u&&D++,l.rangebreaks&&!h){if(a<ce)continue;if(l.maskBreaks(a)===T&&X(a,l)>=z)break}if(n.length>de||a===I)break;I=a,j={value:a},u?(he&&a!==(0|a)&&(j.simpleLabel=!0),re>1&&D%re&&(j.skipLabel=!0),n.push(j)):(j.minor=!0,_.push(j))}}else n=[],p=Me(e);else u?(n=[],p=ae(e,!k)):(_=[],V=ae(e,!k));if(te&&!("inside"===e.minor.ticks&&"outside"===e.ticks||"outside"===e.minor.ticks&&"inside"===e.ticks)){for(var ue=n.map(function(e){return e.value}),ee=[],R=0;R<_.length;R++)if(G=_[R],U=G.value,-1===ue.indexOf(U)){for(N=!1,x=0;!N&&x<n.length;x++)1e7+n[x].value===1e7+U&&(N=!0);N||ee.push(G)}_=ee}if(J&&function(e,t,n){for(s=0;s<e.length;s++){var f=e[s].value,u=s,c=s+1;s<e.length-1?(u=s,c=s+1):s>0?(u=s-1,c=s):(u=s,c=s);var s,l,h,p,g,b,j=e[u].value,_=e[c].value,i=Math.abs(_-j),a=n||i,o=0;if(a>=Y?o=i>=Y&&i<=Ne?i:A:n===K&&a>=L?o=i>=L&&i<=De?i:K:a>=$?o=i>=$&&i<=Fe?i:y:n===d&&a>=d?o=d:a>=r?o=r:n===v&&a>=v?o=v:n===m&&a>=m&&(o=m),o>=i&&(o=i,g=!0),b=f+o,t.rangebreaks&&o>0){for(h=0,l=0;l<84;l++)p=(l+.5)/84,t.maskBreaks(f*(1-p)+p*b)!==T&&h++;(o*=h/84)||(e[s].drop=!0),g&&i>d&&(o=i)}(o>0||0===s)&&(e[s].periodX=f+o/2)}}(n,e,e._definedDelta),e.rangebreaks){se="y"===e._id.charAt(0),S=1,"auto"===e.tickmode&&(S=e.tickfont?e.tickfont.size:12),O=NaN;for(c=n.length-1;c>-1;c--)n[c].drop?n.splice(c,1):(n[c].value=X(n[c].value,e),C=e.c2p(n[c].value),(se?O>C-S:O<C+S)?n.splice(h?c+1:c,1):O=C)}q(e)&&360===Math.abs(f[1]-f[0])&&n.pop(),e._tmax=(n[n.length-1]||{}).value,e._prevDateHead="",e._inCalcTicks=!0,P=function(t){t.text="",e._prevDateHead=le};for(n=n.concat(_),c=0;c<n.length;c++)ie=n[c].minor,W=n[c].value,ie?V.push({x:W,minor:!0}):(le=e._prevDateHead,g=s.tickText(e,W,!1,n[c].simpleLabel),void 0!==(b=n[c].periodX)&&(g.periodX=b,(b>z||b<B)&&(b>z&&(g.periodX=z),b<B&&(g.periodX=B),P(g))),n[c].skipLabel&&P(g),p.push(g));return p=p.concat(V),e._inCalcTicks=!1,J&&p.length&&(p[0].noTick=!0),p};var M=[2,5,10],ce=[1,2,3,6,12],le=[1,2,5,10,15,30],Se=[1,2,3,7,14],ue=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],he=[-.301,0,.301,.699,1],Ae=[15,30,45,90,180];function u(e,t,n){return t*o.roundUp(e/t,n)}function pe(e){if(t=e.dtick,e._tickexponent=0,i(t)||"string"==typeof t||(t=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type){var t,o,c,l=e.r2l(e.tick0),a=e.l2r(l).replace(/(^-|i)/g,""),n=a.length;"M"===String(t).charAt(0)?n>10||"01-01"!==a.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m":t>=r&&n<=10||t>=15*r?e._tickround="d":t>=S&&n<=16||t>=m?e._tickround="M":t>=I&&n<=19||t>=S?e._tickround="S":(c=e.l2r(l+t).replace(/^-/,"").length,e._tickround=Math.max(n,c)-20,e._tickround<0&&(e._tickround=4))}else if(i(t)||"L"===t.charAt(0)){o=e.range.map(e.r2d||Number),i(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var d=Math.max(Math.abs(o[0]),Math.abs(o[1])),s=Math.floor(Math.log(d)/Math.LN10+.01),u=void 0===e.minexponent?3:e.minexponent;Math.abs(s)>u&&(N(e.exponentformat)&&!U(s)?e._tickexponent=3*Math.round((s-1)/3):e._tickexponent=s)}else e._tickround=null}function ge(e,t,n){var s=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:s.size,font:s.family,fontWeight:s.weight,fontStyle:s.style,fontVariant:s.variant,fontColor:s.color}}s.autoTicks=function(e,t,n){function d(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type)if(e.tick0=o.dateTick0(e.calendar,0),c=2*t,c>A)t/=A,a=d(10),e.dtick="M"+12*u(t,a,M);else if(c>y)t/=y,e.dtick="M"+u(t,1,ce);else if(c>r){if(e.dtick=u(t,r,e._hasDayOfWeekBreaks?[1,2,7,14]:Se),!n){var a,c,l,f,p,g=s.getTickFormat(e),h="period"===e.ticklabelmode;h&&(e._rawTick0=e.tick0),/%[uVW]/.test(g)?e.tick0=o.dateTick0(e.calendar,2):e.tick0=o.dateTick0(e.calendar,1),h&&(e._dowTick0=e.tick0)}}else c>m?e.dtick=u(t,m,ce):c>S?e.dtick=u(t,S,le):c>I?e.dtick=u(t,I,le):(a=d(10),e.dtick=u(t,a,M));else"log"===e.type?(e.tick0=0,l=o.simpleMap(e.range,e.r2l),e._isMinor&&(t*=1.5),t>.7?e.dtick=Math.ceil(t):Math.abs(l[1]-l[0])<1?(f=1.5*Math.abs((l[1]-l[0])/t),t=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/f,a=d(10),e.dtick="L"+u(t,a,M)):e.dtick=t>.3?"D2":"D1"):"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):q(e)?(e.tick0=0,a=1,e.dtick=u(t,a,Ae)):(e.tick0=0,a=d(10),e.dtick=u(t,a,M));if(0===e.dtick&&(e.dtick=1),!i(e.dtick)&&"string"!=typeof e.dtick)throw p=e.dtick,e.dtick=1,"ax.dtick error: "+String(p)},s.tickIncrement=function(e,t,n,s){if(a=n?-1:1,i(t))return o.increment(e,a*t);if(r=t.charAt(0),c=a*Number(t.substr(1)),"M"===r)return o.incrementMonth(e,c,s);if("L"===r)return Math.log(Math.pow(10,e)+c)/Math.LN10;if("D"===r){var a,r,c,u="D2"===t?he:ue,d=e+.01*a,h=o.roundUp(o.mod(d,1),u,n);return Math.floor(d)+Math.log(l.round(Math.pow(10,h),1))/Math.LN10}throw"unrecognized dtick "+String(t)},s.tickFirst=function(e,t){var n,u,h,m,f,p,v,j,_,w,b=e.r2l||Number,g=o.simpleMap(e.range,b,void 0,void 0,t),c=g[1]<g[0],y=c?Math.floor:Math.ceil,r=Q(g)[0],a=e.dtick,d=b(e.tick0);if(i(a))return m=y((r-d)/a)*a+d,"category"!==e.type&&"multicategory"!==e.type||(m=o.constrain(m,0,e._categories.length-1)),m;if(u=a.charAt(0),f=Number(a.substr(1)),"M"===u){for(p=0,n=d;p<10;){if(((h=s.tickIncrement(n,a,c,e.calendar))-r)*(n-r)<=0)return c?Math.min(n,h):Math.max(n,h);v=(r-(n+h)/2)/(h-n),j=u+(Math.abs(Math.round(v))||1)*f,n=s.tickIncrement(n,j,v<0?!c:c,e.calendar),p++}return o.error("tickFirst did not converge",e),n}if("L"===u)return Math.log(y((Math.pow(10,r)-d)/f)*f+d)/Math.LN10;if("D"===u)return _="D2"===a?he:ue,w=o.roundUp(o.mod(r,1),_,c),Math.floor(r)+Math.log(l.round(Math.pow(10,w),1))/Math.LN10;throw"unrecognized dtick "+String(a)},s.tickText=function(e,t,n,a){var c,h,m,p,b,r=ge(e,t),v="array"===e.tickmode,d=n||v,l=e.type,j="category"===l?e.d2l_noadd:e.d2l,u=function(t){var n=e.l2p(t);return n>=0&&n<=e._length?t:null};if(v&&o.isArrayOrTypedArray(e.ticktext)){p=o.simpleMap(e.range,e.r2l),b=(Math.abs(p[1]-p[0])-(e._lBreaks||0))/1e4;for(c=0;c<e.ticktext.length&&!(Math.abs(t-j(e.tickvals[c]))<b);c++);if(c<e.ticktext.length)return r.text=String(e.ticktext[c]),r.xbnd=[u(r.x-.5),u(r.x+e.dtick-.5)],r}function g(s){if(void 0===s)return!0;if(n)return"none"===s;var o={first:e._tmin,last:e._tmax}[s];return"all"!==s&&t!==o}return h=n?"never":"none"!==e.exponentformat&&g(e.showexponent)?"hide":"",("date"===l?function(e,t,n,a){var r,c,d,u,h,l=e._tickround,m=n&&e.hoverformat||s.getTickFormat(e);(a=!m&&a)&&(l=i(l)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[l]),r=o.formatDate(t.x,m,l,e._dateFormat,e.calendar,e._extraFormat),d=r.indexOf(`
`),(-1!==d&&(c=r.substr(d+1),r=r.substr(0,d)),a&&(void 0===c||"00:00:00"!==r&&"00:00"!==r?8===r.length&&(r=r.replace(/:00$/,"")):(r=c,c="")),c)&&(n?"d"===l?r+=", "+c:r=c+(r?", "+r:""):e._inCalcTicks&&e._prevDateHead===c?(u=_(e),h=e._trueSide||e.side,(!u&&"top"===h||u&&"bottom"===h)&&(r+="<br> ")):(e._prevDateHead=c,r+="<br>"+c)),t.text=r}(e,r,n,d):"log"===l?function(e,t,n,s,a){var m,r=e.dtick,c=t.x,p=e.tickformat,d="string"==typeof r&&r.charAt(0);if("never"===a&&(a=""),s&&"L"!==d&&(r="L3",d="L"),p||"L"===d)t.text=x(Math.pow(10,c),e,a,s);else if(i(r)||"D"===d&&o.mod(c+.01,1)<.1){var l=Math.round(c),h=Math.abs(l),u=e.exponentformat;"power"===u||N(u)&&U(l)?(t.text=0===l?1:1===l?"10":"10<sup>"+(l>1?"":f)+h+"</sup>",t.fontSize*=1.25):("e"===u||"E"===u)&&h>2?t.text="1"+u+(l>0?"+":f)+h:(t.text=x(Math.pow(10,c),e,"","fakehover"),"D1"===r&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==d)throw"unrecognized dtick "+String(r);t.text=String(Math.round(Math.pow(10,o.mod(c,1)))),t.fontSize*=.75}"D1"===e.dtick&&(m=String(t.text).charAt(0),"0"!==m&&"1"!==m||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(c<0?.5:.25))))}(e,r,0,d,h):"category"===l?function(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n=""),t.text=String(n)}(e,r):"multicategory"===l?function(e,t,n){var a=Math.round(t.x),s=e._categories[a]||[],o=void 0===s[1]?"":String(s[1]),i=void 0===s[0]?"":String(s[0]);n?t.text=i+" - "+o:(t.text=o,t.text2=i)}(e,r,n):q(e)?function(e,t,n,s,i){if("radians"!==e.thetaunit||n)t.text=x(t.x,e,i,s);else{var a,c,r=t.x/180;0===r?t.text="0":(a=function(e){function n(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){for(var t=1;!n(Math.round(e*t)/t,e);)t*=10;return t}(e),s=e*t,o=Math.abs(function e(t,s){return n(s,0)?t:e(s,t%s)}(s,t));return[Math.round(s/o),Math.round(t/o)]}(r),a[1]>=100?t.text=x(o.deg2rad(t.x),e,i,s):(c=t.x<0,1===a[1]?1===a[0]?t.text="π":t.text=a[0]+"π":t.text=["<sup>",a[0],"</sup>","⁄","<sub>",a[1],"</sub>","π"].join(""),c&&(t.text=f+t.text)))}}(e,r,n,d,h):function(e,t,n,s,o){"never"===o?o="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(o="hide"),t.text=x(t.x,e,o,s)}(e,r,0,d,h),a||(e.tickprefix&&!g(e.showtickprefix)&&(r.text=e.tickprefix+r.text),e.ticksuffix&&!g(e.showticksuffix)&&(r.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(r.text))&&(m=e.labelalias[r.text],"string"==typeof m&&(r.text=m)),("boundaries"===e.tickson||e.showdividers)&&(r.xbnd=[u(r.x-.5),u(r.x+e.dtick-.5)]),r},s.hoverLabelText=function(e,t,n){n&&(e=o.extendFlat({},e,{hoverformat:n}));var r,c,i=o.isArrayOrTypedArray(t)?t[0]:t,a=o.isArrayOrTypedArray(t)?t[1]:void 0;return void 0!==a&&a!==i?s.hoverLabelText(e,i,n)+" - "+s.hoverLabelText(e,a,n):(r="log"===e.type&&i<=0,c=s.tickText(e,e.c2l(r?-i:i),"hover").text,r?0===i?"0":f+c:c)},ve=["f","p","n","μ","m","","k","M","G","T"];function N(e){return"SI"===e||"B"===e}function U(e){return e>14||e<-15}function x(e,t,n,a){var d,h,m,p,g,v=e<0,l=t._tickround,c=n||t.exponentformat||"B",r=t._tickexponent,u=s.getTickFormat(t),b=t.separatethousands;if(a&&(d={exponentformat:c,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:i(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]},pe(d),l=(Number(d._tickround)||0)+4,r=d._tickexponent,t.hoverformat&&(u=t.hoverformat)),u)return t._numFormat(u)(e).replace(/-/g,f);if(m=Math.pow(10,-l)/2,"none"===c&&(r=0),(e=Math.abs(e))<m)e="0",v=!1;else{if(e+=m,r&&(e*=Math.pow(10,-r),l+=r),0===l)e=String(Math.floor(e));else if(l<0){e=(e=String(Math.round(e))).substr(0,e.length+l);for(p=l;p<0;p++)e+="0"}else g=(e=String(e)).indexOf(".")+1,g&&(e=e.substr(0,g+l).replace(/\.?0+$/,""));e=o.numSeparate(e,t._separators,b)}return r&&"hide"!==c&&(N(c)&&U(r)&&(c="power"),h=r<0?f+-r:"power"!==c?"+"+r:String(r),"e"===c||"E"===c?e+=c+h:"power"===c?e+="×10<sup>"+h+"</sup>":"B"===c&&9===r?e+="B":N(c)&&(e+=ve[r/3+5])),v?f+e:e}function _e(e,t){if(e){var n=Object.keys(Oe).reduce(function(e,n){return-1!==t.indexOf(n)&&Oe[n].forEach(function(t){e[t]=1}),e},{});Object.keys(e).forEach(function(t){n[t]||(1===t.length?e[t]=0:delete e[t])})}}function Ce(e,t){for(var n,r,a=[],s={},i=0;i<t.length;i++)n=t[i],s[n.text2]?s[n.text2].push(n.x):s[n.text2]=[n.x];for(r in s)a.push(ge(e,o.interp(s[r],.5),r));return a}function P(e){return void 0!==e.periodX?e.periodX:e.x}function k(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function we(e){var t=e.title.font.size,n=(e.title.text.match(g.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?t*(p+n*C):n?t*(n+1)*C:t}function je(e,t){var n=e.l2p(t);return n>1&&n<e._length-1}function W(e){var t=l.select(e),n=t.select(".text-math-group");return n.empty()?t.select("text"):n}function V(e){return e._id+".automargin"}function de(e){return V(e)+".mirror"}function ie(e){return e._id+".rangeslider"}function D(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function Te(e,t,n){var i,r,l=[],c=[],u=e.layout;for(i=0;i<t.length;i++)l.push(s.getFromId(e,t[i]));for(i=0;i<n.length;i++)c.push(s.getFromId(e,n[i]));var y=Object.keys(Le),_=["anchor","domain","overlaying","position","side","tickangle","editType"],m=["linear","log"];for(i=0;i<y.length;i++){var h,g,v,a=y[i],f=l[0][a],p=c[0][a],d=!0,b=!1,j=!1;if("_"!==a.charAt(0)&&"function"!=typeof f&&-1===_.indexOf(a)){for(r=1;r<l.length&&d;r++)h=l[r][a],"type"===a&&-1!==m.indexOf(f)&&-1!==m.indexOf(h)&&f!==h?b=!0:h!==f&&(d=!1);for(r=1;r<c.length&&d;r++)g=c[r][a],"type"===a&&-1!==m.indexOf(p)&&-1!==m.indexOf(g)&&p!==g?j=!0:c[r][a]!==p&&(d=!1);d&&(b&&(u[l[0]._name].type="linear"),j&&(u[c[0]._name].type="linear"),ze(u,a,l,c,e._fullLayout._dfltTitle))}}for(i=0;i<e._fullLayout.annotations.length;i++)v=e._fullLayout.annotations[i],-1!==t.indexOf(v.xref)&&-1!==n.indexOf(v.yref)&&o.swapAttrs(u.annotations[i],["?"])}function ze(e,t,n,s,i){var a,r=o.nestedProperty,c=r(e[n[0]._name],t).get(),l=r(e[s[0]._name],t).get();for("title"===t&&(c&&c.text===i.x&&(c.text=i.y),l&&l.text===i.y&&(l.text=i.x)),a=0;a<n.length;a++)r(e,n[a]._name+"."+t).set(l);for(a=0;a<s.length;a++)r(e,s[a]._name+"."+t).set(c)}function q(e){return"angularaxis"===e._id}function X(e,t){for(var n,o=t._rangebreaks.length,s=0;s<o;s++)if(n=t._rangebreaks[s],e>=n.min&&e<n.max)return n.max;return e}function _(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function F(e,t){_(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function ee(e,t,n,s){var o="free"===e.anchor||void 0!==e.overlaying&&!1!==e.overlaying?e.overlaying:e._id,i=s?"right"===e.side?t:-t:t;o in n||(n[o]={}),e.side in n[o]||(n[o][e.side]=0),n[o][e.side]+=i}s.getTickFormat=function(e){var t,n,s,o,i,a,r,c;function d(e){return"string"!=typeof e?e:Number(e.replace("M",""))*y}function l(e,t){if(n=["L","D"],typeof e==typeof t){if("number"==typeof e)return e-t;var n,s=n.indexOf(e.charAt(0)),o=n.indexOf(t.charAt(0));return s===o?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):s-o}return"number"==typeof e?1:-1}function u(e,t){var n=null===t[0],s=null===t[1],o=l(e,t[0])>=0,i=l(e,t[1])<=0;return(n||o)&&(s||i)}if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((n=e.tickformatstops[t]).enabled&&(r=e.dtick,c=n.dtickrange,s=void 0,i=void 0,o=void 0,s=d||function(e){return e},i=c[0],o=c[1],(!i&&"number"!=typeof i||s(i)<=s(r))&&(!o&&"number"!=typeof o||s(o)>=s(r)))){a=n;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((n=e.tickformatstops[t]).enabled&&u(e.dtick,n.dtickrange)){a=n;break}}return a?a.value:e.tickformat},s.getSubplots=function(e,t){var n=e._fullLayout._subplots,o=n.cartesian.concat(n.gl2d||[]),i=t?s.findSubplotsWithAxis(o,t):o;return i.sort(function(e,t){var n=e.substr(1).split("y"),s=t.substr(1).split("y");return n[0]===s[0]?+n[1]-+s[1]:+n[0]-+s[0]}),i},s.findSubplotsWithAxis=function(e,t){for(var s,i=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),o=[],n=0;n<e.length;n++)s=e[n],i.test(s)&&o.push(s);return o},s.makeClipPaths=function(e){if(t=e._fullLayout,!t._hasOnlyLargeSploms){var t,n,o,a,d={_offset:0,_length:t.width,_id:""},u={_offset:0,_length:t.height,_id:""},r=s.list(e,"x",!0),c=s.list(e,"y",!0),i=[];for(n=0;n<r.length;n++)for(i.push({x:r[n],y:u}),o=0;o<c.length;o++)0===n&&i.push({x:d,y:c[o]}),i.push({x:r[n],y:c[o]});a=t._clips.selectAll(".axesclip").data(i,function(e){return e.x._id+e.y._id}),a.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),a.exit().remove(),a.each(function(e){l.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},s.draw=function(e,t,n){i=e._fullLayout,"redraw"===t&&i._paper.selectAll("g.subplot").each(function(e){var n,s,o=e[0],t=i._plots[o];t&&(n=t.xaxis,s=t.yaxis,t.xaxislayer.selectAll("."+n._id+"tick").remove(),t.yaxislayer.selectAll("."+s._id+"tick").remove(),t.xaxislayer.selectAll("."+n._id+"tick2").remove(),t.yaxislayer.selectAll("."+s._id+"tick2").remove(),t.xaxislayer.selectAll("."+n._id+"divider").remove(),t.yaxislayer.selectAll("."+s._id+"divider").remove(),t.minorGridlayer&&t.minorGridlayer.selectAll("path").remove(),t.gridlayer&&t.gridlayer.selectAll("path").remove(),t.zerolinelayer&&t.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+n._id+"title").remove(),i._infolayer.select(".g-"+s._id+"title").remove())});var i,r,a=t&&"redraw"!==t?t:s.listIds(e),c=s.list(e).filter(function(e){return e.autoshift}).map(function(e){return e.overlaying});return a.map(function(t){var o,n=s.getFromId(e,t);"sync"===n.tickmode&&n.overlaying&&(o=a.findIndex(function(e){return e===n.overlaying}),o>=0&&a.unshift(a.splice(o,1).shift()))}),r={false:{left:0,right:0}},o.syncOrAsync(a.map(function(t){return function(){if(t){var a,i=s.getFromId(e,t);return n||(n={}),n.axShifts=r,n.overlayingShiftedAx=c,a=s.drawOne(e,i,n),i._shiftPusher&&ee(i,i._fullDepth||0,r,!0),i._r=i.range.slice(),i._rl=o.simpleMap(i._r,i.r2l),a}}}))},s.drawOne=function(e,t,n){R=(n=n||{}).axShifts||{},te=n.overlayingShiftedAx||[],t.setScale();var b=e._fullLayout,f=t._id,a=f.charAt(0),N=s.counterLetter(f),le=b._plots[t._mainSubplot];if(le){(t._shiftPusher=t.autoshift||-1!==te.indexOf(t._id)||-1!==te.indexOf(t.overlaying),t._shiftPusher&"free"===t.anchor)&&(Z=t.linewidth/2||0,"inside"===t.ticks&&(Z+=t.ticklen),ee(t,Z,R,!0),ee(t,t.shift||0,R,!1)),!0===n.skipTitle&&void 0!==t._shift||(t._shift=function(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}(t,R));var i,r,u,h,m,x,S,M,T,D,R,P,H,I,B,$,U,K,q,Y,G,Z,J,te,L=le[a+"axislayer"],pe=t._mainLinePosition,l=pe+=t._shift,Q=t._mainMirrorPosition,d=t._vals=s.calcTicks(t),me=[t.mirror,l,Q].join("_"),ae,ne,oe,se,ue;for(i=0;i<d.length;i++)d[i].axInfo=me;if(t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null,T={},t.visible){var y,z,v=s.makeTransTickFn(t),he=s.makeTransTickLabelFn(t),ce="inside"===t.ticks,re="outside"===t.ticks;if("boundaries"===t.tickson?($=function(e,t){var n,s=[],i=function(e,t){var n=e.xbnd[t];null!==n&&s.push(o.extendFlat({},e,{x:n}))};if(t.length){for(n=0;n<t.length;n++)i(t[n],0);i(t[n-1],1)}return s}(0,d),y=s.clipEnds(t,$),z=ce?y:$):(y=s.clipEnds(t,d),z=ce&&"period"!==t.ticklabelmode?y:d),ae=t._gridVals=y,H=function(e,t){var n,s,i,a=[],r=t.length&&t[t.length-1].x<t[0].x,c=function(e,t){var n=e.xbnd[t];null!==n&&a.push(o.extendFlat({},e,{x:n}))};if(e.showdividers&&t.length){for(n=0;n<t.length;n++)s=t[n],s.text2!==i&&c(s,r?1:0),i=s.text2;c(t[n-1],r?0:1)}return a}(t,d),!b._hasOnlyLargeSploms){U=t._subplotsWith,K={};for(i=0;i<U.length;i++)x=U[i],h=(m=b._plots[x])[N+"axis"],Y=h._mainAxis._id,K[Y]||(K[Y]=1,I="x"===a?"M0,"+h._offset+"v"+h._length:"M"+h._offset+",0h"+h._length,s.drawGrid(e,t,{vals:ae,counterAxis:h,layer:m.gridlayer.select("."+f),minorLayer:m.minorGridlayer.select("."+f),path:I,transFn:v}),s.drawZeroLine(e,t,{counterAxis:h,layer:m.zerolinelayer,path:I,transFn:v}))}if(r=s.getTickSigns(t),S=s.getTickSigns(t,"minor"),t.ticks||t.minor&&t.minor.ticks)if(oe=s.makeTickPath(t,l,r[2]),se=s.makeTickPath(t,l,S[2],{minor:!0}),t._anchorAxis&&t.mirror&&!0!==t.mirror?(P=s.makeTickPath(t,Q,r[3]),J=s.makeTickPath(t,Q,S[3],{minor:!0}),D=oe+P,ne=se+J):(P="",J="",D=oe,ne=se),t.showdividers&&re&&"boundaries"===t.tickson){G={};for(i=0;i<H.length;i++)G[H[i].x]=1;B=function(e){return G[e.x]?P:D}}else B=function(e){return e.minor?ne:D};if(s.drawTicks(e,t,{vals:z,layer:L,path:B,transFn:v}),"allticks"===t.mirror){q=Object.keys(t._linepositions||{});for(i=0;i<q.length;i++){x=q[i],m=b._plots[x];var X=t._linepositions[x]||[],ge=X[0],ve=X[1],F=X[2],fe=s.makeTickPath(t,ge,F?r[0]:S[0],{minor:F})+s.makeTickPath(t,ve,F?r[1]:S[1],{minor:F});s.drawTicks(e,t,{vals:z,layer:m[a+"axislayer"],path:fe,transFn:v})}}return u=[],u.push(function(){return s.drawLabels(e,t,{vals:d,layer:L,plotinfo:m,transFn:he,labelFns:s.makeLabelFns(t,l)})}),"multicategory"===t.type?(ue={x:2,y:10}[a],u.push(function(){var n={x:"height",y:"width"}[a],o=A()[n]+ue+(t._tickAngles[f+"tick"]?t.tickfont.size*C:0);return s.drawLabels(e,t,{vals:Ce(t,d),layer:L,cls:f+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:v,labelFns:s.makeLabelFns(t,l+o*r[4])})}),u.push(function(){return t._depth=r[4]*(A("tick2")[t.side]-l),function(e,t,n){var o=t._id+"divider",i=n.vals,s=n.layer.selectAll("path."+o).data(i,k);s.exit().remove(),s.enter().insert("path",":first-child").classed(o,1).classed("crisp",1).call(w.stroke,t.dividercolor).style("stroke-width",c.crispRound(e,t.dividerwidth,1)+"px"),s.attr("transform",n.transFn).attr("d",n.path)}(e,t,{vals:H,layer:L,path:s.makeTickPath(t,l,r[4],{len:t._depth}),transFn:v})})):t.title.hasOwnProperty("standoff")&&u.push(function(){t._depth=r[4]*(A()[t.side]-l)}),M=O.getComponentMethod("rangeslider","isVisible")(t),n.skipTitle||M&&"bottom"===t.side||u.push(function(){return function(e,t){var n,i,a,r,l,d,u,h,m,b,y=e._fullLayout,v=t._id,f=v.charAt(0),o=t.title.font.size,j=(t.title.text.match(g.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?"bottom"===t.side||"right"===t.side?n=t._depth+t.title.standoff+o*p:"top"!==t.side&&"left"!==t.side||(n=t._depth+t.title.standoff+o*(E+j*C)):(d=_(t),"multicategory"===t.type?n=t._depth:(l=1.5*o,d&&(l=.5*o,"outside"===t.ticks&&(l+=t.ticklen)),n=10+l+(t.linewidth?t.linewidth-1:0)),d||(n+="x"===f?"top"===t.side?o*(t.showticklabels?1:0):o*(t.showticklabels?1.5:.5):"right"===t.side?o*(t.showticklabels?1:.5):o*(t.showticklabels?.5:0))),a=s.getPxPosition(e,t),("x"===f?(h=t._offset+t._length/2,m="top"===t.side?a-n:a+n):(m=t._offset+t._length/2,h="right"===t.side?a+n:a-n,b={rotate:"-90",offset:0}),"multicategory"!==t.type)&&(i=t._selections[t._id+"tick"],(r={selection:i,side:t.side},i&&i.node()&&i.node().parentNode)&&(u=c.getTranslate(i.node().parentNode),r.offsetLeft=u.x,r.offsetTop=u.y),t.title.hasOwnProperty("standoff")&&(r.pad=0)),t._titleStandoff=n,Re.draw(e,v+"title",{propContainer:t,propName:t._name+".title.text",placeholder:y._dfltTitle[f],avoid:r,transform:b,attributes:{x:h,y:m,"text-anchor":"middle"}})}(e,t)}),u.push(function(){var n,o,r,c,u,h,m,f,p,g,v,_,i=t.side.charAt(0),y=xe[t.side].charAt(0),l=s.getPxPosition(e,t),d=re?t.ticklen:0;(t.automargin||M||t._shiftPusher)&&("multicategory"===t.type?n=A("tick2"):(n=A(),"x"===a&&"b"===i&&(t._depth=Math.max(n.width>0?n.bottom-l:0,d)))),h=0,u=0,(t._shiftPusher&&(h=Math.max(d,n.height>0?"l"===i?l-n.left:n.right-l:0),t.title.text!==b._dfltTitle[a]&&(u=(t._titleStandoff||0)+(t._titleScoot||0),"l"===i&&(u+=we(t))),t._fullDepth=Math.max(h,u)),t.automargin)&&(o={x:0,y:0,r:0,l:0,t:0,b:0},c=[0,1],p="number"==typeof t._shift?t._shift:0,"x"===a?("b"===i?o[i]=t._depth:(o[i]=t._depth=Math.max(n.width>0?l-n.top:0,d),c.reverse()),n.width>0)&&(g=n.right-(t._offset+t._length),g>0&&(o.xr=1,o.r=g),m=t._offset-n.left,m>0&&(o.xl=0,o.l=m)):("l"===i?(t._depth=Math.max(n.height>0?l-n.left:0,d),o[i]=t._depth-p):(t._depth=Math.max(n.height>0?n.right-l:0,d),o[i]=t._depth+p,c.reverse()),n.height>0)&&(f=n.bottom-(t._offset+t._length),f>0&&(o.yb=0,o.b=f),v=t._offset-n.top,v>0&&(o.yt=1,o.t=v)),o[N]="free"===t.anchor?t.position:t._anchorAxis.domain[c[0]],t.title.text!==b._dfltTitle[a]&&(o[i]+=we(t)+(t.title.standoff||0)),t.mirror&&"free"!==t.anchor&&((r={x:0,y:0,r:0,l:0,t:0,b:0})[y]=t.linewidth,t.mirror&&!0!==t.mirror&&(r[y]+=d),!0===t.mirror||"ticks"===t.mirror?r[N]=t._anchorAxis.domain[c[1]]:"all"!==t.mirror&&"allticks"!==t.mirror||(r[N]=[t._counterDomainMin,t._counterDomainMax][c[1]]))),M&&(_=O.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),"string"==typeof t.automargin&&(_e(o,t.automargin),_e(r,t.automargin)),j.autoMargin(e,V(t),o),j.autoMargin(e,de(t),r),j.autoMargin(e,ie(t),_)}),o.syncOrAsync(u)}}function A(e){var n=f+(e||"tick");return T[n]||(T[n]=function(e,t,n){if(e._selections[t].size())o=1/0,i=-1/0,a=1/0,r=-1/0,e._selections[t].each(function(){var t=W(this),e=c.bBox(t.node().parentNode);o=Math.min(o,e.top),i=Math.max(i,e.bottom),a=Math.min(a,e.left),r=Math.max(r,e.right)});else{var o,i,a,r,l=s.makeLabelFns(e,n);o=i=l.yFn({dx:0,dy:0,fontSize:0}),a=r=l.xFn({dx:0,dy:0,fontSize:0})}return{top:o,bottom:i,left:a,right:r,height:i-o,width:r-a}}(t,n,l)),T[n]}},s.getTickSigns=function(e,t){var s=e._id.charAt(0),i={x:"top",y:"right"}[s],o=e.side===i?1:-1,n=[-1,1,o,-o];return"inside"!==(t?(e.minor||{}).ticks:e.ticks)==("x"===s)&&(n=n.map(function(e){return-e})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n},s.makeTransTickFn=function(e){return"x"===e._id.charAt(0)?function(t){return b(e._offset+e.l2p(t.x),0)}:function(t){return b(0,e._offset+e.l2p(t.x))}},s.makeTransTickLabelFn=function(e){var t=function(e){var h=e.ticklabelposition||"",n=function(e){return-1!==h.indexOf(e)},i=n("top"),c=n("left"),d=n("right"),l=n("bottom"),o=n("inside"),a=l||c||i||d;if(!a&&!o)return[0,0];var r=e.side,s=a?(e.tickwidth||0)/2:0,t=3,u=e.tickfont?e.tickfont.size:12;return(l||i)&&(s+=u*p,t+=(e.linewidth||0)/2),(c||d)&&(s+=(e.linewidth||0)/2,t+=3),o&&"top"===r&&(t-=u*(1-p)),(c||i)&&(s=-s),"bottom"!==r&&"right"!==r||(t=-t),[a?s:0,o?t:0]}(e),n=t[0],s=t[1];return"x"===e._id.charAt(0)?function(t){return b(n+e._offset+e.l2p(P(t)),s)}:function(t){return b(s,n+e._offset+e.l2p(P(t)))}},s.makeTickPath=function(e,t,n,s){if(s||(s={}),o=s.minor,o&&!e.minor)return"";var o,i=void 0!==s.len?s.len:o?e.minor.ticklen:e.ticklen,r=e._id.charAt(0),a=(e.linewidth||1)/2;return"x"===r?"M0,"+(t+a*n)+"v"+i*n:"M"+(t+a*n)+",0h"+i*n},s.makeLabelFns=function(e,t,n){var y,w,S,O=e.ticklabelposition||"",h=function(e){return-1!==O.indexOf(e)},M=h("top"),A=h("left"),C=h("right"),x=h("bottom")||A||M||C,s=h("inside"),_="inside"===O&&"inside"===e.ticks||!s&&"outside"===e.ticks&&"boundaries"!==e.tickson,u=0,b=0,m=_?e.ticklen:0;(s?m*=-1:x&&(m=0),_&&(u+=m,n))&&(y=o.deg2rad(n),u=m*Math.cos(y)+1,b=m*Math.sin(y)),e.showticklabels&&(_||e.showline)&&(u+=.2*e.tickfont.size);var a,l,f,v,j,c={labelStandoff:u+=(e.linewidth||1)/2*(s?-1:1),labelShift:b},g=0,d=e.side,k=e._id.charAt(0),r=e.tickangle;return"x"===k?(a=(j=!s&&"bottom"===d||s&&"top"===d)?1:-1,s&&(a*=-1),v=b*a,f=t+u*a,l=j?1:-.2,90===Math.abs(r)&&(s?l+=E:l=-90===r&&"bottom"===d?p:90===r&&"top"===d?E:.5,g=E/2*(r/90)),c.xFn=function(e){return e.dx+v+g*e.fontSize},c.yFn=function(e){return e.dy+f+e.fontSize*l},c.anchorFn=function(e,t){if(x){if(A)return"end";if(C)return"start"}return i(t)&&0!==t&&180!==t?t*a<0!==s?"end":"start":"middle"},c.heightFn=function(t,n,o){return n<-60||n>60?-.5*o:"top"===e.side!==s?-o:0}):"y"===k&&((a=(j=!s&&"left"===d||s&&"right"===d)?1:-1,s&&(a*=-1),v=u,f=b*a,l=0,s||90!==Math.abs(r)||(l=-90===r&&"left"===d||90===r&&"right"===d?p:.5),s)&&(w=i(r)?+r:0,0!==w&&(S=o.deg2rad(w),g=Math.abs(Math.sin(S))*p*a,l=0)),c.xFn=function(e){return e.dx+t-(v+e.fontSize*l)*a+g*e.fontSize},c.yFn=function(e){return e.dy+f+e.fontSize*E},c.anchorFn=function(e,t){return i(t)&&90===Math.abs(t)?"middle":j?"end":"start"},c.heightFn=function(t,n,s){return"right"===e.side&&(n*=-1),n<-30?-s:n<30?-.5*s:0}),c},s.drawTicks=function(e,t,n){n=n||{};var o=t._id+"tick",i=[].concat(t.minor&&t.minor.ticks?n.vals.filter(function(e){return e.minor&&!e.noTick}):[]).concat(t.ticks?n.vals.filter(function(e){return!e.minor&&!e.noTick}):[]),s=n.layer.selectAll("path."+o).data(i,k);s.exit().remove(),s.enter().append("path").classed(o,1).classed("ticks",1).classed("crisp",!1!==n.crisp).each(function(e){return w.stroke(l.select(this),e.minor?t.minor.tickcolor:t.tickcolor)}).style("stroke-width",function(n){return c.crispRound(e,n.minor?t.minor.tickwidth:t.tickwidth,1)+"px"}).attr("d",n.path).style("display",null),F(t,[be]),s.attr("transform",n.transFn)},s.drawGrid=function(e,t,n){if(n=n||{},"sync"!==t.tickmode){var o,a,d,u,h,p=t._id+"grid",f=t.minor&&t.minor.showgrid,j=f?n.vals.filter(function(e){return e.minor}):[],i=t.showgrid?n.vals.filter(function(e){return!e.minor}):[],m=n.counterAxis;if(m&&s.shouldShowZeroLine(e,t,m))for(u="array"===t.tickmode,o=0;o<i.length;o++)if(h=i[o].x,u?!h:Math.abs(h)<t.dtick/100){if(i=i.slice(0,o).concat(i.slice(o+1)),!u)break;o--}t._gw=c.crispRound(e,t.gridwidth,1);for(var g=f?c.crispRound(e,t.minor.gridwidth,1):0,v=n.layer,b=n.minorLayer,r=1;r>=0;r--)d=r?v:b,d&&(a=d.selectAll("path."+p).data(r?i:j,k),a.exit().remove(),a.enter().append("path").classed(p,1).classed("crisp",!1!==n.crisp),a.attr("transform",n.transFn).attr("d",n.path).each(function(e){return w.stroke(l.select(this),e.minor?t.minor.gridcolor:t.gridcolor||"#ddd")}).style("stroke-dasharray",function(e){return c.dashStyle(e.minor?t.minor.griddash:t.griddash,e.minor?t.minor.gridwidth:t.gridwidth)}).style("stroke-width",function(e){return(e.minor?g:t._gw)+"px"}).style("display",null),"function"==typeof n.path&&a.attr("d",n.path));F(t,[R,J])}},s.drawZeroLine=function(e,t,n){n=n||n;var i=t._id+"zl",a=s.shouldShowZeroLine(e,t,n.counterAxis),o=n.layer.selectAll("path."+i).data(a?[{x:0,id:t._id}]:[]);o.exit().remove(),o.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(e,t){return ke(e.id,t.id)})}),o.attr("transform",n.transFn).attr("d",n.path).call(w.stroke,t.zerolinecolor||w.defaultLine).style("stroke-width",c.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),F(t,[H])},s.drawLabels=function(e,t,n){n=n||{};var s,r,u,j,S,z,I,B,a=e._fullLayout,U=t._id,x=n.cls||U+"tick",w=n.vals.filter(function(e){return e.text}),h=n.labelFns,y=n.secondary?0:t.tickangle,O=(t._prevTickAngles||{})[x],d=n.layer.selectAll("g."+x).data(t.showticklabels?w:[],k),L=[];function v(e,s){e.each(function(e){var d,f,o=l.select(this),a=o.select(".text-math-group"),u=h.anchorFn(e,s),r=n.transFn.call(o.node(),e)+(i(s)&&0!=+s?" rotate("+s+","+h.xFn(e)+","+(h.yFn(e)-e.fontSize/2)+")":""),p=g.lineCount(o),v=C*e.fontSize,m=h.heightFn(e,i(s)?+s:0,(p-1)*v);m&&(r+=b(0,m)),a.empty()?(d=o.select("text"),d.attr({transform:r,"text-anchor":u}),d.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()):(f=c.bBox(a.node()).width*{end:-.5,start:.5}[u],a.attr("transform",r+b(f,0)))})}if(d.enter().append("g").classed(x,1).append("text").attr("text-anchor","middle").each(function(t){var n=l.select(this),s=e._promises.length;n.call(g.positionText,h.xFn(t),h.yFn(t)).call(c.font,{family:t.font,size:t.fontSize,color:t.fontColor,weight:t.fontWeight,style:t.fontStyle,variant:t.fontVariant}).text(t.text).call(g.convertToTspans,e),e._promises[s]?L.push(e._promises.pop().then(function(){v(n,y)})):v(n,y)}),F(t,[te]),d.exit().remove(),n.repositionOnUpdate&&d.each(function(e){l.select(this).select("text").call(g.positionText,h.xFn(e),h.yFn(e))}),t._adjustTickLabelsOverflow=function(){if(n=t.ticklabeloverflow,n&&"allow"!==n){var y=-1!==n.indexOf("hide"),i="x"===t._id.charAt(0),f=0,m=i?e._fullLayout.width:e._fullLayout.height;-1!==n.indexOf("domain")&&(h=o.simpleMap(t.range,t.r2l),f=t.l2p(h[0])+t._offset,m=t.l2p(h[1])+t._offset);var n,s,u,h,j,v=Math.min(f,m),b=Math.max(f,m),r=t.side,p=1/0,g=-1/0;for(j in d.each(function(e){if(s=l.select(this),s.select(".text-math-group").empty()){var s,a,n=c.bBox(s.node()),o=0;i?(n.right>b||n.left<v)&&(o=1):(n.bottom>b||n.top+(t.tickangle?0:e.fontSize/4)<v)&&(o=1),a=s.select("text"),o?y&&a.style("opacity",0):(a.style("opacity",1),p="bottom"===r||"right"===r?Math.min(p,i?n.top:n.left):-1/0,g="top"===r||"left"===r?Math.max(g,i?n.bottom:n.right):1/0)}}),a._plots)s=a._plots[j],(t._id===s.xaxis._id||t._id===s.yaxis._id)&&(u=i?s.yaxis:s.xaxis,u&&(u["_visibleLabelMin_"+t._id]=p,u["_visibleLabelMax_"+t._id]=g))}},t._hideCounterAxisInsideTickLabels=function(e){var n,i,o="x"===t._id.charAt(0),s=[];for(i in a._plots)n=a._plots[i],t._id!==n.xaxis._id&&t._id!==n.yaxis._id||s.push(o?n.yaxis:n.xaxis);s.forEach(function(n,s){n&&_(n)&&(e||[H,J,R,be,te]).forEach(function(e){var i="tick"===e.K&&"text"===e.L&&"period"===t.ticklabelmode,o=a._plots[t._mainSubplot];(e.K===H.K?o.zerolinelayer.selectAll("."+t._id+"zl"):e.K===J.K?o.minorGridlayer.selectAll("."+t._id):e.K===R.K?o.gridlayer.selectAll("."+t._id):o[t._id.charAt(0)+"axislayer"]).each(function(){var o=l.select(this);e.L&&(o=o.selectAll(e.L)),o.each(function(o){var a=t.l2p(i?P(o):o.x)+t._offset,r=l.select(this);a<t["_visibleLabelMax_"+n._id]&&a>t["_visibleLabelMin_"+n._id]?r.style("display","none"):"tick"!==e.K||s||r.style("display",null)})})})})},v(d,O+1?O:y),u=null,t._selections&&(t._selections[x]=d),j=[function(){return L.length&&Promise.all(L)}],t.automargin&&a._redrawFromAutoMarginCount&&90===O?(u=O,j.push(function(){v(d,O)})):j.push(function(){if(v(d,y),w.length&&t.autotickangles&&("log"!==t.type||"D"!==String(t.dtick).charAt(0))){u=t.autotickangles[0];var e,f=0,s=[],l=1;d.each(function(e){f=Math.max(f,e.fontSize);var o=t.l2p(e.x),i=W(this),n=c.bBox(i.node());l=Math.max(l,g.lineCount(i)),s.push({top:0,bottom:10,height:10,left:o-n.width/2,right:o+n.width/2+2,width:n.width+2})});var i,r,m,p,h=("boundaries"===t.tickson||t.showdividers)&&!n.secondary,x=w.length,O=Math.abs((w[x-1].x-w[0].x)*t._m)/(x-1),_=h?O/2:O,E=h?t.ticklen:1.25*f*l,C=_/Math.sqrt(Math.pow(_,2)+Math.pow(E,2)),b=t.autotickangles.map(function(e){return e*Math.PI/180}),j=b.find(function(e){return Math.abs(Math.cos(e))<=C});if(void 0===j&&(j=b.reduce(function(e,t){return Math.abs(Math.cos(e))<Math.abs(Math.cos(t))?e:t},b[0])),p=j*(180/Math.PI),h){{r=2;for(t.ticks&&(r+=t.tickwidth/2),e=0;e<s.length;e++)if(i=w[e].xbnd,m=s[e],null!==i[0]&&m.left-t.l2p(i[0])<r||null!==i[1]&&t.l2p(i[1])-m.right<r){u=p;break}}}else{var k=t.ticklabelposition||"",a=function(e){return-1!==k.indexOf(e)},A=a("top"),S=a("left"),M=a("right"),F=a("bottom")||S||A||M?(t.tickwidth||0)+6:0;for(e=0;e<s.length-1;e++)if(o.bBoxIntersect(s[e],s[e+1],F)){u=p;break}}u&&v(d,u)}}),t._tickAngles&&j.push(function(){t._tickAngles[x]=null===u?i(y)?y:0:u}),z=function(){var e=0,n=0;return d.each(function(s,o){var i,a=W(this);a.select(".text-math-group").empty()&&(t._vals[o]&&(i=t._vals[o].bb||c.bBox(a.node()),t._vals[o].bb=i),e=Math.max(e,i.width),n=Math.max(n,i.height))}),{labelsMaxW:e,labelsMaxH:n}},s=t._anchorAxis,s&&(s.autorange||s.insiderange)&&_(t)&&!Pe(a,t._id)&&(a._insideTickLabelsUpdaterange||(a._insideTickLabelsUpdaterange={}),s.autorange&&(a._insideTickLabelsUpdaterange[s._name+".autorange"]=s.autorange,j.push(z)),s.insiderange)){B=z(),r="y"===t._id.charAt(0)?B.labelsMaxW:B.labelsMaxH,r+=6,"inside"===t.ticklabelposition&&(r+=t.ticklen||0);var M="right"===t.side||"top"===t.side?1:-1,f=1===M?1:0,p=1===M?0:1,m=[];m[p]=s.range[p];var A=s.range,D=s.r2p(A[f]),N=s.r2p(A[p]),E=a._insideTickLabelsUpdaterange[s._name+".range"];if(E){var V=s.r2p(E[f]),$=s.r2p(E[p]),T=M*("y"===t._id.charAt(0)?1:-1);T*D<T*V&&(D=V,m[f]=A[f]=E[f]),T*N>T*$&&(N=$,m[p]=A[p]=E[p])}I=Math.abs(N-D),I-r>0?r*=1+r/(I-=r):r=0,"y"!==t._id.charAt(0)&&(r=-r),m[f]=s.p2r(s.r2p(A[f])+M*r),"min"===s.autorange||"max reversed"===s.autorange?(m[0]=null,s._rangeInitial0=void 0,s._rangeInitial1=void 0):"max"!==s.autorange&&"min reversed"!==s.autorange||(m[1]=null,s._rangeInitial0=void 0,s._rangeInitial1=void 0),a._insideTickLabelsUpdaterange[s._name+".range"]=m}return S=o.syncOrAsync(j),S&&S.then&&e._promises.push(S),S},s.getPxPosition=function(e,t){var n,s=e._fullLayout._size,i=t._id.charAt(0),o=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===i?n={_offset:s.t+(1-(t.position||0))*s.h,_length:0}:"y"===i&&(n={_offset:s.l+(t.position||0)*s.w+t._shift,_length:0}),"top"===o||"left"===o?n._offset:"bottom"===o||"right"===o?n._offset+n._length:void 0},s.shouldShowZeroLine=function(e,t,n){var i=o.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===T)&&(je(t,0)||!function(e,t,n,o){if(a=n._mainAxis,a){var i,a,r,c,h=e._fullLayout,m=t._id.charAt(0),f=s.counterLetter(t._id),u=t._offset+(Math.abs(o[0])<Math.abs(o[1])==("x"===m)?0:t._length),d=h._plots[n._mainSubplot];if(!(d.mainplotinfo||d).overlays.length)return l(n);for(c=s.list(e,f),i=0;i<c.length;i++)if(r=c[i],r._mainAxis===a&&l(r))return!0}function l(e){if(!e.showline||!e.linewidth)return!1;var s,o,i=Math.max((e.linewidth+t.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-u)<i}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;s=e._linepositions||{};for(o in s)if(n(s[o][0])||n(s[o][1]))return!0}}(e,t,n,i)||function(e,t){for(var n,o=e._fullData,a=t._mainSubplot,i=t._id.charAt(0),s=0;s<o.length;s++)if(n=o[s],!0===n.visible&&n.xaxis+n.yaxis===a){if(O.traceIs(n,"bar-like")&&n.orientation==={x:"h",y:"v"}[i])return!0;if(n.fill&&n.fill.charAt(n.fill.length-1)===i)return!0}return!1}(e,t))},s.clipEnds=function(e,t){return t.filter(function(t){return je(e,t.x)})},s.allowAutoMargin=function(e){for(var t,o=s.list(e,"",!0),n=0;n<o.length;n++)t=o[n],t.automargin&&(j.allowAutoMargin(e,V(t)),t.mirror&&j.allowAutoMargin(e,de(t))),O.getComponentMethod("rangeslider","isVisible")(t)&&j.allowAutoMargin(e,ie(t))},s.swap=function(e,t){for(var s=function(e,t){s=[];for(i=0;i<t.length;i++){var n,s,i,a,l,o=[],r=e._fullData[t[i]].xaxis,c=e._fullData[t[i]].yaxis;if(r&&c){for(n=0;n<s.length;n++)-1===s[n].x.indexOf(r)&&-1===s[n].y.indexOf(c)||o.push(n);if(o.length){if(a=s[o[0]],o.length>1)for(n=1;n<o.length;n++)l=s[o[n]],D(a.x,l.x),D(a.y,l.y);D(a.x,[r]),D(a.y,[c])}else s.push({x:[r],y:[c]})}}return s}(e,t),n=0;n<s.length;n++)Te(e,s[n].x,s[n].y)}},52976:function(e,t,n){"use strict";var i=n(38248),o=n(3400),u=n(39032).BADNUM,s=o.isArrayOrTypedArray,c=o.isDateTime,l=o.cleanNumber,r=Math.round;function d(e,t){return t?i(e):"number"==typeof e}function a(e){return Math.max(1,(e-1)/1e3)}e.exports=function(e,t,n){var h,m,f,p,o=e,g=n.noMultiCategory;if(s(o)&&!o.length)return"-";if(!g&&function(e){return s(e[0])&&s(e[1])}(o))return"multicategory";if(g&&Array.isArray(o[0])){for(f=[],h=0;h<o.length;h++)if(s(o[h]))for(m=0;m<o[h].length;m++)f.push(o[h][m]);o=f}return function(e,t){for(var n,s,h=e.length,m=a(h),l=0,d=0,u={},o=0;o<h;o+=m)n=e[r(o)],s=String(n),u[s]||(u[s]=1,c(n,t)&&l++,i(n)&&d++);return l>2*d}(o,t)?"date":(p="strict"!==n.autotypenumbers,function(e,t){for(var n,s,o,h=e.length,f=a(h),m=0,i=0,d={},c=0;c<h;c+=f)n=e[r(c)],o=String(n),d[o]||(d[o]=1,s=typeof n,"boolean"===s?i++:(t?l(n)!==u:"number"===s)?m++:"string"===s&&i++);return i>2*m}(o,p)?"category":function(e,t){for(var s=e.length,n=0;n<s;n++)if(d(e[n],t))return!0;return!1}(o,p)?"linear":"-")}},28336:function(e,t,n){"use strict";var r,a=n(38248),y=n(24040),s=n(3400),v=n(31780),g=n(51272),i=n(94724),l=n(26332),d=n(25404),h=n(95936),_=n(42568),m=n(22416),f=n(42136),p=n(96312),c=n(78344),o=n(33816).WEEKDAY_PATTERN,b=n(33816).HOUR_PATTERN;function j(e,t,n){function h(n,o){return s.coerce(e,t,i.rangebreaks,n,o)}if(h("enabled")){var r,c,d,m,f,p,l=h("bounds");if(l&&l.length>=2){{if(f="",2===l.length)for(r=0;r<2;r++)if(c=u(l[r])){f=o;break}if(m=h("pattern",f),m===o)for(r=0;r<2;r++)(c=u(l[r]))&&(t.bounds[r]=l[r]=c-1);if(m)for(r=0;r<2;r++)switch(c=l[r],m){case o:if(!a(c))return void(t.enabled=!1);if((c=+c)!==Math.floor(c)||c<0||c>=7)return void(t.enabled=!1);t.bounds[r]=l[r]=c;break;case b:if(!a(c))return void(t.enabled=!1);if((c=+c)<0||c>24)return void(t.enabled=!1);t.bounds[r]=l[r]=c}if(!1===n.autorange)if(d=n.range,d[0]<d[1]){if(l[0]<d[0]&&l[1]>d[1])return void(t.enabled=!1)}else if(l[0]>d[0]&&l[1]<d[1])return void(t.enabled=!1)}}else{if(p=h("values"),!p||!p.length)return void(t.enabled=!1);h("dvalue")}}}e.exports=function(e,t,n,a,r){var w,O,x,C,E,k,S,F,T,M=a.letter,b=a.font||{},L=a.splomStash||{},N=n("visible",!a.visibleDflt),D=t._template||{},u=t.type||D.type||"-";"date"===u&&(y.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",a.calendar),a.noTicklabelmode||(T=n("ticklabelmode"))),k="",a.noTicklabelposition&&"multicategory"!==u||(k=s.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===T?["outside","inside"]:"x"===M?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),a.noTicklabeloverflow||n("ticklabeloverflow",-1!==k.indexOf("inside")?"hide past domain":"category"===u||"multicategory"===u?"allow":"hide past div"),c(t,r),p(e,t,n,a),m(e,t,n,a),"category"===u||a.noHover||n("hoverformat");var A=n("color"),R=A!==i.color.dflt?A:b.color,z=L.label||r._dfltTitle[M];if(_(e,t,n,u,a),!N)return t;if(n("title.text",z),s.coerceFont(n,"title.font",{family:b.family,weight:b.weight,style:b.style,variant:b.variant,size:s.bigFont(b.size),color:R}),l(e,t,n,u),O=a.hasMinor,(O&&(v.newContainer(t,"minor"),l(e,t,n,u,{isMinor:!0})),h(e,t,n,u,a),d(e,t,n,a),O)&&(S=a.isMinor,a.isMinor=!0,d(e,t,n,a),a.isMinor=S),f(e,t,n,{dfltColor:A,bgColor:a.bgColor,showGrid:a.showGrid,hasMinor:O,attributes:i}),!O||t.minor.ticks||t.minor.showgrid||delete t.minor,(t.showline||t.ticks)&&n("mirror"),E="multicategory"===u,a.noTickson||"category"!==u&&!E||!t.ticks&&!t.showgrid||(E&&(F="boundaries"),"boundaries"===n("tickson",F)&&delete t.ticklabelposition),E&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===u)if(g(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:j}),t.rangebreaks.length){{for(x=0;x<t.rangebreaks.length;x++)if(t.rangebreaks[x].pattern===o){t._hasDayOfWeekBreaks=!0;break}if(c(t,r),r._has("scattergl")||r._has("splom"))for(C=0;C<a.data.length;C++)w=a.data[C],"scattergl"!==w.type&&"splom"!==w.type||(w.visible=!1,s.warn(w.type+" traces do not work on axes with rangebreaks. Setting trace "+w.index+" to `visible: false`."))}}else delete t.rangebreaks;return t},r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function u(e){if("string"==typeof e)return r[e.substr(0,3).toLowerCase()]}},29736:function(e,t,n){"use strict";var o=n(26880),a=o.FORMAT_LINK,r=o.DATE_FORMAT_LINK;function s(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+a+"."].join(" ")}function i(e,t){return s(e,t)+[" And for dates see: "+r+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}e.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?s:i)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:s,descriptionWithDates:i}},79811:function(e,t,n){"use strict";var i=n(24040),s=n(33816);function o(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}t.id2name=function(e){if("string"==typeof e&&e.match(s.AX_ID_PATTERN)){var t=e.split(" ")[0].substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},t.name2id=function(e){if(e.match(s.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},t.cleanId=function(e,t,n){var o,i=/( domain)$/.test(e);if("string"==typeof e&&e.match(s.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)&&(!i||n))return o=e.split(" ")[0].substr(1).replace(/^0+/,""),"1"===o&&(o=""),e.charAt(0)+o+(i&&n?" domain":"")},t.list=function(e,n,s){if(i=e._fullLayout,!i)return[];var o,i,a,l,d,c=t.listIds(e,n),r=new Array(c.length);for(o=0;o<c.length;o++)l=c[o],r[o]=i[l.charAt(0)+"axis"+l.substr(1)];if(!s){d=i._subplots.gl3d||[];for(o=0;o<d.length;o++)a=i[d[o]],n?r.push(a[n+"axis"]):r.push(a.xaxis,a.yaxis,a.zaxis)}return r},t.listIds=function(e,t){var n,s=e._fullLayout;return s?(n=s._subplots,t?n[t+"axis"]:n.xaxis.concat(n.yaxis)):[]},t.getFromId=function(e,n,s){var o=e._fullLayout;return n=void 0===n||"string"!=typeof n?n:n.replace(" domain",""),"x"===s?n=n.replace(/y[0-9]*/,""):"y"===s&&(n=n.replace(/x[0-9]*/,"")),o[t.id2name(n)]},t.getFromTrace=function(e,n,s){var a,r=e._fullLayout,o=null;return i.traceIs(n,"gl3d")?(a=n.scene,"scene"===a.substr(0,5)&&(o=r[a][s+"axis"])):o=t.getFromId(e,n[s+"axis"]||s),o},t.idSort=function(e,t){var n=e.charAt(0),s=t.charAt(0);return n!==s?n>s?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},t.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},t.isLinked=function(e,t){return o(t,e._axisMatchGroups)||o(t,e._axisConstraintGroups)}},22416:function(e,t,n){"use strict";var s=n(38116).isTypedArraySpec;e.exports=function(e,t,n,o){if("category"===t.type){var i,a,c,r=e.categoryarray,l=Array.isArray(r)&&r.length>0||s(r);l&&(c="array"),i=n("categoryorder",c),"array"===i&&(a=n("categoryarray")),l||"array"!==i||(i=t.categoryorder="trace"),"trace"===i?t._initialCategories=[]:"array"===i?t._initialCategories=a.slice():(a=function(e,t){var n,s,o,i,a,r,c=t.dataAttr||e._id.charAt(0),l={};if(t.axData)s=t.axData;else for(s=[],n=0;n<t.data.length;n++)i=t.data[n],i[c+"axis"]===e._id&&s.push(i);for(n=0;n<s.length;n++){a=s[n][c];for(o=0;o<a.length;o++)r=a[o],r!=null&&(l[r]=1)}return Object.keys(l)}(t,o).sort(),"category ascending"===i?t._initialCategories=a:"category descending"===i&&(t._initialCategories=a.reverse()))}}},98728:function(e,t,n){"use strict";var s=n(38248),o=n(3400),i=n(39032),a=i.ONEDAY,r=i.ONEWEEK;t.dtick=function(e,t){var n,r,c="log"===t,o="date"===t,l="category"===t,i=o?a:1;return e?s(e)?(e=Number(e))<=0?i:l?Math.max(1,Math.round(e)):o?Math.max(.1,e):e:"string"!=typeof e||!o&&!c?i:(r=e.charAt(0),n=e.substr(1),(n=s(n)?Number(n):0)<=0||!(o&&"M"===r&&n===Math.round(n)||c&&"L"===r||c&&"D"===r&&(1===n||2===n))?i:e):i},t.tick0=function(e,t,n,i){return"date"===t?o.cleanDate(e,o.dateTick0(n,i%r==0?1:0)):"D1"!==i&&"D2"!==i?s(e)?Number(e):0:void 0}},33816:function(e,t,n){"use strict";var s=n(53756).counter;e.exports={idRegex:{x:s("x","( domain)?"),y:s("y","( domain)?")},attrRegex:s("[xy]axis"),xAxisMatch:s("xaxis"),yAxisMatch:s("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(e,t,n){"use strict";var o=n(3400),r=n(19280),s=n(79811).id2name,p=n(94724),l=n(21160),f=n(78344),m=n(39032).ALMOST_EQUAL,v=n(84284).FROM_BL;function h(e,t,n){var i,r,u,m,g,b,j,y,_,w,x,S,M,v=n.axIds,l=n.layoutOut,E=n.hasImage,O=l._axisConstraintGroups,T=l._axisMatchGroups,k=t._id,F=k.charAt(0),C=((l._splomAxes||{})[F]||{})[k]||{},h=t._id,f="x"===h.charAt(0);function A(n,s){return o.coerce(e,t,p,n,s)}t._matchGroup=null,t._constraintGroup=null,A("constrain",E?"domain":"range"),o.coerce(e,t,{constraintoward:{valType:"enumerated",values:f?["left","center","right"]:["bottom","middle","top"],dflt:f?"center":"middle"}},"constraintoward"),M=t.type,i=[];for(r=0;r<v.length;r++)(m=v[r])!==h&&l[s(m)].type===M&&i.push(m);if(j=d(O,h),j){x=[];for(r=0;r<i.length;r++)j[m=i[r]]||x.push(m);i=x}_=i.length,_&&(e.matches||C.matches)&&(u=o.coerce(e,t,{matches:{valType:"enumerated",values:i,dflt:-1!==i.indexOf(C.matches)?C.matches:void 0}},"matches")),y=E&&!f?t.anchor:void 0,_&&!u&&(e.scaleanchor||y)&&(w=o.coerce(e,t,{scaleanchor:{valType:"enumerated",values:i.concat([!1])}},"scaleanchor",y)),u?(t._matchGroup=a(T,h,u,1),S=l[s(u)],g=c(l,t)/c(l,S),f!==("x"===u.charAt(0))&&(g=(f?"x":"y")+g),a(O,h,u,g)):e.matches&&-1!==v.indexOf(e.matches)&&o.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop'),w?(b=A("scaleratio"),b||(b=t.scaleratio=1),a(O,h,w,b)):e.scaleanchor&&-1!==v.indexOf(e.scaleanchor)&&o.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function c(e,t){var n=t.domain;return n||(n=e[s(t.overlaying)].domain),n[1]-n[0]}function d(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function a(e,t,n,s){var a,r,c,l,u,h,m,f,o=d(e,t);null===o?((o={})[t]=1,u=e.length,e.push(o)):u=e.indexOf(o),c=Object.keys(o);for(r=0;r<e.length;r++)if(l=e[r],r!==u&&l[n]){f=l[n];for(a=0;a<c.length;a++)l[m=c[a]]=i(f,i(s,o[m]));return void e.splice(u,1)}if(1!==s)for(a=0;a<c.length;a++)h=c[a],o[h]=i(s,o[h]);o[n]=1}function i(e,t){var n,s,a,o="",i="";return"string"==typeof e&&(n=(o=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(s=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(s)),a=e*t,n||s?n&&s&&o.charAt(0)!==i.charAt(0)?n===s?a:(n>s?o.substr(s):i.substr(n))+a:o+i+e*t:a}function g(e,t){for(var n,s,o,a,r,h,l=t._size,d=l.h/l.w,u={},c=Object.keys(e),i=0;i<c.length;i++){if(a=c[i],n=e[a],"string"==typeof n){s=n.match(/^[xy]*/)[0],o=s.length,n=+n.substr(o);for(h="y"===s.charAt(0)?d:1/d,r=0;r<o;r++)n*=h}u[a]=n}return u}function u(e,t){var n=e._inputDomain,o=v[e.constraintoward],s=n[0]+(n[1]-n[0])*o;e.domain=e._input.domain=[s+(n[0]-s)/t,s+(n[1]-s)/t],e.setScale()}t.handleDefaults=function(e,t,n){var i,a,r,c,l,d,u,p,g,v,y,E,j=n.axIds,k=n.axHasImage,m=t._axisConstraintGroups=[],b=t._axisMatchGroups=[];for(i=0;i<j.length;i++)h(u=e[p=s(j[i])],r=t[p],{axIds:j,layoutOut:t,hasImage:k[p]});function C(e,n){for(i=0;i<e.length;i++)for(l in d=e[i])t[s(l)][n]=d}for(C(b,"_matchGroup"),i=0;i<m.length;i++)for(l in d=m[i])if((r=t[s(l)]).fixedrange){for(E in d)g=s(E),!1===(e[g]||{}).fixedrange&&o.warn("fixedrange was specified as false for axis "+g+" but was overridden because another axis in its constraint group has fixedrange true"),t[g].fixedrange=!0;break}for(i=0;i<m.length;){for(l in d=m[i]){(r=t[s(l)])._matchGroup&&Object.keys(r._matchGroup).length===Object.keys(d).length&&(m.splice(i,1),i--);break}i++}C(m,"_constraintGroup");var _=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],w=!1,O=!1;function x(){c=r[a],"rangebreaks"===a&&(O=r._hasDayOfWeekBreaks)}for(i=0;i<b.length;i++){d=b[i];for(v=0;v<_.length;v++){for(l in a=_[v],c=null,d)if(u=e[p=s(l)],r=t[p],a in r){if(!r.matches&&(y=r,a in u)){x();break}null===c&&a in u&&x()}if("range"===a&&c&&u.range&&2===u.range.length&&null!==u.range[0]&&null!==u.range[1]&&(w=!0),"autorange"===a&&null===c&&w&&(c=!1),null===c&&a in y&&(c=y[a]),null!==c)for(l in d)(r=t[s(l)])[a]="range"===a?c.slice():c,"rangebreaks"===a&&(r._hasDayOfWeekBreaks=O,f(r,t))}}},t.enforce=function(e){f=e._fullLayout,S=f._axisConstraintGroups||[];for(j=0;j<S.length;j++){w=g(S[j],f);var b=Object.keys(w),C=1/0,M=0,y=1/0,N={},R={},L=!1;for(i=0;i<b.length;i++)R[p=b[i]]=t=f[s(p)],t._inputDomain?t.domain=t._inputDomain.slice():t._inputDomain=t.domain.slice(),t._inputRange||(t._inputRange=t.range.slice()),t.setScale(),N[p]=c=Math.abs(t._m)/w[p],C=Math.min(C,c),"domain"!==t.constrain&&t._constraintShrinkable||(y=Math.min(y,c)),delete t._constraintShrinkable,M=Math.max(M,c),"domain"===t.constrain&&(L=!0);if(!(C>m*M)||L)for(i=0;i<b.length;i++)if(c=N[p=b[i]],_=(t=R[p]).constrain,c!==y||"domain"===_)if(n=c/y,"range"===_)l(t,n);else{var x=t._inputDomain,V=(t.domain[1]-t.domain[0])/(x[1]-x[0]),E=(t.r2l(t.range[1])-t.r2l(t.range[0]))/(t.r2l(t._inputRange[1])-t.r2l(t._inputRange[0]));if((n/=V)*E<1){t.domain=t._input.domain=x.slice(),l(t,n);continue}if(E<1&&(t.range=t._input.range=t._inputRange.slice(),n*=E),t.autorange){var t,n,i,c,f,p,j,_,w,S,T=t.r2l(t.range[0]),A=t.r2l(t.range[1]),v=(T+A)/2,d=v,a=v,k=Math.abs(A-v),H=v-k*n*1.0001,I=v+k*n*1.0001,B=r.makePadFn(f,t,0),P=r.makePadFn(f,t,1);u(t,n);var o,h,z=Math.abs(t._m),D=r.concatExtremes(e,t),O=D.min,F=D.max;for(o=0;o<O.length;o++)(h=O[o].val-B(O[o])/z)>H&&h<d&&(d=h);for(o=0;o<F.length;o++)(h=F[o].val+P(F[o])/z)<I&&h>a&&(a=h);n/=(a-d)/(2*k),d=t.l2r(d),a=t.l2r(a),t.range=t._input.range=T<A?[d,a]:[a,d]}u(t,n)}}},t.getAxisGroup=function(e,t){for(var s=e._axisMatchGroups,n=0;n<s.length;n++)if(s[n][t])return"g"+n;return t},t.clean=function(e,t){if(t._inputDomain){for(var s=!1,i=t._id,o=e._fullLayout._axisConstraintGroups,n=0;n<o.length;n++)if(o[n][i]){s=!0;break}s&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},51184:function(e,t,n){"use strict";var f=n(33428),o=n(3400),S=o.numberFormat,q=n(49760),K=n(89184),a=n(24040),C=o.strTranslate,U=n(72736),x=n(76308),i=n(43616),W=n(93024),b=n(54460),$=n(93972),V=n(86476),v=n(72760),c=v.selectingOrDrawing,B=v.freeMode,I=n(84284).FROM_TL,Y=n(73696),H=n(39172).redrawReglTraces,R=n(7316),h=n(79811).getFromId,L=n(22676).prepSelect,D=n(22676).clearOutline,N=n(22676).selectOnClick,m=n(21160),d=n(33816),M=d.MINDRAG,s=d.MINZOOM,T=!0;function p(e,t,n,s){var i=o.ensureSingle(e.draglayer,t,n,function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return i.call($,s),i.node()}function F(e,t,n,s,o,a,r){var c=p(e,"rect",t,n);return f.select(c).call(i.setRect,s,o,a,r),c}function k(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function u(e,t,n,s,o){for(a=0;a<e.length;a++)if(i=e[a],!i.fixedrange)if(i.rangebreaks){var i,a,r,c,l,d="y"===i._id.charAt(0),h=d?1-t:t,m=d?1-n:n;s[i._name+".range[0]"]=i.l2r(i.p2l(h*i._length)),s[i._name+".range[1]"]=i.l2r(i.p2l(m*i._length))}else r=i._rl[0],c=i._rl[1]-r,s[i._name+".range[0]"]=i.l2r(r+c*t),s[i._name+".range[1]"]=i.l2r(r+c*n);o&&o.length&&(l=(t+(1-n))/2,u(o,l,1-l,s,[]))}function O(e,t){for(s=0;s<e.length;s++)if(n=e[s],!n.fixedrange){if(n.rangebreaks){var n,s,o=n._length,i=(n.p2l(0+t)-n.p2l(0)+(n.p2l(o+t)-n.p2l(o)))/2;n.range=[n.l2r(n._rl[0]-i),n.l2r(n._rl[1]-i)]}else n.range=[n.l2r(n._rl[0]-t/n._m),n.l2r(n._rl[1]-t/n._m)];n.limitRange&&n.limitRange()}}function P(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function w(e,t,n,s,o){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",C(n,s)).attr("d",o+"Z")}function y(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:x.background,stroke:x.defaultLine,"stroke-width":1,opacity:0}).attr("transform",C(t,n)).attr("d","M0,0Z")}function j(e,t,n,s,o,i){e.attr("d",s+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),g(e,t,o,i)}function g(e,t,n,s){n||(e.transition().style("fill",s>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function l(e){f.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function _(e){T&&e.data&&e._context.showTips&&(o.notifier(o._(e,"Double-click to zoom back out"),"long"),T=!1)}function r(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,s)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function E(e,t,n,s,i){for(var a,r,c,l,u,f,b,j,_,w,O,y=!1,m={},d={},v=(i||{}).xaHash,p=(i||{}).yaHash,g=0;g<t.length;g++){l=t[g];for(O in n)if(l[O]){for(a in l)i&&(v[a]||p[a])||("x"===a.charAt(0)?n:s)[a]||(m[a]=O);for(c in s)i&&(v[c]||p[c])||!l[c]||(y=!0)}for(c in s)if(l[c])for(r in l)i&&(v[r]||p[r])||("x"===r.charAt(0)?n:s)[r]||(d[r]=c)}y&&(o.extendFlat(m,d),d={}),b={},j=[];for(a in m)u=h(e,a),j.push(u),b[u._id]=u;_={},w=[];for(r in d)f=h(e,r),w.push(f),_[f._id]=f;return{xaHash:b,yaHash:_,xaxes:j,yaxes:w,xLinks:m,yLinks:d,isSubplotConstrained:y}}function A(e,t){if(K){var n=void 0!==e.onwheel?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})}else void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function z(e){var n,t=[];for(n in e)t.push(e[n]);return t}e.exports={makeDragBox:function(e,t,n,p,g,v,x,C){var $,K,G,X,Q,J,re,ce,pe,fe,ee,Ce,Me,te,ye,me,he,Oe,Se,Te,oe,ke,Ae,Re=e._fullLayout._zoomlayer,be=x+C==="nsew",He=1===(x+C).length;function je(){if(re=t.xaxis,ce=t.yaxis,K=re._length,$=ce._length,Ce=re._offset,Me=ce._offset,(pe={})[re._id]=re,(fe={})[ce._id]=ce,x&&C)for(var s,i,a,r,o=t.overlays,n=0;n<o.length;n++)i=o[n].xaxis,pe[i._id]=i,a=o[n].yaxis,fe[a._id]=a;ee=z(pe),J=z(fe),X=k(ee,C),Q=k(J,x),ye=!Q&&!X,G=E(e,e._fullLayout._axisMatchGroups,pe,fe),r=(te=E(e,e._fullLayout._axisConstraintGroups,pe,fe,G)).isSubplotConstrained||G.isSubplotConstrained,me=C||r,he=x||r,s=e._fullLayout,Oe=s._has("scattergl"),Se=s._has("splom"),Te=s._has("svg")}if(n+=t.yaxis._shift,je(),Ve=function(e,t,n){return e?"nsew"===e?n?"":"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}(Q+X,e._fullLayout.dragmode,be),ae=F(t,x+C+"drag",Ve,n,p,g,v),ye&&!be)return ae.onmousedown=null,ae.style.pointerEvents="none",ae;Z={element:ae,gd:e,plotinfo:t};function ze(){Z.plotinfo.selection=!1,D(e)}function Ye(e,n){if(s=Z.gd,s._fullLayout._activeShapeIndex>=0)s._fullLayout._deactivateShape(s);else if(i=s._fullLayout.clickmode,l(s),2!==e||He||We(),be)i.indexOf("select")>-1&&N(n,s,ee,J,t.id,Z),i.indexOf("event")>-1&&W.click(s,n,t.id);else if(1===e&&He){var s,i,o=x?ce:re,c="s"===x||"w"===C?0:1,u=o._name+".range["+c+"]",h=function(e,t){var s,n=e.range[t],o=Math.abs(n-e.range[1-t]);return"date"===e.type?n:"log"===e.type?(s=Math.ceil(Math.max(0,-Math.log(o)/Math.LN10))+3,S("."+s+"g")(Math.pow(10,n))):(s=Math.floor(Math.log(Math.abs(n))/Math.LN10)-Math.floor(Math.log(o)/Math.LN10)+4,S("."+String(s)+"g")(n))}(o,c),r="left",d="middle";if(o.fixedrange)return;x?(d="n"===x?"top":"bottom","right"===o.side&&(r="right")):"e"===C&&(r="right"),s._context.showAxisRangeEntryBoxes&&f.select(ae).call(U.makeEditable,{gd:s,immediate:!0,background:s._fullLayout.paper_bgcolor,text:String(h),fill:o.tickfont?o.tickfont.color:"#444",horizontalAlign:r,verticalAlign:d}).on("edit",function(e){var t=o.d2r(e);void 0!==t&&a.call("_guiRelayout",s,u,t)})}}function qe(t,n){if(e._transitioningWithDuration)return!1;var d,u,a=Math.max(0,Math.min(K,ke*t+ne)),c=Math.max(0,Math.min($,Ae*n+se)),o=Math.abs(a-ne),i=Math.abs(c-se);function l(){ie="",T.r=T.l,T.t=T.b,de.attr("d","M0,0Z")}T.l=Math.min(ne,a),T.r=Math.max(ne,a),T.t=Math.min(se,c),T.b=Math.max(se,c),te.isSubplotConstrained?o>s||i>s?(ie="xy",o/K>i/$?(i=o*$/K,se>c?T.t=se-i:T.b=se+i):(o=i*K/$,ne>a?T.l=ne-o:T.r=ne+o),de.attr("d",r(T))):l():G.isSubplotConstrained?o>s||i>s?(ie="xy",d=Math.min(T.l/K,($-T.b)/$),u=Math.max(T.r/K,($-T.t)/$),T.l=d*K,T.r=u*K,T.b=(1-d)*$,T.t=(1-u)*$,de.attr("d",r(T))):l():!Q||i<Math.min(Math.max(.6*o,M),s)?o<M||!X?l():(T.t=0,T.b=$,ie="x",de.attr("d",function(e,t){return"M"+(e.l-.5)+","+(t-s-.5)+"h-3v"+(2*s+1)+"h3ZM"+(e.r+.5)+","+(t-s-.5)+"h3v"+(2*s+1)+"h-3Z"}(T,se))):!X||o<Math.min(.6*i,s)?(T.l=0,T.r=K,ie="y",de.attr("d",function(e,t){return"M"+(t-s-.5)+","+(e.t-.5)+"v-3h"+(2*s+1)+"v3ZM"+(t-s-.5)+","+(e.b+.5)+"v3h"+(2*s+1)+"v-3Z"}(T,ne))):(ie="xy",de.attr("d",r(T))),T.w=T.r-T.l,T.h=T.b-T.t,ie&&(_e=!0),e._dragged=_e,j(Ne,de,T,Le,Ee,xe),Be(),e.emit("plotly_relayouting",oe),Ee=!0}function Be(){oe={},"xy"!==ie&&"x"!==ie||(u(ee,T.l/K,T.r/K,oe,te.xaxes),ue("x",oe)),"xy"!==ie&&"y"!==ie||(u(J,($-T.b)/$,($-T.t)/$,oe,te.yaxes),ue("y",oe))}function Ke(){Be(),l(e),we(),_(e)}Z.prepFn=function(t,n,s){var a=Z.dragmode,i=e._fullLayout.dragmode;i!==a&&(Z.dragmode=i),je(),ke=e._fullLayout._invScaleX,Ae=e._fullLayout._invScaleY,ye||(be?t.shiftKey?"pan"===i?i="zoom":c(i)||(i="pan"):t.ctrlKey&&(i="pan"):i="pan"),B(i)?Z.minDrag=1:Z.minDrag=void 0,c(i)?(Z.xaxes=ee,Z.yaxes=J,L(t,n,s,Z,i)):(Z.clickFn=Ye,c(a)&&ze(),ye||("zoom"===i?(Z.moveFn=qe,Z.doneFn=Ke,Z.minDrag=1,function(t,n,s){var i,a=ae.getBoundingClientRect();ne=n-a.left,se=s-a.top,e._fullLayout._calcInverseTransform(e),i=o.apply3DTransform(e._fullLayout._invTransform)(ne,se),ne=i[0],se=i[1],T={l:ne,r:ne,w:0,t:se,b:se,h:0},xe=e._hmpixcount?e._hmlumcount/e._hmpixcount:q(e._fullLayout.plot_bgcolor).getLuminance(),Ee=!1,ie="xy",_e=!1,Ne=w(Re,xe,Ce,Me,Le="M0,0H"+K+"V"+$+"H0V0"),de=y(Re,Ce,Me)}(0,n,s)):"pan"===i&&(Z.moveFn=$e,Z.doneFn=we))),e._fullLayout._redrag=function(){var n,t=e._dragdata;t&&t.element===ae&&(n=e._fullLayout.dragmode,c(n)||(je(),ge([0,0,K,$]),Z.moveFn(t.dx,t.dy)))}},V.init(Z);var T,Z,Ve,ae,ne,se,xe,Le,Ee,ie,Ne,de,_e,le=[0,0,K,$],Pe=null,Ue=d.REDRAWDELAY,Ge=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function $e(t,n){if(t*=ke,n*=Ae,!e._transitioningWithDuration){if(e._fullLayout._replotting=!0,"ew"===X||"ns"===Q){var s,o,i,r,c,d,h,f,a=X?-t:0,l=Q?-n:0;return G.isSubplotConstrained&&(X&&Q&&(f=(t/K-n/$)/2,a=-(t=f*K),l=-(n=-f*$)),Q?a=-l*K/$:l=-a*$/K),X&&(O(ee,t),ue("x")),Q&&(O(J,n),ue("y")),ge([a,l,K,$]),Fe(),void e.emit("plotly_relayouting",oe)}if(c="w"===X==("n"===Q)?1:-1,X&&Q&&(te.isSubplotConstrained||G.isSubplotConstrained)&&(h=(t/K+c*n/$)/2,t=h*K,n=c*h*$),"w"===X?t=u(ee,0,t):"e"===X?t=u(ee,1,-t):X||(t=0),"n"===Q?n=u(J,1,n):"s"===Q?n=u(J,0,-n):Q||(n=0),o="w"===X?t:0,i="n"===Q?n:0,te.isSubplotConstrained&&!G.isSubplotConstrained||G.isSubplotConstrained&&X&&Q&&c>0){if(G.isSubplotConstrained||!X&&1===Q.length){for(s=0;s<ee.length;s++)ee[s].range=ee[s]._r.slice(),m(ee[s],1-n/$);o=(t=n*K/$)/2}if(G.isSubplotConstrained||!Q&&1===X.length){for(s=0;s<J.length;s++)J[s].range=J[s]._r.slice(),m(J[s],1-t/K);i=(n=t*$/K)/2}}G.isSubplotConstrained&&Q||ue("x"),G.isSubplotConstrained&&X||ue("y"),r=K-t,d=$-n,!G.isSubplotConstrained||X&&Q||(X?(i=o?0:t*$/K,d=r*$/K):(o=i?0:n*K/$,r=d*K/$)),ge([o,i,r,d]),Fe(),e.emit("plotly_relayouting",oe)}function u(e,t,n){for(var s,o,i,a,r=1-t,c=0;c<e.length;c++)s=e[c],s.fixedrange||(o=s,a=s._rl[r]+(s._rl[t]-s._rl[r])/P(n/s._length),i=s.l2r(a),!1!==i&&void 0!==i&&(s.range[t]=i));return o._length*(o._rl[t]-a)/(o._rl[t]-o._rl[r])}}function ue(e,t){for(var r=G.isSubplotConstrained?{x:J,y:ee}[e]:G[e+"axes"],c=G.isSubplotConstrained?{x:ee,y:J}[e]:[],o=0;o<r.length;o++){var s=r[o],i=s._id,a=G.xLinks[i]||G.yLinks[i],n=c[0]||pe[a]||fe[a];n&&(t?(t[s._name+".range[0]"]=t[n._name+".range[0]"],t[s._name+".range[1]"]=t[n._name+".range[1]"]):s.range=n.range.slice())}}function Fe(){s=[];function o(e){for(n=0;n<e.length;n++)e[n].fixedrange||s.push(e[n]._id)}function a(e,t){for(n=0;n<e.length;n++){var o=e[n],i=o[t];o.fixedrange||"sync"!==i.tickmode||s.push(i._id)}}for(me&&(o(ee),o(te.xaxes),o(G.xaxes),a(t.overlays,"xaxis")),he&&(o(J),o(te.yaxes),o(G.yaxes),a(t.overlays,"yaxis")),oe={},n=0;n<s.length;n++){var n,s,r=s[n],i=h(e,r);b.drawOne(e,i,{skipTitle:!0}),oe[i._name+".range[0]"]=i.range[0],oe[i._name+".range[1]"]=i.range[1]}b.redrawComponents(e,s)}function We(){if(!e._transitioningWithDuration){if(r=e._context.doubleClick,t=[],X&&(t=t.concat(ee)),Q&&(t=t.concat(J)),G.xaxes&&(t=t.concat(G.xaxes)),G.yaxes&&(t=t.concat(G.yaxes)),o={},"reset+autosize"===r)for(r="autosize",s=0;s<t.length;s++){var t,n,s,o,i,r,d,c=(n=t[s])._rangeInitial0,l=n._rangeInitial1,u=void 0!==c||void 0!==l;if(u&&(void 0!==c&&c!==n.range[0]||void 0!==l&&l!==n.range[1])||!u&&!0!==n.autorange){r="reset";break}}if("autosize"===r)for(s=0;s<t.length;s++)(n=t[s]).fixedrange||(o[n._name+".autorange"]=!0);else if("reset"===r)for((X||te.isSubplotConstrained)&&(t=t.concat(te.xaxes)),Q&&!te.isSubplotConstrained&&(t=t.concat(te.yaxes)),te.isSubplotConstrained&&(X?Q||(t=t.concat(J)):t=t.concat(ee)),s=0;s<t.length;s++)(n=t[s]).fixedrange||(i=n._name,d=n._autorangeInitial,void 0===n._rangeInitial0&&void 0===n._rangeInitial1?o[i+".autorange"]=!0:void 0===n._rangeInitial0?(o[i+".autorange"]=d,o[i+".range"]=[null,n._rangeInitial1]):void 0===n._rangeInitial1?(o[i+".range"]=[n._rangeInitial0,null],o[i+".autorange"]=d):o[i+".range"]=[n._rangeInitial0,n._rangeInitial1]);e.emit("plotly_doubleclick",null),a.call("_guiRelayout",e,o)}}function we(){ge([0,0,K,$]),o.syncOrAsync([R.previousPromises,function(){e._fullLayout._replotting=!1,a.call("_guiRelayout",e,oe)}],e)}function ge(t){var n,s,r,c,l,d,u,h,m,f,p,g,y,_,w,O,j=e._fullLayout,b=j._plots,v=j._subplots.cartesian;if(Se&&a.subplotsRegistry.splom.drag(e),Oe)for(d=0;d<v.length;d++)n=(l=b[v[d]]).xaxis,s=l.yaxis,l._scene&&(g=o.simpleMap(n.range,n.r2l),p=o.simpleMap(s.range,s.r2l),n.limitRange&&n.limitRange(),s.limitRange&&s.limitRange(),g=n.range,p=s.range,l._scene.update({range:[g[0],p[0],g[1],p[1]]}));if((Se||Oe)&&(Y(e),H(e)),Te){f=t[2]/re._length,m=t[3]/ce._length;for(d=0;d<v.length;d++)n=(l=b[v[d]]).xaxis,s=l.yaxis,y=(me||G.isSubplotConstrained)&&!n.fixedrange&&pe[n._id],_=(he||G.isSubplotConstrained)&&!s.fixedrange&&fe[s._id],(y?(c=f,h=C||G.isSubplotConstrained?t[0]:ve(n,c)):G.xaHash[n._id]?(c=f,h=t[0]*n._length/re._length):G.yaHash[n._id]?(c=m,h="ns"===Q?-t[1]*n._length/ce._length:ve(n,c,{n:"top",s:"bottom"}[Q])):h=De(n,c=Ie(n,f,m)),c>1&&(void 0!==n.maxallowed&&me===(n.range[0]<n.range[1]?"e":"w")||void 0!==n.minallowed&&me===(n.range[0]<n.range[1]?"w":"e"))&&(c=1,h=0),_?(r=m,u=x||G.isSubplotConstrained?t[1]:ve(s,r)):G.yaHash[s._id]?(r=m,u=t[1]*s._length/ce._length):G.xaHash[s._id]?(r=f,u="ew"===X?-t[0]*s._length/re._length:ve(s,r,{e:"right",w:"left"}[X])):u=De(s,r=Ie(s,f,m)),r>1&&(void 0!==s.maxallowed&&he===(s.range[0]<s.range[1]?"n":"s")||void 0!==s.minallowed&&he===(s.range[0]<s.range[1]?"s":"n"))&&(r=1,u=0),c||r)&&(c||(c=1),r||(r=1),w=n._offset-h/c,O=s._offset-u/r,l.clipRect.call(i.setTranslate,h,u).call(i.setScale,c,r),l.plot.call(i.setTranslate,w,O).call(i.setScale,1/c,1/r),c===l.xScaleFactor&&r===l.yScaleFactor||(i.setPointGroupScale(l.zoomScalePts,c,r),i.setTextPointsScale(l.zoomScaleTxt,c,r)),i.hideOutsideRangePoints(l.clipOnAxisFalseTraces,l),l.xScaleFactor=c,l.yScaleFactor=r)}}function Ie(e,t,n){return e.fixedrange?0:me&&te.xaHash[e._id]?t:he&&(te.isSubplotConstrained?te.xaHash:te.yaHash)[e._id]?n:0}function De(e,t){return t?(e.range=e._r.slice(),m(e,t),ve(e,t)):0}function ve(e,t,n){return e._length*(1-t)*I[n||e.constraintoward||"middle"]}return x.length*C.length!=1&&A(ae,function(t){if(e._context._scrollZoom.cartesian||e._fullLayout._enablescrollzoom){if(ze(),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();if(je(),clearTimeout(Pe),i=-t.deltaY,isFinite(i)||(i=t.wheelDelta/10),isFinite(i)){var n,i,s=Math.exp(-Math.min(Math.max(i,-20),20)/200),a=Ge.draglayer.select(".nsewdrag").node().getBoundingClientRect(),r=(t.clientX-a.left)/a.width,c=(a.bottom-t.clientY)/a.height;if(me){for(C||(r=.5),n=0;n<ee.length;n++)l(ee[n],r,s);ue("x"),le[2]*=s,le[0]+=le[2]*r*(1/s-1)}if(he){for(x||(c=.5),n=0;n<J.length;n++)l(J[n],c,s);ue("y"),le[3]*=s,le[1]+=le[3]*(1-c)*(1/s-1)}ge(le),Fe(),e.emit("plotly_relayouting",oe),Pe=setTimeout(function(){e._fullLayout&&(le=[0,0,K,$],we())},Ue),t.preventDefault()}else o.log("Did not find wheel motion attributes: ",t)}function l(e,t,n){if(!e.fixedrange){var s=o.simpleMap(e.range,e.r2l),i=s[0]+(s[1]-s[0])*t;e.range=s.map(function(t){return e.l2r(i+(t-i)*n)})}}}),ae},makeDragger:p,makeRectDragger:F,makeZoombox:w,makeCorners:y,updateZoombox:j,xyCorners:r,transitionZoombox:g,removeZoombox:l,showDoubleClickNotifier:_,attachWheelEventHandler:A}},42464:function(e,t,n){"use strict";var a=n(33428),i=n(93024),r=n(86476),c=n(93972),o=n(51184).makeDragBox,s=n(33816).DRAGGERSIZE;t.initInteractions=function(e){var c,n=e._fullLayout;e._context.staticPlot?a.select(e).selectAll(".drag").remove():(n._has("cartesian")||n._has("splom"))&&(Object.keys(n._plots||{}).sort(function(e,t){if((n._plots[e].mainplot&&!0)===(n._plots[t].mainplot&&!0)){var s=e.split("y"),o=t.split("y");return s[0]===o[0]?Number(s[1]||1)-Number(o[1]||1):Number(s[0]||1)-Number(o[0]||1)}return n._plots[e].mainplot?1:-1}).forEach(function(t){var d,u,h,l=n._plots[t],a=l.xaxis,c=l.yaxis;l.mainplot||(h=o(e,l,a._offset,c._offset,a._length,c._length,"ns","ew"),h.onmousemove=function(n){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===t&&e._fullLayout._plots[t]&&i.hover(e,n,t)},i.hover(e,n,t),e._fullLayout._lasthover=h,e._fullLayout._hoversubplot=t},h.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,r.unhover(e,t))},e._context.showAxisDragHandles&&(o(e,l,a._offset-s,c._offset-s,s,s,"n","w"),o(e,l,a._offset+a._length,c._offset-s,s,s,"n","e"),o(e,l,a._offset-s,c._offset+c._length,s,s,"s","w"),o(e,l,a._offset+a._length,c._offset+c._length,s,s,"s","e"))),e._context.showAxisDragHandles&&(t===a._mainSubplot&&(d=a._mainLinePosition,"top"===a.side&&(d-=s),o(e,l,a._offset+.1*a._length,d,.8*a._length,s,"","ew"),o(e,l,a._offset,d,.1*a._length,s,"","w"),o(e,l,a._offset+.9*a._length,d,.1*a._length,s,"","e")),t===c._mainSubplot&&(u=c._mainLinePosition,"right"!==c.side&&(u-=s),o(e,l,u,c._offset+.1*c._length,s,.8*c._length,"ns",""),o(e,l,u,c._offset+.9*c._length,s,.1*c._length,"s",""),o(e,l,u,c._offset,s,.1*c._length,"n","")))}),c=n._hoverlayer.node(),c.onmousemove=function(t){t.target=e._fullLayout._lasthover,i.hover(e,t,n._hoversubplot)},c.onclick=function(t){t.target=e._fullLayout._lasthover,i.click(e,t)},c.onmousedown=function(t){e._fullLayout._lasthover.onmousedown(t)},t.updateFx(e))},t.updateFx=function(e){var t=e._fullLayout,n="pan"===t.dragmode?"move":"crosshair";c(t._draggers,n)}},36632:function(e,t,n){"use strict";var i=n(24040),s=n(3400),o=n(79811);e.exports=function(e){return function(t,n){if(a=t[e],Array.isArray(a))for(var a,l,d,v=i.subplotsRegistry.cartesian,g=v.idRegex,f=n._subplots,b=f.xaxis,p=f.yaxis,j=f.cartesian,y=n._has("cartesian")||n._has("gl2d"),m=0;m<a.length;m++)if(l=a[m],s.isPlainObject(l)){var c=o.cleanId(l.xref,"x",!1),r=o.cleanId(l.yref,"y",!1),u=g.x.test(c),h=g.y.test(r);(u||h)&&(y||s.pushUnique(n._basePlotModules,v),d=!1,u&&-1===b.indexOf(c)&&(b.push(c),d=!0),h&&-1===p.indexOf(r)&&(p.push(r),d=!0),d&&u&&h&&j.push(c+r))}}}},57952:function(e,t,n){"use strict";var c=n(33428),h=n(24040),a=n(3400),p=n(7316),g=n(43616),l=n(84888)._M,i=n(79811),o=n(33816),v=n(9616),s=a.ensureSingle;function r(e,t,n){return a.ensureSingle(e,t,n,function(e){e.datum(n)})}function m(e,t,n,s,i){for(var d,u,m,v,b,j,y,O,x,M,T=o.traceLayerClasses,E=e._fullLayout,C=E._modules,f={},p=0;p<n.length;p++)v=n[p][0].trace.zorder||0,f[v]||(f[v]=[]),f[v].push(n[p]);for(var _=[],w=[],F=Object.keys(f).map(Number).sort(a.sorterAsc),r=0;r<F.length;r++)for(x=F[r],b=0;b<C.length;b++)if(y=(d=C[b]).name,j=h.modules[y].categories,j.svg){var k=d.layerName||y+"layer",A=k+(r?Number(r)+1:""),S=d.plot;m=(M=l(n,S,x))[0],n=M[1],m.length&&_.push({i:T.indexOf(k),zorder:r,className:A,plotMethod:S,cdModule:m}),j.zoomScale&&w.push("."+A)}_.sort(function(e,t){return(e.zorder||0)-(t.zorder||0)||e.i-t.i}),u=t.plot.selectAll("g.mlayer").data(_,function(e){return e.className}),(u.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),u.exit().remove(),u.order(),u.each(function(n){var a=c.select(this),r=n.className;n.plotMethod(e,t,n.cdModule,a,s,i),-1===o.clipOnAxisFalseQuery.indexOf("."+r)&&g.setClipUrl(a,t.layerClipId,e)}),E._has("scattergl")&&(d=h.getModule("scattergl"),m=l(n,d)[0],d.plot(e,t,m)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(o.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),w.length))&&(O=t.plot.selectAll(w.join(",")).selectAll(".trace"),t.zoomScalePts=O.selectAll("path.point"),t.zoomScaleTxt=O.selectAll(".textpoint"))}function f(e,t){var m,p,n=t.plotgroup,f=t.id,h=o.layerValue2layerClass[t.xaxis.layer],d=o.layerValue2layerClass[t.yaxis.layer],g=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var a=t.mainplotinfo,u=a.plotgroup,c=f+"-x",l=f+"-y";t.minorGridlayer=a.minorGridlayer,t.gridlayer=a.gridlayer,t.zerolinelayer=a.zerolinelayer,s(a.overlinesBelow,"path",c),s(a.overlinesBelow,"path",l),s(a.overaxesBelow,"g",c),s(a.overaxesBelow,"g",l),t.plot=s(a.overplot,"g",f),s(a.overlinesAbove,"path",c),s(a.overlinesAbove,"path",l),s(a.overaxesAbove,"g",c),s(a.overaxesAbove,"g",l),t.xlines=u.select(".overlines-"+h).select("."+c),t.ylines=u.select(".overlines-"+d).select("."+l),t.xaxislayer=u.select(".overaxes-"+h).select("."+c),t.yaxislayer=u.select(".overaxes-"+d).select("."+l)}else g?(t.xlines=s(n,"path","xlines-above"),t.ylines=s(n,"path","ylines-above"),t.xaxislayer=s(n,"g","xaxislayer-above"),t.yaxislayer=s(n,"g","yaxislayer-above")):(p=s(n,"g","layer-subplot"),t.shapelayer=s(p,"g","shapelayer"),t.imagelayer=s(p,"g","imagelayer"),t.minorGridlayer=s(n,"g","minor-gridlayer"),t.gridlayer=s(n,"g","gridlayer"),t.zerolinelayer=s(n,"g","zerolinelayer"),m=s(n,"g","layer-between"),t.shapelayerBetween=s(m,"g","shapelayer"),t.imagelayerBetween=s(m,"g","imagelayer"),s(n,"path","xlines-below"),s(n,"path","ylines-below"),t.overlinesBelow=s(n,"g","overlines-below"),s(n,"g","xaxislayer-below"),s(n,"g","yaxislayer-below"),t.overaxesBelow=s(n,"g","overaxes-below"),t.plot=s(n,"g","plot"),t.overplot=s(n,"g","overplot"),t.xlines=s(n,"path","xlines-above"),t.ylines=s(n,"path","ylines-above"),t.overlinesAbove=s(n,"g","overlines-above"),s(n,"g","xaxislayer-above"),s(n,"g","yaxislayer-above"),t.overaxesAbove=s(n,"g","overaxes-above"),t.xlines=n.select(".xlines-"+h),t.ylines=n.select(".ylines-"+d),t.xaxislayer=n.select(".xaxislayer-"+h),t.yaxislayer=n.select(".yaxislayer-"+d));g||(r(t.minorGridlayer,"g",t.xaxis._id),r(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map(function(e){return e[0]}).sort(i.idSort),r(t.gridlayer,"g",t.xaxis._id),r(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(i.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function d(e,t){if(e){n={};for(a in e.each(function(e){var s=e[0];c.select(this).remove(),u(s,t),n[s]=!0}),t._plots)for(var n,o,a,i=t._plots[a].overlays||[],s=0;s<i.length;s++)o=i[s],n[o.id]&&o.plot.selectAll(".trace").remove()}}function u(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}t.name="cartesian",t.attr=["xaxis","yaxis"],t.idRoot=["x","y"],t.idRegex=o.idRegex,t.attrRegex=o.attrRegex,t.attributes=n(26720),t.layoutAttributes=n(94724),t.supplyLayoutDefaults=n(67352),t.transitionAxes=n(73736),t.finalizeSubplots=function(e,t){var n,s,r,c,g,d=t._subplots,u=d.xaxis,p=d.yaxis,h=d.cartesian,l=h.concat(d.gl2d||[]),m={},f={};for(r=0;r<l.length;r++)g=l[r].split("y"),m[g[0]]=1,f["y"+g[1]]=1;for(r=0;r<u.length;r++)m[n=u[r]]||(s=(e[i.id2name(n)]||{}).anchor,o.idRegex.y.test(s)||(s="y"),h.push(n+s),l.push(n+s),f[s]||(f[s]=1,a.pushUnique(p,s)));for(r=0;r<p.length;r++)f[s=p[r]]||(n=(e[i.id2name(s)]||{}).anchor,o.idRegex.x.test(n)||(n="x"),h.push(n+s),l.push(n+s),m[n]||(m[n]=1,a.pushUnique(u,n)));if(!l.length){for(c in n="",s="",e)o.attrRegex.test(c)&&("x"===c.charAt(0)?(!n||+c.substr(5)<+n.substr(5))&&(n=c):(!s||+c.substr(5)<+s.substr(5))&&(s=c));n=n?i.name2id(n):"x",s=s?i.name2id(s):"y",u.push(n),p.push(s),h.push(n+s)}},t.plot=function(e,t,n,s){var o,h=e._fullLayout,f=h._subplots.cartesian,u=e.calcdata;if(!Array.isArray(t))for(t=[],o=0;o<u.length;o++)t.push(o);for(o=0;o<f.length;o++){for(var i,a,c,d=f[o],p=h._plots[d],r=[],l=0;l<u.length;l++)c=u[l],a=c[0].trace,a.xaxis+a.yaxis===d&&((-1!==t.indexOf(a.index)||a.carpet)&&(i&&i[0].trace.xaxis+i[0].trace.yaxis===d&&-1!==["tonextx","tonexty","tonext"].indexOf(a.fill)&&-1===r.indexOf(i)&&r.push(i),r.push(c)),i=c);m(e,p,r,n,s)}},t.clean=function(e,t,n,s){var o,a,c,h,m,f,p,g,v,b,j,l=s._plots||{},y=t._plots||{},r=s._subplots||{};if(s._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(c in l)(h=l[c]).plotgroup&&h.plotgroup.remove();if(g=s._has&&s._has("gl"),p=t._has&&t._has("gl"),g&&!p)for(c in l)(h=l[c])._scene&&h._scene.destroy();if(r.xaxis&&r.yaxis){m=i.listIds({_fullLayout:s});for(o=0;o<m.length;o++)f=m[o],t[i.id2name(f)]||s._infolayer.selectAll(".g-"+f+"title").remove()}if(v=s._has&&s._has("cartesian"),b=t._has&&t._has("cartesian"),v&&!b)d(s._cartesianlayer.selectAll(".subplot"),s),s._defs.selectAll(".axesclip").remove(),delete s._axisConstraintGroups,delete s._axisMatchGroups;else if(r.cartesian)for(o=0;o<r.cartesian.length;o++)a=r.cartesian[o],y[a]||(j="."+a+",."+a+"-x,."+a+"-y",s._cartesianlayer.selectAll(j).remove(),u(a,s))},t.drawFramework=function(e){var t=e._fullLayout,o=function(e){var t,n,s,i,a,r,d,h,f,o=e._fullLayout,p=o._subplots.cartesian,u=p.length,g=[],c=[];for(n=0;n<u;n++){s=p[n],i=(t=o._plots[s]).xaxis,a=t.yaxis;var b=i._mainAxis,v=a._mainAxis,l=b._id+v._id,m=o._plots[l];t.overlays=[],l!==s&&m?(t.mainplot=l,t.mainplotinfo=m,c.push(s)):(t.mainplot=void 0,t.mainplotinfo=void 0,g.push(s))}for(n=0;n<c.length;n++)s=c[n],(t=o._plots[s]).mainplotinfo.overlays.push(t);f=g.concat(c),d=new Array(u);for(n=0;n<u;n++){s=f[n],i=(t=o._plots[s]).xaxis,a=t.yaxis,h=[s,i.layer,a.layer,i.overlaying||"",a.overlaying||""];for(r=0;r<t.overlays.length;r++)h.push(t.overlays[r].id);d[n]=h}return d}(e),n=t._cartesianlayer.selectAll(".subplot").data(o,String);n.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),n.order(),n.exit().call(d,t),n.each(function(n){var i=n[0],o=t._plots[i];o.plotgroup=c.select(this),f(e,o),o.draglayer=s(t._draggers,"g",i)})},t.rangePlot=function(e,t,n){f(e,t),m(e,t,n),p.style(e)},t.toSVG=function(e){var n=e._fullLayout._glimages,t=c.select(e).selectAll(".svg-container");t.filter(function(e,n){return n===t.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this,t=e.toDataURL("image/png");n.append("svg:image").attr({xmlns:v.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})})},t.updateFx=n(42464).updateFx},94724:function(e,t,n){"use strict";var a,c,l,u,d=n(25376),o=n(22548),m=n(98192).u,r=n(92880).extendFlat,p=n(31780).templatedArray,w=n(29736).descriptionWithDates,O=n(39032).ONEDAY,s=n(33816),C=s.HOUR_PATTERN,E=s.WEEKDAY_PATTERN,i={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},x=r({},i,{values:i.values.slice().concat(["sync"])});function h(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},v={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},b={valType:"data_array",editType:"ticks"},j={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function y(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function _(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}l={valType:"color",dflt:o.defaultLine,editType:"ticks"},c={valType:"color",dflt:o.lightLine,editType:"ticks"};function f(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}a=r({},m,{editType:"ticks"}),u={valType:"boolean",editType:"ticks"},e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:o.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:d({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[s.idRegex.x.toString(),s.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"calc"},rangebreaks:p("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[E,C,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:O},editType:"calc"}),tickmode:x,nticks:h(),tick0:g,dtick:v,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:b,ticktext:{valType:"data_array",editType:"ticks"},ticks:j,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:y(),tickwidth:_(),tickcolor:l,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:r({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:w("tick label")},tickformatstops:p("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:w("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:u,gridcolor:c,gridwidth:f(),griddash:a,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},minor:{tickmode:i,nticks:h("minor"),tick0:g,dtick:v,tickvals:b,ticks:j,ticklen:y("minor"),tickwidth:_("minor"),tickcolor:l,gridcolor:c,gridwidth:f("minor"),griddash:a,showgrid:u,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:d({editType:"ticks"})}}},67352:function(e,t,n){"use strict";var o=n(3400),u=n(76308),g=n(10624).isUnifiedHover,b=n(41008),p=n(31780),y=n(64859),d=n(94724),j=n(14944),h=n(28336),_=n(71888),f=n(37668),c=n(79811),s=c.id2name,l=c.name2id,v=n(33816).AX_ID_PATTERN,m=n(24040),i=m.traceIs,r=m.getComponentMethod;function a(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}e.exports=function(e,t,n){var m,w,O,x,C,E,k,S,M,F,z,V,W,U,q,G,he=t.autotypenumbers,T={},K={},oe={},ce={},te={},re={},ae={},L={},P={},$={},ue,le,se,pe;for(x=0;x<n.length;x++)if(O=n[x],i(O,"cartesian")||i(O,"gl2d")){if(O.xaxis)S=s(O.xaxis),a(T,S,O);else if(O.xaxes)for(M=0;M<O.xaxes.length;M++)a(T,s(O.xaxes[M]),O);if(O.yaxis)k=s(O.yaxis),a(T,k,O);else if(O.yaxes)for(M=0;M<O.yaxes.length;M++)a(T,s(O.yaxes[M]),O);"funnel"===O.type?"h"===O.orientation?(S&&(K[S]=!0),k&&(ae[k]=!0)):k&&(oe[k]=!0):"image"===O.type?(k&&(L[k]=!0),S&&(L[S]=!0)):(k&&(te[k]=!0,re[k]=!0),i(O,"carpet")&&("carpet"!==O.type||O._cheater)||S&&(ce[S]=!0)),"carpet"===O.type&&O._cheater&&S&&(K[S]=!0),i(O,"2dMap")&&(P[S]=!0,P[k]=!0),i(O,"oriented")&&($["h"===O.orientation?k:S]=!0)}var Z=t._subplots,B=Z.xaxis,Y=Z.yaxis,H=o.simpleMap(B,s),N=o.simpleMap(Y,s),fe=H.concat(N),ie=u.background;B.length&&Y.length&&(ie=o.coerce(e,t,y,"plot_bgcolor")),V=u.combine(ie,t.paper_bgcolor);function me(){var e=T[m]||[];w._traceIndices=e.map(function(e){return e._expandedIndex}),w._annIndices=[],w._shapeIndices=[],w._selectionIndices=[],w._imgIndices=[],w._subplotsWith=[],w._counterAxes=[],w._name=w._attr=m,w._id=F}function A(e,t){return o.coerce(E,w,d,e,t)}function D(e,t){return o.coerce2(E,w,d,e,t)}function J(e){return"x"===e?Y:B}function ee(t,n){for(var s,i="x"===t?H:N,a=[],o=0;o<i.length;o++)s=i[o],s===n||(e[s]||{}).overlaying||a.push(l(s));return a}var I={x:J("x"),y:J("y")},ne=I.x.concat(I.y),X={},R=[];function Q(){var e=E.matches;v.test(e)&&-1===ne.indexOf(e)&&(X[e]=E.type,R=Object.keys(X))}W=b(e,t),z=g(W);for(x=0;x<fe.length;x++){m=fe[x],F=l(m),C=m.charAt(0),o.isPlainObject(e[m])||(e[m]={}),E=e[m],w=p.newContainer(t,m,C+"axis"),me();var we="x"===C&&!ce[m]&&K[m]||"y"===C&&!te[m]&&oe[m],_e="y"===C&&(!re[m]&&ae[m]||L[m]),de={hasMinor:!0,letter:C,font:t.font,outerTicks:P[m],showGrid:!$[m],data:T[m]||[],bgColor:V,calendar:t.calendar,automargin:!0,visibleDflt:we,reverseDflt:_e,autotypenumbersDflt:he,splomStash:((t._splomAxes||{})[C]||{})[F],noAutotickangles:"y"===C};A("uirevision",t.uirevision),j(E,w,A,de),h(E,w,A,de,t);var ye=z&&C===W.charAt(0),je=D("spikecolor",z?w.color:void 0),be=D("spikethickness",z?1.5:void 0),ve=D("spikedash",z?"dot":void 0),ge=D("spikemode",z?"across":void 0),Oe=D("spikesnap");A("showspikes",!!(ye||je||be||ve||ge||Oe))||(delete w.spikecolor,delete w.spikethickness,delete w.spikedash,delete w.spikemode,delete w.spikesnap),G=s(E.overlaying),U=[0,1],void 0!==t[G]&&(q=s(t[G].anchor),void 0!==t[q]&&(U=t[q].domain)),f(E,w,A,{letter:C,counterAxes:I[C],overlayableAxes:ee(C,m),grid:t.grid,overlayingDomain:U}),A("title.standoff"),Q(),w._input=E}for(x=0;x<R.length;)F=R[x++],C=(m=s(F)).charAt(0),o.isPlainObject(e[m])||(e[m]={}),E=e[m],w=p.newContainer(t,m,C+"axis"),me(),ue={letter:C,font:t.font,outerTicks:P[m],showGrid:!$[m],data:[],bgColor:V,calendar:t.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:he,splomStash:((t._splomAxes||{})[C]||{})[F]},A("uirevision",t.uirevision),w.type=X[F]||"linear",h(E,w,A,ue,t),f(E,w,A,{letter:C,counterAxes:I[C],overlayableAxes:ee(C,m),grid:t.grid}),A("fixedrange"),Q(),w._input=E;le=r("rangeslider","handleDefaults"),se=r("rangeselector","handleDefaults");for(x=0;x<H.length;x++)m=H[x],E=e[m],w=t[m],le(e,t,m),"date"===w.type&&se(E,w,t,N,w.calendar),A("fixedrange");for(x=0;x<N.length;x++)m=N[x],E=e[m],w=t[m],pe=t[s(w.anchor)],A("fixedrange",r("rangeslider","isVisible")(pe));_.handleDefaults(e,t,{axIds:ne.concat(R).sort(c.idSort),axHasImage:L})}},42136:function(e,t,n){"use strict";var s=n(49760).mix,o=n(22548),i=n(3400);e.exports=function(e,t,n,a){c=(a=a||{}).dfltColor;function r(n,s){return i.coerce2(e,t,a.attributes,n,s)}l=r("linecolor",c),d=r("linewidth"),n("showline",a.showLine||!!l||!!d)||(delete t.linecolor,delete t.linewidth);var c,l,d,u,h,v=r("gridcolor",s(c,a.bgColor,a.blend||o.lightFraction).toRgbString()),b=r("gridwidth"),m=r("griddash");if(n("showgrid",a.showGrid||!!v||!!b||!!m)||(delete t.gridcolor,delete t.gridwidth,delete t.griddash),a.hasMinor){var f=r("minor.gridcolor",s(t.gridcolor,a.bgColor,67).toRgbString()),p=r("minor.gridwidth",t.gridwidth||1),g=r("minor.griddash",t.griddash||"solid");n("minor.showgrid",!!f||!!p||!!g)||(delete t.minor.gridcolor,delete t.minor.gridwidth,delete t.minor.griddash)}a.noZeroLine||(u=r("zerolinecolor",c),h=r("zerolinewidth"),n("zeroline",a.showGrid||!!u||!!h)||(delete t.zerolinecolor,delete t.zerolinewidth))}},37668:function(e,t,n){"use strict";var o=n(38248),s=n(3400);e.exports=function(e,t,n,i){var a,r,d,u,h,m,f,p,g,v,j=i.counterAxes||[],y=i.overlayableAxes||[],l=i.letter,c=i.grid,b=i.overlayingDomain;return c&&(a=c._domains[l][c._axisMap[t._id]],u=c._anchors[t._id],a&&(r=c[l+"side"].split(" ")[0],d=c.domain[l]["right"===r||"top"===r?1:0])),a=a||[0,1],u=u||(o(e.position)?"free":j[0]||"free"),r=r||("x"===l?"bottom":"left"),d=d||0,p=0,f=!1,v=s.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(j),dflt:u}},"anchor"),g=s.coerce(e,t,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:r}},"side"),"free"===v&&("y"===l&&(n("autoshift")&&(d="left"===g?b[0]:b[1],f=!t.automargin||t.automargin,p="left"===g?-3:3),n("shift",p)),n("position",d)),n("automargin",f),m=!1,(y.length&&(m=s.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(y),dflt:!1}},"overlaying")),!m)&&(h=n("domain",a),h[0]>h[1]-1/4096&&(t.domain=a),s.noneOrAll(e.domain,t.domain,a),"sync"===t.tickmode&&(t.tickmode="auto")),n("layer"),t}},42568:function(e,t,n){"use strict";var s=n(85024);e.exports=function(e,t,n,o,i){i||(i={});var r=i.tickSuffixDflt,a=s(e);n("tickprefix")&&n("showtickprefix",a),n("ticksuffix",r)&&n("showticksuffix",a)}},96312:function(e,t,n){"use strict";var s=n(76808);e.exports=function(e,t,n,o){var i,a,r,l,d,u=t._template||{},c=t.type||u.type||"-";n("minallowed"),n("maxallowed"),i=n("range"),i||o.noInsiderange||"log"===c||(!(r=n("insiderange"))||null!==r[0]&&null!==r[1]||(t.insiderange=!1,r=void 0),r&&(i=n("range",r))),l=t.getAutorangeDflt(i,o),a=n("autorange",l),!i||(null!==i[0]||null!==i[1])&&(null!==i[0]&&null!==i[1]||"reversed"!==a&&!0!==a)&&(null===i[0]||"min"!==a&&"max reversed"!==a)&&(null===i[1]||"max"!==a&&"min reversed"!==a)||(i=void 0,delete t.range,t.autorange=!0,d=!0),d||(a=n("autorange",l=t.getAutorangeDflt(i,o))),a&&(s(n,a,i),"linear"!==c&&"-"!==c||n("rangemode")),t.cleanRange()}},21160:function(e,t,n){"use strict";var s=n(84284).FROM_BL;e.exports=function(e,t,n){void 0===n&&(n=s[e.constraintoward||"center"]);var o=[e.r2l(e.range[0]),e.r2l(e.range[1])],i=o[0]+(o[1]-o[0])*n;e.range=e._input.range=[e.l2r(i+(o[0]-i)*t),e.l2r(i+(o[1]-i)*t)],e.setScale()}},78344:function(e,t,n){"use strict";var k=n(33428),E=n(94336).E9,s=n(3400),C=s.numberFormat,a=n(38248),r=s.cleanNumber,x=s.ms2DateTime,_=s.dateTime2ms,i=s.ensureNumber,y=s.isArrayOrTypedArray,c=n(39032),f=c.FP_SAFE,o=c.BADNUM,O=c.LOG_CLIP,w=c.ONEWEEK,d=c.ONEDAY,g=c.ONEHOUR,b=c.ONEMIN,j=c.ONESEC,h=n(79811),u=n(33816),m=u.HOUR_PATTERN,p=u.WEEKDAY_PATTERN;function l(e){return Math.pow(10,e)}function v(e){return e!=null}e.exports=function(e,t){t=t||{};var n,c,S,I,N=e._id||"x",A=N.charAt(0);function M(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var s=e.range[0],i=e.range[1];return.5*(s+i-2*O*Math.abs(s-i))}return o}function H(t,n,i,r){if((r||{}).msUTC&&a(t))return+t;if(c=_(t,i||e.calendar),c===o){if(!a(t))return o;t=+t;var c,l=Math.floor(10*s.mod(t+.05,1)),d=Math.round(t-l/10);c=_(new Date(d))+l/10}return c}function P(t,n,s){return x(t,n,s||e.calendar)}function F(t){return e._categories[Math.round(t)]}function T(t){if(v(t)){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push("number"==typeof t?String(t):t);var n=e._categories.length-1;return e._categoriesMap[t]=n,n}return o}function z(t){if(e._categoriesMap)return e._categoriesMap[t]}function D(e){var t=z(e);return void 0!==t?t:a(e)?+e:void 0}function B(e){return a(e)?+e:z(e)}function L(e,t,n){return k.round(n+t*e,2)}function R(e,t,n){return(e-n)/t}c=function(t){return a(t)?L(t,e._m,e._b):o},n=function(t){return R(t,e._m,e._b)},e.rangebreaks&&(I="y"===A,c=function(t){if(!a(t))return o;if(i=e._rangebreaks.length,!i)return L(t,e._m,e._b);s=I,e.range[0]>e.range[1]&&(s=!s);for(var s,i,d,u,h,r=s?-1:1,c=r*t,l=0,n=0;n<i;n++){if(d=r*e._rangebreaks[n].min,u=r*e._rangebreaks[n].max,c<d)break;if(!(c>u)){l=c<(d+u)/2?n:n+1;break}l=n+1}return h=e._B[l]||0,isFinite(h)?L(t,e._m2,h):0},n=function(t){if(s=e._rangebreaks.length,!s)return R(t,e._m,e._b);for(var s,o=0,n=0;n<s&&!(t<e._rangebreaks[n].pmin);n++)t>e._rangebreaks[n].pmax&&(o=n+1);return R(t,e._m2,e._B[o])}),e.c2l="log"===e.type?M:i,e.l2c="log"===e.type?l:i,e.l2p=c,e.p2l=n,e.c2p="log"===e.type?function(e,t){return c(M(e,t))}:c,e.p2c="log"===e.type?function(e){return l(n(e))}:n,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=r,e.c2d=e.c2r=e.l2d=e.l2r=i,e.d2p=e.r2p=function(t){return e.l2p(r(t))},e.p2d=e.p2r=n,e.cleanPos=i):"log"===e.type?(e.d2r=e.d2l=function(e,t){return M(r(e),t)},e.r2d=e.r2c=function(e){return l(r(e))},e.d2c=e.r2l=r,e.c2d=e.l2r=i,e.c2r=M,e.l2d=l,e.d2p=function(t,n){return e.l2p(e.d2r(t,n))},e.p2d=function(e){return l(n(e))},e.r2p=function(t){return e.l2p(r(t))},e.p2r=n,e.cleanPos=i):"date"===e.type?(e.d2r=e.r2d=s.identity,e.d2c=e.r2c=e.d2l=e.r2l=H,e.c2d=e.c2r=e.l2d=e.l2r=P,e.d2p=e.r2p=function(t,n,s){return e.l2p(H(t,0,s))},e.p2d=e.p2r=function(e,t,s){return P(n(e),t,s)},e.cleanPos=function(t){return s.cleanDate(t,o,e.calendar)}):"category"===e.type?(e.d2c=e.d2l=T,e.r2d=e.c2d=e.l2d=F,e.d2r=e.d2l_noadd=D,e.r2c=function(t){var n=B(t);return void 0!==n?n:e.fraction2r(.5)},e.l2r=e.c2r=i,e.r2l=B,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return F(n(e))},e.r2p=e.d2p,e.p2r=n,e.cleanPos=function(e){return"string"==typeof e&&""!==e?e:i(e)}):"multicategory"===e.type&&(e.r2d=e.c2d=e.l2d=F,e.d2r=e.d2l_noadd=D,e.r2c=function(t){var n=D(t);return void 0!==n?n:e.fraction2r(.5)},e.r2c_just_indices=z,e.l2r=e.c2r=i,e.r2l=D,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return F(n(e))},e.r2p=e.d2p,e.p2r=n,e.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:i(e)},e.setupMultiCategory=function(n){var o,i,a,r,c,l,d,m,f,g,b,u=e._traceIndices,p=e._matchGroup;if(p&&0===e._categories.length)for(f in p)f!==N&&(b=t[h.id2name(f)],u=u.concat(b._traceIndices));o=[[0,{}],[0,{}]],l=[];for(i=0;i<u.length;i++)if(m=n[u[i]],A in m&&(a=m[A],g=m._length||s.minRowLength(a),y(a[0])&&y(a[1])))for(c=0;c<g;c++)r=a[0][c],d=a[1][c],v(r)&&v(d)&&(l.push([r,d]),r in o[0][1]||(o[0][1][r]=o[0][0]++),d in o[1][1]||(o[1][1][d]=o[1][0]++));for(l.sort(function(e,t){var n,s=o[0][1],i=s[e[0]]-s[t[0]];return i||(n=o[1][1],n[e[1]]-n[t[1]])}),i=0;i<l.length;i++)T(l[i])}),e.fraction2r=function(t){var n=e.r2l(e.range[0]),s=e.r2l(e.range[1]);return e.l2r(n+t*(s-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),s=e.r2l(e.range[1]);return(e.r2l(t)-n)/(s-n)},e.limitRange=function(t){if(n=e.minallowed,o=e.maxallowed,void 0!==n||void 0!==o){t||(t="range");var n,o,c,l,d,u,h,i=s.nestedProperty(e,t).get(),a=s.simpleMap(i,e.r2l),r=a[1]<a[0];r&&a.reverse(),d=s.simpleMap([n,o],e.r2l),(void 0!==n&&a[0]<d[0]&&(i[r?1:0]=n),void 0!==o&&a[1]>d[1]&&(i[r?0:1]=o),i[0]===i[1])&&(u=e.l2r(n),h=e.l2r(o),void 0!==n&&(c=u+1,void 0!==o&&(c=Math.min(c,h)),i[r?1:0]=c),void 0!==o&&(l=h+1,void 0!==n&&(l=Math.max(l,u)),i[r?0:1]=l))}},e.cleanRange=function(t,n){e._cleanRange(t,n),e.limitRange(t)},e._cleanRange=function(t,n){if(n||(n={}),t||(t="range"),i=s.nestedProperty(e,t).get(),c=(c="date"===e.type?s.dfltRange(e.calendar):"y"===A?u.DFLTRANGEY:"realaxis"===e._name?[0,1]:n.dfltRange||u.DFLTRANGEX).slice(),"tozero"!==e.rangemode&&"nonnegative"!==e.rangemode||(c[0]=0),i&&2===i.length){var i,r,c,l,d,h=null===i[0],m=null===i[1];for("date"!==e.type||e.autorange||(i[0]=s.cleanDate(i[0],o,e.calendar),i[1]=s.cleanDate(i[1],o,e.calendar)),r=0;r<2;r++)if("date"===e.type){{if(!s.isDateTime(i[r],e.calendar)){e[t]=c;break}if(e.r2l(i[0])===e.r2l(i[1])){l=s.constrain(e.r2l(i[0]),s.MIN_MS+1e3,s.MAX_MS-1e3),i[0]=e.l2r(l-1e3),i[1]=e.l2r(l+1e3);break}}}else{if(!a(i[r])){if(h||m||!a(i[1-r])){e[t]=c;break}i[r]=i[1-r]*(r?10:.1)}i[r]<-f?i[r]=-f:i[r]>f&&(i[r]=f),i[0]===i[1]&&(d=Math.max(1,Math.abs(1e-6*i[0])),i[0]-=d,i[1]+=d)}}else s.nestedProperty(e,t).set(c)},e.setScale=function(n){r=t._size,e.overlaying&&(p=h.getFromId({_fullLayout:t},e.overlaying),e.domain=p.domain),d=n&&e._r?"_r":"range",m=e.calendar,e.cleanRange(d);var s,o,r,l,d,m,f,p,i=e.r2l(e[d][0],m),a=e.r2l(e[d][1],m),u="y"===A;if(u?(e._offset=r.t+(1-e.domain[1])*r.h,e._length=r.h*(e.domain[1]-e.domain[0]),e._m=e._length/(i-a),e._b=-e._m*a):(e._offset=r.l+e.domain[0]*r.w,e._length=r.w*(e.domain[1]-e.domain[0]),e._m=e._length/(a-i),e._b=-e._m*i),e._rangebreaks=[],e._lBreaks=0,e._m2=0,e._B=[],e.rangebreaks&&(e._rangebreaks=e.locateBreaks(Math.min(i,a),Math.max(i,a)),e._rangebreaks.length)){for(s=0;s<e._rangebreaks.length;s++)o=e._rangebreaks[s],e._lBreaks+=Math.abs(o.max-o.min);l=u,i>a&&(l=!l),l&&e._rangebreaks.reverse(),f=l?-1:1;for(e._m2=f*e._length/(Math.abs(a-i)-e._lBreaks),e._B.push(-e._m2*(u?a:i)),s=0;s<e._rangebreaks.length;s++)o=e._rangebreaks[s],e._B.push(e._B[e._B.length-1]-f*e._m2*(o.max-o.min));for(s=0;s<e._rangebreaks.length;s++)(o=e._rangebreaks[s]).pmin=c(o.min),o.pmax=c(o.max)}if(!isFinite(e._m)||!isFinite(e._b)||e._length<0)throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.maskBreaks=function(t){n=e.rangebreaks||[],n._cachedPatterns||(n._cachedPatterns=n.map(function(t){return t.enabled&&t.bounds?s.simpleMap(t.bounds,t.pattern?r:e.d2c):null})),n._cachedValues||(n._cachedValues=n.map(function(t){return t.enabled&&t.values?s.simpleMap(t.values,e.d2c).sort(s.sorterAsc):null}));for(l=0;l<n.length;l++)if(u=n[l],u.enabled)if(u.bounds){{switch(g=u.pattern,a=(f=n._cachedPatterns[l])[0],c=f[1],g){case p:i=(d=new Date(t)).getUTCDay(),a>c&&(c+=7,i<a&&(i+=7));break;case m:i=(d=new Date(t)).getUTCHours()+(d.getUTCMinutes()/60+d.getUTCSeconds()/3600+d.getUTCMilliseconds()/36e5),a>c&&(c+=24,i<a&&(i+=24));break;case"":i=t}if(i>=a&&i<c)return o}}else for(var n,i,a,c,l,d,u,f,g,v=n._cachedValues[l],h=0;h<v.length;h++)if(c=(a=v[h])+u.dvalue,t>=a&&t<c)return o;return t},e.locateBreaks=function(t,n){if(l=[],!e.rangebreaks)return l;var o,i,a,c,l,u,h,f,v,y,_,O,x,C,k=e.rangebreaks.slice().sort(function(e,t){return e.pattern===p&&t.pattern===m?-1:t.pattern===p&&e.pattern===m?1:0}),E=function(e,o){if((e=s.constrain(e,t,n))!==(o=s.constrain(o,t,n))){for(var i,r=!0,a=0;a<l.length;a++)i=l[a],e<i.max&&o>=i.min&&(e<i.min&&(i.min=e),o>i.max&&(i.max=o),r=!1);r&&l.push({min:e,max:o})}};for(_=0;_<k.length;_++)if(i=k[_],i.enabled)if(i.bounds){switch(c=t,x=n,i.pattern&&(c=Math.floor(c)),a=(h=s.simpleMap(i.bounds,i.pattern?r:e.r2l))[0],u=h[1],o=new Date(c),i.pattern){case p:y=w,v=(u-a+(u<a?7:0))*d,c+=a*d-(o.getUTCDay()*d+o.getUTCHours()*g+o.getUTCMinutes()*b+o.getUTCSeconds()*j+o.getUTCMilliseconds());break;case m:y=d,v=(u-a+(u<a?24:0))*g,c+=a*g-(o.getUTCHours()*g+o.getUTCMinutes()*b+o.getUTCSeconds()*j+o.getUTCMilliseconds());break;default:c=Math.min(h[0],h[1]),v=y=(x=Math.max(h[0],h[1]))-c}for(f=c;f<x;f+=y)E(f,f+v)}else for(C=s.simpleMap(i.values,e.d2c),O=0;O<C.length;O++)E(a=C[O],u=a+i.dvalue);return l.sort(function(e,t){return e.min-t.min}),l},e.makeCalcdata=function(t,n,o){var i,a,r,c,u,h,l=e.type,d="date"===l&&t[n+"calendar"];if(n in t){if(a=t[n],r=t._length||s.minRowLength(a),s.isTypedArray(a)&&("linear"===l||"log"===l)){if(r===a.length)return a;if(a.subarray)return a.subarray(0,r)}if("multicategory"===l)return function(e,t){for(var o,i,s=new Array(t),n=0;n<t;n++)o=(e[0]||[])[n],i=(e[1]||[])[n],s[n]=z([o,i]);return s}(a,r);for(c=new Array(r),i=0;i<r;i++)c[i]=e.d2c(a[i],0,d,o)}else{u=n+"0"in t?e.d2c(t[n+"0"],0,d):0,h=t["d"+n]?Number(t["d"+n]):1;for(a=t[{x:"y",y:"x"}[n]],r=t._length||a.length,c=new Array(r),i=0;i<r;i++)c[i]=u+i*h}if(e.rangebreaks)for(i=0;i<r;i++)c[i]=e.maskBreaks(c[i]);return c},e.isValidRange=function(t,n){return Array.isArray(t)&&2===t.length&&(n&&null===t[0]||a(e.r2l(t[0])))&&(n&&null===t[1]||a(e.r2l(t[1])))},e.getAutorangeDflt=function(t,n){var s=!e.isValidRange(t,"nullOk");return s&&n&&n.reverseDflt?s="reversed":t&&(null===t[0]&&null===t[1]?s=!0:null===t[0]&&null!==t[1]?s="min":null!==t[0]&&null===t[1]&&(s="max")),s},e.isReversed=function(){var t=e.autorange;return"reversed"===t||"min reversed"===t||"max reversed"===t},e.isPtWithinRange=function(t,n){var s=e.c2l(t[A],null,n),o=e.r2l(e.range[0]),i=e.r2l(e.range[1]);return o<i?o<=s&&s<=i:i<=s&&s<=o},e._emptyCategories=function(){e._categories=[],e._categoriesMap={}},e.clearCalc=function(){if(o=e._matchGroup,o){var n,s,o,r,i=null,a=null;for(r in o)if(n=t[h.id2name(r)],n._categories){i=n._categories,a=n._categoriesMap;break}i&&a?(e._categories=i,e._categoriesMap=a):e._emptyCategories()}else e._emptyCategories();if(e._initialCategories)for(s=0;s<e._initialCategories.length;s++)T(e._initialCategories[s])},e.sortByInitialCategories=function(){var s,o,i,a,n=[];if(e._emptyCategories(),e._initialCategories)for(s=0;s<e._initialCategories.length;s++)T(e._initialCategories[s]);n=n.concat(e._traceIndices),i=e._matchGroup;for(a in i)N!==a&&(o=t[h.id2name(a)],o._categories=e._categories,o._categoriesMap=e._categoriesMap,n=n.concat(o._traceIndices));return n},S=t._d3locale,"date"===e.type&&(e._dateFormat=S?S.timeFormat:E,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=S?S.numberFormat:C,delete e._minDtick,delete e._forceTick0}},85024:function(e){"use strict";e.exports=function(e){var t=["showexponent","showtickprefix","showticksuffix"].filter(function(t){return void 0!==e[t]});if(t.every(function(n){return e[n]===e[t[0]]})||1===t.length)return e[t[0]]}},95936:function(e,t,n){"use strict";var s=n(3400),i=n(76308).contrast,o=n(94724),a=n(85024),r=n(51272);function c(e,t){function n(n,i){return s.coerce(e,t,o.tickformatstops,n,i)}n("enabled")&&(n("dtickrange"),n("value"))}e.exports=function(e,t,n,l,d){if(d||(d={}),m=n("labelalias"),s.isPlainObject(m)||delete t.labelalias,f=a(e),n("showticklabels")){var m,f,p,g,u=d.font||{},h=t.color,v=-1!==(t.ticklabelposition||"").indexOf("inside")?i(d.bgColor):h&&h!==o.color.dflt?h:u.color;(s.coerceFont(n,"tickfont",{family:u.family,weight:u.weight,style:u.style,variant:u.variant,size:u.size,color:v}),d.noTicklabelstep||"multicategory"===l||"log"===l||n("ticklabelstep"),!d.noAng)&&(p=n("tickangle"),d.noAutotickangles||"auto"!==p||n("autotickangles")),"category"!==l&&(g=n("tickformat"),r(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:c}),t.tickformatstops.length||delete t.tickformatstops,d.noExp||g||"date"===l||(n("showexponent",f),n("exponentformat"),n("minexponent"),n("separatethousands")))}}},25404:function(e,t,n){"use strict";var s=n(3400),o=n(94724);e.exports=function(e,t,n,i){var a=i.isMinor,c=a?e.minor||{}:e,r=a?t.minor:t,l=a?o.minor:o,d=a?"minor.":"",u=s.coerce2(c,r,l,"ticklen",a?.6*(t.ticklen||5):void 0),h=s.coerce2(c,r,l,"tickwidth",a?t.tickwidth||1:void 0),m=s.coerce2(c,r,l,"tickcolor",(a?t.tickcolor:void 0)||r.color);n(d+"ticks",!a&&i.outerTicks||u||h||m?"outside":"")||(delete r.ticklen,delete r.tickwidth,delete r.tickcolor)}},26332:function(e,t,n){"use strict";var s=n(98728),o=n(3400).isArrayOrTypedArray,i=n(38116).isTypedArraySpec,a=n(38116).decodeTypedArraySpec;e.exports=function(e,t,n,r,c){c||(c={});var p,l=c.isMinor,g=l?e.minor||{}:e,d=l?t.minor:t,u=l?"minor.":"";function h(e){var t=g[e];return i(t)&&(t=a(t)),void 0!==t?t:(d._template||{})[e]}var v=h("tick0"),f=h("dtick"),b=h("tickvals"),m=n(u+"tickmode",o(b)?"array":f?"linear":"auto");"auto"===m||"sync"===m?n(u+"nticks"):"linear"===m?(p=d.dtick=s.dtick(f,r),d.tick0=s.tick0(v,r,t.calendar,p)):"multicategory"!==r&&(void 0===n(u+"tickvals")?d.tickmode="auto":l||n("ticktext"))}},73736:function(e,t,n){"use strict";var r=n(33428),a=n(24040),o=n(3400),s=n(43616),i=n(54460);e.exports=function(e,t,n,c){var l,d,u,h,f,p=e._fullLayout;if(0!==t.length)return c&&(d=c()),f=r.ease(n.easing),e._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(l),l=null,function(){for(s={},o=0;o<t.length;o++){var s,o,n=t[o],i=n.plotinfo.xaxis,r=n.plotinfo.yaxis;n.xr0&&(s[i._name+".range"]=n.xr0.slice()),n.yr0&&(s[r._name+".range"]=n.yr0.slice())}return a.call("relayout",e,s).then(function(){for(var e=0;e<t.length;e++)m(t[e].plotinfo)})}()}),u=Date.now(),l=window.requestAnimationFrame(function s(){h=Date.now();for(var i=Math.min(1,(h-u)/n.duration),r=f(i),o=0;o<t.length;o++)g(t[o],r);h-u>n.duration?(function(){for(s={},o=0;o<t.length;o++){var s,o,n=t[o],i=n.plotinfo.xaxis,r=n.plotinfo.yaxis;n.xr1&&(s[i._name+".range"]=n.xr1.slice()),n.yr1&&(s[r._name+".range"]=n.yr1.slice())}d&&d(),a.call("relayout",e,s).then(function(){for(var e=0;e<t.length;e++)m(t[e].plotinfo)})}(),l=window.cancelAnimationFrame(s)):l=window.requestAnimationFrame(s)}),Promise.resolve();function m(e){var t,n=e.xaxis,o=e.yaxis;p._defs.select("#"+e.clipId+"> rect").call(s.setTranslate,0,0).call(s.setScale,1,1),e.plot.call(s.setTranslate,n._offset,o._offset).call(s.setScale,1,1),t=e.plot.selectAll(".scatterlayer .trace"),t.selectAll(".point").call(s.setPointGroupScale,1,1),t.selectAll(".textpoint").call(s.setTextPointsScale,1,1),t.call(s.hideOutsideRangePoints,e)}function g(t,n){var u=t.plotinfo,r=u.xaxis,c=u.yaxis,h=r._length,f=c._length,j=!!t.xr1,b=!!t.yr1,a=[];if(j){var d=o.simpleMap(t.xr0,r.r2l),p=o.simpleMap(t.xr1,r.r2l),O=d[1]-d[0],w=p[1]-p[0];a[0]=(d[0]*(1-n)+n*p[0]-d[0])/(d[1]-d[0])*h,a[2]=h*(1-n+n*w/O),r.range[0]=r.l2r(d[0]*(1-n)+n*p[0]),r.range[1]=r.l2r(d[1]*(1-n)+n*p[1])}else a[0]=0,a[2]=h;if(b){var l=o.simpleMap(t.yr0,c.r2l),m=o.simpleMap(t.yr1,c.r2l),_=l[1]-l[0],y=m[1]-m[0];a[1]=(l[1]*(1-n)+n*m[1]-l[1])/(l[0]-l[1])*f,a[3]=f*(1-n+n*y/_),c.range[0]=r.l2r(l[0]*(1-n)+n*m[0]),c.range[1]=c.l2r(l[1]*(1-n)+n*m[1])}else a[1]=0,a[3]=f;i.drawOne(e,r,{skipTitle:!0}),i.drawOne(e,c,{skipTitle:!0}),i.redrawComponents(e,[r._id,c._id]);var v=j?h/a[2]:1,g=b?f/a[3]:1,x=j?a[0]:0,C=b?a[1]:0,E=j?a[0]/a[2]*h:0,k=b?a[1]/a[3]*f:0,A=r._offset-E,S=c._offset-k;u.clipRect.call(s.setTranslate,x,C).call(s.setScale,1/v,1/g),u.plot.call(s.setTranslate,A,S).call(s.setScale,v,g),s.setPointGroupScale(u.zoomScalePts,1/v,1/g),s.setTextPointsScale(u.zoomScaleTxt,1/v,1/g)}i.redrawComponents(e)}},14944:function(e,t,n){"use strict";var s=n(24040).traceIs,o=n(52976);function i(e){return{v:"x",h:"y"}[e.orientation||"v"]}function a(e,t){var n=i(e),o=s(e,"box-violin"),a=s(e._fullInput||{},"candlestick");return o&&!a&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}e.exports=function(e,t,n,r){n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)&&(function(e,t){if("-"===e.type&&(l=e._id,r=l.charAt(0),-1!==l.indexOf("scene")&&(l=r),n=function(e,t,n){for(var s,o=0;o<e.length;o++){if(s=e[o],"splom"===s.type&&s._length>0&&(s["_"+n+"axes"]||{})[t])return s;if((s[n+"axis"]||n)===t){if(a(s,n))return s;if((s[n]||[]).length||s[n+"0"])return s}}}(t,l,r),n))if("histogram"!==n.type||r!=={v:"y",h:"x"}[n.orientation||"v"]){var n,r,c,l,h,m,f,p,g=r+"calendar",u=n[g],d={noMultiCategory:!s(n,"cartesian")||s(n,"noMultiCategory")};if("box"===n.type&&n._hasPreCompStats&&r==={h:"x",v:"y"}[n.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=e.autotypenumbers,a(n,r)){p=i(n),h=[];for(m=0;m<t.length;m++)c=t[m],s(c,"box-violin")&&(c[r+"axis"]||r)===l&&(void 0!==c[p]?h.push(c[p][0]):void 0!==c.name?h.push(c.name):h.push("text"),c[g]!==u&&(u=void 0));e.type=o(h,u,d)}else"splom"===n.type?(f=n.dimensions[n._axesDim[l]],f.visible&&(e.type=o(f.values,u,d))):e.type=o(n[r]||[n[r+"0"]],u,d)}else e.type="linear"}(t,r.data),"-"===t.type?t.type="linear":e.type=t.type)}},62460:function(e,t,n){"use strict";var c=n(24040),s=n(3400);function i(e,t,n){var o,i,a,r=!1;if("data"===t.type)i=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;i=e._fullLayout}return o=s.nestedProperty(i,t.prop).get(),(a=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==o&&(r=!0),a[t.prop]=o,{changed:r,value:o}}function a(e,t){var i=[],n=t[0],a={};if("string"==typeof n)a[n]=t[1];else{if(!s.isPlainObject(n))return i;a=n}return o(a,function(e,t,n){i.push({type:"layout",prop:e,value:n})},"",0),i}function r(e,t){var n,i,a,r,c=[];if(i=t[0],r=t[1],n=t[2],a={},"string"==typeof i)a[i]=r;else{if(!s.isPlainObject(i))return c;a=i,void 0===n&&(n=r)}return void 0===n&&(n=null),o(a,function(t,s,o){if(Array.isArray(o)){i=o.slice();var i,a,r,l,u,d=Math.min(i.length,e.data.length);n&&(d=Math.min(d,n.length)),a=[];for(r=0;r<d;r++)a[r]=n?n[r]:r}else i=o,a=n?n.slice():null;if(null===a)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(a)){if(!Array.isArray(i)){u=i,i=[];for(l=0;l<a.length;l++)i[l]=u}i.length=Math.min(a.length,i.length)}c.push({type:"data",prop:t,traces:a,value:i})},"",0),c}function o(e,t,n,i){Object.keys(e).forEach(function(a){var c,r=e[a];"_"!==a[0]&&(c=n+(i>0?".":"")+a,s.isPlainObject(r)?o(r,t,c,i+1):t(c,a,r))})}t.manageCommandObserver=function(e,n,o,a){var c,l,d,r={},u=!0;if(n&&n._commandObserver&&(r=n._commandObserver),r.cache||(r.cache={}),r.lookupTable={},c=t.hasSimpleAPICommandBindings(e,o,r.lookupTable),n&&n._commandObserver){if(c)return r;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,r}if(c){i(e,c,r.cache),r.check=function(){if(u){var t=i(e,c,r.cache);return t.changed&&a&&void 0!==r.lookupTable[t.value]&&(r.disable(),Promise.resolve(a({value:t.value,type:c.type,prop:c.prop,traces:c.traces,index:r.lookupTable[t.value]})).then(r.enable,r.enable)),t.changed}};for(l=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<l.length;d++)e._internalOn(l[d],r.check);r.remove=function(){for(var t=0;t<l.length;t++)e._removeInternalListener(l[t],r.check)}}else s.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){u=!1},r.enable=function(){u=!0},n&&(n._commandObserver=r),r},t.hasSimpleAPICommandBindings=function(e,n,s){m=n.length;for(r=0;r<m;r++){var o,i,a,r,c,l,m,u=n[r],h=u.method,d=u.args;if(Array.isArray(d)||(d=[]),!h)return!1;if(l=t.computeAPICommandBindings(e,h,d),1!==l.length)return!1;if(o){{if((i=l[0]).type!==o.type)return!1;if(i.prop!==o.prop)return!1;if(Array.isArray(o.traces)){{if(!Array.isArray(i.traces))return!1;i.traces.sort();for(c=0;c<o.traces.length;c++)if(o.traces[c]!==i.traces[c])return!1}}else if(i.prop!==o.prop)return!1}}else o=l[0],Array.isArray(o.traces)&&o.traces.sort();if(a=(i=l[0]).value,Array.isArray(a)){if(1!==a.length)return!1;a=a[0]}s&&(s[a]=r)}return o},t.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var o,a=c.apiMethodRegistry[t],i=[e];Array.isArray(n)||(n=[]);for(o=0;o<n.length;o++)i.push(n[o]);return a.apply(null,i).catch(function(e){return s.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},t.computeAPICommandBindings=function(e,t,n){var s;switch(Array.isArray(n)||(n=[]),t){case"restyle":s=r(e,n);break;case"relayout":s=a(0,n);break;case"update":s=r(e,[n[0],n[2]]).concat(a(0,[n[1]]));break;case"animate":s=function(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,n);break;default:s=[]}return s}},86968:function(e,t,n){"use strict";var s=n(92880).extendFlat;t.u=function(e,t){t=t||{};var o={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},n=(e.name&&e.name,e.trace,t.description&&t.description,{x:s({},o,{}),y:s({},o,{}),editType:e.editType});return e.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:e.editType},n.column={valType:"integer",min:0,dflt:0,editType:e.editType}),n},t.Q=function(e,t,n,s){var i,a,l,d,r=s&&s.x||[0,1],c=s&&s.y||[0,1],o=t.grid;o&&(i=n("domain.column"),void 0!==i&&(i<o.columns?r=o._domains.x[i]:delete e.domain.column),a=n("domain.row"),void 0!==a&&(a<o.rows?c=o._domains.y[a]:delete e.domain.row)),l=n("domain.x",r),d=n("domain.y",c),l[0]<l[1]||(e.domain.x=r.slice()),d[0]<d[1]||(e.domain.y=c.slice())}},25376:function(e){"use strict";e.exports=function(e){var t,o=e.variantValues,n=e.editType,s=e.colorEditType;return void 0===s&&(s=n),t={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:s},weight:{editType:n,valType:"enumerated",values:["normal","bold"],dflt:"normal"},style:{editType:n,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:e.noFontVariant?void 0:{editType:n,valType:"enumerated",values:o||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},editType:n},e.autoSize&&(t.size.dflt="auto"),e.autoColor&&(t.color.dflt="auto"),e.arrayOk&&(t.family.arrayOk=!0,t.weight.arrayOk=!0,t.style.arrayOk=!0,t.variant.arrayOk=!0,t.size.arrayOk=!0,t.color.arrayOk=!0),t}},16672:function(e){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(e,t){"use strict";t.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},t.axesNames=["lonaxis","lataxis"],t.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},t.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},t.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},t.clipPad=.001,t.precision=.1,t.landColor="#F0DC82",t.waterColor="#3399FF",t.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},t.sphereSVG={type:"Sphere"},t.fillLayers={ocean:1,land:1,lakes:1},t.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},t.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],t.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],t.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(e,t,n){"use strict";var o,i=n(33428),l=n(83356),k=l.geoPath,E=l.geoDistance,x=n(87108),v=n(24040),a=n(3400),w=a.strTranslate,c=n(76308),r=n(43616),f=n(93024),A=n(7316),d=n(54460),p=n(19280).getAutoRange,u=n(86476),b=n(22676).prepSelect,j=n(22676).clearOutline,y=n(22676).selectOnClick,_=n(79248),s=n(79552),O=n(27144),h=n(59972),C=n(55712).NO;function m(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}o=m.prototype;function g(e,t){var i,c=s.clipPad,n=e[0]+c,o=e[1]-c,a=t[0]+c,r=t[1]-c;return n>0&&o<0&&(o+=360),i=(o-n)/4,{type:"Polygon",coordinates:[[[n,a],[n,r],[n+i,r],[n+2*i,r],[n+3*i,r],[o,r],[o,a],[o-i,a],[o-2*i,a],[o-3*i,a],[n,a]]]}}e.exports=function(e){return new m(e)},o.plot=function(e,t,n,o){if(i=this,o)return i.update(e,t,!0);i._geoCalcData=e,i._fullLayout=t;var i,a,c,d,u,m,f,g,v,p=t[this.id],r=[],l=!1;for(v in s.layerNameToAdjective)if("frame"!==v&&p["show"+v]){l=!0;break}for(u=!1,m=0;m<e.length;m++)a=e[0][0].trace,a._geo=i,a.locationmode&&(l=!0),c=a.marker,c&&(g=c.angle,d=c.angleref,(g||"north"===d||"previous"===d)&&(u=!0));(this._hasMarkerAngles=u,l)&&(f=h.getTopojsonName(p),null!==i.topojson&&f===i.topojsonName||(i.topojsonName=f,void 0===PlotlyGeoAssets.topojson[i.topojsonName]&&r.push(i.fetchTopojson()))),r=r.concat(O.fetchTraceGeoData(e)),n.push(new Promise(function(n,s){Promise.all(r).then(function(){i.topojson=PlotlyGeoAssets.topojson[i.topojsonName],i.update(e,t),n()}).catch(s)}))},o.fetchTopojson=function(){var e=this,t=h.getTopojsonPath(e.topojsonURL,e.topojsonName);return new Promise(function(n,s){i.json(t,function(o,i){if(o)return s(404===o.status?new Error(["plotly.js could not find topojson file at",t+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",t].join(" ")));PlotlyGeoAssets.topojson[e.topojsonName]=i,n()})})},o.update=function(e,t,n){s=t[this.id],this.hasChoropleth=!1;for(o=0;o<e.length;o++){var s,o,a,c,r=e[o],i=r[0].trace;"choropleth"===i.type&&(this.hasChoropleth=!0),!0===i.visible&&i._length>0&&i._module.calcGeoJSON(r,t)}if(!n){if(this.updateProjection(e,t))return;this.viewInitial&&this.scope===s.scope||this.saveViewInitial(s)}this.scope=s.scope,this.updateBaseLayers(t,s),this.updateDims(t,s),this.updateFx(t,s),A.generalUpdatePerTraceModule(this.graphDiv,this,e,s),a=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=a.selectAll(".point"),this.dataPoints.text=a.selectAll("text"),this.dataPaths.line=a.selectAll(".js-line"),c=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=c.selectAll("path"),this._render()},o.updateProjection=function(e,t){var d,u,v,b,O,C,A,S,P=this.graphDiv,o=t[this.id],c=t._size,_=o.domain,y=o.projection,R=o.lonaxis,L=o.lataxis,m=R._ax,f=L._ax,n=this.projection=function(e){for(var c,n=e.projection,u=n.type,o=s.projNames[u],o="geo"+a.titleCase(o),t=(l[o]||x[o])(),i=e._isSatellite?180*Math.acos(1/n.distance)/Math.PI:e._isClipped?s.lonaxisSpan[u]/2:null,d=["center","rotate","parallels","clipExtent"],h=function(e){return e?t:[]},r=0;r<d.length;r++)c=d[r],"function"!=typeof t[c]&&(t[c]=h);return t.isLonLatOverEdges=function(e){if(null===t(e))return!0;if(i){var n=t.rotate();return E(e,[-n[0],-n[1]])>i*Math.PI/180}return!1},t.getPath=function(){return k().projection(t)},t.getBounds=function(e){return t.getPath().bounds(e)},t.precision(s.precision),e._isSatellite&&t.tilt(n.tilt).distance(n.distance),i&&t.clipAngle(i-s.clipPad),t}(o),j=[[c.l+c.w*_.x[0],c.t+c.h*(1-_.y[1])],[c.l+c.w*_.x[1],c.t+c.h*(1-_.y[0])]],h=o.center||{},i=y.rotation||{},N=R.range||[],M=L.range||[];if(o.fitbounds)if(m._length=j[1][0]-j[0][0],f._length=j[1][1]-j[0][1],m.range=p(P,m),f.range=p(P,f),d=(m.range[0]+m.range[1])/2,u=(f.range[0]+f.range[1])/2,o._isScoped)h={lon:d,lat:u};else if(o._isClipped){h={lon:d,lat:u},i={lon:d,lat:u,roll:i.roll};var D=y.type,z=s.lonaxisSpan[D]/2||180,F=s.lataxisSpan[D]/2||90;N=[d-z,d+z],M=[u-F,u+F]}else h={lon:d,lat:u},i={lon:d,lat:i.lat,roll:i.roll};n.center([h.lon-i.lon,h.lat-i.lat]).rotate([-i.lon,-i.lat,i.roll]).parallels(y.parallels),S=g(N,M),n.fitExtent(j,S);var r=this.bounds=n.getBounds(S),T=this.fitScale=n.scale(),w=n.translate();o.fitbounds?(b=n.getBounds(g(m.range,f.range)),O=Math.min((r[1][0]-r[0][0])/(b[1][0]-b[0][0]),(r[1][1]-r[0][1])/(b[1][1]-b[0][1])),isFinite(O)?n.scale(O*T):a.warn("Something went wrong during"+this.id+"fitbounds computations.")):n.scale(y.scale*T),C=this.midPt=[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2],(n.translate([w[0]+(C[0]-w[0]),w[1]+(C[1]-w[1])]).clipExtent(r),o._isAlbersUsa)&&(A=n([h.lon,h.lat]),v=n.translate(),n.translate([v[0]-(A[0]-v[0]),v[1]-(A[1]-v[1])]))},o.updateBaseLayers=function(e,t){var o,f,n=this,m=n.topojson,p=n.layers,a=n.basePaths;function h(e){return"lonaxis"===e||"lataxis"===e}function l(e){return Boolean(s.lineLayers[e])}function u(e){return Boolean(s.fillLayers[e])}f=(this.hasChoropleth?s.layersForChoropleth:s.layers).filter(function(e){return l(e)||u(e)?t["show"+e]:!h(e)||t[e].showgrid}),o=n.framework.selectAll(".layer").data(f,String),o.exit().each(function(e){delete p[e],delete a[e],i.select(this).remove()}),o.enter().append("g").attr("class",function(e){return"layer "+e}).each(function(e){var t=p[e]=i.select(this);"bg"===e?n.bgRect=t.append("rect").style("pointer-events","all"):h(e)?a[e]=t.append("path").style("fill","none"):"backplot"===e?t.append("g").classed("choroplethlayer",!0):"frontplot"===e?t.append("g").classed("scatterlayer",!0):l(e)?a[e]=t.append("path").style("fill","none").style("stroke-miterlimit",2):u(e)&&(a[e]=t.append("path").style("stroke","none"))}),o.order(),o.each(function(n){var o=a[n],i=s.layerNameToAdjective[n];"frame"===n?o.datum(s.sphereSVG):l(n)||u(n)?o.datum(C(m,m.objects[n])):h(n)&&o.datum(function(e,t,n){u=t[e],o=s.scopeDefaults[t.scope],"lonaxis"===e?(c=o.lonaxisRange,i=o.lataxisRange,h=function(e,t){return[e,t]}):"lataxis"===e&&(c=o.lataxisRange,i=o.lonaxisRange,h=function(e,t){return[t,e]}),l={type:"linear",range:[c[0],c[1]-1e-6],tick0:u.tick0,dtick:u.dtick},d.setConvert(l,n),r=d.calcTicks(l),t.isScoped||"lonaxis"!==e||r.pop();for(var o,i,r,c,l,u,h,f=r.length,p=new Array(f),a=0;a<f;a++)for(var g=r[a].x,v=p[a]=[],m=i[0];m<i[1]+2.5;m+=2.5)v.push(h(g,m));return{type:"MultiLineString",coordinates:p}}(n,t,e)).call(c.stroke,t[n].gridcolor).call(r.dashLine,t[n].griddash,t[n].gridwidth),l(n)?o.call(c.stroke,t[i+"color"]).call(r.dashLine,"",t[i+"width"]):u(n)&&o.call(c.fill,t[i+"color"])})},o.updateDims=function(e,t){var n=this.bounds,s=(t.framewidth||0)/2,o=n[0][0]-s,i=n[0][1]-s,a=n[1][0]-o+s,l=n[1][1]-i+s;r.setRect(this.clipRect,o,i,a,l),this.bgRect.call(r.setRect,o,i,a,l).call(c.fill,t.bgcolor),this.xaxis._offset=o,this.xaxis._length=a,this.yaxis._offset=i,this.yaxis._length=l},o.updateFx=function(e,t){var c,n=this,s=n.graphDiv,o=n.bgRect,r=e.dragmode,d=e.clickmode;n.isStatic||(c={element:n.bgRect.node(),gd:s,plotinfo:{id:n.id,xaxis:n.xaxis,yaxis:n.yaxis,fillRangeItems:function(e,t){t.isRect?(e.range={})[n.id]=[l([t.xmin,t.ymin]),l([t.xmax,t.ymax])]:(e.lassoPoints={})[n.id]=t.map(l)}},xaxes:[n.xaxis],yaxes:[n.yaxis],subplot:n.id,clickFn:function(e){2===e&&j(s)}},"pan"===r?(o.node().onmousedown=null,o.call(_(n,t)),o.on("dblclick.zoom",function(){var o,e=n.viewInitial,t={};for(o in e)t[n.id+"."+o]=e[o];v.call("_guiRelayout",s,t),s.emit("plotly_doubleclick",null)}),s._context._scrollZoom.geo||o.on("wheel.zoom",null)):"select"!==r&&"lasso"!==r||(o.on(".zoom",null),c.prepFn=function(e,t,n){b(e,t,n,c,r)},u.init(c)),o.on("mousemove",function(){var e=n.projection.invert(a.getPositionFromD3Event());if(!e)return u.unhover(s,i.event);n.xaxis.p2c=function(){return e[0]},n.yaxis.p2c=function(){return e[1]},f.hover(s,i.event,n.id)}),o.on("mouseout",function(){s._dragging||u.unhover(s,i.event)}),o.on("click",function(){"select"!==r&&"lasso"!==r&&(d.indexOf("select")>-1&&y(i.event,s,[n.xaxis],[n.yaxis],n.id,c),d.indexOf("event")>-1&&f.click(s,i.event))}));function l(e){return n.projection.invert([e[0]+n.xaxis._offset,e[1]+n.yaxis._offset])}},o.makeFramework=function(){var e=this,n=e.graphDiv,t=n._fullLayout,s="clip"+t._uid+e.id;e.clipDef=t._clips.append("clipPath").attr("id",s),e.clipRect=e.clipDef.append("rect"),e.framework=i.select(e.container).append("g").attr("class","geo "+e.id).call(r.setClipUrl,s,n),e.project=function(t){var n=e.projection(t);return n?[n[0]-e.xaxis._offset,n[1]-e.yaxis._offset]:[null,null]},e.xaxis={_id:"x",c2p:function(t){return e.project(t)[0]}},e.yaxis={_id:"y",c2p:function(t){return e.project(t)[1]}},e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},d.setConvert(e.mockAxis,t)},o.saveViewInitial=function(e){var s,t=e.center||{},o=e.projection,n=o.rotation||{};this.viewInitial={fitbounds:e.fitbounds,"projection.scale":o.scale},s=e._isScoped?{"center.lon":t.lon,"center.lat":t.lat}:e._isClipped?{"projection.rotation.lon":n.lon,"projection.rotation.lat":n.lat}:{"center.lon":t.lon,"center.lat":t.lat,"projection.rotation.lon":n.lon},a.extendFlat(this.viewInitial,s)},o.render=function(e){this._hasMarkerAngles&&e?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},o._render=function(){var e,t=this.projection,n=t.getPath();function s(e){var n=t(e.lonlat);return n?w(n[0],n[1]):null}function o(e){return t.isLonLatOverEdges(e.lonlat)?"none":null}for(e in this.basePaths)this.basePaths[e].attr("d",n);for(e in this.dataPaths)this.dataPaths[e].attr("d",function(e){return n(e.geojson)});for(e in this.dataPoints)this.dataPoints[e].attr("display",o).attr("transform",s)}},10816:function(e,t,n){"use strict";var a=n(84888).KY,r=n(3400).counterRegex,c=n(43520),s="geo",o=r(s),i={};i[s]={valType:"subplotid",dflt:s,editType:"calc"},e.exports={attr:s,name:s,idRoot:s,idRegex:o,attrRegex:o,attributes:i,layoutAttributes:n(40384),supplyLayoutDefaults:n(86920),plot:function(e){for(var t=e._fullLayout,l=e.calcdata,r=t._subplots[s],i=0;i<r.length;i++){var n=r[i],d=a(l,s,n),o=t[n]._subplot;o||(o=c({id:n,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[n]._subplot=o),o.plot(d,t,e._promises)}},updateFx:function(e){for(var o,t=e._fullLayout,i=t._subplots[s],n=0;n<i.length;n++)o=t[i[n]],o._subplot.updateFx(t,o)},clean:function(e,t,n,o){for(var i,r,c=o._subplots[s]||[],a=0;a<c.length;a++)r=c[a],i=o[r]._subplot,!t[r]&&i&&(i.framework.remove(),i.clipDef.remove())}}},40384:function(e,t,n){"use strict";var s=n(22548),r=n(86968).u,c=n(98192).u,o=n(79552),l=n(67824).overrideAll,i=n(95376),a={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:s.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:c};(e.exports=l({domain:r({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:i(o.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:i(o.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:s.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:o.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:o.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:o.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:o.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:s.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:s.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:s.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:s.background},lonaxis:a,lataxis:a},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(e,t,n){"use strict";var s=n(3400),a=n(168),r=n(84888).op,o=n(79552),c=n(40384),i=o.axesNames;function l(e,t,n,a){var c,l,d,f,g,b,j,_,w,x,k,F,L=r(a.fullData,"geo",a.id).map(function(e){return e._expandedIndex}),z=n("resolution"),h=n("scope"),p=o.scopeDefaults[h],m=n("projection.type",p.projType),y=t._isAlbersUsa="albers usa"===m;y&&(h=t.scope="usa");var u=t._isScoped="world"!==h,D=t._isSatellite="satellite"===m,N=t._isConic=-1!==m.indexOf("conic")||"albers"===m,T=t._isClipped=!!o.lonaxisSpan[m];!1===e.visible&&(c=s.extendDeep({},t._template),c.showcoastlines=!1,c.showcountries=!1,c.showframe=!1,c.showlakes=!1,c.showland=!1,c.showocean=!1,c.showrivers=!1,c.showsubunits=!1,c.lonaxis&&(c.lonaxis.showgrid=!1),c.lataxis&&(c.lataxis.showgrid=!1),t._template=c);for(d=n("visible"),f=0;f<i.length;f++){if(l=i[f],x=[30,10][f],u)_=p[l+"Range"];else{var O=o[l+"Span"],C=(O[m]||O["*"])/2,E=n("projection.rotation."+l.substr(0,3),p.projRotate[f]);_=[E-C,E+C]}k=n(l+".range",_),n(l+".tick0"),n(l+".dtick",x),n(l+".showgrid",!!d&&void 0)&&(n(l+".gridcolor"),n(l+".gridwidth"),n(l+".griddash")),t[l]._ax={type:"linear",_id:l.slice(0,3),_traceIndices:L,setScale:s.identity,c2l:s.identity,r2l:s.identity,autorange:!0,range:k.slice(),_m:1,_input:{}}}var A=t.lonaxis.range,S=t.lataxis.range,M=A[0],v=A[1];M>0&&v<0&&(v+=360),b=(M+v)/2,y||(g=u?p.projRotate:[b,0,0],F=n("projection.rotation.lon",g[0]),n("projection.rotation.lat",g[1]),n("projection.rotation.roll",g[2]),n("showcoastlines",!u&&d)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!d&&void 0)&&n("oceancolor")),y?(w=-96.6,j=38.7):(w=u?b:F,j=(S[0]+S[1])/2),n("center.lon",w),n("center.lat",j),D&&(n("projection.tilt"),n("projection.distance")),N&&n("projection.parallels",p.projParallels||[0,60]),n("projection.scale"),n("showland",!!d&&void 0)&&n("landcolor"),n("showlakes",!!d&&void 0)&&n("lakecolor"),n("showrivers",!!d&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",u&&"usa"!==h&&d)&&(n("countrycolor"),n("countrywidth")),("usa"===h||"north america"===h&&50===z)&&(n("showsubunits",d),n("subunitcolor"),n("subunitwidth")),u||n("showframe",d)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete t.projection.scale,u?(delete t.center.lon,delete t.center.lat):T?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}e.exports=function(e,t,n){a(e,t,n,{type:"geo",attributes:c,handleDefaults:l,fullData:n,partition:"y"})}},79248:function(e,t,n){"use strict";var s=n(33428),r=n(3400),b=n(24040),i=Math.PI/180,o=180/Math.PI,c={cursor:"pointer"},l={cursor:"auto"};function d(e,t){return s.behavior.zoom().translate(t.translate()).scale(t.scale())}function h(e,t,n){var s=e.id,o=e.graphDiv,u=o.layout,a=u[s],c=o._fullLayout,h=c[s],l={},d={};function i(e,t){l[s+"."+e]=r.nestedProperty(a,e).get(),b.call("_storeDirectGUIEdit",u,c._preGUI,l);var n=r.nestedProperty(h,e);n.get()!==t&&(n.set(t),r.nestedProperty(a,e).set(t),d[s+"."+e]=t)}n(i),i("projection.scale",t.scale()/e.fitScale),i("fitbounds",!1),o.emit("plotly_relayout",d)}function v(e,t){var n=d(0,t);function o(n){var s=t.invert(e.midPt);n("center.lon",s[0]),n("center.lat",s[1])}return n.on("zoomstart",function(){s.select(this).style(c)}).on("zoom",function(){t.scale(s.event.scale).translate(s.event.translate),e.render(!0);var n=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":n[0],"geo.center.lat":n[1]})}).on("zoomend",function(){s.select(this).style(l),h(e,t,o)}),n}function j(e,t){var o,i,r,u,m,f,p,g,v,a=d(0,t);function n(e){return t.invert(e)}function b(n){var o=t.rotate(),s=t.invert(e.midPt);n("projection.rotation.lon",-o[0]),n("center.lon",s[0]),n("center.lat",s[1])}return a.on("zoomstart",function(){s.select(this).style(c),o=s.mouse(this),i=t.rotate(),p=t.translate(),f=i,u=n(o)}).on("zoom",function(){if(r=s.mouse(this),function(e){var s,o=n(e);return!o||(s=t(o),Math.abs(s[0]-e[0])>2||Math.abs(s[1]-e[1])>2)}(o))return a.scale(t.scale()),void a.translate(t.translate());t.scale(s.event.scale),t.translate([p[0],s.event.translate[1]]),u?n(r)&&(g=n(r),m=[f[0]+(g[0]-u[0]),i[1],i[2]],t.rotate(m),f=m):u=n(o=r),v=!0,e.render(!0);var l=t.rotate(),c=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":c[0],"geo.center.lat":c[1],"geo.projection.rotation.lon":-l[0]})}).on("zoomend",function(){s.select(this).style(l),v&&h(e,t,b)}),a}function g(e,t){var r,g={r:t.rotate(),k:t.scale()},n=d(0,t),p=function(e){for(var t,n=0,i=arguments.length,o=[];++n<i;)o.push(arguments[n]);return t=s.dispatch.apply(null,o),t.of=function(n,o){return function(i){var a;try{a=i.sourceEvent=s.event,i.target=e,s.event=i,t[i.type].apply(n,o)}finally{s.event=a}}},t}(n,"zoomstart","zoom","zoomend"),v=0,b=n.on;function j(e){var n=t.rotate();e("projection.rotation.lon",-n[0]),e("projection.rotation.lat",-n[1])}return n.on("zoomstart",function(){s.select(this).style(c);var e,l,d,h,j,y,_,w,O,x,A,k=s.mouse(this),E=t.rotate(),C=E,S=t.translate(),M=(x=.5*(_=E)[0]*i,O=.5*_[1]*i,w=.5*_[2]*i,h=Math.sin(x),j=Math.cos(x),e=Math.sin(O),d=Math.cos(O),l=Math.sin(w),[j*d*(y=Math.cos(w))+h*e*l,h*d*y-j*e*l,j*e*y+h*d*l,j*d*l-h*e*y]);r=a(t,k),b.call(n,"zoom",function(){if(y=s.mouse(this),t.scale(g.k=s.event.scale),r){if(a(t,y)){t.rotate(E).translate(S);var n,i,c,l,d,h,v,b,j,y,_,w=a(t,y),O=function(e,t){if(e&&t){var n=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}(e,t),o=Math.sqrt(m(n,n)),i=.5*Math.acos(Math.max(-1,Math.min(1,m(e,t)))),s=Math.sin(i)/o;return o&&[Math.cos(i),n[2]*s,-n[1]*s,n[0]*s]}}(r,w),x=function(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*o,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*o,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*o]}((i=(_=M)[0],c=_[1],l=_[2],n=_[3],[i*(h=(v=O)[0])-c*(d=v[1])-l*(b=v[2])-n*(j=v[3]),i*d+c*h+l*j-n*b,i*b-c*j+l*h+n*d,i*j+c*b-l*d+n*h])),e=g.r=function(e,t,n){var i,c,s=u(t,2,e[0]),s=u(s,1,e[1]),s=u(s,0,e[2]-n[2]),l=t[0],h=t[1],m=t[2],p=s[0],a=s[1],g=s[2],d=Math.atan2(h,l)*o,r=Math.sqrt(l*l+h*h);Math.abs(a)>r?(i=(a>0?90:-90)-d,c=0):(i=Math.asin(a/r)*o-d,c=Math.sqrt(r*r-a*a));var v=180-i-2*d,b=(Math.atan2(g,p)-Math.atan2(m,c))*o,j=(Math.atan2(g,p)-Math.atan2(m,-c))*o;return f(n[0],n[1],i,b)<=f(n[0],n[1],v,j)?[i,b,n[2]]:[v,j,n[2]]}(x,r,C);isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])||(e=C),t.rotate(e),C=e}}else r=a(t,k=y);p.of(this,arguments)({type:"zoom"})}),A=p.of(this,arguments),v++||A({type:"zoomstart"})}).on("zoomend",function(){var o;s.select(this).style(l),b.call(n,"zoom",null),o=p.of(this,arguments),--v||o({type:"zoomend"}),h(e,t,j)}).on("zoom.redraw",function(){e.render(!0);var n=t.rotate();e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.projection.rotation.lon":-n[0],"geo.projection.rotation.lat":-n[1]})}),s.rebind(n,p,"on")}function a(e,t){var n=e.invert(t);return n&&isFinite(n[0])&&isFinite(n[1])&&function(e){var t=e[0]*i,n=e[1]*i,s=Math.cos(n);return[s*Math.cos(t),s*Math.sin(t),Math.sin(n)]}(n)}function f(e,t,n,s){var o=p(n-e),i=p(s-t);return Math.sqrt(o*o+i*i)}function p(e){return(e%360+540)%360-180}function u(e,t,n){var r=n*i,s=e.slice(),o=0===t?1:0,a=2===t?1:2,c=Math.cos(r),l=Math.sin(r);return s[o]=e[o]*c-e[a]*l,s[a]=e[a]*c+e[o]*l,s}function m(e,t){for(var s=0,n=0,o=e.length;n<o;++n)s+=e[n]*t[n];return s}e.exports=function(e,t){var n=e.projection;return(t._isScoped?v:t._isClipped?g:j)(e,n)}},84888:function(e,t,n){"use strict";var s=n(24040),o=n(33816).SUBPLOT_PATTERN;t.KY=function(e,t,n){if(o=s.subplotsRegistry[t],!o)return[];for(var o,a,c=o.attr,r=[],i=0;i<e.length;i++)a=e[i],a[0].trace[c]===n&&r.push(a);return r},t._M=function(e,t,n){if(i=[],r=[],!(d="string"==typeof t?s.getModule(t).plot:"function"==typeof t?t:t.plot))return[i,e];for(l=n,a=0;a<e.length;a++){var i,a,r,l,d,c=e[a],o=c[0].trace,u=void 0!==o.zorder;!0===o.visible&&0!==o._length&&(!o._module||o._module.plot!==d||u&&o.zorder!==l?r.push(c):i.push(c))}return[i,r]},t.op=function(e,t,n){if(!s.subplotsRegistry[t])return[];var i,a,l,d,u,r=s.subplotsRegistry[t].attr,c=[];"gl2d"===t&&(l=n.match(o),d="x"+l[1],u="y"+l[2]);for(a=0;a<e.length;a++)i=e[a],"gl2d"===t&&s.traceIs(i,"gl2d")?i[r[0]]===d&&i[r[1]]===u&&c.push(i):i[r]===n&&c.push(i);return c}},2428:function(e,t,n){"use strict";var a=n(62644),r=n(97264),o=n(29128),i=n(33816),s=n(89184);function c(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}e.exports=function(e){var l=e.mouseContainer,n=e.glplot,t=new c(l,n);function u(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function d(s,o,a){var c,l,d,m,f,p,g,r=e.calcDataBox(),h=n.viewBox,y=t.lastPos[0],_=t.lastPos[1],b=i.MINDRAG*n.pixelRatio,j=i.MINZOOM*n.pixelRatio;function v(n,s,o){var i=Math.min(s,o),a=Math.max(s,o);i!==a?(r[n]=i,r[n+2]=a,t.dataBox=r,e.setRanges(r)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(o*=n.pixelRatio,a*=n.pixelRatio,a=h[3]-h[1]-a,e.fullLayout.dragmode){case"zoom":s?(g=o/(h[2]-h[0])*(r[2]-r[0])+r[0],m=a/(h[3]-h[1])*(r[3]-r[1])+r[1],t.boxInited||(t.boxStart[0]=g,t.boxStart[1]=m,t.dragStart[0]=o,t.dragStart[1]=a),t.boxEnd[0]=g,t.boxEnd[1]=m,t.boxInited=!0,t.boxEnabled||t.boxStart[0]===t.boxEnd[0]&&t.boxStart[1]===t.boxEnd[1]||(t.boxEnabled=!0),f=Math.abs(t.dragStart[0]-o)<j,p=Math.abs(t.dragStart[1]-a)<j,!function(){for(var n=e.graphDiv._fullLayout._axisConstraintGroups,s=e.xaxis._id,o=e.yaxis._id,t=0;t<n.length;t++)if(-1!==n[t][s]){if(-1!==n[t][o])return!0;break}return!1}()||f&&p?(f&&(t.boxEnd[0]=t.boxStart[0]),p&&(t.boxEnd[1]=t.boxStart[1])):(c=t.boxEnd[0]-t.boxStart[0],l=t.boxEnd[1]-t.boxStart[1],d=(r[3]-r[1])/(r[2]-r[0]),Math.abs(c*d)>Math.abs(l)?(t.boxEnd[1]=t.boxStart[1]+Math.abs(c)*d*(l>=0?1:-1),t.boxEnd[1]<r[1]?(t.boxEnd[1]=r[1],t.boxEnd[0]=t.boxStart[0]+(r[1]-t.boxStart[1])/Math.abs(d)):t.boxEnd[1]>r[3]&&(t.boxEnd[1]=r[3],t.boxEnd[0]=t.boxStart[0]+(r[3]-t.boxStart[1])/Math.abs(d))):(t.boxEnd[0]=t.boxStart[0]+Math.abs(l)/d*(c>=0?1:-1),t.boxEnd[0]<r[0]?(t.boxEnd[0]=r[0],t.boxEnd[1]=t.boxStart[1]+(r[0]-t.boxStart[0])*Math.abs(d)):t.boxEnd[0]>r[2]&&(t.boxEnd[0]=r[2],t.boxEnd[1]=t.boxStart[1]+(r[2]-t.boxStart[0])*Math.abs(d))))):t.boxEnabled?(c=t.boxStart[0]!==t.boxEnd[0],l=t.boxStart[1]!==t.boxEnd[1],c||l?(c&&(v(0,t.boxStart[0],t.boxEnd[0]),e.xaxis.autorange=!1),l&&(v(1,t.boxStart[1],t.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),t.boxEnabled=!1,t.boxInited=!1):t.boxInited&&(t.boxInited=!1);break;case"pan":t.boxEnabled=!1,t.boxInited=!1,s?(t.panning||(t.dragStart[0]=o,t.dragStart[1]=a),Math.abs(t.dragStart[0]-o)<b&&(o=t.dragStart[0]),Math.abs(t.dragStart[1]-a)<b&&(a=t.dragStart[1]),c=(y-o)*(r[2]-r[0])/(n.viewBox[2]-n.viewBox[0]),l=(_-a)*(r[3]-r[1])/(n.viewBox[3]-n.viewBox[1]),r[0]+=c,r[2]+=c,r[1]+=l,r[3]+=l,e.setRanges(r),t.panning=!0,t.lastInputTime=Date.now(),u(),e.cameraChanged(),e.handleAnnotations()):t.panning&&(t.panning=!1,e.relayoutCallback())}t.lastPos[0]=o,t.lastPos[1]=a}return t.mouseListener=a(l,d),l.addEventListener("touchstart",function(e){var t=o(e.changedTouches[0],l);d(0,t[0],t[1]),d(1,t[0],t[1]),e.preventDefault()},!!s&&{passive:!1}),l.addEventListener("touchmove",function(e){e.preventDefault();var t=o(e.changedTouches[0],l);d(1,t[0],t[1]),e.preventDefault()},!!s&&{passive:!1}),l.addEventListener("touchend",function(e){d(0,t.lastPos[0],t.lastPos[1]),e.preventDefault()},!!s&&{passive:!1}),t.wheelListener=r(l,function(s,o){if(!e.scrollZoom)return!1;var i=e.calcDataBox(),a=n.viewBox,d=t.lastPos[0],h=t.lastPos[1],r=Math.exp(5*o/(a[3]-a[1])),c=d/(a[2]-a[0])*(i[2]-i[0])+i[0],l=h/(a[3]-a[1])*(i[3]-i[1])+i[1];return i[0]=(i[0]-c)*r+c,i[2]=(i[2]-c)*r+c,i[1]=(i[1]-l)*r+l,i[3]=(i[3]-l)*r+l,e.setRanges(i),t.lastInputTime=Date.now(),u(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),t}},92568:function(e,t,n){"use strict";var s,a,r=n(54460),o=n(43080);function i(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}s=i.prototype,a=["xaxis","yaxis"],s.merge=function(e){for(this.titleEnable=!1,this.backgroundColor=o(e.plot_bgcolor),t=0;t<2;++t){var t,n,s,i,r,c,l,d,u,h,m,f=(i=a[t]).charAt(0);for(m=(n=e[this.scene[i]._name]).title.text===this.scene.fullLayout._dfltTitle[f]?"":n.title.text,s=0;s<=2;s+=2)this.labelEnable[t+s]=!1,this.labels[t+s]=m,this.labelColor[t+s]=o(n.title.font.color),this.labelFont[t+s]=n.title.font.family,this.labelSize[t+s]=n.title.font.size,this.labelPad[t+s]=this.getLabelPad(i,n),this.tickEnable[t+s]=!1,this.tickColor[t+s]=o((n.tickfont||{}).color),this.tickAngle[t+s]="auto"===n.tickangle?0:Math.PI*-n.tickangle/180,this.tickPad[t+s]=this.getTickPad(n),this.tickMarkLength[t+s]=0,this.tickMarkWidth[t+s]=n.tickwidth||0,this.tickMarkColor[t+s]=o(n.tickcolor),this.borderLineEnable[t+s]=!1,this.borderLineColor[t+s]=o(n.linecolor),this.borderLineWidth[t+s]=n.linewidth||0;c=this.hasSharedAxis(n),d=this.hasAxisInDfltPos(i,n)&&!c,r=this.hasAxisInAltrPos(i,n)&&!c,l=n.mirror||!1,h=c?-1!==String(l).indexOf("all"):!!l,u=c?"allticks"===l:-1!==String(l).indexOf("ticks"),d?this.labelEnable[t]=!0:r&&(this.labelEnable[t+2]=!0),d?this.tickEnable[t]=n.showticklabels:r&&(this.tickEnable[t+2]=n.showticklabels),(d||h)&&(this.borderLineEnable[t]=n.showline),(r||h)&&(this.borderLineEnable[t+2]=n.showline),(d||u)&&(this.tickMarkLength[t]=this.getTickMarkLength(n)),(r||u)&&(this.tickMarkLength[t+2]=this.getTickMarkLength(n)),this.gridLineEnable[t]=n.showgrid,this.gridLineColor[t]=o(n.gridcolor),this.gridLineWidth[t]=n.gridwidth,this.zeroLineEnable[t]=n.zeroline,this.zeroLineColor[t]=o(n.zerolinecolor),this.zeroLineWidth[t]=n.zerolinewidth}},s.hasSharedAxis=function(e){var t=this.scene,n=t.fullLayout._subplots.gl2d;return 0!==r.findSubplotsWithAxis(n,e).indexOf(t.id)},s.hasAxisInDfltPos=function(e,t){var n=t.side;return"xaxis"===e?"bottom"===n:"yaxis"===e?"left"===n:void 0},s.hasAxisInAltrPos=function(e,t){var n=t.side;return"xaxis"===e?"top"===n:"yaxis"===e?"right"===n:void 0},s.getLabelPad=function(e,t){var n=1.5,s=t.title.font.size,o=t.showticklabels;return"xaxis"===e?"top"===t.side?s*(n+(o?1:0))-10:s*(n+(o?.5:0))-10:"yaxis"===e?"right"===t.side?10+s*(n+(o?1:.5)):10+s*(n+(o?.5:0)):void 0},s.getTickPad=function(e){return"outside"===e.ticks?10+e.ticklen:15},s.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return"inside"===e.ticks?-t:t},e.exports=function(e){return new i(e)}},39952:function(e,t,n){"use strict";var o=n(67824).overrideAll,d=n(17188),r=n(64859),c=n(9616),a=n(33816),s=n(57952),l=n(65460),i=n(84888).op;t.name="gl2d",t.attr=["xaxis","yaxis"],t.idRoot=["x","y"],t.idRegex=a.idRegex,t.attrRegex=a.attrRegex,t.attributes=n(26720),t.supplyLayoutDefaults=function(e,t,n){t._has("cartesian")||s.supplyLayoutDefaults(e,t,n)},t.layoutAttrOverrides=o(s.layoutAttributes,"plot","from-root"),t.baseLayoutAttrOverrides=o({plot_bgcolor:r.plot_bgcolor,hoverlabel:l.hoverlabel},"plot","nested"),t.plot=function(e){for(var t=e._fullLayout,l=e._fullData,a=t._subplots.gl2d,s=0;s<a.length;s++){var o=a[s],r=t._plots[o],c=i(l,"gl2d",o),n=r._scene2d;void 0===n&&(n=new d({id:o,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),r._scene2d=n),n.plot(c,e.calcdata,t,e.layout)}},t.clean=function(e,t,n,o){for(var a,c,l=o._subplots.gl2d||[],r=0;r<l.length;r++)a=l[r],c=o._plots[a],c._scene2d&&0===i(e,"gl2d",a).length&&(c._scene2d.destroy(),delete o._plots[a]);s.clean.apply(this,arguments)},t.drawFramework=function(e){e._context.staticPlot||s.drawFramework(e)},t.toSVG=function(e){for(var s,i,t=e._fullLayout,o=t._subplots.gl2d,n=0;n<o.length;n++)s=t._plots[o[n]]._scene2d,i=s.toImage("png"),t._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":i,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),s.destroy()},t.updateFx=function(e){for(var t=e._fullLayout,s=t._subplots.gl2d,n=0;n<s.length;n++)t._plots[s[n]]._scene2d.updateFx(t.dragmode)}},17188:function(e,t,n){"use strict";var s,i,a,c=n(24040),r=n(54460),o=n(93024),x=n(67792).gl_plot2d,j=n(67792).gl_spikes2d,v=n(67792).gl_select_box,h=n(5408),g=n(92568),p=n(2428),C=n(16576),m=n(71888),f=m.enforce,u=m.clean,b=n(19280).doAutoRange,d=n(72760),y=d.drawMode,_=d.selectMode,w=["xaxis","yaxis"],O=n(33816).SUBPLOT_PATTERN;function l(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(t),this.makeFramework(),this.stopped||(this.glplotOptions=g(this),this.glplotOptions.merge(t),this.glplot=x(this.glplotOptions),this.camera=p(this),this.traces={},this.spikes=j(this.glplot),this.selectBox=v(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}e.exports=l,s=l.prototype,s.makeFramework=function(){if(this.staticPlot){if(!a&&!(i=document.createElement("canvas"),a=h({canvas:i,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0})))throw new Error("Error creating static canvas/context for image server");this.canvas=i,this.gl=a}else{var e,t,n,s,o,c=this.container.querySelector(".gl-canvas-focus"),r=h({canvas:c,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!r)return C(this),void(this.stopped=!0);this.canvas=c,this.gl=r}t=this.canvas,t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style["pointer-events"]="none",this.updateSize(t),e=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.style.position="absolute",e.style.top=e.style.left="0px",e.style.width=e.style.height="100%",e.style["z-index"]=20,e.style["pointer-events"]="none",n=this.mouseContainer=document.createElement("div"),n.style.position="absolute",n.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick"),o=this.container,o.appendChild(e),o.appendChild(n),s=this,n.addEventListener("mouseout",function(){s.isMouseOver=!1,s.unhover()}),n.addEventListener("mouseover",function(){s.isMouseOver=!0})},s.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(i),this.updateSize(this.canvas);var s,o,a,r,c,l,u,h,m,f,t=this.glplot.gl,n=t.drawingBufferWidth,d=t.drawingBufferHeight;t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null),o=new Uint8Array(n*d*4),t.readPixels(0,0,n,d,t.RGBA,t.UNSIGNED_BYTE,o);for(l=0,c=d-1;l<c;++l,--c)for(r=0;r<n;++r)for(a=0;a<4;++a)f=o[4*(n*l+r)+a],o[4*(n*l+r)+a]=o[4*(n*c+r)+a],o[4*(n*c+r)+a]=f;switch(s=document.createElement("canvas"),s.width=n,s.height=d,h=s.getContext("2d",{willReadFrequently:!0}),m=h.createImageData(n,d),m.data.set(o),h.putImageData(m,0,0),e){case"jpeg":u=s.toDataURL("image/jpeg");break;case"webp":u=s.toDataURL("image/webp");break;default:u=s.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(i),u},s.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,n=this.fullLayout,i=n.width,a=n.height,s=0|Math.ceil(t*i),o=0|Math.ceil(t*a);return e.width===s&&e.height===o||(e.width=s,e.height=o),e},s.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var t,n=[r.calcTicks(this.xaxis),r.calcTicks(this.yaxis)],e=0;e<2;++e)for(t=0;t<n[e].length;++t)n[e][t].text=n[e][t].text+"";return n},s.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(O),n="xaxis"+t[1],s="yaxis"+t[2];this.xaxis=this.fullLayout[n],this.yaxis=this.fullLayout[s]},s.relayoutCallback=function(){var o,i,s=this.graphDiv,t=this.xaxis,n=this.yaxis,a=s.layout,e={},r=e[t._name+".range"]=t.range.slice(),l=e[n._name+".range"]=n.range.slice();e[t._name+".autorange"]=t.autorange,e[n._name+".autorange"]=n.autorange,c.call("_storeDirectGUIEdit",s.layout,s._fullLayout._preGUI,e),o=a[t._name],o.range=r,o.autorange=t.autorange,i=a[n._name],i.range=l,i.autorange=n.autorange,e.lastInputTime=this.camera.lastInputTime,s.emit("plotly_relayout",e)},s.cameraChanged=function(){var e,t=this.camera;this.glplot.setDataBox(this.calcDataBox()),e=this.computeTickMarks(),function(e,t){for(n=0;n<2;++n){var n,s,o=e[n],i=t[n];if(o.length!==i.length)return!0;for(s=0;s<o.length;++s)if(o[s].x!==i[s].x)return!0}return!1}(e,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=e,this.glplotOptions.dataBox=t.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},s.handleAnnotations=function(){for(var t,s=this.graphDiv,n=this.fullLayout.annotations,e=0;e<n.length;e++)t=n[e],t.xref===this.xaxis._id&&t.yref===this.yaxis._id&&c.getComponentMethod("annotations","drawOne")(s,e)},s.destroy=function(){if(this.glplot){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},s.plot=function(e,t,n){m=this.glplot,this.updateRefs(n),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(e,t),this.updateFx(n.dragmode),d=n.width,h=n.height,this.updateSize(this.canvas),o=this.glplotOptions,o.merge(n),o.screenBox=[0,0,d,h],c={_fullLayout:{_axisConstraintGroups:n._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:n._size}},u(c,this.xaxis),u(c,this.yaxis);var o,a,c,l,d,h,m,s=n._size,r=this.xaxis.domain,i=this.yaxis.domain;for(o.viewBox=[s.l+r[0]*s.w,s.b+i[0]*s.h,d-s.r-(1-r[1])*s.w,h-s.t-(1-i[1])*s.h],this.mouseContainer.style.width=s.w*(r[1]-r[0])+"px",this.mouseContainer.style.height=s.h*(i[1]-i[0])+"px",this.mouseContainer.height=s.h*(i[1]-i[0]),this.mouseContainer.style.left=s.l+r[0]*s.w+"px",this.mouseContainer.style.top=s.t+(1-i[1])*s.h+"px",a=0;a<2;++a)(l=this[w[a]])._length=o.viewBox[a+2]-o.viewBox[a],b(this.graphDiv,l),l.setScale();f(c),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(n),m.update(o),this.glplot.draw()},s.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,n=e.range,s=t.range,o=e.r2l,i=t.r2l;return[o(n[0]),i(s[0]),o(n[1]),i(s[1])]},s.setRanges=function(e){var t=this.xaxis,n=this.yaxis,s=t.l2r,o=n.l2r;t.range=[s(e[0]),s(e[2])],n.range=[o(e[1]),o(e[3])]},s.updateTraces=function(e,t){a=Object.keys(this.traces),this.fullData=e;t:for(n=0;n<a.length;n++){var n,s,o,i,a,c,r=a[n],l=this.traces[r];for(i=0;i<e.length;i++)if((s=e[i]).uid===r&&s.type===l.type)continue t;l.dispose(),delete this.traces[r]}for(n=0;n<e.length;n++)s=e[n],c=t[n],o=this.traces[s.uid],o?o.update(s,c):(o=s._module.plot(this,s,c),this.traces[s.uid]=o);this.glplot.objects.sort(function(e,t){return e._trace.index-t._trace.index})},s.updateFx=function(e){_(e)||y(e)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===e?"move":"zoom"===e?"crosshair":null},s.emitPointAction=function(e,t){for(var n,i,r=e.trace.uid,a=e.pointIndex,s=0;s<this.fullData.length;s++)this.fullData[s].uid===r&&(n=this.fullData[s]);i={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n.index,pointNumber:a,data:n._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis},o.appendArrayPointValue(i,n,a),this.graphDiv.emit(t,{points:[i]})},s.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var t,i,a,l,m,p,g,e=this.glplot,n=this.camera,h=n.mouseListener,v=1===this.lastButtonState&&0===h.buttons,d=this.fullLayout;if(this.lastButtonState=h.buttons,this.cameraChanged(),p=h.x*e.pixelRatio,g=this.canvas.height-e.pixelRatio*h.y,n.boxEnabled&&"zoom"===d.dragmode){this.selectBox.enabled=!0;for(m=this.selectBox.selectBox=[Math.min(n.boxStart[0],n.boxEnd[0]),Math.min(n.boxStart[1],n.boxEnd[1]),Math.max(n.boxStart[0],n.boxEnd[0]),Math.max(n.boxStart[1],n.boxEnd[1])],a=0;a<2;a++)n.boxStart[a]===n.boxEnd[a]&&(m[a]=e.dataBox[a],m[a+2]=e.dataBox[a+2]);e.setDirty()}else if(!n.panning&&this.isMouseOver){this.selectBox.enabled=!1;var u=d._size,b=this.xaxis.domain,j=this.yaxis.domain,s=(i=e.pick(p/e.pixelRatio+u.l+b[0]*u.w,g/e.pixelRatio-(u.t+(1-j[1])*u.h)))&&i.object._trace.handlePick(i);if(s&&v&&this.emitPointAction(s,"plotly_click"),i&&"skip"!==i.object._trace.hoverinfo&&d.hovermode&&s&&(!this.lastPickResult||this.lastPickResult.traceUid!==s.trace.uid||this.lastPickResult.dataCoord[0]!==s.dataCoord[0]||this.lastPickResult.dataCoord[1]!==s.dataCoord[1])){t=s,this.lastPickResult={traceUid:s.trace?s.trace.uid:null,dataCoord:s.dataCoord.slice()},this.spikes.update({center:i.dataCoord}),t.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(i.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(i.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(s,"plotly_hover");var r=this.fullData[t.trace.index]||{},c=t.pointIndex,f=o.castHoverinfo(r,d,c);f&&"all"!==f&&(l=f.split("+"),-1===l.indexOf("x")&&(t.traceCoord[0]=void 0),-1===l.indexOf("y")&&(t.traceCoord[1]=void 0),-1===l.indexOf("z")&&(t.traceCoord[2]=void 0),-1===l.indexOf("text")&&(t.textLabel=void 0),-1===l.indexOf("name")&&(t.name=void 0)),o.loneHover({x:t.screenCoord[0],y:t.screenCoord[1],xLabel:this.hoverFormatter("xaxis",t.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",t.traceCoord[1]),zLabel:t.traceCoord[2],text:t.textLabel,name:t.name,color:o.castHoverOption(r,c,"bgcolor")||t.color,borderColor:o.castHoverOption(r,c,"bordercolor"),fontFamily:o.castHoverOption(r,c,"font.family"),fontSize:o.castHoverOption(r,c,"font.size"),fontColor:o.castHoverOption(r,c,"font.color"),nameLength:o.castHoverOption(r,c,"namelength"),textAlign:o.castHoverOption(r,c,"align")},{container:this.svgContainer,gd:this.graphDiv})}}i||this.unhover(),e.draw()}},s.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),o.loneUnhover(this.svgContainer))},s.hoverFormatter=function(e,t){if(void 0!==t){var n=this[e];return r.tickText(n,n.c2l(t),"hover").text}}},12536:function(e,t,n){"use strict";var l=n(67824).overrideAll,d=n(65460),i=n(98432),a=n(84888).op,r=n(3400),c=n(9616),s="gl3d",o="scene";t.name=s,t.attr=o,t.idRoot=o,t.idRegex=t.attrRegex=r.counterRegex("scene"),t.attributes=n(6636),t.layoutAttributes=n(346),t.baseLayoutAttrOverrides=l({hoverlabel:d.hoverlabel},"plot","nested"),t.supplyLayoutDefaults=n(5208),t.plot=function(e){for(var o=e._fullLayout,h=e._fullData,d=o._subplots[s],r=0;r<d.length;r++){var c=d[r],u=a(h,s,c),l=o[c],t=l.camera,n=l._scene;n||(n=new i({id:c,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio,camera:t},o),l._scene=n),n.viewInitial||(n.viewInitial={up:{x:t.up.x,y:t.up.y,z:t.up.z},eye:{x:t.eye.x,y:t.eye.y,z:t.eye.z},center:{x:t.center.x,y:t.center.y,z:t.center.z}}),n.plot(u,o,e.layout)}},t.clean=function(e,t,n,o){for(var i,r=o._subplots[s]||[],a=0;a<r.length;a++)i=r[a],!t[i]&&o[i]._scene&&(o[i]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+i).remove())},t.toSVG=function(e){for(var o=e._fullLayout,a=o._subplots[s],t=o._size,i=0;i<a.length;i++){var r=o[a[i]],n=r.domain,l=r._scene,d=l.toImage("png");o._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":d,x:t.l+t.w*n.x[0],y:t.t+t.h*(1-n.y[1]),width:t.w*(n.x[1]-n.x[0]),height:t.h*(n.y[1]-n.y[0]),preserveAspectRatio:"none"}),l.destroy()}},t.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),o+t}},t.updateFx=function(e){for(var t=e._fullLayout,o=t._subplots[s],n=0;n<o.length;n++)t[o[n]]._scene.updateFx(t.dragmode,t.hovermode)}},6636:function(e){"use strict";e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(e,t,n){"use strict";var i=n(76308),s=n(94724),o=n(92880).extendFlat,a=n(67824).overrideAll;e.exports=a({visible:s.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:i.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:s.color,categoryorder:s.categoryorder,categoryarray:s.categoryarray,title:{text:s.title.text,font:s.title.font},type:o({},s.type,{values:["-","linear","log","date","category"]}),autotypenumbers:s.autotypenumbers,autorange:s.autorange,autorangeoptions:{minallowed:s.autorangeoptions.minallowed,maxallowed:s.autorangeoptions.maxallowed,clipmin:s.autorangeoptions.clipmin,clipmax:s.autorangeoptions.clipmax,include:s.autorangeoptions.include,editType:"plot"},rangemode:s.rangemode,minallowed:s.minallowed,maxallowed:s.maxallowed,range:o({},s.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,mirror:s.mirror,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:s.tickfont,tickangle:s.tickangle,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickformat:s.tickformat,tickformatstops:s.tickformatstops,hoverformat:s.hoverformat,showline:s.showline,linecolor:s.linecolor,linewidth:s.linewidth,showgrid:s.showgrid,gridcolor:o({},s.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:s.gridwidth,zeroline:s.zeroline,zerolinecolor:s.zerolinecolor,zerolinewidth:s.zerolinewidth,_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}},"plot","from-root")},64380:function(e,t,n){"use strict";var l=n(49760).mix,o=n(3400),i=n(31780),a=n(86140),r=n(14944),c=n(28336),s=["xaxis","yaxis","zaxis"];e.exports=function(e,t,n){function d(e,t){return o.coerce(m,u,a,e,t)}for(var u,h,m,f=0;f<s.length;f++)h=s[f],m=e[h]||{},(u=i.newContainer(t,h))._id=h[0]+n.scene,u._name=h,r(m,u,d,n),c(m,u,d,{font:n.font,letter:h[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),d("gridcolor",l(u.color,n.bgColor,72.72727272727273).toRgbString()),d("title.text",h[0]),u.setScale=o.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",u.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}},44728:function(e,t,n){"use strict";var s=n(43080),i=n(3400),a=["xaxis","yaxis","zaxis"];function o(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}o.prototype.merge=function(e,t){for(var n,r=this,o=0;o<3;++o)n=t[a[o]],n.visible?(r.labels[o]=e._meta?i.templateString(n.title.text,e._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(r.labelColor[o]=s(n.title.font.color)),n.title.font.family&&(r.labelFont[o]=n.title.font.family),n.title.font.size&&(r.labelSize[o]=n.title.font.size),n.title.font.weight&&(r.labelFontWeight[o]=n.title.font.weight),n.title.font.style&&(r.labelFontStyle[o]=n.title.font.style),n.title.font.variant&&(r.labelFontVariant[o]=n.title.font.variant)),"showline"in n&&(r.lineEnable[o]=n.showline),"linecolor"in n&&(r.lineColor[o]=s(n.linecolor)),"linewidth"in n&&(r.lineWidth[o]=n.linewidth),"showgrid"in n&&(r.gridEnable[o]=n.showgrid),"gridcolor"in n&&(r.gridColor[o]=s(n.gridcolor)),"gridwidth"in n&&(r.gridWidth[o]=n.gridwidth),"log"===n.type?r.zeroEnable[o]=!1:"zeroline"in n&&(r.zeroEnable[o]=n.zeroline),"zerolinecolor"in n&&(r.zeroLineColor[o]=s(n.zerolinecolor)),"zerolinewidth"in n&&(r.zeroLineWidth[o]=n.zerolinewidth),"ticks"in n&&n.ticks?r.lineTickEnable[o]=!0:r.lineTickEnable[o]=!1,"ticklen"in n&&(r.lineTickLength[o]=r._defaultLineTickLength[o]=n.ticklen),"tickcolor"in n&&(r.lineTickColor[o]=s(n.tickcolor)),"tickwidth"in n&&(r.lineTickWidth[o]=n.tickwidth),"tickangle"in n&&(r.tickAngle[o]="auto"===n.tickangle?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(r.tickEnable[o]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(r.tickColor[o]=s(n.tickfont.color)),n.tickfont.family&&(r.tickFont[o]=n.tickfont.family),n.tickfont.size&&(r.tickSize[o]=n.tickfont.size),n.tickfont.weight&&(r.tickFontWeight[o]=n.tickfont.weight),n.tickfont.style&&(r.tickFontStyle[o]=n.tickfont.style),n.tickfont.variant&&(r.tickFontVariant[o]=n.tickfont.variant)),"mirror"in n?-1!==["ticks","all","allticks"].indexOf(n.mirror)?(r.lineTickMirror[o]=!0,r.lineMirror[o]=!0):!0===n.mirror?(r.lineTickMirror[o]=!1,r.lineMirror[o]=!0):(r.lineTickMirror[o]=!1,r.lineMirror[o]=!1):r.lineMirror[o]=!1,"showbackground"in n&&!1!==n.showbackground?(r.backgroundEnable[o]=!0,r.backgroundColor[o]=s(n.backgroundcolor)):r.backgroundEnable[o]=!1):(r.tickEnable[o]=!1,r.labelEnable[o]=!1,r.lineEnable[o]=!1,r.lineTickEnable[o]=!1,r.gridEnable[o]=!1,r.zeroEnable[o]=!1,r.backgroundEnable[o]=!1)},e.exports=function(e,t){var n=new o;return n.merge(e,t),n}},5208:function(e,t,n){"use strict";var i=n(3400),d=n(76308),a=n(24040),r=n(168),c=n(64380),o=n(346),l=n(84888).op,s="gl3d";function u(e,t,n,o){for(var i,p,g,v,b=n("bgcolor"),j=d.combine(b,o.paper_bgcolor),h=["up","center","eye"],r=0;r<h.length;r++)n("camera."+h[r]+".x"),n("camera."+h[r]+".y"),n("camera."+h[r]+".z");if(n("camera.projection.type"),p=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),v=n("aspectmode",p?"manual":"auto"),p||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},"manual"===v&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode),g=l(o.fullData,s,o.id),c(e,t,{font:o.font,scene:o.id,data:g,bgColor:j,calendar:o.calendar,autotypenumbersDflt:o.autotypenumbersDflt,fullLayout:o.fullLayout}),a.getComponentMethod("annotations3d","handleDefaults")(e,t,o),i=o.getDfltFromLayout("dragmode"),!1!==i&&!i)if(i="orbit",e.camera&&e.camera.up){var m=e.camera.up.x,f=e.camera.up.y,u=e.camera.up.z;0!==u&&(m&&f&&u?u/Math.sqrt(m*m+f*f+u*u)>.999&&(i="turntable"):i="turntable")}else i="turntable";n("dragmode",i),n("hovermode",o.getDfltFromLayout("hovermode"))}e.exports=function(e,t,n){var a=t._basePlotModules.length>1;r(e,t,n,{type:s,attributes:o,handleDefaults:u,fullLayout:t,font:t.font,fullData:n,getDfltFromLayout:function(t){if(!a)return i.validate(e[t],o[t])?e[t]:void 0},autotypenumbersDflt:t.autotypenumbers,paper_bgcolor:t.paper_bgcolor,calendar:t.calendar})}},346:function(e,t,n){"use strict";var s=n(86140),a=n(86968).u,o=n(92880).extendFlat,r=n(3400).counterRegex;function i(e,t,n){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}e.exports={_arrayAttrRegexps:[r("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(i(0,0,1),{}),center:o(i(0,0,0),{}),eye:o(i(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:a({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:s,yaxis:s,zaxis:s,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(e,t,n){"use strict";var o=n(43080),i=["xaxis","yaxis","zaxis"];function s(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}s.prototype.merge=function(e){for(var n,t=0;t<3;++t)n=e[i[t]],n.visible?(this.enabled[t]=n.showspikes,this.colors[t]=o(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness):(this.enabled[t]=!1,this.drawSides[t]=!1)},e.exports=function(e){var t=new s;return t.merge(e),t}},87152:function(e,t,n){"use strict";e.exports=function(e){for(var n,r,c,h,m,u=e.axesOptions,l=e.glplot.axesPixels,f=e.fullSceneLayout,d=[[],[],[]],t=0;t<3;++t)if(n=f[i[t]],n._length=(l[t].hi-l[t].lo)*l[t].pixelsPerDataUnit/e.dataScale[t],Math.abs(n._length)===1/0||isNaN(n._length))d[t]=[];else{n._input_range=n.range.slice(),n.range[0]=l[t].lo/e.dataScale[t],n.range[1]=l[t].hi/e.dataScale[t],n._m=1/(e.dataScale[t]*l[t].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1),h=n.tickmode,"auto"===n.tickmode&&(n.tickmode="linear",m=n.nticks||o.constrain(n._length/40,4,9),s.autoTicks(n,Math.abs(n.range[1]-n.range[0])/m));for(c=s.calcTicks(n,{msUTC:!0}),r=0;r<c.length;++r)c[r].x=c[r].x*e.dataScale[t],"date"===n.type&&(c[r].text=c[r].text.replace(/<br>/g," "));d[t]=c,n.tickmode=h}for(u.ticks=d,t=0;t<3;++t)for(a[t]=.5*(e.glplot.bounds[0][t]+e.glplot.bounds[1][t]),r=0;r<2;++r)u.bounds[r][t]=e.glplot.bounds[r][t];e.contourLevels=function(e){for(s=new Array(3),t=0;t<3;++t){for(var t,s,o=e[t],i=new Array(o.length),n=0;n<o.length;++n)i[n]=o[n].x;s[t]=i}return s}(d)};var s=n(54460),o=n(3400),i=["xaxis","yaxis","zaxis"],a=[0,0,0]},94424:function(e){"use strict";function t(e,t){var n,s,o=[0,0,0,0];for(n=0;n<4;++n)for(s=0;s<4;++s)o[s]+=e[4*n+s]*t[n];return o}e.exports=function(e,n){return t(e.projection,t(e.view,t(e.model,[n[0],n[1],n[2],1])))}},98432:function(e,t,n){"use strict";var s,a,r,u,h,p=n(67792).gl_plot3d,E=p.createCamera,f=p.createScene,C=n(5408),x=n(89184),c=n(24040),o=n(3400),d=o.preserveDrawingBuffer(),l=n(54460),i=n(93024),v=n(43080),O=n(16576),w=n(94424),b=n(44728),j=n(9020),y=n(87152),_=n(19280).applyAutorangeOptions,m=!1;function g(e,t){var n,s=document.createElement("div"),o=e.container;this.graphDiv=e.graphDiv,n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none",s.appendChild(n),this.svgContainer=n,s.id=e.id,s.style.position="absolute",s.style.top=s.style.left="0px",s.style.width=s.style.height="100%",o.appendChild(s),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=b(t,t[this.id]),this.spikeOptions=j(t[this.id]),this.container=s,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=c.getComponentMethod("annotations3d","convert"),this.drawAnnotations=c.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}s=g.prototype,s.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!h&&!(r=document.createElement("canvas"),h=C({canvas:r,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0})))throw new Error("error creating static canvas/context for image server");t.gl=h,t.canvas=r}return t},u=!0,s.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),n=!0;try{e.glplot=f(t)}catch{if(e.staticMode||!u||d)n=!1;else{o.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=t.glOptions.preserveDrawingBuffer=!0,e.glplot=f(t)}catch{d=t.glOptions.preserveDrawingBuffer=!1,n=!1}}}return u=!1,n},s.initializeGLCamera=function(){var t=this,e=t.fullSceneLayout.camera,n="orthographic"===e.projection.type;t.camera=E(t.container,{center:[e.center.x,e.center.y,e.center.z],eye:[e.eye.x,e.eye.y,e.eye.z],up:[e.up.x,e.up.y,e.up.z],_ortho:n,zoomMin:.01,zoomMax:100,mode:"orbit"})},s.initializeGLPlot=function(){if(e=this,e.initializeGLCamera(),!e.tryCreatePlot())return O(e);e.traces={},e.make4thDimension();var e,t=e.graphDiv,n=t.layout,s=function(){var t={};return e.isCameraChanged(n)&&(t[e.id+".camera"]=e.getCamera()),e.isAspectChanged(n)&&(t[e.id+".aspectratio"]=e.glplot.getAspectratio(),"manual"!==n[e.id].aspectmode&&(e.fullSceneLayout.aspectmode=n[e.id].aspectmode=t[e.id+".aspectmode"]="manual")),t},o=function(e){if(!1!==e.fullSceneLayout.dragmode){var t=s();e.saveLayout(n),e.graphDiv.emit("plotly_relayout",t)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",function(){o(e)}),e.glplot.canvas.addEventListener("touchstart",function(){m=!0}),e.glplot.canvas.addEventListener("wheel",function(n){if(t._context._scrollZoom.gl3d){if(e.camera._ortho){var s=n.deltaX>n.deltaY?1.1:1/1.1,i=e.glplot.getAspectratio();e.glplot.setAspectratio({x:s*i.x,y:s*i.y,z:s*i.z})}o(e)}},!!x&&{passive:!1}),e.glplot.canvas.addEventListener("mousemove",function(){if(!1!==e.fullSceneLayout.dragmode&&0!==e.camera.mouseListener.buttons){var t=s();e.graphDiv.emit("plotly_relayouting",t)}}),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(n){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:n,layer:e.id})},!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0},s.render=function(){var t,a=this,u=a.graphDiv,v=a.svgContainer,A=a.container.getBoundingClientRect();u._fullLayout._calcInverseTransform(u);var M=u._fullLayout._invScaleX,F=u._fullLayout._invScaleY,x=A.width*M,O=A.height*F;v.setAttributeNS(null,"viewBox","0 0 "+x+" "+O),v.setAttributeNS(null,"width",x),v.setAttributeNS(null,"height",O),y(a),a.glplot.axes.update(a.axesOptions);for(var S=Object.keys(a.traces),f=null,e=a.glplot.selection,E=0;E<S.length;++E)"skip"!==(t=a.traces[S[E]]).data.hoverinfo&&t.handlePick(e)&&(f=t),t.setContourLevels&&t.setContourLevels();function g(e,t,n){var s=a.fullSceneLayout[e+"axis"];return"log"!==s.type&&(t=s.d2l(t)),l.hoverLabelText(s,t,n)}if(null!==f){b=w(a.glplot.cameraParams,e.dataCoordinate),t=f.data;var c,h,b,j,_,k,s=u._fullData[t.index],r=e.index,n={xLabel:g("x",e.traceCoordinate[0],t.xhoverformat),yLabel:g("y",e.traceCoordinate[1],t.yhoverformat),zLabel:g("z",e.traceCoordinate[2],t.zhoverformat)},C=i.castHoverinfo(s,a.fullLayout,r),d=(C||"").split("+"),p=C&&"all"===C;s.hovertemplate||p||(-1===d.indexOf("x")&&(n.xLabel=void 0),-1===d.indexOf("y")&&(n.yLabel=void 0),-1===d.indexOf("z")&&(n.zLabel=void 0),-1===d.indexOf("text")&&(e.textLabel=void 0),-1===d.indexOf("name")&&(f.name=void 0)),c=[],"cone"===t.type||"streamtube"===t.type?(n.uLabel=g("x",e.traceCoordinate[3],t.uhoverformat),(p||-1!==d.indexOf("u"))&&c.push("u: "+n.uLabel),n.vLabel=g("y",e.traceCoordinate[4],t.vhoverformat),(p||-1!==d.indexOf("v"))&&c.push("v: "+n.vLabel),n.wLabel=g("z",e.traceCoordinate[5],t.whoverformat),(p||-1!==d.indexOf("w"))&&c.push("w: "+n.wLabel),n.normLabel=e.traceCoordinate[6].toPrecision(3),(p||-1!==d.indexOf("norm"))&&c.push("norm: "+n.normLabel),"streamtube"===t.type&&(n.divergenceLabel=e.traceCoordinate[7].toPrecision(3),(p||-1!==d.indexOf("divergence"))&&c.push("divergence: "+n.divergenceLabel)),e.textLabel&&c.push(e.textLabel),j=c.join("<br>")):"isosurface"===t.type||"volume"===t.type?(n.valueLabel=l.hoverLabelText(a._mockAxis,a._mockAxis.d2l(e.traceCoordinate[3]),t.valuehoverformat),c.push("value: "+n.valueLabel),e.textLabel&&c.push(e.textLabel),j=c.join("<br>")):j=e.textLabel,h={x:e.traceCoordinate[0],y:e.traceCoordinate[1],z:e.traceCoordinate[2],data:s._input,fullData:s,curveNumber:s.index,pointNumber:r},i.appendArrayPointValue(h,s,r),t._module.eventData&&(h=s._module.eventData(h,e,s,{},r)),_={points:[h]},a.fullSceneLayout.hovermode&&(k=[],i.loneHover({trace:s,x:(.5+.5*b[0]/b[3])*x,y:(.5-.5*b[1]/b[3])*O,xLabel:n.xLabel,yLabel:n.yLabel,zLabel:n.zLabel,text:j,name:f.name,color:i.castHoverOption(s,r,"bgcolor")||f.color,borderColor:i.castHoverOption(s,r,"bordercolor"),fontFamily:i.castHoverOption(s,r,"font.family"),fontSize:i.castHoverOption(s,r,"font.size"),fontColor:i.castHoverOption(s,r,"font.color"),nameLength:i.castHoverOption(s,r,"namelength"),textAlign:i.castHoverOption(s,r,"align"),hovertemplate:o.castOption(s,r,"hovertemplate"),hovertemplateLabels:o.extendFlat({},h,n),eventData:[h]},{container:v,gd:u,inOut_bbox:k}),h.bbox=k[0]),e.distance<5&&(e.buttons||m)?u.emit("plotly_click",_):u.emit("plotly_hover",_),this.oldEventData=_}else i.loneUnhover(v),this.oldEventData&&u.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;a.drawAnnotations(a)},s.recoverContext=function(){var t,e=this;e.glplot.dispose(),t=function(){e.glplot.gl.isContextLost()?requestAnimationFrame(t):e.initializeGLPlot()?e.plot.apply(e,e.plotArgs):o.error("Catastrophic and unrecoverable WebGL error. Context lost.")},requestAnimationFrame(t)},a=["xaxis","yaxis","zaxis"];function k(e,t,n){for(u=e.fullSceneLayout,s=0;s<3;s++){var s,i,r,l,u,f=a[s],d=f.charAt(0),p=u[f],c=t[d],h=t[d+"calendar"],m=t["_"+d+"length"];if(o.isArrayOrTypedArray(c))for(r=0;r<(m||c.length);r++)if(o.isArrayOrTypedArray(c[r]))for(l=0;l<c[r].length;++l)i=p.d2l(c[r][l],0,h),!isNaN(i)&&isFinite(i)&&(n[0][s]=Math.min(n[0][s],i),n[1][s]=Math.max(n[1][s],i));else i=p.d2l(c[r],0,h),!isNaN(i)&&isFinite(i)&&(n[0][s]=Math.min(n[0][s],i),n[1][s]=Math.max(n[1][s],i));else n[0][s]=Math.min(n[0][s],0),n[1][s]=Math.max(n[1][s],m-1)}}s.plot=function(e,t,n){if(i=this,i.plotArgs=[e,t,n],!i.glplot.contextLost){c=t[i.id],E=n[i.id],i.fullLayout=t,i.fullSceneLayout=c,i.axesOptions.merge(t,c),i.spikeOptions.merge(c),i.setViewport(c),i.updateFx(c.dragmode,c.hovermode),i.camera.enableWheel=i.graphDiv._context._scrollZoom.gl3d,i.glplot.setClearColor(v(c.bgcolor)),i.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[],g=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(s=0;s<e.length;++s)!0===(d=e[s]).visible&&0!==d._length&&k(this,d,g);!function(e,t){for(var c=e.fullSceneLayout,l=c.annotations||[],n=0;n<3;n++)for(var s,i,r=a[n],d=r.charAt(0),u=c[r],o=0;o<l.length;o++)i=l[o],i.visible&&(s=u.r2l(i[d]),!isNaN(s)&&isFinite(s)&&(t[0][n]=Math.min(t[0][n],s),t[1][n]=Math.max(t[1][n],s)))}(this,g),u=[1,1,1];for(r=0;r<3;++r)g[1][r]===g[0][r]?u[r]=1:u[r]=1/(g[1][r]-g[0][r]);for(i.dataScale=u,i.convertAnnotations(this),s=0;s<e.length;++s)!0===(d=e[s]).visible&&0!==d._length&&((h=i.traces[d.uid])?h.data.type===d.type?h.update(d):(h.dispose(),h=d._module.plot(this,d),i.traces[d.uid]=h):(h=d._module.plot(this,d),i.traces[d.uid]=h),h.name=d.name);w=Object.keys(i.traces);t:for(s=0;s<w.length;++s){for(r=0;r<e.length;++r)if(e[r].uid===w[s]&&!0===e[r].visible&&0!==e[r]._length)continue t;(h=i.traces[w[s]]).dispose(),delete i.traces[w[s]]}i.glplot.objects.sort(function(e,t){return e._trace.data.index-t._trace.data.index});var s,i,r,c,l,d,u,h,m,f,p,g,b,j,y,w,O,C,E,A,M,F,T,z,D,o=[[0,0,0],[0,0,0]],I=[],x={};for(s=0;s<3;++s){if((O=(l=c[a[s]]).type)in x?(x[O].acc*=u[s],x[O].count+=1):x[O]={acc:u[s],count:1},l.autorange){o[0][s]=1/0,o[1][s]=-1/0;var P=i.glplot.objects,R=i.fullSceneLayout.annotations||[],H=l._name.charAt(0);for(r=0;r<P.length;r++){var S=P[r],L=S.bounds,N=S._trace.data._pad||0;"ErrorBars"===S.constructor.name&&l._lowerLogErrorBound?o[0][s]=Math.min(o[0][s],l._lowerLogErrorBound):o[0][s]=Math.min(o[0][s],L[0][s]/u[s]-N),o[1][s]=Math.max(o[1][s],L[1][s]/u[s]+N)}for(r=0;r<R.length;r++)M=R[r],M.visible&&(F=l.r2l(M[H]),o[0][s]=Math.min(o[0][s],F),o[1][s]=Math.max(o[1][s],F));"rangemode"in l&&"tozero"===l.rangemode&&(o[0][s]=Math.min(o[0][s],0),o[1][s]=Math.max(o[1][s],0)),o[0][s]>o[1][s]?(o[0][s]=-1,o[1][s]=1):(z=o[1][s]-o[0][s],o[0][s]-=z/32,o[1][s]+=z/32),(p=[o[0][s],o[1][s]],p=_(p,l),o[0][s]=p[0],o[1][s]=p[1],l.isReversed())&&(D=o[0][s],o[0][s]=o[1][s],o[1][s]=D)}else p=l.range,o[0][s]=l.r2l(p[0]),o[1][s]=l.r2l(p[1]);o[0][s]===o[1][s]&&(o[0][s]-=1,o[1][s]+=1),I[s]=o[1][s]-o[0][s],l.range=[o[0][s],o[1][s]],l.limitRange(),i.glplot.setBounds(s,{min:l.range[0]*u[s],max:l.range[1]*u[s]})}if(b=c.aspectmode,"cube"===b)j=[1,1,1];else if("manual"===b)A=c.aspectratio,j=[A.x,A.y,A.z];else{if("auto"!==b&&"data"!==b)throw new Error("scene.js aspectRatio was not one of the enumerated types");C=[1,1,1];for(s=0;s<3;++s)T=x[O=(l=c[a[s]]).type],C[s]=Math.pow(T.acc,1/T.count)/u[s];j="data"===b||Math.max.apply(null,C)/Math.min.apply(null,C)<=4?C:[1,1,1]}c.aspectratio.x=E.aspectratio.x=j[0],c.aspectratio.y=E.aspectratio.y=j[1],c.aspectratio.z=E.aspectratio.z=j[2],i.glplot.setAspectratio(c.aspectratio),i.viewInitial.aspectratio||(i.viewInitial.aspectratio={x:c.aspectratio.x,y:c.aspectratio.y,z:c.aspectratio.z}),i.viewInitial.aspectmode||(i.viewInitial.aspectmode=c.aspectmode),f=c.domain||null,m=t._size||null,f&&m&&(y=i.container.style,y.position="absolute",y.left=m.l+f.x[0]*m.w+"px",y.top=m.t+(1-f.y[1])*m.h+"px",y.width=m.w*(f.x[1]-f.x[0])+"px",y.height=m.h*(f.y[1]-f.y[0])+"px"),i.glplot.redraw()}},s.destroy=function(){var e=this;e.glplot&&(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)},s.getCamera=function(){var e,t=this;return t.camera.view.recalcMatrix(t.camera.view.lastT()),{up:{x:(e=t.camera).up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:!0===e._ortho?"orthographic":"perspective"}}},s.setViewport=function(e){var t,n=this,s=e.camera;n.camera.lookAt.apply(this,[[(t=s).eye.x,t.eye.y,t.eye.z],[t.center.x,t.center.y,t.center.z],[t.up.x,t.up.y,t.up.z]]),n.glplot.setAspectratio(e.aspectratio),"orthographic"===s.projection.type!==n.camera._ortho&&(n.glplot.redraw(),n.glplot.clearRGBA(),n.glplot.dispose(),n.initializeGLPlot())},s.isCameraChanged=function(e){var t,s,i,a=this.getCamera(),n=o.nestedProperty(e,this.id+".camera").get();function r(e,t,n,s){var o=["up","center","eye"],i=["x","y","z"];return t[o[n]]&&e[o[n]][i[s]]===t[o[n]][i[s]]}if(t=!1,void 0===n)t=!0;else{for(s=0;s<3;s++)for(i=0;i<3;i++)if(!r(a,n,s,i)){t=!0;break}(!n.projection||a.projection&&a.projection.type!==n.projection.type)&&(t=!0)}return t},s.isAspectChanged=function(e){var n=this.glplot.getAspectratio(),t=o.nestedProperty(e,this.id+".aspectratio").get();return void 0===t||t.x!==n.x||t.y!==n.y||t.z!==n.z},s.saveLayout=function(e){var n,a,r,d,u,h,f,t=this,s=t.fullLayout,i=t.isCameraChanged(e),l=t.isAspectChanged(e),m=i||l;return m&&(n={},i&&(r=t.getCamera(),h=(u=o.nestedProperty(e,t.id+".camera")).get(),n[t.id+".camera"]=h),l&&(a=t.glplot.getAspectratio(),f=(d=o.nestedProperty(e,t.id+".aspectratio")).get(),n[t.id+".aspectratio"]=f),c.call("_storeDirectGUIEdit",e,s._preGUI,n),i&&(u.set(r),o.nestedProperty(s,t.id+".camera").set(r)),l&&(d.set(a),o.nestedProperty(s,t.id+".aspectratio").set(a),t.glplot.redraw())),m},s.updateFx=function(e,t){if(s=this,n=s.camera,n)if("orbit"===e)n.mode="orbit",n.keyBindingMode="rotate";else if("turntable"===e){{n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate";var n,s,r,d=s.graphDiv,p=d._fullLayout,i=s.fullSceneLayout.camera,f=i.up.x,u=i.up.y,l=i.up.z;if(l/Math.sqrt(f*f+u*u+l*l)<.999){var h=s.id+".camera.up",a={x:0,y:0,z:1},m={};m[h]=a,r=d.layout,c.call("_storeDirectGUIEdit",r,p._preGUI,m),i.up=a,o.nestedProperty(r,h).set(a)}}}else n.keyBindingMode=e;s.fullSceneLayout.hovermode=t},s.toImage=function(e){t=this,e||(e="png"),t.staticMode&&t.container.appendChild(r),t.glplot.redraw();var t,s,a,c,l,d,n=t.glplot.gl,o=n.drawingBufferWidth,i=n.drawingBufferHeight;switch(n.bindFramebuffer(n.FRAMEBUFFER,null),a=new Uint8Array(o*i*4),n.readPixels(0,0,o,i,n.RGBA,n.UNSIGNED_BYTE,a),function(e,t,n){for(i=0,a=n-1;i<a;++i,--a)for(s=0;s<t;++s)for(o=0;o<4;++o){var s,o,i,a,r=4*(t*i+s)+o,c=4*(t*a+s)+o,l=e[r];e[r]=e[c],e[c]=l}}(a,o,i),function(e,t,n){for(o=0;o<n;++o)for(i=0;i<t;++i){var s,o,i,c,a=4*(t*o+i),r=e[a+3];if(r>0)for(c=255/r,s=0;s<3;++s)e[a+s]=Math.min(c*e[a+s],255)}}(a,o,i),s=document.createElement("canvas"),s.width=o,s.height=i,l=s.getContext("2d",{willReadFrequently:!0}),d=l.createImageData(o,i),d.data.set(a),l.putImageData(d,0,0),e){case"jpeg":c=s.toDataURL("image/jpeg");break;case"webp":c=s.toDataURL("image/webp");break;default:c=s.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(r),c},s.setConvert=function(){for(var t,e=0;e<3;e++)t=this.fullSceneLayout[a[e]],l.setConvert(t,this.fullLayout),t.setScale=o.noop},s.make4thDimension=function(){var e=this,t=e.graphDiv._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(e._mockAxis,t)},e.exports=g},52094:function(e){"use strict";e.exports=function(e,t,n,s){s=s||e.length;for(var i=new Array(s),o=0;o<s;o++)i[o]=[e[o],t[o],n[o]];return i}},64859:function(e,t,n){"use strict";var i=n(25376),d=n(85656),o=n(22548),a=n(92872),r=n(34200),l=n(66741),c=n(92880).extendFlat,s=i({editType:"calc"});s.family.dflt='"Open Sans", verdana, arial, sans-serif',s.size.dflt=12,s.color.dflt=o.defaultLine,e.exports={font:s,title:{text:{valType:"string",editType:"layoutstyle"},font:i({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:c(l({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:a.newshape,activeshape:a.activeshape,newselection:r.newselection,activeselection:r.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:c({},d.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:i({editType:"layoutstyle"})}}},47552:function(e,t,n){"use strict";var l=n(95376),o="1.13.4",i='© <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',a=['© <a target="_blank" href="https://carto.com/">Carto</a>',i].join(" "),r=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),c={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:i,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:a,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:a,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:r,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:r,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=l(c);e.exports={requiredVersion:o,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:c,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+o+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){var c=e.split(" "),d=c[0],l=c[1],i=s.isArrayOrTypedArray(t)?s.mean(t):t,a=.5+i/100,r=1.5+i/100,n=["",""],o=[0,0];switch(d){case"top":n[0]="top",o[1]=-r;break;case"bottom":n[0]="bottom",o[1]=r}switch(l){case"left":n[1]="right",o[0]=-a;break;case"right":n[1]="left",o[0]=a}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:o}}},33688:function(e,t,n){"use strict";var r=n(3480),s=n(3400),a=s.strTranslate,f=s.strScale,m=n(84888).KY,d=n(9616),p=n(33428),c=n(43616),u=n(72736),h=n(14440),i="mapbox",o=t.constants=n(47552);function l(e){return"string"==typeof e&&(-1!==o.styleValuesMapbox.indexOf(e)||0===e.indexOf("mapbox://")||0===e.indexOf("stamen"))}t.name=i,t.attr="subplot",t.idRoot=i,t.idRegex=t.attrRegex=s.counterRegex(i),t.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},t.layoutAttributes=n(5232),t.supplyLayoutDefaults=n(5976),t.plot=function(e){var a=e._fullLayout,g=e.calcdata,u=a._subplots[i];if(r.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);f=function(e,t){if(m=e._fullLayout,""===e._context.mapboxAccessToken)return"";for(var n,i,d,m,a=[],r=[],u=!1,h=!1,c=0;c<t.length;c++)i=m[t[c]],n=i.accesstoken,l(i.style)&&(n?s.pushUnique(a,n):(l(i._input.style)&&(s.error("Uses Mapbox map style, but did not set an access token."),u=!0),h=!0)),n&&s.pushUnique(r,n);if(h)throw d=u?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg,s.error(d),new Error(d);return a.length?(a.length>1&&s.warn(o.multipleTokensErrorMsg),a[0]):(r.length&&s.log(["Listed mapbox access token(s)",r.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(e,u),r.accessToken=f;for(c=0;c<u.length;c++){var c,f,d=u[c],p=m(g,i,d),n=a[d],t=n._subplot;t||(t=new h(e,d),a[d]._subplot=t),t.viewInitial||(t.viewInitial={center:s.extendFlat({},n.center),zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),t.plot(p,a,e._promises)}},t.clean=function(e,t,n,s){for(var o,r=s._subplots[i]||[],a=0;a<r.length;a++)o=r[a],!t[o]&&s[o]._subplot&&s[o]._subplot.destroy()},t.toSVG=function(e){for(var s,r,m,y,_,w,O,l=e._fullLayout,x=l._subplots[i],t=l._size,g=0;g<x.length;g++){var j=l[x[g]],n=j.domain,C=j._subplot.toImage("png");l._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":C,x:t.l+t.w*n.x[0],y:t.t+t.h*(1-n.y[1]),width:t.w*(n.x[1]-n.x[0]),height:t.h*(n.y[1]-n.y[0]),preserveAspectRatio:"none"}),y=p.select(j._subplot.div),null!==y.select(".mapboxgl-ctrl-logo").node().offsetParent&&(r=l._glimages.append("g"),r.attr("transform",a(t.l+t.w*n.x[0]+10,t.t+t.h*(1-n.y[0])-31)),r.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),r.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),r.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),r.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var v=y.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),b=l._glimages.append("g"),h=b.append("text");h.text(v).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":v}),s=c.bBox(h.node()),m=t.w*(n.x[1]-n.x[0]),s.width>m/2&&(_=v.split("|").join("<br>"),h.text(_).attr("data-unformatted",_).call(u.convertToTspans,e),s=c.bBox(h.node())),h.attr("transform",a(-3,8-s.height)),b.insert("rect",".static-attribution").attr({x:-s.width-6,y:-s.height-3,width:s.width+6,height:s.height+3,fill:"rgba(255, 255, 255, 0.75)"}),w=1,s.width+6>m&&(w=m/(s.width+6)),O=[t.l+t.w*n.x[1],t.t+t.h*(1-n.y[0])],b.attr("transform",a(O[0],O[1])+f(w))}},t.updateFx=function(e){for(var t=e._fullLayout,s=t._subplots[i],n=0;n<s.length;n++)t[s[n]]._subplot.updateFx(t)}},22360:function(e,t,n){"use strict";var s,o=n(3400),d=n(72736).sanitizeHTML,l=n(89032),r=n(47552);function c(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=r.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}s=c.prototype;function i(e){if(!e.visible)return!1;var n,t=e.source;if(Array.isArray(t)&&t.length>0){for(n=0;n<t.length;n++)if("string"!=typeof t[n]||0===t[n].length)return!1;return!0}return o.isPlainObject(t)||"string"==typeof t&&t.length>0}function a(e){var t,s,i={},n={};switch(e.type){case"circle":o.extendFlat(n,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":o.extendFlat(n,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":o.extendFlat(n,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":t=e.symbol,s=l(t.textposition,t.iconsize),o.extendFlat(i,{"icon-image":t.icon+"-15","icon-size":t.iconsize/10,"text-field":t.text,"text-size":t.textfont.size,"text-anchor":s.anchor,"text-offset":s.offset,"symbol-placement":t.placement}),o.extendFlat(n,{"icon-color":e.color,"text-color":t.textfont.color,"text-opacity":e.opacity});break;case"raster":o.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":e.opacity})}return{layout:i,paint:n}}s.update=function(e){this.visible?this.needsNewImage(e)?this.updateImage(e):this.needsNewSource(e)?(this.removeLayer(),this.updateSource(e),this.updateLayer(e)):this.needsNewLayer(e)?this.updateLayer(e):this.updateStyle(e):(this.updateSource(e),this.updateLayer(e)),this.visible=i(e)},s.needsNewImage=function(e){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===e.sourcetype&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))},s.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type},s.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},s.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},s.updateImage=function(e){this.subplot.map.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var t=this.findFollowingMapboxLayerId(this.lookupBelow());null!==t&&this.subplot.map.moveLayer(this.idLayer,t)},s.updateSource=function(e){var n,t=this.subplot.map;t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,i(e)&&(n=function(e){var t,n=e.sourcetype,o=e.source,s={type:n};return"geojson"===n?t="data":"vector"===n?t="string"==typeof o?"url":"tiles":"raster"===n?(t="tiles",s.tileSize=256):"image"===n&&(t="url",s.coordinates=e.coordinates),s[t]=o,e.sourceattribution&&(s.attribution=d(e.sourceattribution)),s}(e),t.addSource(this.idSource,n))},s.findFollowingMapboxLayerId=function(e){if("traces"===e)for(var t,s=this.subplot.getMapLayers(),n=0;n<s.length;n++)if(t=s[n].id,"string"==typeof t&&0===t.indexOf(r.traceLayerPrefix)){e=t;break}return e},s.updateLayer=function(e){var s=this.subplot,t=a(e),n=this.lookupBelow(),o=this.findFollowingMapboxLayerId(n);this.removeLayer(),i(e)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:t.layout,paint:t.paint},o),this.layerType=e.type,this.below=n},s.updateStyle=function(e){if(i(e)){var t=a(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}},s.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)},s.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)},e.exports=function(e,t,n){var s=new c(e,t);return s.update(n),s}},5232:function(e,t,n){"use strict";var o=n(3400),a=n(76308).defaultLine,u=n(86968).u,r=n(25376),c=n(52904).textposition,l=n(67824).overrideAll,d=n(31780).templatedArray,s=n(47552),i=r({noFontVariant:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(e.exports=l({_arrayAttrRegexps:[o.counterRegex("mapbox",".layers",!0)],domain:u({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:s.styleValuesMapbox.concat(s.styleValuesNonMapbox),dflt:s.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:d("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:a},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:a}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:o.extendFlat({},c,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(e,t,n){"use strict";var s=n(3400),i=n(168),a=n(51272),o=n(5232);function r(e,t,n,s){n("accesstoken",s.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch");var o=n("bounds.west"),i=n("bounds.east"),r=n("bounds.south"),l=n("bounds.north");void 0!==o&&void 0!==i&&void 0!==r&&void 0!==l||delete t.bounds,a(e,t,{name:"layers",handleItemDefaults:c}),t._input=e}function c(e,t){function n(n,i){return s.coerce(e,t,o.layers,n,i)}if(n("visible")){var i,r,a=n("sourcetype"),c="raster"===a||"image"===a;n("source"),n("sourceattribution"),"vector"===a&&n("sourcelayer"),"image"===a&&n("coordinates"),c&&(r="raster"),i=n("type",r),c&&"raster"!==i&&(i=t.type="raster",s.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),"circle"===i&&n("circle.radius"),"line"===i&&(n("line.width"),n("line.dash")),"fill"===i&&n("fill.outlinecolor"),"symbol"===i&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),s.coerceFont(n,"symbol.textfont",void 0,{noFontVariant:!0}),n("symbol.textposition"),n("symbol.placement"))}}e.exports=function(e,t,n){i(e,t,n,{type:"mapbox",attributes:o,handleDefaults:r,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(e,t,n){"use strict";var s,r,c=n(3480),a=n(3400),m=n(27144),f=n(24040),g=n(54460),y=n(86476),i=n(93024),d=n(72760),O=d.drawMode,w=d.selectMode,_=n(22676).prepSelect,x=n(22676).clearOutline,j=n(22676).clearSelectionsCache,v=n(22676).selectOnClick,o=n(47552),b=n(22360);function p(e,t){this.id=t,this.gd=e;var n=e._fullLayout,s=e._context;this.container=n._glcontainer.node(),this.isStatic=s.staticPlot,this.uid=n._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(n),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}s=p.prototype,s.plot=function(e,t,n){var o,s=this,i=t[s.id];s.map&&i.accesstoken!==s.accessToken&&(s.map.remove(),s.map=null,s.styleObj=null,s.traceHash={},s.layerList=[]),o=s.map?new Promise(function(n,o){s.updateMap(e,t,n,o)}):new Promise(function(n,o){s.createMap(e,t,n,o)}),n.push(o)},s.createMap=function(e,t,n,s){var r,o=this,i=t[o.id],u=o.styleObj=h(i.style,t);o.accessToken=i.accesstoken;var a=i.bounds,f=a?[[a.west,a.south],[a.east,a.north]]:null,d=o.map=new c.Map({container:o.div,style:u.style,center:l(i.center),zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,maxBounds:f,interactive:!o.isStatic,preserveDrawingBuffer:o.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new c.AttributionControl({compact:!0}));d._canvas.style.left="0px",d._canvas.style.top="0px",o.rejectOnError(s),o.isStatic||o.initFx(e,t),r=[],r.push(new Promise(function(e){d.once("load",e)})),r=r.concat(m.fetchTraceGeoData(e)),Promise.all(r).then(function(){o.fillBelowLookup(e,t),o.updateData(e),o.updateLayout(t),o.resolveOnRender(n)}).catch(s)},s.updateMap=function(e,t,n,s){var i,a,o=this,r=o.map,c=t[this.id];o.rejectOnError(s),i=[],a=h(c.style,t),JSON.stringify(o.styleObj)!==JSON.stringify(a)&&(o.styleObj=a,r.setStyle(a.style),o.traceHash={},i.push(new Promise(function(e){r.once("styledata",e)}))),i=i.concat(m.fetchTraceGeoData(e)),Promise.all(i).then(function(){o.fillBelowLookup(e,t),o.updateData(e),o.updateLayout(t),o.resolveOnRender(n)}).catch(s)},s.fillBelowLookup=function(e,t){var n,s,o,i,a,r,l,d,u,h=t[this.id].layers,c=this.belowLookup={},m=!1;for(n=0;n<e.length;n++)r=e[n][0].trace,d=r._module,"string"==typeof r.below?s=r.below:d.getBelow&&(s=d.getBelow(r,this)),""===s&&(m=!0),c["trace-"+r.uid]=s||"";for(n=0;n<h.length;n++)u=h[n],s="string"==typeof u.below?u.below:m?"traces":"",c["layout-"+n]=s;a={};for(o in c)a[s=c[o]]?a[s].push(o):a[s]=[o];for(s in a)if(l=a[s],l.length>1)for(n=0;n<l.length;n++)0===(o=l[n]).indexOf("trace-")?(i=o.split("trace-")[1],this.traceHash[i]&&(this.traceHash[i].below=null)):0===o.indexOf("layout-")&&(i=o.split("layout-")[1],this.layerList[i]&&(this.layerList[i].below=null))},r={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function h(e,t){if(n={},a.isPlainObject(e))n.id=e.id,n.style=e;else if("string"==typeof e)if(n.id=e,-1!==o.styleValuesMapbox.indexOf(e))n.style=u(e);else if(o.stylesNonMapbox[e]){n.style=o.stylesNonMapbox[e];var n,i=n.style.sources["plotly-"+e],s=i?i.tiles:void 0;s&&s[0]&&"?api_key="===s[0].slice(-9)&&(s[0]+=t._mapboxAccessToken)}else n.style=e;else n.id=o.styleValueDflt,n.style=u(o.styleValueDflt);return n.transition={duration:0,delay:0},n}function u(e){return o.styleUrlPrefix+e+"-"+o.styleUrlSuffix}function l(e){return[e.lon,e.lat]}s.updateData=function(e){var t,n,s,i,a,c,l,d,o=this.traceHash,u=e.slice().sort(function(e,t){return r[e[0].trace.type]-r[t[0].trace.type]});for(t=0;t<u.length;t++)a=u[t],l=!1,(s=o[(n=a[0].trace).uid])&&(s.type===n.type?(s.update(a),l=!0):s.dispose()),!l&&n._module&&(o[n.uid]=n._module.plot(this,a));d=Object.keys(o);t:for(t=0;t<d.length;t++){c=d[t];for(i=0;i<e.length;i++)if(c===(n=e[i][0].trace).uid)continue t;(s=o[c]).dispose(),delete o[c]}},s.updateLayout=function(e){var t=this.map,n=e[this.id];this.dragging||this.wheeling||(t.setCenter(l(n.center)),t.setZoom(n.zoom),t.setBearing(n.bearing),t.setPitch(n.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()},s.resolveOnRender=function(e){var t=this.map;t.on("render",function n(){t.loaded()&&(t.off("render",n),setTimeout(e,10))})},s.rejectOnError=function(e){var t=this.map;function n(){e(new Error(o.mapOnErrorMsg))}t.once("error",n),t.once("style.error",n),t.once("source.error",n),t.once("tile.error",n),t.once("layer.error",n)},s.createFramework=function(e){var t=this,n=t.div=document.createElement("div");n.id=t.uid,n.style.position="absolute",t.container.appendChild(n),t.xaxis={_id:"x",c2p:function(e){return t.project(e).x}},t.yaxis={_id:"y",c2p:function(e){return t.project(e).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},g.setConvert(t.mockAxis,e)},s.initFx=function(e,t){var n=this,s=n.gd,o=n.map;function a(){i.loneUnhover(t._hoverlayer)}function r(){var e=n.getView();s.emit("plotly_relayouting",n.getViewEditsWithDerived(e))}o.on("moveend",function(e){if(n.map){var t,o,i=s._fullLayout;(e.originalEvent||n.wheeling)&&(t=i[n.id],f.call("_storeDirectGUIEdit",s.layout,i._preGUI,n.getViewEdits(t)),o=n.getView(),t._input.center=t.center=o.center,t._input.zoom=t.zoom=o.zoom,t._input.bearing=t.bearing=o.bearing,t._input.pitch=t.pitch=o.pitch,s.emit("plotly_relayout",n.getViewEditsWithDerived(o))),e.originalEvent&&"mouseup"===e.originalEvent.type?n.dragging=!1:n.wheeling&&(n.wheeling=!1),i._rehover&&i._rehover()}}),o.on("wheel",function(){n.wheeling=!0}),o.on("mousemove",function(e){var a=n.div.getBoundingClientRect(),t=[e.originalEvent.offsetX,e.originalEvent.offsetY];e.target.getBoundingClientRect=function(){return a},n.xaxis.p2c=function(){return o.unproject(t).lng},n.yaxis.p2c=function(){return o.unproject(t).lat},s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===n.id&&s._fullLayout[n.id]&&i.hover(s,e,n.id)},i.hover(s,e,n.id),s._fullLayout._hoversubplot=n.id}),o.on("dragstart",function(){n.dragging=!0,a()}),o.on("zoomstart",a),o.on("mouseout",function(){s._fullLayout._hoversubplot=null}),o.on("drag",r),o.on("zoom",r),o.on("dblclick",function(){var t,i,e=s._fullLayout[n.id];f.call("_storeDirectGUIEdit",s.layout,s._fullLayout._preGUI,n.getViewEdits(e)),i=n.viewInitial,o.setCenter(l(i.center)),o.setZoom(i.zoom),o.setBearing(i.bearing),o.setPitch(i.pitch),t=n.getView(),e._input.center=e.center=t.center,e._input.zoom=e.zoom=t.zoom,e._input.bearing=e.bearing=t.bearing,e._input.pitch=e.pitch=t.pitch,s.emit("plotly_doubleclick",null),s.emit("plotly_relayout",n.getViewEditsWithDerived(t))}),n.clearOutline=function(){j(n.dragOptions),x(n.dragOptions.gd)},n.onClickInPanFn=function(e){return function(t){var o=s._fullLayout.clickmode;o.indexOf("select")>-1&&v(t.originalEvent,s,[n.xaxis],[n.yaxis],n.id,e),o.indexOf("event")>-1&&i.click(s,t.originalEvent)}}},s.updateFx=function(e){var s,i,r,t=this,n=t.map,c=t.gd;t.isStatic||(s=e.dragmode,i=function(e,n){n.isRect?(e.range={})[t.id]=[o([n.xmin,n.ymin]),o([n.xmax,n.ymax])]:(e.lassoPoints={})[t.id]=n.map(o)},r=t.dragOptions,t.dragOptions=a.extendDeep(r||{},{dragmode:e.dragmode,element:t.div,gd:c,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:i},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),n.off("click",t.onClickInPanHandler),w(s)||O(s)?(n.dragPan.disable(),n.on("zoomstart",t.clearOutline),t.dragOptions.prepFn=function(e,n,o){_(e,n,o,t.dragOptions,s)},y.init(t.dragOptions)):(n.dragPan.enable(),n.off("zoomstart",t.clearOutline),t.div.onmousedown=null,t.div.ontouchstart=null,t.div.removeEventListener("touchstart",t.div._ontouchstart),t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),n.on("click",t.onClickInPanHandler)));function o(e){var n=t.map.unproject(e);return[n.lng,n.lat]}},s.updateFramework=function(e){var t=e[this.id].domain,n=e._size,s=this.div.style;s.width=n.w*(t.x[1]-t.x[0])+"px",s.height=n.h*(t.y[1]-t.y[0])+"px",s.left=n.l+t.x[0]*n.w+"px",s.top=n.t+(1-t.y[1])*n.h+"px",this.xaxis._offset=n.l+t.x[0]*n.w,this.xaxis._length=n.w*(t.x[1]-t.x[0]),this.yaxis._offset=n.t+(1-t.y[1])*n.h,this.yaxis._length=n.h*(t.y[1]-t.y[0])},s.updateLayers=function(e){var t,s=e[this.id].layers,n=this.layerList;if(s.length!==n.length){for(t=0;t<n.length;t++)n[t].dispose();for(n=this.layerList=[],t=0;t<s.length;t++)n.push(b(this,t,s[t]))}else for(t=0;t<s.length;t++)n[t].update(s[t])},s.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},s.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},s.setOptions=function(e,t,n){for(var s in n)this.map[t](e,s,n[s])},s.getMapLayers=function(){return this.map.getStyle().layers},s.addLayer=function(e,t){if(n=this.map,"string"==typeof t){if(""===t)return void n.addLayer(e,t);for(var n,o=this.getMapLayers(),s=0;s<o.length;s++)if(t===o[s].id)return void n.addLayer(e,t);a.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}n.addLayer(e)},s.project=function(e){return this.map.project(new c.LngLat(e[0],e[1]))},s.getView=function(){var e=this.map,t=e.getCenter(),i={lon:t.lng,lat:t.lat},n=e.getCanvas(),s=parseInt(n.style.width),o=parseInt(n.style.height);return{center:i,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([s,0]).toArray(),e.unproject([s,o]).toArray(),e.unproject([0,o]).toArray()]}}},s.getViewEdits=function(e){for(var n,i=this.id,s=["center","zoom","bearing","pitch"],o={},t=0;t<s.length;t++)n=s[t],o[i+"."+n]=e[n];return o},s.getViewEditsWithDerived=function(e){var n=this.id,t=this.getViewEdits(e);return t[n+"._derived"]=e._derived,t},e.exports=p},66741:function(e){"use strict";e.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},7316:function(e,t,n){"use strict";var c,d,h,p,O,C,E=n(33428),L=n(94336).m_,N=n(57624).SO,l=n(38248),D=n(83160),i=n(24040),_=n(73060),z=n(31780),o=n(3400),y=n(76308),v=n(39032).BADNUM,a=n(79811),T=n(1936).clearOutline,R=n(55308),f=n(85656),M=n(16672),A=n(84888)._M,m=o.relinkPrivateKeys,r=o._,s=e.exports={};o.extendFlat(s,i),s.attributes=n(45464),s.attributes.type.values=s.allTypes,s.fontAttrs=n(25376),s.layoutAttributes=n(64859),d=s.transformsRegistry,c=n(62460),s.executeAPICommand=c.executeAPICommand,s.computeAPICommandBindings=c.computeAPICommandBindings,s.manageCommandObserver=c.manageCommandObserver,s.hasSimpleAPICommandBindings=c.hasSimpleAPICommandBindings,s.redrawText=function(e){return e=o.getGraphDiv(e),new Promise(function(t){setTimeout(function(){e._fullLayout&&(i.getComponentMethod("annotations","draw")(e),i.getComponentMethod("legend","draw")(e),i.getComponentMethod("colorbar","draw")(e),t(s.previousPromises(e)))},300)})},s.resize=function(e){e=o.getGraphDiv(e);var t,n=new Promise(function(n,s){e&&!o.isHidden(e)||s(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=n,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||o.isHidden(e))n(e);else{delete e.layout.width,delete e.layout.height;var t=e.changed;e.autoplay=!0,i.call("relayout",e,{autosize:!0}).then(function(){e.changed=t,e._resolveResize===n&&(delete e._resolveResize,n(e))})}},100)});return t&&t(n),n},s.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},s.addLinks=function(e){if(e._context.showLink||e._context.showSources){var i=e._fullLayout,t=o.ensureSingle(i._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:y.defaultLine,"pointer-events":"all"}).each(function(){var e=E.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})}),a=t.node(),n={y:i._paper.attr("height")-9};document.body.contains(a)&&a.getComputedTextLength()>=i.width-20?(n["text-anchor"]="start",n.x=5):(n["text-anchor"]="end",n.x=i._paper.attr("width")-7),t.attr(n);var r=t.select(".js-link-to-tool"),c=t.select(".js-link-spacer"),l=t.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){if(t.text(""),n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187)),e._context.sendData)n.on("click",function(){s.sendDataToCloud(e)});else{var n,o=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+o[2].split(".")[0]+"/"+o[1]+i})}}(e,r),c.text(r.text()&&l.text()?" - ":"")}},s.sendDataToCloud=function(e){if(t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL,t){e.emit("plotly_beforeexport");var t,n=E.select(e).append("div").attr("id","hiddenform").style("display","none"),o=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return o.append("input").attr({type:"text",name:"data"}).node().value=s.graphJson(e,!1,"keepdata"),o.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}},C=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],p=["year","month","dayMonth","dayMonthYear"];function j(e,t){n=e._context.locale,n||(n="en-US");var n,a,r,c,l,d,s=!1,o={};function u(e){for(var n,a=!0,i=0;i<t.length;i++)n=t[i],o[n]||(e[n]?o[n]=e[n]:a=!1);a&&(s=!0)}for(a=0;a<2;a++){for(r=e._context.locales,c=0;c<2;c++){if(l=(r[n]||{}).format,l&&(u(l),s))break;r=i.localeRegistry}if(d=n.split("-")[0],s||d===n)break;n=d}return s||u(i.localeRegistry.en.format),o}function S(e,t){var o,i,r,l,h,m={_fullLayout:t},d="x"===e._id.charAt(0),u=e._mainAxis._anchorAxis,n="",c="",s="";if(u&&(s=u._mainAxis._id,n=d?e._id+s:s+e._id),!n||!t._plots[n]){n="";for(r=e._counterAxes,o=0;o<r.length;o++)if(i=r[o],l=d?e._id+i:i+e._id,c||(c=l),h=a.getFromId(m,i),s&&h.overlaying===s){n=l;break}}return n||c}function b(e){if(t=e.transforms,Array.isArray(t)&&t.length)for(n=0;n<t.length;n++){var t,n,s=t[n],o=s._module||d[s.type];if(o&&o.makesData)return!0}return!1}function F(e,t,n,s){for(var i,r,c=e.transforms,a=[e],o=0;o<c.length;o++)r=c[o],i=d[r.type],i&&i.transform&&(a=i.transform(a,{transform:r,fullTrace:e,fullData:t,layout:n,fullLayout:s,transformIndex:o}));return a}function u(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function g(e){var t,n=e.margin;e._size||(t=e._size={l:Math.round(n.l),r:Math.round(n.r),t:Math.round(n.t),b:Math.round(n.b),p:Math.round(n.pad)},t.w=Math.round(e.width)-t.l-t.r,t.h=Math.round(e.height)-t.t-t.b),e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}s.supplyDefaults=function(e,t){if(H=t&&t.skipUpdateCalc,c=e._fullLayout||{},c._skipDefaults)delete c._skipDefaults;else{var a,c,u,h,v,b,y,_,w,O,E,R,P,H,$,n=e._fullLayout={},d=e.layout||{},f=e._fullData||[],l=e._fullData=[],k=e.data||[],F=e.calcdata||[],z=e._context||{};if(e._transitionData||s.createTransitionData(e),n._dfltTitle={plot:r(e,"Click to enter Plot title"),x:r(e,"Click to enter X axis title"),y:r(e,"Click to enter Y axis title"),colorbar:r(e,"Click to enter Colorscale title"),annotation:r(e,"new text")},n._traceWord=r(e,"trace"),y=j(e,C),n._mapboxAccessToken=z.mapboxAccessToken,c._initialAutoSizeIsDone)P=c.width,R=c.height,s.supplyLayoutGlobalDefaults(d,n,y),d.width||(n.width=P),d.height||(n.height=R),s.sanitizeMargins(n);else{s.supplyLayoutGlobalDefaults(d,n,y);var x=!d.width||!d.height,D=n.autosize,W=z.autosizable;x&&(D||W)?s.plotAutoSize(e,d,n):x&&s.sanitizeMargins(n),!D&&x&&(d.width=n.width,d.height=n.height)}n._d3locale=function(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(t){try{t=N(e).format(o.adjustFormat(t))}catch{return o.warnBadFormat(t),o.noFormat}return t},timeFormat:L(e).utcFormat}}(y,n.separators),n._extraFormat=j(e,p),n._initialAutoSizeIsDone=!0,n._dataLength=k.length,n._modules=[],n._visibleModules=[],n._basePlotModules=[];var A=n._subplots=function(){var t,n,s,a,c,e=i.collectableSubplotTypes,r={};if(!e){e=[],a=i.subplotsRegistry;for(c in a)if(t=a[c].attr,t&&(e.push(c),Array.isArray(t)))for(n=0;n<t.length;n++)o.pushUnique(e,t[n])}for(s=0;s<e.length;s++)r[e[s]]=[];return r}(),M=n._splomAxes={x:{},y:{}},U=n._splomSubplots={};if(n._splomGridDflt={},n._scatterStackOpts={},n._firstScatter={},n._alignmentOpts={},n._colorAxes={},n._requestRangeslider={},n._traceUids=function(e,t){c=t.length,i=[];for(n=0;n<e.length;n++)a=e[n]._fullInput,a!==d&&i.push(a),d=a;var n,s,i,a,c,d,m=i.length,l=new Array(c),r={};function u(e,t){l[t]=e,r[e]=1}function h(e,t){if(e&&"string"==typeof e&&!r[e])return u(e,t),!0}for(n=0;n<c;n++)s=t[n].uid,"number"==typeof s&&(s=String(s)),h(s,n)||n<m&&h(i[n].uid,n)||u(o.randstr(r),n);return l}(f,k),n._globalTransforms=(e._context||{}).globalTransforms,s.supplyDataDefaults(k,l,d,n),b=Object.keys(M.x),v=Object.keys(M.y),b.length>1&&v.length>1){for(i.getComponentMethod("grid","sizeDefaults")(d,n),a=0;a<b.length;a++)o.pushUnique(A.xaxis,b[a]);for(a=0;a<v.length;a++)o.pushUnique(A.yaxis,v[a]);for($ in U)o.pushUnique(A.cartesian,$)}if(n._has=s._hasPlotType.bind(n),f.length===l.length)for(a=0;a<l.length;a++)m(l[a],f[a]);s.supplyLayoutModuleDefaults(d,n,l,e._transitionData),E=n._visibleModules,_=[];for(a=0;a<E.length;a++)O=E[a].crossTraceDefaults,O&&o.pushUnique(_,O);for(a=0;a<_.length;a++)_[a](l,n);n._hasOnlyLargeSploms=1===n._basePlotModules.length&&"splom"===n._basePlotModules[0].name&&b.length>15&&v.length>15&&0===n.shapes.length&&0===n.images.length,s.linkSubplots(l,n,f,c),s.cleanPlot(l,n,f,c);var B=!!c._has&&!!c._has("gl2d"),V=!!n._has&&!!n._has("gl2d"),S=!!c._has&&!!c._has("cartesian")||B,I=!!n._has&&!!n._has("cartesian")||V;S&&!I?c._bgLayer.remove():I&&!S&&(n._shouldCreateBgLayer=!0),c._zoomlayer&&!e._dragging&&T({_fullLayout:c}),function(e,t){var n,s,o,i=[];t.meta&&(s=t._meta={meta:t.meta,layout:{meta:t.meta}});for(o=0;o<e.length;o++)n=e[o],n.meta?i[n.index]=n._meta={meta:n.meta}:t.meta&&(n._meta={meta:t.meta}),t.meta&&(n._meta.layout={meta:t.meta});i.length&&(s||(s=t._meta={}),s.data=i)}(l,n),m(n,c),i.getComponentMethod("colorscale","crossTraceDefaults")(l,n),n._preGUI||(n._preGUI={}),n._tracePreGUI||(n._tracePreGUI={}),w=n._tracePreGUI,h={};for(u in w)h[u]="old";for(a=0;a<l.length;a++)h[u=l[a]._fullInput.uid]||(w[u]={}),h[u]="new";for(u in h)"old"===h[u]&&delete w[u];g(n),i.getComponentMethod("rangeslider","makeData")(n),H||F.length!==l.length||s.supplyDefaultsUpdateCalc(F,l)}},s.supplyDefaultsUpdateCalc=function(e,t){for(n=0;n<t.length;n++){var n,i,a,r,c,l,d=t[n],s=(e[n]||[])[0];if(s&&s.trace){if(i=s.trace,i._hasCalcTransform){r=i._arrayAttrs;for(a=0;a<r.length;a++)c=r[a],l=o.nestedProperty(i,c).get().slice(),o.nestedProperty(d,c).set(l)}s.trace=d}}},s.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},s._hasPlotType=function(e){var t,n,s,o,a=this._basePlotModules||[];for(t=0;t<a.length;t++)if(a[t].name===e)return!0;n=this._modules||[];for(t=0;t<n.length;t++){if(s=n[t].name,s===e)return!0;if(o=i.modules[s],o&&o.categories[e])return!0}return!1},s.cleanPlot=function(e,t,n,s){a=s._basePlotModules||[];for(o=0;o<a.length;o++)r=a[o],r.clean&&r.clean(e,t,n,s);var o,i,a,r,c,l,d=s._has&&s._has("gl"),u=t._has&&t._has("gl");d&&!u&&void 0!==s._glcontainer&&(s._glcontainer.selectAll(".gl-canvas").remove(),s._glcontainer.selectAll(".no-webgl").remove(),s._glcanvas=null),l=!!s._infolayer;t:for(o=0;o<n.length;o++){c=n[o].uid;for(i=0;i<e.length;i++)if(c===e[i].uid)continue t;l&&s._infolayer.select(".cb"+c).remove()}},s.linkSubplots=function(e,t,n,s){var r,c,l,h,f,p,g,j,y,C=s._plots||{},O=t._plots={},w=t._subplots,m={_fullData:e,_fullLayout:t},_=w.cartesian.concat(w.gl2d||[]);for(c=0;c<_.length;c++){var u,d=_[c],x=C[d],v=a.getFromId(m,d,"x"),b=a.getFromId(m,d,"y");for(x?u=O[d]=x:(u=O[d]={}).id=d,v._counterAxes.push(b._id),b._counterAxes.push(v._id),v._subplotsWith.push(d),b._subplotsWith.push(d),u.xaxis=v,u.yaxis=b,u._hasClipOnAxisFalse=!1,l=0;l<e.length;l++)if(j=e[l],j.xaxis===u.xaxis._id&&j.yaxis===u.yaxis._id&&!1===j.cliponaxis){u._hasClipOnAxisFalse=!0;break}}f=a.list(m,null,!0);for(c=0;c<f.length;c++)h=null,(r=f[c]).overlaying&&(h=a.getFromId(m,r.overlaying))&&h.overlaying&&(r.overlaying=!1,h=null),r._mainAxis=h||r,h&&(r.domain=h.domain.slice()),r._anchorAxis="free"===r.anchor?null:a.getFromId(m,r.anchor);for(c=0;c<f.length;c++)if((r=f[c])._counterAxes.sort(a.idSort),r._subplotsWith.sort(o.subplotSort),r._mainSubplot=S(r,t),r._counterAxes.length&&(r.spikemode&&-1!==r.spikemode.indexOf("across")||r.automargin&&r.mirror&&"free"!==r.anchor||i.getComponentMethod("rangeslider","isVisible")(r))){p=1,g=0;for(l=0;l<r._counterAxes.length;l++)y=a.getFromId(m,r._counterAxes[l]),p=Math.min(p,y.domain[0]),g=Math.max(g,y.domain[1]);p<g&&(r._counterDomainMin=p,r._counterDomainMax=g)}},s.clearExpandedTraceDefaultColors=function(e){var t,n,s;for(s=[],(t=e._module._colorAttrs)||(e._module._colorAttrs=t=[],_.crawl(e._module.attributes,function(e,n,o,i){s[i]=n,s.length=i+1,"color"===e.valType&&void 0===e.dflt&&t.push(s.join("."))})),n=0;n<t.length;n++)o.nestedProperty(e,"_input."+t[n]).get()||o.nestedProperty(e,t[n]).set(null)},s.supplyDataDefaults=function(e,t,n,a){var r,c,l,d,u,h,C=a._modules,x=a._visibleModules,O=a._basePlotModules,f=0,v=0;function b(e){t.push(e);var n=e._module;n&&(o.pushUnique(C,n),!0===e.visible&&o.pushUnique(x,n),o.pushUnique(O,e._module.basePlotModule),f++,!1!==e._input.visible&&v++)}a._transformModules=[];var y={},g=[],w=(n.template||{}).data||{},E=z.traceTemplater(w);for(c=0;c<e.length;c++){if(d=e[c],(r=E.newTrace(d)).uid=a._traceUids[c],s.supplyTraceDefaults(d,r,v,a,c),r.index=c,r._input=d,r._expandedIndex=f,r.transforms&&r.transforms.length)for(var _=!1!==d.visible&&!1===r.visible,j=F(r,t,n,a),p=0;p<j.length;p++)u=j[p],l={_template:r._template,type:r.type,uid:r.uid+p},_&&!1===u.visible&&delete u.visible,s.supplyTraceDefaults(u,l,f,a,c),m(l,u),l.index=c,l._input=d,l._fullInput=r,l._expandedIndex=f,l._expandedInput=u,b(l);else r._fullInput=r,r._expandedInput=r,b(r);i.traceIs(r,"carpetAxis")&&(y[r.carpet]=r),i.traceIs(r,"carpetDependent")&&g.push(c)}for(c=0;c<g.length;c++)(r=t[g[c]]).visible&&(h=y[r.carpet],r._carpet=h,h&&h.visible?(r.xaxis=h.xaxis,r.yaxis=h.yaxis):r.visible=!1)},s.supplyAnimationDefaults=function(e){e=e||{};var t,n={};function i(t,s){return o.coerce(e||{},n,f,t,s)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(n.frame=[],t=0;t<e.frame.length;t++)n.frame[t]=s.supplyAnimationFrameDefaults(e.frame[t]||{});else n.frame=s.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(n.transition=[],t=0;t<e.transition.length;t++)n.transition[t]=s.supplyAnimationTransitionDefaults(e.transition[t]||{});else n.transition=s.supplyAnimationTransitionDefaults(e.transition||{});return n},s.supplyAnimationFrameDefaults=function(e){var t={};function n(n,s){return o.coerce(e||{},t,f.frame,n,s)}return n("duration"),n("redraw"),t},s.supplyAnimationTransitionDefaults=function(e){var t={};function n(n,s){return o.coerce(e||{},t,f.transition,n,s)}return n("duration"),n("easing"),t},s.supplyFrameDefaults=function(e){var n={};function t(t,s){return o.coerce(e,n,M,t,s)}return t("group"),t("name"),t("traces"),t("baseframe"),t("data"),t("layout"),n},s.supplyTraceDefaults=function(e,t,n,a,r){j=a.colorway||y.defaults,b=j[n%j.length];function c(n,i){return o.coerce(e,t,s.attributes,n,i)}if(v=c("visible"),c("type"),c("name",a._traceWord+" "+r),c("uirevision",a.uirevision),l=s.getModule(t),t._module=l,l){var l,u,m,f,p,v,b,j,_,w,h=l.basePlotModule,d=h.attr,g=h.attributes;if(d&&g&&(u=a._subplots,f="",v||"gl2d"!==h.name)){if(Array.isArray(d))for(p=0;p<d.length;p++)m=d[p],_=o.coerce(e,t,g,m),u[m]&&o.pushUnique(u[m],_),f+=_;else f=o.coerce(e,t,g,d);u[h.name]&&o.pushUnique(u[h.name],f)}}return v&&((c("customdata"),c("ids"),c("meta"),i.traceIs(t,"showLegend")?(o.coerce(e,t,l.attributes.showlegend?l.attributes:s.attributes,"showlegend"),c("legend"),c("legendwidth"),c("legendgroup"),c("legendgrouptitle.text"),c("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,l&&l.supplyDefaults(e,t,b,a),i.traceIs(t,"noOpacity")||c("opacity"),i.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),i.traceIs(t,"noHover")||(t.hovertemplate||o.coerceHoverinfo(e,t,a),"parcats"!==t.type&&i.getComponentMethod("fx","supplyDefaults")(e,t,b,a)),l&&l.selectPoints)&&(w=c("selectedpoints"),o.isTypedArray(w)&&(t.selectedpoints=Array.from(w))),s.supplyTransformDefaults(e,t,a)),t},s.hasMakesDataTransform=b,s.supplyTransformDefaults=function(e,t,n){if((t._length||b(e))&&(l=n._globalTransforms||[],u=n._transformModules||[],Array.isArray(e.transforms)||0!==l.length))for(var f=e.transforms||[],h=l.concat(f),m=t.transforms=[],c=0;c<h.length;c++){var a,l,u,i=h[c],r=i.type,s=d[r],p=!i._module||i._module!==s,g=s&&"function"==typeof s.transform;s||o.warn("Unrecognized transform type "+r+"."),s&&s.supplyDefaults&&(p||g)?((a=s.supplyDefaults(i,t,n,e)).type=r,a._module=s,o.pushUnique(u,s)):a=o.extendFlat({},i),m.push(a)}},s.supplyLayoutGlobalDefaults=function(e,t,n){function a(n,i){return o.coerce(e,t,s.layoutAttributes,n,i)}r=e.template,o.isPlainObject(r)&&(t.template=r,t._template=r.layout,t._dataTemplate=r.data),a("autotypenumbers");var r,c,l,u,d=o.coerceFont(a,"font"),h=d.size;o.coerceFont(a,"title.font",o.extendFlat({},d,{size:Math.round(1.4*h)})),a("title.text",t._dfltTitle.plot),a("title.xref"),c=a("title.yref"),a("title.pad.t"),a("title.pad.r"),a("title.pad.b"),a("title.pad.l"),u=a("title.automargin"),a("title.x"),a("title.xanchor"),a("title.y"),a("title.yanchor"),u&&("paper"===c&&(0!==t.title.y&&(t.title.y=1),"auto"===t.title.yanchor&&(t.title.yanchor=0===t.title.y?"top":"bottom")),"container"===c&&("auto"===t.title.y&&(t.title.y=1),"auto"===t.title.yanchor&&(t.title.yanchor=t.title.y<.5?"bottom":"top"))),a("uniformtext.mode")&&a("uniformtext.minsize"),a("autosize",!e.width||!e.height),a("width"),a("height"),a("minreducedwidth"),a("minreducedheight"),a("margin.l"),a("margin.r"),a("margin.t"),a("margin.b"),a("margin.pad"),a("margin.autoexpand"),e.width&&e.height&&s.sanitizeMargins(t),i.getComponentMethod("grid","sizeDefaults")(e,t),a("paper_bgcolor"),a("separators",n.decimal+n.thousands),a("hidesources"),a("colorway"),a("datarevision"),l=a("uirevision"),a("editrevision",l),a("selectionrevision",l),i.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),i.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,a),i.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,a),a("meta"),o.isPlainObject(e.transition)&&(a("transition.duration"),a("transition.easing"),a("transition.ordering")),i.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),i.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,a),o.coerce(e,t,R,"scattermode")},s.plotAutoSize=function(e,t,n){var i,a,r,c,h,m,f,p,g=e._context||{},d=g.frameMargins,v=o.isPlotDiv(e);v&&e.emit("plotly_autosize"),g.fillFrame?(i=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden"):(r=v?window.getComputedStyle(e):{},(i=u(r.width)||u(r.maxWidth)||n.width,a=u(r.height)||u(r.maxHeight)||n.height,l(d)&&d>0)&&(m=1-2*d,i=Math.round(m*i),a=Math.round(m*a))),f=s.layoutAttributes.width.min,c=s.layoutAttributes.height.min,i<f&&(i=f),a<c&&(a=c),p=!t.width&&Math.abs(n.width-i)>1,h=!t.height&&Math.abs(n.height-a)>1,(h||p)&&(p&&(n.width=i),h&&(n.height=a)),e._initialAutoSize||(e._initialAutoSize={width:i,height:a}),s.sanitizeMargins(n)},s.supplyLayoutModuleDefaults=function(e,t,n,s){var a,r,c,u,h,f,l=i.componentsRegistry,d=t._basePlotModules,m=i.subplotsRegistry.cartesian;for(c in l)(r=l[c]).includeBasePlot&&r.includeBasePlot(e,t);for(f in d.length||d.push(m),t._has("cartesian")&&(i.getComponentMethod("grid","contentDefaults")(e,t),m.finalizeSubplots(e,t)),t._subplots)t._subplots[f].sort(o.subplotSort);for(a=0;a<d.length;a++)(r=d[a]).supplyLayoutDefaults&&r.supplyLayoutDefaults(e,t,n);u=t._modules;for(a=0;a<u.length;a++)(r=u[a]).supplyLayoutDefaults&&r.supplyLayoutDefaults(e,t,n);h=t._transformModules;for(a=0;a<h.length;a++)(r=h[a]).supplyLayoutDefaults&&r.supplyLayoutDefaults(e,t,n,s);for(c in l)(r=l[c]).supplyLayoutDefaults&&r.supplyLayoutDefaults(e,t,n)},s.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),o.clearThrottle(),o.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},s.style=function(e){var t,s,i=e._fullLayout._visibleModules,n=[];for(t=0;t<i.length;t++)s=i[t],s.style&&o.pushUnique(n,s.style);for(t=0;t<n.length;t++)n[t](e)},s.sanitizeMargins=function(e){if(e&&e.margin){var n,s=e.width,o=e.height,t=e.margin,i=s-(t.l+t.r),a=o-(t.t+t.b);i<0&&(n=(s-1)/(t.l+t.r),t.l=Math.floor(n*t.l),t.r=Math.floor(n*t.r)),a<0&&(n=(o-1)/(t.t+t.b),t.t=Math.floor(n*t.t),t.b=Math.floor(n*t.b))}},s.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},s.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1},s.autoMargin=function(e,t,n){var r,c,l,a=e._fullLayout,d=a.width,u=a.height,i=a.margin,j=a.minreducedwidth,b=a.minreducedheight,v=o.constrain(d-i.l-i.r,2,j),g=o.constrain(u-i.t-i.b,2,b),f=Math.max(0,d-v),p=Math.max(0,u-g),h=a._pushmargin,m=a._pushmarginIds;if(!1!==i.autoexpand){if(n){r=n.pad,(void 0===r&&(r=Math.min(12,i.l,i.r,i.t,i.b)),f)&&(l=(n.l+n.r)/f,l>1&&(n.l/=l,n.r/=l)),p&&(c=(n.t+n.b)/p,c>1&&(n.t/=c,n.b/=c));var y=void 0!==n.xl?n.xl:n.x,_=void 0!==n.xr?n.xr:n.x,w=void 0!==n.yt?n.yt:n.y,O=void 0!==n.yb?n.yb:n.y;h[t]={l:{val:y,size:n.l+r},r:{val:_,size:n.r+r},b:{val:O,size:n.b+r},t:{val:w,size:n.t+r}},m[t]=1}else delete h[t],delete m[t];if(!a._replotting)return s.doAutoMargin(e)}},s.doAutoMargin=function(e){var t=e._fullLayout,C=t.width,k=t.height;t._size||(t._size={}),g(t);var u,h,m,j,y,O,x,E,A,S,M,T,z,D,L,R,B,U,K,q,Y,Q,r=t._size,d=t.margin,c={t:0,b:0,l:0,r:0},P=o.extendFlat({},r),f=d.l,p=d.r,v=d.t,b=d.b,n=t._pushmargin,G=t._pushmarginIds,ee=t.minreducedwidth,J=t.minreducedheight;if(!1!==d.autoexpand){for(Y in n)G[Y]||delete n[Y];x=e._fullLayout._reservedMargin;for(q in x)for(M in x[q])K=x[q][M],c[M]=Math.max(c[M],K);for(h in n.base={l:{val:0,size:f},r:{val:1,size:p},t:{val:1,size:v},b:{val:0,size:b}},c){y=0;for(E in n)"base"!==E&&l(n[E][h].size)&&(y=n[E][h].size>y?n[E][h].size:y);U=Math.max(0,d[h]-y),c[h]=Math.max(0,c[h]-U)}for(B in n){var W=n[B].l||{},V=n[B].b||{},w=W.val,N=W.size,_=V.val,F=V.size,I=C-c.r-c.l,H=k-c.t-c.b;for(m in n)l(N)&&n[m].r&&(j=n[m].r.val,z=n[m].r.size,j>w&&(L=(N*j+(z-I)*w)/(j-w),T=(z*(1-w)+(N-I)*(1-j))/(j-w),L+T>f+p&&(f=L,p=T))),l(F)&&n[m].t&&(u=n[m].t.val,S=n[m].t.size,u>_&&(D=(F*u+(S-H)*_)/(u-_),R=(S*(1-_)+(F-H)*(1-u))/(u-_),D+R>b+v&&(b=D,v=R)))}}var Z=o.constrain(C-d.l-d.r,2,ee),te=o.constrain(k-d.t-d.b,2,J),X=Math.max(0,C-Z),$=Math.max(0,k-te);if(X&&(O=(f+p)/X,O>1&&(f/=O,p/=O)),$&&(A=(b+v)/$,A>1&&(b/=A,v/=A)),r.l=Math.round(f)+c.l,r.r=Math.round(p)+c.r,r.t=Math.round(v)+c.t,r.b=Math.round(b)+c.b,r.p=Math.round(d.pad),r.w=Math.round(C)-r.l-r.r,r.h=Math.round(k)-r.t-r.b,!t._replotting&&(s.didMarginChange(P,r)||function(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var n,t=a.list(e,"",!0);for(n in t)if(t[n].autoshift||t[n].shift)return!0;return!1}(e))){if("_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1,Q=3*(1+Object.keys(G).length),t._redrawFromAutoMarginCount<Q)return i.call("_doPlot",e);t._size=P,o.warn("Too many auto-margin redraws.")}!function(e){var t=a.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var s,n=0;n<t.length;n++)s=t[n][e],s&&s()})}(e)},h=["l","r","t","b","p","w","h"];function w(e,t,n){var r=!1,c=[s.previousPromises,function(){if(e._transitionData)return e._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(e._transitionData._interruptCallbacks)},n.prepareFn,s.rehover,s.reselect,function(){return e.emit("plotly_transitioning",[]),new Promise(function(s){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){r=!0}),n.redraw&&e._transitionData._interruptCallbacks.push(function(){return i.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var o=0,a=0;function c(){return o++,function(){var t;a++,r||a!==o||(t=s,e._transitionData&&(function(e){if(e)for(;e.length;)e.shift()}(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(n.redraw)return i.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(t)))}}n.runFn(c),setTimeout(c())})}],a=o.syncOrAsync(c,e);return a&&a.then||(a=Promise.resolve()),a.then(function(){return e})}s.didMarginChange=function(e,t){for(n=0;n<h.length;n++){var n,s=h[n],o=e[s],i=t[s];if(!l(o)||Math.abs(i-o)>1)return!0}return!1},s.graphJson=function(e,t,n,i,a,r){(a&&t&&!e._fullData||a&&!t&&!e._fullLayout)&&s.supplyDefaults(e);var l,d,m=a?e._fullData:e.data,u=a?e._fullLayout:e.layout,h=(e._transitionData||{})._frames;function c(e,t){if("function"==typeof e)return t?"_function_":null;if(o.isPlainObject(e))return i={},Object.keys(e).sort().forEach(function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof e[a]){if("keepdata"===n){if("src"===a.substr(a.length-3))return}else if("keepstream"===n){if("string"==typeof(s=e[a+"src"])&&s.indexOf(":")>0&&!o.isPlainObject(e.stream))return}else if("keepall"!==n&&"string"==typeof(s=e[a+"src"])&&s.indexOf(":")>0)return;i[a]=c(e[a],t)}else t&&(i[a]="_function")}),i;var s,i,a,r=Array.isArray(e),l=o.isTypedArray(e);return(r||l)&&e.dtype&&e.shape?(a=e.bdata,c({dtype:e.dtype,shape:e.shape,bdata:o.isArrayBuffer(a)?D.encode(a):a},t)):r?e.map(function(e){return c(e,t)}):l?o.simpleMap(e,o.identity):o.isJSDate(e)?o.ms2DateTimeLocal(+e):e}return l={data:(m||[]).map(function(e){var n=c(e);return t&&delete n.fit,n})},!t&&(l.layout=c(u),a)&&(d=u._size,l.layout.computed={margin:{b:d.b,l:d.l,r:d.r,t:d.t}}),h&&(l.frames=c(h)),r&&(l.config=c(e._context,!0)),"object"===i?l:JSON.stringify(l)},s.modifyFrames=function(e,t){var n,s,a,r,c,o=e._transitionData._frames,i=e._transitionData._frameHash;for(a=0;a<t.length;a++)switch((n=t[a]).type){case"replace":s=n.value,c=(o[n.index]||{}).name,r=s.name,o[n.index]=i[r]=s,r!==c&&(delete i[c],i[r]=s);break;case"insert":i[(s=n.value).name]=s,o.splice(n.index,0,s);break;case"delete":delete i[(s=o[n.index]).name],o.splice(n.index,1)}return Promise.resolve()},s.computeFrame=function(e,t){if(c=e._transitionData._frameHash,!t)throw new Error("computeFrame must be given a string frame name");if(n=c[t.toString()],!n)return!1;for(var n,o,i,a,r,c,l,d=[n],u=[n.name];n.baseframe&&(n=c[n.baseframe.toString()])&&-1===u.indexOf(n.name);)d.push(n),u.push(n.name);for(o={};n=d.pop();)if(n.layout&&(o.layout=s.extendLayout(o.layout,n.layout)),n.data){if(o.data||(o.data=[]),!(r=n.traces))for(r=[],i=0;i<n.data.length;i++)r[i]=i;for(o.traces||(o.traces=[]),i=0;i<n.data.length;i++)null!=(l=r[i])&&(-1===(a=o.traces.indexOf(l))&&(a=o.data.length,o.traces[a]=l),o.data[a]=s.extendTrace(o.data[a],n.data[i]))}return o},s.recomputeFrameHash=function(e){for(var t,o=e._transitionData._frameHash={},s=e._transitionData._frames,n=0;n<s.length;n++)t=s[n],t&&t.name&&(o[t.name]=t)},s.extendObjectWithContainers=function(e,t,n){var i,a,r,c,l,u,h,m,p=o.extendDeepNoArrays({},t||{}),f=o.expandObjectPaths(p),d={};if(n&&n.length)for(i=0;i<n.length;i++)void 0===(h=(m=o.nestedProperty(f,n[i])).get())?o.nestedProperty(d,n[i]).set(null):(m.set(null),o.nestedProperty(d,n[i]).set(h));if(e=o.extendDeepNoArrays(e||{},f),n&&n.length)for(i=0;i<n.length;i++)if(l=o.nestedProperty(d,n[i]).get()){for(a=(c=o.nestedProperty(e,n[i])).get(),Array.isArray(a)||(a=[],c.set(a)),r=0;r<l.length;r++)u=l[r],a[r]=null===u?null:s.extendObjectWithContainers(a[r],u);c.set(a)}return e},s.dataArrayContainers=["transforms","dimensions"],s.layoutArrayContainers=i.layoutArrayContainers,s.extendTrace=function(e,t){return s.extendObjectWithContainers(e,t,s.dataArrayContainers)},s.extendLayout=function(e,t){return s.extendObjectWithContainers(e,t,s.layoutArrayContainers)},s.transition=function(e,t,n,i,a,r){var l={redraw:a.redraw},c={},d=[];return l.prepareFn=function(){for(var A=Array.isArray(t)?t.length:0,f=i.slice(0,A),u=0;u<f.length;u++)x=f[u],b=e._fullData[x]._module,b&&(b.animatable&&(j=b.basePlotModule.name,c[j]||(c[j]=[]),c[j].push(x)),e.data[f[u]]=s.extendTrace(e.data[f[u]],t[u]));p=o.expandObjectPaths(o.extendDeepNoArrays({},n)),E=/^[xy]axis[0-9]*$/;for(C in p)E.test(C)&&delete p[C].range;if(s.extendLayout(e.layout,p),delete e.calcdata,s.supplyDefaults(e),s.doCalcdata(e),a=o.expandObjectPaths(n),a){w=e._fullLayout._plots;for(k in w){var a,p,b,j,w,x,C,E,k,_=w[k],r=_.xaxis,l=_.yaxis,g=r.range.slice(),v=l.range.slice(),h=null,m=null,O=null,y=null;Array.isArray(a[r._name+".range"])?h=a[r._name+".range"].slice():Array.isArray((a[r._name]||{}).range)&&(h=a[r._name].range.slice()),Array.isArray(a[l._name+".range"])?m=a[l._name+".range"].slice():Array.isArray((a[l._name]||{}).range)&&(m=a[l._name].range.slice()),g&&h&&(r.r2l(g[0])!==r.r2l(h[0])||r.r2l(g[1])!==r.r2l(h[1]))&&(O={xr0:g,xr1:h}),v&&m&&(l.r2l(v[0])!==l.r2l(m[0])||l.r2l(v[1])!==l.r2l(m[1]))&&(y={yr0:v,yr1:m}),(O||y)&&d.push(o.extendFlat({plotinfo:_},O,y))}}return Promise.resolve()},l.runFn=function(t){var s,i,l,h,a=e._fullLayout._basePlotModules,u=d.length;if(n)for(s=0;s<a.length;s++)a[s].transitionAxes&&a[s].transitionAxes(e,d,r,t);for(h in u?((i=o.extendFlat({},r)).duration=0,delete c.cartesian):i=r,c)l=c[h],e._fullData[l[0]]._module.basePlotModule.plot(e,l,i,t)},w(e,r,l)},s.transitionFromReact=function(e,t,n,s){var c=e._fullLayout,i=c.transition,a={},r=[];return a.prepareFn=function(){u=c._plots;for(v in a.redraw=!1,"some"===t.anim&&(a.redraw=!0),"some"===n.anim&&(a.redraw=!0),u){var l,d,u,v,m=u[v],e=m.xaxis,i=m.yaxis,f=s[e._name].range.slice(),p=s[i._name].range.slice(),h=e.range.slice(),g=i.range.slice();e.setScale(),i.setScale(),l=null,d=null,e.r2l(f[0])===e.r2l(h[0])&&e.r2l(f[1])===e.r2l(h[1])||(l={xr0:f,xr1:h}),i.r2l(p[0])===i.r2l(g[0])&&i.r2l(p[1])===i.r2l(g[1])||(d={yr0:p,yr1:g}),(l||d)&&r.push(o.extendFlat({plotinfo:m},l,d))}return Promise.resolve()},a.runFn=function(n){for(var s,c,l,f=e._fullData,a=e._fullLayout._basePlotModules,d=[],u=0;u<f.length;u++)d.push(u);function h(){if(e._fullLayout)for(var t=0;t<a.length;t++)a[t].transitionAxes&&a[t].transitionAxes(e,r,s,n)}function m(){if(e._fullLayout)for(var t=0;t<a.length;t++)a[t].plot(e,l,c,n)}r.length&&t.anim?"traces first"===i.ordering?(s=o.extendFlat({},i,{duration:0}),l=d,c=i,setTimeout(h,i.duration),m()):(s=i,l=null,c=o.extendFlat({},i,{duration:0}),setTimeout(m,s.duration),h()):r.length?(s=i,h()):t.anim&&(l=d,c=i,m())},w(e,i,a)},s.doCalcdata=function(e,t){var n,s,l,u,h,f,p,j,y,g=a.list(e),c=e._fullData,r=e._fullLayout,b=new Array(c.length),C=(e.calcdata||[]).slice();for(e.calcdata=b,r._numBoxes=0,r._numViolins=0,r._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,r._piecolormap={},r._sunburstcolormap={},r._treemapcolormap={},r._iciclecolormap={},r._funnelareacolormap={},n=0;n<c.length;n++)Array.isArray(t)&&-1===t.indexOf(n)&&(b[n]=C[n]);for(n=0;n<c.length;n++)(s=c[n])._arrayAttrs=_.findArrayAttributes(s),s._extremes={};f=r._subplots.polar||[];for(n=0;n<f.length;n++)g.push(r[f[n]].radialaxis,r[f[n]].angularaxis);for(y in r._colorAxes)p=r[y],!1!==p.cauto&&(delete p.cmin,delete p.cmax);j=!1;function w(t){if(s=c[t],l=s._module,!0===s.visible&&s.transforms){if(l&&l.calc){var o,n=l.calc(e,s);n[0]&&n[0].t&&n[0].t._scene&&delete n[0].t._scene.dirty}for(u=0;u<s.transforms.length;u++)o=s.transforms[u],(l=d[o.type])&&l.calcTransform&&(s._hasCalcTransform=!0,j=!0,l.calcTransform(e,s,o))}}function m(t,n){if(s=c[t],!!(l=s._module).isContainer===n){var i,o=[];if(!0===s.visible&&0!==s._length){delete s._indexToPoints,i=s.transforms||[];for(u=i.length-1;u>=0;u--)if(i[u].enabled){s._indexToPoints=i[u]._indexToPoints;break}l&&l.calc&&(o=l.calc(e,s))}Array.isArray(o)&&o[0]||(o=[{x:v,y:v}]),o[0].t||(o[0].t={}),o[0].trace=s,b[t]=o}}for(x(g,c,r),n=0;n<c.length;n++)m(n,!0);for(n=0;n<c.length;n++)w(n);for(j&&x(g,c,r),n=0;n<c.length;n++)m(n,!0);for(n=0;n<c.length;n++)m(n,!1);if(k(e),h=function(e,t){j=[];function T(e,n,s){if(o=n._id.charAt(0),"histogram2dcontour"===e){var o,i=n._counterAxes[0],r=a.getFromId(t,i),c="x"===o||"x"===i&&"category"===r.type,l="y"===o||"y"===i&&"category"===r.type;return function(e,t){return 0===e||0===t||c&&e===s[t].length-1||l&&t===s.length-1?-1:("y"===o?t:e)-1}}return function(e,t){return"y"===o?t:e}}M={min:function(e){return o.aggNums(Math.min,null,e)},max:function(e){return o.aggNums(Math.max,null,e)},sum:function(e){return o.aggNums(function(e,t){return e+t},null,e)},total:function(e){return o.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return o.mean(e)},median:function(e){return o.median(e)}};function D(e,t){return e[1]-t[1]}function R(e,t){return t[1]-e[1]}for(b=0;b<e.length;b++)if(c=e[b],"category"===c.type&&(g=c.categoryorder.match(O),g)){var n,s,r,c,l,d,u,h,f,p,g,v,b,j,_,w,x,C,k,S,M,L=g[1],N=g[2],E=c._id.charAt(0),y="x"===E,m=[];for(l=0;l<c._categories.length;l++)m.push([c._categories[l],[]]);for(l=0;l<c._traceIndices.length;l++)if(w=c._traceIndices[l],h=t._fullData[w],!0===h.visible){x=h.type,i.traceIs(h,"histogram")&&(delete h._xautoBinFinished,delete h._yautoBinFinished);var z="splom"===x,F="scattergl"===x,A=t.calcdata[w];for(p=0;p<A.length;p++)if(s=A[p],z){v=h._axesDim[c._id],y||(C=h._diag[v][0],C&&(c=t._fullLayout[a.id2name(C)])),_=s.trace.dimensions[v].values;for(n=0;n<_.length;n++)for(u=c._categoriesMap[_[n]],d=0;d<s.trace.dimensions.length;d++)d!==v&&(k=s.trace.dimensions[d],m[u][1].push(k.values[n]))}else if(F){for(n=0;n<s.t.x.length;n++)y?(u=s.t.x[n],r=s.t.y[n]):(u=s.t.y[n],r=s.t.x[n]),m[u][1].push(r);s.t&&s.t._scene&&delete s.t._scene.dirty}else if(s.hasOwnProperty("z")){r=s.z,S=T(h.type,c,r);for(n=0;n<r.length;n++)for(d=0;d<r[n].length;d++)(u=S(d,n))+1&&m[u][1].push(r[n][d])}else for(void 0===(u=s.p)&&(u=s[E]),void 0===(r=s.s)&&(r=s.v),void 0===r&&(r=y?s.y:s.x),Array.isArray(r)||(r=void 0===r?[]:[r]),n=0;n<r.length;n++)m[u][1].push(r[n])}c._categoriesValue=m,f=[];for(l=0;l<m.length;l++)f.push([m[l][0],M[L](m[l][1])]);f.sort("descending"===N?R:D),c._categoriesAggregatedValue=f,c._initialCategories=f.map(function(e){return e[0]}),j=j.concat(c.sortByInitialCategories())}return j}(g,e),h.length){for(r._numBoxes=0,r._numViolins=0,n=0;n<h.length;n++)m(h[n],!0);for(n=0;n<h.length;n++)m(h[n],!1);k(e)}i.getComponentMethod("fx","calc")(e),i.getComponentMethod("errorbars","calc")(e)},O=/(total|sum|min|max|mean|median) (ascending|descending)/;function x(e,t,n){s={};function r(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),s[e._id]=1}o.simpleMap(e,r);for(var s,l,c=n._axisMatchGroups||[],i=0;i<c.length;i++)for(l in c[i])s[l]||r(n[a.id2name(l)])}function k(e){var t,n,i,a,r,c,l,d,h,f,u=e._fullLayout,m=u._visibleModules,s={};for(t=0;t<m.length;t++)h=m[t],l=h.crossTraceCalc,l&&(d=h.basePlotModule.name,s[d]?o.pushUnique(s[d],l):s[d]=[l]);for(a in s)if(n=s[a],i=u._subplots[a],Array.isArray(i))for(c=0;c<i.length;c++){r=i[c],f="cartesian"===a?u._plots[r]:u[r];for(t=0;t<n.length;t++)n[t](e,f,r)}else for(t=0;t<n.length;t++)n[t](e)}s.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},s.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},s.reselect=function(e){var s,t=e._fullLayout,n=(e.layout||{}).selections,o=t._previousSelections;t._previousSelections=n,s=t._reselect||JSON.stringify(n)!==JSON.stringify(o),i.getComponentMethod("selections","reselect")(e,s)},s.generalUpdatePerTraceModule=function(e,t,n,s){var a,r,c,l,d,u,m,h=t.traceHash,i={};for(r=0;r<n.length;r++)c=n[r],a=c[0].trace,a.visible&&(i[a.type]=i[a.type]||[],i[a.type].push(c));for(l in h)i[l]||(d=h[l][0],d[0].trace.visible=!1,i[l]=[d]);for(m in i)u=i[m],u[0][0].trace._module.plot(e,t,o.filterVisible(u),s);t.traceHash=i},s.plotBasePlot=function(e,t,n,s,o){var a=i.getModule(e),r=A(t.calcdata,a)[0];a.plot(t,r,s,o)},s.cleanBasePlot=function(e,t,n,s,o){var i=o._has&&o._has(e),a=n._has&&n._has(e);i&&!a&&o["_"+e+"layer"].selectAll("g.trace").remove()}},39360:function(e){"use strict";e.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(e,t,n){"use strict";var s=n(3400),d=n(92065).tester,r=s.findIndexOfMin,u=s.isAngleInsideSector,h=s.angleDelta,c=s.angleDist;function l(e,t,n,s){var o,a,d=s[0],c=s[1],u=i(Math.sin(t)-Math.sin(e)),r=i(Math.cos(t)-Math.cos(e)),l=Math.tan(n),h=i(1/l),m=u/r,f=c-m*d;return h?u&&r?a=l*(o=f/(l-m)):r?(o=c*h,a=c):(o=d,a=d*l):u&&r?(o=0,a=f):r?(o=0,a=c):o=a=NaN,[o,a]}function o(e,t,n,o){return s.isFullCircle([t,n])?function(e,t){var n,o,i=t.length,s=new Array(i+1);for(n=0;n<i;n++)o=t[n],s[n]=[e*Math.cos(o),e*Math.sin(o)];return s[n]=s[0].slice(),s}(e,o):function(e,t,n,o){var a,h,m,f,g,b,_,y=o.length,i=[];function j(t){return[e*Math.cos(t),e*Math.sin(t)]}function v(e,t,n){return l(e,t,n,j(e))}function p(e){return s.mod(e,y)}function d(e){return u(e,[t,n])}a=r(o,function(e){return d(e)?c(e,t):1/0}),b=v(o[a],o[p(a-1)],t);for(i.push(b),g=a,h=0;h<y;g++,h++){if(f=o[p(g)],!d(f))break;i.push(j(f))}return m=r(o,function(e){return d(e)?c(e,n):1/0}),_=v(o[m],o[p(m+1)],n),i.push(_),i.push([0,0]),i.push(i[0].slice()),i}(e,t,n,o)}function i(e){return Math.abs(e)>1e-10?e:0}function a(e,t,n){t=t||0,n=n||0;for(var o,i=e.length,a=new Array(i),s=0;s<i;s++)o=e[s],a[s]=[t+o[0],n-o[1]];return a}e.exports={isPtInsidePolygon:function(e,t,n,s,i){if(!u(t,s))return!1;n[0]<n[1]?(a=n[0],r=n[1]):(a=n[1],r=n[0]);var a,r,l=d(o(a,s[0],s[1],i)),h=d(o(r,s[0],s[1],i)),c=[e*Math.cos(t),e*Math.sin(t)];return h.contains(c)&&!l.contains(c)},findPolygonOffset:function(e,t,n,s){for(var c,i=1/0,a=1/0,l=o(e,t,n,s),r=0;r<l.length;r++)c=l[r],i=Math.min(i,c[0]),a=Math.min(a,-c[1]);return[i,a]},findEnclosingVertexAngles:function(e,t){var n=r(t,function(t){var n=h(t,e);return n>0?n:1/0}),o=s.mod(n+1,t.length);return[t[n],t[o]]},findIntersectionXY:l,findXYatLength:function(e,t,n,s){var o=-t*n,a=t*t+1,i=2*(t*o-n),d=o*o+n*n-e*e,r=Math.sqrt(i*i-4*a*d),c=(-i+r)/(2*a),l=(-i-r)/(2*a);return[[c,t*c+o+s],[l,t*l+o+s]]},clampTiny:i,pathPolygon:function(e,t,n,s,i,r){return"M"+a(o(e,t,n,s),i,r).join("L")},pathPolygonAnnulus:function(e,t,n,s,i,r,c){e<t?(l=e,d=t):(l=t,d=e);var l,d,u=a(o(l,n,s,i),r,c);return"M"+a(o(d,n,s,i),r,c).reverse().join("L")+"M"+u.join("L")}}},40872:function(e,t,n){"use strict";var l=n(84888).KY,d=n(3400).counterRegex,c=n(62400),a=n(39360),r=a.attr,s=a.name,o=d(s),i={};i[r]={valType:"subplotid",dflt:s,editType:"calc"},e.exports={attr:r,name:s,idRoot:s,idRegex:o,attrRegex:o,attributes:i,layoutAttributes:n(95300),supplyLayoutDefaults:n(84380),plot:function(e){for(var t=e._fullLayout,r=e.calcdata,a=t._subplots[s],i=0;i<a.length;i++){var n=a[i],d=l(r,s,n),o=t[n]._subplot;o||(o=c(e,n),t[n]._subplot=o),o.plot(d,t,e._promises)}},clean:function(e,t,n,o){for(var i,r,h,c=o._subplots[s]||[],l=o._has&&o._has("gl"),d=t._has&&t._has("gl"),u=l&&!d,a=0;a<c.length;a++){if(r=c[a],i=o[r]._subplot,!t[r]&&i)for(h in i.framework.remove(),i.layers["radial-axis-title"].remove(),i.clipPaths)i.clipPaths[h].remove();u&&i._scene&&(i._scene.destroy(),i._scene=null)}},toSVG:n(57952).toSVG}},95300:function(e,t,n){"use strict";var i,d=n(22548),s=n(94724),u=n(86968).u,o=n(3400).extendFlat,r=n(67824).overrideAll,c=r({color:s.color,showline:o({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:o({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth,griddash:s.griddash},"plot","from-root"),a=r({tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,layer:s.layer},"plot","from-root"),l={visible:o({},s.visible,{dflt:!0}),type:o({},s.type,{values:["-","linear","log","date","category"]}),autotypenumbers:s.autotypenumbers,autorangeoptions:{minallowed:s.autorangeoptions.minallowed,maxallowed:s.autorangeoptions.maxallowed,clipmin:s.autorangeoptions.clipmin,clipmax:s.autorangeoptions.clipmax,include:s.autorangeoptions.include,editType:"plot"},autorange:o({},s.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:o({},s.minallowed,{editType:"plot"}),maxallowed:o({},s.maxallowed,{editType:"plot"}),range:o({},s.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:s.categoryorder,categoryarray:s.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:s.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:o({},s.title.text,{editType:"plot",dflt:""}),font:o({},s.title.font,{editType:"plot"}),editType:"plot"},hoverformat:s.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}};o(l,c,a),i={visible:o({},s.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:s.autotypenumbers,categoryorder:s.categoryorder,categoryarray:s.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:s.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"},o(i,c,a),e.exports={domain:u({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:d.background},radialaxis:l,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(e,t,n){"use strict";var s=n(3400),j=n(76308),b=n(31780),g=n(168),h=n(84888).op,c=n(26332),l=n(25404),d=n(95936),u=n(42568),r=n(22416),m=n(42136),f=n(76808),p=n(52976),a=n(95300),v=n(57696),o=n(39360),i=o.axisNames;function y(e,t,n,p){U=n("bgcolor"),p.bgColor=j.combine(U,p.paper_bgcolor),I=n("sector"),n("hole"),A=h(p.fullData,o.name,p.id),W=p.layoutOut;function y(e,t){return n(w+"."+e,t)}for(M=0;M<i.length;M++){switch(w=i[M],s.isPlainObject(e[w])||(e[w]={}),O=e[w],g=b.newContainer(t,w),g._id=g._name=w,g._attr=p.id+"."+w,g._traceIndices=A.map(function(e){return e._expandedIndex}),T=o.axisName2dataArray[w],E=_(O,g,y,A,T,p),r(O,g,y,{axData:A,dataAttr:T}),$=y("visible"),v(g,t,W),y("uirevision",t.uirevision),g._m=1,w){case"radialaxis":y("minallowed"),y("maxallowed");var g,w,O,E,k,A,S,M,F,T,z,D,N,L,R,P,H,I,V,$,W,U,x=y("range"),B=g.getAutorangeDflt(x),C=y("autorange",B);!x||(null!==x[0]||null!==x[1])&&(null!==x[0]&&null!==x[1]||"reversed"!==C&&!0!==C)&&(null===x[0]||"min"!==C&&"max reversed"!==C)&&(null===x[1]||"max"!==C&&"min reversed"!==C)||(x=void 0,delete g.range,g.autorange=!0,V=!0),V||(C=y("autorange",B=g.getAutorangeDflt(x))),O.autorange=C,C&&(f(y,C,x),"linear"!==E&&"-"!==E||y("rangemode"),g.isReversed()&&(g._m=-1)),g.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===E){s.log("Polar plots do not support date angular axes yet.");for(S=0;S<A.length;S++)A[S].visible=!1;E=O.type=g.type="linear"}y("linear"===E?"thetaunit":"period"),H=y("direction"),y("rotation",{counterclockwise:0,clockwise:90}[H])}(u(O,g,y,g.type,{tickSuffixDflt:"degrees"===g.thetaunit?"°":void 0}),$)&&(k=p.font||{},F=(P=y("color"))===O.color?P:k.color,N=k.size,D=k.family,z=k.weight,R=k.style,L=k.variant,c(O,g,y,g.type),d(O,g,y,g.type,{font:{weight:z,style:R,variant:L,color:F,size:N,family:D},noAutotickangles:"angularaxis"===w}),l(O,g,y,{outerTicks:!0}),m(O,g,y,{dfltColor:P,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a[w]}),y("layer"),"radialaxis"===w&&(y("side"),y("angle",I[0]),y("title.text"),s.coerceFont(y,"title.font",{weight:z,style:R,variant:L,color:F,size:s.bigFont(N),family:D}))),"category"!==E&&y("hoverformat"),g._input=O}"category"===t.angularaxis.type&&n("gridshape")}function _(e,t,n,s,o,i){var a,r,c=n("autotypenumbers",i.autotypenumbersDflt);if("-"===n("type")){for(a=0;a<s.length;a++)if(s[a].visible){r=s[a];break}r&&r[o]&&(t.type=p(r[o],"gregorian",{noMultiCategory:!0,autotypenumbers:c})),"-"===t.type?t.type="linear":e.type=t.type}return t.type}e.exports=function(e,t,n){g(e,t,n,{type:o.name,attributes:a,handleDefaults:y,font:t.font,autotypenumbersDflt:t.autotypenumbers,paper_bgcolor:t.paper_bgcolor,fullData:n,layoutOut:t})}},62400:function(e,t,n){"use strict";var o,f=n(33428),H=n(49760),m=n(24040),s=n(3400),r=s.strRotate,i=s.strTranslate,w=n(76308),p=n(43616),L=n(7316),a=n(54460),R=n(78344),P=n(57696),B=n(19280).doAutoRange,l=n(51184),y=n(86476),M=n(93024),z=n(81668),N=n(22676).prepSelect,V=n(22676).selectOnClick,_=n(22676).clearOutline,O=n(93972),C=n(73696),E=n(39172).redrawReglTraces,I=n(84284).MID_SHIFT,d=n(39360),c=n(57384),v=n(36416),j=v.smith,T=v.reactanceArc,F=v.resistanceArc,b=v.smithTransform,D=s._,S=s.mod,u=s.deg2rad,h=s.rad2deg;function A(e,t,n){this.isSmith=n||!1,this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var s=e._fullLayout,o="clip"+s._uid+t;this.clipIds.forTraces=o+"-for-traces",this.clipPaths.forTraces=s._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=s["_"+(n?"smith":"polar")+"layer"].append("g").attr("class",t),this.getHole=function(e){return this.isSmith?0:e.hole},this.getSector=function(e){return this.isSmith?[0,360]:e.sector},this.getRadial=function(e){return this.isSmith?e.realaxis:e.radialaxis},this.getAngular=function(e){return this.isSmith?e.imaginaryaxis:e.angularaxis},n||(this.radialTickLayout=null,this.angularTickLayout=null)}o=A.prototype;function k(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function x(e,t){return t[s.findIndexOfMin(t,function(t){return s.angleDist(e,t)})]}function g(e,t,n){return t?(e.attr("display",null),e.attr(n)):e&&e.attr("display","none"),e}e.exports=function(e,t,n){return new A(e,t,n)},o.plot=function(e,t){for(var n=this,s=t[n.id],i=!1,o=0;o<e.length;o++)if(!1===e[o][0].trace.cliponaxis){i=!0;break}n._hasClipOnAxisFalse=i,n.updateLayers(t,s),n.updateLayout(t,s),L.generalUpdatePerTraceModule(n.gd,n,e,s),n.updateFx(t,s),n.isSmith&&(delete s.realaxis.range,delete s.imaginaryaxis.range)},o.updateLayers=function(e,t){var a,r,s=this,c=s.isSmith,l=s.layers,m=s.getRadial(t),p=s.getAngular(t),u=d.layerNames,h=u.indexOf("frontplot"),n=u.slice(0,h),o="below traces"===p.layer,i="below traces"===m.layer;o&&n.push("angular-line"),i&&n.push("radial-line"),o&&n.push("angular-axis"),i&&n.push("radial-axis"),n.push("frontplot"),o||n.push("angular-line"),i||n.push("radial-line"),o||n.push("angular-axis"),i||n.push("radial-axis"),a=(c?"smith":"polar")+"sublayer",r=s.framework.selectAll("."+a).data(n,String),r.enter().append("g").attr("class",function(e){return a+" "+e}).each(function(e){var t=l[e]=f.select(this);switch(e){case"frontplot":c||t.append("g").classed("barlayer",!0),t.append("g").classed("scatterlayer",!0);break;case"backplot":t.append("g").classed("maplayer",!0);break;case"plotbg":l.bg=t.append("path");break;case"radial-grid":case"angular-grid":t.style("fill","none");break;case"radial-line":t.append("line").style("fill","none");break;case"angular-line":t.append("path").style("fill","none")}}),r.order()},o.updateLayout=function(e,t){var n=this,C=n.layers,s=e._size,k=n.getRadial(t),z=n.getAngular(t),r=t.domain.x,o=t.domain.y;n.xOffset=s.l+s.w*r[0],n.yOffset=s.t+s.h*(1-o[1]);var v=n.xLength=s.w*(r[1]-r[0]),m=n.yLength=s.h*(o[1]-o[0]),M=n.getSector(t);n.sectorInRad=M.map(u);var c,d,h,g,b,l=n.sectorBBox=function(e){var r,c=e[0],l=e[1]-c,t=S(c,360),n=t+l,a=Math.cos(u(t)),s=Math.sin(u(t)),o=Math.cos(u(n)),i=Math.sin(u(n));return r=t<=90&&n>=90||t>90&&n>=450?1:s<=0&&i<=0?0:Math.max(s,i),[t<=180&&n>=180||t>180&&n>=540?-1:a>=0&&o>=0?0:Math.min(a,o),t<=270&&n>=270||t>270&&n>=630?-1:s>=0&&i>=0?0:Math.min(s,i),n>=360?1:a<=0&&o<=0?0:Math.max(a,o),r]}(M),E=l[2]-l[0],L=l[3]-l[1],R=m/v,O=Math.abs(L/E);R>O?(g=v,c=(m-(b=v*O))/s.h/2,h=[r[0],r[1]],d=[o[0]+c,o[1]-c]):(b=m,c=(v-(g=m/O))/s.w/2,h=[r[0]+c,r[1]-c],d=[o[0],o[1]]),n.xLength2=g,n.yLength2=b,n.xDomain2=h,n.yDomain2=d;var _,x,y=n.xOffset2=s.l+s.w*h[0],j=n.yOffset2=s.t+s.h*(1-d[1]),f=n.radius=g/E,T=n.innerRadius=n.getHole(t)*f,F=n.cx=y-f*l[0],A=n.cy=j+f*l[3],D=n.cxx=F-y,N=n.cyy=A-j,a=k.side;"counterclockwise"===a?(_=a,a="top"):"clockwise"===a&&(_=a,a="bottom"),n.radialAxis=n.mockAxis(e,t,k,{_id:"x",side:a,_trueSide:_,domain:[T/s.w,f/s.w]}),n.angularAxis=n.mockAxis(e,t,z,{side:"right",domain:[0,Math.PI],autorange:!1}),n.doAutoRange(e,t),n.updateAngularAxis(e,t),n.updateRadialAxis(e,t),n.updateRadialAxisTitle(e,t),n.xaxis=n.mockCartesianAxis(e,t,{_id:"x",domain:h}),n.yaxis=n.mockCartesianAxis(e,t,{_id:"y",domain:d}),x=n.pathSubplot(),n.clipPaths.forTraces.select("path").attr("d",x).attr("transform",i(D,N)),C.frontplot.attr("transform",i(y,j)).call(p.setClipUrl,n._hasClipOnAxisFalse?null:n.clipIds.forTraces,n.gd),C.bg.attr("d",x).attr("transform",i(F,A)).call(w.fill,t.bgcolor)},o.mockAxis=function(e,t,n,o){var i=s.extendFlat({},n,o);return P(i,t,e),i},o.mockCartesianAxis=function(e,t,n){var r,i=this,c=i.isSmith,a=n._id,o=s.extendFlat({type:"linear"},n);return R(o,e),r={x:[0,2],y:[1,3]},o.setRange=function(){var e=i.sectorBBox,n=r[a],s=i.radialAxis._rl,c=(s[1]-s[0])/(1-i.getHole(t));o.range=[e[n[0]]*c,e[n[1]]*c]},o.isPtWithinRange="x"!==a||c?function(){return!0}:function(e){return i.isPtInside(e)},o.setRange(),o.setScale(),o},o.doAutoRange=function(e,t){var s,i,a,o=this,c=o.gd,n=o.radialAxis,r=o.getRadial(t);B(c,n),s=n.range,(r.range=s.slice(),r._input.range=s.slice(),n._rl=[n.r2l(s[0],null,"gregorian"),n.r2l(s[1],null,"gregorian")],void 0!==n.minallowed)&&(i=n.r2l(n.minallowed),n._rl[0]>n._rl[1]?n._rl[1]=Math.max(n._rl[1],i):n._rl[0]=Math.max(n._rl[0],i)),void 0!==n.maxallowed&&(a=n.r2l(n.maxallowed),n._rl[0]<n._rl[1]?n._rl[1]=Math.min(n._rl[1],a):n._rl[0]=Math.min(n._rl[0],a))},o.updateRadialAxis=function(e,t){var o=this,O=o.gd,d=o.layers,y=o.radius,m=o.innerRadius,D=o.cx,T=o.cy,c=o.getRadial(t),M=S(o.getSector(t)[0],360),n=o.radialAxis,p=m<y,l=o.isSmith;l||(o.fillViewInitialKey("radialaxis.angle",c.angle),o.fillViewInitialKey("radialaxis.range",n.range.slice()),n.setGeometry()),"auto"===n.tickangle&&M>90&&M<=270&&(n.tickangle=180);var E=l?function(e){var t=b(o,j([e.x,0]));return i(t[0]-D,t[1]-T)}:function(e){return i(n.l2p(e.x)+m,0)},R=l?function(e){return F(o,e.x,-1/0,1/0)}:function(e){return o.pathArc(n.r2p(e.x)+m)},A=k(c);if(o.radialTickLayout!==A&&(d["radial-axis"].selectAll(".xtick").remove(),o.radialTickLayout=A),p){n.setScale();var _=0,f=l?(n.tickvals||[]).filter(function(e){return e>=0}).map(function(e){return a.tickText(n,e,!0,!1)}):a.calcTicks(n),L=l?f:a.clipEnds(n,f),v=a.getTickSigns(n)[2];l&&(("top"===n.ticks&&"bottom"===n.side||"bottom"===n.ticks&&"top"===n.side)&&(v=-v),"top"===n.ticks&&"top"===n.side&&(_=-n.ticklen),"bottom"===n.ticks&&"bottom"===n.side&&(_=n.ticklen)),a.drawTicks(O,n,{vals:f,layer:d["radial-axis"],path:a.makeTickPath(n,0,v),transFn:E,crisp:!1}),a.drawGrid(O,n,{vals:L,layer:d["radial-grid"],path:R,transFn:s.noop,crisp:!1}),a.drawLabels(O,n,{vals:f,layer:d["radial-axis"],transFn:E,labelFns:a.makeLabelFns(n,_)})}var N=o.radialAxisAngle=o.vangles?h(x(u(c.angle),o.vangles)):c.angle,z=i(D,T),C=z+r(-N);g(d["radial-axis"],p&&(c.showticklabels||c.ticks),{transform:C}),g(d["radial-grid"],p&&c.showgrid,{transform:l?"":z}),g(d["radial-line"].select("line"),p&&c.showline,{x1:l?-y:m,y1:0,x2:y,y2:0,transform:C}).attr("stroke-width",c.linewidth).call(w.stroke,c.linecolor)},o.updateRadialAxisTitle=function(e,t,n){if(!this.isSmith){var s=this,d=s.gd,h=s.radius,j=s.cx,b=s.cy,o=s.getRadial(t),v=s.id+"title",i=0;if(o.title){var g=p.bBox(s.layers["radial-axis"].node()).height,a=o.title.font.size,f=o.side;i="top"===f?a:"counterclockwise"===f?-(g+.4*a):g+.8*a}var r=void 0!==n?n:s.radialAxisAngle,l=u(r),c=Math.cos(l),m=Math.sin(l),y=j+h/2*c+i*m,_=b-h/2*m+i*c;s.layers["radial-axis-title"]=z.draw(d,v,{propContainer:o,propName:s.id+".radialaxis.title",placeholder:D(d,"Click to enter radial axis title"),attributes:{x:y,y:_,"text-anchor":"middle"},transform:{rotate:-r}})}},o.updateAngularAxis=function(e,t){var c,l,u,O,S,o=this,_=o.gd,v=o.layers,y=o.radius,C=o.innerRadius,m=o.cx,f=o.cy,p=o.getAngular(t),n=o.angularAxis,d=o.isSmith;d||(o.fillViewInitialKey("angularaxis.rotation",p.rotation),n.setGeometry(),n.setScale()),c=d?function(e){var t=b(o,j([0,e.x]));return Math.atan2(t[0]-m,t[1]-f)-Math.PI/2}:function(e){return n.t2g(e.x)},"linear"===n.type&&"radians"===n.thetaunit&&(n.tick0=h(n.tick0),n.dtick=h(n.dtick));var A=function(e){return i(m+y*Math.cos(e),f-y*Math.sin(e))},D=d?function(e){var t=b(o,j([0,e.x]));return i(t[0],t[1])}:function(e){return A(c(e))},z=d?function(e){var t=b(o,j([0,e.x])),n=Math.atan2(t[0]-m,t[1]-f)-Math.PI/2;return i(t[0],t[1])+r(-h(n))}:function(e){var t=c(e);return A(t)+r(-h(t))},F=d?function(e){return T(o,e.x,0,1/0)}:function(e){var t=c(e),n=Math.cos(t),s=Math.sin(t);return"M"+[m+C*n,f-C*s]+"L"+[m+y*n,f-y*s]},E=a.makeLabelFns(n,0).labelStandoff,M={xFn:function(e){var t=c(e);return Math.cos(t)*E},yFn:function(e){var t=c(e),n=Math.sin(t)>0?.2:1;return-Math.sin(t)*(E+e.fontSize*n)+Math.abs(Math.cos(t))*(e.fontSize*I)},anchorFn:function(e){var n=c(e),t=Math.cos(n);return Math.abs(t)<.1?"middle":t>0?"start":"end"},heightFn:function(e,t,n){var s=c(e);return-.5*(1+Math.sin(s))*n}},x=k(p);o.angularTickLayout!==x&&(v["angular-axis"].selectAll("."+n._id+"tick").remove(),o.angularTickLayout=x),l=d?[1/0].concat(n.tickvals||[]).map(function(e){return a.tickText(n,e,!0,!1)}):a.calcTicks(n),(d&&(l[0].text="∞",l[0].fontSize*=1.75),"linear"===t.gridshape?(u=l.map(c),s.angleDelta(u[0],u[1])<0&&(u=u.slice().reverse())):u=null,o.vangles=u,"category"===n.type&&(l=l.filter(function(e){return s.isAngleInsideSector(c(e),o.sectorInRad)})),n.visible)&&(O="inside"===n.ticks?-1:1,S=(n.linewidth||1)/2,a.drawTicks(_,n,{vals:l,layer:v["angular-axis"],path:"M"+O*S+",0h"+O*n.ticklen,transFn:z,crisp:!1}),a.drawGrid(_,n,{vals:l,layer:v["angular-grid"],path:F,transFn:s.noop,crisp:!1}),a.drawLabels(_,n,{vals:l,layer:v["angular-axis"],repositionOnUpdate:!0,transFn:D,labelFns:M})),g(v["angular-line"].select("path"),p.showline,{d:o.pathSubplot(),transform:i(m,f)}).attr("stroke-width",p.linewidth).call(w.stroke,p.linecolor)},o.updateFx=function(e,t){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(e),this.updateRadialDrag(e,t,0),this.updateRadialDrag(e,t,1)),this.updateHoverAndMainDrag(e))},o.updateHoverAndMainDrag=function(e){var o,r,u,h,p,O,A,T,D,L,U,Q,t=this,ae=t.isSmith,n=t.gd,se=t.layers,P=e._zoomlayer,te=d.MINZOOM,E=d.OFFEDGE,a=t.radius,x=t.innerRadius,z=t.cx,F=t.cy,k=t.cxx,C=t.cyy,$=t.sectorInRad,j=t.vangles,ee=t.radialAxis,W=c.clampTiny,R=c.findXYatLength,I=c.findEnclosingVertexAngles,g=d.cornerHalfWidth,w=d.cornerLen/2,v=l.makeDragger(se,"path","maindrag",!1===e.dragmode?"none":"crosshair");f.select(v).attr("d",t.pathSubplot()).attr("transform",i(z,F)),v.onmousemove=function(e){M.hover(n,e,t.id),n._fullLayout._lasthover=v,n._fullLayout._hoversubplot=t.id},v.onmouseout=function(e){n._dragging||y.unhover(n,e)},h={element:v,gd:n,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]};function Y(e,t){return Math.sqrt(e*e+t*t)}function J(e,t){return Y(e-k,t-C)}function S(e,t){return Math.atan2(C-t,e-k)}function b(e,t){return[e*Math.cos(t),e*Math.sin(-t)]}function Z(e,n){if(0===e)return t.pathSector(2*g);var i=w/e,r=n-i,c=n+i,l=Math.max(0,Math.min(e,a)),s=l-g,o=l+g;return"M"+b(s,r)+"A"+[s,s]+" 0,0,0 "+b(s,c)+"L"+b(o,c)+"A"+[o,o]+" 0,0,1 "+b(o,r)+"Z"}function G(e,n,s){if(0===e)return t.pathSector(2*g);var a,r,l,d,m=b(e,n),f=b(e,s),i=W((m[0]+f[0])/2),o=W((m[1]+f[1])/2);if(i&&o){var u=o/i,h=-1/u,c=R(g,u,i,o);l=R(w,h,c[0][0],c[0][1]),d=R(w,h,c[1][0],c[1][1])}else o?(a=w,r=g):(a=g,r=w),l=[[i-a,o-r],[i+a,o-r]],d=[[i-a,o+r],[i+a,o+r]];return"M"+l.join("L")+"L"+d.reverse().join("L")+"Z"}function B(e,t){return t=Math.max(Math.min(t,a),x),e<E?e=0:a-e<E?e=a:t<E?t=0:a-t<E&&(t=a),Math.abs(t-e)>te?(e<t?(o=e,r=t):(o=t,r=e),!0):(o=null,r=null,!1)}function K(e,t){e=e||O,t=t||"M0,0Z",T.attr("d",e),D.attr("d",t),l.transitionZoombox(T,D,A,L),A=!0;var s={};X(s),n.emit("plotly_relayouting",s)}function ne(e,n){var s,i,l=u+(e*=U),d=p+(n*=Q),h=J(u,p),m=Math.min(J(l,d),a),c=S(u,p);B(h,m)&&(s=O+t.pathSector(r),o&&(s+=t.pathSector(o)),i=Z(o,c)+Z(r,c)),K(s,i)}function q(e,t,n,s){var o=c.findIntersectionXY(n,s,n,[e-k,C-t]);return Y(o[0],o[1])}function oe(e,n){var i,c,l=u+e,d=p+n,m=S(u,p),f=S(l,d),s=I(m,j),h=I(f,j);B(q(u,p,s[0],s[1]),Math.min(q(l,d,h[0],h[1]),a))&&(i=O+t.pathSector(r),o&&(i+=t.pathSector(o)),c=[G(o,s[0],s[1]),G(r,s[0],s[1])].join(" ")),K(i,c)}function ie(){if(l.removeZoombox(n),null!==o&&null!==r){var e={};X(e),l.showDoubleClickNotifier(n),m.call("_guiRelayout",n,e)}}function X(e){var n=ee._rl,s=(n[1]-n[0])/(1-x/a)/a,i=[n[0]+(o-x)*s,n[0]+(r-x)*s];e[t.id+".radialaxis.range"]=i}function re(e,s){var o,a,i=n._fullLayout.clickmode;if(l.removeZoombox(n),2===e){o={};for(a in t.viewInitial)o[t.id+"."+a]=t.viewInitial[a];n.emit("plotly_doubleclick",null),m.call("_guiRelayout",n,o)}i.indexOf("select")>-1&&1===e&&V(s,n,[t.xaxis],[t.yaxis],t.id,h),i.indexOf("event")>-1&&M.click(n,s,t.id)}h.prepFn=function(e,i,d){var m,f,y,g=n._fullLayout.dragmode,b=v.getBoundingClientRect();switch(n._fullLayout._calcInverseTransform(n),y=n._fullLayout._invTransform,U=n._fullLayout._invScaleX,Q=n._fullLayout._invScaleY,m=s.apply3DTransform(y)(i-b.left,d-b.top),(u=m[0],p=m[1],j)&&(f=c.findPolygonOffset(a,$[0],$[1],j),u+=k+f[0],p+=C+f[1]),g){case"zoom":h.clickFn=re,ae||(h.moveFn=j?oe:ne,h.doneFn=ie,function(){o=null,r=null,O=t.pathSubplot(),A=!1;var e=n._fullLayout[t.id];L=H(e.bgcolor).getLuminance(),(T=l.makeZoombox(P,L,z,F,O)).attr("fill-rule","evenodd"),D=l.makeCorners(P,z,F),_(n)}());break;case"select":case"lasso":N(e,i,d,h,g)}},y.init(h)},o.updateRadialDrag=function(e,t,n){var a,c,b,T,L,o=this,p=o.gd,N=o.layers,F=o.radius,z=o.innerRadius,M=o.cx,S=o.cy,w=o.radialAxis,R=d.radialDragBoxSize,j=R/2;if(w.visible){var k,A,D,v=u(o.radialAxisAngle),O=w._rl,B=O[0],I=O[1],H=O[n],P=.75*(O[1]-O[0])/(1-o.getHole(t))/F;n?(k=M+(F+j)*Math.cos(v),A=S-(F+j)*Math.sin(v),D="radialdrag"):(k=M+(z-j)*Math.cos(v),A=S-(z-j)*Math.sin(v),D="radialdrag-inner"),L=l.makeRectDragger(N,D,"crosshair",-j,-j,R,R),b={element:L,gd:p},!1===e.dragmode&&(b.dragmode=!1),g(f.select(L),w.visible&&z<F,{transform:i(k,A)}),b.prepFn=function(){T=null,a=null,c=null,b.moveFn=V,b.doneFn=$,_(p)},b.clampFn=function(e,t){return Math.sqrt(e*e+t*t)<d.MINDRAG&&(e=0,t=0),[e,t]},y.init(b)}function V(e,t){if(T)T(e,t);else{var r,i=[e,-t],d=[Math.cos(v),Math.sin(v)],l=Math.abs(s.dot(i,d)/Math.sqrt(s.dot(i,i)));isNaN(l)||(T=l<.5?W:U)}r={},!function(e){null!==a?e[o.id+".radialaxis.angle"]=a:null!==c&&(e[o.id+".radialaxis.range["+n+"]"]=c)}(r),p.emit("plotly_relayouting",r)}function $(){null!==a?m.call("_guiRelayout",p,o.id+".radialaxis.angle",a):null!==c&&m.call("_guiRelayout",p,o.id+".radialaxis.range["+n+"]",c)}function W(e,t){if(0!==n){var s,c,l,d=k+e,u=A+t;a=Math.atan2(S-u,d-M),o.vangles&&(a=x(a,o.vangles)),a=h(a),s=i(M,S)+r(-a),N["radial-axis"].attr("transform",s),N["radial-line"].select("line").attr("transform",s),c=o.gd._fullLayout,l=c[o.id],o.updateRadialAxisTitle(c,l,a)}}function U(e,t){if(h=s.dot([e,-t],[Math.cos(v),Math.sin(v)]),c=H-P*h,P>0==(n?c>B:c<I)){var i,a,r,u,h,l=p._fullLayout,d=l[o.id];w.range[n]=c,w._rl[n]=c,o.updateRadialAxis(l,d),o.xaxis.setRange(),o.xaxis.setScale(),o.yaxis.setRange(),o.yaxis.setScale(),a=!1;for(u in o.traceHash)r=o.traceHash[u],i=s.filterVisible(r),r[0][0].trace._module.plot(p,o,i,d),m.traceIs(u,"gl")&&i.length&&(a=!0);a&&(C(p),E(p))}else c=null}},o.updateAngularDrag=function(e){var t=this,n=t.gd,o=t.layers,D=t.radius,P=t.angularAxis,k=t.cx,x=t.cy,b=t.cxx,w=t.cyy,j=d.angularDragBoxSize,v=l.makeDragger(o,"path","angulardrag",!1===e.dragmode?"none":"move"),a={element:v,gd:n};function M(e,t){return Math.atan2(w+j-t,e-b-j)}!1===e.dragmode?a.dragmode=!1:f.select(v).attr("d",t.pathAnnulus(D,D+j)).attr("transform",i(k,x)).call(O,"move");var c,u,g,S,F,z,A=o.frontplot.select(".scatterlayer").selectAll(".trace"),L=A.selectAll(".point"),N=A.selectAll(".textpoint");function R(a,l){var y,_,O,D,R,H,I,v=t.gd._fullLayout,j=v[t.id],B=M(c+a*e._invScaleX,u+l*e._invScaleY),d=h(B-z);S=F+d,o.frontplot.attr("transform",i(t.xOffset2,t.yOffset2)+r([-d,b,w])),t.vangles?(g=t.radialAxisAngle+d,_=i(k,x)+r(-d),O=i(k,x)+r(-g),o.bg.attr("transform",_),o["radial-grid"].attr("transform",_),o["radial-axis"].attr("transform",O),o["radial-line"].select("line").attr("transform",O),t.updateRadialAxisTitle(v,j,g)):t.clipPaths.forTraces.select("path").attr("transform",i(b,w)+r(d)),L.each(function(){var e=f.select(this),t=p.getTranslate(e);e.attr("transform",i(t.x,t.y)+r([d]))}),N.each(function(){var e=f.select(this),t=e.select("text"),n=p.getTranslate(e);e.attr("transform",r([d,t.attr("x"),t.attr("y")])+i(n.x,n.y))}),P.rotation=s.modHalf(S,360),t.updateAngularAxis(v,j),t._hasClipOnAxisFalse&&!s.isFullCircle(t.sectorInRad)&&A.call(p.hideOutsideRangePoints,t),D=!1;for(I in t.traceHash)m.traceIs(I,"gl")&&(y=t.traceHash[I],R=s.filterVisible(y),y[0][0].trace._module.plot(n,t,R,j),R.length&&(D=!0));D&&(C(n),E(n)),H={},T(H),n.emit("plotly_relayouting",H)}function T(e){e[t.id+".angularaxis.rotation"]=S,t.vangles&&(e[t.id+".radialaxis.angle"]=g)}function H(){N.select("text").attr("transform",null);var e={};T(e),m.call("_guiRelayout",n,e)}a.prepFn=function(o,i,r){var l,d,h=e[t.id];F=h.angularaxis.rotation,l=v.getBoundingClientRect(),c=i-l.left,u=r-l.top,n._fullLayout._calcInverseTransform(n),d=s.apply3DTransform(e._invTransform)(c,u),c=d[0],u=d[1],z=M(c,u),a.moveFn=R,a.doneFn=H,_(n)},t.vangles&&!s.isFullCircle(t.sectorInRad)&&(a.prepFn=s.noop,O(f.select(v),null)),y.init(a)},o.isPtInside=function(e){if(this.isSmith)return!0;var o=this.sectorInRad,t=this.vangles,i=this.angularAxis.c2g(e.theta),n=this.radialAxis,a=n.c2l(e.r),r=n._rl;return(t?c.isPtInsidePolygon:s.isPtInsideSector)(a,i,r,o,t)},o.pathArc=function(e){var t=this.sectorInRad,n=this.vangles;return(n?c.pathPolygon:s.pathArc)(e,t[0],t[1],n)},o.pathSector=function(e){var t=this.sectorInRad,n=this.vangles;return(n?c.pathPolygon:s.pathSector)(e,t[0],t[1],n)},o.pathAnnulus=function(e,t){var n=this.sectorInRad,o=this.vangles;return(o?c.pathPolygonAnnulus:s.pathAnnulus)(e,t,n[0],n[1],o)},o.pathSubplot=function(){var e=this.innerRadius,t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)},o.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)}},57696:function(e,t,n){"use strict";var s=n(3400),a=n(78344),o=s.deg2rad,i=s.rad2deg;e.exports=function(e,t,n){switch(a(e,n),e._id){case"x":case"radialaxis":!function(e,t){var n=t._subplot;e.setGeometry=function(){var t=e._rl[0],s=e._rl[1],o=n.innerRadius,i=(n.radius-o)/(s-t),a=o/i,r=t>s?function(e){return e<=0}:function(e){return e>=0};e.c2g=function(n){var s=e.c2l(n)-t;return(r(s)?s:0)+a},e.g2c=function(n){return e.l2c(n+t-a)},e.g2p=function(e){return e*i},e.c2p=function(t){return e.g2p(e.c2g(t))}}}(e,t);break;case"angularaxis":!function(e,t){if(n=e.type,"linear"===n){var n,a=e.d2c,r=e.c2d;e.d2c=function(e,t){return function(e,t){return"degrees"===t?o(e):e}(a(e),t)},e.c2d=function(e,t){return r(function(e,t){return"degrees"===t?i(e):e}(e,t))}}e.makeCalcdata=function(t,n){var s,o,r=t[n],i=t._length,a=function(n){return e.d2c(n,t.thetaunit)};if(r)for(o=new Array(i),s=0;s<i;s++)o[s]=a(r[s]);else{var c=n+"0",l="d"+n,d=c in t?a(t[c]):0,u=t[l]?a(t[l]):(e.period||2*Math.PI)/i;for(o=new Array(i),s=0;s<i;s++)o[s]=d+s*u}return o},e.setGeometry=function(){var a,r,c,l,d,m,u=t.sector,v=u.map(o),f={clockwise:-1,counterclockwise:1}[e.direction],p=o(e.rotation),g=function(e){return f*e+p},h=function(e){return(e-p)/f};switch(n){case"linear":c=r=s.identity,d=o,l=i,e.range=s.isFullCircle(v)?[u[0],u[0]+360]:v.map(h).map(i);break;case"category":m=e._categories.length,a=e.period?Math.max(e.period,m):m,0===a&&(a=1),c=d=function(e){return 2*e*Math.PI/a},r=l=function(e){return e*a/Math.PI/2},e.range=[0,a]}e.c2g=function(e){return g(c(e))},e.g2c=function(e){return r(h(e))},e.t2g=function(e){return g(d(e))},e.g2t=function(e){return l(h(e))}}}(e,t)}}},55012:function(e){"use strict";e.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(e){"use strict";function s(e){return e<0?-1:e>0?1:0}function t(e){var s,n=e[0],t=e[1];return!isFinite(n)||!isFinite(t)?[1,0]:(s=(n+1)*(n+1)+t*t,[(n*n+t*t-1)/s,2*t/s])}function n(e,t){var n=t[0],s=t[1];return[n*e.radius+e.cx,-s*e.radius+e.cy]}function o(e,t){return t*e.radius}e.exports={smith:t,reactanceArc:function(e,s,i,a){var r,m=n(e,t([i,s])),c=m[0],l=m[1],d=n(e,t([a,s])),u=d[0],h=d[1];return 0===s?["M"+c+","+l,"L"+u+","+h].join(" "):(r=o(e,1/Math.abs(s)),["M"+c+","+l,"A"+r+","+r+" 0 0,"+(s<0?1:0)+" "+u+","+h].join(" "))},resistanceArc:function(e,i,a,r){var l,c=o(e,1/(i+1)),p=n(e,t([i,a])),d=p[0],u=p[1],h=n(e,t([i,r])),m=h[0],f=h[1];return s(a)!==s(r)?(l=n(e,t([i,0])),["M"+d+","+u,"A"+c+","+c+" 0 0,"+(0<a?0:1)+" "+l[0]+","+l[1],"A"+c+","+c+" 0 0,"+(r<0?0:1)+m+","+f].join(" ")):["M"+d+","+u,"A"+c+","+c+" 0 0,"+(r<a?0:1)+" "+m+","+f].join(" ")},smithTransform:n}},47788:function(e,t,n){"use strict";var l=n(84888).KY,d=n(3400).counterRegex,c=n(62400),a=n(55012),r=a.attr,s=a.name,o=d(s),i={};i[r]={valType:"subplotid",dflt:s,editType:"calc"},e.exports={attr:r,name:s,idRoot:s,idRegex:o,attrRegex:o,attributes:i,layoutAttributes:n(6183),supplyLayoutDefaults:n(22836),plot:function(e){for(var t=e._fullLayout,r=e.calcdata,a=t._subplots[s],i=0;i<a.length;i++){var n=a[i],d=l(r,s,n),o=t[n]._subplot;o||(o=c(e,n,!0),t[n]._subplot=o),o.plot(d,t,e._promises)}},clean:function(e,t,n,o){for(var i,r,l,c=o._subplots[s]||[],a=0;a<c.length;a++)if(r=c[a],i=o[r]._subplot,!t[r]&&i)for(l in i.framework.remove(),i.clipPaths)i.clipPaths[l].remove()},toSVG:n(57952).toSVG}},6183:function(e,t,n){"use strict";var l=n(22548),s=n(94724),c=n(86968).u,o=n(3400).extendFlat,a=n(67824).overrideAll,r=a({color:s.color,showline:o({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:o({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth,griddash:s.griddash},"plot","from-root"),i=a({ticklen:s.ticklen,tickwidth:o({},s.tickwidth,{dflt:2}),tickcolor:s.tickcolor,showticklabels:s.showticklabels,labelalias:s.labelalias,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,tickfont:s.tickfont,tickformat:s.tickformat,hoverformat:s.hoverformat,layer:s.layer},"plot","from-root"),d=o({visible:o({},s.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:o({},s.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},r,i),u=o({visible:o({},s.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:s.ticks,editType:"calc"},r,i);e.exports={domain:c({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:l.background},realaxis:d,imaginaryaxis:u,editType:"calc"}},22836:function(e,t,n){"use strict";var i,a,l,o=n(3400),v=n(76308),g=n(31780),p=n(168),u=n(84888).op,d=n(42568),h=n(95936),m=n(42136),f=n(78344),s=n(6183),r=n(55012),c=r.axisNames,b=(l=function(e){return o.isTypedArray(e)&&(e=Array.from(e)),e.slice().reverse().map(function(e){return-e}).concat([0]).concat(e)},a=String,i={},function(e){var n,t=a?a(e):e;return t in i?i[t]:(n=l(e),i[t]=n,n)});function j(e,t,n,i){A=n("bgcolor"),i.bgColor=v.combine(A,i.paper_bgcolor);var a,l,j,y,_,w,O,x,C,E,k,A,M=u(i.fullData,r.name,i.id),S=i.layoutOut;function p(e,t){return n(l+"."+e,t)}for(_=0;_<c.length;_++)l=c[_],o.isPlainObject(e[l])||(e[l]={}),j=e[l],a=g.newContainer(t,l),a._id=a._name=l,a._attr=i.id+"."+l,a._traceIndices=M.map(function(e){return e._expandedIndex}),O=p("visible"),(a.type="linear",f(a,S),d(j,a,p,a.type),O)&&(y="realaxis"===l,y&&p("side"),y?p("tickvals"):p("tickvals",b(t.realaxis.tickvals||s.realaxis.tickvals.dflt)),o.isTypedArray(a.tickvals)&&(a.tickvals=Array.from(a.tickvals)),w=i.font||{},O&&(C=(x=p("color"))===j.color?x:w.color,E=w.size,k=w.family),h(j,a,p,a.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!y,noExp:!0,font:{color:C,size:E,family:k}}),o.coerce2(e,t,s,l+".ticklen"),o.coerce2(e,t,s,l+".tickwidth"),o.coerce2(e,t,s,l+".tickcolor",t.color),p("ticks")||(delete t[l].ticklen,delete t[l].tickwidth,delete t[l].tickcolor),m(j,a,p,{dfltColor:x,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[l]}),p("layer")),p("hoverformat"),delete a.type,a._input=j}e.exports=function(e,t,n){p(e,t,n,{noUirevision:!0,type:r.name,attributes:s,handleDefaults:j,font:t.font,paper_bgcolor:t.paper_bgcolor,fullData:n,layoutOut:t})}},168:function(e,t,n){"use strict";var s=n(3400),o=n(31780),i=n(86968).Q;e.exports=function(e,t,n,a){var r,c,l,m,f,j=a.type,b=a.attributes,v=a.handleDefaults,p=a.partition||"x",u=t._subplots[j],d=u.length,g=d&&u[0].replace(/\d+$/,"");function h(e,t){return s.coerce(m,l,b,e,t)}for(c=0;c<d;c++)r=u[c],m=e[r]?e[r]:e[r]={},l=o.newContainer(t,r,g),a.noUirevision||h("uirevision",t.uirevision),f={},f[p]=[c/d,(c+1)/d],i(l,t,h,f),a.id=r,v(m,l,h,a)}},21776:function(e,t,n){"use strict";var o=n(26880);function s(e){var n,s,t=e.description?" "+e.description:"",o=e.keys||[];if(o.length>0){for(n=[],s=0;s<o.length;s++)n[s]="`"+o[s]+"`";t+="Finally, the template string has access to ",t=1===o.length?t+"variable "+n[0]:t+"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return t}o.FORMAT_LINK,o.DATE_FORMAT_LINK,t.Ks=function(e,t){e=e||{},s(t=t||{});var n={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(n.arrayOk=!0),n},t.Gw=function(e,t){e=e||{},s(t=t||{});var n={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(n.arrayOk=!0),n},t.ye=function(e,t){return t=t||{},(e=e||{}).newshape,s(t),{valType:"string",dflt:"",editType:e.editType||"arraydraw"}}},19352:function(e,t,n){"use strict";var o,i=n(24696),a=n(84888).KY,r=n(3400).counterRegex,s="ternary";t.name=s,o=t.attr="subplot",t.idRoot=s,t.idRegex=t.attrRegex=r(s),(t.attributes={})[o]={valType:"subplotid",dflt:"ternary",editType:"calc"},t.layoutAttributes=n(86379),t.supplyLayoutDefaults=n(38536),t.plot=function(e){for(var t=e._fullLayout,l=e.calcdata,c=t._subplots[s],r=0;r<c.length;r++){var n=c[r],d=a(l,s,n),o=t[n]._subplot;o||(o=new i({id:n,graphDiv:e,container:t._ternarylayer.node()},t),t[n]._subplot=o),o.plot(d,t,e._promises)}},t.clean=function(e,t,n,o){for(var i,r,c=o._subplots[s]||[],a=0;a<c.length;a++)r=c[a],i=o[r]._subplot,!t[r]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}},86379:function(e,t,n){"use strict";var l=n(22548),r=n(86968).u,s=n(94724),c=n(67824).overrideAll,i=n(92880).extendFlat,a={title:{text:s.title.text,font:s.title.font},color:s.color,tickmode:s.minor.tickmode,nticks:i({},s.nticks,{dflt:6,min:1}),tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,hoverformat:s.hoverformat,showline:i({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:i({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth,griddash:s.griddash,layer:s.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}},o=e.exports=c({domain:r({name:"ternary"}),bgcolor:{valType:"color",dflt:l.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");o.uirevision={valType:"any",editType:"none"},o.aaxis.uirevision=o.baxis.uirevision=o.caxis.uirevision={valType:"any",editType:"none"}},38536:function(e,t,n){"use strict";var a=n(76308),m=n(31780),s=n(3400),h=n(168),r=n(95936),c=n(42568),l=n(25404),d=n(26332),u=n(42136),o=n(86379),i=["aaxis","baxis","caxis"];function f(e,t,n,s){d=n("bgcolor"),u=n("sum"),s.bgColor=a.combine(d,s.paper_bgcolor);for(o=0;o<i.length;o++)c=e[r=i[o]]||{},(l=m.newContainer(t,r))._name=r,p(c,l,s,t);var o,r,c,l,d,u,h=t.aaxis,f=t.baxis,g=t.caxis;h.min+f.min+g.min>=u&&(h.min=0,f.min=0,g.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}function p(e,t,n,i){h=o[t._name];function a(n,o){return s.coerce(e,t,h,n,o)}a("uirevision",i.uirevision),t.type="linear";var h,m=a("color"),f=m!==h.color.dflt?m:n.font.color,p=t._name.charAt(0).toUpperCase(),g="Component "+p,v=a("title.text",g);t._hovertitle=v===g?v:p,s.coerceFont(a,"title.font",{weight:n.font.weight,style:n.font.style,variant:n.font.variant,family:n.font.family,size:s.bigFont(n.font.size),color:f}),a("min"),d(e,t,a,"linear"),c(e,t,a,"linear"),r(e,t,a,"linear",{noAutotickangles:!0}),l(e,t,a,{outerTicks:!0}),a("showticklabels")&&(s.coerceFont(a,"tickfont",{weight:n.font.weight,style:n.font.style,variant:n.font.variant,family:n.font.family,size:n.font.size,color:f}),a("tickangle"),a("tickformat")),u(e,t,a,{dfltColor:m,bgColor:n.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h}),a("hoverformat"),a("layer")}e.exports=function(e,t,n){h(e,t,n,{type:"ternary",attributes:o,handleDefaults:f,font:t.font,paper_bgcolor:t.paper_bgcolor})}},24696:function(e,t,n){"use strict";var o,c,j=n(33428),z=n(49760),f=n(24040),a=n(3400),i=a.strTranslate,h=a._,l=n(76308),u=n(43616),d=n(78344),m=n(92880).extendFlat,S=n(7316),r=n(54460),_=n(86476),y=n(93024),v=n(72760),b=v.freeMode,D=v.rectMode,p=n(81668),A=n(22676).prepSelect,k=n(22676).selectOnClick,E=n(22676).clearOutline,C=n(22676).clearSelectionsCache,g=n(33816);function O(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}e.exports=O,o=O.prototype,o.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}},o.plot=function(e,t){var o,n=this,s=t[n.id],i=t._size;n._hasClipOnAxisFalse=!1;for(o=0;o<e.length;o++)if(!1===e[o][0].trace.cliponaxis){n._hasClipOnAxisFalse=!0;break}n.updateLayers(s),n.adjustLayout(s,i),S.generalUpdatePerTraceModule(n.graphDiv,n,e,s),n.layers.plotbg.select("path").call(l.fill,s.bgcolor)},o.makeFramework=function(e){var t=this,s=t.graphDiv,o=e[t.id],n=t.clipId="clip"+t.layoutId+t.id,i=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=a.ensureSingleById(e._clips,"clipPath",n,function(e){e.append("path").attr("d","M0,0Z")}),t.clipDefRelative=a.ensureSingleById(e._clips,"clipPath",i,function(e){e.append("path").attr("d","M0,0Z")}),t.plotContainer=a.ensureSingle(t.container,"g",t.id),t.updateLayers(o),u.setClipUrl(t.layers.backplot,n,s),u.setClipUrl(t.layers.grids,n,s)},o.updateLayers=function(e){var n,o,s=this.layers,t=["draglayer","plotbg","backplot","grids"];"below traces"===e.aaxis.layer&&t.push("aaxis","aline"),"below traces"===e.baxis.layer&&t.push("baxis","bline"),"below traces"===e.caxis.layer&&t.push("caxis","cline"),t.push("frontplot"),"above traces"===e.aaxis.layer&&t.push("aaxis","aline"),"above traces"===e.baxis.layer&&t.push("baxis","bline"),"above traces"===e.caxis.layer&&t.push("caxis","cline"),n=this.plotContainer.selectAll("g.toplevel").data(t,String),o=["agrid","bgrid","cgrid"],n.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=j.select(this);s[e]=t,"frontplot"===e?t.append("g").classed("scatterlayer",!0):"backplot"===e?t.append("g").classed("maplayer",!0):"plotbg"===e?t.append("path").attr("d","M0,0Z"):"aline"===e||"bline"===e||"cline"===e?t.append("path"):"grids"===e&&o.forEach(function(e){s[e]=t.append("g").classed("grid "+e,!0)})}),n.order()},c=Math.sqrt(4/3),o.adjustLayout=function(e,t){var s,o,a,r,f,p,g,j,y,O,A,S,M,F,T,z,n=this,h=e.domain,k=(h.x[0]+h.x[1])/2,x=(h.y[0]+h.y[1])/2,N=h.x[1]-h.x[0],D=h.y[1]-h.y[0],E=N*t.w,C=D*t.h,v=e.sum,b=e.aaxis.min,w=e.baxis.min,_=e.caxis.min;E>c*C?s=(o=C)*c:o=(s=E)/c,S=N*s/E,j=D*o/C,r=t.l+t.w*k-s/2,a=t.t+t.h*(1-x)-o/2,n.x0=r,n.y0=a,n.w=s,n.h=o,n.sum=v,n.xaxis={type:"linear",range:[b+2*_-v,v-b-2*w],domain:[k-S/2,k+S/2],_id:"x"},d(n.xaxis,n.graphDiv._fullLayout),n.xaxis.setScale(),n.xaxis.isPtWithinRange=function(e){return e.a>=n.aaxis.range[0]&&e.a<=n.aaxis.range[1]&&e.b>=n.baxis.range[1]&&e.b<=n.baxis.range[0]&&e.c>=n.caxis.range[1]&&e.c<=n.caxis.range[0]},n.yaxis={type:"linear",range:[b,v-w-_],domain:[x-j/2,x+j/2],_id:"y"},d(n.yaxis,n.graphDiv._fullLayout),n.yaxis.setScale(),n.yaxis.isPtWithinRange=function(){return!0},y=n.yaxis.domain[0],g=n.aaxis=m({},e.aaxis,{range:[b,v-w-_],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[y,y+j*c],anchor:"free",position:0,_id:"y",_length:s}),d(g,n.graphDiv._fullLayout),g.setScale(),p=n.baxis=m({},e.baxis,{range:[v-b-_,w],side:"bottom",domain:n.xaxis.domain,anchor:"free",position:0,_id:"x",_length:s}),d(p,n.graphDiv._fullLayout),p.setScale(),f=n.caxis=m({},e.caxis,{range:[v-b-w,_],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[y,y+j*c],anchor:"free",position:0,_id:"y",_length:s}),d(f,n.graphDiv._fullLayout),f.setScale(),M="M"+r+","+(a+o)+"h"+s+"l-"+s/2+",-"+o+"Z",n.clipDef.select("path").attr("d",M),n.layers.plotbg.select("path").attr("d",M),z="M0,"+o+"h"+s+"l-"+s/2+",-"+o+"Z",n.clipDefRelative.select("path").attr("d",z),T=i(r,a),n.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",T),n.clipDefRelative.select("path").attr("transform",null),F=i(r-p._offset,a+o),n.layers.baxis.attr("transform",F),n.layers.bgrid.attr("transform",F),A=i(r+s/2,a)+"rotate(30)"+i(0,-g._offset),n.layers.aaxis.attr("transform",A),n.layers.agrid.attr("transform",A),O=i(r+s/2,a)+"rotate(-30)"+i(0,-f._offset),n.layers.caxis.attr("transform",O),n.layers.cgrid.attr("transform",O),n.drawAxes(!0),n.layers.aline.select("path").attr("d",g.showline?"M"+r+","+(a+o)+"l"+s/2+",-"+o:"M0,0").call(l.stroke,g.linecolor||"#000").style("stroke-width",(g.linewidth||0)+"px"),n.layers.bline.select("path").attr("d",p.showline?"M"+r+","+(a+o)+"h"+s:"M0,0").call(l.stroke,p.linecolor||"#000").style("stroke-width",(p.linewidth||0)+"px"),n.layers.cline.select("path").attr("d",f.showline?"M"+(r+s/2)+","+a+"l"+s/2+","+o:"M0,0").call(l.stroke,f.linecolor||"#000").style("stroke-width",(f.linewidth||0)+"px"),n.graphDiv._context.staticPlot||n.initInteractions(),u.setClipUrl(n.layers.frontplot,n._hasClipOnAxisFalse?null:n.clipId,n.graphDiv)},o.drawAxes=function(e){var i,l,t=this,o=t.graphDiv,c=t.id.substr(7)+"title",r=t.layers,a=t.aaxis,n=t.baxis,s=t.caxis;t.drawAx(a),t.drawAx(n),t.drawAx(s),e&&(l=Math.max(a.showticklabels?a.tickfont.size/2:0,(s.showticklabels?.75*s.tickfont.size:0)+("outside"===s.ticks?.87*s.ticklen:0)),i=(n.showticklabels?n.tickfont.size:0)+("outside"===n.ticks?n.ticklen:0)+3,r["a-title"]=p.draw(o,"a"+c,{propContainer:a,propName:t.id+".aaxis.title",placeholder:h(o,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-a.title.font.size/3-l,"text-anchor":"middle"}}),r["b-title"]=p.draw(o,"b"+c,{propContainer:n,propName:t.id+".baxis.title",placeholder:h(o,"Click to enter Component B title"),attributes:{x:t.x0-i,y:t.y0+t.h+.83*n.title.font.size+i,"text-anchor":"middle"}}),r["c-title"]=p.draw(o,"c"+c,{propContainer:s,propName:t.id+".caxis.title",placeholder:h(o,"Click to enter Component C title"),attributes:{x:t.x0+t.w+i,y:t.y0+t.h+.83*s.title.font.size+i,"text-anchor":"middle"}}))},o.drawAx=function(e){var m,t=this,u=t.graphDiv,j=e._name,s=j.charAt(0),y=e._id,d=t.layers[j],b=s+"tickLayout",g=(m=e).ticks+String(m.ticklen)+String(m.showticklabels);t[b]!==g&&(d.selectAll("."+y+"tick").remove(),t[b]=g),e.setScale();var h=r.calcTicks(e),f=r.clipEnds(e,h),i=r.makeTransTickFn(e),p=r.getTickSigns(e)[2],n=a.deg2rad(30),v=p*(e.linewidth||1)/2,o=p*e.ticklen,c=t.w,l=t.h,_="b"===s?"M0,"+v+"l"+Math.sin(n)*o+","+Math.cos(n)*o:"M"+v+",0l"+Math.cos(n)*o+","+-Math.sin(n)*o,w={a:"M0,0l"+l+",-"+c/2,b:"M0,0l-"+c/2+",-"+l,c:"M0,0l-"+l+","+c/2}[s];r.drawTicks(u,e,{vals:"inside"===e.ticks?f:h,layer:d,path:_,transFn:i,crisp:!1}),r.drawGrid(u,e,{vals:f,layer:t.layers[s+"grid"],path:w,transFn:i,crisp:!1}),r.drawLabels(u,e,{vals:h,layer:d,transFn:i,labelFns:r.makeLabelFns(e,0,30)})};var s=g.MINZOOM/2+.87,M="m-0.87,.5h"+s+"v3h-"+(s+5.2)+"l"+(s/2+2.6)+",-"+(.87*s+4.5)+"l2.6,1.5l-"+s/2+","+.87*s+"Z",F="m0.87,.5h-"+s+"v3h"+(s+5.2)+"l-"+(s/2+2.6)+",-"+(.87*s+4.5)+"l-2.6,1.5l"+s/2+","+.87*s+"Z",T="m0,1l"+s/2+","+.87*s+"l2.6,-1.5l-"+(s/2+2.6)+",-"+(.87*s+4.5)+"l-"+(s/2+2.6)+","+(.87*s+4.5)+"l2.6,1.5l"+s/2+",-"+.87*s+"Z",w=!0;function x(e){j.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}o.clearOutline=function(){C(this.dragOptions),E(this.dragOptions.gd)},o.initInteractions=function(){var n,s,o,r,p,v,j,O,C,E,S,L,e=this,m=e.layers.plotbg.select("path").node(),t=e.graphDiv,N=t._fullLayout._zoomlayer;function d(t){var n={};return n[e.id+".aaxis.min"]=t.a,n[e.id+".baxis.min"]=t.b,n[e.id+".caxis.min"]=t.c,n}function R(n,s){var o=t._fullLayout.clickmode;x(t),2===n&&(t.emit("plotly_doubleclick",null),f.call("_guiRelayout",t,d({a:0,b:0,c:0}))),o.indexOf("select")>-1&&1===n&&k(s,t,[e.xaxis],[e.yaxis],e.id,e.dragOptions),o.indexOf("event")>-1&&y.click(t,s,e.id)}function P(t,n){return 1-n/e.h}function H(t,n){return 1-(t+(e.h-n)/Math.sqrt(3))/e.w}function I(t,n){return(t-(e.h-n)/Math.sqrt(3))/e.w}function B(i,a){var y=r+i*S,f=o+a*L,m=Math.max(0,Math.min(1,P(0,o),P(0,f))),x=Math.max(0,Math.min(1,H(r,o),H(y,f))),b=Math.max(0,Math.min(1,I(r,o),I(y,f))),u=(m/2+b)*e.w,h=(1-m/2-x)*e.w,_=(u+h)/2,w=h-u,l=(1-m)*e.h,k=l-w/c;w<g.MINZOOM?(n=s,v.attr("d",p),j.attr("d","M0,0Z")):(n={a:s.a+m*O,b:s.b+x*O,c:s.c+b*O},v.attr("d",p+"M"+u+","+l+"H"+h+"L"+_+","+k+"L"+u+","+l+"Z"),j.attr("d","M"+r+","+o+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+u+","+l+M+"M"+h+","+l+F+"M"+_+","+k+T)),C||(v.transition().style("fill",E>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),j.transition().style("opacity",1).duration(200),C=!0),t.emit("plotly_relayouting",d(n))}function V(){x(t),n!==s&&(f.call("_guiRelayout",t,d(n)),w&&t.data&&t._context.showTips&&(a.notifier(h(t,"Double-click to zoom back out"),"long"),w=!1))}function $(o,r){var m,f,h=o/e.xaxis._m,l=r/e.yaxis._m,c=[(n={a:s.a-l,b:s.b+(h+l)/2,c:s.c-(h-l)/2}).a,n.b,n.c].sort(a.sorterAsc),p=c.indexOf(n.a),g=c.indexOf(n.b),v=c.indexOf(n.c);c[0]<0&&(c[1]+c[0]/2<0?(c[2]+=c[0]+c[1],c[0]=c[1]=0):(c[2]+=c[0]/2,c[1]+=c[0]/2,c[0]=0),n={a:c[p],b:c[g],c:c[v]},r=(s.a-n.a)*e.yaxis._m,o=(s.c-n.c-s.b+n.b)*e.xaxis._m),m=i(e.x0+o,e.y0+r),e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",m),f=i(-o,-r),e.clipDefRelative.select("path").attr("transform",f),e.aaxis.range=[n.a,e.sum-n.b-n.c],e.baxis.range=[e.sum-n.a-n.c,n.b],e.caxis.range=[e.sum-n.a-n.b,n.c],e.drawAxes(!1),e._hasClipOnAxisFalse&&e.plotContainer.select(".scatterlayer").selectAll(".trace").call(u.hideOutsideRangePoints,e),t.emit("plotly_relayouting",d(n))}function W(){f.call("_guiRelayout",t,d(n))}this.dragOptions={element:m,gd:t,plotinfo:{id:e.id,domain:t._fullLayout[e.id].domain,xaxis:e.xaxis,yaxis:e.yaxis},subplot:e.id,prepFn:function(c,d,u){e.dragOptions.xaxes=[e.xaxis],e.dragOptions.yaxes=[e.yaxis],S=t._fullLayout._invScaleX,L=t._fullLayout._invScaleY;var h=e.dragOptions.dragmode=t._fullLayout.dragmode;b(h)?e.dragOptions.minDrag=1:e.dragOptions.minDrag=void 0,"zoom"===h?(e.dragOptions.moveFn=B,e.dragOptions.clickFn=R,e.dragOptions.doneFn=V,function(c,d,u){h=m.getBoundingClientRect(),r=d-h.left,o=u-h.top,t._fullLayout._calcInverseTransform(t);var h,g=t._fullLayout._invTransform,f=a.apply3DTransform(g)(r,o);r=f[0],o=f[1],s={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},n=s,O=e.aaxis.range[1]-s.a,E=z(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance(),p="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z",C=!1,v=N.append("path").attr("class","zoombox").attr("transform",i(e.x0,e.y0)).style({fill:E>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",p),j=N.append("path").attr("class","zoombox-corners").attr("transform",i(e.x0,e.y0)).style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),e.clearOutline(t)}(0,d,u)):"pan"===h?(e.dragOptions.moveFn=$,e.dragOptions.clickFn=R,e.dragOptions.doneFn=W,s={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},n=s,e.clearOutline(t)):(D(h)||b(h))&&A(c,d,u,e.dragOptions,h)}},m.onmousemove=function(n){y.hover(t,n,e.id),t._fullLayout._lasthover=m,t._fullLayout._hoversubplot=e.id},m.onmouseout=function(e){t._dragging||_.unhover(t,e)},_.init(this.dragOptions)}},24040:function(e,t,n){"use strict";var s=n(24248),h=n(16628),i=n(52416),y=n(63620),j=n(52200).addStyleRule,c=n(92880),b=n(45464),v=n(64859),m=c.extendFlat,o=c.extendDeepAll;function _(e){var o,i,c,u,f,p,g,n=e.name,h=e.categories,r=e.meta;if(t.modules[n])s.log("Type "+n+" already registered");else{t.subplotsRegistry[e.basePlotModule.name]||function(e){var o,n=e.name;if(t.subplotsRegistry[n])s.log("Plot type "+n+" already registered.");else for(o in d(e),t.subplotsRegistry[n]=e,t.componentsRegistry)a(o,e.name)}(e.basePlotModule);for(c={},o=0;o<h.length;o++)c[h[o]]=!0,t.allCategories[h[o]]=!0;for(g in t.modules[n]={_module:e,categories:c},r&&Object.keys(r).length&&(t.modules[n].meta=r),t.allTypes.push(n),t.componentsRegistry)l(g,n);if(e.layoutAttributes&&m(t.traceLayoutAttributes,e.layoutAttributes),u=e.basePlotModule,i=u.name,"mapbox"===i){f=u.constants.styleRules;for(p in f)j(".js-plotly-plot .plotly .mapboxgl-"+p,f[p])}"geo"!==i&&"mapbox"!==i||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function f(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var s,c,u,n=e.name;for(s in t.componentsRegistry[n]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&i(t.layoutArrayContainers,n),d(e)),t.modules)l(n,s);for(c in t.subplotsRegistry)a(n,c);for(u in t.transformsRegistry)r(n,u);e.schema&&e.schema.layout&&o(v,e.schema.layout)}function p(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var a,n="Transform module "+e.name,o="function"==typeof e.transform,i="function"==typeof e.calcTransform;if(!o&&!i)throw new Error(n+" is missing a *transform* or *calcTransform* method.");for(a in o&&i&&s.log([n+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),y(e.attributes)||s.log(n+" registered without an *attributes* object."),"function"!=typeof e.supplyDefaults&&s.log(n+" registered without a *supplyDefaults* method."),t.transformsRegistry[e.name]=e,t.componentsRegistry)r(a,e.name)}function g(e){var n,o=e.name,c=o.split("-")[0],r=e.dictionary,i=e.format,l=r&&Object.keys(r).length,d=i&&Object.keys(i).length,a=t.localeRegistry,s=a[o];(s||(a[o]=s={}),c!==o)&&(n=a[c],n||(a[c]=n={}),l&&n.dictionary===s.dictionary&&(n.dictionary=r),d&&n.format===s.format&&(n.format=i)),l&&(s.dictionary=r),d&&(s.format=i)}function d(e){if(e.layoutAttributes){var n,s=e.layoutAttributes._arrayAttrRegexps;if(s)for(n=0;n<s.length;n++)i(t.layoutArrayRegexes,s[n])}}function l(e,n){var i,s=t.componentsRegistry[e].schema;s&&s.traces&&(i=s.traces[n],i&&o(t.modules[n]._module.attributes,i))}function r(e,n){var i,s=t.componentsRegistry[e].schema;s&&s.transforms&&(i=s.transforms[n],i&&o(t.transformsRegistry[n].attributes,i))}function a(e,n){if(s=t.componentsRegistry[e].schema,s&&s.subplots){var s,r,i=t.subplotsRegistry[n],c=i.layoutAttributes,a="subplot"===i.attr?i.name:i.attr;Array.isArray(a)&&(a=a[0]),r=s.subplots[a],c&&r&&o(c,r)}}function u(e){return"object"==typeof e&&(e=e.type),e}t.modules={},t.allCategories={},t.allTypes=[],t.subplotsRegistry={},t.transformsRegistry={},t.componentsRegistry={},t.layoutArrayContainers=[],t.layoutArrayRegexes=[],t.traceLayoutAttributes={},t.localeRegistry={},t.apiMethodRegistry={},t.collectableSubplotTypes=null,t.register=function(e){if(t.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var n,o,s=0;s<e.length;s++){if(n=e[s],!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":_(n);break;case"transform":p(n);break;case"component":f(n);break;case"locale":g(n);break;case"apiMethod":o=n.name,t.apiMethodRegistry[o]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},t.getModule=function(e){var n=t.modules[u(e)];return!!n&&n._module},t.traceIs=function(e,n){if("various"===(e=u(e)))return!1;var o=t.modules[e];return o||(e&&s.log("Unrecognized trace type "+e+"."),o=t.modules[b.type.dflt]),!!o.categories[n]},t.getTransformIndices=function(e,t){for(var s=[],o=e.transforms||[],n=0;n<o.length;n++)o[n].type===t&&s.push(n);return s},t.hasTransform=function(e,t){for(var s=e.transforms||[],n=0;n<s.length;n++)if(s[n].type===t)return!0;return!1},t.getComponentMethod=function(e,n){var s=t.componentsRegistry[e];return s&&s[n]||h},t.call=function(){var e=arguments[0],n=[].slice.call(arguments,1);return t.apiMethodRegistry[e].apply(null,n)}},91536:function(e,t,n){"use strict";var r=n(24040),o=n(3400),s=o.extendFlat,i=o.extendDeep;function a(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}e.exports=function(e,t){var n,o,l,d,u,h,m,f,g,j=e.data,b=e.layout,p=i([],j),c=i({},b,a(t.tileClass)),v=e._context||{};if(t.width&&(c.width=t.width),t.height&&(c.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){c.annotations=[],m=Object.keys(c);for(n=0;n<m.length;n++)g=m[n],["xaxis","yaxis","zaxis"].indexOf(g.slice(0,5))>-1&&(c[m[n]].title={text:""});for(n=0;n<p.length;n++)l=p[n],l.showscale=!1,l.marker&&(l.marker.showscale=!1),r.traceIs(l,"pie-like")&&(l.textposition="none")}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)c.annotations.push(t.annotations[n]);if(h=Object.keys(c).filter(function(e){return e.match(/^scene\d*$/)}),h.length){d={};for("thumbnail"===t.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<h.length;n++)o=c[h[n]],o.xaxis||(o.xaxis={}),o.yaxis||(o.yaxis={}),o.zaxis||(o.zaxis={}),s(o.xaxis,d),s(o.yaxis,d),s(o.zaxis,d),o._scene=null}return u=document.createElement("div"),t.tileClass&&(u.className=t.tileClass),f={gd:u,td:u,layout:c,data:p,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:v.mapboxAccessToken}},"transparent"!==t.setBackground&&(f.config.setBackground=t.setBackground||"opaque"),f.gd.defaultLayout=a(t.tileClass),f}},39792:function(e,t,n){"use strict";var s=n(3400),o=n(67024),i=n(48616),a=n(81792);e.exports=function(e,t){var n;return s.isPlainObject(e)||(n=s.getGraphDiv(e)),(t=t||{}).format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(r,c){n&&n._snapshotInProgress&&c(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==t.format&&c(new Error(a.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var d=o(e,t),l=t.filename||e.fn||"newplot";l+="."+t.format.replace("-","."),d.then(function(e){return n&&(n._snapshotInProgress=!1),i(e,l,t.format)}).then(function(e){r(e)}).catch(function(e){n&&(n._snapshotInProgress=!1),c(e)})})}},48616:function(e,t,n){"use strict";var o=n(3400),s=n(81792);e.exports=function(e,t,n){var i=document.createElement("a"),a="download"in i;return new Promise(function(r,c){if(o.isIE())return l=s.createBlob(e,"svg"),window.navigator.msSaveBlob(l,t),l=null,r(t);if(a)return l=s.createBlob(e,n),d=s.createObjectURL(l),i.href=d,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),s.revokeObjectURL(d),l=null,r(t);if(o.isSafari()){var l,d,u="svg"===n?",":";base64,";return s.octetStream(u+encodeURIComponent(e)),r(t)}c(new Error("download error"))})}},81792:function(e,t,n){"use strict";var s,o=n(24040);t.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},t.getRedrawFunc=function(e){return function(){o.getComponentMethod("colorbar","draw")(e)}},t.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},t.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)},s=window.URL||window.webkitURL,t.createObjectURL=function(e){return s.createObjectURL(e)},t.revokeObjectURL=function(e){return s.revokeObjectURL(e)},t.createBlob=function(e,t){if("svg"===t)return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if("full-json"===t)return new window.Blob([e],{type:"application/json;charset=utf-8"});var n=function(e){for(var n=e.length,s=new ArrayBuffer(n),o=new Uint8Array(s),t=0;t<n;t++)o[t]=e.charCodeAt(t);return s}(window.atob(e));return new window.Blob([n],{type:"image/"+t})},t.octetStream=function(e){document.location.href="data:application/octet-stream"+e},t.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,t.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(e,t,n){"use strict";var s=n(81792),o={getDelay:s.getDelay,getRedrawFunc:s.getRedrawFunc,clone:n(91536),toSVG:n(37164),svgToImg:n(63268),toImage:n(61808),downloadImage:n(39792)};e.exports=o},63268:function(e,t,n){"use strict";var o=n(3400),i=n(61252).EventEmitter,s=n(81792);e.exports=function(e){var t=e.emitter||new i,n=new Promise(function(i,a){var y=window.Image,f=e.svg,d=e.format||"png";if(o.isIE()&&"svg"!==d)return h=new Error(s.MSG_IE_BAD_FORMAT),a(h),e.promise?n:t.emit("error",h);var c,u,h,r=e.canvas,m=e.scale||1,b=e.width||300,v=e.height||150,g=m*b,p=m*v,j=r.getContext("2d",{willReadFrequently:!0}),l=new y;"svg"===d||o.isSafari()?c=s.encodeSVG(f):(u=s.createBlob(f,"svg"),c=s.createObjectURL(u)),r.width=g,r.height=p,l.onload=function(){switch(u=null,s.revokeObjectURL(c),"svg"!==d&&j.drawImage(l,0,0,g,p),d){case"jpeg":n=r.toDataURL("image/jpeg");break;case"png":n=r.toDataURL("image/png");break;case"webp":n=r.toDataURL("image/webp");break;case"svg":n=c;break;default:var n,o="Image format is not jpeg, png, svg or webp.";if(a(new Error(o)),!e.promise)return t.emit("error",o)}i(n),e.promise||t.emit("success",n)},l.onerror=function(n){if(u=null,s.revokeObjectURL(c),a(n),!e.promise)return t.emit("error",n)},l.src=c});return e.promise?n:t}},61808:function(e,t,n){"use strict";var o=n(61252).EventEmitter,i=n(24040),a=n(3400),s=n(81792),r=n(91536),c=n(37164),l=n(63268);e.exports=function(e,t){var h,d=new o,u=r(e,{format:"png"}),n=u.gd;return n.style.position="absolute",n.style.left="-5000px",document.body.appendChild(n),h=s.getRedrawFunc(n),i.call("_doPlot",n,u.data,u.layout,u.config).then(h).then(function(){var e=s.getDelay(n._fullLayout);setTimeout(function(){var s=c(n),e=document.createElement("canvas");e.id=a.randstr(),(d=l({format:t.format,width:n._fullLayout.width,height:n._fullLayout.height,canvas:e,emitter:d,svg:s})).clean=function(){n&&document.body.removeChild(n)}},e)}).catch(function(e){d.emit("error",e)}),d}},37164:function(e,t,n){"use strict";var a=n(33428),r=n(3400),c=n(43616),l=n(76308),o=n(9616),i=/"/g,s="TOBESTRIPPED",d=new RegExp('("'+s+")|("+s+'")',"g");e.exports=function(e,t,n){var h,m,p,v,b,j,_,f=e._fullLayout,u=f._paper,w=f._toppaper,g=f.width,y=f.height;u.insert("rect",":first-child").call(c.setRect,0,0,g,y).call(l.fill,f.paper_bgcolor),v=f._basePlotModules||[];for(m=0;m<v.length;m++)b=v[m],b.toSVG&&b.toSVG(e);if(w){_=w.node().childNodes,p=Array.prototype.slice.call(_);for(m=0;m<p.length;m++)j=p[m],j.childNodes.length&&u.node().appendChild(j)}return f._draggers&&f._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t,n,o,r,e=a.select(this);"hidden"!==this.style.visibility&&"none"!==this.style.display?(e.style({visibility:null,display:null}),t=this.style.fontFamily,t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(i,s)),n=this.style.fontWeight,n&&"normal"===n&&e.style("font-weight",void 0),o=this.style.fontStyle,o&&"normal"===o&&e.style("font-style",void 0),r=this.style.fontVariant,r&&"normal"===r&&e.style("font-variant",void 0)):e.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var e,n=a.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&n.style("fill",t.replace(i,s)),e=this.style.stroke,e&&-1!==e.indexOf("url(")&&n.style("stroke",e.replace(i,s))}),"pdf"!==t&&"eps"!==t||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(o.xmlns,"xmlns",o.svg),u.node().setAttributeNS(o.xmlns,"xmlns:xlink",o.xlink),"svg"===t&&n&&(u.attr("width",n*g),u.attr("height",n*y),u.attr("viewBox","0 0 "+g+" "+y)),h=(new window.XMLSerializer).serializeToString(u.node()),h=(h=(h=function(e){var t=a.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()});return t.remove(),n}(h)).replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"&amp;")).replace(d,"'"),r.isIE()&&(h=(h=(h=h.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),h}},84664:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){for(var n,i,o=0;o<e.length;o++)e[o].i=o;s.mergeArray(t.text,e,"tx"),s.mergeArray(t.hovertext,e,"htx"),n=t.marker,n&&(s.mergeArray(n.opacity,e,"mo",!0),s.mergeArray(n.color,e,"mc"),i=n.line,i&&(s.mergeArray(i.color,e,"mlc"),s.mergeArrayCastPositive(i.width,e,"mlw")))}},20832:function(e,t,n){"use strict";var s=n(52904),a=n(29736).axisHoverFormat,h=n(21776).Ks,u=n(21776).Gw,r=n(49084),l=n(25376),c=n(78048),d=n(98192).c,o=n(92880).extendFlat,i=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),m=o({},s.marker.line.width,{dflt:0}),f=o({width:m,editType:"calc"},r("marker.line")),p=o({line:f,editType:"calc"},r("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:d,cornerradius:{valType:"any",editType:"calc"}});e.exports={x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:s.text,texttemplate:u({editType:"plot"},{keys:c.eventDataKeys}),hovertext:s.hovertext,hovertemplate:h({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},i,{}),insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},s.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:{marker:{opacity:s.selected.marker.opacity,color:s.selected.marker.color,editType:"style"},textfont:s.selected.textfont,editType:"style"},unselected:{marker:{opacity:s.unselected.marker.opacity,color:s.unselected.marker.color,editType:"style"},textfont:s.unselected.textfont,editType:"style"},zorder:s.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(e,t,n){"use strict";var s=n(54460),o=n(1220),i=n(94288).hasColorscale,a=n(47128),r=n(84664),c=n(4500);e.exports=function(e,t){var d,u,h,m,f,v,p=s.getFromId(e,t.xaxis||"x"),g=s.getFromId(e,t.yaxis||"y"),b={msUTC:!!t.base||0===t.base};"h"===t.orientation?(h=p.makeCalcdata(t,"x",b),d=g.makeCalcdata(t,"y"),u=o(t,g,"y",d),v=!!t.yperiodalignment,m="y"):(h=g.makeCalcdata(t,"y",b),d=p.makeCalcdata(t,"x"),u=o(t,p,"x",d),v=!!t.xperiodalignment,m="x"),f=u.vals;for(var j=Math.min(f.length,h.length),l=new Array(j),n=0;n<j;n++)l[n]={p:f[n],s:h[n]},v&&(l[n].orig_p=d[n],l[n][m+"End"]=u.ends[n],l[n][m+"Start"]=u.starts[n]),t.ids&&(l[n].id=String(t.ids[n]));return i(t,"marker")&&a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),i(t,"marker.line")&&a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),r(l,t),c(l,t),l}},78048:function(e){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(e,t,n){"use strict";var s=n(38248),o=n(3400).isArrayOrTypedArray,i=n(39032).BADNUM,j=n(24040),r=n(54460),b=n(71888).getAxisGroup,c=n(72592);function d(e,t,n,d,j){if(d.length){var y,_,w,O;switch(function(e,t){for(c=0;c<t.length;c++){var n,a,c,d,i=t[c],r=i[0].trace,l="funnel"===r.type?r._base:r.base,u="h"===r.orientation?r.xcalendar:r.ycalendar,h="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(o(l)){for(n=0;n<Math.min(l.length,i.length);n++)a=h(l[n],0,u),s(a)?(i[n].b=+a,i[n].hasB=1):i[n].b=0;for(;n<i.length;n++)i[n].b=0}else{a=h(l,0,u),d=s(a);for(a=d?a:0,n=0;n<i.length;n++)i[n].b=a,d&&(i[n].hasB=1)}}}(n,d),j.mode){case"overlay":u(t,n,d,j);break;case"group":for(_=[],y=[],w=0;w<d.length;w++)void 0===(O=d[w])[0].trace.offset?y.push(O):_.push(O);y.length&&function(e,t,n,s,o){var a=new c(s,{posAxis:t,sepNegVal:!1,overlapNoMerge:!o.norm});(function(e,t,n,s){for(var _=e._fullLayout,C=n.positions,x=n.distinctPositions,j=n.minDiff,r=n.traces,u=r.length,h=C.length!==x.length,c=j*(1-s.gap),w=b(_,t._id)+r[0][0].trace.orientation,E=_._alignmentOpts[w]||{},l=0;l<u;l++){var d,g=r[l],v=g[0].trace,O=E[v.alignmentgroup]||{},a=Object.keys(O.offsetGroups||{}).length,i=(d=a?c/a:h?c/u:c)*(1-(s.groupgap||0)),y=a?((2*v._offsetIndex+1-a)*d-i)/2:h?((2*l+1-u)*d-i)/2:-i/2,o=g[0].t;o.barwidth=i,o.poffset=y,o.bargroupwidth=c,o.bardelta=j}n.binWidth=r[0][0].t.barwidth/100,m(n),f(t,n),p(t,n,h)})(e,t,a,o),function(e,t){for(var n,s,o,a,l,d=e.traces,r=0;r<d.length;r++)if(s=d[r],void 0===s[0].trace.base)for(l=new c([s],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),o=0;o<s.length;o++)n=s[o],n.p!==i&&(a=l.put(n.p,n.b+n.s),a&&(n.b=a))}(a,t),o.norm?(v(a),l(n,a,o)):g(n,a)}(e,t,n,y,j),_.length&&u(t,n,_,j);break;case"stack":case"relative":for(_=[],y=[],w=0;w<d.length;w++)void 0===(O=d[w])[0].trace.base?y.push(O):_.push(O);!function(e){if(!(e.length<2)){var t,n,o,i,a,r;for(t=0;t<e.length&&void 0===(n=(o=e[t][0].trace).marker?o.marker.cornerradius:void 0);t++);if(void 0!==n)for(a=s(n)?+n:+n.slice(0,-1),r=s(n)?"px":"%",t=0;t<e.length;t++)(i=e[t][0].t).cornerradiusvalue=a,i.cornerradiusform=r}}(y),y.length&&function(e,t,n,s,o){u=new c(s,{posAxis:t,sepNegVal:"relative"===o.mode,overlapNoMerge:!(o.norm||"stack"===o.mode||"relative"===o.mode)}),h(t,u,o),function(e,t,n){var s,o,c,l,u,h,m,f,p,g,v=a(e),d=t.traces;for(o=0;o<d.length;o++)if("funnel"===(m=(l=d[o])[0].trace).type)for(c=0;c<l.length;c++)(s=l[c]).s!==i&&t.put(s.p,-.5*s.s);for(o=0;o<d.length;o++){g="funnel"===(m=(l=d[o])[0].trace).type,u=[];for(c=0;c<l.length;c++)(s=l[c]).s!==i&&(f=g?s.s:s.s+s.b,h=t.put(s.p,f),p=h+f,s.b=h,s[v]=p,n.norm||(u.push(p),s.hasB&&u.push(h)));n.norm||(m._extremes[e._id]=r.findExtremes(e,u,{tozero:!0,padded:!0}))}}(n,u,o);for(m=0;m<s.length;m++)for(var d,u,m,p=s[m],f=0;f<p.length;f++)d=p[f],d.s!==i&&d.b+d.s===u.get(d.p,d.s)&&(d._outmost=!0);o.norm&&l(n,u,o)}(0,t,n,y,j),_.length&&u(t,n,_,j)}!function(e){var t,n,o,i,a,r,c;for(n=0;n<e.length;n++)o=(a=e[n])[0].trace,void 0===(i=a[0].t).cornerradiusvalue&&void 0!==(t=o.marker?o.marker.cornerradius:void 0)&&(r=s(t)?+t:+t.slice(0,-1),c=s(t)?"px":"%",i.cornerradiusvalue=r,i.cornerradiusform=c)}(d),function(e,t){var i,r,c,y=a(t),l={},f=1/0,b=-1/0;for(r=0;r<e.length;r++)for(c=e[r],i=0;i<c.length;i++)g=c[i].p,s(g)&&(f=Math.min(f,g),b=Math.max(b,g));var n,d,h,m,g,j,w,C=1e4/(b-f),E=l.round=function(e){return String(Math.round(C*(e-f)))},p={},v={},_=e.some(function(e){var t=e[0].trace;return"marker"in t&&t.marker.cornerradius});for(r=0;r<e.length;r++){(c=e[r])[0].t.extents=l,h=c[0].t.poffset,w=o(h);for(i=0;i<c.length;i++)if(n=c[i],m=n[y]-n.w/2,s(m)&&(j=n[y]+n.w/2,d=E(n.p),l[d]?l[d]=[Math.min(m,l[d][0]),Math.max(j,l[d][1])]:l[d]=[m,j]),n.p0=n.p+(w?h[i]:h),n.p1=n.p0+n.w,n.s0=n.b,n.s1=n.s0+n.s,_){var O=Math.min(n.s0,n.s1)||0,x=Math.max(n.s0,n.s1)||0,u=n[y];p[u]=u in p?Math.min(p[u],O):O,v[u]=u in v?Math.max(v[u],x):x}}_&&function(e,t,n,s){for(var o,i,c,l,d=a(s),r=0;r<e.length;r++)for(c=e[r],o=0;o<c.length;o++)i=c[o],l=i[d],i._sMin=t[l],i._sMax=n[l]}(e,p,v,t)}(d,t)}}function u(e,t,n,s){for(o=0;o<n.length;o++){var o,a=n[o],i=new c([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!s.norm});h(e,i,s),s.norm?(v(i),l(t,i,s)):g(t,i)}}function h(e,t,n){for(var s,c=t.minDiff,o=t.traces,a=c*(1-n.gap),r=a*(1-(n.groupgap||0)),l=-r/2,i=0;i<o.length;i++)s=o[i][0].t,s.barwidth=r,s.poffset=l,s.bargroupwidth=a,s.bardelta=c;t.binWidth=o[0][0].t.barwidth/100,m(t),f(e,t),p(e,t)}function m(e){f=e.traces;for(m=0;m<f.length;m++){var t,n,i,c,d,m,f,r=f[m],p=r[0],u=p.trace,a=p.t,l=u._offset||u.offset,h=a.poffset;if(o(l)){for(n=Array.prototype.slice.call(l,0,r.length),t=0;t<n.length;t++)s(n[t])||(n[t]=h);for(t=n.length;t<r.length;t++)n.push(h);a.poffset=n}else void 0!==l&&(a.poffset=l);if(c=u._width||u.width,d=a.barwidth,o(c)){{i=Array.prototype.slice.call(c,0,r.length);for(t=0;t<i.length;t++)s(i[t])||(i[t]=d);for(t=i.length;t<r.length;t++)i.push(d);if(a.barwidth=i,void 0===l){for(n=[],t=0;t<r.length;t++)n.push(h+(d-i[t])/2);a.poffset=n}}}else void 0!==c&&(a.barwidth=c,void 0===l&&(a.poffset=h+(d-c)/2))}}function f(e,t){for(var m=t.traces,i=a(e),r=0;r<m.length;r++)for(var n,u,h,c=m[r],f=c[0].t,l=f.poffset,g=o(l),d=f.barwidth,p=o(d),s=0;s<c.length;s++)n=c[s],h=n.w=p?d[s]:d,void 0===n.p&&(n.p=n[i],n["orig_"+i]=n[i]),u=(g?l[s]:l)+h/2,n[i]=n.p+u}function p(e,t,n){g=t.traces,h=t.minDiff/2,r.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(a=0;a<g.length;a++){var s,c,l,d,i=g[a],b=i[0],f=b.trace,p=[];for(s=0;s<i.length;s++)l=(c=i[s]).p-h,d=c.p+h,p.push(l,d);if(f.width||f.offset){var a,h,g,j,y,v=b.t,u=v.poffset,m=v.barwidth,_=o(u),w=o(m);for(s=0;s<i.length;s++)c=i[s],j=_?u[s]:u,y=w?m[s]:m,d=(l=c.p+j)+y,p.push(l,d)}f._extremes[e._id]=r.findExtremes(e,p,{padded:!1})}}function g(e,t){for(var u=t.traces,p=a(e),o=0;o<u.length;o++){for(var i=u[o],c=i[0].trace,m="scatter"===c.type,g="v"===c.orientation,s=[],h=!1,l=0;l<i.length;l++){var n=i[l],f=m?0:n.b,d=m?g?n.y:n.x:f+n.s;n[p]=d,s.push(d),n.hasB&&s.push(f),n.hasB&&n.b||(h=!0)}c._extremes[e._id]=r.findExtremes(e,s,{tozero:h,padded:!0})}}function v(e){for(var t,n,o,a=e.traces,s=0;s<a.length;s++)for(o=a[s],n=0;n<o.length;n++)t=o[n],t.s!==i&&e.put(t.p,t.b+t.s)}function l(e,t,n){var o,l,d,u,f,b=t.traces,O=a(e),h="fraction"===n.norm?1:100,_=h/1e9,m=e.l2c(e.c2l(0)),w="stack"===n.mode?h:m;function y(t){return s(e.c2l(t))&&(t<m-_||t>w+_||!s(m))}for(d=0;d<b.length;d++){for(var g=b[d],x=g[0].trace,v=[],j=!1,c=!1,p=0;p<g.length;p++)o=g[p],o.s!==i&&(f=Math.abs(h/t.get(o.p,o.s)),o.b*=f,o.s*=f,l=o.b,u=l+o.s,o[O]=u,v.push(u),c=c||y(u),o.hasB&&(v.push(l),c=c||y(l)),o.hasB&&o.b||(j=!0));x._extremes[e._id]=r.findExtremes(e,v,{tozero:j,padded:c})}}function a(e){return e._id.charAt(0)}e.exports={crossTraceCalc:function(e,t){for(var n,s,o,l,a=t.xaxis,r=t.yaxis,c=e._fullLayout,h=e._fullData,m=e.calcdata,f=[],u=[],i=0;i<h.length;i++)if(o=h[i],!0===o.visible&&j.traceIs(o,"bar")&&o.xaxis===a._id&&o.yaxis===r._id&&("h"===o.orientation?f.push(m[i]):u.push(m[i]),o._computePh))for(s=e.calcdata[i],n=0;n<s.length;n++)"function"==typeof s[n].ph0&&(s[n].ph0=s[n].ph0()),"function"==typeof s[n].ph1&&(s[n].ph1=s[n].ph1());l={xCat:"category"===a.type||"multicategory"===a.type,yCat:"category"===r.type||"multicategory"===r.type,mode:c.barmode,norm:c.barnorm,gap:c.bargap,groupgap:c.bargroupgap},d(e,a,r,u,l),d(e,r,a,f,l)},setGroupPositions:d}},31508:function(e,t,n){"use strict";var i=n(38248),s=n(3400),a=n(76308),h=n(24040),m=n(43980),f=n(31147),d=n(55592),u=n(20011),l=n(20832),o=s.coerceFont;function r(e){if(i(e)){if((e=+e)>=0)return e}else if("string"==typeof e&&"%"===(e=e.trim()).slice(-1)&&i(e.slice(0,-1))&&(e=+e.slice(0,-1))>=0)return e+"%"}function c(e,t,n,i,a,r){var c,_=!1!==(r=r||{}).moduleHasSelected,y=!1!==r.moduleHasUnselected,j=!1!==r.moduleHasConstrain,b=!1!==r.moduleHasCliponaxis,v=!1!==r.moduleHasTextangle,g=!1!==r.moduleHasInsideanchor,p=!!r.hasPathbar,f=Array.isArray(a)||"auto"===a,m=f||"inside"===a,h=f||"outside"===a;if(m||h){var l=o(i,"textfont",n.font),u=s.extendFlat({},l),d=!e.textfont||!e.textfont.color;(d&&delete u.color,o(i,"insidetextfont",u),p)&&(c=s.extendFlat({},l),d&&delete c.color,o(i,"pathbar.textfont",c)),h&&o(i,"outsidetextfont",l),_&&i("selected.textfont.color"),y&&i("unselected.textfont.color"),j&&i("constraintext"),b&&i("cliponaxis"),v&&i("textangle"),i("texttemplate")}m&&g&&i("insidetextanchor")}e.exports={supplyDefaults:function(e,t,n,o){function i(n,o){return s.coerce(e,t,l,n,o)}if(m(e,t,o,i)){f(e,t,o,i),i("xhoverformat"),i("yhoverformat"),i("zorder"),i("orientation",t.x&&!t.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),r=i("textposition"),c(e,0,o,i,r,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(e,t,i,n,o);var r,u=(t.marker.line||{}).color,p=h.getComponentMethod("errorbars","supplyDefaults");p(e,t,u||a.defaultLine,{axis:"y"}),p(e,t,u||a.defaultLine,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(t,i)}else t.visible=!1},crossTraceDefaults:function(e,t){function a(e,t){return s.coerce(n._input,n,l,e,t)}for(var n,i,c,o=0;o<e.length;o++)"bar"===(n=e[o]).type&&(i=n._input,c=a("marker.cornerradius",t.barcornerradius),n.marker&&(n.marker.cornerradius=r(c)),"group"===t.barmode&&u(i,n,t,a))},handleText:c,validateCornerradius:r}},52160:function(e){"use strict";e.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},60444:function(e,t,n){"use strict";var o=n(38248),i=n(49760),s=n(3400).isArrayOrTypedArray;t.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},t.coerceNumber=function(e,t,n){if(o(t)){t=+t;var s=e.min,i=e.max;if(!(void 0!==s&&t<s||void 0!==i&&t>i))return t}return void 0!==n?n:e.dflt},t.coerceColor=function(e,t,n){return i(t).isValid()?t:void 0!==n?n:e.dflt},t.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},t.getValue=function(e,t){var n;return s(e)?t<e.length&&(n=e[t]):n=e,n},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:s(e.marker.line.width)?0:e.marker.line.width}},63400:function(e,t,n){"use strict";var s=n(93024),u=n(24040),a=n(76308),c=n(3400).fillText,l=n(60444).getLineWidth,o=n(54460).hoverLabelText,d=n(39032).BADNUM;function i(e,t,n,i,a){var r,l,u,h,f,j,y,_,w,O,x,E,k,S,R,P,H,I,v=e.cd,m=v[0].trace,p=v[0].t,g="closest"===i,B="waterfall"===m.type,N=e.maxHoverDistance,M=e.maxSpikeDistance;"h"===m.orientation?(E=n,f=t,l="y",u="x",_=D,j=T):(E=t,f=n,l="x",u="y",j=D,_=T),O=m[l+"period"],S=g||O;function C(e){return A(e,-1)}function b(e){return A(e,1)}function A(e,t){var n=e.w;return e[l]+t*n/2}function L(e){return e[l+"End"]-e[l+"Start"]}x=g?C:O?function(e){return e.p-L(e)/2}:function(e){return Math.min(C(e),e.p-p.bardelta/2)},w=g?b:O?function(e){return e.p+L(e)/2}:function(e){return Math.max(b(e),e.p+p.bardelta/2)};function F(e,t,n){return a.finiteRange&&(n=0),s.inbox(e-E,t-E,n+Math.min(1,Math.abs(t-e)/P)-1)}function T(e){return F(x(e),w(e),N)}function z(e){var n,t=e[u];return B&&(n=Math.abs(e.rawS)||0,f>0?t+=n:f<0&&(t-=n)),t}function D(e){var t=f,o=e.b,n=z(e);return s.inbox(o-t,n-t,N+(n-t)/(n-o)-1)}if(h=e[l+"a"],y=e[u+"a"],P=Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])),R=s.getDistanceFunction(i,_,j,function(e){return(_(e)+j(e))/2}),s.getClosest(v,R,e),!1!==e.index&&v[e.index].p!==d)return S||(x=function(e){return Math.min(C(e),e.p-p.bargroupwidth/2)},w=function(e){return Math.max(b(e),e.p+p.bargroupwidth/2)}),r=v[e.index],H=m.base?r.b+r.s:r.s,e[u+"0"]=e[u+"1"]=y.c2p(r[u],!0),e[u+"LabelVal"]=H,k=p.extents[p.extents.round(r.p)],e[l+"0"]=h.c2p(g?x(r):k[0],!0),e[l+"1"]=h.c2p(g?w(r):k[1],!0),I=void 0!==r.orig_p,e[l+"LabelVal"]=I?r.orig_p:r.p,e.labelLabel=o(h,e[l+"LabelVal"],m[l+"hoverformat"]),e.valueLabel=o(y,e[u+"LabelVal"],m[u+"hoverformat"]),e.baseLabel=o(y,r.b,m[u+"hoverformat"]),e.spikeDistance=(function(e){var t=f,o=e.b,n=z(e);return s.inbox(o-t,n-t,M+(n-t)/(n-o)-1)}(r)+function(e){return F(C(e),b(e),M)}(r))/2,e[l+"Spike"]=h.c2p(r.p,!0),c(r,m,e),e.hovertemplate=m.hovertemplate,e}function r(e,t){var n=t.mcc||e.marker.color,s=t.mlcc||e.marker.line.color,o=l(e,t);return a.opacity(n)?n:a.opacity(s)&&o?s:void 0}e.exports={hoverPoints:function(e,t,n,s,o){if(a=i(e,t,n,s,o),a){var a,c=a.cd,l=c[0].trace,d=c[a.index];return a.color=r(l,d),u.getComponentMethod("errorbars","hoverInfo")(d,l,a),[a]}},hoverOnBars:i,getTraceColor:r}},51132:function(e,t,n){"use strict";e.exports={attributes:n(20832),layoutAttributes:n(39324),supplyDefaults:n(31508).supplyDefaults,crossTraceDefaults:n(31508).crossTraceDefaults,supplyLayoutDefaults:n(37156),calc:n(71820),crossTraceCalc:n(96376).crossTraceCalc,colorbar:n(5528),arraysToCalcdata:n(84664),plot:n(98184).plot,style:n(60100).style,styleOnSelect:n(60100).styleOnSelect,hoverPoints:n(63400).hoverPoints,eventData:n(52160),selectPoints:n(45784),moduleType:"trace",name:"bar",basePlotModule:n(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(e){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(e,t,n){"use strict";var s=n(24040),o=n(54460),i=n(3400),a=n(39324),r=n(31508).validateCornerradius;e.exports=function(e,t,n){function l(n,s){return i.coerce(e,t,a,n,s)}for(var c,d,v,p=!1,g=!1,h=!1,m={},f=l("barmode"),u=0;u<n.length;u++)c=n[u],s.traceIs(c,"bar")&&c.visible&&((p=!0,"group"===f)&&(d=c.xaxis+c.yaxis,m[d]&&(h=!0),m[d]=!0),c.visible&&"histogram"===c.type&&"category"!==o.getFromId({_fullLayout:t},c["v"===c.orientation?"xaxis":"yaxis"]).type&&(g=!0));p?("overlay"!==f&&l("barnorm"),l("bargap",g&&!h?0:.2),l("bargroupgap"),v=l("barcornerradius"),t.barcornerradius=r(v)):delete t.barmode}},98184:function(e,t,n){"use strict";var u=n(33428),l=n(38248),s=n(3400),M=n(72736),S=n(76308),a=n(43616),A=n(24040),d=n(54460).tickText,b=n(82744),k=b.recordMinTextSize,E=b.clearMinTextSize,h=n(60100),c=n(60444),F=n(78048),j=n(20832),C=j.text,w=j.textposition,_=n(10624).appendArrayPointValue,o=F.TEXTPAD;function O(e){return e.id}function x(e){if(e.ids)return O}function m(e){return(e>0)-(e<0)}function i(e,t){return e<t?1:-1}function f(e,t,n,s){var o;return!t.uniformtext.mode&&p(n)?(s&&(o=s()),e.transition().duration(n.duration).ease(n.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()})):e}function p(e){return e&&e.duration>0}function r(e,t,n,s,o){return!(e<0||t<0)&&(n<=e&&s<=t||n<=t&&s<=e||(o?e>=n*(t/s):t>=s*(e/n)))}function g(e){return"auto"===e?0:e}function v(e,t){var n=Math.PI/180*t,s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));return{x:e.width*o+e.height*s,y:e.width*s+e.height*o}}function y(e,t,n,s,a,r){var c,h,m,p,b,w,A,_=!!r.isHorizontal,P=!!r.constrained,z=r.angle||0,D=r.anchor,N="end"===D,C="start"===D,S=((r.leftToRight||0)+1)/2,F=1-S,T=r.hasB,j=r.r,M=r.overhead,f=a.width,y=a.height,l=Math.abs(t-e),u=Math.abs(s-n),d=l>2*o&&u>2*o?o:0;l-=2*d,u-=2*d,b=g(z),"auto"!==z||f<=l&&y<=u||!(f>l||y>u)||(f>u||y>l)&&f<y==l<u||(b+=90),h=v(a,b),j&&j-M>o?(w=function(e,t,n,s,i,a,r,c,l){var m,f,p,g,u=Math.max(0,Math.abs(t-e)-2*o),h=Math.max(0,Math.abs(s-n)-2*o),d=a-o,v=r?d-Math.sqrt(d*d-(d-r)*(d-r)):d,b=l?2*d:c?d-r:2*v,j=l?2*d:c?2*v:d-r;return i.y/i.x>=h/(u-b)?m=h/i.y:i.y/i.x<=(h-j)/u?m=u/i.x:!l&&c?(p=i.x*i.x+i.y*i.y/4,g=(u-d)*(u-d)+(h/2-d)*(h/2-d)-d*d,m=(-(f=-2*i.x*(u-d)-i.y*(h/2-d))+Math.sqrt(f*f-4*p*g))/(2*p)):l?(p=(i.x*i.x+i.y*i.y)/4,g=(u/2-d)*(u/2-d)+(h/2-d)*(h/2-d)-d*d,m=(-(f=-i.x*(u/2-d)-i.y*(h/2-d))+Math.sqrt(f*f-4*p*g))/(2*p)):(p=i.x*i.x/4+i.y*i.y,g=(u/2-d)*(u/2-d)+(h-d)*(h-d)-d*d,m=(-(f=-i.x*(u/2-d)-2*i.y*(h-d))+Math.sqrt(f*f-4*p*g))/(2*p)),{scale:m=Math.min(1,m),pad:c?Math.max(0,d-Math.sqrt(Math.max(0,d*d-(d-(h-i.y*m)/2)*(d-(h-i.y*m)/2)))-r):Math.max(0,d-Math.sqrt(Math.max(0,d*d-(d-(u-i.x*m)/2)*(d-(u-i.x*m)/2)))-r)}}(e,t,n,s,h,j,M,_,T),p=w.scale,A=w.pad):(p=1,P&&(p=Math.min(1,l/h.x,u/h.y)),A=0);var R=a.left*F+a.right*S,L=(a.top+a.bottom)/2,x=(e+o)*F+(t-o)*S,O=(n+s)/2,E=0,k=0;return(C||N)&&(m=(_?h.x:h.y)/2,j&&(N||T)&&(d+=A),c=_?i(e,t):i(n,s),_?C?(x=e+c*d,E=-c*m):(x=t-c*d,E=c*m):C?(O=n+c*d,k=-c*m):(O=s-c*d,k=c*m)),{textX:R,textY:L,targetX:x,targetY:O,anchorX:E,anchorY:k,scale:p,rotate:b}}e.exports={plot:function(e,t,n,b,j,O){var D,T=t.xaxis,z=t.yaxis,F=e._fullLayout,N=e._context.staticPlot;j||(j={mode:F.barmode,norm:F.barmode,gap:F.bargap,groupgap:F.bargroupgap},E("bar",F)),D=s.makeTraceGroups(b,n,"trace bars").each(function(n){var H,L=u.select(this),b=n[0].trace,R=n[0].t,U="waterfall"===b.type,B="funnel"===b.type,I="histogram"===b.type,P="bar"===b.type,K=P||B,A=0;U&&b.connector.visible&&"between"===b.connector.mode&&(A=b.connector.line.width/2);var E="h"===b.orientation,V=p(j),$=s.ensureSingle(L,"g","points"),W=x(b),D=$.selectAll("g.point").data(s.identity,W);D.enter().append("g").classed("point",!0),D.exit().remove(),D.each(function(p,x){var X,te,oe,ie=u.select(this),J=function(e,t,n,s){var o=[],i=[],a=s?t:n,r=s?n:t;return o[0]=a.c2p(e.s0,!0),i[0]=r.c2p(e.p0,!0),o[1]=a.c2p(e.s1,!0),i[1]=r.c2p(e.p1,!0),s?[o,i]:[i,o]}(p,T,z,E),B=J[0][0],$=J[0][1],L=J[1][0],H=J[1][1],G=0==(E?$-B:H-L),ne,re,se,ge;G&&K&&c.getLineWidth(b,p)&&(G=!1),G||(G=!(l(B)&&l($)&&l(L)&&l(H))),p.isBlank=G,G&&(E?$=B:H=L),A&&!G&&(E?(B-=i(B,$)*A,$+=i(B,$)*A):(L-=i(L,H)*A,H+=i(L,H)*A)),"waterfall"===b.type?G||(ne=b[p.dir].marker,te=ne.line.width,oe=ne.color):(te=c.getLineWidth(b,p),oe=p.mc||b.marker.color);function ce(e){var t=u.round(te/2%1,2);return 0===j.gap&&0===j.groupgap?u.round(Math.round(e)-t,2):e}X=S.opacity(oe)<1||te>.01?ce:function(e,t,n){return n&&e===t?e:Math.abs(e-t)>=2?ce(e):e>t?Math.ceil(e):Math.floor(e)},e._context.staticPlot||(B=X(B,$,E),$=X($,B,E),L=X(L,H,!E),H=X(H,L,!E));var Q,Z,ee=E?T.c2p:z.c2p,ae,ae=p.s0>0?p._sMax:p.s0<0?p._sMin:p.s1>0?p._sMax:p._sMin,D=P||I?function(e,t){if(!e)return 0;var s,n=E?Math.abs(H-L):Math.abs($-B),o=E?Math.abs($-B):Math.abs(H-L),i=X(Math.abs(ee(ae,!0)-ee(0,!0))),a=p.hasB?Math.min(n/2,o/2):Math.min(n/2,i);return s="%"===t?n*(Math.min(50,e)/100):e,X(Math.max(Math.min(s,a),0))}(R.cornerradiusvalue,R.cornerradiusform):0,pe="M"+B+","+L+"V"+H+"H"+$+"V"+L+"Z",q=0;if(D&&p.s)if(re=0===m(p.s0)||m(p.s)===m(p.s0)?p.s1:p.s0,(q=X(p.hasB?0:Math.abs(ee(ae,!0)-ee(re,!0))))<D){var U=i(B,$),W=i(L,H),Y=U===-W?1:0;if(E)if(p.hasB)Q="M"+(B+D*U)+","+L+"A "+D+","+D+" 0 0 "+Y+" "+B+","+(L+D*W)+"V"+(H-D*W)+"A "+D+","+D+" 0 0 "+Y+" "+(B+D*U)+","+H+"H"+($-D*U)+"A "+D+","+D+" 0 0 "+Y+" "+$+","+(H-D*W)+"V"+(L+D*W)+"A "+D+","+D+" 0 0 "+Y+" "+($-D*U)+","+L+"Z";else{var le=(Z=Math.abs($-B)+q)<D?D-Math.sqrt(Z*(2*D-Z)):0,de=q>0?Math.sqrt(q*(2*D-q)):0,ue=U>0?Math.max:Math.min;Q="M"+B+","+L+"V"+(H-le*W)+"H"+ue($-(D-q)*U,B)+"A "+D+","+D+" 0 0 "+Y+" "+$+","+(H-D*W-de)+"V"+(L+D*W+de)+"A "+D+","+D+" 0 0 "+Y+" "+ue($-(D-q)*U,B)+","+(L+le*W)+"Z"}else if(p.hasB)Q="M"+(B+D*U)+","+L+"A "+D+","+D+" 0 0 "+Y+" "+B+","+(L+D*W)+"V"+(H-D*W)+"A "+D+","+D+" 0 0 "+Y+" "+(B+D*U)+","+H+"H"+($-D*U)+"A "+D+","+D+" 0 0 "+Y+" "+$+","+(H-D*W)+"V"+(L+D*W)+"A "+D+","+D+" 0 0 "+Y+" "+($-D*U)+","+L+"Z";else{var he=(Z=Math.abs(H-L)+q)<D?D-Math.sqrt(Z*(2*D-Z)):0,me=q>0?Math.sqrt(q*(2*D-q)):0,fe=W>0?Math.max:Math.min;Q="M"+(B+he*U)+","+L+"V"+fe(H-(D-q)*W,L)+"A "+D+","+D+" 0 0 "+Y+" "+(B+D*U-me)+","+H+"H"+($-D*U+me)+"A "+D+","+D+" 0 0 "+Y+" "+($-he*U)+","+fe(H-(D-q)*W,L)+"V"+L+"Z"}}else Q=pe;else Q=pe;se=f(s.ensureSingle(ie,"path"),F,j,O),(se.style("vector-effect",N?"none":"non-scaling-stroke").attr("d",isNaN(($-B)*(H-L))||G&&e._context.staticPlot?"M0,0Z":Q).call(a.setClipUrl,t.layerClipId,e),!F.uniformtext.mode&&V)&&(ge=a.makePointStyleFns(b),a.singlePointStyle(p,se,b,ge,e)),!function(e,t,n,l,u,m,p,b,j,O,x,E,A){var I=t.xaxis,H=t.yaxis,$=e._fullLayout;function q(t,n,o){return s.ensureSingle(t,"text").text(n).attr({class:"bartext bartext-"+S,"text-anchor":"middle","data-notex":1}).call(a.font,o).call(M.convertToTspans,e)}var F=l[0].trace,T="h"===F.orientation,W=function(e,t,n,o,i){var r,a=t[0].trace;return r=a.texttemplate?function(e,t,n,o,i){if(l=t[0].trace,y=s.castOption(l,n,"texttemplate"),!y)return"";var a,r,c,l,m,f,g,v,b,j,y,w,p="histogram"===l.type,O="waterfall"===l.type,x="funnel"===l.type,h="h"===l.orientation;function u(e){return d(f,f.c2l(e),!0).text}return h?(j="y",g=i,b="x",f=o):(j="x",g=o,b="y",f=i),r=t[n],a={},a.label=r.p,a.labelLabel=a[j+"Label"]=(w=r.p,d(g,g.c2l(w),!0).text),m=s.castOption(l,r.i,"text"),(0===m||m)&&(a.text=m),a.value=r.s,a.valueLabel=a[b+"Label"]=u(r.s),c={},_(c,l,r.i),(p||void 0===c.x)&&(c.x=h?a.value:a.label),(p||void 0===c.y)&&(c.y=h?a.label:a.value),(p||void 0===c.xLabel)&&(c.xLabel=h?a.valueLabel:a.labelLabel),(p||void 0===c.yLabel)&&(c.yLabel=h?a.labelLabel:a.valueLabel),O&&(a.delta=+r.rawS||r.s,a.deltaLabel=u(a.delta),a.final=r.v,a.finalLabel=u(a.final),a.initial=a.final-a.delta,a.initialLabel=u(a.initial)),x&&(a.value=r.s,a.valueLabel=u(a.value),a.percentInitial=r.begR,a.percentInitialLabel=s.formatPercent(r.begR),a.percentPrevious=r.difR,a.percentPreviousLabel=s.formatPercent(r.difR),a.percentTotal=r.sumR,a.percenTotalLabel=s.formatPercent(r.sumR)),v=s.castOption(l,r.i,"customdata"),v&&(a.customdata=v),s.texttemplateString(y,a,e._d3locale,c,a,l._meta||{})}(e,t,n,o,i):a.textinfo?function(e,t,n,o){var u=e[0].trace,g="h"===u.orientation,b="waterfall"===u.type,w="funnel"===u.type;function h(e){return d(g?n:o,+e,!0).text}var i,l,m,f,j=u.textinfo,c=e[t],_=j.split("+"),r=[],a=function(e){return-1!==_.indexOf(e)};if(a("label")&&r.push((f=e[t].p,d(g?o:n,f,!0).text)),a("text")&&(0===(i=s.castOption(u,c.i,"text"))||i)&&r.push(i),b){var v=+c.rawS||c.s,p=c.v,y=p-v;a("initial")&&r.push(h(y)),a("delta")&&r.push(h(v)),a("final")&&r.push(h(p))}return w&&(a("value")&&r.push(h(c.s)),l=0,a("percent initial")&&l++,a("percent previous")&&l++,a("percent total")&&l++,m=l>1,a("percent initial")&&(i=s.formatPercent(c.begR),m&&(i+=" of initial"),r.push(i)),a("percent previous")&&(i=s.formatPercent(c.difR),m&&(i+=" of previous"),r.push(i)),a("percent total")&&(i=s.formatPercent(c.sumR),m&&(i+=" of total"),r.push(i))),r.join("<br>")}(t,n,o,i):c.getValue(a.text,n),c.coerceString(C,r)}($,l,u,I,H),S=function(e,t){var n=c.getValue(e.textposition,t);return c.coerceEnumerated(w,n)}(F,u),ce="stack"===E.mode||"relative"===E.mode,V=l[u],J=!ce||V._outmost,Z=V.hasB,re=O&&O-x>o;if(W&&"none"!==S&&(!V.isBlank&&m!==p&&b!==j||"auto"!==S&&"inside"!==S)){var B,U,G,Q,te=$.font,ae=h.getBarColor(l[u],F),X=h.getInsideTextFont(F,u,te,ae),ie=h.getOutsideTextFont(F,u,te),le=F.insidetextanchor||"end",Y=n.datum(),ee,ne;T?"log"===I.type&&Y.s0<=0&&(m=I.range[0]<I.range[1]?0:I._length):"log"===H.type&&Y.s0<=0&&(b=H.range[0]<H.range[1]?H._length:0);var z,D,N,P,K,oe=Math.abs(p-m),se=Math.abs(j-b),L=oe-2*o,R=se-2*o;if(("outside"===S&&(J||V.hasB||(S="inside")),"auto"===S)&&(J?(S="inside",N=q(n,W,K=s.ensureUniformFontSize(e,X)),D=(P=a.bBox(N.node())).width,z=P.height,G=D>0&&z>0,ee=re?Z?r(L-2*O,R,D,z,T)||r(L,R-2*O,D,z,T):T?r(L-(O-x),R,D,z,T)||r(L,R-2*(O-x),D,z,T):r(L,R-(O-x),D,z,T)||r(L-2*(O-x),R,D,z,T):r(L,R,D,z,T),G&&ee?S="inside":(S="outside",N.remove(),N=null)):S="inside"),!N&&(Q=(N=q(n,W,K=s.ensureUniformFontSize(e,"outside"===S?ie:X))).attr("transform"),N.attr("transform",""),D=(P=a.bBox(N.node())).width,z=P.height,N.attr("transform",Q),D<=0||z<=0))return void N.remove();U=F.textangle,B="outside"===S?function(e,t,n,s,a,r){var c=!!r.isHorizontal,k=!!r.constrained,E=r.angle||0,C=a.width,x=a.height,f=Math.abs(t-e),p=Math.abs(s-n),w=c?p>2*o?o:0:f>2*o?o:0,b=1;k&&(b=c?Math.min(1,p/x):Math.min(1,f/C));var _=g(E),y=v(a,_),d=(c?y.x:y.y)/2,A=(a.left+a.right)/2,O=(a.top+a.bottom)/2,m=(e+t)/2,h=(n+s)/2,j=0,u=0,l=c?i(t,e):i(n,s);return c?(m=t-l*w,j=l*d):(h=s+l*w,u=-l*d),{textX:A,textY:O,targetX:m,targetY:h,anchorX:j,anchorY:u,scale:b,rotate:_}}(m,p,b,j,P,{isHorizontal:T,constrained:"both"===F.constraintext||"outside"===F.constraintext,angle:U}):y(m,p,b,j,P,{isHorizontal:T,constrained:"both"===F.constraintext||"inside"===F.constraintext,angle:U,anchor:le,hasB:Z,r:O,overhead:x}),B.fontSize=K.size,k("histogram"===F.type?"bar":F.type,B,$),V.transform=B,ne=f(N,$,E,A),s.setTransormAndDisplay(ne,B)}else n.select("text").remove()}(e,t,ie,n,x,B,$,L,H,D,q,j,O),t.layerClipId&&a.hideOutsideRangePoint(p,ie.select("text"),T,z,b.xcalendar,b.ycalendar)}),H=!1===b.cliponaxis,a.setClipUrl(L,H?null:t.layerClipId,e)}),A.getComponentMethod("errorbars","plot")(e,D,t,j)},toMoveInsideBar:y}},45784:function(e){"use strict";function t(e,t,n,s,o){var r=t.c2p(s?e.s0:e.p0,!0),i=t.c2p(s?e.s1:e.p1,!0),c=n.c2p(s?e.p0:e.s0,!0),a=n.c2p(s?e.p1:e.s1,!0);return o?[(r+i)/2,(c+a)/2]:s?[i,(c+a)/2]:[(r+i)/2,a]}e.exports=function(e,n){var s,o,d,i=e.cd,l=e.xaxis,a=e.yaxis,r=i[0].trace,u="funnel"===r.type,h="h"===r.orientation,c=[];if(!1===n)for(s=0;s<i.length;s++)i[s].selected=0;else for(s=0;s<i.length;s++)o=i[s],d="ct"in o?o.ct:t(o,l,a,h,u),n.contains(d,!1,s,e)?(c.push({pointNumber:s,x:l.c2d(o.x),y:a.c2d(o.y)}),o.selected=1):o.selected=0;return c}},72592:function(e,t,n){"use strict";e.exports=s;var o=n(3400).distinctVals;function s(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n,i,a,r,l,u,s=1/0,h=t.posAxis._id.charAt(0),d=[],c=0;c<e.length;c++){for(n=e[c],r=0;r<n.length;r++)l=n[r],i=l.p,void 0===i&&(i=l[h]),void 0!==i&&d.push(i);n[0]&&n[0].width1&&(s=Math.min(n[0].width1,s))}this.positions=d,a=o(d),this.distinctPositions=a.vals,1===a.vals.length&&s!==1/0?this.minDiff=s:this.minDiff=Math.min(a.minDiff,s),u=(t.posAxis||{}).type,"category"!==u&&"multicategory"!==u||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}s.prototype.put=function(e,t){var n=this.getLabel(e,t),s=this.bins[n]||0;return this.bins[n]=s+t,s},s.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},s.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},60100:function(e,t,n){"use strict";var i=n(33428),y=n(76308),o=n(43616),m=n(3400),h=n(24040),l=n(82744).resizeText,a=n(20832),j=a.textfont,b=a.insidetextfont,_=a.outsidetextfont,s=n(60444);function f(e,t,n){o.pointStyle(e.selectAll("path"),t,n),p(e,t,n)}function p(e,t,n){e.selectAll("text").each(function(e){var s=i.select(this),a=m.ensureUniformFontSize(n,g(s,e,t,n));o.font(s,a)})}function g(e,t,n,s){var a,i=s._fullLayout.font,o=n.textfont;return e.classed("bartext-inside")?(a=c(t,n),o=u(n,t.i,i,a)):e.classed("bartext-outside")&&(o=d(n,t.i,i)),o}function v(e,t,n){return r(j,e.textfont,t,n)}function u(e,t,n,s){var o=v(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(o={color:y.contrast(s),family:o.family,size:o.size,weight:o.weight,style:o.style,variant:o.variant}),r(b,e.insidetextfont,t,o)}function d(e,t,n){var s=v(e,t,n);return r(_,e.outsidetextfont,t,s)}function r(e,t,n,o){t=t||{};var i=s.getValue(t.family,n),a=s.getValue(t.size,n),r=s.getValue(t.color,n),c=s.getValue(t.weight,n),l=s.getValue(t.style,n),d=s.getValue(t.variant,n);return{family:s.coerceString(e.family,i,o.family),size:s.coerceNumber(e.size,a,o.size),color:s.coerceColor(e.color,r,o.color),weight:s.coerceString(e.weight,c,o.weight),style:s.coerceString(e.style,l,o.style),variant:s.coerceString(e.variant,d,o.variant)}}function c(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}e.exports={style:function(e){t=i.select(e).selectAll('g[class^="barlayer"]').selectAll("g.trace"),l(e,t,"bar");var t,s=t.size(),n=e._fullLayout;t.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===n.barmode&&s>1||0===n.bargap&&0===n.bargroupgap&&!e[0].trace.marker.line.width)&&i.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(t){f(i.select(this),t[0].trace,e)}),h.getComponentMethod("errorbars","style")(t)},styleTextPoints:p,styleOnSelect:function(e,t,n){var s=t[0].trace;s.selectedpoints?function(e,t,n){o.selectedPointStyle(e.selectAll("path"),t),function(e,t,n){e.each(function(e){var s,r,a=i.select(this);e.selected?(s=m.ensureUniformFontSize(n,g(a,e,t,n)),r=t.selected.textfont&&t.selected.textfont.color,r&&(s.color=r),o.font(a,s)):o.selectedTextStyle(a,t)})}(e.selectAll("text"),t,n)}(n,s,e):(f(n,s,e),h.getComponentMethod("errorbars","style")(n))},getInsideTextFont:u,getOutsideTextFont:d,getBarColor:c,resizeText:l}},55592:function(e,t,n){"use strict";var i=n(76308),s=n(94288).hasColorscale,o=n(27260),a=n(3400).coercePattern;e.exports=function(e,t,n,r,c){var d=n("marker.color",r),l=s(e,"marker");l&&o(e,t,c,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",i.defaultLine),s(e,"marker.line")&&o(e,t,c,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),a(n,"marker.pattern",d,l),n("selected.marker.color"),n("unselected.marker.color")}},82744:function(e,t,n){"use strict";var o=n(33428),i=n(3400);function s(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,n){if(n.uniformtext.mode){var o=s(e),i=n.uniformtext.minsize,a=t.scale*t.fontSize;t.hide=a<i,n[o]=n[o]||1/0,t.hide||(n[o]=Math.min(n[o],Math.max(a,i)))}},clearMinTextSize:function(e,t){t[s(e)]=void 0},resizeText:function(e,t,n){var s,c,a=e._fullLayout,r=a["_"+n+"Text_minsize"];if(r){switch(c="hide"===a.uniformtext.mode,n){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":case"icicle":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}t.selectAll(s).each(function(e){var n,t=e.transform;t&&(t.scale=c&&t.hide?0:r/t.fontSize,n=o.select(this).select("text"),i.setTransormAndDisplay(n,t))})}}}},78100:function(e,t,n){"use strict";var a,r=n(21776).Ks,i=n(92880).extendFlat,s=n(8319),o=n(20832);e.exports={r:s.r,theta:s.theta,r0:s.r0,dr:s.dr,theta0:s.theta0,dtheta:s.dtheta,thetaunit:s.thetaunit,base:i({},o.base,{}),offset:i({},o.offset,{}),width:i({},o.width,{}),text:i({},o.text,{}),hovertext:i({},o.hovertext,{}),marker:(a=i({},o.marker),delete a.cornerradius,a),hoverinfo:s.hoverinfo,hovertemplate:r(),selected:o.selected,unselected:o.unselected}},47056:function(e,t,n){"use strict";var s=n(94288).hasColorscale,o=n(47128),i=n(3400).isArrayOrTypedArray,a=n(84664),r=n(96376).setGroupPositions,c=n(4500),l=n(24040).traceIs,d=n(3400).extendFlat;e.exports={calc:function(e,t){for(var d=e._fullLayout,m=t.subplot,f=d[m].radialaxis,l=d[m].angularaxis,v=f.makeCalcdata(t,"r"),b=l.makeCalcdata(t,"theta"),h=t._length,r=new Array(h),p=v,g=b,n=0;n<h;n++)r[n]={p:g[n],s:p[n]};function u(e){var n=t[e];void 0!==n&&(t["_"+e]=i(n)?l.makeCalcdata(t,e):l.d2c(n,t.thetaunit))}return"linear"===l.type&&(u("width"),u("offset")),s(t,"marker")&&o(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),s(t,"marker.line")&&o(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),a(r,t),c(r,t),r},crossTraceCalc:function(e,t,n){for(var s,i,u,h,a=e.calcdata,c=[],o=0;o<a.length;o++)i=a[o],s=i[0].trace,!0===s.visible&&l(s,"bar")&&s.subplot===n&&c.push(i);u=d({},t.radialaxis,{_id:"x"}),h=t.angularaxis,r(e,h,u,c,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}}},70384:function(e,t,n){"use strict";var s=n(3400),o=n(85968).handleRThetaDefaults,i=n(55592),a=n(78100);e.exports=function(e,t,n,r){function c(n,o){return s.coerce(e,t,a,n,o)}o(e,t,r,c)?(c("thetaunit"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate"),i(e,t,c,n,r),s.coerceSelectionMarkerOpacity(t,c)):t.visible=!1}},68896:function(e,t,n){"use strict";var o=n(93024),s=n(3400),i=n(63400).getTraceColor,a=s.fillText,r=n(8504).makeHoverPointText,c=n(57384).isPtInsidePolygon;e.exports=function(e,t,n){var l,f,h=e.cd,d=h[0].trace,u=e.subplot,m=u.radialAxis,y=u.angularAxis,p=u.vangles,_=p?c:s.isPtInsideSector,j=e.maxHoverDistance,b=y._period||2*Math.PI,v=Math.abs(m.g2p(Math.sqrt(t*t+n*n))),g=Math.atan2(n,t);if(m.range[0]>m.range[1]&&(g+=Math.PI),o.getClosest(h,function(e){return _(v,g,[e.rp0,e.rp1],[e.thetag0,e.thetag1],p)?j+Math.min(1,Math.abs(e.thetag1-e.thetag0)/b)-1+(e.rp1-v)/(e.rp1-e.rp0)-1:1/0},e),!1!==e.index)return l=h[e.index],e.x0=e.x1=l.ct[0],e.y0=e.y1=l.ct[1],f=s.extendFlat({},l,{r:l.s,theta:l.p}),a(l,d,e),r(f,d,u,e),e.hovertemplate=d.hovertemplate,e.color=i(d,l),e.xLabelVal=e.yLabelVal=void 0,l.s<0&&(e.idealAlign="left"),[e]}},94456:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"barpolar",basePlotModule:n(40872),categories:["polar","bar","showLegend"],attributes:n(78100),layoutAttributes:n(9320),supplyDefaults:n(70384),supplyLayoutDefaults:n(89580),calc:n(47056).calc,crossTraceCalc:n(47056).crossTraceCalc,plot:n(42040),colorbar:n(5528),formatLabels:n(22852),style:n(60100).style,styleOnSelect:n(60100).styleOnSelect,hoverPoints:n(68896),selectPoints:n(45784),meta:{}}},9320:function(e){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(e,t,n){"use strict";var s=n(3400),o=n(9320);e.exports=function(e,t,n){var i,a,r,c={};function l(n,a){return s.coerce(e[i]||{},t[i],o,n,a)}for(a=0;a<n.length;a++)r=n[a],"barpolar"===r.type&&!0===r.visible&&(c[i=r.subplot]||(l("barmode"),l("bargap"),c[i]=1))}},42040:function(e,t,n){"use strict";var a=n(33428),o=n(38248),s=n(3400),r=n(43616),i=n(57384);e.exports=function(e,t,n){var d=e._context.staticPlot,u=t.xaxis,h=t.yaxis,c=t.radialAxis,l=t.angularAxis,m=function(e){var t=e.cxx,n=e.cyy;return e.vangles?function(o,a,r,c){s.angleDelta(r,c)>0?(l=r,d=c):(l=c,d=r);var l,d,u=[i.findEnclosingVertexAngles(l,e.vangles)[0],(l+d)/2,i.findEnclosingVertexAngles(d,e.vangles)[1]];return i.pathPolygonAnnulus(o,a,l,d,u,t,n)}:function(e,o,i,a){return s.pathAnnulus(e,o,i,a,t,n)}}(t),f=t.layers.frontplot.select("g.barlayer");s.makeTraceGroups(f,n,"trace bars").each(function(){var i=a.select(this),n=s.ensureSingle(i,"g","points").selectAll("g.point").data(s.identity);n.enter().append("g").style("vector-effect",d?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),n.exit().remove(),n.each(function(e){var i,r,p,g=a.select(this),d=e.rp0=c.c2p(e.s0),f=e.rp1=c.c2p(e.s1),t=e.thetag0=l.c2g(e.p0),n=e.thetag1=l.c2g(e.p1);o(d)&&o(f)&&o(t)&&o(n)&&d!==f&&t!==n?(p=c.c2g(e.s1),r=(t+n)/2,e.ct=[u.c2p(p*Math.cos(r)),h.c2p(p*Math.sin(r))],i=m(d,f,t,n)):i="M0,0Z",s.ensureSingle(g,"path").attr("d",i)}),r.setClipUrl(i,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,e)})}},63188:function(e,t,n){"use strict";var u=n(98304),s=n(52904),a=n(20832),l=n(22548),r=n(29736).axisHoverFormat,d=n(21776).Ks,o=n(92880).extendFlat,i=s.marker,c=i.line;e.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:o({},i.angle,{arrayOk:!1,editType:"calc"}),size:o({},i.size,{arrayOk:!1,editType:"calc"}),color:o({},i.color,{arrayOk:!1,editType:"style"}),line:{color:o({},c.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:o({},c.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:u(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:s.selected.marker,editType:"style"},unselected:{marker:s.unselected.marker,editType:"style"},text:o({},s.text,{}),hovertext:o({},s.hovertext,{}),hovertemplate:d({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:s.zorder}},62555:function(e,t,n){"use strict";var a,c=n(38248),r=n(54460),v=n(1220),s=n(3400),o=n(39032).BADNUM,i=s._;e.exports=function(e,t){var a,y,O,k,S,z,Q,K=e._fullLayout,oe=r.getFromId(e,t.xaxis||"x"),ne=r.getFromId(e,t.yaxis||"y"),E=[],Z="violin"===t.type?"_numViolins":"_numBoxes";"h"===t.orientation?(y=oe,O="x",z=ne,k="y",Q=!!t.yperiodalignment):(y=ne,O="y",z=oe,k="x",Q=!!t.xperiodalignment);var n,b,j,_,x,C,A,F,T,D,L,R,P,H,B,U,G,se=function(e,t,n,o){if(a=t+"0"in e,t in e||a&&"d"+t in e)return r=n.makeCalcdata(e,t),[v(e,n,t,r).vals,r];i=a?e[t+"0"]:"name"in e&&("category"===n.type||c(e.name)&&-1!==["linear","log"].indexOf(n.type)||s.isDateTime(e.name)&&"date"===n.type)?e.name:o;for(var i,a,r,h="multicategory"===n.type?n.r2c_just_indices(i):n.d2c(i,0,e[t+"calendar"]),d=e._length,u=new Array(d),l=0;l<d;l++)u[l]=h;return[u]}(t,k,z,K[Z]),q=se[0],ie=se[1],ae=s.distinctVals(q,z),V=ae.vals,de=ae.minDiff/2,ue="all"===(t.boxpoints||t.points)?s.identity:function(e){return e.v<n.lf||e.v>n.uf},te,ee;if(t._hasPreCompStats){var N=t[O],w=function(e){return y.d2c((t[e]||[])[a])},$=1/0,W=-1/0;for(a=0;a<t._length;a++)if(U=q[a],c(U)){if((n={}).pos=n[k]=U,Q&&ie&&(n.orig_p=ie[a]),n.q1=w("q1"),n.med=w("median"),n.q3=w("q3"),_=[],N&&s.isArrayOrTypedArray(N[a]))for(S=0;S<N[a].length;S++)(T=y.d2c(N[a][S]))!==o&&(l(P={v:T,i:[a,S]},t,[a,S]),_.push(P));n.pts=_.sort(u),j=(b=n[O]=_.map(h)).length,n.med!==o&&n.q1!==o&&n.q3!==o&&n.med>=n.q1&&n.q3>=n.med?(R=w("lowerfence"),n.lf=R!==o&&R<=n.q1?R:m(n,b,j),H=w("upperfence"),n.uf=H!==o&&H>=n.q3?H:f(n,b,j),L=w("mean"),n.mean=L!==o?L:j?s.mean(b,j):(n.q1+n.q3)/2,G=w("sd"),n.sd=L!==o&&G>=0?G:j?s.stdev(b,j,n.mean):n.q3-n.q1,n.lo=p(n),n.uo=d(n),x=w("notchspan"),x=x!==o&&x>0?x:g(n,j),n.ln=n.med-x,n.un=n.med+x,A=n.lf,F=n.uf,t.boxpoints&&b.length&&(A=Math.min(A,b[0]),F=Math.max(F,b[j-1])),t.notched&&(A=Math.min(A,n.ln),F=Math.max(F,n.un)),n.min=A,n.max=F):(s.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+n.q1,"median = "+n.med,"q3 = "+n.q3].join(`
`)),C=n.med!==o?n.med:n.q1!==o?n.q3!==o?(n.q1+n.q3)/2:n.q1:n.q3!==o?n.q3:0,n.med=C,n.q1=n.q3=C,n.lf=n.uf=C,n.mean=n.sd=C,n.ln=n.un=C,n.min=n.max=C),$=Math.min($,n.min),W=Math.max(W,n.max),n.pts2=_.filter(ue),E.push(n)}t._extremes[y._id]=r.findExtremes(y,[$,W],{padded:!0})}else{var M=y.makeCalcdata(t,O),he=function(e,t){for(var n=e.length,o=new Array(n+1),s=0;s<n;s++)o[s]=e[s]-t;return o[n]=e[n-1]+t,o}(V,de),I=V.length,X=function(e){for(var n=new Array(e),t=0;t<e;t++)n[t]=[];return n}(I);for(a=0;a<t._length;a++)T=M[a],c(T)&&(D=s.findBin(q[a],he),D>=0&&D<I&&(l(P={v:T,i:a},t,a),X[D].push(P)));var Y=1/0,J=-1/0,re=t.quartilemethod,ce="exclusive"===re,le="inclusive"===re;for(a=0;a<I;a++)X[a].length>0&&((n={}).pos=n[k]=V[a],_=n.pts=X[a].sort(u),j=(b=n[O]=_.map(h)).length,n.min=b[0],n.max=b[j-1],n.mean=s.mean(b,j),n.sd=s.stdev(b,j,n.mean)*t.sdmultiple,n.med=s.interp(b,.5),j%2&&(ce||le)?(ce?(B=b.slice(0,j/2),te=b.slice(j/2+1)):le&&(B=b.slice(0,j/2+1),te=b.slice(j/2)),n.q1=s.interp(B,.5),n.q3=s.interp(te,.5)):(n.q1=s.interp(b,.25),n.q3=s.interp(b,.75)),n.lf=m(n,b,j),n.uf=f(n,b,j),n.lo=p(n),n.uo=d(n),ee=g(n,j),n.ln=n.med-ee,n.un=n.med+ee,Y=Math.min(Y,n.ln),J=Math.max(J,n.un),n.pts2=_.filter(ue),E.push(n));t.notched&&s.isTypedArray(M)&&(M=Array.from(M)),t._extremes[y._id]=r.findExtremes(y,t.notched?M.concat([Y,J]):M,{padded:!0})}return function(e,t){if(s.isArrayOrTypedArray(t.selectedpoints))for(n=0;n<e.length;n++){for(var n,i=e[n].pts||[],a={},o=0;o<i.length;o++)a[i[o].i]=o;s.tagSelected(i,t,a)}}(E,t),E.length>0?(E[0].t={num:K[Z],dPos:de,posLetter:k,valLetter:O,labels:{med:i(e,"median:"),min:i(e,"min:"),q1:i(e,"q1:"),q3:i(e,"q3:"),max:i(e,"max:"),mean:"sd"===t.boxmean||"sd"===t.sizemode?i(e,"mean ± σ:").replace("σ",1===t.sdmultiple?"σ":t.sdmultiple+"σ"):i(e,"mean:"),lf:i(e,"lower fence:"),uf:i(e,"upper fence:")}},K[Z]++,E):[{t:{empty:!0}}]},a={text:"tx",hovertext:"htx"};function l(e,t,n){for(var o in a)s.isArrayOrTypedArray(t[o])&&(Array.isArray(n)?s.isArrayOrTypedArray(t[o][n[0]])&&(e[a[o]]=t[o][n[0]][n[1]]):e[a[o]]=t[o][n])}function u(e,t){return e.v-t.v}function h(e){return e.v}function m(e,t,n){return 0===n?e.q1:Math.min(e.q1,t[Math.min(s.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,n-1)])}function f(e,t,n){return 0===n?e.q3:Math.max(e.q3,t[Math.max(s.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function p(e){return 4*e.q1-3*e.q3}function d(e){return 4*e.q3-3*e.q1}function g(e,t){return 0===t?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}},96404:function(e,t,n){"use strict";var s=n(54460),a=n(3400),r=n(71888).getAxisGroup,o=["v","h"];function i(e,t,n,o){var l,d,h,g,v,b,y,w,x,E,k,F,D,R,W,K=t.calcdata,p=t._fullLayout,P=o._id,H=P.charAt(0),L=[],U=0;for(h=0;h<n.length;h++)for(d=K[n[h]],l=0;l<d.length;l++)L.push(o.c2l(d[l].pos,!0)),U+=(d[l].pts2||[]).length;if(L.length){v=a.distinctVals(L),"category"!==o.type&&"multicategory"!==o.type||(v.minDiff=1),W=v.minDiff/2,s.minDtick(o,v.minDiff,v.vals[0],!0);var $=p["violin"===e?"_numViolins":"_numBoxes"],G="group"===p[e+"mode"]&&$>1,T=1-p[e+"gap"],B=1-p[e+"groupgap"];for(h=0;h<n.length;h++){var c,u,m,f,O,C,i=(d=K[n[h]])[0].trace,_=d[0].t,j=i.width,I=i.side;if(j)c=O=C=j/2,f=0;else if(c=W,G){var q=r(p,o._id)+i.orientation,Y=(p._alignmentOpts[q]||{})[i.alignmentgroup]||{},V=Object.keys(Y.offsetGroups||{}).length,N=V||$;O=c*T*B/N,f=2*c*(((V?i._offsetIndex:_.num)+.5)/N-.5)*T,C=c*T/N}else O=c*T*B,f=0,C=c;if(_.dPos=c,_.bPos=f,_.bdPos=O,_.wHover=C,g=f+O,k=Boolean(j),"positive"===I?(u=c*(j?1:.5),y=g,m=y=f):"negative"===I?(u=y=f,m=c*(j?1:.5),R=g):(u=m=c,y=R=g),(i.boxpoints||i.points)&&U>0){var z=i.pointpos,A=i.jitter,S=i.marker.size/2,M=0;z+A>=0&&((M=g*(z+A))>u?(k=!0,F=S,x=M):M>y&&(F=S,x=u)),M<=u&&(x=u),w=0,z-A<=0&&((w=-g*(z-A))>m?(k=!0,E=S,b=w):w>R&&(E=S,b=m)),w<=m&&(b=m)}else x=u,b=m;D=new Array(d.length);for(l=0;l<d.length;l++)D[l]=d[l].pos;i._extremes[P]=s.findExtremes(o,D,{padded:k,vpadminus:b,vpadplus:x,vpadLinearized:!0,ppadminus:{x:E,y:F}[H],ppadplus:{x:F,y:E}[H]})}}}e.exports={crossTraceCalc:function(e,t){for(var r=e.calcdata,d=t.xaxis,c=t.yaxis,a=0;a<o.length;a++){for(var h=o[a],m="h"===h?c:d,l=[],s=0;s<r.length;s++){var u=r[s],f=u[0].t,n=u[0].trace;!0!==n.visible||"box"!==n.type&&"candlestick"!==n.type||f.empty||(n.orientation||"v")!==h||n.xaxis!==d._id||n.yaxis!==c._id||l.push(s)}i("box",e,l,m)}},setPositionOffset:i}},90624:function(e,t,n){"use strict";var s=n(3400),d=n(24040),u=n(76308),c=n(31147),l=n(20011),r=n(52976),o=n(63188);function i(e,t,n,i){function k(e){var t=0;return e&&e.length&&(t+=1,s.isArrayOrTypedArray(e[0])&&e[0].length&&(t+=1)),t}function y(t){return s.validate(e[t],o[t])}if(u=n("y"),h=n("x"),"box"===t.type){var w=n("q1"),_=n("median"),O=n("q3");t._hasPreCompStats=w&&w.length&&_&&_.length&&O&&O.length,l=Math.min(s.minRowLength(w),s.minRowLength(_),s.minRowLength(O))}var a,c,l,u,h,m,g,j,E,b=k(u),f=k(h),v=b&&s.minRowLength(u),p=f&&s.minRowLength(h),x=i.calendar,C={autotypenumbers:i.autotypenumbers};if(t._hasPreCompStats)switch(String(f)+String(b)){case"00":E=y("x0")||y("dx"),c=!y("y0")&&!y("dy")||E?"v":"h",a=l;break;case"10":c="v",a=Math.min(l,p);break;case"20":c="h",a=Math.min(l,h.length);break;case"01":c="h",a=Math.min(l,v);break;case"02":c="v",a=Math.min(l,u.length);break;case"12":c="v",a=Math.min(l,p,u.length);break;case"21":c="h",a=Math.min(l,h.length,v);break;case"11":a=0;break;case"22":g=!1;for(m=0;m<h.length;m++)if("category"===r(h[m],x,C)){g=!0;break}if(g)c="v",a=Math.min(l,p,u.length);else{for(m=0;m<u.length;m++)if("category"===r(u[m],x,C)){g=!0;break}g?(c="h",a=Math.min(l,h.length,v)):(c="v",a=Math.min(l,p,u.length))}}else b>0?(c="v",a=f>0?Math.min(p,v):Math.min(v)):f>0?(c="h",a=Math.min(p)):a=0;a?(t._length=a,j=n("orientation",c),t._hasPreCompStats?"v"===j&&0===f?(n("x0",0),n("dx",1)):"h"===j&&0===b&&(n("y0",0),n("dy",1)):"v"===j&&0===f?n("x0"):"h"===j&&0===b&&n("y0"),d.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],i)):t.visible=!1}function a(e,t,n,i){var a,c,l=i.prefix,d=s.coerce2(e,t,o,"marker.outliercolor"),u=n("marker.line.outliercolor"),r="outliers";t._hasPreCompStats?r="all":(d||u)&&(r="suspectedoutliers"),a=n(l+"points",r),a?(n("jitter","all"===a?.3:0),n("pointpos","all"===a?-1.5:0),n("marker.symbol"),n("marker.opacity"),n("marker.size"),n("marker.angle"),n("marker.color",t.line.color),n("marker.line.color"),n("marker.line.width"),"suspectedoutliers"===a&&(n("marker.line.outliercolor",t.marker.color),n("marker.line.outlierwidth")),n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"),n("text"),n("hovertext")):delete t.marker,c=n("hoveron"),"all"!==c&&-1===c.indexOf("points")||n("hovertemplate"),s.coerceSelectionMarkerOpacity(t,n)}e.exports={supplyDefaults:function(e,t,n,r){function l(n,i){return s.coerce(e,t,o,n,i)}if(i(e,t,l,r),!1!==t.visible){if(c(e,t,r,l),l("xhoverformat"),l("yhoverformat"),d=t._hasPreCompStats,d&&(l("lowerfence"),l("upperfence")),l("line.color",(e.marker||{}).color||n),l("line.width"),l("fillcolor",u.addOpacity(t.line.color,.5)),h=!1,d){var d,h,m,f,p,b,g=l("mean"),v=l("sd");g&&g.length&&(h=!0,v&&v.length&&(h="sd"))}l("whiskerwidth"),m=l("sizemode"),"quartiles"===m&&(b=l("boxmean",h)),l("showwhiskers","quartiles"===m),"sd"!==m&&"sd"!==b||l("sdmultiple"),l("width"),l("quartilemethod"),f=!1,d?(p=l("notchspan"),p&&p.length&&(f=!0)):s.validate(e.notchwidth,o.notchwidth)&&(f=!0),l("notched",f)&&l("notchwidth"),a(e,t,l,{prefix:"box"}),l("zorder")}},crossTraceDefaults:function(e,t){function c(e){return s.coerce(n._input,n,o,e)}for(var n,i,r,a=0;a<e.length;a++)i=(n=e[a]).type,"box"!==i&&"violin"!==i||(r=n._input,"group"===t[i+"mode"]&&l(r,n,t,c))},handleSampleDefaults:i,handlePointsDefaults:a}},10392:function(e){"use strict";e.exports=function(e,t){return t.hoverOnBox&&(e.hoverOnBox=t.hoverOnBox),"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},27576:function(e,t,n){"use strict";var l=n(54460),o=n(3400),s=n(93024),a=n(76308),c=o.fillText;function r(e,t,n,i){var c,h,f,p,v,b,j,y,_,w,x,C,E,k,F,z,R,B,U,S=e.cd,V=e.xa,I=e.ya,r=S[0].trace,g=S[0].t,$="violin"===r.type,A=g.bdPos,O=g.wHover,M=function(e){return c.c2l(e.pos)+g.bPos-c.c2l(R)};$&&"both"!==r.side?("positive"===r.side&&(w=function(e){var t=M(e);return s.inbox(t,t+O,p)},C=A,x=0),"negative"===r.side&&(w=function(e){var t=M(e);return s.inbox(t-O,t,p)},C=0,x=A)):(w=function(e){var t=M(e);return s.inbox(t-O,t+O,p)},C=x=A),z=$?function(e){return s.inbox(e.span[0]-j,e.span[1]-j,p)}:function(e){return s.inbox(e.min-j,e.max-j,p)},"h"===r.orientation?(j=t,R=n,k=z,E=w,b="y",c=I,f="x",y=V):(j=n,R=t,k=w,E=z,b="x",c=V,f="y",y=I),F=Math.min(1,A/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function W(e){return(k(e)+E(e))/2}if(p=e.maxHoverDistance-F,B=e.maxSpikeDistance-F,U=s.getDistanceFunction(i,k,E,W),s.getClosest(S,U,e),!1===e.index)return[];var d=S[e.index],H=r.line.color,K=(r.marker||{}).color;a.opacity(H)&&r.line.width?e.color=H:a.opacity(K)&&r.boxpoints?e.color=K:e.color=r.fillcolor,e[b+"0"]=c.c2p(d.pos+g.bPos-x,!0),e[b+"1"]=c.c2p(d.pos+g.bPos+C,!0),e[b+"LabelVal"]=void 0!==d.orig_p?d.orig_p:d.pos,_=b+"Spike",e.spikeDistance=W(d)*B/p,e[_]=c.c2p(d.pos,!0);var L=r.boxmean||"sd"===r.sizemode||(r.meanline||{}).visible,N=r.boxpoints||r.points,D=N&&L?["max","uf","q3","med","mean","q1","lf","min"]:N&&!L?["max","uf","q3","med","q1","lf","min"]:!N&&L?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],X=y.range[1]<y.range[0];r.orientation===(X?"v":"h")&&D.reverse();for(var Y=e.spikeDistance,q=e[_],m=[],P=0;P<D.length;P++)if(v=D[P],v in d){var T=d[v],G=y.c2p(T,!0),u=o.extendFlat({},e);u.attr=v,u[f+"0"]=u[f+"1"]=G,u[f+"LabelVal"]=T,u[f+"Label"]=(g.labels?g.labels[v]+" ":"")+l.hoverLabelText(y,T,r[f+"hoverformat"]),u.hoverOnBox=!0,"mean"!==v||!("sd"in d)||"sd"!==r.boxmean&&"sd"!==r.sizemode||(u[f+"err"]=d.sd),u.hovertemplate=!1,m.push(u)}e.name="",e.spikeDistance=void 0,e[_]=void 0;for(h=0;h<m.length;h++)"med"!==m[h].attr?(m[h].name="",m[h].spikeDistance=void 0,m[h][_]=void 0):(m[h].spikeDistance=Y,m[h][_]=q);return m}function i(e,t,n){for(var a,d,m,b,p=e.cd,g=e.xa,u=e.ya,l=p[0].trace,x=g.c2p(t),O=u.c2p(n),C=s.quadrature(function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(g.c2p(e.x)-x)-t,1-3/t)},function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(u.c2p(e.y)-O)-t,1-3/t)}),v=!1,h=0;h<p.length;h++){a=p[h];for(d=0;d<(a.pts||[]).length;d++)b=C(i=a.pts[d]),b<=e.distance&&(e.distance=b,v=[h,d])}if(!v)return!1;var m,i=(a=p[v[0]]).pts[v[1]],y=g.c2p(i.x,!0),_=u.c2p(i.y,!0),f=i.mrc||1,r=o.extendFlat({},e,{index:i.i,color:(l.marker||{}).color,name:l.name,x0:y-f,x1:y+f,y0:_-f,y1:_+f,spikeDistance:e.distance,hovertemplate:l.hovertemplate}),j=a.orig_p,w=void 0!==j?j:a.pos;return"h"===l.orientation?(m=u,r.xLabelVal=i.x,r.yLabelVal=w):(m=g,r.xLabelVal=w,r.yLabelVal=i.y),r[m._id.charAt(0)+"Spike"]=m.c2p(a.pos,!0),c(i,l,r),r}e.exports={hoverPoints:function(e,t,n,s){var a,c=e.cd[0].trace.hoveron,o=[];return-1!==c.indexOf("boxes")&&(o=o.concat(r(e,t,n,s))),-1!==c.indexOf("points")&&(a=i(e,t,n)),"closest"===s?a?[a]:o:a?(o.push(a),o):o},hoverOnBoxes:r,hoverOnPoints:i}},67244:function(e,t,n){"use strict";e.exports={attributes:n(63188),layoutAttributes:n(16560),supplyDefaults:n(90624).supplyDefaults,crossTraceDefaults:n(90624).crossTraceDefaults,supplyLayoutDefaults:n(68832).supplyLayoutDefaults,calc:n(62555),crossTraceCalc:n(96404).crossTraceCalc,plot:n(18728).plot,style:n(25776).style,styleOnSelect:n(25776).styleOnSelect,hoverPoints:n(27576).hoverPoints,eventData:n(10392),selectPoints:n(8264),moduleType:"trace",name:"box",basePlotModule:n(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(e){"use strict";e.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(e,t,n){"use strict";var o=n(24040),i=n(3400),a=n(16560);function s(e,t,n,s,i){for(var c,l=i+"Layout",r=!1,a=0;a<n.length;a++)if(c=n[a],o.traceIs(c,l)){r=!0;break}r&&(s(i+"mode"),s(i+"gap"),s(i+"groupgap"))}e.exports={supplyLayoutDefaults:function(e,t,n){s(0,0,n,function(n,s){return i.coerce(e,t,a,n,s)},"box")},_supply:s}},18728:function(e,t,n){"use strict";var o=n(33428),s=n(3400),c=n(43616);function i(e,t,n,i,a){var u,h,m,j="h"===n.orientation,r=t.val,c=t.pos,f=!!c.rangebreaks,y=i.bPos,p=i.wdPos||0,l=i.bPosPxOffset||0,g=n.whiskerwidth||0,v=!1!==n.showwhiskers,d=n.notched||!1,b=d?1-2*n.notchwidth:1;Array.isArray(i.bdPos)?(u=i.bdPos[0],h=i.bdPos[1]):(u=i.bdPos,h=i.bdPos),m=e.selectAll("path.box").data("violin"!==n.type||n.box.visible?s.identity:[]),m.enter().append("path").style("vector-effect",a?"none":"non-scaling-stroke").attr("class","box"),m.exit().remove(),m.each(function(e){if(e.empty)return o.select(this).attr("d","M0,0Z");var i=c.c2l(e.pos+y,!0),t=c.l2p(i-u)+l,a=c.l2p(i+h)+l,m=f?(t+a)/2:c.l2p(i)+l,S=n.whiskerwidth,A=f?t*S+(1-S)*m:c.l2p(i-p)+l,k=f?a*S+(1-S)*m:c.l2p(i+p)+l,E=c.l2p(i-u*b)+l,C=c.l2p(i+h*b)+l,x="sd"===n.sizemode,O=r.c2p(x?e.mean-e.sd:e.q1,!0),w=x?r.c2p(e.mean+e.sd,!0):r.c2p(e.q3,!0),_=s.constrain(x?r.c2p(e.mean,!0):r.c2p(e.med,!0),Math.min(O,w)+1,Math.max(O,w)-1),D=void 0===e.lf||!1===n.boxpoints||x,F=r.c2p(D?e.min:e.lf,!0),T=r.c2p(D?e.max:e.uf,!0),M=r.c2p(e.ln,!0),z=r.c2p(e.un,!0);j?o.select(this).attr("d","M"+_+","+E+"V"+C+"M"+O+","+t+"V"+a+(d?"H"+M+"L"+_+","+C+"L"+z+","+a:"")+"H"+w+"V"+t+(d?"H"+z+"L"+_+","+E+"L"+M+","+t:"")+"Z"+(v?"M"+O+","+m+"H"+F+"M"+w+","+m+"H"+T+(0===g?"":"M"+F+","+A+"V"+k+"M"+T+","+A+"V"+k):"")):o.select(this).attr("d","M"+E+","+_+"H"+C+"M"+t+","+O+"H"+a+(d?"V"+M+"L"+C+","+_+"L"+a+","+z:"")+"V"+w+"H"+t+(d?"V"+z+"L"+E+","+_+"L"+t+","+M:"")+"Z"+(v?"M"+m+","+O+"V"+F+"M"+m+","+w+"V"+T+(0===g?"":"M"+A+","+F+"H"+k+"M"+A+","+T+"H"+k):""))})}function a(e,t,n,o){var i,a,h=t.x,l=t.y,d=o.bdPos,u=o.bPos,r=n.boxpoints||n.points;s.seedPseudoRandom(),a=e.selectAll("g.points").data(r?function(e){return e.forEach(function(e){e.t=o,e.trace=n}),e}:[]),a.enter().append("g").attr("class","points"),a.exit().remove(),i=a.selectAll("path").data(function(e){var t,a,b,o=e.pts2,m=Math.max((e.max-e.min)/10,e.q3-e.q1),_=1e-9*m,y=.01*m,c=[],h=0;if(n.jitter){if(0===m)for(h=1,c=new Array(o.length),t=0;t<o.length;t++)c[t]=1;else for(t=0;t<o.length;t++){var g=Math.max(0,t-5),p=o[g].v,v=Math.min(o.length-1,t+5),f=o[v].v;"all"!==r&&(o[t].v<e.lf?f=Math.min(f,e.lf):p=Math.max(p,e.uf)),a=Math.sqrt(y*(v-g)/(f-p+_))||0,a=s.constrain(Math.abs(a),0,1),c.push(a),h=Math.max(a,h)}b=2*n.jitter/(h||1)}for(t=0;t<o.length;t++){var i=o[t],l=i.v,w=n.jitter?b*c[t]*(s.pseudoRandom()-.5):0,j=e.pos+u+d*(n.pointpos+w);"h"===n.orientation?(i.y=j,i.x=l):(i.x=j,i.y=l),"suspectedoutliers"===r&&l<e.uo&&l>e.lo&&(i.so=!0)}return o}),i.enter().append("path").classed("point",!0),i.exit().remove(),i.call(c.translatePoints,h,l)}function r(e,t,n,i){var r,c,l,u=t.val,a=t.pos,m=!!a.rangebreaks,f=i.bPos,d=i.bPosPxOffset||0,h=n.boxmean||(n.meanline||{}).visible;Array.isArray(i.bdPos)?(c=i.bdPos[0],l=i.bdPos[1]):(c=i.bdPos,l=i.bdPos),r=e.selectAll("path.mean").data("box"===n.type&&n.boxmean||"violin"===n.type&&n.box.visible&&n.meanline.visible?s.identity:[]),r.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),r.exit().remove(),r.each(function(e){var r=a.c2l(e.pos+f,!0),t=a.l2p(r-c)+d,p=a.l2p(r+l)+d,s=m?(t+p)/2:a.l2p(r)+d,i=u.c2p(e.mean,!0),g=u.c2p(e.mean-e.sd,!0),v=u.c2p(e.mean+e.sd,!0);"h"===n.orientation?o.select(this).attr("d","M"+i+","+t+"V"+p+("sd"===h?"m0,0L"+g+","+s+"L"+i+","+t+"L"+v+","+s+"Z":"")):o.select(this).attr("d","M"+t+","+i+"H"+p+("sd"===h?"m0,0L"+s+","+g+"L"+t+","+i+"L"+s+","+v+"Z":""))})}e.exports={plot:function(e,t,n,c){var u=e._context.staticPlot,l=t.xaxis,d=t.yaxis;s.makeTraceGroups(c,n,"trace boxes").each(function(e){var s,c,h=o.select(this),m=e[0],t=m.t,n=m.trace;t.wdPos=t.bdPos*n.whiskerwidth,!0!==n.visible||t.empty?h.remove():("h"===n.orientation?(s=d,c=l):(s=l,c=d),i(h,{pos:s,val:c},n,t,u),a(h,{x:l,y:d},n,t),r(h,{pos:s,val:c},n,t))})},plotBoxAndWhiskers:i,plotPoints:a,plotBoxMean:r}},8264:function(e){"use strict";e.exports=function(e,t){var n,s,i=e.cd,a=e.xaxis,r=e.yaxis,c=[];if(!1===t)for(n=0;n<i.length;n++)for(s=0;s<(i[n].pts||[]).length;s++)i[n].pts[s].selected=0;else for(n=0;n<i.length;n++)for(s=0;s<(i[n].pts||[]).length;s++){var o=i[n].pts[s],l=a.c2p(o.x),d=r.c2p(o.y);t.contains([l,d],null,o.i,e)?(c.push({pointNumber:o.i,x:a.c2d(o.x),y:r.c2d(o.y)}),o.selected=1):o.selected=0}return c}},25776:function(e,t,n){"use strict";var s=n(33428),o=n(76308),i=n(43616);e.exports={style:function(e,t,n){var a=n||s.select(e).selectAll("g.trace.boxes");a.style("opacity",function(e){return e[0].trace.opacity}),a.each(function(t){var c,d,r=s.select(this),n=t[0].trace,a=n.line.width;function l(e,t,n,s){e.style("stroke-width",t+"px").call(o.stroke,n).call(o.fill,s)}c=r.selectAll("path.box"),"candlestick"===n.type?c.each(function(e){if(!e.empty){var o=s.select(this),t=n[e.dir];l(o,t.line.width,t.line.color,t.fillcolor),o.style("opacity",n.selectedpoints&&!e.selected?.3:1)}}):(l(c,a,n.line.color,n.fillcolor),r.selectAll("path.mean").style({"stroke-width":a,"stroke-dasharray":2*a+"px,"+a+"px"}).call(o.stroke,n.line.color),d=r.selectAll("path.point"),i.pointStyle(d,n,e))})},styleOnSelect:function(e,t,n){var s=t[0].trace,o=n.selectAll("path.point");s.selectedpoints?i.selectedPointStyle(o,s):i.pointStyle(o,s,e)}}},64216:function(e,t,n){"use strict";var i=n(3400).extendFlat,a=n(29736).axisHoverFormat,s=n(20279),o=n(63188);function r(e){return{line:{color:i({},o.line.color,{dflt:e}),width:o.line.width,editType:"style"},fillcolor:o.fillcolor,editType:"style"}}e.exports={xperiod:s.xperiod,xperiod0:s.xperiod0,xperiodalignment:s.xperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),x:s.x,open:s.open,high:s.high,low:s.low,close:s.close,line:{width:i({},o.line.width,{}),editType:"style"},increasing:r(s.increasing.line.color.dflt),decreasing:r(s.decreasing.line.color.dflt),text:s.text,hovertext:s.hovertext,whiskerwidth:i({},o.whiskerwidth,{dflt:0}),hoverlabel:s.hoverlabel,zorder:o.zorder}},46283:function(e,t,n){"use strict";var s=n(3400),o=n(54460),i=n(1220),a=n(42812).calcCommon;function r(e,t,n,s){return{min:n,q1:Math.min(e,s),med:s,q3:Math.max(e,s),max:t}}e.exports=function(e,t){var c=e._fullLayout,l=o.getFromId(e,t.xaxis),h=o.getFromId(e,t.yaxis),d=l.makeCalcdata(t,"x"),u=i(t,l,"x",d).vals,n=a(e,t,d,u,h,r);return n.length?(s.extendFlat(n[0].t,{num:c._numBoxes,dPos:s.distinctVals(u).minDiff/2,posLetter:"x",valLetter:"y"}),c._numBoxes++,n):[{t:{empty:!0}}]}},64588:function(e,t,n){"use strict";var o=n(3400),i=n(76308),a=n(52744),r=n(31147),c=n(64216);function s(e,t,n,s){var o=n(s+".line.color");n(s+".line.width",t.line.width),n(s+".fillcolor",i.addOpacity(o,.5))}e.exports=function(e,t,n,i){function l(n,s){return o.coerce(e,t,c,n,s)}a(e,t,l,i)?(r(e,t,i,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),s(0,t,l,"increasing"),s(0,t,l,"decreasing"),l("text"),l("hovertext"),l("whiskerwidth"),i._requestRangeslider[t.xaxis]=!0,l("zorder")):t.visible=!1}},61712:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"candlestick",basePlotModule:n(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:n(64216),layoutAttributes:n(16560),supplyLayoutDefaults:n(68832).supplyLayoutDefaults,crossTraceCalc:n(96404).crossTraceCalc,supplyDefaults:n(64588),calc:n(46283),plot:n(18728).plot,layerName:"boxlayer",style:n(25776).style,hoverPoints:n(18720).hoverPoints,selectPoints:n(97384)}},93504:function(e,t,n){"use strict";var s=n(63856),o=n(31780);e.exports=function(e,t,n,i,a){i("a")||(i("da"),i("a0")),i("b")||(i("db"),i("b0")),function(e,t,n,i){["aaxis","baxis"].forEach(function(a){var r=a.charAt(0),c=e[a]||{},l=o.newContainer(t,a),d={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:r+"axis",letter:r,font:t.font,name:a,data:e[r],calendar:t.calendar,dfltColor:i,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};s(c,l,d),l._categories=l._categories||[],e[a]||"-"===c.type||(e[a]={type:c.type})})}(e,t,n,a)}},51676:function(e,t,n){"use strict";var s=n(3400).isArrayOrTypedArray;function o(e,t){if(!s(e)||t>=10)return null;for(var a,r,n=1/0,i=-1/0,l=e.length,c=0;c<l;c++)a=e[c],s(a)?(r=o(a,t+1),r&&(n=Math.min(r[0],n),i=Math.max(r[1],i))):(n=Math.min(a,n),i=Math.max(a,i));return[n,i]}e.exports=function(e){return o(e,0)}},85720:function(e,t,n){"use strict";var a=n(25376),o=n(98692),i=n(22548),s=a({editType:"calc"}),r=n(52904).zorder;s.family.dflt='"Open Sans", verdana, arial, sans-serif',s.size.dflt=12,s.color.dflt=i.defaultLine,e.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:o,baxis:o,font:s,color:{valType:"color",dflt:i.defaultLine,editType:"plot"},transforms:void 0,zorder:r}},77712:function(e,t,n){"use strict";var s=n(3400).isArrayOrTypedArray;e.exports=function(e,t,n,o){var r,c,l,d,u,m,p,g,v,j,y,_,w,i=s(n)?"a":"b",E=("a"===i?e.aaxis:e.baxis).smoothing,O="a"===i?e.a2i:e.b2j,A="a"===i?n:o,x="a"===i?o:n,F="a"===i?t.a.length:t.b.length,M="a"===i?t.b.length:t.a.length,f=Math.floor("a"===i?e.b2j(x):e.a2i(x)),k="a"===i?function(t){return e.evalxy([],t,f)}:function(t){return e.evalxy([],f,t)};E&&(p=Math.max(0,Math.min(M-2,f)),_=f-p,y="a"===i?function(t,n){return e.dxydi([],t,p,n,_)}:function(t,n){return e.dxydj([],p,t,_,n)});var h=O(A[0]),b=O(A[1]),a=h<b?1:-1,C=1e-8*(b-h),R=a>0?Math.floor:Math.ceil,T=a>0?Math.ceil:Math.floor,z=a>0?Math.min:Math.max,D=a>0?Math.max:Math.min,N=R(h+C),L=T(b-C),S=[[m=k(h)]];for(l=N;l*a<L*a;l+=a)d=[],g=D(h,l),r=(v=z(b,l+a))-g,u=Math.max(0,Math.min(F-2,Math.floor(.5*(g+v)))),c=k(v),E&&(w=y(u,g-u),j=y(u,v-u),d.push([m[0]+w[0]/3*r,m[1]+w[1]/3*r]),d.push([c[0]-j[0]/3*r,c[1]-j[1]/3*r])),d.push(c),S.push(d),m=c;return S}},98692:function(e,t,n){"use strict";var s=n(25376),a=n(22548),o=n(94724),c=n(29736).descriptionWithDates,l=n(67824).overrideAll,r=n(98192).u,i=n(92880).extendFlat;e.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:s({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:i({},o.labelalias,{editType:"calc"}),tickfont:s({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:c("tick label")},tickformatstops:l(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:i({},r,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:i({},r,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:a.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:s({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(e,t,n){"use strict";var i=n(85720),o=n(76308).addOpacity,a=n(24040),s=n(3400),r=n(26332),c=n(95936),l=n(42568),d=n(22416),u=n(78344),h=n(52976);e.exports=function(e,t,n){var b=n.letter,v=n.font||{},w=i[b+"axis"];function m(n,o){return s.coerce(e,t,w,n,o)}function f(n,o){return s.coerce2(e,t,w,n,o)}n.name&&(t._name=n.name,t._id=n.name),m("autotypenumbers",n.autotypenumbersDflt),p=m("type"),"-"===p&&(n.data&&function(e,t){if("-"===e.type){var n=e._id.charAt(0),s=e[n+"calendar"];e.type=h(t,s,{autotypenumbers:e.autotypenumbers})}}(t,n.data),"-"===t.type?t.type="linear":p=e.type=t.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",b+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===t.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),t._hovertitle=b,"date"===p&&a.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",n.calendar),u(t,n.fullLayout),t.c2p=s.identity,g=m("color",n.dfltColor),_=g===e.color?g:v.color,m("title.text")&&(s.coerceFont(m,"title.font",{weight:v.weight,style:v.style,variant:v.variant,family:v.family,size:s.bigFont(v.size),color:_}),m("title.offset")),m("tickangle"),m("autorange",!t.isValidRange(e.range))&&m("rangemode"),m("range"),t.cleanRange(),m("fixedrange"),r(e,t,m,p),l(e,t,m,p,n),c(e,t,m,p,n),d(e,t,m,{data:n.data,dataAttr:b});var p,g,y,_,O,C,E,A=f("gridcolor",o(g,.3)),j=f("gridwidth"),k=f("griddash"),x=m("showgrid");return x||(delete t.gridcolor,delete t.gridwidth,delete t.griddash),C=f("startlinecolor",g),E=f("startlinewidth",j),m("startline",t.showgrid||!!C||!!E)||(delete t.startlinecolor,delete t.startlinewidth),O=f("endlinecolor",g),y=f("endlinewidth",j),m("endline",t.showgrid||!!O||!!y)||(delete t.endlinecolor,delete t.endlinewidth),x?(m("minorgridcount"),m("minorgridwidth",j),m("minorgriddash",k),m("minorgridcolor",o(A,.06)),t.minorgridcount||(delete t.minorgridwidth,delete t.minorgriddash,delete t.minorgridcolor)):(delete t.gridcolor,delete t.gridwidth,delete t.griddash),"none"===t.showticklabels&&(delete t.tickfont,delete t.tickangle,delete t.showexponent,delete t.exponentformat,delete t.minexponent,delete t.tickformat,delete t.showticksuffix,delete t.showtickprefix),t.showticksuffix||delete t.ticksuffix,t.showtickprefix||delete t.tickprefix,m("tickmode"),t}},58744:function(e,t,n){"use strict";var s=n(54460),o=n(3400).isArray1D,u=n(60776),a=n(51676),r=n(19216),c=n(14724),d=n(24944),l=n(26136),i=n(51512),h=n(2872),m=n(81e3);e.exports=function(e,t){var p,b,j,x,C,F=s.getFromId(e,t.xaxis),E=s.getFromId(e,t.yaxis),_=t.aaxis,w=t.baxis,n=t.x,f=t.y,y=[];n&&o(n)&&y.push("x"),f&&o(f)&&y.push("y"),y.length&&h(t,_,w,"a","b",y),j=t._a=t._a||t.a,b=t._b=t._b||t.b,n=t._x||t.x,f=t._y||t.y,p={},t._cheater&&(C="index"===_.cheatertype?j.length:j,x="index"===w.cheatertype?b.length:b,n=u(C,x,t.cheaterslope)),t._x=n=l(n),t._y=f=l(f),i(n,j,b),i(f,j,b),m(t),t.setScale();var g=a(n),v=a(f),k=.5*(g[1]-g[0]),A=.5*(g[1]+g[0]),S=.5*(v[1]-v[0]),M=.5*(v[1]+v[0]),O=1.3;return g=[A-k*O,A+k*O],v=[M-S*O,M+S*O],t._extremes[F._id]=s.findExtremes(F,g,{padded:!0}),t._extremes[E._id]=s.findExtremes(E,v,{padded:!0}),r(t,"a","b"),r(t,"b","a"),c(t,_),c(t,w),p.clipsegments=d(t._xctrl,t._yctrl,_,w),p.x=n,p.y=f,p.a=j,p.b=b,[p]}},24944:function(e){"use strict";e.exports=function(e,t,n,s){var o,i,a,l=[],d=!!n.smoothing,u=!!s.smoothing,r=e[0].length-1,c=e.length-1;for(o=0,i=[],a=[];o<=r;o++)i[o]=e[0][o],a[o]=t[0][o];for(l.push({x:i,y:a,bicubic:d}),o=0,i=[],a=[];o<=c;o++)i[o]=e[o][r],a[o]=t[o][r];for(l.push({x:i,y:a,bicubic:u}),o=r,i=[],a=[];o>=0;o--)i[r-o]=e[c][o],a[r-o]=t[c][o];for(l.push({x:i,y:a,bicubic:d}),o=c,i=[],a=[];o>=0;o--)i[c-o]=e[o][0],a[c-o]=t[o][0];return l.push({x:i,y:a,bicubic:u}),l}},19216:function(e,t,n){"use strict";var o=n(54460),s=n(92880).extendFlat;e.exports=function(e,t,n){var r,c,l,d,u,h,f,v,b,y,w,x,C,M,F,a=e["_"+t],i=e[t+"axis"],S=i._gridlines=[],A=i._minorgridlines=[],_=i._boundarylines=[],z=e["_"+n],g=e[n+"axis"];"array"===i.tickmode&&(i.tickvals=a.slice());var O=e._xctrl,k=e._yctrl,D=O[0].length,T=O.length,m=e._a.length,p=e._b.length;o.prepTicks(i),"array"===i.tickmode&&delete i.tickvals,b=i.smoothing?3:1;function j(s){var a,c,l,d,h,v,b,j,y,_,w,O,u=[],f=[],o={};if("b"===t)for(a=e.b2j(s),h=Math.floor(Math.max(0,Math.min(p-2,a))),b=a-h,o.length=p,o.crossLength=m,o.xy=function(t){return e.evalxy([],t,a)},o.dxy=function(t,n){return e.dxydi([],t,h,n,b)},c=0;c<m;c++)d=Math.min(m-2,c),j=c-d,l=e.evalxy([],c,a),g.smoothing&&c>0&&(O=e.dxydi([],c-1,h,0,b),u.push(v[0]+O[0]/3),f.push(v[1]+O[1]/3),y=e.dxydi([],c-1,h,1,b),u.push(l[0]-y[0]/3),f.push(l[1]-y[1]/3)),u.push(l[0]),f.push(l[1]),v=l;else for(c=e.a2i(s),d=Math.floor(Math.max(0,Math.min(m-2,c))),j=c-d,o.length=m,o.crossLength=p,o.xy=function(t){return e.evalxy([],c,t)},o.dxy=function(t,n){return e.dxydj([],d,t,j,n)},a=0;a<p;a++)h=Math.min(p-2,a),b=a-h,l=e.evalxy([],c,a),g.smoothing&&a>0&&(_=e.dxydj([],d,a-1,j,0),u.push(v[0]+_[0]/3),f.push(v[1]+_[1]/3),w=e.dxydj([],d,a-1,j,1),u.push(l[0]-w[0]/3),f.push(l[1]-w[1]/3)),u.push(l[0]),f.push(l[1]),v=l;return o.axisLetter=t,o.axis=i,o.crossAxis=g,o.value=s,o.constvar=n,o.index=r,o.x=u,o.y=f,o.smoothing=g.smoothing,o}function E(s){var r,c,u,h,f,l=[],d=[],o={};if(o.length=a.length,o.crossLength=z.length,"b"===t)for(c=Math.max(0,Math.min(p-2,s)),f=Math.min(1,Math.max(0,s-c)),o.xy=function(t){return e.evalxy([],t,s)},o.dxy=function(t,n){return e.dxydi([],t,c,n,f)},r=0;r<D;r++)l[r]=O[s*b][r],d[r]=k[s*b][r];else for(u=Math.max(0,Math.min(m-2,s)),h=Math.min(1,Math.max(0,s-u)),o.xy=function(t){return e.evalxy([],s,t)},o.dxy=function(t,n){return e.dxydj([],u,t,h,n)},r=0;r<T;r++)l[r]=O[r][s*b],d[r]=k[r][s*b];return o.axisLetter=t,o.axis=i,o.crossAxis=g,o.value=a[s],o.constvar=n,o.index=s,o.x=l,o.y=d,o.smoothing=g.smoothing,o}if("array"===i.tickmode){for(h=5e-15,d=(y=[Math.floor((a.length-1-i.arraytick0)/i.arraydtick*(1+h)),Math.ceil(-i.arraytick0/i.arraydtick/(1+h))].sort(function(e,t){return e-t}))[0]-1,u=y[1]+1,r=d;r<u;r++)(x=i.arraytick0+i.arraydtick*r)<0||x>a.length-1||S.push(s(E(x),{color:i.gridcolor,width:i.gridwidth,dash:i.griddash}));for(r=d;r<u;r++)if(l=i.arraytick0+i.arraydtick*r,v=Math.min(l+i.arraydtick,a.length-1),!(l<0||l>a.length-1||v<0||v>a.length-1))for(C=a[l],F=a[v],c=0;c<i.minorgridcount;c++)(M=v-l)<=0||(f=C+(F-C)*(c+1)/(i.minorgridcount+1)*(i.arraydtick/M))<a[0]||f>a[a.length-1]||A.push(s(j(f),{color:i.minorgridcolor,width:i.minorgridwidth,dash:i.minorgriddash}));i.startline&&_.push(s(E(0),{color:i.startlinecolor,width:i.startlinewidth})),i.endline&&_.push(s(E(a.length-1),{color:i.endlinecolor,width:i.endlinewidth}))}else{for(h=5e-15,d=(y=[Math.floor((a[a.length-1]-i.tick0)/i.dtick*(1+h)),Math.ceil((a[0]-i.tick0)/i.dtick/(1+h))].sort(function(e,t){return e-t}))[0],u=y[1],r=d;r<=u;r++)w=i.tick0+i.dtick*r,S.push(s(j(w),{color:i.gridcolor,width:i.gridwidth,dash:i.griddash}));for(r=d-1;r<u+1;r++)for(w=i.tick0+i.dtick*r,c=0;c<i.minorgridcount;c++)(f=w+i.dtick*(c+1)/(i.minorgridcount+1))<a[0]||f>a[a.length-1]||A.push(s(j(f),{color:i.minorgridcolor,width:i.minorgridwidth,dash:i.minorgriddash}));i.startline&&_.push(s(j(a[0]),{color:i.startlinecolor,width:i.startlinewidth})),i.endline&&_.push(s(j(a[a.length-1]),{color:i.endlinecolor,width:i.endlinewidth}))}}},14724:function(e,t,n){"use strict";var s=n(54460),o=n(92880).extendFlat;e.exports=function(e,t){var n,i,a,c=t._labels=[],r=t._gridlines;for(i=0;i<r.length;i++)n=r[i],-1!==["start","both"].indexOf(t.showticklabels)&&(a=s.tickText(t,n.value),o(a,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:n.xy(0),dxy:n.dxy(0,0),axis:n.axis,length:n.crossAxis.length,font:n.axis.tickfont,isFirst:0===i,isLast:i===r.length-1}),c.push(a)),-1!==["end","both"].indexOf(t.showticklabels)&&(a=s.tickText(t,n.value),o(a,{endAnchor:!1,xy:n.xy(n.crossLength-1),dxy:n.dxy(n.crossLength-2,1),axis:n.axis,length:n.crossAxis.length,font:n.axis.tickfont,isFirst:0===i,isLast:i===r.length-1}),c.push(a))}},62284:function(e){"use strict";e.exports=function(e,t,n,s){var c=e[0]-t[0],l=e[1]-t[1],d=n[0]-t[0],u=n[1]-t[1],o=Math.pow(c*c+l*l,.25),i=Math.pow(d*d+u*u,.25),h=(i*i*c-o*o*d)*s,m=(i*i*l-o*o*u)*s,a=i*(o+i)*3,r=o*(o+i)*3;return[[t[0]+(a&&h/a),t[1]+(a&&m/a)],[t[0]-(r&&h/r),t[1]-(r&&m/r)]]}},60776:function(e,t,n){"use strict";var s=n(3400).isArrayOrTypedArray;e.exports=function(e,t,n){var o,i,c,d,u,f,p,g,v,b,l=[],m=s(e)?e.length:e,h=s(t)?t.length:t,a=s(e)?e:null,r=s(t)?t:null;a&&(v=(a.length-1)/(a[a.length-1]-a[0])/(m-1)),r&&(g=(r.length-1)/(r[r.length-1]-r[0])/(h-1)),c=1/0,d=-1/0;for(o=0;o<h;o++)for(l[o]=[],p=r?(r[o]-r[0])*g:o/(h-1),i=0;i<m;i++)u=(a?(a[i]-a[0])*v:i/(m-1))-p*n,c=Math.min(u,c),d=Math.max(u,d),l[o][i]=u;f=1/(d-c),b=-c*f;for(o=0;o<h;o++)for(i=0;i<m;i++)l[o][i]=f*l[o][i]+b;return l}},30180:function(e,t,n){"use strict";var i=n(62284),o=n(3400).ensureArray;function s(e,t,n){var s=-.5*n[0]+1.5*t[0],o=-.5*n[1]+1.5*t[1];return[(2*s+e[0])/3,(2*o+e[1])/3]}e.exports=function(e,t,n,a,r,c){var l,d,h,m,f,p,j,y,_,w,v=n[0].length,b=n.length,u=r?3*v-2:v,g=c?3*b-2:b;for(e=o(e,g),t=o(t,g),d=0;d<g;d++)e[d]=o(e[d],u),t[d]=o(t[d],u);for(f=0,l=0;f<b;f++,l+=c?3:1)for(_=e[l],y=t[l],j=n[f],w=a[f],p=0,d=0;p<v;p++,d+=r?3:1)_[d]=j[p],y[d]=w[p];if(r)for(f=0,l=0;f<b;f++,l+=c?3:1){for(p=1,d=3;p<v-1;p++,d+=3)m=i([n[f][p-1],a[f][p-1]],[n[f][p],a[f][p]],[n[f][p+1],a[f][p+1]],r),e[l][d-1]=m[0][0],t[l][d-1]=m[0][1],e[l][d+1]=m[1][0],t[l][d+1]=m[1][1];h=s([e[l][0],t[l][0]],[e[l][2],t[l][2]],[e[l][3],t[l][3]]),e[l][1]=h[0],t[l][1]=h[1],h=s([e[l][u-1],t[l][u-1]],[e[l][u-3],t[l][u-3]],[e[l][u-4],t[l][u-4]]),e[l][u-2]=h[0],t[l][u-2]=h[1]}if(c)for(d=0;d<u;d++){for(l=3;l<g-3;l+=3)m=i([e[l-3][d],t[l-3][d]],[e[l][d],t[l][d]],[e[l+3][d],t[l+3][d]],c),e[l-1][d]=m[0][0],t[l-1][d]=m[0][1],e[l+1][d]=m[1][0],t[l+1][d]=m[1][1];h=s([e[0][d],t[0][d]],[e[2][d],t[2][d]],[e[3][d],t[3][d]]),e[1][d]=h[0],t[1][d]=h[1],h=s([e[g-1][d],t[g-1][d]],[e[g-3][d],t[g-3][d]],[e[g-4][d],t[g-4][d]]),e[g-2][d]=h[0],t[g-2][d]=h[1]}if(r&&c)for(l=1;l<g;l+=(l+1)%3==0?2:1){for(d=3;d<u-3;d+=3)m=i([e[l][d-3],t[l][d-3]],[e[l][d],t[l][d]],[e[l][d+3],t[l][d+3]],r),e[l][d-1]=.5*(e[l][d-1]+m[0][0]),t[l][d-1]=.5*(t[l][d-1]+m[0][1]),e[l][d+1]=.5*(e[l][d+1]+m[1][0]),t[l][d+1]=.5*(t[l][d+1]+m[1][1]);h=s([e[l][0],t[l][0]],[e[l][2],t[l][2]],[e[l][3],t[l][3]]),e[l][1]=.5*(e[l][1]+h[0]),t[l][1]=.5*(t[l][1]+h[1]),h=s([e[l][u-1],t[l][u-1]],[e[l][u-3],t[l][u-3]],[e[l][u-4],t[l][u-4]]),e[l][u-2]=.5*(e[l][u-2]+h[0]),t[l][u-2]=.5*(t[l][u-2]+h[1])}return[e,t]}},24588:function(e){"use strict";e.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(e){"use strict";e.exports=function(e,t,n){return t&&n?function(t,n,s,o,i){t||(t=[]),n*=3,s*=3;var a,r,f,b,j,w,v=o*o,m=1-o,g=m*m,p=m*o*2,c=-3*g,h=3*(g-p),u=3*(p-v),d=3*v,y=i*i,O=y*i,l=1-i,_=l*l,x=_*l;for(r=0;r<e.length;r++)f=c*(a=e[r])[s][n]+h*a[s][n+1]+u*a[s][n+2]+d*a[s][n+3],w=c*a[s+1][n]+h*a[s+1][n+1]+u*a[s+1][n+2]+d*a[s+1][n+3],j=c*a[s+2][n]+h*a[s+2][n+1]+u*a[s+2][n+2]+d*a[s+2][n+3],b=c*a[s+3][n]+h*a[s+3][n+1]+u*a[s+3][n+2]+d*a[s+3][n+3],t[r]=x*f+3*(_*i*w+l*y*j)+O*b;return t}:t?function(t,n,s,o,i){t||(t=[]),n*=3;var a,r,l,u,d=o*o,c=1-o,h=c*c,m=c*o*2,f=-3*h,p=3*(h-m),g=3*(m-d),v=3*d,b=1-i;for(r=0;r<e.length;r++)l=f*(a=e[r])[s][n]+p*a[s][n+1]+g*a[s][n+2]+v*a[s][n+3],u=f*a[s+1][n]+p*a[s+1][n+1]+g*a[s+1][n+2]+v*a[s+1][n+3],t[r]=b*l+i*u;return t}:n?function(t,n,s,o,i){t||(t=[]),s*=3;var a,r,l,d,u,m,h=i*i,p=h*i,c=1-i,f=c*c,g=f*c;for(r=0;r<e.length;r++)l=(a=e[r])[s][n+1]-a[s][n],d=a[s+1][n+1]-a[s+1][n],m=a[s+2][n+1]-a[s+2][n],u=a[s+3][n+1]-a[s+3][n],t[r]=g*l+3*(f*i*d+c*h*m)+p*u;return t}:function(t,n,s,o,i){t||(t=[]);var a,r,c,l,d=1-i;for(a=0;a<e.length;a++)c=(r=e[a])[s][n+1]-r[s][n],l=r[s+1][n+1]-r[s+1][n],t[a]=d*c+i*l;return t}}},24464:function(e){"use strict";e.exports=function(e,t,n){return t&&n?function(t,n,s,o,i){t||(t=[]),n*=3,s*=3;var a,r,g,b,_,w,p=o*o,x=p*o,c=1-o,f=c*c,O=f*c,v=i*i,m=1-i,j=m*m,y=m*i*2,l=-3*j,d=3*(j-y),h=3*(y-v),u=3*v;for(r=0;r<e.length;r++)w=l*(a=e[r])[s][n]+d*a[s+1][n]+h*a[s+2][n]+u*a[s+3][n],_=l*a[s][n+1]+d*a[s+1][n+1]+h*a[s+2][n+1]+u*a[s+3][n+1],b=l*a[s][n+2]+d*a[s+1][n+2]+h*a[s+2][n+2]+u*a[s+3][n+2],g=l*a[s][n+3]+d*a[s+1][n+3]+h*a[s+2][n+3]+u*a[s+3][n+3],t[r]=O*w+3*(f*o*_+c*p*b)+x*g;return t}:t?function(t,n,s,o,i){t||(t=[]),n*=3;var a,r,l,d,u,m,h=i*i,p=h*i,c=1-i,f=c*c,g=f*c;for(r=0;r<e.length;r++)l=(a=e[r])[s+1][n]-a[s][n],d=a[s+1][n+1]-a[s][n+1],m=a[s+1][n+2]-a[s][n+2],u=a[s+1][n+3]-a[s][n+3],t[r]=g*l+3*(f*i*d+c*h*m)+p*u;return t}:n?function(t,n,s,o,i){t||(t=[]),s*=3;var a,r,l,h,b=1-o,u=i*i,c=1-i,m=c*c,f=c*i*2,p=-3*m,g=3*(m-f),d=3*(f-u),v=3*u;for(r=0;r<e.length;r++)l=p*(a=e[r])[s][n]+g*a[s+1][n]+d*a[s+2][n]+v*a[s+3][n],h=p*a[s][n+1]+g*a[s+1][n+1]+d*a[s+2][n+1]+v*a[s+3][n+1],t[r]=b*l+o*h;return t}:function(t,n,s,o){t||(t=[]);var a,r,c,l,d=1-o;for(a=0;a<e.length;a++)c=(r=e[a])[s+1][n]-r[s][n],l=r[s+1][n+1]-r[s][n+1],t[a]=d*c+o*l;return t}}},29056:function(e){"use strict";e.exports=function(e,t,n,s,o){var i=t-2,a=n-2;return s&&o?function(t,n,s){t||(t=[]);var o=Math.max(0,Math.min(Math.floor(n),i)),r=Math.max(0,Math.min(Math.floor(s),a)),l=Math.max(0,Math.min(1,n-o)),m=Math.max(0,Math.min(1,s-r));o*=3,r*=3;var c,h,b,j,y,O,f=l*l,v=f*l,d=1-l,u=d*d,g=u*d,_=m*m,x=_*m,p=1-m,w=p*p,C=w*p;for(h=0;h<e.length;h++)b=g*(c=e[h])[r][o]+3*(u*l*c[r][o+1]+d*f*c[r][o+2])+v*c[r][o+3],O=g*c[r+1][o]+3*(u*l*c[r+1][o+1]+d*f*c[r+1][o+2])+v*c[r+1][o+3],y=g*c[r+2][o]+3*(u*l*c[r+2][o+1]+d*f*c[r+2][o+2])+v*c[r+2][o+3],j=g*c[r+3][o]+3*(u*l*c[r+3][o+1]+d*f*c[r+3][o+2])+v*c[r+3][o+3],t[h]=C*b+3*(w*m*O+p*_*y)+x*j;return t}:s?function(t,n,s){t||(t=[]);var c,u,f,p,v,j,o=Math.max(0,Math.min(Math.floor(n),i)),r=Math.max(0,Math.min(Math.floor(s),a)),d=Math.max(0,Math.min(1,n-o)),l=Math.max(0,Math.min(1,s-r));o*=3;var g=d*d,y=g*d,h=1-d,b=h*h,_=b*h,m=1-l;for(u=0;u<e.length;u++)j=m*(c=e[u])[r][o]+l*c[r+1][o],v=m*c[r][o+1]+l*c[r+1][o+1],p=m*c[r][o+2]+l*c[r+1][o+1],f=m*c[r][o+3]+l*c[r+1][o+1],t[u]=_*j+3*(b*d*v+h*g*p)+y*f;return t}:o?function(t,n,s){t||(t=[]);var c,u,f,p,v,j,r=Math.max(0,Math.min(Math.floor(n),i)),o=Math.max(0,Math.min(Math.floor(s),a)),d=Math.max(0,Math.min(1,n-r)),l=Math.max(0,Math.min(1,s-o));o*=3;var g=l*l,y=g*l,h=1-l,b=h*h,_=b*h,m=1-d;for(u=0;u<e.length;u++)j=m*(c=e[u])[o][r]+d*c[o][r+1],v=m*c[o+1][r]+d*c[o+1][r+1],p=m*c[o+2][r]+d*c[o+2][r+1],f=m*c[o+3][r]+d*c[o+3][r+1],t[u]=_*j+3*(b*l*v+h*g*p)+y*f;return t}:function(t,n,s){t||(t=[]);var o,l,u,h,r=Math.max(0,Math.min(Math.floor(n),i)),c=Math.max(0,Math.min(Math.floor(s),a)),d=Math.max(0,Math.min(1,n-r)),m=Math.max(0,Math.min(1,s-c)),p=1-m,f=1-d;for(o=0;o<e.length;o++)h=f*(l=e[o])[c][r]+d*l[c][r+1],u=f*l[c+1][r]+d*l[c+1][r+1],t[o]=p*h+m*u;return t}}},38356:function(e,t,n){"use strict";var s=n(3400),o=n(86411),i=n(93504),a=n(85720),r=n(22548);e.exports=function(e,t,n,c){function l(n,o){return s.coerce(e,t,a,n,o)}t._clipPathId="clip"+t.uid+"carpet";var d=l("color",r.defaultLine);s.coerceFont(l,"font",c.font),l("carpet"),i(e,t,c,l,d),t.a&&t.b?(t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0),o(e,t,l)||(t.visible=!1),t._cheater&&l("cheaterslope"),l("zorder")):t.visible=!1}},95856:function(e,t,n){"use strict";e.exports={attributes:n(85720),supplyDefaults:n(38356),plot:n(164),calc:n(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:n(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(e){"use strict";e.exports=function(e,t){for(var n,s,i=e._fullData.length,o=0;o<i;o++)if(n=e._fullData[o],n.index!==t.index&&"carpet"===n.type&&(s||(s=n),n.carpet===t.carpet))return n;return s}},53416:function(e){"use strict";e.exports=function(e,t,n){if(0===e.length)return"";var s,o=[],i=n?3:1;for(s=0;s<e.length;s+=i)o.push(e[s]+","+t[s]),n&&s<e.length-i&&(o.push("C"),o.push([e[s+1]+","+t[s+1],e[s+2]+","+t[s+2]+" "].join(" ")));return o.join(n?"":"L")}},87072:function(e,t,n){"use strict";var s=n(3400).isArrayOrTypedArray;e.exports=function(e,t,n){var o;for(s(e)?e.length>t.length&&(e=e.slice(0,t.length)):e=[],o=0;o<t.length;o++)e[o]=n(t[o]);return e}},15584:function(e){"use strict";e.exports=function(e,t,n,s,o,i){var a,l=o[0]*e.dpdx(t),m=o[1]*e.dpdy(n),r=1,c=1;if(i){var d=Math.sqrt(o[0]*o[0]+o[1]*o[1]),u=Math.sqrt(i[0]*i[0]+i[1]*i[1]),h=(o[0]*i[0]+o[1]*i[1])/d/u;c=Math.max(0,h)}return a=180*Math.atan2(m,l)/Math.PI,a<-90?(a+=180,r=-r):a>90&&(a-=180,r=-r),{angle:a,flip:r,p:e.c2p(s,t,n),offsetMultplier:c}}},164:function(e,t,n){"use strict";var d,g,c=n(33428),a=n(43616),r=n(87072),p=n(53416),i=n(15584),u=n(72736),s=n(3400),h=s.strRotate,l=s.strTranslate,m=n(84284);function o(e,t,n,s,o,i,l){var u="const-"+o+"-lines",d=n.selectAll("."+u).data(i);d.enter().append("path").classed(u,!0).style("vector-effect",l?"none":"non-scaling-stroke"),d.each(function(n){var s=n,o=s.x,i=s.y,l=r([],o,e.c2p),d=r([],i,t.c2p),u="M"+p(l,d,s.smoothing);c.select(this).attr("d",u).style("stroke-width",s.width).style("stroke",s.color).style("stroke-dasharray",a.dashStyle(s.dash,s.width)).style("fill","none")}),d.exit().remove()}function f(e,t,n,s,o,r,d,m){f=r.selectAll("text."+m).data(d),f.enter().append("text").classed(m,!0);var f,p=0,g={};return f.each(function(o,r){"auto"===o.axis.tickangle?d=i(s,t,n,o.xy,o.dxy):(m=(o.axis.tickangle+180)*Math.PI/180,d=i(s,t,n,o.xy,[Math.cos(m),Math.sin(m)])),r||(g={angle:d.angle,flip:d.flip});var d,m,f=(o.endAnchor?-1:1)*d.flip,b=c.select(this).attr({"text-anchor":f>0?"start":"end","data-notex":1}).call(a.font,o.font).text(o.text).call(u.convertToTspans,e),v=a.bBox(this);b.attr("transform",l(d.p[0],d.p[1])+h(d.angle)+l(o.axis.labelpadding*f,.3*v.height)),p=Math.max(p,v.width+o.axis.labelpadding)}),f.exit().remove(),g.maxExtent=p,g}e.exports=function(e,t,n,a){var u=e._context.staticPlot,l=t.xaxis,d=t.yaxis,h=e._fullLayout._clips;s.makeTraceGroups(a,n,"trace").each(function(t){var O,x,a=c.select(this),j=t[0],n=j.trace,m=n.aaxis,g=n.baxis,y=s.ensureSingle(a,"g","minorlayer"),_=s.ensureSingle(a,"g","majorlayer"),w=s.ensureSingle(a,"g","boundarylayer"),b=s.ensureSingle(a,"g","labellayer");a.style("opacity",n.opacity),o(l,d,_,0,"a",m._gridlines,!0),o(l,d,_,0,"b",g._gridlines,!0),o(l,d,y,0,"a",m._minorgridlines,!0),o(l,d,y,0,"b",g._minorgridlines,!0),o(l,d,w,0,"a-boundary",m._boundarylines,u),o(l,d,w,0,"b-boundary",g._boundarylines,u),O=f(e,l,d,n,0,b,m._labels,"a-label"),x=f(e,l,d,n,0,b,g._labels,"b-label"),!function(e,t,n,o,a,r,c,l){var f=s.aggNums(Math.min,null,n.a),g=s.aggNums(Math.max,null,n.a),p=s.aggNums(Math.min,null,n.b),b=s.aggNums(Math.max,null,n.b),d=.5*(f+g),u=p,h=n.ab2xy(d,u,!0),m=n.dxyda_rough(d,u);void 0===c.angle&&s.extendFlat(c,i(n,a,r,h,n.dxydb_rough(d,u))),v(e,t,n,0,h,m,n.aaxis,a,r,c,"a-title"),d=f,u=.5*(p+b),h=n.ab2xy(d,u,!0),m=n.dxydb_rough(d,u),void 0===l.angle&&s.extendFlat(l,i(n,a,r,h,n.dxyda_rough(d,u))),v(e,t,n,0,h,m,n.baxis,a,r,l,"b-title")}(e,b,n,0,l,d,O,x),function(e,t,n,o,i){a=n.select("#"+e._clipPathId),a.size()||(a=n.append("clipPath").classed("carpetclip",!0));var a,c,l,d,u,f,g=s.ensureSingle(a,"path","carpetboundary"),h=t.clipsegments,m=[];for(l=0;l<h.length;l++)c=h[l],d=r([],c.x,o.c2p),u=r([],c.y,i.c2p),m.push(p(d,u,c.bicubic));f="M"+m.join("L")+"Z",a.attr("id",e._clipPathId),g.attr("d",f)}(n,j,h,l,d)})},d=m.LINE_SPACING,g=(1-m.MID_SHIFT)/d+1;function v(e,t,n,s,o,r,m,f,p,v,b){y=[],m.title.text&&y.push(m.title.text);var y,_=t.selectAll("text."+b).data(y),j=v.maxExtent;_.enter().append("text").classed(b,!0),_.each(function(){t=i(n,f,p,o,r),-1===["start","both"].indexOf(m.showticklabels)&&(j=0),s=m.title.font.size,j+=s+m.title.offset;var t,s,y=(v.angle+(v.flip<0?180:0)-t.angle+450)%360,_=y>90&&y<270,b=c.select(this);b.text(m.title.text).call(u.convertToTspans,e),_&&(j=(-u.lineCount(b)+g)*d*s-j),b.attr("transform",l(t.p[0],t.p[1])+h(t.angle)+l(0,j)).attr("text-anchor","middle").call(a.font,m.title.font)}),_.exit().remove()}},81e3:function(e,t,n){"use strict";var s=n(24588),o=n(14952).findBin,i=n(30180),a=n(29056),r=n(26435),c=n(24464);e.exports=function(e){var t=e._a,n=e._b,l=t.length,d=n.length,u=e.aaxis,h=e.baxis,f=t[0],m=t[l-1],p=n[0],g=n[d-1],v=t[t.length-1]-t[0],b=n[n.length-1]-n[0],j=v*s.RELATIVE_CULL_TOLERANCE,y=b*s.RELATIVE_CULL_TOLERANCE;f-=j,m+=j,p-=y,g+=y,e.isVisible=function(e,t){return e>f&&e<m&&t>p&&t<g},e.isOccluded=function(e,t){return e<f||e>m||t<p||t>g},e.setScale=function(){var n=e._x,s=e._y,t=i(e._xctrl,e._yctrl,n,s,u.smoothing,h.smoothing);e._xctrl=t[0],e._yctrl=t[1],e.evalxy=a([e._xctrl,e._yctrl],l,d,u.smoothing,h.smoothing),e.dxydi=r([e._xctrl,e._yctrl],u.smoothing,h.smoothing),e.dxydj=c([e._xctrl,e._yctrl],u.smoothing,h.smoothing)},e.i2a=function(e){var n=Math.max(0,Math.floor(e[0]),l-2),s=e[0]-n;return(1-s)*t[n]+s*t[n+1]},e.j2b=function(e){var t=Math.max(0,Math.floor(e[1]),l-2),s=e[1]-t;return(1-s)*n[t]+s*n[t+1]},e.ij2ab=function(t){return[e.i2a(t[0]),e.j2b(t[1])]},e.a2i=function(e){var n=Math.max(0,Math.min(o(e,t),l-2)),s=t[n],i=t[n+1];return Math.max(0,Math.min(l-1,n+(e-s)/(i-s)))},e.b2j=function(e){var t=Math.max(0,Math.min(o(e,n),d-2)),s=n[t],i=n[t+1];return Math.max(0,Math.min(d-1,t+(e-s)/(i-s)))},e.ab2ij=function(t){return[e.a2i(t[0]),e.b2j(t[1])]},e.i2c=function(t,n){return e.evalxy([],t,n)},e.ab2xy=function(s,o,i){if(!i&&(s<t[0]||s>t[l-1]|o<n[0]||o>n[d-1]))return[!1,!1];var g=e.a2i(s),v=e.b2j(o),u=e.evalxy([],g,v);if(i){var r,h,m,p,c=0,f=0,a=[];s<t[0]?(p=0,h=0,c=(s-t[0])/(t[1]-t[0])):s>t[l-1]?(p=l-2,h=1,c=(s-t[l-1])/(t[l-1]-t[l-2])):h=g-(p=Math.max(0,Math.min(l-2,Math.floor(g)))),o<n[0]?(m=0,r=0,f=(o-n[0])/(n[1]-n[0])):o>n[d-1]?(m=d-2,r=1,f=(o-n[d-1])/(n[d-1]-n[d-2])):r=v-(m=Math.max(0,Math.min(d-2,Math.floor(v)))),c&&(e.dxydi(a,p,m,h,r),u[0]+=a[0]*c,u[1]+=a[1]*c),f&&(e.dxydj(a,p,m,h,r),u[0]+=a[0]*f,u[1]+=a[1]*f)}return u},e.c2p=function(e,t,n){return[t.c2p(e[0]),n.c2p(e[1])]},e.p2x=function(e,t,n){return[t.p2c(e[0]),n.p2c(e[1])]},e.dadi=function(e){var n=Math.max(0,Math.min(t.length-2,e));return t[n+1]-t[n]},e.dbdj=function(e){var t=Math.max(0,Math.min(n.length-2,e));return n[t+1]-n[t]},e.dxyda=function(t,n,s,o){var i=e.dxydi(null,t,n,s,o),a=e.dadi(t,s);return[i[0]/a,i[1]/a]},e.dxydb=function(t,n,s,o){var i=e.dxydj(null,t,n,s,o),a=e.dbdj(n,o);return[i[0]/a,i[1]/a]},e.dxyda_rough=function(t,n,s){var o=v*(s||.1),i=e.ab2xy(t+o,n,!0),a=e.ab2xy(t-o,n,!0);return[.5*(i[0]-a[0])/o,.5*(i[1]-a[1])/o]},e.dxydb_rough=function(t,n,s){var o=b*(s||.1),i=e.ab2xy(t,n+o,!0),a=e.ab2xy(t,n-o,!0);return[.5*(i[0]-a[0])/o,.5*(i[1]-a[1])/o]},e.dpdx=function(e){return e._m},e.dpdy=function(e){return e._m}}},51512:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t,n){var o,i,a,c,d,u,h,m,f,g,v,b,j,y,w,O,x,C,E,k,S,M,F,_=[],T=[],l=e[0].length,r=e.length;function D(t,n){var s,o=0,i=0;return t>0&&void 0!==(s=e[n][t-1])&&(i++,o+=s),t<l-1&&void 0!==(s=e[n][t+1])&&(i++,o+=s),n>0&&void 0!==(s=e[n-1][t])&&(i++,o+=s),n<r-1&&void 0!==(s=e[n+1][t])&&(i++,o+=s),o/Math.max(1,i)}O=0;for(i=0;i<l;i++)for(o=0;o<r;o++)void 0===e[o][i]&&(_.push(i),T.push(o),e[o][i]=D(i,o)),O=Math.max(O,Math.abs(e[o][i]));if(!_.length)return e;var p=0,A=0,z=_.length;do{for(p=0,b=0;b<z;b++)i=_[b],o=T[b],c=0,d=0,0===i?(h=t[y=Math.min(l-1,2)],a=t[1],u=e[o][y],d+=(m=e[o][1])+(m-u)*(t[0]-a)/(a-h),c++):i===l-1&&(h=t[y=Math.max(0,l-3)],a=t[l-2],u=e[o][y],d+=(m=e[o][l-2])+(m-u)*(t[l-1]-a)/(a-h),c++),(0===i||i===l-1)&&o>0&&o<r-1&&(f=n[o+1]-n[o],d+=((x=n[o]-n[o-1])*e[o+1][i]+f*e[o-1][i])/(x+f),c++),0===o?(h=n[C=Math.min(r-1,2)],a=n[1],u=e[C][i],d+=(m=e[1][i])+(m-u)*(n[0]-a)/(a-h),c++):o===r-1&&(h=n[C=Math.max(0,r-3)],a=n[r-2],u=e[C][i],d+=(m=e[r-2][i])+(m-u)*(n[r-1]-a)/(a-h),c++),(0===o||o===r-1)&&i>0&&i<l-1&&(f=t[i+1]-t[i],d+=((x=t[i]-t[i-1])*e[o][i+1]+f*e[o][i-1])/(x+f),c++),c?d/=c:(g=t[i+1]-t[i],v=t[i]-t[i-1],E=(w=n[o+1]-n[o])*(j=n[o]-n[o-1])*(w+j),d=((k=g*v*(g+v))*(j*e[o+1][i]+w*e[o-1][i])+E*(v*e[o][i+1]+g*e[o][i-1]))/(E*(v+g)+k*(j+w))),p+=(M=(F=d-e[o][i])/O)*M,S=c?0:.85,e[o][i]+=F*(1+S);p=Math.sqrt(p)}while(A++<100&&p>1e-5)return s.log("Smoother converged to",p,"after",A,"iterations"),e}},86411:function(e,t,n){"use strict";var s=n(3400).isArray1D;e.exports=function(e,t,n){var o,i=n("x"),r=i&&i.length,a=n("y"),c=a&&a.length;return!(!r&&!c)&&(t._cheater=!i,r&&!s(i)||c&&!s(a)?t._length=null:(o=r?i.length:1/0,c&&(o=Math.min(o,a.length)),t.a&&t.a.length&&(o=Math.min(o,t.a.length)),t.b&&t.b.length&&(o=Math.min(o,t.b.length)),t._length=o),!0)}},83372:function(e,t,n){"use strict";var l=n(21776).Ks,s=n(6096),r=n(49084),a=n(45464),c=n(22548).defaultLine,o=n(92880).extendFlat,i=s.marker.line;e.exports=o({locations:{valType:"data_array",editType:"calc"},locationmode:s.locationmode,z:{valType:"data_array",editType:"calc"},geojson:o({},s.geojson,{}),featureidkey:s.featureidkey,text:o({},s.text,{}),hovertext:o({},s.hovertext,{}),marker:{line:{color:o({},i.color,{dflt:c}),width:o({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:s.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:s.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},a.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:l(),showlegend:o({},a.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(e,t,n){"use strict";var s=n(38248),i=n(39032).BADNUM,a=n(47128),r=n(20148),c=n(4500);function o(e){return e&&"string"==typeof e}e.exports=function(e,t){u=t._length,l=new Array(u),h=t.geojson?function(e){return o(e)||s(e)}:o;for(n=0;n<u;n++){var n,l,u,h,d=l[n]={},m=t.locations[n],f=t.z[n];h(m)&&s(f)?(d.loc=m,d.z=f):(d.loc=null,d.z=i),d.index=n}return r(l,t),a(e,t,{vals:t.z,containerStr:"",cLetter:"z"}),c(l,t),l}},30972:function(e,t,n){"use strict";var s=n(3400),o=n(27260),i=n(83372);e.exports=function(e,t,n,a){function r(n,o){return s.coerce(e,t,i,n,o)}var c,u,l=r("locations"),d=r("z");l&&l.length&&s.isArrayOrTypedArray(d)&&d.length?(t._length=Math.min(l.length,d.length),c=r("geojson"),("string"==typeof c&&""!==c||s.isPlainObject(c))&&(u="geojson-id"),"geojson-id"===r("locationmode",u)&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&r("marker.line.color"),r("marker.opacity"),o(e,t,a,r,{prefix:"",cLetter:"z"}),s.coerceSelectionMarkerOpacity(t,r)):t.visible=!1}},52428:function(e){"use strict";e.exports=function(e,t,n,s,o){e.location=t.location,e.z=t.z;var i=s[o];return i.fIn&&i.fIn.properties&&(e.properties=i.fIn.properties),e.ct=i.ct,e}},69224:function(e,t,n){"use strict";var s=n(54460),o=n(83372),i=n(3400).fillText;e.exports=function(e,t,n){var a,r,c,l,d=e.cd,h=d[0].trace,u=e.subplot,m=[t,n],f=[t+360,n];for(l=0;l<d.length;l++)if(r=!1,(a=d[l])._polygons){for(c=0;c<a._polygons.length;c++)a._polygons[c].contains(m)&&(r=!r),a._polygons[c].contains(f)&&(r=!r);if(r)break}if(r&&a)return e.x0=e.x1=e.xa.c2p(a.ct),e.y0=e.y1=e.ya.c2p(a.ct),e.index=a.index,e.location=a.loc,e.z=a.z,e.zLabel=s.tickText(u.mockAxis,u.mockAxis.c2l(a.z),"hover").text,e.hovertemplate=a.hovertemplate,function(e,t,n){if(!t.hovertemplate){var r=n.hi||t.hoverinfo,d=String(n.loc),a="all"===r?o.hoverinfo.flags:r.split("+"),c=-1!==a.indexOf("name"),l=-1!==a.indexOf("location"),u=-1!==a.indexOf("z"),h=-1!==a.indexOf("text"),s=[];!c&&l?e.nameOverride=d:(c&&(e.nameOverride=t.name),l&&s.push(d)),u&&s.push(e.zLabel),h&&i(n,t,s),e.extraText=s.join("<br>")}}(e,h,a),[e]}},54272:function(e,t,n){"use strict";e.exports={attributes:n(83372),supplyDefaults:n(30972),colorbar:n(96288),calc:n(7924),calcGeoJSON:n(88364).calcGeoJSON,plot:n(88364).plot,style:n(7947).style,styleOnSelect:n(7947).styleOnSelect,hoverPoints:n(69224),eventData:n(52428),selectPoints:n(17328),moduleType:"trace",name:"choropleth",basePlotModule:n(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(e,t,n){"use strict";var a=n(33428),o=n(3400),s=n(27144),r=n(59972).getTopojsonFeatures,i=n(19280).findExtremes,c=n(7947).style;e.exports={calcGeoJSON:function(e,t){for(var o,a,c,l,p,n=e[0].trace,d=t[n.geo],b=d._subplot,u=n.locationmode,v=n._length,g="geojson-id"===u?s.extractTraceFeature(e):r(n,b.topojson),f=[],h=[],m=0;m<v;m++)o=e[m],a="geojson-id"===u?o.fOut:s.locationToFeature(u,o.loc,g),a?(o.geojson=a,o.ct=a.properties.ct,o._polygons=s.feature2polygons(a),l=s.computeBbox(a),f.push(l[0],l[2]),h.push(l[1],l[3])):o.geojson=null;"geojson"===d.fitbounds&&"geojson-id"===u&&(c=s.computeBbox(s.getTraceGeojson(n)),f=[c[0],c[2]],h=[c[1],c[3]]),p={padded:!0},n._extremes.lon=i(d.lonaxis._ax,f,p),n._extremes.lat=i(d.lataxis._ax,h,p)},plot:function(e,t,n){var s=t.layers.backplot.select(".choroplethlayer");o.makeTraceGroups(s,n,"trace choropleth").each(function(t){var n=a.select(this).selectAll("path.choroplethlocation").data(o.identity);n.enter().append("path").classed("choroplethlocation",!0),n.exit().remove(),c(e,t)})}}},17328:function(e){"use strict";e.exports=function(e,t){var n,s,i,a,r,o=e.cd,l=e.xaxis,d=e.yaxis,c=[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)(s=(i=o[n]).ct)&&(a=l.c2p(s),r=d.c2p(s),t.contains([a,r],null,n,e)?(c.push({pointNumber:n,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0);return c}},7947:function(e,t,n){"use strict";var i=n(33428),a=n(76308),s=n(43616),r=n(8932);function o(e,t){var n=t[0].trace,o=t[0].node3.selectAll(".choroplethlocation"),c=n.marker||{},l=c.line||{},d=r.makeColorScaleFuncFromTrace(n);o.each(function(e){i.select(this).attr("fill",d(e.z)).call(a.stroke,e.mlc||l.color).call(s.dashLine,"",e.mlw||l.width||0).style("opacity",c.opacity)}),s.selectedPointStyle(o,n)}e.exports={style:function(e,t){t&&o(0,t)},styleOnSelect:function(e,t){var i=t[0].node3,n=t[0].trace;n.selectedpoints?s.selectedPointStyle(i.selectAll(".choroplethlocation"),n):o(0,t)}}},45608:function(e,t,n){"use strict";var s=n(83372),i=n(49084),a=n(21776).Ks,r=n(45464),o=n(92880).extendFlat;e.exports=o({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:o({},s.featureidkey,{}),below:{valType:"string",editType:"plot"},text:s.text,hovertext:s.hovertext,marker:{line:{color:o({},s.marker.line.color,{editType:"plot"}),width:o({},s.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:o({},s.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:o({},s.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:o({},s.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:s.hoverinfo,hovertemplate:a({},{keys:["properties"]}),showlegend:o({},r.showlegend,{dflt:!1})},i("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(e,t,n){"use strict";var l=n(38248),s=n(3400),a=n(8932),r=n(43616),c=n(44808).makeBlank,i=n(27144);function o(e){var n,o,i,c,t=e[0].trace,a=t._opts;if(t.selectedpoints){for(c=r.makeSelectedPointStyleFns(t),o=0;o<e.length;o++)i=e[o],i.fOut&&(i.fOut.properties.mo2=c.selectedOpacityFn(i));n={type:"identity",property:"mo2"}}else n=s.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return s.extendFlat(a.fill.paint,{"fill-opacity":n}),s.extendFlat(a.line.paint,{"line-opacity":n}),a}e.exports={convert:function(e){var t,n,h,p,b,_,r=e[0].trace,O=!0===r.visible&&0!==r._length,y={layout:{visibility:"none"},paint:{}},j={layout:{visibility:"none"},paint:{}},u=r._opts={fill:y,line:j,geojson:c()};if(!O)return u;if(b=i.extractTraceFeature(e),!b)return u;var m,f,g,w=a.makeColorScaleFuncFromTrace(r),v=r.marker,d=v.line||{};s.isArrayOrTypedArray(v.opacity)&&(m=function(e){var t=e.mo;return l(t)?+s.constrain(t,0,1):0}),s.isArrayOrTypedArray(d.color)&&(f=function(e){return e.mlc}),s.isArrayOrTypedArray(d.width)&&(g=function(e){return e.mlw});for(h=0;h<e.length;h++)t=e[h],p=t.fOut,p&&(n=p.properties,n.fc=w(t.z),m&&(n.mo=m(t)),f&&(n.mlc=f(t)),g&&(n.mlw=g(t)),t.ct=n.ct,t._polygons=i.feature2polygons(p));return _=m?{type:"identity",property:"mo"}:v.opacity,s.extendFlat(y.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":_}),s.extendFlat(j.paint,{"line-color":f?{type:"identity",property:"mlc"}:d.color,"line-width":g?{type:"identity",property:"mlw"}:d.width,"line-opacity":_}),y.layout.visibility="visible",j.layout.visibility="visible",u.geojson={type:"FeatureCollection",features:b},o(e),u},convertOnSelect:o}},9352:function(e,t,n){"use strict";var s=n(3400),o=n(27260),i=n(45608);e.exports=function(e,t,n,a){function r(n,o){return s.coerce(e,t,i,n,o)}var c=r("locations"),l=r("z"),d=r("geojson");s.isArrayOrTypedArray(c)&&c.length&&s.isArrayOrTypedArray(l)&&l.length&&("string"==typeof d&&""!==d||s.isPlainObject(d))?(r("featureidkey"),t._length=Math.min(c.length,l.length),r("below"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&r("marker.line.color"),r("marker.opacity"),o(e,t,a,r,{prefix:"",cLetter:"z"}),s.coerceSelectionMarkerOpacity(t,r)):t.visible=!1}},85404:function(e,t,n){"use strict";e.exports={attributes:n(45608),supplyDefaults:n(9352),colorbar:n(96288),calc:n(7924),plot:n(61288),hoverPoints:n(69224),eventData:n(52428),selectPoints:n(17328),styleOnSelect:function(e,t){t&&t[0].trace._glTrace.updateOnSelect(t)},getBelow:function(e,t){for(var n,i,s=t.getMapLayers(),o=s.length-2;o>=0;o--)if(n=s[o].id,"string"==typeof n&&0===n.indexOf("water"))for(i=o+1;i<s.length;i++)if("string"==typeof(n=s[i].id)&&-1===n.indexOf("plotly-"))return n},moduleType:"trace",name:"choroplethmapbox",basePlotModule:n(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(e,t,n){"use strict";var s,o=n(13504).convert,r=n(13504).convertOnSelect,i=n(47552).traceLayerPrefix;function a(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",i+t+"-fill"],["line",i+t+"-line"]],this.below=null}s=a.prototype,s.update=function(e){this._update(o(e)),e[0].trace._glTrace=this},s.updateOnSelect=function(e){this._update(r(e))},s._update=function(e){var t=this.subplot,r=this.layerList,o=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(e,o),this.below=o);for(n=0;n<r.length;n++){var n,i=r[n],c=i[0],a=i[1],s=e[c];t.setOptions(a,"setLayoutProperty",s.layout),"visible"===s.layout.visibility&&t.setOptions(a,"setPaintProperty",s.paint)}},s._addLayers=function(e,t){for(var c=this.subplot,o=this.layerList,r=this.sourceId,n=0;n<o.length;n++){var i=o[n],a=i[0],s=e[a];c.addLayer({type:a,id:i[1],source:r,layout:s.layout,paint:s.paint},t)}},s._removeLayers=function(){for(var n=this.subplot.map,t=this.layerList,e=t.length-1;e>=0;e--)n.removeLayer(t[e][1])},s.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},e.exports=function(e,t){var s=t[0].trace,n=new a(e,s.uid),r=n.sourceId,i=o(t),c=n.below=e.belowLookup["trace-"+s.uid];return e.map.addSource(r,{type:"geojson",data:i.geojson}),n._addLayers(i,c),t[0].trace._glTrace=n,n}},86040:function(e,t,n){"use strict";var l=n(49084),s=n(29736).axisHoverFormat,r=n(21776).Ks,c=n(52948),a=n(45464),i=n(92880).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["norm"]}),uhoverformat:s("u",1),vhoverformat:s("v",1),whoverformat:s("w",1),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),showlegend:i({},a.showlegend,{dflt:!1})};i(o,l("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){o[e]=c[e]}),o.hoverinfo=i({},a.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,e.exports=o},83344:function(e,t,n){"use strict";var s=n(47128);e.exports=function(e,t){for(var l=t.u,a=t.v,r=t.w,c=Math.min(t.x.length,t.y.length,t.z.length,l.length,a.length,r.length),o=-1/0,i=1/0,n=0;n<c;n++)var d=l[n],u=a[n],h=r[n],m=Math.sqrt(d*d+u*u+h*h),o=Math.max(o,m),i=Math.min(i,m);t._len=c,t._normMax=o,s(e,t,{vals:[i,o],containerStr:"",cLetter:"c"})}},6648:function(e,t,n){"use strict";var s,p=n(67792).gl_cone3d,u=n(67792).gl_cone3d.createConeMesh,d=n(3400).simpleMap,l=n(33040).parseColorScale,r=n(8932).extractOpts,c=n(3400).isArrayOrTypedArray,o=n(52094);function i(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}s=i.prototype,s.handlePick=function(e){if(e.object===this.mesh){var n,t=e.index=e.data.index,l=this.data.x[t],a=this.data.y[t],r=this.data.z[t],s=this.data.u[t],o=this.data.v[t],i=this.data.w[t];return e.traceCoordinate=[l,a,r,s,o,i,Math.sqrt(s*s+o*o+i*i)],n=this.data.hovertext||this.data.text,c(n)&&void 0!==n[t]?e.textLabel=n[t]:n&&(e.textLabel=n),!0}};var h={xaxis:0,yaxis:1,zaxis:2},m={tip:1,tail:0,cm:.25,center:.5},f={tip:1,tail:1,cm:.75,center:.5};function a(e,t){var n,a,c,u,g=e.fullSceneLayout,v=e.dataScale,s={};function i(e,t){var n=g[t],s=v[h[t]];return d(e,function(e){return n.d2l(e)*s})}return s.vectors=o(i(t.u,"xaxis"),i(t.v,"yaxis"),i(t.w,"zaxis"),t._len),s.positions=o(i(t.x,"xaxis"),i(t.y,"yaxis"),i(t.z,"zaxis"),t._len),u=r(t),s.colormap=l(t),s.vertexIntensityBounds=[u.min/t._normMax,u.max/t._normMax],s.coneOffset=m[t.anchor],a=t.sizemode,"scaled"===a?s.coneSize=t.sizeref||.5:"absolute"===a?s.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5:"raw"===a&&(s.coneSize=t.sizeref),s.coneSizemode=a,n=p(s),c=t.lightposition,n.lightPosition=[c.x,c.y,c.z],n.ambient=t.lighting.ambient,n.diffuse=t.lighting.diffuse,n.specular=t.lighting.specular,n.roughness=t.lighting.roughness,n.fresnel=t.lighting.fresnel,n.opacity=t.opacity,t._pad=f[t.anchor]*n.vectorScale*n.coneScale*t._normMax,n}s.update=function(e){this.data=e;var t=a(this.scene,e);this.mesh.update(t)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},e.exports=function(e,t){var o=e.glplot.gl,r=a(e,t),s=u(o,r),n=new i(e,t.uid);return n.mesh=s,n.data=t,s._trace=n,e.glplot.add(s),n}},86096:function(e,t,n){"use strict";var s=n(3400),o=n(27260),i=n(86040);e.exports=function(e,t,n,a){function r(n,o){return s.coerce(e,t,i,n,o)}var f,c=r("u"),l=r("v"),d=r("w"),u=r("x"),h=r("y"),m=r("z");c&&c.length&&l&&l.length&&d&&d.length&&u&&u.length&&h&&h.length&&m&&m.length?(f=r("sizemode"),r("sizeref","raw"===f?1:.5),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),o(e,t,a,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),t._length=null):t.visible=!1}},26048:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"cone",basePlotModule:n(12536),categories:["gl3d","showLegend"],attributes:n(86040),supplyDefaults:n(86096),colorbar:{min:"cmin",max:"cmax"},calc:n(83344),plot:n(6648),eventData:function(e,t){return e.norm=t.traceCoordinate[6],e},meta:{}}},67104:function(e,t,n){"use strict";var s=n(83328),i=n(52904),r=n(29736),a=r.axisHoverFormat,h=r.descriptionOnlyNumbers,u=n(49084),p=n(98192).u,d=n(25376),o=n(92880).extendFlat,c=n(69104),m=c.COMPARISON_OPS2,f=c.INTERVAL_OPS,l=i.line;e.exports=o({z:s.z,x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,text:s.text,hovertext:s.hovertext,transpose:s.transpose,xtype:s.xtype,ytype:s.ytype,xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z",1),hovertemplate:s.hovertemplate,texttemplate:o({},s.texttemplate,{}),textfont:o({},s.textfont,{}),hoverongaps:s.hoverongaps,connectgaps:o({},s.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:d({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:h("contour label")},operation:{valType:"enumerated",values:[].concat(m).concat(f),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:p,smoothing:o({},l.smoothing,{}),editType:"plot"},zorder:i.zorder},u("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(e,t,n){"use strict";var s=n(8932),o=n(19512),i=n(54444),a=n(46960);e.exports=function(e,t){if(c=o(e,t),d=c[0].z,i(t,d),r=t.contours,h=s.extractOpts(t),"heatmap"===r.coloring&&h.auto&&!1===t.autocontour){var r,c,l,d,u,h,m=r.start,p=a(r),n=r.size||1,f=Math.floor((p-m)/n)+1;isFinite(n)||(n=1,f=1),u=m-n/2,l=[u,u+f*n]}else l=d;return s.calc(e,t,{vals:l,cLetter:"z"}),c}},56008:function(e){"use strict";e.exports=function(e,t){switch(o=e[0],r=o.z,t.type){case"levels":h=Math.min(r[0][0],r[0][1]);for(n=0;n<e.length;n++)c=e[n],c.prefixBoundary=!c.edgepaths.length&&(h>c.level||c.starts.length&&h===c.level);break;case"constraint":if(o.prefixBoundary=!1,o.edgepaths.length)return;var n,o,i,r,c,l,d,h,m=o.x.length,u=o.y.length,a=-1/0,s=1/0;for(n=0;n<u;n++)s=Math.min(s,r[n][0]),s=Math.min(s,r[n][m-1]),a=Math.max(a,r[n][0]),a=Math.max(a,r[n][m-1]);for(n=1;n<m-1;n++)s=Math.min(s,r[0][n]),s=Math.min(s,r[u-1][n]),a=Math.max(a,r[0][n]),a=Math.max(a,r[u-1][n]);switch(i=t.value,t._operation){case">":i>a&&(o.prefixBoundary=!0);break;case"<":(i<s||o.starts.length&&i===s)&&(o.prefixBoundary=!0);break;case"[]":l=Math.min(i[0],i[1]),((d=Math.max(i[0],i[1]))<s||l>a||o.starts.length&&d===s)&&(o.prefixBoundary=!0);break;case"][":l=Math.min(i[0],i[1]),d=Math.max(i[0],i[1]),l<s&&d>a&&(o.prefixBoundary=!0)}}}},55296:function(e,t,n){"use strict";var s=n(8932),o=n(41076),i=n(46960);e.exports={min:"zmin",max:"zmax",calc:function(e,t,n){var a,r=t.contours,c=t.line,u=r.size||1,l=r.coloring,d=o(t,{isColorbar:!0});"heatmap"===l?(a=s.extractOpts(t),n._fillgradient=a.reversescale?s.flipScale(a.colorscale):a.colorscale,n._zrange=[a.min,a.max]):"fill"===l&&(n._fillcolor=d),n._line={color:"lines"===l?d:c.color,width:!1!==r.showlines?c.width:0,dash:c.dash},n._levels={start:r.start,end:i(r),size:u}}}},93252:function(e){"use strict";e.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(e,t,n){"use strict";var s=n(38248),c=n(17428),o=n(76308),i=o.addOpacity,l=o.opacity,a=n(69104),r=n(3400).isArrayOrTypedArray,d=a.CONSTRAINT_REDUCTION,u=a.COMPARISON_OPS2;e.exports=function(e,t,n,o,a,h){var m,f,g,p=t.contours,v=n("contours.operation");p._operation=d[v],function(e,t){var n;-1===u.indexOf(t.operation)?(e("contours.value",[0,1]),r(t.value)?t.value.length>2?t.value=t.value.slice(2):0===t.length?t.value=[0,1]:t.length<2?(n=parseFloat(t.value[0]),t.value=[n,n+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:s(t.value)&&(n=parseFloat(t.value),t.value=[n,n+1])):(e("contours.value",0),s(t.value)||(r(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}(n,p),"="===v?m=p.showlines=!0:(m=n("contours.showlines"),f=n("fillcolor",i((e.line||{}).color||a,.5))),m&&(g=n("line.color",f&&l(f)?i(t.fillcolor,1):a),n("line.width",2),n("line.dash")),n("line.smoothing"),c(n,o,g,h)}},3212:function(e,t,n){"use strict";var s=n(69104),r=n(38248);function i(e,t){var o,i=Array.isArray(t);function n(e){return r(e)?+e:null}return-1!==s.COMPARISON_OPS2.indexOf(e)?o=n(i?t[0]:t):-1!==s.INTERVAL_OPS.indexOf(e)?o=i?[n(t[0]),n(t[1])]:[n(t),n(t)]:-1!==s.SET_OPS.indexOf(e)&&(o=i?t.map(n):[n(t)]),o}function a(e){return function(t){t=i(e,t);var n=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]);return{start:n,end:s,size:s-n}}}function o(e){return function(t){return{start:t=i(e,t),end:1/0,size:1/0}}}e.exports={"[]":a("[]"),"][":a("]["),">":o(">"),"<":o("<"),"=":o("=")}},84952:function(e){"use strict";e.exports=function(e,t,n,s){var o=s("contours.start"),i=s("contours.end"),a=!1===o||!1===i,r=n("contours.size");!(a?t.autocontour=!0:n("autocontour",!1))&&r||n("ncontours")}},82172:function(e,t,n){"use strict";var s=n(3400);function o(e){return s.extendFlat({},e,{edgepaths:s.extendDeep([],e.edgepaths),paths:s.extendDeep([],e.paths),starts:s.extendDeep([],e.starts)})}e.exports=function(e,t){var n,i,r,l,a=function(e){return e.reverse()},c=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&s.warn("Contour data invalid for the specified inequality operation."),i=e[0],n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=a(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=a(i.paths[n]);for(n=0;n<i.starts.length;n++)i.starts[n]=a(i.starts[n]);return e;case"][":l=a,a=c,c=l;case"[]":for(2!==e.length&&s.warn("Contour data invalid for the specified inequality range operation."),i=o(e[0]),r=o(e[1]),n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=a(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=a(i.paths[n]);for(n=0;n<i.starts.length;n++)i.starts[n]=a(i.starts[n]);for(;r.edgepaths.length;)i.edgepaths.push(c(r.edgepaths.shift()));for(;r.paths.length;)i.paths.push(c(r.paths.shift()));for(;r.starts.length;)i.starts.push(c(r.starts.shift()));return[i]}}},57004:function(e,t,n){"use strict";var s=n(3400),d=n(51264),i=n(31147),a=n(95536),r=n(84952),c=n(97680),l=n(39096),o=n(67104);e.exports=function(e,t,n,u){function h(n,i){return s.coerce(e,t,o,n,i)}if(d(e,t,h,u)){i(e,t,u,h),h("xhoverformat"),h("yhoverformat"),h("text"),h("hovertext"),h("hoverongaps"),h("hovertemplate");var m="constraint"===h("contours.type");h("connectgaps",s.isArray1D(t.z)),m?a(e,t,h,u,n):(r(e,t,h,function(n){return s.coerce2(e,t,o,n)}),c(e,t,h,u)),t.contours&&"heatmap"===t.contours.coloring&&l(h,u),h("zorder")}else t.visible=!1}},61512:function(e,t,n){"use strict";var s=n(3400),o=n(3212),i=n(46960);e.exports=function(e,t,n){for(var a="constraint"===e.type?o[e._operation](e.value):e,d=a.size,r=[],u=i(a),c=n.trace._carpetTrace,h=c?{xaxis:c.aaxis,yaxis:c.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},l=a.start;l<u;l+=d)if(r.push(s.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},h)),r.length>1e3){s.warn("Too many contours, clipping at 1000",e);break}return r}},46960:function(e){"use strict";e.exports=function(e){return e.end+e.size/1e6}},88748:function(e,t,n){"use strict";var i=n(3400),s=n(93252);function o(e,t,n,s){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<s}function a(e,t,n,a,c){var d,y,E,z,H,w=t.join(","),p=e.crossings[w],u=function(e,t,n){var o=0,i=0;return e>20&&t?208===e||1114===e?o=0===n[0]?1:-1:i=0===n[1]?1:-1:-1!==s.BOTTOMSTART.indexOf(e)?i=1:-1!==s.LEFTSTART.indexOf(e)?o=1:-1!==s.TOPSTART.indexOf(e)?i=-1:o=-1,[o,i]}(p,n,t),l=[r(e,t,[-u[0],-u[1]])],I=e.z.length,B=e.z[0].length,A=t.slice(),P=u.slice();for(d=0;d<1e4;d++){if(p>20?(p=s.CHOOSESADDLE[p][(u[0]||u[1])<0?0:1],e.crossings[w]=s.SADDLEREMAINDER[p]):delete e.crossings[w],!(u=s.NEWDELTA[p])){i.log("Found bad marching index:",p,t,e.level);break}if(l.push(r(e,t,u)),t[0]+=u[0],t[1]+=u[1],w=t.join(","),o(l[l.length-1],l[l.length-2],a,c)&&l.pop(),H=u[0]&&(t[0]<0||t[0]>B-2)||u[1]&&(t[1]<0||t[1]>I-2),t[0]===A[0]&&t[1]===A[1]&&u[0]===P[0]&&u[1]===P[1]||n&&H)break;p=e.crossings[w]}1e4===d&&i.log("Infinite loop in contour?");var h,m,f,g,b,j,x,k,S,M,F,T,D,N,R,O=o(l[0],l[l.length-1],a,c),L=0,V=.2*e.smoothing,v=[],C=0;for(d=1;d<l.length;d++)M=l[d],T=l[d-1],void 0,void 0,F=M[2]-T[2],S=M[3]-T[3],L+=N=Math.sqrt(F*F+S*S),v.push(N);E=L/v.length*V;function _(e){return l[e%l.length]}for(d=l.length-2;d>=C;d--)if((x=v[d])<E){for(f=0,m=d-1;m>=C&&x+v[m]<E;m--)x+=v[m];if(O&&d===l.length-2)for(f=0;f<m&&x+v[f]<E;f++)x+=v[f];R=d-m+f+1,j=Math.floor((d+m+f+2)/2),D=O||d!==l.length-2?O||-1!==m?R%2?_(j):[(_(j)[0]+_(j+1)[0])/2,(_(j)[1]+_(j+1)[1])/2]:l[0]:l[l.length-1],l.splice(m+1,d-m+1,D),d=m+1,f&&(C=f),O&&(d===l.length-2?l[f]=l[l.length-1]:0===d&&(l[l.length-1]=l[0]))}for(l.splice(0,C),d=0;d<l.length;d++)l[d].length=2;if(!(l.length<2))if(O)l.pop(),e.paths.push(l);else{n||i.log("Unclosed interior contour?",e.level,A.join(","),l.join("L")),y=!1;for(h=0;h<e.edgepaths.length;h++)if(b=e.edgepaths[h],!y&&o(b[0],l[l.length-1],a,c)){l.pop(),y=!0,z=!1;for(g=0;g<e.edgepaths.length;g++)if(o((k=e.edgepaths[g])[k.length-1],l[0],a,c)){z=!0,l.shift(),e.edgepaths.splice(h,1),g===h?e.paths.push(l.concat(k)):(g>h&&g--,e.edgepaths[g]=k.concat(l,b));break}z||(e.edgepaths[h]=l.concat(b))}for(h=0;h<e.edgepaths.length&&!y;h++)o((b=e.edgepaths[h])[b.length-1],l[0],a,c)&&(l.shift(),e.edgepaths[h]=b.concat(l),y=!0);y||e.edgepaths.push(l)}}function r(e,t,n){var i,a,d,u,s=t[0]+Math.max(n[0],0),o=t[1]+Math.max(n[1],0),l=e.z[o][s],r=e.xaxis,c=e.yaxis;return n[1]?(i=(e.level-l)/(e.z[o][s+1]-l),d=(1!==i?(1-i)*r.c2l(e.x[s]):0)+(0!==i?i*r.c2l(e.x[s+1]):0),[r.c2p(r.l2c(d),!0),c.c2p(e.y[o],!0),s+i,o]):(a=(e.level-l)/(e.z[o+1][s]-l),u=(1!==a?(1-a)*c.c2l(e.y[o]):0)+(0!==a?a*c.c2l(e.y[o+1]):0),[r.c2p(e.x[s],!0),c.c2p(c.l2c(u),!0),s,o+a])}e.exports=function(e,t,n){var s,o,r,c;for(t=t||.01,n=n||.01,r=0;r<e.length;r++){for(s=e[r],c=0;c<s.starts.length;c++)a(s,s.starts[c],"edge",t,n);for(o=0;Object.keys(s.crossings).length&&o<1e4;)o++,a(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,t,n);1e4===o&&i.log("Infinite loop in contour?")}}},38200:function(e,t,n){"use strict";var s=n(76308),o=n(55512);e.exports=function(e,t,n,i,a){a||(a={}),a.isContour=!0;var r=o(e,t,n,i,a);return r&&r.forEach(function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&s.opacity(t.fillcolor)?e.color=s.addOpacity(t.fillcolor,1):t.contours.showlines&&s.opacity(t.line.color)&&(e.color=s.addOpacity(t.line.color,1)))}),r}},66240:function(e,t,n){"use strict";e.exports={attributes:n(67104),supplyDefaults:n(57004),calc:n(20688),plot:n(23676).plot,style:n(52440),colorbar:n(55296),hoverPoints:n(38200),moduleType:"trace",name:"contour",basePlotModule:n(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t,n,o){if(o||(o={}),e("contours.showlabels")){var i=t.font;s.coerceFont(e,"contours.labelfont",{weight:i.weight,style:i.style,variant:i.variant,family:i.family,size:i.size,color:n}),e("contours.labelformat")}!1!==o.hasHover&&e("zhoverformat")}},41076:function(e,t,n){"use strict";var o=n(33428),s=n(8932),i=n(46960);e.exports=function(e){var j,l=e.contours,u=l.start,m=i(l),h=l.size||1,p=Math.floor((m-u)/h)+1,b="lines"===l.coloring?0:1,f=s.extractOpts(e);isFinite(h)||(h=1,p=1);var n,d,v=f.reversescale?s.flipScale(f.colorscale):f.colorscale,g=v.length,c=new Array(g),t=new Array(g),a=f.min,r=f.max;if("heatmap"===l.coloring){for(n=0;n<g;n++)d=v[n],c[n]=d[0]*(r-a)+a,t[n]=d[1];var y=o.extent([a,r,l.start,l.start+h*(p-1)]),_=y[a<r?0:1],w=y[a<r?1:0];_!==a&&(c.splice(0,0,_),t.splice(0,0,t[0])),w!==r&&(c.push(w),t.push(t[t.length-1]))}else{j=e._input&&"number"==typeof e._input.zmin&&"number"==typeof e._input.zmax;for(j&&(u<=a||m>=r)&&(u<=a&&(u=a),m>=r&&(m=r),p=Math.floor((m-u)/h)+1,b=0),n=0;n<g;n++)d=v[n],c[n]=(d[0]*(p+b-1)-b/2)*h+u,t[n]=d[1];(j||e.autocontour)&&(c[0]>a&&(c.unshift(a),t.unshift(t[0])),c[c.length-1]<r&&(c.push(r),t.push(t[t.length-1])))}return s.makeColorScaleFunc({domain:c,range:t},{noNumericCheck:!0})}},72424:function(e,t,n){"use strict";var s=n(93252);function o(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);return 5===n||10===n?e>(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4?5===n?713:1114:5===n?104:208:15===n?0:n}e.exports=function(e){var t,n,i,a,c,l,d,m,f,r=e[0].z,u=r.length,h=r[0].length,p=2===u||2===h;for(n=0;n<u-1;n++)for(a=[],0===n&&(a=a.concat(s.BOTTOMSTART)),n===u-2&&(a=a.concat(s.TOPSTART)),t=0;t<h-1;t++)for(i=a.slice(),0===t&&(i=i.concat(s.LEFTSTART)),t===h-2&&(i=i.concat(s.RIGHTSTART)),f=t+","+n,m=[[r[n][t],r[n][t+1]],[r[n+1][t],r[n+1][t+1]]],d=0;d<e.length;d++)(c=o((l=e[d]).level,m))&&(l.crossings[f]=c,-1!==i.indexOf(c)&&(l.starts.push([t,n]),p&&-1!==i.indexOf(c,i.indexOf(c)+1)&&l.starts.push([t,n])))}},23676:function(e,t,n){"use strict";var a=n(33428),s=n(3400),i=n(43616),b=n(8932),m=n(72736),l=n(54460),d=n(78344),v=n(41420),u=n(72424),f=n(88748),g=n(61512),p=n(82172),c=n(56008),r=n(93252),o=r.LABELOPTIMIZER;function h(e,t){var n,o,r,c,l,h,m,f,d="",a=0,u=e.edgepaths.map(function(e,t){return t}),p=!0;function v(e){return Math.abs(e[1]-t[2][1])<.01}function b(e){return Math.abs(e[0]-t[0][0])<.01}function g(e){return Math.abs(e[0]-t[2][0])<.01}for(;u.length;){for(h=i.smoothopen(e.edgepaths[a],e.smoothing),d+=p?h:h.replace(/^M/,"L"),u.splice(u.indexOf(a),1),n=e.edgepaths[a][e.edgepaths[a].length-1],l=-1,m=0;m<4;m++){if(!n){s.log("Missing end?",a,e);break}for(f=n,Math.abs(f[1]-t[0][1])<.01&&!g(n)?o=t[1]:b(n)?o=t[0]:v(n)?o=t[3]:g(n)&&(o=t[2]),c=0;c<e.edgepaths.length;c++)r=e.edgepaths[c][0],Math.abs(n[0]-o[0])<.01?Math.abs(n[0]-r[0])<.01&&(r[1]-n[1])*(o[1]-r[1])>=0&&(o=r,l=c):Math.abs(n[1]-o[1])<.01?Math.abs(n[1]-r[1])<.01&&(r[0]-n[0])*(o[0]-r[0])>=0&&(o=r,l=c):s.log("endpt to newendpt is not vert. or horz.",n,o,r);if(n=o,l>=0)break;d+="L"+o}if(l===e.edgepaths.length){s.log("unclosed perimeter path");break}a=l,(p=-1===u.indexOf(a))&&(a=u[0],d+="Z")}for(a=0;a<e.paths.length;a++)d+=i.smoothclosed(e.paths[a],e.smoothing);return d}function j(e,t,n,i){var d,g=t.width/2,_=t.height/2,c=e.x,l=e.y,r=e.theta,u=Math.cos(r)*g,h=Math.sin(r)*g,y=(c>i.center?i.right-c:c-i.left)/(u+Math.abs(Math.sin(r)*_)),p=(l>i.middle?i.bottom-l:l-i.top)/(Math.abs(h)+Math.cos(r)*_);if(y<1||p<1)return 1/0;d=o.EDGECOST*(1/(y-1)+1/(p-1)),d+=o.ANGLECOST*r*r;for(var E=c-u,C=l-h,x=c+u,O=l+h,m=0;m<n.length;m++){var a=n[m],w=Math.cos(a.theta)*a.width/2,j=Math.sin(a.theta)*a.width/2,b=2*s.segmentDistance(E,C,x,O,a.x-w,a.y-j,a.x+w,a.y+j)/(t.height+a.height),v=a.level===t.level,f=v?o.SAMELEVELDISTANCE:1;if(b<=f)return 1/0;d+=o.NEIGHBORCOST*(v?o.SAMELEVELFACTOR:1)/(b-f)}return d}function y(e){var t,s,o=e.trace._emptypoints,n=[],a=e.z.length,r=e.z[0].length,i=[];for(t=0;t<r;t++)i.push(1);for(t=0;t<a;t++)n.push(i.slice());for(t=0;t<o.length;t++)n[(s=o[t])[0]][s[1]]=0;return e.zmask=n,n}t.plot=function(e,n,o,l){var d=n.xaxis,m=n.yaxis;s.makeTraceGroups(l,o,"contour").each(function(o){var j=a.select(this),b=o[0],F=b.trace,O=b.x,x=b.y,l=F.contours,_=g(l,n,b),T=s.ensureSingle(j,"g","heatmapcoloring"),E=[];"heatmap"===l.coloring&&(E=[o]),v(e,n,E,T),u(_),f(_);var k=d.c2p(O[0],!0),A=d.c2p(O[O.length-1],!0),S=m.c2p(x[0],!0),M=m.c2p(x[x.length-1],!0),w=[[k,M],[A,M],[A,S],[k,S]],C=_;"constraint"===l.type&&(C=p(_,l._operation)),function(e,t,n){var o=s.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"===n.coloring?[0]:[]);o.enter().append("path"),o.exit().remove(),o.attr("d","M"+t.join("L")+"Z").style("stroke","none")}(j,w,l),function(e,t,n,o){var i,r="fill"===o.coloring||"constraint"===o.type&&"="!==o._operation,l="M"+n.join("L")+"Z";r&&c(t,o),i=s.ensureSingle(e,"g","contourfill").selectAll("path").data(r?t:[]),i.enter().append("path"),i.exit().remove(),i.each(function(e){var t=(e.prefixBoundary?l:"")+h(e,n);t?a.select(this).attr("d",t).style("stroke","none"):a.select(this).remove()})}(j,C,w,l),function(e,n,o,c,l){var P=o._context.staticPlot,C=s.ensureSingle(e,"g","contourlines"),j=!1!==l.showlines,u=l.showlabels,x=j&&u,O=t.createLines(C,j||u,n,P),R=t.createLineClip(C,x,o,c.trace.uid),b=e.selectAll("g.contourlabels").data(u?[0]:[]);if(b.exit().remove(),b.enter().append("g").classed("contourlabels",!0),u){h=[],p=[],s.clearLocationCache();var h,p,w,F,L=t.labelFormatter(o,c),_=i.tester.append("text").attr("data-notex",1).call(i.font,l.labelfont),f=n[0].xaxis,m=n[0].yaxis,v=f._length,g=m._length,E=f.range,k=m.range,N=s.aggNums(Math.min,null,c.x),D=s.aggNums(Math.max,null,c.x),z=s.aggNums(Math.min,null,c.y),T=s.aggNums(Math.max,null,c.y),y=Math.max(f.c2p(N,!0),0),M=Math.min(f.c2p(D,!0),v),S=Math.max(m.c2p(T,!0),0),A=Math.min(m.c2p(z,!0),g),d={};E[0]<E[1]?(d.left=y,d.right=M):(d.left=M,d.right=y),k[0]<k[1]?(d.top=S,d.bottom=A):(d.top=A,d.bottom=S),d.middle=(d.top+d.bottom)/2,d.center=(d.left+d.right)/2,h.push([[d.left,d.top],[d.right,d.top],[d.right,d.bottom],[d.left,d.bottom]]),w=Math.sqrt(v*v+g*g),F=r.LABELDISTANCE*w/Math.max(1,n.length/r.LABELINCREASE),O.each(function(e){var n=t.calcTextOpts(e.level,L,_,o);a.select(this).selectAll("path").each(function(){if(e=s.getVisibleSegment(this,d,n.height/2),e&&!(e.len<(n.width+n.height)*r.LABELMIN))for(var e,o,a=Math.min(Math.ceil(e.len/F),r.LABELMAX),i=0;i<a;i++){if(o=t.findBestTextLocation(this,e,n,p,d),!o)break;t.addLabelData(o,n,p,h)}})}),_.remove(),t.drawLabels(b,p,o,R,x?h:null)}u&&!j&&O.remove()}(j,_,e,b,l),function(e,t,n,o,a){var r,d=o.trace,p=n._fullLayout._clips,l="clip"+d.uid,m=p.selectAll("#"+l).data(d.connectgaps?[]:[0]);m.enter().append("clipPath").classed("contourclip",!0).attr("id",l),m.exit().remove(),!1===d.connectgaps?(r={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:o.x,y:o.y,z:y(o),smoothing:0},u([r]),f([r]),c([r],{type:"levels"}),s.ensureSingle(m,"path","").attr("d",(r.prefixBoundary?"M"+a.join("L")+"Z":"")+h(r,a))):l=null,i.setClipUrl(e,l,n)}(j,n,e,b,w)})},t.createLines=function(e,t,n,s){var a,r,c=n[0].smoothing,o=e.selectAll("g.contourlevel").data(t?n:[]);return(o.exit().remove(),o.enter().append("g").classed("contourlevel",!0),t)&&(a=o.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths}),a.exit().remove(),a.enter().append("path").classed("openline",!0),a.attr("d",function(e){return i.smoothopen(e,c)}).style("stroke-miterlimit",1).style("vector-effect",s?"none":"non-scaling-stroke"),r=o.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths}),r.exit().remove(),r.enter().append("path").classed("closedline",!0),r.attr("d",function(e){return i.smoothclosed(e,c)}).style("stroke-miterlimit",1).style("vector-effect",s?"none":"non-scaling-stroke")),o},t.createLineClip=function(e,t,n,s){var o=t?"clipline"+s:null,a=n._fullLayout._clips.selectAll("#"+o).data(t?[0]:[]);return a.exit().remove(),a.enter().append("clipPath").classed("contourlineclip",!0).attr("id",o),i.setClipUrl(e,o,n),a},t.labelFormatter=function(e,t){var i,a,r=e._fullLayout,c=t.trace,o=c.contours,n={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};return o.labelformat?(n.tickformat=o.labelformat,d(n,r)):(a=b.extractOpts(c),a&&a.colorbar&&a.colorbar._axis?n=a.colorbar._axis:("constraint"===o.type?(i=o.value,s.isArrayOrTypedArray(i)?n.range=[i[0],i[i.length-1]]:n.range=[i,i]):(n.range=[o.start,o.end],n.nticks=(o.end-o.start)/o.size),n.range[0]===n.range[1]&&(n.range[1]+=n.range[0]||1),n.nticks||(n.nticks=1e3),d(n,r),l.prepTicks(n),n._tmin=null,n._tmax=null)),function(e){return l.tickText(n,e).text}},t.calcTextOpts=function(e,t,n,s){a=t(e),n.text(a).call(m.convertToTspans,s);var a,r=n.node(),o=i.bBox(r,!0);return{text:a,width:o.width,height:o.height,fontSize:+r.style["font-size"].replace("px",""),level:e,dy:(o.top+o.bottom)/2}},t.findBestTextLocation=function(e,t,n,i,a){l=n.width,t.isClosed?(r=t.len/o.INITIALSEARCHPOINTS,d=t.min+r/2,h=t.max):(r=(t.len-l)/(o.INITIALSEARCHPOINTS+1),d=t.min+r+l/2,h=t.max-(r+l)/2);for(var r,c,l,d,h,m,f,g,v,u=1/0,p=0;p<o.ITERATIONS;p++){for(c=d;c<h;c+=r)m=s.getTextLocation(e,t.total,c,l),f=j(m,n,i,a),f<u&&(u=f,v=m,g=c);if(u>2*o.MAXCOST)break;p&&(r/=2),h=(d=g-r/2)+1.5*r}if(u<=o.MAXCOST)return v},t.addLabelData=function(e,t,n,s){var c=t.fontSize,o=t.width+c/3,i=Math.max(0,t.height-c/3),l=e.x,d=e.y,r=e.theta,u=Math.sin(r),h=Math.cos(r),a=function(e,t){return[l+e*h-t*u,d+e*u+t*h]},m=[a(-o/2,-i/2),a(-o/2,i/2),a(o/2,i/2),a(o/2,-i/2)];n.push({text:t.text,x:l,y:d,dy:t.dy,theta:r,level:t.level,width:o,height:i}),s.push(m)},t.drawLabels=function(e,t,n,o,i){if(r=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta}),r.exit().remove(),r.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy,s=e.y-Math.cos(e.theta)*e.dy;a.select(this).text(e.text).attr({x:t,y:s,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+s+")"}).call(m.convertToTspans,n)}),i){for(var r,l="",c=0;c<i.length;c++)l+="M"+i[c].join("L")+"Z";s.ensureSingle(o,"path","").attr("d",l)}}},54444:function(e,t,n){"use strict";var s=n(54460),o=n(3400);function i(e,t,n){var o={type:"linear",range:[e,t]};return s.autoTicks(o,(t-e)/(n||15)),o}e.exports=function(e,t){if(n=e.contours,e.autocontour)a=e.zmin,r=e.zmax,(e.zauto||void 0===a)&&(a=o.aggNums(Math.min,null,t)),(e.zauto||void 0===r)&&(r=o.aggNums(Math.max,null,t)),c=i(a,r,e.ncontours),n.size=c.dtick,n.start=s.tickFirst(c),c.range.reverse(),n.end=s.tickFirst(c),n.start===a&&(n.start+=n.size),n.end===r&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),e._input.contours||(e._input.contours={}),o.extendFlat(e._input.contours,{start:n.start,end:n.end,size:n.size}),e._input.autocontour=!0;else if("constraint"!==n.type){var n,a,r,c,h,l=n.start,d=n.end,u=e._input.contours;l>d&&(n.start=u.start=d,d=n.end=u.end=l,l=n.start),n.size>0||(h=l===d?1:i(l,d,e.ncontours).dtick,u.size=n.size=h)}}},52440:function(e,t,n){"use strict";var s=n(33428),o=n(43616),i=n(41648),a=n(41076);e.exports=function(e){var t=s.select(e).selectAll("g.contour");t.style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t,r,i=s.select(this),c=e[0].trace,n=c.contours,l=c.line,f=n.size||1,p=n.start,u="constraint"===n.type,h=!u&&"lines"===n.coloring,m=!u&&"fill"===n.coloring,d=h||m?a(c):null;i.selectAll("g.contourlevel").each(function(e){s.select(this).selectAll("path").call(o.lineGroupStyle,l.width,h?d(e.level):l.color,l.dash)}),t=n.labelfont,i.selectAll("g.contourlabels text").each(function(e){o.font(s.select(this),{weight:t.weight,style:t.style,variant:t.variant,family:t.family,size:t.size,color:t.color||(h?d(e.level):l.color)})}),u?i.selectAll("g.contourfill path").style("fill",c.fillcolor):m&&(i.selectAll("g.contourfill path").style("fill",function(e){return void 0===r&&(r=e.level),d(e.level+.5*f)}),void 0===r&&(r=p),i.selectAll("g.contourbg path").style("fill",d(r-.5*f)))}),i(e)}},97680:function(e,t,n){"use strict";var s=n(27260),o=n(17428);e.exports=function(e,t,n,i,a){var c,r=n("contours.coloring"),l="";"fill"===r&&(c=n("contours.showlines")),!1!==c&&("lines"!==r&&(l=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==r&&(!0!==e.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,s(e,t,i,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),o(n,i,l,a)}},37960:function(e,t,n){"use strict";var s=n(83328),i=n(67104),a=n(49084),r=n(92880).extendFlat,o=i.contours;e.exports=r({carpet:{valType:"string",editType:"calc"},z:s.z,a:s.x,a0:s.x0,da:s.dx,b:s.y,b0:s.y0,db:s.dy,text:s.text,hovertext:s.hovertext,transpose:s.transpose,atype:s.xtype,btype:s.ytype,fillcolor:i.fillcolor,autocontour:i.autocontour,ncontours:i.ncontours,contours:{type:o.type,start:o.start,end:o.end,size:o.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:o.showlines,showlabels:o.showlabels,labelfont:o.labelfont,labelformat:o.labelformat,operation:o.operation,value:o.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i.line.color,width:i.line.width,dash:i.line.dash,smoothing:i.line.smoothing,editType:"plot"},zorder:i.zorder,transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},30572:function(e,t,n){"use strict";var l=n(47128),o=n(3400),i=n(2872),a=n(26136),r=n(70448),c=n(11240),s=n(35744),d=n(3252),u=n(50948),h=n(54444);e.exports=function(e,t){if(n=t._carpetTrace=u(e,t),n&&n.visible&&"legendonly"!==n.visible){if(!t.a||!t.b){var n,p,f=e.data[n.index],m=e.data[t.index];m.a||(m.a=f.a),m.b||(m.b=f.b),d(m,t,t._defaultColor,e._fullLayout)}return p=function(e,t){var n,d,h,f,p,g,v,b=t._carpetTrace,u=b.aaxis,m=b.baxis;u._minDtick=0,m._minDtick=0,o.isArray1D(t.z)&&i(t,u,m,"a","b",["z"]),d=t._a=t._a||t.a,h=t._b=t._b||t.b,d=d?u.makeCalcdata(t,"_a"):[],h=h?m.makeCalcdata(t,"_b"):[],g=t.a0||0,v=t.da||1,f=t.b0||0,p=t.db||1,n=t._z=a(t._z||t.z,t.transpose),t._emptypoints=c(n),r(n,t._emptypoints);var j=o.maxRowLength(n),y="scaled"===t.xtype?"":d,_=s(t,y,g,v,j,u),w="scaled"===t.ytype?"":h,O={a:_,b:s(t,w,f,p,n.length,m),z:n};return"levels"===t.contours.type&&"none"!==t.contours.coloring&&l(e,t,{vals:n,containerStr:"",cLetter:"z"}),[O]}(e,t),h(t,t._z),p}}},3252:function(e,t,n){"use strict";var s=n(3400),i=n(51264),o=n(37960),a=n(95536),r=n(84952),c=n(97680);e.exports=function(e,t,n,l){function d(n,i){return s.coerce(e,t,o,n,i)}if(d("carpet"),e.a&&e.b){if(!i(e,t,d,l,"a","b"))return void(t.visible=!1);d("text"),"constraint"===d("contours.type")?a(e,t,d,l,n,{hasHover:!1}):(r(e,t,d,function(n){return s.coerce2(e,t,o,n)}),c(e,t,d,l,{hasHover:!1}))}else t._defaultColor=n,t._length=null;d("zorder")}},40448:function(e,t,n){"use strict";e.exports={attributes:n(37960),supplyDefaults:n(3252),colorbar:n(55296),calc:n(30572),plot:n(94440),style:n(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:n(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(e,t,n){"use strict";var c=n(33428),a=n(87072),d=n(53416),i=n(43616),s=n(3400),v=n(72424),f=n(88748),o=n(23676),r=n(93252),b=n(82172),j=n(61512),p=n(56008),g=n(50948),l=n(77712);function m(e,t,n){var i=e.getPointAtLength(t),a=e.getPointAtLength(n),s=a.x-i.x,o=a.y-i.y,r=Math.sqrt(s*s+o*o);return[s/r,o/r]}function u(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function h(e,t){var n=Math.abs(e[0]*t[0]+e[1]*t[1]);return Math.sqrt(1-n*n)/n}e.exports=function(e,t,n,y){var _=t.xaxis,w=t.yaxis;s.makeTraceGroups(y,n,"contour").each(function(n){var T=c.select(this),k=n[0],M=k.trace,x=M._carpetTrace=g(e,M),S=e.calcdata[x.index][0];if(x.visible&&"legendonly"!==x.visible){var A,F,z,D,N,L,P,H,I,O=k.a,y=k.b,E=M.contours,C=j(E,t,k),V="constraint"===E.type,B=E._operation,R=V?"="===B?"lines":"fill":E.coloring,W=[[O[0],y[y.length-1]],[O[O.length-1],y[y.length-1]],[O[O.length-1],y[0]],[O[0],y[0]]];v(C),H=1e-8*(O[O.length-1]-O[0]),P=1e-8*(y[y.length-1]-y[0]),f(C,H,P),z=C,"constraint"===E.type&&(z=b(C,B)),function(e,t){var n,s,o,i,a,r,c,l,d;for(a=0;a<e.length;a++){for(l=(o=e[a]).pedgepaths=[],d=o.ppaths=[],s=0;s<o.edgepaths.length;s++){for(i=o.edgepaths[s],r=[],n=0;n<i.length;n++)r[n]=t(i[n]);l.push(r)}for(s=0;s<o.paths.length;s++){for(i=o.paths[s],c=[],n=0;n<i.length;n++)c[n]=t(i[n]);d.push(c)}}}(C,$),D=[];for(F=S.clipsegments.length-1;F>=0;F--)A=S.clipsegments[F],L=a([],A.x,_.c2p),N=a([],A.y,w.c2p),L.reverse(),N.reverse(),D.push(d(L,N,A.bicubic));I="M"+D.join("L")+"Z",!function(e,t,n,o,i,r){var c,l,h,m,f,u=s.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"!==r||i?[]:[0]);u.enter().append("path"),u.exit().remove(),h=[];for(l=0;l<t.length;l++)c=t[l],m=a([],c.x,n.c2p),f=a([],c.y,o.c2p),h.push(d(m,f,c.bicubic));u.attr("d","M"+h.join("L")+"Z").style("stroke","none")}(T,S.clipsegments,_,w,V,R),function(e,t,n,o,a,r,d,u,h,m,f){var g,v="fill"===m;v&&p(a,e.contours),g=s.ensureSingle(t,"g","contourfill").selectAll("path").data(v?a:[]),g.enter().append("path"),g.exit().remove(),g.each(function(e){var t=(e.prefixBoundary?f:"")+function(e,t,n,o,a,r,c,d){var u,h,m,f,p,g,_,w,A,v="",b=t.edgepaths.map(function(e,t){return t}),S=!0,j=1e-4*Math.abs(n[0][0]-n[2][0]),y=1e-4*Math.abs(n[0][1]-n[2][1]);function C(e){return Math.abs(e[1]-n[0][1])<y}function E(e){return Math.abs(e[1]-n[2][1])<y}function k(e){return Math.abs(e[0]-n[0][0])<j}function O(e){return Math.abs(e[0]-n[2][0])<j}function x(e,t){var n,s,o,i,h,u="";for(C(e)&&!O(e)||E(e)&&!k(e)?(i=a.aaxis,s=l(a,r,[e[0],t[0]],.5*(e[1]+t[1]))):(i=a.baxis,s=l(a,r,.5*(e[0]+t[0]),[e[1],t[1]])),n=1;n<s.length;n++)for(u+=i.smoothing?"C":"L",o=0;o<s[n].length;o++)h=s[n][o],u+=[c.c2p(h[0]),d.c2p(h[1])]+" ";return u}for(h=0,u=null;b.length;){A=t.edgepaths[h][0];for(u&&(v+=x(u,A)),w=i.smoothopen(t.edgepaths[h].map(o),t.smoothing),v+=S?w:w.replace(/^M/,"L"),b.splice(b.indexOf(h),1),u=t.edgepaths[h][t.edgepaths[h].length-1],g=-1,_=0;_<4;_++){if(!u){s.log("Missing end?",h,t);break}for(C(u)&&!O(u)?m=n[1]:k(u)?m=n[0]:E(u)?m=n[3]:O(u)&&(m=n[2]),p=0;p<t.edgepaths.length;p++)f=t.edgepaths[p][0],Math.abs(u[0]-m[0])<j?Math.abs(u[0]-f[0])<j&&(f[1]-u[1])*(m[1]-f[1])>=0&&(m=f,g=p):Math.abs(u[1]-m[1])<y?Math.abs(u[1]-f[1])<y&&(f[0]-u[0])*(m[0]-f[0])>=0&&(m=f,g=p):s.log("endpt to newendpt is not vert. or horz.",u,m,f);if(g>=0)break;v+=x(u,m),u=m}if(g===t.edgepaths.length){s.log("unclosed perimeter path");break}h=g,(S=-1===b.indexOf(h))&&(h=b[0],v+=x(u,m)+"Z",u=null)}for(h=0;h<t.paths.length;h++)v+=i.smoothclosed(t.paths[h].map(o),t.smoothing);return v}(0,e,r,d,u,h,n,o);t?c.select(this).attr("d",t).style("stroke","none"):c.select(this).remove()})}(M,T,_,w,z,W,$,x,S,R,I),function(e,t,n,a,l,d,f){var k=n._context.staticPlot,O=s.ensureSingle(e,"g","contourlines"),j=!1!==l.showlines,v=l.showlabels,C=j&&v,E=o.createLines(O,j||v,t,k),F=o.createLineClip(O,C,n,a.trace.uid),b=e.selectAll("g.contourlabels").data(v?[0]:[]);if(b.exit().remove(),b.enter().append("g").classed("contourlabels",!0),v){var M=d.xaxis,A=d.yaxis,p=M._length,g=A._length,_=[[[0,0],[p,0],[p,g],[0,g]]],y=[];s.clearLocationCache();var S=o.labelFormatter(n,a),x=i.tester.append("text").attr("data-notex",1).call(i.font,l.labelfont),w={left:0,right:p,center:p/2,top:0,bottom:g,middle:g/2},T=Math.sqrt(p*p+g*g),z=r.LABELDISTANCE*T/Math.max(1,t.length/r.LABELINCREASE);E.each(function(e){var t=o.calcTextOpts(e.level,S,x,n);c.select(this).selectAll("path").each(function(n){var c,l,d,a=this,i=s.getVisibleSegment(a,w,t.height/2);if(i&&(function(e,t,n,s,o,i){for(r=0;r<n.pedgepaths.length;r++)t===n.pedgepaths[r]&&(a=n.edgepaths[r]);if(a){var a,r,v=o.a[0],b=o.a[o.a.length-1],j=o.b[0],f=o.b[o.b.length-1],p=m(e,0,1),g=m(e,s.total,s.total-1),c=d(a[0],p),l=s.total-d(a[a.length-1],g);s.min<c&&(s.min=c),s.max>l&&(s.max=l),s.len=s.max-s.min}function d(e,t){var a,s=0,n=.1;return(Math.abs(e[0]-v)<n||Math.abs(e[0]-b)<n)&&(a=u(o.dxydb_rough(e[0],e[1],n)),s=Math.max(s,i*h(t,a)/2)),(Math.abs(e[1]-j)<n||Math.abs(e[1]-f)<n)&&(a=u(o.dxyda_rough(e[0],e[1],n)),s=Math.max(s,i*h(t,a)/2)),s}}(a,n,e,i,f,t.height),!(i.len<(t.width+t.height)*r.LABELMIN)))for(d=Math.min(Math.ceil(i.len/z),r.LABELMAX),c=0;c<d;c++){if(l=o.findBestTextLocation(a,i,t,y,w),!l)break;o.addLabelData(l,t,y,_)}})}),x.remove(),o.drawLabels(b,y,n,F,C?_:null)}v&&!j&&E.remove()}(T,C,e,k,E,t,x),i.setClipUrl(T,x._clipPathId,e)}function $(e){var t=x.ab2xy(e[0],e[1],!0);return[_.c2p(t[0]),w.c2p(t[1])]}})}},33928:function(e,t,n){"use strict";var a=n(49084),r=n(21776).Ks,i=n(45464),s=n(31512),o=n(92880).extendFlat;e.exports=o({lon:s.lon,lat:s.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:s.text,hovertext:s.hovertext,hoverinfo:o({},i.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:r(),showlegend:o({},i.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(e,t,n){"use strict";var s=n(38248),a=n(3400).isArrayOrTypedArray,o=n(39032).BADNUM,r=n(47128),i=n(3400)._;e.exports=function(e,t){for(var u,l=t._length,d=new Array(l),c=t.z,h=a(c)&&c.length,n=0;n<l;n++){var m=d[n]={},f=t.lon[n],p=t.lat[n];m.lonlat=s(f)&&s(p)?[+f,+p]:[o,o],h&&(u=c[n],m.z=s(u)?u:o)}return r(e,t,{vals:h?c:[0,1],containerStr:"",cLetter:"z"}),l&&(d[0].t={labels:{lat:i(e,"lat:")+" ",lon:i(e,"lon:")+" "}}),d}},4629:function(e,t,n){"use strict";var r=n(38248),s=n(3400),o=n(76308),i=n(8932),a=n(39032).BADNUM,c=n(44808).makeBlank;e.exports=function(e){var n=e[0].trace,x=!0===n.visible&&0!==n._length,d=n._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:c()};if(!x)return d;var t,m,p,g,v,O,_=[],y=n.z,u=n.radius,j=s.isArrayOrTypedArray(y)&&y.length,b=s.isArrayOrTypedArray(u);for(t=0;t<e.length;t++)v=e[t],p=v.lonlat,p[0]!==a&&(m={},j&&(g=v.z,m.z=g!==a?g:0),b&&(m.r=r(u[t])&&u[t]>0?+u[t]:0),_.push({type:"Feature",geometry:{type:"Point",coordinates:p},properties:m}));var l=i.extractOpts(n),h=l.reversescale?i.flipScale(l.colorscale):l.colorscale,f=h[0][1],w=["interpolate",["linear"],["heatmap-density"],0,o.opacity(f)<1?f:o.addOpacity(f,0)];for(t=1;t<h.length;t++)w.push(h[t][0],h[t][1]);return O=["interpolate",["linear"],["get","z"],l.min,0,l.max,1],s.extendFlat(d.heatmap.paint,{"heatmap-weight":j?O:1/(l.max-l.min),"heatmap-color":w,"heatmap-radius":b?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),d.geojson={type:"FeatureCollection",features:_},d.heatmap.layout.visibility="visible",d}},97664:function(e,t,n){"use strict";var s=n(3400),o=n(27260),i=n(33928);e.exports=function(e,t,n,a){function r(n,o){return s.coerce(e,t,i,n,o)}var l=r("lon")||[],d=r("lat")||[],c=Math.min(l.length,d.length);c?(t._length=c,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),o(e,t,a,r,{prefix:"",cLetter:"z"})):t.visible=!1}},96176:function(e){"use strict";e.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e.z=t.z,e}},25336:function(e,t,n){"use strict";var s=n(54460),o=n(63312).hoverPoints,i=n(63312).getExtraText;e.exports=function(e,t,n){if(c=o(e,t,n),c){var c,d,a=c[0],l=a.cd,u=l[0].trace,r=l[a.index];return(delete a.color,"z"in r)&&(d=a.subplot.mockAxis,a.z=r.z,a.zLabel=s.tickText(d,d.c2l(r.z),"hover").text),a.extraText=i(u,r,l[0].t.labels),[a]}}},15088:function(e,t,n){"use strict";e.exports={attributes:n(33928),supplyDefaults:n(97664),colorbar:n(96288),formatLabels:n(11960),calc:n(90876),plot:n(35256),hoverPoints:n(25336),eventData:n(96176),getBelow:function(e,t){for(var n,o,i=t.getMapLayers(),s=0;s<i.length;s++)if(o=i[s],n=o.id,"symbol"===o.type&&"string"==typeof n&&-1===n.indexOf("plotly-"))return n},moduleType:"trace",name:"densitymapbox",basePlotModule:n(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(e,t,n){"use strict";var s,o=n(4629),a=n(47552).traceLayerPrefix;function i(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",a+t+"-heatmap"]],this.below=null}s=i.prototype,s.update=function(e){var n,t=this.subplot,r=this.layerList,s=o(e),i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(s.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(s,i),this.below=i);for(n=0;n<r.length;n++){var c=r[n],d=c[0],l=c[1],a=s[d];t.setOptions(l,"setLayoutProperty",a.layout),"visible"===a.layout.visibility&&t.setOptions(l,"setPaintProperty",a.paint)}},s._addLayers=function(e,t){for(var c=this.subplot,o=this.layerList,r=this.sourceId,n=0;n<o.length;n++){var i=o[n],a=i[0],s=e[a];c.addLayer({type:a,id:i[1],source:r,layout:s.layout,paint:s.paint},t)}},s._removeLayers=function(){for(var n=this.subplot.map,t=this.layerList,e=t.length-1;e>=0;e--)n.removeLayer(t[e][1])},s.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},e.exports=function(e,t){var s=t[0].trace,n=new i(e,s.uid),r=n.sourceId,a=o(t),c=n.below=e.belowLookup["trace-"+s.uid];return e.map.addSource(r,{type:"geojson",data:a.geojson}),n._addLayers(a,c),n}},74248:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){for(var n,i,o=0;o<e.length;o++)e[o].i=o;s.mergeArray(t.text,e,"tx"),s.mergeArray(t.hovertext,e,"htx"),n=t.marker,n&&(s.mergeArray(n.opacity,e,"mo"),s.mergeArray(n.color,e,"mc"),i=n.line,i&&(s.mergeArray(i.color,e,"mlc"),s.mergeArrayCastPositive(i.width,e,"mlw")))}},20088:function(e,t,n){"use strict";var i,s=n(20832),a=n(52904).line,l=n(45464),r=n(29736).axisHoverFormat,d=n(21776).Ks,u=n(21776).Gw,c=n(74732),o=n(92880).extendFlat,h=n(76308);e.exports={x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),hovertext:s.hovertext,hovertemplate:d({},{keys:c.eventDataKeys}),hoverinfo:o({},l.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:u({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),text:s.text,textposition:s.textposition,insidetextanchor:o({},s.insidetextanchor,{dflt:"middle"}),textangle:o({},s.textangle,{dflt:0}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:s.outsidetextfont,constraintext:s.constraintext,cliponaxis:s.cliponaxis,orientation:o({},s.orientation,{}),offset:o({},s.offset,{arrayOk:!1}),width:o({},s.width,{arrayOk:!1}),marker:(i=o({},s.marker),delete i.pattern,delete i.cornerradius,i),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:o({},a.color,{dflt:h.defaultLine}),width:o({},a.width,{dflt:0,editType:"plot"}),dash:a.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,zorder:s.zorder}},23096:function(e,t,n){"use strict";var i=n(54460),a=n(1220),r=n(74248),c=n(4500),s=n(39032).BADNUM;function o(e){return e===s?0:e}e.exports=function(e,t){var n,l,d,u,h,m,f,p,g,j,y,_,v=i.getFromId(e,t.xaxis||"x"),b=i.getFromId(e,t.yaxis||"y");"h"===t.orientation?(u=v.makeCalcdata(t,"x"),f=b.makeCalcdata(t,"y"),m=a(t,b,"y",f),g=!!t.yperiodalignment,p="y"):(u=b.makeCalcdata(t,"y"),f=v.makeCalcdata(t,"x"),m=a(t,v,"x",f),g=!!t.xperiodalignment,p="x"),y=m.vals,h=Math.min(y.length,u.length),l=new Array(h);for(t._base=[],n=0;n<h;n++)u[n]<0&&(u[n]=s),_=!1,u[n]!==s&&n+1<h&&u[n+1]!==s&&(_=!0),d=l[n]={p:y[n],s:u[n],cNext:_},t._base[n]=-.5*d.s,g&&(l[n].orig_p=f[n],l[n][p+"End"]=m.ends[n],l[n][p+"Start"]=m.starts[n]),t.ids&&(d.id=String(t.ids[n])),0===n&&(l[0].vTotal=0),l[0].vTotal+=o(d.s),d.begR=o(d.s)/o(l[0].s);for(n=0;n<h;n++)(d=l[n]).s!==s&&(d.sumR=d.s/l[0].vTotal,d.difR=void 0!==j?d.s/j:1,j=d.s);return r(l,t),c(l,t),l}},74732:function(e){"use strict";e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(e,t,n){"use strict";var s=n(96376).setGroupPositions;e.exports=function(e,t){var n,o,i,a,d,p,r=e._fullLayout,h=e._fullData,g=e.calcdata,c=t.xaxis,l=t.yaxis,u=[],m=[],f=[];for(i=0;i<h.length;i++)a=h[i],p="h"===a.orientation,!0===a.visible&&a.xaxis===c._id&&a.yaxis===l._id&&"funnel"===a.type&&(n=g[i],p?f.push(n):m.push(n),u.push(n));d={mode:r.funnelmode,norm:r.funnelnorm,gap:r.funnelgap,groupgap:r.funnelgroupgap};for(s(e,c,l,m,d),s(e,l,c,f,d),i=0;i<u.length;i++){n=u[i];for(o=0;o<n.length;o++)o+1<n.length&&(n[o].nextP0=n[o+1].p0,n[o].nextS0=n[o+1].s0,n[o].nextP1=n[o+1].p1,n[o].nextS1=n[o+1].s1)}}},45432:function(e,t,n){"use strict";var s=n(3400),a=n(20011),r=n(31508).handleText,c=n(43980),l=n(31147),i=n(20088),o=n(76308);e.exports={supplyDefaults:function(e,t,n,a){function d(n,o){return s.coerce(e,t,i,n,o)}if(c(e,t,a,d)){l(e,t,a,d),d("xhoverformat"),d("yhoverformat"),d("orientation",t.y&&!t.x?"v":"h"),d("offset"),d("width");var u,h,m=d("text");d("hovertext"),d("hovertemplate"),u=d("textposition"),r(e,t,a,d,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===t.textposition||t.texttemplate||d("textinfo",s.isArrayOrTypedArray(m)?"text+value":"value"),h=d("marker.color",n),d("marker.line.color",o.defaultLine),d("marker.line.width"),d("connector.visible")&&(d("connector.fillcolor",function(e){var t=s.isArrayOrTypedArray(e)?"#000":e;return o.addOpacity(t,.5*o.opacity(t))}(h)),d("connector.line.width")&&(d("connector.line.color"),d("connector.line.dash"))),d("zorder")}else t.visible=!1},crossTraceDefaults:function(e,t){function c(e){return s.coerce(n._input,n,i,e)}if("group"===t.funnelmode)for(var n,r,o=0;o<e.length;o++)r=(n=e[o])._input,a(r,n,t,c)}}},34580:function(e){"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(e.percentInitial=t.percentInitial),"percentPrevious"in t&&(e.percentPrevious=t.percentPrevious),"percentTotal"in t&&(e.percentTotal=t.percentTotal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},31488:function(e,t,n){"use strict";var o=n(76308).opacity,i=n(63400).hoverOnBars,s=n(3400).formatPercent;e.exports=function(e,t,n,a,r){if(c=i(e,t,n,a,r),c){var c,d,u,f=c.cd,h=f[0].trace,v="h"===h.orientation,l=f[c.index];if(c[(v?"x":"y")+"LabelVal"]=l.s,c.percentInitial=l.begR,c.percentInitialLabel=s(l.begR,1),c.percentPrevious=l.difR,c.percentPreviousLabel=s(l.difR,1),c.percentTotal=l.sumR,c.percentTotalLabel=s(l.sumR,1),d=l.hi||h.hoverinfo,u=[],d&&"none"!==d&&"skip"!==d){var p="all"===d,g=d.split("+"),m=function(e){return p||-1!==g.indexOf(e)};m("percent initial")&&u.push(c.percentInitialLabel+" of initial"),m("percent previous")&&u.push(c.percentPreviousLabel+" of previous"),m("percent total")&&u.push(c.percentTotalLabel+" of total")}return c.extraText=u.join("<br>"),c.color=function(e,t){var n=e.marker,s=t.mc||n.color,i=t.mlc||n.line.color,a=t.mlw||n.line.width;return o(s)?s:o(i)&&a?i:void 0}(h,l),[c]}}},94704:function(e,t,n){"use strict";e.exports={attributes:n(20088),layoutAttributes:n(7076),supplyDefaults:n(45432).supplyDefaults,crossTraceDefaults:n(45432).crossTraceDefaults,supplyLayoutDefaults:n(11631),calc:n(23096),crossTraceCalc:n(4804),plot:n(42200),style:n(44544).style,hoverPoints:n(31488),eventData:n(34580),selectPoints:n(45784),moduleType:"trace",name:"funnel",basePlotModule:n(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(e){"use strict";e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(e,t,n){"use strict";var s=n(3400),o=n(7076);e.exports=function(e,t,n){var i,r,c=!1;function a(n,i){return s.coerce(e,t,o,n,i)}for(i=0;i<n.length;i++)if(r=n[i],r.visible&&"funnel"===r.type){c=!0;break}c&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},42200:function(e,t,n){"use strict";var i=n(33428),s=n(3400),a=n(43616),o=n(39032).BADNUM,c=n(98184),l=n(82744).clearMinTextSize;function r(e,t,n,s){var o=[],i=[],a=s?t:n,r=s?n:t;return o[0]=a.c2p(e.s0,!0),i[0]=r.c2p(e.p0,!0),o[1]=a.c2p(e.s1,!0),i[1]=r.c2p(e.p1,!0),o[2]=a.c2p(e.nextS0,!0),i[2]=r.c2p(e.nextP0,!0),o[3]=a.c2p(e.nextS1,!0),i[3]=r.c2p(e.nextP1,!0),s?[o,i]:[i,o]}e.exports=function(e,t,n,d){var u=e._fullLayout;l("funnel",u),function(e,t,n,c){var l=t.xaxis,d=t.yaxis;s.makeTraceGroups(c,n,"trace bars").each(function(n){var c,h,f,p=i.select(this),u=n[0].trace,m=s.ensureSingle(p,"g","regions");u.connector&&u.connector.visible?(h="h"===u.orientation,c=m.selectAll("g.region").data(s.identity),c.enter().append("g").classed("region",!0),c.exit().remove(),f=c.size(),c.each(function(n,c){if(c===f-1||n.cNext){var g=r(n,l,d,h),u=g[0],m=g[1],p="";u[0]!==o&&m[0]!==o&&u[1]!==o&&m[1]!==o&&u[2]!==o&&m[2]!==o&&u[3]!==o&&m[3]!==o&&(p+=h?"M"+u[0]+","+m[1]+"L"+u[2]+","+m[2]+"H"+u[3]+"L"+u[1]+","+m[1]+"Z":"M"+u[1]+","+m[1]+"L"+u[2]+","+m[3]+"V"+m[2]+"L"+u[1]+","+m[0]+"Z"),""===p&&(p="M0,0Z"),s.ensureSingle(i.select(this),"path").attr("d",p).call(a.setClipUrl,t.layerClipId,e)}})):m.remove()})}(e,t,n,d),function(e,t,n,o){var c=t.xaxis,l=t.yaxis;s.makeTraceGroups(o,n,"trace bars").each(function(n){var o,u,m,f=i.select(this),d=n[0].trace,h=s.ensureSingle(f,"g","lines");d.connector&&d.connector.visible&&d.connector.line.width?(u="h"===d.orientation,o=h.selectAll("g.line").data(s.identity),o.enter().append("g").classed("line",!0),o.exit().remove(),m=o.size(),o.each(function(n,o){if(o===m-1||n.cNext){var p=r(n,c,l,u),d=p[0],h=p[1],f="";void 0!==d[3]&&void 0!==h[3]&&(u?(f+="M"+d[0]+","+h[1]+"L"+d[2]+","+h[2],f+="M"+d[1]+","+h[1]+"L"+d[3]+","+h[2]):(f+="M"+d[1]+","+h[1]+"L"+d[2]+","+h[3],f+="M"+d[1]+","+h[0]+"L"+d[2]+","+h[2])),""===f&&(f="M0,0Z"),s.ensureSingle(i.select(this),"path").attr("d",f).call(a.setClipUrl,t.layerClipId,e)}})):h.remove()})}(e,t,n,d),c.plot(e,t,n,d,{mode:u.funnelmode,norm:u.funnelmode,gap:u.funnelgap,groupgap:u.funnelgroupgap})}},44544:function(e,t,n){"use strict";var s=n(33428),i=n(43616),o=n(76308),a=n(13448).DESELECTDIM,r=n(60100),c=n(82744).resizeText,l=r.styleTextPoints;e.exports={style:function(e,t,n){var r=n||s.select(e).selectAll('g[class^="funnellayer"]').selectAll("g.trace");c(e,r,"funnel"),r.style("opacity",function(e){return e[0].trace.opacity}),r.each(function(t){var r=s.select(this),n=t[0].trace;r.selectAll(".point > path").each(function(e){if(!e.isBlank){var t=n.marker;s.select(this).call(o.fill,e.mc||t.color).call(o.stroke,e.mlc||t.line.color).call(i.dashLine,t.line.dash,e.mlw||t.line.width).style("opacity",n.selectedpoints&&!e.selected?a:1)}}),l(r,n,e),r.selectAll(".regions").each(function(){s.select(this).selectAll("path").style("stroke-width",0).call(o.fill,n.connector.fillcolor)}),r.selectAll(".lines").each(function(){var e=n.connector.line;i.lineGroupStyle(s.select(this).selectAll("path"),e.width,e.color,e.dash)})})}}},22332:function(e,t,n){"use strict";var s=n(74996),i=n(45464),a=n(86968).u,r=n(21776).Ks,c=n(21776).Gw,o=n(92880).extendFlat;e.exports={labels:s.labels,label0:s.label0,dlabel:s.dlabel,values:s.values,marker:{colors:s.marker.colors,line:{color:o({},s.marker.line.color,{dflt:null}),width:o({},s.marker.line.width,{dflt:1}),editType:"calc"},pattern:s.marker.pattern,editType:"calc"},text:s.text,hovertext:s.hovertext,scalegroup:o({},s.scalegroup,{}),textinfo:o({},s.textinfo,{flags:["label","text","value","percent"]}),texttemplate:c({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},i.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:r({},{keys:["label","color","value","text","percent"]}),textposition:o({},s.textposition,{values:["inside","none"],dflt:"inside"}),textfont:s.textfont,insidetextfont:s.insidetextfont,title:{text:s.title.text,font:s.title.font,position:o({},s.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:a({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(e,t,n){"use strict";var s=n(7316);t.name="funnelarea",t.plot=function(e,n,o,i){s.plotBasePlot(t.name,e,n,o,i)},t.clean=function(e,n,o,i){s.cleanBasePlot(t.name,e,n,o,i)}},54e3:function(e,t,n){"use strict";var s=n(45768);e.exports={calc:function(e,t){return s.calc(e,t)},crossTraceCalc:function(e){s.crossTraceCalc(e,{type:"funnelarea"})}}},92688:function(e,t,n){"use strict";var s=n(3400),o=n(22332),i=n(86968).Q,a=n(31508).handleText,r=n(74174).handleLabelsAndValues,c=n(74174).handleMarkerDefaults;e.exports=function(e,t,n,l){function d(n,i){return s.coerce(e,t,o,n,i)}var u,h,f,g,v=d("labels"),b=d("values"),m=r(v,b),p=m.len;t._hasLabels=m.hasLabels,t._hasValues=m.hasValues,!t._hasLabels&&t._hasValues&&(d("label0"),d("dlabel")),p?(t._length=p,c(e,t,l,d),d("scalegroup"),g=d("text"),h=d("texttemplate"),h||(u=d("textinfo",Array.isArray(g)?"text+percent":"percent")),d("hovertext"),d("hovertemplate"),h||u&&"none"!==u?(f=d("textposition"),a(e,t,l,d,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})):"none"===u&&d("textposition","none"),i(t,l,d),d("title.text")&&(d("title.position"),s.coerceFont(d,"title.font",l.font)),d("aspectratio"),d("baseratio")):t.visible=!1}},62396:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"funnelarea",basePlotModule:n(91248),categories:["pie-like","funnelarea","showLegend"],attributes:n(22332),layoutAttributes:n(61280),supplyDefaults:n(92688),supplyLayoutDefaults:n(35384),calc:n(54e3).calc,crossTraceCalc:n(54e3).crossTraceCalc,plot:n(39472),style:n(62096),styleOne:n(10528),meta:{}}},61280:function(e,t,n){"use strict";var s=n(85204).hiddenlabels;e.exports={hiddenlabels:s,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(e,t,n){"use strict";var s=n(3400),o=n(61280);e.exports=function(e,t){function n(n,i){return s.coerce(e,t,o,n,i)}n("hiddenlabels"),n("funnelareacolorway",t.colorway),n("extendfunnelareacolors")}},39472:function(e,t,n){"use strict";var o=n(33428),a=n(43616),s=n(3400),f=s.strScale,c=s.strTranslate,l=n(72736),p=n(98184).toMoveInsideBar,d=n(82744),h=d.recordMinTextSize,_=d.clearMinTextSize,m=n(69656),i=n(37820),u=i.attachFxHandlers,g=i.determineInsideTextFont,v=i.layoutAreas,b=i.prerenderTitles,j=i.positionTitleOutside,y=i.formatSliceLabel;function r(e,t){return"l"+(t[0]-e[0])+","+(t[1]-e[1])}e.exports=function(e,t){var i=e._context.staticPlot,n=e._fullLayout;_("funnelarea",n),b(t,e),v(t,n._size),s.makeTraceGroups(n._funnelarealayer,t,"trace").each(function(t){var b=o.select(this),v=t[0],d=v.trace;!function(e){if(e.length){var r=e[0],f=r.trace,k=f.aspectratio,h=f.baseratio;h>.999&&(h=.999);var t,s,o,i,a,c,d,p,O=Math.pow(h,2),l=r.vTotal,A=l,_=l*O/(1-O)/l,n=[];for(n.push(x()),t=e.length-1;t>-1;t--)(s=e[t]).hidden||(p=s.v/A,_+=p,n.push(x()));a=1/0,i=-1/0;for(t=0;t<n.length;t++)o=n[t],a=Math.min(a,o[1]),i=Math.max(i,o[1]);for(t=0;t<n.length;t++)n[t][1]-=(i+a)/2;var E=n[n.length-1][0],v=r.r,b=(i-a)/2,C=v/E,y=v/b*k;for(r.r=y*b,t=0;t<n.length;t++)n[t][0]*=C,n[t][1]*=y;var u,m,w=[-(o=n[0])[0],o[1]],j=[o[0],o[1]],g=0;for(t=e.length-1;t>-1;t--)(s=e[t]).hidden||(c=n[g+=1][0],d=n[g][1],s.TL=[-c,d],s.TR=[c,d],s.BL=w,s.BR=j,s.pxmid=(u=s.TR,m=s.BR,[.5*(u[0]+m[0]),.5*(u[1]+m[1])]),w=s.TL,j=s.TR)}function x(){var e,t={x:e=Math.sqrt(_),y:-e};return[t.x,t.y]}}(t),b.each(function(){var b,_=o.select(this).selectAll("g.slice").data(t);_.enter().append("g").classed("slice",!0),_.exit().remove(),_.each(function(c,f){if(c.hidden)o.select(this).selectAll("path,g").remove();else{c.pointNumber=c.i,c.curveNumber=d.index;var b,x,C,w=v.cx,j=v.cy,_=o.select(this),O=_.selectAll("path.surface").data([c]);O.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),_.call(u,e,t),x="M"+(w+c.TR[0])+","+(j+c.TR[1])+r(c.TR,c.BR)+r(c.BR,c.BL)+r(c.BL,c.TL)+"Z",O.attr("d",x),y(e,c,v),C=m.castOption(d.textposition,c.pts),b=_.selectAll("g.slicetext").data(c.text&&"none"!==C?[0]:[]),b.enter().append("g").classed("slicetext",!0),b.exit().remove(),b.each(function(){i=s.ensureSingle(o.select(this),"text","",function(e){e.attr("data-notex",1)}),u=s.ensureUniformFontSize(e,g(d,c,n.font)),i.text(c.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(a.font,u).call(l.convertToTspans,e);var i,r,u,b=a.bBox(i.node()),y=Math.min(c.BL[1],c.BR[1])+j,_=Math.max(c.TL[1],c.TR[1])+j,m=Math.max(c.TL[0],c.BL[0])+w,v=Math.min(c.TR[0],c.BR[0])+w;(r=p(m,v,y,_,b,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=u.size,h(d.type,r,n),t[f].transform=r,s.setTransormAndDisplay(i,r)})}}),b=o.select(this).selectAll("g.titletext").data(d.title.text?[0]:[]),b.enter().append("g").classed("titletext",!0),b.exit().remove(),b.each(function(){var t,r=s.ensureSingle(o.select(this),"text","",function(e){e.attr("data-notex",1)}),i=d.title.text;d._meta&&(i=s.templateString(i,d._meta)),r.text(i).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(a.font,d.title.font).call(l.convertToTspans,e),t=j(v,n._size),r.attr("transform",c(t.x,t.y)+f(Math.min(1,t.scale))+c(t.tx,t.ty))})})})}},62096:function(e,t,n){"use strict";var s=n(33428),o=n(10528),i=n(82744).resizeText;e.exports=function(e){var t=e._fullLayout._funnelarealayer.selectAll(".trace");i(e,t,"funnelarea"),t.each(function(t){var n=t[0].trace,i=s.select(this);i.style({opacity:n.opacity}),i.selectAll("path.surface").each(function(t){s.select(this).call(o,t,n,e)})})}},83328:function(e,t,n){"use strict";var o=n(52904),d=n(45464),a=n(25376),i=n(29736).axisHoverFormat,r=n(21776).Ks,c=n(21776).Gw,l=n(49084),s=n(92880).extendFlat;e.exports=s({z:{valType:"data_array",editType:"calc"},x:s({},o.x,{impliedEdits:{xtype:"array"}}),x0:s({},o.x0,{impliedEdits:{xtype:"scaled"}}),dx:s({},o.dx,{impliedEdits:{xtype:"scaled"}}),y:s({},o.y,{impliedEdits:{ytype:"array"}}),y0:s({},o.y0,{impliedEdits:{ytype:"scaled"}}),dy:s({},o.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:s({},o.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:s({},o.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:s({},o.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:s({},o.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:s({},o.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:s({},o.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:r(),texttemplate:c({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:a({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:s({},d.showlegend,{dflt:!1}),zorder:o.zorder},{transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},19512:function(e,t,n){"use strict";var i=n(24040),a=n(3400),s=n(54460),c=n(1220),f=n(55480),m=n(47128),p=n(2872),d=n(26136),u=n(70448),h=n(11240),o=n(35744),r=n(39032).BADNUM;function l(e){for(var n,s=[],o=e.length,t=0;t<o;t++)n=e[t],n!==r&&s.push(n);return s}e.exports=function(e,t){var n,g,v,y,_,w,O,x,k,A,M,T,z,N,j=s.getFromId(e,t.xaxis||"x"),b=s.getFromId(e,t.yaxis||"y"),D=i.traceIs(t,"contour"),S=i.traceIs(t,"histogram"),B=i.traceIs(t,"gl2d"),F=D?"best":t.zsmooth;j._minDtick=0,b._minDtick=0,S?(w=(n=f(e,t)).orig_x,_=n.x,M=n.x0,A=n.dx,O=n.orig_y,y=n.y,z=n.y0,k=n.dy,v=n.z):(T=t.z,a.isArray1D(T)?(p(t,j,b,"x","y",["z"]),_=t._x,y=t._y,T=t._z):(w=t.x?j.makeCalcdata(t,"x"):[],O=t.y?b.makeCalcdata(t,"y"):[],_=c(t,j,"x",w).vals,y=c(t,b,"y",O).vals,t._x=_,t._y=y),M=t.x0,A=t.dx,z=t.y0,k=t.dy,v=d(T,t,j,b));function R(e){F=t._input.zsmooth=t.zsmooth=!1,a.warn('cannot use zsmooth: "fast": '+e)}function H(e){if(e.length>1){var t=(e[e.length-1]-e[0])/(e.length-1),n=Math.abs(t/100);for(x=0;x<e.length-1;x++)if(Math.abs(e[x+1]-e[x]-t)>n)return!1}return!0}(j.rangebreaks||b.rangebreaks)&&(v=function(e,t,n){for(var o,i=[],a=-1,s=0;s<n.length;s++)if(t[s]!==r){i[++a]=[];for(o=0;o<n[s].length;o++)e[o]!==r&&i[a].push(n[s][o])}return i}(_,y,v),S||(_=l(_),y=l(y),t._x=_,t._y=y)),S||!D&&!t.connectgaps||(t._emptypoints=h(v),u(v,t._emptypoints)),t._islinear=!1,"log"===j.type||"log"===b.type?"fast"===F&&R("log axis found"):H(_)?H(y)?t._islinear=!0:"fast"===F&&R("y scale is not linear"):"fast"===F&&R("x scale is not linear");var I=a.maxRowLength(v),C="scaled"===t.xtype?"":_,L=o(t,C,M,A,I,j),E="scaled"===t.ytype?"":y,P=o(t,E,z,k,v.length,b);return B||(t._extremes[j._id]=s.findExtremes(j,L),t._extremes[b._id]=s.findExtremes(b,P)),g={x:L,y:P,z:v,text:t._text||t.text,hovertext:t._hovertext||t.hovertext},(t.xperiodalignment&&w&&(g.orig_x=w),t.yperiodalignment&&O&&(g.orig_y=O),C&&C.length===L.length-1&&(g.xCenter=C),E&&E.length===P.length-1&&(g.yCenter=E),S&&(g.xRanges=n.xRanges,g.yRanges=n.yRanges,g.pts=n.pts),D||m(e,t,{vals:v,cLetter:"z"}),D&&t.contours&&"heatmap"===t.contours.coloring)&&(N={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar},g.xfill=o(N,C,M,A,I,j),g.yfill=o(N,E,z,k,v.length,b)),[g]}},26136:function(e,t,n){"use strict";var o=n(38248),i=n(3400),s=n(39032).BADNUM;e.exports=function(e,t,n,a){function g(e){if(o(e))return+e}if(t&&t.transpose){for(c=0,r=0;r<e.length;r++)c=Math.max(c,e[r].length);if(0===c)return!1;h=function(e){return e.length},m=function(e,t,n){return(e[n]||[])[t]}}else c=e.length,h=function(e,t){return e[t].length},m=function(e,t,n){return(e[t]||[])[n]};f=function(e,t,n){return t===s||n===s?s:m(e,t,n)};function p(e){if(t&&"carpet"!==t.type&&"contourcarpet"!==t.type&&e&&"category"===e.type&&t["_"+e._id.charAt(0)].length){var n=e._id.charAt(0),o={},a=t["_"+n+"CategoryMap"]||t[n];for(r=0;r<a.length;r++)o[a[r]]=r;return function(t){var n=o[e._categories[t]];return n+1?n:s}}return i.identity}var r,c,l,d,u,h,m,f,v=p(n),b=p(a);a&&"category"===a.type&&(c=a._categories.length),d=new Array(c);for(r=0;r<c;r++)for(u=n&&"category"===n.type?n._categories.length:h(e,r),d[r]=new Array(u),l=0;l<u;l++)d[r][l]=g(f(e,b(r),v(l)));return d}},96288:function(e){"use strict";e.exports={min:"zmin",max:"zmax"}},2872:function(e,t,n){"use strict";var s=n(3400),o=n(39032).BADNUM,i=n(1220);e.exports=function(e,t,n,a,r,c){var l,d,u,f,O,C,E,k,M=e._length,h=t.makeCalcdata(e,a),m=n.makeCalcdata(e,r),h=i(e,t,a,h).vals,m=i(e,n,r,m).vals,w=e.text,_=void 0!==w&&s.isArray1D(w),j=e.hovertext,y=void 0!==j&&s.isArray1D(j),S=s.distinctVals(h),v=S.vals,A=s.distinctVals(m),g=A.vals,x=[],p=g.length,b=v.length;for(l=0;l<c.length;l++)x[l]=s.init2dArray(p,b);_&&(C=s.init2dArray(p,b)),y&&(O=s.init2dArray(p,b)),E=s.init2dArray(p,b);for(l=0;l<M;l++)if(h[l]!==o&&m[l]!==o){f=s.findBin(h[l]+S.minDiff/2,v),u=s.findBin(m[l]+A.minDiff/2,g);for(d=0;d<c.length;d++)k=e[c[d]],x[d][u][f]=k[l],E[u][f]=l;_&&(C[u][f]=w[l]),y&&(O[u][f]=j[l])}for(e["_"+a]=v,e["_"+r]=g,d=0;d<c.length;d++)e["_"+c[d]]=x[d];_&&(e._text=C),y&&(e._hovertext=O),t&&"category"===t.type&&(e["_"+a+"CategoryMap"]=v.map(function(e){return t._categories[e]})),n&&"category"===n.type&&(e["_"+r+"CategoryMap"]=g.map(function(e){return n._categories[e]})),e._after2before=E}},24480:function(e,t,n){"use strict";var s=n(3400),o=n(51264),i=n(39096),a=n(31147),r=n(82748),c=n(27260),l=n(83328);e.exports=function(e,t,n,d){function u(n,o){return s.coerce(e,t,l,n,o)}o(e,t,u,d)?(a(e,t,d,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hovertemplate"),i(u,d),r(e,t,u,d),u("hoverongaps"),u("connectgaps",s.isArray1D(t.z)&&!1!==t.zsmooth),c(e,t,d,u,{prefix:"",cLetter:"z"}),u("zorder")):t.visible=!1}},11240:function(e,t,n){"use strict";var s=n(3400).maxRowLength;e.exports=function(e){var t,n,o,i,c,d,m,p,h=[],r={},l=[],f=e[0],a=[],u=[0,0,0],g=s(e);for(n=0;n<e.length;n++)for(p=a,a=f,f=e[n+1]||[],t=0;t<g;t++)void 0===a[t]&&((o=(void 0!==a[t-1]?1:0)+(void 0!==a[t+1]?1:0)+(void 0!==p[t]?1:0)+(void 0!==f[t]?1:0))?(0===n&&o++,0===t&&o++,n===e.length-1&&o++,t===a.length-1&&o++,o<4&&(r[[n,t]]=[n,t,o]),h.push([n,t,o])):l.push([n,t]));for(;l.length;){for(c={},m=!1,d=l.length-1;d>=0;d--)(o=((r[[(n=(i=l[d])[0])-1,t=i[1]]]||u)[2]+(r[[n+1,t]]||u)[2]+(r[[n,t-1]]||u)[2]+(r[[n,t+1]]||u)[2])/20)&&(c[i]=[n,t,o],l.splice(d,1),m=!0);if(!m)throw"findEmpties iterated with no new neighbors";for(i in c)r[i]=c[i],h.push(c[i])}return h.sort(function(e,t){return t[2]-e[2]})}},55512:function(e,t,n){"use strict";var i=n(93024),s=n(3400),o=s.isArrayOrTypedArray,a=n(54460),r=n(8932).extractOpts;e.exports=function(e,t,n,c,l){l||(l={});var d,m,p,w,O,C,A,N=l.isContour,f=e.cd[0],b=f.trace,g=e.xa,_=e.ya,h=f.x,u=f.y,M=f.z,D=f.xCenter,T=f.yCenter,z=f.zmask,R=b.zhoverformat,y=h,x=u;if(!1!==e.index){{try{m=Math.round(e.index[1]),d=Math.round(e.index[0])}catch{return void s.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(m<0||m>=M[0].length||d<0||d>M.length)return}}else{if(i.inbox(t-h[0],t-h[h.length-1],0)>0||i.inbox(n-u[0],n-u[u.length-1],0)>0)return;if(N){for(y=[2*h[0]-h[1]],p=1;p<h.length;p++)y.push((h[p]+h[p-1])/2);for(y.push([2*h[h.length-1]-h[h.length-2]]),x=[2*u[0]-u[1]],p=1;p<u.length;p++)x.push((u[p]+u[p-1])/2);x.push([2*u[u.length-1]-u[u.length-2]])}m=Math.max(0,Math.min(y.length-2,s.findBin(t,y))),d=Math.max(0,Math.min(x.length-2,s.findBin(n,x)))}var v,j,F=g.c2p(h[m]),E=g.c2p(h[m+1]),k=_.c2p(u[d]),S=_.c2p(u[d+1]);if(N?(v=f.orig_x||h,j=f.orig_y||u,E=F,C=v[m],S=k,O=j[d]):(v=f.orig_x||D||h,j=f.orig_y||T||u,C=D?v[m]:(v[m]+v[m+1])/2,O=T?j[d]:(j[d]+j[d+1])/2,g&&"category"===g.type&&(C=h[m]),_&&"category"===_.type&&(O=u[d]),b.zsmooth&&(F=E=g.c2p(C),k=S=_.c2p(O))),w=M[d][m],z&&!z[d][m]&&(w=void 0),void 0!==w||b.hoverongaps){o(f.hovertext)&&o(f.hovertext[d])?A=f.hovertext[d][m]:o(f.text)&&o(f.text[d])&&(A=f.text[d][m]);var L=r(b),P={type:"linear",range:[L.min,L.max],hoverformat:R,_separators:g._separators,_numFormat:g._numFormat},H=a.tickText(P,w,"hover").text;return[s.extendFlat(e,{index:b._after2before?b._after2before[d][m]:[d,m],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:F,x1:E,y0:k,y1:S,xLabelVal:C,yLabelVal:O,zLabelVal:w,zLabel:H,text:A})]}}},81932:function(e,t,n){"use strict";e.exports={attributes:n(83328),supplyDefaults:n(24480),calc:n(19512),plot:n(41420),colorbar:n(96288),style:n(41648),hoverPoints:n(55512),moduleType:"trace",name:"heatmap",basePlotModule:n(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(e,t,n){"use strict";var o=n(3400),i=[[-1,0],[1,0],[0,-1],[0,1]];function a(e){return.5-.25*Math.min(1,.5*e)}function s(e,t,n){var s,o,a,r,c,l,u,h,m,f,p,g,v,d=0;for(h=0;h<t.length;h++){for(s=(v=t[h])[0],o=v[1],f=e[s][o],m=0,r=0,u=0;u<4;u++)(p=e[s+(g=i[u])[0]])&&void 0!==(c=p[o+g[1]])&&(0===m?a=l=c:(a=Math.min(a,c),l=Math.max(l,c)),r++,m+=c);if(0===r)throw"iterateInterp2d order is wrong: no defined neighbors";e[s][o]=m/r,void 0===f?r<4&&(d=1):(e[s][o]=(1+n)*e[s][o]-n*f,l>a&&(d=Math.max(d,Math.abs(e[s][o]-f)/(l-a))))}return d}e.exports=function(e,t){var n,i=1;for(s(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&i>.01;n++)i=s(e,t,a(i));return i>.01&&o.log("interp2d didn't converge quickly",i),e}},39096:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){e("texttemplate");var n=s.extendFlat({},t.font,{color:"auto",size:"auto"});s.coerceFont(e,"textfont",n)}},35744:function(e,t,n){"use strict";var s=n(24040),o=n(3400).isArrayOrTypedArray;e.exports=function(e,t,n,i,a,r){var c,d,u,h,f,p,b,l=[],m=s.traceIs(e,"contour"),g=s.traceIs(e,"histogram"),v=s.traceIs(e,"gl2d");if(o(t)&&t.length>1&&!g&&"category"!==r.type){{if(d=t.length,!(d<=a))return m?t.slice(0,a):t.slice(0,a+1);if(m||v)l=Array.from(t).slice(0,a);else if(1===a)l="log"===r.type?[.5*t[0],2*t[0]]:[t[0]-.5,t[0]+.5];else if("log"===r.type){for(l=[Math.pow(t[0],1.5)/Math.pow(t[1],.5)],c=1;c<d;c++)l.push(Math.sqrt(t[c-1]*t[c]));l.push(Math.pow(t[d-1],1.5)/Math.pow(t[d-2],.5))}else{for(l=[1.5*t[0]-.5*t[1]],c=1;c<d;c++)l.push(.5*(t[c-1]+t[c]));l.push(1.5*t[d-1]-.5*t[d-2])}if(d<a)if(u=l[l.length-1],"log"===r.type)for(h=u/l[l.length-2],c=d;c<a;c++)u*=h,l.push(u);else for(h=u-l[l.length-2],c=d;c<a;c++)u+=h,l.push(u)}}else{f=e[r._id.charAt(0)+"calendar"];for(p=g?r.r2c(n,0,f):o(t)&&1===t.length?t[0]:void 0===n?0:("log"===r.type?r.d2c:r.r2c)(n,0,f),b=i||1,c=m||v?0:-.5;c<a;c++)l.push(p+b*c)}return l}},41420:function(e,t,n){"use strict";var i=n(33428),w=n(49760),_=n(24040),y=n(43616),j=n(54460),s=n(3400),l=n(72736),b=n(76688),p=n(76308),m=n(8932).extractOpts,O=n(8932).makeColorScaleFuncFromTrace,f=n(9616),o=n(84284).LINE_SPACING,g=n(9188),v=n(2264).STYLE,d="heatmap-label";function c(e){return e.selectAll("g."+d)}function r(e){c(e).remove()}function u(e,t){var i=t.length-2,a=s.constrain(s.findBin(e,t),0,i),c=t[a],l=t[a+1],o=s.constrain(a+(e-c)/(l-c)-.5,0,i),n=Math.round(o),r=Math.abs(o-n);return o&&o!==i&&r?{bin0:n,frac:r,bin1:Math.round(n+r/(o-n))}:{bin0:n,bin1:n,frac:0}}function a(e,t){var a=t.length-1,n=s.constrain(s.findBin(e,t),0,a),i=t[n],o=(e-i)/(t[n+1]-i)||0;return o<=0?{bin0:n,bin1:n,frac:0}:o<.5?{bin0:n,bin1:n+1,frac:o}:{bin0:n+1,bin1:n,frac:1-o}}function h(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}e.exports=function(e,t,n,x){var C=t.xaxis,E=t.yaxis;s.makeTraceGroups(x,n,"hm").each(function(t){var n,x,M,F,z,D,N,L,R,$,W,q,Q,Z,ye,ae=i.select(this),k=t[0],S=k.trace,fe=S.xgap||0,Ce=S.ygap||0,J=k.z,V=k.x,I=k.y,Se=k.xCenter,Te=k.yCenter,Ze=_.traceIs(S,"contour"),Oe=Ze?"best":S.zsmooth,B=J.length,P=s.maxRowLength(J),De=!1,Ie=!1,ie,ne,de,ue,se,oe,Le,te,_e,me,ze,Be,ot,tt,Ge,Ee,He,we,je,he,re,xe,ce;for(n=0;void 0===M&&n<V.length-1;)M=C.c2p(V[n]),n++;for(n=V.length-1;void 0===R&&n>0;)R=C.c2p(V[n]),n--;for(R<M&&(ye=R,R=M,M=ye,De=!0),n=0;void 0===F&&n<I.length-1;)F=E.c2p(I[n]),n++;for(n=I.length-1;void 0===N&&n>0;)N=E.c2p(I[n]),n--;if(N<F&&(ye=F,F=N,N=ye,Ie=!0),Ze&&(Se=V,Te=I,V=k.xfill,I=k.yfill),L="default",(Oe?L="best"===Oe?"smooth":"fast":S._islinear&&0===fe&&0===Ce&&g()&&(L="fast"),"fast"!==L)&&(ie="best"===Oe?0:.5,M=Math.max(-ie*C._length,M),R=Math.min((1+ie)*C._length,R),F=Math.max(-ie*E._length,F),N=Math.min((1+ie)*E._length,N)),$=Math.round(R-M),ne=Math.round(N-F),M>=C._length||R<=0||F>=E._length||N<=0)return ae.selectAll("image").data([]).exit().remove(),void r(ae);"fast"===L?(Q=P,Z=B):(Q=$,Z=ne),de=document.createElement("canvas"),de.width=Q,de.height=Z,oe=de.getContext("2d",{willReadFrequently:!0}),Le=O(S,{noNumericCheck:!0,returnArray:!0}),"fast"===L?(ue=De?function(e){return P-1-e}:s.identity,se=Ie?function(e){return B-1-e}:s.identity):(ue=function(e){return s.constrain(Math.round(C.c2p(V[e])-M),0,$)},se=function(e){return s.constrain(Math.round(E.c2p(I[e])-F),0,ne)});var T,at,ke,le,Je=se(0),A=[Je,Je],ct=De?0:1,lt=Ie?0:1,ee=0,pe=0,ge=0,ve=0;function be(e,t){if(void 0!==e){var n=Le(e);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),ee+=t,pe+=n[0]*t,ge+=n[1]*t,ve+=n[2]*t,n}return[0,0,0,0]}function ht(e,t,n,s){if(o=e[n.bin0],void 0===o)return be(void 0,1);var o,c,r=e[n.bin1],i=t[n.bin0],a=t[n.bin1],l=r-o||0,d=i-o||0;return c=void 0===r?void 0===a?0:void 0===i?2*(a-o):2*(2*a-i-o)/3:void 0===a?void 0===i?0:2*(2*o-r-i)/3:void 0===i?2*(2*a-r-o)/3:a+o-r-i,be(o+n.frac*l+s.frac*(d+n.frac*c))}if("default"!==L){_e=0;try{te=new Uint8Array(Q*Z*4)}catch{te=new Array(Q*Z*4)}if("smooth"===L){var Pe,Ye,qe,Ae=Se||V,Re=Te||I,Qe=new Array(Ae.length),We=new Array(Re.length),Xe=new Array($),ut=Se?a:u,dt=Te?a:u;for(n=0;n<Ae.length;n++)Qe[n]=Math.round(C.c2p(Ae[n])-M);for(n=0;n<Re.length;n++)We[n]=Math.round(E.c2p(Re[n])-F);for(n=0;n<$;n++)Xe[n]=ut(n,Qe);for(x=0;x<ne;x++)for(Ye=J[(Pe=dt(x,We)).bin0],qe=J[Pe.bin1],n=0;n<$;n++,_e+=4)h(te,_e,le=ht(Ye,qe,Xe[n],Pe))}else for(x=0;x<B;x++)for(ke=J[x],A=se(x),n=0;n<P;n++)le=be(ke[n],1),h(te,_e=4*(A*P+ue(n)),le);me=oe.createImageData(Q,Z);try{me.data.set(te)}catch{ze=me.data,Be=ze.length;for(x=0;x<Be;x++)ze[x]=te[x]}oe.putImageData(me,0,0)}else{ot=Math.floor(fe/2),tt=Math.floor(Ce/2);for(x=0;x<B;x++)if(ke=J[x],A.reverse(),A[lt]=se(x+1),A[0]!==A[1]&&void 0!==A[0]&&void 0!==A[1])for(T=[at=ue(0),at],n=0;n<P;n++)T.reverse(),T[ct]=ue(n+1),T[0]!==T[1]&&void 0!==T[0]&&void 0!==T[1]&&(le=be(ke[n],(T[1]-T[0])*(A[1]-A[0])),oe.fillStyle="rgba("+le.join(",")+")",oe.fillRect(T[0]+ot,A[0]+tt,T[1]-T[0]-fe,A[1]-A[0]-Ce))}if(pe=Math.round(pe/ee),ge=Math.round(ge/ee),ve=Math.round(ve/ee),Ge=w("rgb("+pe+","+ge+","+ve+")"),e._hmpixcount=(e._hmpixcount||0)+ee,e._hmlumcount=(e._hmlumcount||0)+ee*Ge.getLuminance(),Ee=ae.selectAll("image").data(t),Ee.enter().append("svg:image").attr({xmlns:f.svg,preserveAspectRatio:"none"}),Ee.attr({height:ne,width:$,x:M,y:F,"xlink:href":de.toDataURL("image/png")}),"fast"!==L||Oe||Ee.attr("style",v),r(ae),He=S.texttemplate,He){var $e=m(S),pt={type:"linear",range:[$e.min,$e.max],_separators:C._separators,_numFormat:C._numFormat},Ve="histogram2dcontour"===S.type,G="contour"===S.type,rt=G?B-1:B,ft=G?1:0,mt=G?P-1:P,X=[];for(n=G?1:0;n<rt;n++){if(G)W=k.y[n];else if(Ve){if(0===n||n===B-1)continue;W=k.y[n]}else if(k.yCenter)W=k.yCenter[n];else{if(n+1===B&&void 0===k.y[n+1])continue;W=(k.y[n]+k.y[n+1])/2}if(we=Math.round(E.c2p(W)),!(0>we||we>E._length))for(x=ft;x<mt;x++){if(G)q=k.x[x];else if(Ve){if(0===x||x===P-1)continue;q=k.x[x]}else if(k.xCenter)q=k.xCenter[x];else{if(x+1===P&&void 0===k.x[x+1])continue;q=(k.x[x]+k.x[x+1])/2}if(je=Math.round(C.c2p(q)),!(0>je||je>C._length)&&(D=b({x:q,y:W},S,e._fullLayout),D.x=q,D.y=W,he=k.z[n][x],void 0===he?(D.z="",D.zLabel=""):(D.z=he,D.zLabel=j.tickText(pt,he,"hover").text),re=k.text&&k.text[n]&&k.text[n][x],void 0!==re&&!1!==re||(re=""),D.text=re,xe=s.texttemplateString(He,D,e._fullLayout._d3locale,D,S._meta||{}),xe)){var nt=xe.split("<br>"),st=nt.length,Ne=0;for(z=0;z<st;z++)Ne=Math.max(Ne,nt[z].length);X.push({l:st,c:Ne,t:xe,x:je,y:we,z:he})}}}var Y=S.textfont,H=Y.size,et=e._fullLayout.font.size;if(!H||"auto"===H){var K=1/0,U=1/0,Fe=0,Me=0;for(z=0;z<X.length;z++)if(ce=X[z],Fe=Math.max(Fe,ce.l),Me=Math.max(Me,ce.c),z<X.length-1){var Ke=X[z+1],Ue=Math.abs(Ke.x-ce.x),it=Math.abs(Ke.y-ce.y);Ue&&(K=Math.min(K,Ue)),it&&(U=Math.min(U,it))}isFinite(K)&&isFinite(U)?(K-=fe,U-=Ce,K/=Me,U/=Fe,K/=o/2,U/=o,H=Math.min(Math.floor(K),Math.floor(U),et)):H=et}if(H<=0||!isFinite(H))return;c(ae).data(X).enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(t){var s=i.select(this),n=Y.color;n&&"auto"!==n||(n=p.contrast(void 0===t.z?e._fullLayout.plot_bgcolor:"rgba("+Le(t.z).join()+")")),s.attr("data-notex",1).call(l.positionText,function(e){return e.x}(t),function(e){return e.y-H*(e.l*o/2-1)}(t)).call(y.font,{family:Y.family,size:H,color:n,weight:Y.weight,style:Y.style,variant:Y.variant}).text(t.t).call(l.convertToTspans,e)})}})}},41648:function(e,t,n){"use strict";var s=n(33428);e.exports=function(e){s.select(e).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},82748:function(e){"use strict";e.exports=function(e,t,n){!1===n("zsmooth")&&(n("xgap"),n("ygap")),n("zhoverformat")}},51264:function(e,t,n){"use strict";var i=n(38248),s=n(3400),a=n(24040);function o(e,t){var n=t(e);return"scaled"===(n?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),n}e.exports=function(e,t,n,r,c,l){if(d=n("z"),c=c||"x",l=l||"y",void 0===d||!d.length)return 0;if(s.isArray1D(d)){u=n(c),h=n(l);var d,u,h,m=s.minRowLength(u),f=s.minRowLength(h);if(0===m||0===f)return 0;t._length=Math.min(m,f,d.length)}else{if(u=o(c,n),h=o(l,n),!function(e){for(var t,n,a=!0,r=!1,c=!1,o=0;o<e.length;o++){if(t=e[o],!s.isArrayOrTypedArray(t)){a=!1;break}t.length>0&&(r=!0);for(n=0;n<t.length;n++)if(i(t[n])){c=!0;break}}return a&&r&&c}(d))return 0;n("transpose"),t._length=null}return"heatmapgl"===e.type||a.getComponentMethod("calendars","handleTraceDefaults")(e,t,[c,l],r),!0}},74512:function(e,t,n){"use strict";for(var i,l=n(83328),d=n(49084),r=n(92880).extendFlat,c=n(67824).overrideAll,a=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],s={},o=0;o<a.length;o++)i=a[o],s[i]=l[i];s.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},r(s,d("",{cLetter:"z",autoColorDflt:!1})),e.exports=c(s,"calc","nested")},84656:function(e,t,n){"use strict";var s,a=n(67792).gl_heatmap2d,o=n(54460),r=n(43080);function i(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=a(e.glplot,this.options),this.heatmap._trace=this}s=i.prototype,s.handlePick=function(e){var t=this.options,s=t.shape,n=e.pointId,o=n%s[0],i=Math.floor(n/s[0]),a=n;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[o],t.y[i],t.z[a]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,o],hoverinfo:this.hoverinfo}},s.update=function(e,t){n=t[0],this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo,s=n.z,this.options.z=[].concat.apply([],s);var n,s,i,a,c,l,d,h=s[0].length,u=s.length;this.options.shape=[h,u],this.options.x=n.x,this.options.y=n.y,this.options.zsmooth=e.zsmooth,a=function(e){for(var n,s,i,l=e.colorscale,d=e.zmin,u=e.zmax,o=l.length,a=new Array(o),c=new Array(4*o),t=0;t<o;t++){s=l[t],i=r(s[1]),a[t]=d+s[0]*(u-d);for(n=0;n<4;n++)c[4*t+n]=i[n]}return{colorLevels:a,colorValues:c}}(e),this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options),c=this.scene.xaxis,i=this.scene.yaxis,!1===e.zsmooth&&(l={ppad:n.x[1]-n.x[0]},d={ppad:n.y[1]-n.y[0]}),e._extremes[c._id]=o.findExtremes(c,n.x,l),e._extremes[i._id]=o.findExtremes(i,n.y,d)},s.dispose=function(){this.heatmap.dispose()},e.exports=function(e,t,n){var s=new i(e,t.uid);return s.update(t,n),s}},86464:function(e,t,n){"use strict";var s=n(3400),o=n(51264),i=n(27260),a=n(74512);e.exports=function(e,t,n,r){function c(n,o){return s.coerce(e,t,a,n,o)}o(e,t,c,r)?(c("text"),c("zsmooth"),i(e,t,r,c,{prefix:"",cLetter:"z"})):t.visible=!1}},45536:function(e,t,n){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),e.exports={attributes:n(74512),supplyDefaults:n(86464),colorbar:n(96288),calc:n(19512),plot:n(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:n(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(e,t,n){"use strict";var s=n(20832),r=n(29736).axisHoverFormat,c=n(21776).Ks,l=n(21776).Gw,i=n(25376),a=n(11120),d=n(73316),o=n(92880).extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:r("x"),yhoverformat:r("y"),text:o({},s.text,{}),hovertext:o({},s.hovertext,{}),orientation:s.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:c({},{keys:d.eventDataKeys}),texttemplate:l({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:o({},s.textposition,{arrayOk:!1}),textfont:i({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:i({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:i({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:s.insidetextanchor,textangle:s.textangle,cliponaxis:s.cliponaxis,constraintext:s.constraintext,marker:s.marker,offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:s.selected,unselected:s.unselected,_deprecated:{bardir:s._deprecated.bardir},zorder:s.zorder}},2e3:function(e){"use strict";e.exports=function(e,t){for(var o=e.length,s=0,n=0;n<o;n++)t[n]?(e[n]/=t[n],s+=e[n]):e[n]=null;return s}},11120:function(e){"use strict";e.exports=function(){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(e,t,n){"use strict";var s=n(38248);e.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,o){var i=o[t];return s(i)?(i=Number(i),n[e]+=i,i):0},avg:function(e,t,n,o,i){var a=o[t];return s(a)&&(a=Number(a),n[e]+=a,i[e]++),0},min:function(e,t,n,o){var a,i=o[t];if(s(i)){if(i=Number(i),!s(n[e]))return n[e]=i,i;if(n[e]>i)return a=i-n[e],n[e]=i,a}return 0},max:function(e,t,n,o){var a,i=o[t];if(s(i)){if(i=Number(i),!s(n[e]))return n[e]=i,i;if(n[e]<i)return a=i-n[e],n[e]=i,a}return 0}}},67712:function(e,t,n){"use strict";var o=n(39032),s=o.ONEAVGYEAR,u=o.ONEAVGMONTH,a=o.ONEDAY,r=o.ONEHOUR,c=o.ONEMIN,l=o.ONESEC,d=n(54460).tickIncrement;function i(e,t,n,s){if(e*t<=0)return 1/0;for(var i,c=Math.abs(t-e),a="date"===n.type,o=h(c,a),r=0;r<10;r++){if(i=h(80*o,a),o===i)break;if(!f(i,e,t,a,n,s))break;o=i}return o}function h(e,t){return t&&e>l?e>a?e>1.1*s?s:e>1.1*u?u:a:e>r?r:e>c?c:l:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function f(e,t,n,o,i,r){if(o&&e>a){var l=m(t,i,r),d=m(n,i,r),c=e===s?0:1;return l[c]!==d[c]}return Math.floor(n/e)-Math.floor(t/e)>.1}function m(e,t,n){var o=t.c2d(e,s,n).split("-");return""===o[0]&&(o.unshift(),o[0]="-"+o[0]),o}e.exports=function(e,t,n,o,r){var c,m,p,b,v=-1.1*t,l=-.1*t,j=e-l,u=n[0],h=n[1],g=Math.min(i(u+l,u+j,o,r),i(h+l,h+j,o,r)),f=Math.min(i(u+v,u+l,o,r),i(h+v,h+l,o,r));return g>f&&f<Math.abs(h-u)/4e3?(c=g,m=!1):(c=Math.min(g,f),m=!0),"date"===o.type&&c>a?(b=c===s?1:6,p=c===s?"M12":"M1",function(t,n){var i,c,a=o.c2d(t,s,r),l=a.indexOf("-",b);return l>0&&(a=a.substr(0,l)),i=o.d2c(a,0,r),i<t&&(c=d(i,p,!1,r),(i+c)/2<t+e&&(i=c)),n&&m?d(i,p,!0,r):i}):function(t,n){var s=c*Math.round(t/c);return s+c/10<t&&s+.9*c<t+e&&(s+=c),n&&m&&(s-=c),s}}},35852:function(e,t,n){"use strict";var i=n(38248),s=n(3400),r=n(24040),o=n(54460),l=n(84664),c=n(16964),d=n(10648),u=n(2e3),h=n(67712);function a(e,t,n,c,l){var d,h,m,p,g,b,w,O,S,M,T,P,f=c+"bins",H=e._fullLayout,$=t["_"+c+"bingroup"],u=H._histogramBinOpts[$],U="overlay"===H.barmode,y=function(e){return n.r2c(e,0,h)},_=function(e){return n.c2r(e,0,h)},W="date"===n.type?function(e){return e||0===e?s.cleanDate(e,null,h):null}:function(e){return i(e)?Number(e):null};function R(e,t,n){t[e+"Found"]?(t[e]=W(t[e]),null===t[e]&&(t[e]=n[e])):(O[e]=t[e]=n[e],s.nestedProperty(p[0],f+"."+e).set(n[e]))}if(t["_"+c+"autoBinFinished"])delete t["_"+c+"autoBinFinished"];else{p=u.traces;var E=[],L=!0,I=!1,D=!1;for(b=0;b<p.length;b++)(m=p[b]).visible&&(M=u.dirs[b],g=m["_"+M+"pos0"]=n.makeCalcdata(m,M),E=s.concat(E,g),delete m["_"+c+"autoBinFinished"],!0===t.visible&&(L?L=!1:(delete m._autoBin,m["_"+c+"autoBinFinished"]=1),r.traceIs(m,"2dMap")&&(I=!0),"histogram2dcontour"===m.type&&(D=!0)));if(h=p[0][c+"calendar"],d=o.autoBin(E,n,u.nbins,I,h,u.sizeFound&&u.size),T=p[0]._autoBin={},O=T[u.dirs[0]]={},D&&(u.size||(d.start=_(o.tickIncrement(y(d.start),d.size,!0,h))),void 0===u.end&&(d.end=_(o.tickIncrement(y(d.end),d.size,!1,h)))),U&&!r.traceIs(t,"2dMap")&&0===d._dataSpan&&"category"!==n.type&&"multicategory"!==n.type&&""===t.bingroup&&void 0===t.xbins){if(l)return[d,g,!0];d=function(e,t,n,o,i){var r,c,u,h,m,f,p,v,y=e._fullLayout,j=function(e,t){for(var n,c=t.xaxis,a=t.yaxis,r=t.orientation,o=[],i=e._fullData,s=0;s<i.length;s++)n=i[s],"histogram"===n.type&&!0===n.visible&&n.orientation===r&&n.xaxis===c&&n.yaxis===a&&o.push(n);return o}(e,t),b=!1,l=1/0,d=[t];for(r=0;r<j.length;r++)if((c=j[r])===t)b=!0;else if(b){var g=a(e,c,n,o,!0),w=g[0],_=g[2];c["_"+o+"autoBinFinished"]=1,c["_"+o+"pos0"]=g[1],_?d.push(c):l=Math.min(l,w.size)}else f=y._histogramBinOpts[c["_"+o+"bingroup"]],l=Math.min(l,f.size||c[i].size);h=new Array(d.length);for(r=0;r<d.length;r++)for(m=d[r]["_"+o+"pos0"],u=0;u<m.length;u++)if(void 0!==m[u]){h[r]=m[u];break}for(isFinite(l)||(l=s.distinctVals(h).minDiff),r=0;r<d.length;r++)p=(c=d[r])[o+"calendar"],v={start:n.c2r(h[r]-l/2,0,p),end:n.c2r(h[r]+l/2,0,p),size:l},c._input[i]=c[i]=v,(f=y._histogramBinOpts[c["_"+o+"bingroup"]])&&s.extendFlat(f,v);return t[i]}(e,t,n,c,f)}(S=m.cumulative||{}).enabled&&"include"!==S.currentbin&&("decreasing"===S.direction?d.start=_(o.tickIncrement(y(d.start),d.size,!0,h)):d.end=_(o.tickIncrement(y(d.end),d.size,!1,h))),u.size=d.size,u.sizeFound||(O.size=d.size,s.nestedProperty(p[0],f+".size").set(d.size)),R("start",u,d),R("end",u,d)}g=t["_"+c+"pos0"],delete t["_"+c+"pos0"];var z=t._input[f]||{},v=s.extendFlat({},u),N=u.start,k=n.r2l(z.start),C=void 0!==k;if((u.startFound||C)&&k!==n.r2l(N)){var x=C?k:s.aggNums(Math.min,null,g),V={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:u.size,tick0:N,calendar:h,range:[x,o.tickIncrement(x,u.size,!1,h)].map(n.l2r)},j=o.tickFirst(V);j>n.r2l(x)&&(j=o.tickIncrement(j,u.size,!0,h)),v.start=n.l2r(j),C||s.nestedProperty(t,f+".start").set(v.start)}var B=u.end,F=n.r2l(z.end),A=void 0!==F;return(u.endFound||A)&&F!==n.r2l(B)&&(P=A?F:s.aggNums(Math.max,null,g),v.end=n.l2r(P),A||s.nestedProperty(t,f+".start").set(v.end)),w="autobin"+c,!1===t._input[w]&&(t._input[f]=s.extendFlat({},t[f]||{}),delete t._input[w],delete t[w]),[v,g]}e.exports={calc:function(e,t){var n,m,v,b,_,C,k,Z,y=[],r=[],X="h"===t.orientation,M=o.getFromId(e,X?t.yaxis:t.xaxis),T=X?"y":"x",U={x:"y",y:"x"}[T],O=t[T+"calendar"],w=t.cumulative,W=a(e,t,M,T),j=W[0],F=W[1],$="string"==typeof j.size,p=[],E=$?p:j,K=[],D=[],g=[],V=0,z=t.histnorm,x=t.histfunc,N=-1!==z.indexOf("density");w.enabled&&N&&(z=z.replace(/ ?density$/,""),N=!1);var J,ee="max"===x||"min"===x?null:0,Y=c.count,q=d[z],I=!1,A=function(e){return M.r2c(e,0,O)};for(s.isArrayOrTypedArray(t[U])&&"count"!==x&&(J=t[U],I="avg"===x,Y=c[x]),n=A(j.start),Z=A(j.end)+(n-o.tickIncrement(n,j.size,!1,O))/1e6;n<Z&&y.length<1e6&&(C=o.tickIncrement(n,j.size,!1,O),y.push((n+C)/2),r.push(ee),g.push([]),p.push(n),N&&K.push(1/(C-n)),I&&D.push(0),!(C<=n));)n=C;p.push(n),$||"date"!==M.type||(E={start:A(E.start),end:A(E.end),size:E.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={}),_=t["_"+T+"bingroup"],b={leftGap:1/0,rightGap:1/0},_&&(e._fullLayout._roundFnOpts[_]||(e._fullLayout._roundFnOpts[_]=b),b=e._fullLayout._roundFnOpts[_]);var B,te=r.length,S=!0,H=b.leftGap,P=b.rightGap,G={};for(n=0;n<F.length;n++)k=F[n],(m=s.findBin(k,E))>=0&&m<te&&(V+=Y(m,n,r,J,D),S&&g[m].length&&k!==F[g[m][0]]&&(S=!1),g[m].push(n),G[n]=m,H=Math.min(H,k-p[m]),P=Math.min(P,p[m+1]-k));b.leftGap=H,b.rightGap=P,S||(B=function(t,n){return function(){var s=e._fullLayout._roundFnOpts[_];return h(s.leftGap,s.rightGap,p,M,O)(t,n)}}),I&&(V=u(r,D)),q&&q(r,V,K),w.enabled&&function(e,t,n){var s,o,i;function a(t){i=e[t],e[t]/=2}function r(t){o=e[t],e[t]=i+o/2,i+=o}if("half"===n)if("increasing"===t)for(a(0),s=1;s<e.length;s++)r(s);else for(a(e.length-1),s=e.length-2;s>=0;s--)r(s);else if("increasing"===t){for(s=1;s<e.length;s++)e[s]+=e[s-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(s=e.length-2;s>=0;s--)e[s]+=e[s+1];"exclude"===n&&(e.push(0),e.shift())}}(r,w.direction,w.currentbin);var R=Math.min(y.length,r.length),f=[],L=0,Q=R-1;for(n=0;n<R;n++)if(r[n]){L=n;break}for(n=R-1;n>=L;n--)if(r[n]){Q=n;break}for(n=L;n<=Q;n++)i(y[n])&&i(r[n])&&(v={p:y[n],s:r[n],b:0},w.enabled||(v.pts=g[n],S?v.ph0=v.ph1=g[n].length?F[g[n][0]]:y[n]:(t._computePh=!0,v.ph0=B(p[n]),v.ph1=B(p[n+1],!0))),f.push(v));return 1===f.length&&(f[0].width1=o.tickIncrement(f[0].p,j.size,!1,O)-f[0].p),l(f,t),s.isArrayOrTypedArray(t.selectedpoints)&&s.tagSelected(f,t,G),f},calcAllAutoBins:a}},73316:function(e){"use strict";e.exports={eventDataKeys:["binNumber"]}},80536:function(e,t,n){"use strict";var s=n(3400),d=n(79811),o=n(24040).traceIs,c=n(20011),l=n(31508).validateCornerradius,r=s.nestedProperty,i=n(71888).getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],u=["x","y"];e.exports=function(e,t){var n,h,m,f,p,g,v,j,_,O,E,k,S,M,F,T,D,N,L,R,C=t._histogramBinOpts={},z=[],y={},w=[];function b(e,t){return s.coerce(n._input,n,n._module.attributes,e,t)}function x(e){return"v"===e.orientation?"x":"y"}function A(e,n,o){r=e.uid+"__"+o,n||(n=r);var r,a=function(e,n){return d.getFromTrace({_fullLayout:t},e,n).type}(e,o),c=e[o+"calendar"]||"",i=C[n],l=!0;i&&(a===i.axType&&c===i.calendar?(l=!1,i.traces.push(e),i.dirs.push(o)):(n=r,a!==i.axType&&s.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+a,"axis","with bins on","type:"+i.axType,"axis."].join(" ")),c!==i.calendar&&s.warn(["Attempted to group the bins of trace",e.index,"set with a",c,"calendar","with bins",i.calendar?"on a "+i.calendar+" calendar":"w/o a set calendar"].join(" ")))),l&&(C[n]={traces:[e],dirs:[o],axType:a,calendar:e[o+"calendar"]||""}),e["_"+o+"bingroup"]=n}for(h=0;h<e.length;h++)n=e[h],o(n,"histogram")&&((z.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,"histogram"===n.type)&&(L=b("marker.cornerradius",t.barcornerradius),n.marker&&(n.marker.cornerradius=l(L))),o(n,"2dMap")||c(n._input,n,t,b));N=t._alignmentOpts||{};for(h=0;h<z.length;h++)(n=z[h],m="",!o(n,"2dMap"))&&((g=x(n),"group"===t.barmode&&n.alignmentgroup)&&(R=n[g+"axis"],M=i(t,R)+n.orientation,(N[M]||{})[n.alignmentgroup]&&(m=M)),m||"overlay"===t.barmode||(m=i(t,n.xaxis)+i(t,n.yaxis)+x(n))),m?(y[m]||(y[m]=[]),y[m].push(n)):w.push(n);for(m in y)if(1!==(f=y[m]).length){S=!1;for(f.length&&(n=f[0],S=b("bingroup")),m=S||m,h=0;h<f.length;h++)O=(n=f[h])._input.bingroup,O&&O!==m&&s.warn(["Trace",n.index,"must match","within bingroup",m+".","Ignoring its bingroup:",O,"setting."].join(" ")),n.bingroup=m,A(n,m,x(n))}else w.push(f[0]);for(h=0;h<w.length;h++)if(n=w[h],E=b("bingroup"),o(n,"2dMap"))for(_=0;_<2;_++)D=b((g=u[_])+"bingroup",E?E+"__"+g:null),A(n,D,g);else A(n,E,x(n));for(m in C){v=C[m];for(f=v.traces,k=0;k<a.length;k++)if(T=a[k],p=T.name,"nbins"!==p||!v.sizeFound){for(h=0;h<f.length;h++){if(n=f[h],g=v.dirs[h],j=T.aStr[g],void 0!==r(n._input,j).get()){v[p]=b(j),v[p+"Found"]=!0;break}(F=(n._autoBin||{})[g]||{})[p]&&r(n,j).set(F[p])}if("start"===p||"end"===p)for(;h<f.length;h++)(n=f[h])["_"+g+"bingroup"]&&b(j,(F=(n._autoBin||{})[g]||{})[p]);"nbins"!==p||v.sizeFound||v.nbinsFound||(n=f[0],v[p]=b(j))}}}},6616:function(e,t,n){"use strict";var o=n(24040),s=n(3400),i=n(76308),a=n(31508).handleText,r=n(55592),c=n(40196);e.exports=function(e,t,n,l){function d(n,o){return s.coerce(e,t,c,n,o)}u=d("x"),h=d("y"),d("cumulative.enabled")&&(d("cumulative.direction"),d("cumulative.currentbin")),d("text"),b=d("textposition"),a(e,t,l,d,b,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat");var u,h,m,f,b,p=d("orientation",h&&!u?"h":"v"),g="v"===p?"x":"y",j="v"===p?"y":"x",v=u&&h?Math.min(s.minRowLength(u)&&s.minRowLength(h)):s.minRowLength(t[g]||[]);v?(t._length=v,o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],l),t[j]&&d("histfunc"),d("histnorm"),d("autobin"+g),r(e,t,d,n,l),s.coerceSelectionMarkerOpacity(t,d),f=(t.marker.line||{}).color,m=o.getComponentMethod("errorbars","supplyDefaults"),m(e,t,f||i.defaultLine,{axis:"y"}),m(e,t,f||i.defaultLine,{axis:"x",inherit:"y"}),d("zorder")):t.visible=!1}},84980:function(e){"use strict";e.exports=function(e,t,n,s,o){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var i,r,a=Array.isArray(o)?s[0].pts[o[0]][o[1]]:s[o].pts;if(e.pointNumbers=a,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints){i=[];for(r=0;r<a.length;r++)i=i.concat(n._indexToPoints[a[r]])}else i=a;e.pointIndices=i}return e}},43339:function(e,t,n){"use strict";var s=n(63400).hoverPoints,o=n(54460).hoverLabelText;e.exports=function(e,t,n,i,a){if(r=s(e,t,n,i,a),r){var r,c,d=(e=r[0]).cd[e.index],l=e.cd[0].trace;return l.cumulative.enabled||(c="h"===l.orientation?"y":"x",e[c+"Label"]=o(e[c+"a"],[d.ph0,d.ph1],l[c+"hoverformat"])),r}}},42600:function(e,t,n){"use strict";e.exports={attributes:n(40196),layoutAttributes:n(39324),supplyDefaults:n(6616),crossTraceDefaults:n(80536),supplyLayoutDefaults:n(37156),calc:n(35852).calc,crossTraceCalc:n(96376).crossTraceCalc,plot:n(98184).plot,layerName:"barlayer",style:n(60100).style,styleOnSelect:n(60100).styleOnSelect,colorbar:n(5528),hoverPoints:n(43339),selectPoints:n(45784),eventData:n(84980),moduleType:"trace",name:"histogram",basePlotModule:n(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(e){"use strict";e.exports={percent:function(e,t){for(var s=e.length,o=100/t,n=0;n<s;n++)e[n]*=o},probability:function(e,t){for(var s=e.length,n=0;n<s;n++)e[n]/=t},density:function(e,t,n,s){var o,i=e.length;s=s||1;for(o=0;o<i;o++)e[o]*=n[o]*s},"probability density":function(e,t,n,s){var o,i=e.length;s&&(t/=s);for(o=0;o<i;o++)e[o]*=n[o]/t}}},37008:function(e,t,n){"use strict";var s=n(40196),r=n(11120),i=n(83328),c=n(45464),a=n(29736).axisHoverFormat,l=n(21776).Ks,d=n(21776).Gw,u=n(49084),o=n(92880).extendFlat;e.exports=o({x:s.x,y:s.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:s.histnorm,histfunc:s.histfunc,nbinsx:s.nbinsx,xbins:r("x"),nbinsy:s.nbinsy,ybins:r("y"),autobinx:s.autobinx,autobiny:s.autobiny,bingroup:o({},s.bingroup,{}),xbingroup:o({},s.bingroup,{}),ybingroup:o({},s.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z",1),hovertemplate:l({},{keys:"z"}),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:i.textfont,showlegend:o({},c.showlegend,{dflt:!1})},u("",{cLetter:"z",autoColorDflt:!1}))},55480:function(e,t,n){"use strict";var o=n(3400),s=n(54460),i=n(16964),h=n(10648),d=n(2e3),u=n(67712),r=n(35852).calcAllAutoBins;function c(e,t,n,s){var o,a,i=new Array(e);if(s)for(o=0;o<e;o++)i[o]=1/(t[o+1]-t[o]);else{a=1/n;for(o=0;o<e;o++)i[o]=a}return i}function l(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function a(e,t,n,s,o,i){var a,r,c=e.length-1,l=new Array(c),d=u(n,s,e,o,i);for(a=0;a<c;a++)r=(t||[])[a],l[a]=void 0===r?[d(e[a]),d(e[a+1],!0)]:[r,r];return l}e.exports=function(e,t){var n,u,m,D,A=s.getFromId(e,t.xaxis),k=s.getFromId(e,t.yaxis),_=t.xcalendar,T=t.ycalendar,$=function(e){return A.r2c(e,0,_)},U=function(e){return k.r2c(e,0,T)},he=r(e,t,A,"x"),w=he[0],O=he[1],re=r(e,t,k,"y"),C=re[0],E=re[1],p=t._length;O.length>p&&O.splice(p,O.length-p),E.length>p&&E.splice(p,E.length-p);var v,j,Y,f=[],P=[],oe=[],ee="string"==typeof w.size,Q="string"==typeof C.size,g=[],b=[],N=ee?g:w,L=Q?b:C,K=0,V=[],B=[],ne=t.histnorm,F=t.histfunc,ve=-1!==ne.indexOf("density"),be="max"===F||"min"===F?null:0,de=i.count,le=h[ne],R=!1,ce=[],ae=[],me="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";me&&"count"!==F&&(R="avg"===F,de=i[F]);var ie=w.size,S=$(w.start),ge=$(w.end)+(S-s.tickIncrement(S,ie,!1,_))/1e6;for(n=S;n<ge;n=s.tickIncrement(n,ie,!1,_))P.push(be),g.push(n),R&&oe.push(0);g.push(n);var se,y=P.length,te=(n-S)/y,pe=(se=S+te/2,A.c2r(se,0,_)),ue=C.size,M=U(C.start),fe=U(C.end)+(M-s.tickIncrement(M,ue,!1,T))/1e6;for(n=M;n<fe;n=s.tickIncrement(n,ue,!1,T)){f.push(P.slice()),b.push(n),Y=new Array(y);for(D=0;D<y;D++)Y[D]=[];B.push(Y),R&&V.push(oe.slice())}b.push(n);var x=f.length,q=(n-M)/x,je=function(e){return k.c2r(e,0,T)}(M+q/2);ve&&(ce=c(P.length,N,te,ee),ae=c(f.length,L,q,Q)),ee||"date"!==A.type||(N=l($,N)),Q||"date"!==k.type||(L=l(U,L));var W=!0,J=!0,H=new Array(y),z=new Array(x),X=1/0,I=1/0,Z=1/0,G=1/0;for(n=0;n<p;n++)j=O[n],v=E[n],m=o.findBin(j,N),u=o.findBin(v,L),m>=0&&m<y&&u>=0&&u<x&&(K+=de(m,n,f[u],me,V[u]),B[u][m].push(n),W&&(void 0===H[m]?H[m]=j:H[m]!==j&&(W=!1)),J&&(void 0===z[u]?z[u]=v:z[u]!==v&&(J=!1)),X=Math.min(X,j-g[m]),I=Math.min(I,g[m+1]-j),Z=Math.min(Z,v-b[u]),G=Math.min(G,b[u+1]-v));if(R)for(u=0;u<x;u++)K+=d(f[u],V[u]);if(le)for(u=0;u<x;u++)le(f[u],K,ce,ae[u]);return{x:O,xRanges:a(g,W&&H,X,I,A,_),x0:pe,dx:te,y:E,yRanges:a(b,J&&z,Z,G,k,T),y0:je,dy:q,z:f,pts:B}}},99784:function(e,t,n){"use strict";var s=n(3400),o=n(56408),i=n(82748),a=n(27260),r=n(39096),c=n(37008);e.exports=function(e,t,n,l){function d(n,o){return s.coerce(e,t,c,n,o)}o(e,t,d,l),!1!==t.visible&&(i(e,t,d,l),a(e,t,l,d,{prefix:"",cLetter:"z"}),d("hovertemplate"),r(d,l),d("xhoverformat"),d("yhoverformat"))}},59576:function(e,t,n){"use strict";var o=n(55512),s=n(54460).hoverLabelText;e.exports=function(e,t,n,i,a){if(r=o(e,t,n,i,a),r){var r,l=(e=r[0]).index,m=l[0],f=l[1],c=e.cd[0],d=c.trace,u=c.xRanges[f],h=c.yRanges[m];return e.xLabel=s(e.xa,[u[0],u[1]],d.xhoverformat),e.yLabel=s(e.ya,[h[0],h[1]],d.yhoverformat),r}}},21536:function(e,t,n){"use strict";e.exports={attributes:n(37008),supplyDefaults:n(99784),crossTraceDefaults:n(80536),calc:n(19512),plot:n(41420),layerName:"heatmaplayer",colorbar:n(96288),style:n(41648),hoverPoints:n(59576),eventData:n(84980),moduleType:"trace",name:"histogram2d",basePlotModule:n(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(e,t,n){"use strict";var o=n(24040),s=n(3400);e.exports=function(e,t,n,i){var c=n("x"),l=n("y"),a=s.minRowLength(c),r=s.minRowLength(l);a&&r?(t._length=Math.min(a,r),o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],i),(n("z")||n("marker.color"))&&n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")):t.visible=!1}},81220:function(e,t,n){"use strict";var s=n(37008),o=n(67104),r=n(49084),i=n(29736).axisHoverFormat,a=n(92880).extendFlat;e.exports=a({x:s.x,y:s.y,z:s.z,marker:s.marker,histnorm:s.histnorm,histfunc:s.histfunc,nbinsx:s.nbinsx,xbins:s.xbins,nbinsy:s.nbinsy,ybins:s.ybins,autobinx:s.autobinx,autobiny:s.autobiny,bingroup:s.bingroup,xbingroup:s.xbingroup,ybingroup:s.ybingroup,autocontour:o.autocontour,ncontours:o.ncontours,contours:o.contours,line:{color:o.line.color,width:a({},o.line.width,{dflt:.5}),dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:s.hovertemplate,texttemplate:o.texttemplate,textfont:o.textfont},r("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(e,t,n){"use strict";var s=n(3400),i=n(56408),a=n(84952),r=n(97680),c=n(39096),o=n(81220);e.exports=function(e,t,n,l){function d(n,i){return s.coerce(e,t,o,n,i)}i(e,t,d,l),!1!==t.visible&&(a(e,t,d,function(n){return s.coerce2(e,t,o,n)}),r(e,t,d,l),d("xhoverformat"),d("yhoverformat"),d("hovertemplate"),t.contours&&"heatmap"===t.contours.coloring&&c(d,l))}},65664:function(e,t,n){"use strict";e.exports={attributes:n(81220),supplyDefaults:n(3704),crossTraceDefaults:n(80536),calc:n(20688),plot:n(23676).plot,layerName:"contourlayer",style:n(52440),colorbar:n(55296),hoverPoints:n(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:n(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(e,t,n){"use strict";var l=n(21776).Ks,d=n(21776).Gw,r=n(49084),c=n(86968).u,o=n(74996),s=n(424),i=n(40516),a=n(32984),u=n(92880).extendFlat,h=n(98192).c;e.exports={labels:s.labels,parents:s.parents,values:s.values,branchvalues:s.branchvalues,count:s.count,level:s.level,maxdepth:s.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:u({colors:s.marker.colors,line:s.marker.line,pattern:h,editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),leaf:s.leaf,pathbar:i.pathbar,text:o.text,textinfo:s.textinfo,texttemplate:d({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:s.hoverinfo,hovertemplate:l({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextfont:o.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:o.sort,root:s.root,domain:c({name:"icicle",trace:!0,editType:"calc"})}},59564:function(e,t,n){"use strict";var s=n(7316);t.name="icicle",t.plot=function(e,n,o,i){s.plotBasePlot(t.name,e,n,o,i)},t.clean=function(e,n,o,i){s.cleanBasePlot(t.name,e,n,o,i)}},73876:function(e,t,n){"use strict";var s=n(3776);t.r=function(e,t){return s.calc(e,t)},t.q=function(e){return s._runCrossTraceCalc("icicle",e)}},7045:function(e,t,n){"use strict";var s=n(3400),d=n(97376),i=n(76308),a=n(86968).Q,r=n(31508).handleText,c=n(78048).TEXTPAD,l=n(74174).handleMarkerDefaults,o=n(8932),u=o.hasColorscale,h=o.handleDefaults;e.exports=function(e,t,n,o){function m(n,o){return s.coerce(e,t,d,n,o)}var f,p,g,j,v=m("labels"),b=m("parents");v&&v.length&&b&&b.length?(f=m("values"),m(f&&f.length?"branchvalues":"count"),m("level"),m("maxdepth"),m("tiling.orientation"),m("tiling.flip"),m("tiling.pad"),j=m("text"),m("texttemplate"),t.texttemplate||m("textinfo",s.isArrayOrTypedArray(j)?"text+label":"label"),m("hovertext"),m("hovertemplate"),p=m("pathbar.visible"),r(e,t,o,m,"auto",{hasPathbar:p,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),m("textposition"),l(e,t,o,m),g=t._hasColorscale=u(e,"marker","colors")||(e.marker||{}).coloraxis,g&&h(e,t,o,m,{prefix:"marker.",cLetter:"c"}),m("leaf.opacity",g?1:.7),t._hovered={marker:{line:{width:2,color:i.contrast(o.paper_bgcolor)}}},p&&(m("pathbar.thickness",t.pathbar.textfont.size+2*c),m("pathbar.side"),m("pathbar.edgeshape")),m("sort"),m("root.color"),a(t,o,m),t._length=null):t.visible=!1}},67880:function(e,t,n){"use strict";var l=n(33428),o=n(3400),r=n(43616),d=n(72736),m=n(25132),c=n(47192).styleOne,i=n(32984),s=n(78176),u=n(45716),h=n(96488).formatSliceLabel,a=!1;e.exports=function(e,t,n,f,p){var b,w,O,F,j=p.width,v=p.height,C=p.viewX,E=p.viewY,k=p.pathSlice,L=p.toMoveInsideSlice,T=p.strTransform,y=p.hasTransition,H=p.handleSlicesExit,P=p.makeUpdateSliceInterpolator,R=p.makeUpdateTextInterpolator,S=p.prevEntry,I=e._context.staticPlot,M=e._fullLayout,g=t[0].trace,N=-1!==g.textposition.indexOf("left"),z=-1!==g.textposition.indexOf("right"),D=-1!==g.textposition.indexOf("bottom"),A=m(n,[j,v],{flipX:g.tiling.flip.indexOf("x")>-1,flipY:g.tiling.flip.indexOf("y")>-1,orientation:g.tiling.orientation,pad:{inner:g.tiling.pad},maxDepth:g._maxDepth}).descendants(),x=1/0,_=-1/0;return A.forEach(function(e){var t=e.depth;t>=g._maxDepth?(e.x0=e.x1=(e.x0+e.x1)/2,e.y0=e.y1=(e.y0+e.y1)/2):(x=Math.min(x,t),_=Math.max(_,t))}),f=f.data(A,s.getPtId),g._maxVisibleLayers=isFinite(_)?_-x+1:0,f.enter().append("g").classed("slice",!0),H(f,a,{},[j,v],k),f.order(),b=null,y&&S&&(F=s.getPtId(S),f.each(function(e){null===b&&s.getPtId(e)===F&&(b={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})})),O=function(){return b||{x0:0,x1:j,y0:0,y1:v}},w=f,y&&(w=w.transition().each("end",function(){var t=l.select(this);s.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),w.each(function(m){m._x0=C(m.x0),m._x1=C(m.x1),m._y0=E(m.y0),m._y1=E(m.y1),m._hoverX=C(m.x1-g.tiling.pad),m._hoverY=E(D?m.y1-g.tiling.pad/2:m.y0+g.tiling.pad/2),f=l.select(this),p=o.ensureSingle(f,"path","surface",function(e){e.style("pointer-events",I?"none":"all")}),y?p.transition().attrTween("d",function(e){var t=P(e,a,O(),[j,v],{orientation:g.tiling.orientation,flipX:g.tiling.flip.indexOf("x")>-1,flipY:g.tiling.flip.indexOf("y")>-1});return function(e){return k(t(e))}}):p.attr("d",k),f.call(u,n,e,t,{styleOne:c,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(s.setSliceCursor,e,{isTransitioning:e._transitioning}),p.call(c,m,g,e,{hovered:!1}),m.x0===m.x1||m.y0===m.y1?m._text="":m._text=h(m,n,g,t,M)||"";var f,p,w=o.ensureSingle(f,"g","slicetext"),b=o.ensureSingle(w,"text","",function(e){e.attr("data-notex",1)}),_=o.ensureUniformFontSize(e,s.determineTextFont(g,m,M.font));b.text(m._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":N?"start":"middle").call(r.font,_).call(d.convertToTspans,e),m.textBB=r.bBox(b.node()),m.transform=L(m,{fontSize:_.size}),m.transform.fontSize=_.size,y?b.transition().attrTween("transform",function(e){var t=R(e,a,O(),[j,v]);return function(e){return T(t(e))}}):b.attr("transform",T(m))}),b}},29044:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"icicle",basePlotModule:n(59564),categories:[],animatable:!0,attributes:n(97376),layoutAttributes:n(90676),supplyDefaults:n(7045),supplyLayoutDefaults:n(4304),calc:n(73876).r,crossTraceCalc:n(73876).q,plot:n(38364),style:n(47192).style,colorbar:n(5528),meta:{}}},90676:function(e){"use strict";e.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(e,t,n){"use strict";var s=n(3400),o=n(90676);e.exports=function(e,t){function n(n,i){return s.coerce(e,t,o,n,i)}n("iciclecolorway",t.colorway),n("extendiciclecolors")}},25132:function(e,t,n){"use strict";var s=n(74148),o=n(83024);e.exports=function(e,t,n){var i,u=n.flipX,c=n.flipY,a="h"===n.orientation,r=n.maxDepth,l=t[0],d=t[1];return r&&(l=(e.height+1)*t[0]/Math.min(e.height+1,r),d=(e.height+1)*t[1]/Math.min(e.height+1,r)),i=s.partition().padding(n.pad.inner).size(a?[t[1],l]:[t[0],d])(e),(a||u||c)&&o(i,t,{swapXY:a,flipX:u,flipY:c}),i}},38364:function(e,t,n){"use strict";var s=n(95808),o=n(67880);e.exports=function(e,t,n,i){return s(e,t,n,i,{type:"icicle",drawDescendants:o})}},47192:function(e,t,n){"use strict";var s=n(33428),o=n(76308),i=n(3400),r=n(82744).resizeText,c=n(60404);function a(e,t,n,s){var r=t.data.data,l=!t.children,a=r.i,d=i.castOption(n,a,"marker.line.color")||o.defaultLine,u=i.castOption(n,a,"marker.line.width")||0;e.call(c,t,n,s).style("stroke-width",u).call(o.stroke,d).style("opacity",l?n.leaf.opacity:null)}e.exports={style:function(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");r(e,t,"icicle"),t.each(function(t){var n=s.select(this),o=t[0].trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(t){s.select(this).call(a,t,o,e)})})},styleOne:a}},95188:function(e,t,n){"use strict";for(var o,r=n(45464),c=n(52904).zorder,h=n(21776).Ks,a=n(92880).extendFlat,l=n(47797).colormodel,i=["rgb","rgba","rgba256","hsl","hsla"],d=[],u=[],s=0;s<i.length;s++)o=l[i[s]],d.push("For the `"+i[s]+"` colormodel, it is ["+(o.zminDflt||o.min).join(", ")+"]."),u.push("For the `"+i[s]+"` colormodel, it is ["+(o.zmaxDflt||o.max).join(", ")+"].");e.exports=a({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:i,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:a({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:h({},{keys:["z","color","colormodel"]}),zorder:c,transforms:void 0})},93336:function(e,t,n){"use strict";var o=n(3400),i=n(47797),a=n(38248),s=n(54460),r=n(3400).maxRowLength,c=n(18712).i;function l(e,t,n,s){return function(i){return o.constrain((i-e)*t,n,s)}}function d(e,t){return function(n){return o.constrain(n,e,t)}}e.exports=function(e,t){t._hasZ?(o=t.z.length,u=r(t.z)):t._hasSource&&(g=c(t.source),o=g.height,u=g.width);var n,o,u,g,h=s.getFromId(e,t.xaxis||"x"),m=s.getFromId(e,t.yaxis||"y"),f=h.d2c(t.x0)-t.dx/2,p=m.d2c(t.y0)-t.dy/2,v=[f,f+u*t.dx],b=[p,p+o*t.dy];if(h&&"log"===h.type)for(n=0;n<u;n++)v.push(f+n*t.dx);if(m&&"log"===m.type)for(n=0;n<o;n++)b.push(p+n*t.dy);return t._extremes[h._id]=s.findExtremes(h,v),t._extremes[m._id]=s.findExtremes(m,b),t._scaler=function(e){var t,n=i.colormodel[e.colormodel],s=(n.colormodel||e.colormodel).length;e._sArray=[];for(t=0;t<s;t++)n.min[t]!==e.zmin[t]||n.max[t]!==e.zmax[t]?e._sArray.push(l(e.zmin[t],(n.max[t]-n.min[t])/(e.zmax[t]-e.zmin[t]),n.min[t],n.max[t])):e._sArray.push(d(n.min[t],n.max[t]));return function(t){for(var i,o=t.slice(0,s),n=0;n<s;n++){if(i=o[n],!a(i))return!1;o[n]=e._sArray[n](i)}return o}}(t),[{x0:f,y0:p,z:t.z,w:u,h:o}]}},47797:function(e){"use strict";e.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["°","%","%",""]}}}},13188:function(e,t,n){"use strict";var o=n(3400),i=n(95188),s=n(47797),a=n(81792).IMAGE_URL_PREFIX;e.exports=function(e,t){function n(n,s){return o.coerce(e,t,i,n,s)}n("source"),t.source&&!t.source.match(a)&&delete t.source,t._hasSource=!!t.source;var r,c=n("z");t._hasZ=!(void 0===c||!c.length||!c[0]||!c[0].length),t._hasZ||t._hasSource?(n("x0"),n("y0"),n("dx"),n("dy"),t._hasZ?(n("colormodel","rgb"),n("zmin",(r=s.colormodel[t.colormodel]).zminDflt||r.min),n("zmax",r.zmaxDflt||r.max)):t._hasSource&&(t.colormodel="rgba256",r=s.colormodel[t.colormodel],t.zmin=r.zminDflt,t.zmax=r.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),t._length=null,n("zorder")):t.visible=!1}},79972:function(e){"use strict";e.exports=function(e,t){return"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e.color=t.color,e.colormodel=t.trace.colormodel,e.z||(e.z=t.color),e}},18712:function(e,t,n){"use strict";var s=n(19480),o=n(81792).IMAGE_URL_PREFIX,i=n(33576).Buffer;t.i=function(e){var t=e.replace(o,""),n=new i(t,"base64");return s(n)}},24892:function(e,t,n){"use strict";var o=n(93024),i=n(3400),s=i.isArrayOrTypedArray,a=n(47797);e.exports=function(e,t,n){var c=e.cd[0],r=c.trace,w=e.xa,E=e.ya;if(!(o.inbox(t-c.x0,t-(c.x0+c.w*r.dx),0)>0||o.inbox(n-c.y0,n-(c.y0+c.h*r.dy),0)>0)&&(d=Math.floor((t-c.x0)/r.dx),l=Math.floor(Math.abs(n-c.y0)/r.dy),r._hasZ?f=c.z[l][d]:r._hasSource&&(f=r._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(d,l,1,1).data),f)){g=c.hi||r.hoverinfo,g&&(p=g.split("+"),-1!==p.indexOf("all")&&(p=["color"]),-1!==p.indexOf("color")&&(_=!0));var l,d,f,p,g,v,_,b=a.colormodel[r.colormodel],j=b.colormodel||r.colormodel,k=j.length,u=r._scaler(f),h=b.suffix,m=[];(r.hovertemplate||_)&&(m.push("["+[u[0]+h[0],u[1]+h[1],u[2]+h[2]].join(", ")),4===k&&m.push(", "+u[3]+h[3]),m.push("]"),m=m.join(""),e.extraText=j.toUpperCase()+": "+m),s(r.hovertext)&&s(r.hovertext[l])?v=r.hovertext[l][d]:s(r.text)&&s(r.text[l])&&(v=r.text[l][d]);var O=E.c2p(c.y0+(l+.5)*r.dy),x=c.x0+(d+.5)*r.dx,y=c.y0+(l+.5)*r.dy,C="["+f.slice(0,r.colormodel.length).join(", ")+"]";return[i.extendFlat(e,{index:[l,d],x0:w.c2p(c.x0+d*r.dx),x1:w.c2p(c.x0+(d+1)*r.dx),y0:O,y1:O,color:u,xVal:x,xLabelVal:x,yVal:y,yLabelVal:y,zLabelVal:C,text:v,hovertemplateLabels:{zLabel:C,colorLabel:m,"color[0]Label":u[0]+h[0],"color[1]Label":u[1]+h[1],"color[2]Label":u[2]+h[2],"color[3]Label":u[3]+h[3]}})]}}},48928:function(e,t,n){"use strict";e.exports={attributes:n(95188),supplyDefaults:n(13188),calc:n(93336),plot:n(63715),style:n(28576),hoverPoints:n(24892),eventData:n(79972),moduleType:"trace",name:"image",basePlotModule:n(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(e,t,n){"use strict";var i=n(33428),s=n(3400),o=s.strTranslate,a=n(9616),r=n(47797),c=n(9188),l=n(2264).STYLE;e.exports=function(e,t,n,d){var u=t.xaxis,h=t.yaxis,m=!e._context._exportedPlot&&c();s.makeTraceGroups(d,n,"im").each(function(t){var T=i.select(this),p=t[0],n=p.trace,x=("fast"===n.zsmooth||!1===n.zsmooth&&m)&&!n._hasZ&&n._hasSource&&"linear"===u.type&&"linear"===h.type;n._realImage=x;var c,d,f,g,v,j,y,_,O,C,M,F,R,H=p.z,S=p.x0,A=p.y0,b=p.w,w=p.h,E=n.dx,k=n.dy;for(c=0;void 0===f&&c<b;)f=u.c2p(S+c*E),c++;for(c=b;void 0===g&&c>0;)g=u.c2p(S+c*E),c--;for(c=0;void 0===d&&c<w;)d=h.c2p(A+c*k),c++;for(c=w;void 0===v&&c>0;)v=h.c2p(A+c*k),c--;if(g<f&&(O=g,g=f,f=O),v<d&&(O=d,d=v,v=O),x||(f=Math.max(-.5*u._length,f),g=Math.min(1.5*u._length,g),d=Math.max(-.5*h._length,d),v=Math.min(1.5*h._length,v)),y=Math.round(g-f),j=Math.round(v-d),y<=0||j<=0)T.selectAll("image").data([]).exit().remove();else{if(_=T.selectAll("image").data([t]),_.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),_.exit().remove(),F=!1===n.zsmooth?l:"",x){var L=s.simpleMap(u.range,u.r2l),z=s.simpleMap(h.range,h.r2l),D=L[1]<L[0],N=z[1]>z[0];(D||N)&&(C=f+y/2,M=d+j/2,F+="transform:"+o(C+"px",M+"px")+"scale("+(D?-1:1)+","+(N?-1:1)+")"+o(-C+"px",-M+"px")+";")}_.attr("style",F),R=new Promise(function(e){if(n._hasZ)e();else if(n._hasSource)if(n._canvas&&n._canvas.el.width===b&&n._canvas.el.height===w&&n._canvas.source===n.source)e();else{var s,o,t=document.createElement("canvas");t.width=b,t.height=w,o=t.getContext("2d",{willReadFrequently:!0}),n._image=n._image||new Image,s=n._image,s.onload=function(){o.drawImage(s,0,0),n._canvas={el:t,source:n.source},e()},s.setAttribute("src",n.source)}}).then(function(){if(n._hasZ)t=P(function(e,t){var n=H[t][e];return s.isTypedArray(n)&&(n=Array.from(n)),n}),e=t.toDataURL("image/png");else if(n._hasSource)if(x)e=n.source;else{var e,t,o=n._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,b,w).data;t=P(function(e,t){var n=4*(t*b+e);return[o[n],o[n+1],o[n+2],o[n+3]]}),e=t.toDataURL("image/png")}_.attr({"xlink:href":e,height:j,width:y,x:f,y:d})}),e._promises.push(R)}function P(e){o=document.createElement("canvas"),o.width=y,o.height=j;var t,o,i,a,l,m,g,w=o.getContext("2d",{willReadFrequently:!0}),_=function(e){return s.constrain(Math.round(u.c2p(S+e*E)-f),0,y)},b=function(e){return s.constrain(Math.round(h.c2p(A+e*k)-d),0,j)},v=r.colormodel[n.colormodel],x=v.colormodel||n.colormodel,O=v.fmt;for(c=0;c<p.w;c++)if(a=_(c),l=_(c+1),l!==a&&!isNaN(l)&&!isNaN(a))for(t=0;t<p.h;t++)i=b(t),m=b(t+1),m===i||isNaN(m)||isNaN(i)||!e(c,t)||(g=n._scaler(e(c,t)),w.fillStyle=g?x+"("+O(g).join(",")+")":"rgba(0,0,0,0)",w.fillRect(a,i,l-a,m-i));return o}})}},28576:function(e,t,n){"use strict";var s=n(33428);e.exports=function(e){s.select(e).selectAll(".im image").style("opacity",function(e){return e[0].trace.opacity})}},89864:function(e,t,n){"use strict";var o=n(92880).extendFlat,d=n(92880).extendDeep,p=n(67824).overrideAll,c=n(25376),l=n(22548),f=n(86968).u,s=n(94724),m=n(31780).templatedArray,a=n(48164),h=n(29736).descriptionOnlyNumbers,r=c({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:l.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},u={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},g=m("step",d({},i,{range:u}));e.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:o({},r,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:h("value")},font:o({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:h("value")},increasing:{symbol:{valType:"string",dflt:a.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:a.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:o({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:d({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:p({range:u,visible:o({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:o({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:c({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:o({},i.line.color,{}),width:o({},i.line.width,{dflt:1}),editType:"plot"},thickness:o({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(e,t,n){"use strict";var s=n(7316);t.name="indicator",t.plot=function(e,n,o,i){s.plotBasePlot(t.name,e,n,o,i)},t.clean=function(e,n,o,i){s.cleanBasePlot(t.name,e,n,o,i)}},79136:function(e){"use strict";e.exports={calc:function(e,t){var n,o,i=[],s=t.value;return"number"!=typeof t._lastValue&&(t._lastValue=t.value),o=t._lastValue,n=o,t._hasDelta&&"number"==typeof t.delta.reference&&(n=t.delta.reference),i[0]={y:s,lastY:o,delta:s-n,relativeDelta:(s-n)/n},i}}},12096:function(e){"use strict";e.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(e,t,n){"use strict";var s=n(3400),o=n(89864),r=n(86968).Q,a=n(31780),c=n(51272),i=n(12096),l=n(26332),d=n(25404),u=n(95936),h=n(42568);function m(e,t){function n(n,i){return s.coerce(e,t,o.gauge.steps,n,i)}n("color"),n("line.color"),n("line.width"),n("range"),n("thickness")}e.exports={supplyDefaults:function(e,t,n,f){function p(n,i){return s.coerce(e,t,o,n,i)}r(t,f,p),p("mode"),t._hasNumber=-1!==t.mode.indexOf("number"),t._hasDelta=-1!==t.mode.indexOf("delta"),t._hasGauge=-1!==t.mode.indexOf("gauge");var v,j,y,_,w,O,x,C,E,k,A,S=p("value");t._range=[0,"number"==typeof S?1.5*S:1],_=new Array(2),t._hasNumber&&(p("number.valueformat"),C=s.extendFlat({},f.font),C.size=void 0,s.coerceFont(p,"number.font",C),void 0===t.number.font.size&&(t.number.font.size=i.defaultNumberFontSize,_[0]=!0),p("number.prefix"),p("number.suffix"),k=t.number.font.size),t._hasDelta&&(x=s.extendFlat({},f.font),x.size=void 0,s.coerceFont(p,"delta.font",x),void 0===t.delta.font.size&&(t.delta.font.size=(t._hasNumber?.5:1)*(k||i.defaultNumberFontSize),_[1]=!0),p("delta.reference",t.value),p("delta.relative"),p("delta.valueformat",t.delta.relative?"2%":""),p("delta.increasing.symbol"),p("delta.increasing.color"),p("delta.decreasing.symbol"),p("delta.decreasing.color"),p("delta.position"),p("delta.prefix"),p("delta.suffix"),A=t.delta.font.size),t._scaleNumbers=(!t._hasNumber||_[0])&&(!t._hasDelta||_[1])||!1,E=s.extendFlat({},f.font);function g(e,t){return s.coerce(y,w,o.gauge,e,t)}function b(e,t){return s.coerce(v,j,o.gauge.axis,e,t)}E.size=.25*(k||A||i.defaultNumberFontSize),s.coerceFont(p,"title.font",E),p("title.text"),t._hasGauge?((y=e.gauge)||(y={}),w=a.newContainer(t,"gauge"),g("shape"),(t._isBullet="bullet"===t.gauge.shape)||p("title.align","center"),(t._isAngular="angular"===t.gauge.shape)||p("align","center"),g("bgcolor",f.paper_bgcolor),g("borderwidth"),g("bordercolor"),g("bar.color"),g("bar.line.color"),g("bar.line.width"),g("bar.thickness",i.valueThickness*("bullet"===t.gauge.shape?.5:1)),c(y,w,{name:"steps",handleItemDefaults:m}),g("threshold.value"),g("threshold.thickness"),g("threshold.line.width"),g("threshold.line.color"),v={},y&&(v=y.axis||{}),j=a.newContainer(w,"axis"),b("visible"),t._range=b("range",t._range),O={font:f.font,noAutotickangles:!0,outerTicks:!0},l(v,j,b,"linear"),h(v,j,b,"linear",O),u(v,j,b,"linear",O),d(v,j,b,O)):(p("title.align","center"),p("align","center"),t._isAngular=t._isBullet=!1),t._length=null}}},43480:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"indicator",basePlotModule:n(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:n(89864),supplyDefaults:n(20424).supplyDefaults,calc:n(79136).calc,plot:n(97864),meta:{}}},97864:function(e,t,n){"use strict";var i=n(33428),C=n(67756).qy,v=n(67756).Gz,o=n(3400),O=o.strScale,m=o.strTranslate,E=o.rad2deg,w=n(84284).MID_SHIFT,c=n(43616),l=n(12096),f=n(72736),s=n(54460),k=n(28336),_=n(37668),x=n(94724),d=n(76308),g={left:"start",center:"middle",right:"end"},r={left:0,center:.5,right:1},j=/[yzafpnµmkMGTPEZY]/;function u(e){return e&&e.duration>0}function a(e){e.each(function(e){d.stroke(i.select(this),e.line.color)}).each(function(e){d.fill(i.select(this),e.color)}).style("stroke-width",function(e){return e.line.width})}function h(e,t,n){var a=e._fullLayout,i=o.extendFlat({type:"linear",ticks:"outside",range:n,showline:!0},t),s={type:"linear",_id:"x"+t._id},r={letter:"x",font:a.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function c(e,t){return o.coerce(i,s,x,e,t)}return k(i,s,c,r,a),_(i,s,c,r),s}function y(e,t,n){return[Math.min(t/e.width,n/e.height),e,t+"x"+n]}function b(e,t,n,s){var a=document.createElementNS("http://www.w3.org/2000/svg","text"),o=i.select(a);return o.text(e).attr("x",0).attr("y",0).attr("text-anchor",n).attr("data-unformatted",e).call(f.convertToTspans,s).call(c.font,t),c.bBox(o.node())}function p(e,t,n,s,i,a){var c,r="_cache"+t;return e[r]&&e[r].key===i||(e[r]={key:i,value:n}),c=o.aggNums(a,null,[e[r].value,s],2),e[r].value=c,c}e.exports=function(e,t,n,_){var k,x=e._fullLayout;u(n)&&_&&(k=_()),o.makeTraceGroups(x._indicatorlayer,t,"trace").each(function(t){var F,D,N,R,H,I,B,V,W,U,K,A=t[0].trace,T=i.select(this),P=A._hasGauge,z=A._isAngular,M=A._isBullet,S=A.domain,_={w:x._size.w*(S.x[1]-S.x[0]),h:x._size.h*(S.y[1]-S.y[0]),l:x._size.l+x._size.w*S.x[0],r:x._size.r+x._size.w*(1-S.x[1]),t:x._size.t+x._size.h*(1-S.y[1]),b:x._size.b+x._size.h*S.y[0]},X=_.l+_.w/2,G=_.t+_.h/2,L=Math.min(_.w/2,_.h),Y=l.innerRadius*L,q=A.align||"center",$=G;P?(z&&(R=X,$=G+L/2,N=function(e){return function(e,t){return[t/Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),e,t]}(e,.9*Y)}),M)&&(W=l.bulletPadding,U=1-l.bulletNumberDomainSize+W,R=_.l+(U+(1-U)*r[q])*_.w,N=function(e){return y(e,(l.bulletNumberDomainSize-W)*_.w,_.h)}):(R=_.l+r[q]*_.w,N=function(e){return y(e,_.w,_.h)}),!function(e,t,n,a){var y,_,w,x,M,H,l=n[0].trace,I=a.numbersX,L=a.numbersY,D=l.align||"center",z=g[D],A=a.transitionOpts,E=a.onComplete,F=o.ensureSingle(t,"g","numbers"),S=[];l._hasNumber&&S.push("number"),l._hasDelta&&(S.push("delta"),"left"===l.delta.position&&S.reverse()),M=F.selectAll("text").data(S);function N(t,n,o,i){if(!t.match("s")||o>=0==i>=0||n(o).slice(-1).match(j)||n(i).slice(-1).match(j))return n;var a=t.slice().replace("s","f").replace(/\d+/,function(e){return parseInt(e)-1}),r=h(e,{tickformat:a});return function(e){return Math.abs(e)<1?s.tickText(r,e).text:n(e)}}if(M.enter().append("text"),M.attr("text-anchor",function(){return z}).attr("class",function(e){return e}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),M.exit().remove(),x=l.mode+l.align,l._hasDelta&&(H=function(){o=h(e,{tickformat:l.delta.valueformat},l._range),o.setScale(),s.prepTicks(o);var t,o,g=function(e){return s.tickText(o,e).text},y=l.delta.suffix,j=l.delta.prefix,a=function(e){return l.delta.relative?e.relativeDelta:e.delta},m=function(e,t){return 0===e||"number"!=typeof e||isNaN(e)?"-":(e>0?l.delta.increasing.symbol:l.delta.decreasing.symbol)+j+t(e)+y},p=function(e){return e.delta>=0?l.delta.increasing.color:l.delta.decreasing.color};void 0===l._deltaLastValue&&(l._deltaLastValue=a(n[0])),t=F.select("text.delta");function r(){t.text(m(a(n[0]),g)).call(d.fill,p(n[0])).call(f.convertToTspans,e)}return t.call(c.font,l.delta.font).call(d.fill,p({delta:l._deltaLastValue})),u(A)?t.transition().duration(A.duration).ease(A.easing).tween("text",function(){var t=i.select(this),e=a(n[0]),s=l._deltaLastValue,r=N(l.delta.valueformat,g,s,e),o=v(s,e);return l._deltaLastValue=e,function(e){t.text(m(o(e),r)),t.call(d.fill,p({delta:o(e)}))}}).each("end",function(){r(),E&&E()}).each("interrupt",function(){r(),E&&E()}):r(),_=b(m(a(n[0]),g),l.delta.font,z,e),t}(),x+=l.delta.position+l.delta.font.size+l.delta.font.family+l.delta.valueformat,x+=l.delta.increasing.symbol+l.delta.decreasing.symbol,w=_),l._hasNumber&&(function(){t=h(e,{tickformat:l.number.valueformat},l._range),t.setScale(),s.prepTicks(t);var t,o=function(e){return s.tickText(t,e).text},a=l.number.suffix,r=l.number.prefix,m=F.select("text.number");function d(){var t="number"==typeof n[0].y?r+o(n[0].y)+a:"-";m.text(t).call(c.font,l.number.font).call(f.convertToTspans,e)}u(A)?m.transition().duration(A.duration).ease(A.easing).each("end",function(){d(),E&&E()}).each("interrupt",function(){d(),E&&E()}).attrTween("text",function(){var e,t=i.select(this),s=v(n[0].lastY,n[0].y);return l._lastValue=n[0].y,e=N(l.number.valueformat,o,n[0].lastY,n[0].y),function(n){t.text(r+e(s(n))+a)}}):d(),y=b(r+o(n[0].y)+a,l.number.font,z,e)}(),x+=l.number.font.size+l.number.font.family+l.number.valueformat+l.number.suffix+l.number.prefix,w=y),l._hasDelta&&l._hasNumber){var C,k,R=[(y.left+y.right)/2,(y.top+y.bottom)/2],P=[(_.left+_.right)/2,(_.top+_.bottom)/2],T=.75*l.delta.font.size;"left"===l.delta.position&&(k=p(l,"deltaPos",0,-1*(y.width*r[l.align]+_.width*(1-r[l.align])+T),x,Math.min),C=R[1]-P[1],w={width:y.width+_.width+T,height:Math.max(y.height,_.height),left:_.left+k,right:y.right,top:Math.min(y.top,_.top+C),bottom:Math.max(y.bottom,_.bottom+C)}),"right"===l.delta.position&&(k=p(l,"deltaPos",0,y.width*(1-r[l.align])+_.width*r[l.align]+T,x,Math.max),C=R[1]-P[1],w={width:y.width+_.width+T,height:Math.max(y.height,_.height),left:y.left,right:_.right+k,top:Math.min(y.top,_.top+C),bottom:Math.max(y.bottom,_.bottom+C)}),"bottom"===l.delta.position&&(k=null,C=_.height,w={width:Math.max(y.width,_.width),height:y.height+_.height,left:Math.min(y.left,_.left),right:Math.max(y.right,_.right),top:y.bottom-y.height,bottom:y.bottom+_.height}),"top"===l.delta.position&&(k=null,C=y.top,w={width:Math.max(y.width,_.width),height:y.height+_.height,left:Math.min(y.left,_.left),right:Math.max(y.right,_.right),top:y.bottom-y.height-_.height,bottom:y.bottom}),H.attr({dx:k,dy:C})}(l._hasNumber||l._hasDelta)&&F.attr("transform",function(){var e,t,n,s,o=a.numbersScaler(w);return x+=o[2],e=p(l,"numbersScale",1,o[0],x,Math.min),l._scaleNumbers||(e=1),n=l._isAngular?L-e*w.bottom:L-e*(w.top+w.bottom)/2,l._numbersTop=e*w.top+n,s=w[D],"center"===D&&(s=(w.left+w.right)/2),t=I-e*s,t=p(l,"numbersTranslate",0,t,x,Math.max),m(t,n)+O(e)})}(e,T,t,{numbersX:R,numbersY:$,numbersScaler:N,transitionOpts:n,onComplete:k}),P&&(B={range:A.gauge.axis.range,color:A.gauge.bgcolor,line:{color:A.gauge.bordercolor,width:0},thickness:1},H={range:A.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:A.gauge.bordercolor,width:A.gauge.borderwidth},thickness:1}),K=T.selectAll("g.angular").data(z?t:[]),K.exit().remove(),D=T.selectAll("g.angularaxis").data(z?t:[]),D.exit().remove(),z&&function(e,t,n,o){var r,v,b,y,_,x,M,F,z,D,N,L,I,B,V,$,W,c=n[0].trace,S=o.size,l=o.radius,A=o.innerRadius,K=o.gaugeBg,q=o.gaugeOutline,T=[S.l+S.w/2,S.t+S.h/2+l/2],f=o.gauge,O=o.layer,P=o.transitionOpts,k=o.onComplete,d=Math.PI/2;function g(e){var n=c.gauge.axis.range[0],t=(e-n)/(c.gauge.axis.range[1]-n)*Math.PI-d;return t<-d?-d:t>d?d:t}function U(e){return i.svg.arc().innerRadius((A+l)/2-e/2*(l-A)).outerRadius((A+l)/2+e/2*(l-A)).startAngle(-d)}function R(e){e.attr("d",function(e){return U(e.thickness).startAngle(g(e.range[0])).endAngle(g(e.range[1]))()})}f.enter().append("g").classed("angular",!0),f.attr("transform",m(T[0],T[1])),O.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),O.selectAll("g.xangularaxistick,path,text").remove(),(r=h(e,c.gauge.axis)).type="linear",r.range=c.gauge.axis.range,r._id="xangularaxis",r.ticklabeloverflow="allow",r.setScale();var p=function(e){return(r.range[0]-e.x)/(r.range[1]-r.range[0])*Math.PI+Math.PI},j={},H=s.makeLabelFns(r,0).labelStandoff;j.xFn=function(e){var t=p(e);return Math.cos(t)*H},j.yFn=function(e){var t=p(e),n=Math.sin(t)>0?.2:1;return-Math.sin(t)*(H+e.fontSize*n)+Math.abs(Math.cos(t))*(e.fontSize*w)},j.anchorFn=function(e){var n=p(e),t=Math.cos(n);return Math.abs(t)<.1?"middle":t>0?"start":"end"},j.heightFn=function(e,t,n){var s=p(e);return-.5*(1+Math.sin(s))*n},N=function(e){return m(T[0]+l*Math.cos(e),T[1]-l*Math.sin(e))},W=function(e){return N(p(e))},(L=s.calcTicks(r),M=s.getTickSigns(r)[2],r.visible)&&(M="inside"===r.ticks?-1:1,I=(r.linewidth||1)/2,s.drawTicks(e,r,{vals:L,layer:O,path:"M"+M*I+",0h"+M*r.ticklen,transFn:function(e){var t=p(e);return N(t)+"rotate("+-E(t)+")"}}),s.drawLabels(e,r,{vals:L,layer:O,transFn:W,labelFns:j})),v=[K].concat(c.gauge.steps),x=f.selectAll("g.bg-arc").data(v),x.enter().append("g").classed("bg-arc",!0).append("path"),x.select("path").call(R).call(a),x.exit().remove(),D=U(c.gauge.bar.thickness),y=f.selectAll("g.value-arc").data([c.gauge.bar]),y.enter().append("g").classed("value-arc",!0).append("path"),_=y.select("path"),u(P)?(_.transition().duration(P.duration).ease(P.easing).each("end",function(){k&&k()}).each("interrupt",function(){k&&k()}).attrTween("d",(B=D,V=g(n[0].lastY),$=g(n[0].y),function(){var e=C(V,$);return function(t){return B.endAngle(e(t))()}})),c._lastValue=n[0].y):_.attr("d","number"==typeof n[0].y?D.endAngle(g(n[0].y)):"M0,0Z"),_.call(a),y.exit().remove(),v=[],b=c.gauge.threshold.value,(b||0===b)&&v.push({range:[b,b],color:c.gauge.threshold.color,line:{color:c.gauge.threshold.line.color,width:c.gauge.threshold.line.width},thickness:c.gauge.threshold.thickness}),F=f.selectAll("g.threshold-arc").data(v),F.enter().append("g").classed("threshold-arc",!0).append("path"),F.select("path").call(R).call(a),F.exit().remove(),z=f.selectAll("g.gauge-outline").data([q]),z.enter().append("g").classed("gauge-outline",!0).append("path"),z.select("path").call(R).call(a),z.exit().remove()}(e,0,t,{radius:L,innerRadius:Y,gauge:K,layer:D,size:_,gaugeBg:B,gaugeOutline:H,transitionOpts:n,onComplete:k}),V=T.selectAll("g.bullet").data(M?t:[]),V.exit().remove(),I=T.selectAll("g.bulletaxis").data(M?t:[]),I.exit().remove(),M&&function(e,t,n,o){var i,f,v,j,_,O,x,C,k,S,M,r=n[0].trace,p=o.gauge,b=o.layer,z=o.gaugeBg,T=o.gaugeOutline,g=o.size,w=r.domain,E=o.transitionOpts,y=o.onComplete;p.enter().append("g").classed("bullet",!0),p.attr("transform",m(g.l,g.t)),b.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),b.selectAll("g.xbulletaxistick,path,text").remove();var c=g.h,A=r.gauge.bar.thickness*c,D=w.x[0],N=w.x[0]+(w.x[1]-w.x[0])*(r._hasNumber||r._hasDelta?1-l.bulletNumberDomainSize:1);function F(e){e.attr("width",function(e){return Math.max(0,i.c2p(e.range[1])-i.c2p(e.range[0]))}).attr("x",function(e){return i.c2p(e.range[0])}).attr("y",function(e){return.5*(1-e.thickness)*c}).attr("height",function(e){return e.thickness*c})}(i=h(e,r.gauge.axis))._id="xbulletaxis",i.domain=[D,N],i.setScale(),v=s.calcTicks(i),C=s.makeTransTickFn(i),M=s.getTickSigns(i)[2],x=g.t+g.h,i.visible&&(s.drawTicks(e,i,{vals:"inside"===i.ticks?s.clipEnds(i,v):v,layer:b,path:s.makeTickPath(i,x,M),transFn:C}),s.drawLabels(e,i,{vals:v,layer:b,transFn:C,labelFns:s.makeLabelFns(i,x)})),k=[z].concat(r.gauge.steps),_=p.selectAll("g.bg-bullet").data(k),_.enter().append("g").classed("bg-bullet",!0).append("rect"),_.select("rect").call(F).call(a),_.exit().remove(),f=p.selectAll("g.value-bullet").data([r.gauge.bar]),f.enter().append("g").classed("value-bullet",!0).append("rect"),f.select("rect").attr("height",A).attr("y",(c-A)/2).call(a),u(E)?f.select("rect").transition().duration(E.duration).ease(E.easing).each("end",function(){y&&y()}).each("interrupt",function(){y&&y()}).attr("width",Math.max(0,i.c2p(Math.min(r.gauge.axis.range[1],n[0].y)))):f.select("rect").attr("width","number"==typeof n[0].y?Math.max(0,i.c2p(Math.min(r.gauge.axis.range[1],n[0].y))):0),f.exit().remove(),S=n.filter(function(){return r.gauge.threshold.value||0===r.gauge.threshold.value}),j=p.selectAll("g.threshold-bullet").data(S),j.enter().append("g").classed("threshold-bullet",!0).append("line"),j.select("line").attr("x1",i.c2p(r.gauge.threshold.value)).attr("x2",i.c2p(r.gauge.threshold.value)).attr("y1",(1-r.gauge.threshold.thickness)/2*c).attr("y2",(1-(1-r.gauge.threshold.thickness)/2)*c).call(d.stroke,r.gauge.threshold.line.color).style("stroke-width",r.gauge.threshold.line.width),j.exit().remove(),O=p.selectAll("g.gauge-outline").data([T]),O.enter().append("g").classed("gauge-outline",!0).append("rect"),O.select("rect").call(F).call(a),O.exit().remove()}(e,0,t,{gauge:V,layer:I,size:_,gaugeBg:B,gaugeOutline:H,transitionOpts:n,onComplete:k}),F=T.selectAll("text.title").data(t),F.exit().remove(),F.enter().append("text").classed("title",!0),F.attr("text-anchor",function(){return M?g.right:g[A.title.align]}).text(A.title.text).call(c.font,A.title.font).call(f.convertToTspans,e),F.attr("transform",function(){var t,s=_.l+_.w*r[A.title.align],n=l.titlePadding,e=c.bBox(F.node());return P?(z&&(t=A.gauge.axis.visible?c.bBox(D.node()).top-n-e.bottom:_.t+_.h/2-L/2-e.bottom-n),M&&(t=$-(e.top+e.bottom)/2,s=_.l-l.bulletPadding*_.w)):t=A._numbersTop-n-e.bottom,m(s,t)})})}},50048:function(e,t,n){"use strict";var c=n(49084),i=n(29736).axisHoverFormat,l=n(21776).Ks,o=n(52948),r=n(45464),a=n(92880).extendFlat,d=n(67824).overrideAll,s=e.exports=d(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),valuehoverformat:i("value",1),showlegend:a({},r.showlegend,{dflt:!1})},c("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:o.opacity,lightposition:o.lightposition,lighting:o.lighting,flatshading:o.flatshading,contour:o.contour,hoverinfo:a({},r.hoverinfo)}),"calc","nested");s.flatshading.dflt=!0,s.lighting.facenormalsepsilon.dflt=0,s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},62624:function(e,t,n){"use strict";var o=n(47128),i=n(3832).processGrid,s=n(3832).filter;e.exports=function(e,t){t._len=Math.min(t.x.length,t.y.length,t.z.length,t.value.length),t._x=s(t.x,t._len),t._y=s(t.y,t._len),t._z=s(t.z,t._len),t._value=s(t.value,t._len),n=i(t),t._gridFill=n.fill,t._Xs=n.Xs,t._Ys=n.Ys,t._Zs=n.Zs,t._len=n.len;for(var n,l,a=1/0,r=-1/0,c=0;c<t._len;c++)l=t._value[c],a=Math.min(a,l),r=Math.max(r,l);t._minValues=a,t._maxValues=r,t._vMin=void 0===t.isomin||null===t.isomin?a:t.isomin,t._vMax=void 0===t.isomax||null===t.isomin?r:t.isomax,o(e,t,{vals:[t._vMin,t._vMax],containerStr:"",cLetter:"c"})}},31460:function(e,t,n){"use strict";var o,a,l=n(67792).gl_mesh3d,d=n(33040).parseColorScale,u=n(3400).isArrayOrTypedArray,h=n(43080),m=n(8932).extractOpts,c=n(52094),s=function(e,t){for(n=t.length-1;n>0;n--){var n,o=Math.min(t[n],t[n-1]),s=Math.max(t[n],t[n-1]);if(s>o&&o<e&&e<=s)return{id:n,distRatio:(s-e)/(s-o)}}return{id:0,distRatio:0}};function i(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.data=null,this.showContour=!1}o=i.prototype,o.handlePick=function(e){if(e.object===this.mesh){var n,o=e.data.index,a=this.data._meshX[o],r=this.data._meshY[o],h=this.data._meshZ[o],m=this.data._Ys.length,i=this.data._Zs.length,c=s(a,this.data._Xs).id,l=s(r,this.data._Ys).id,d=s(h,this.data._Zs).id,t=e.index=d+i*l+i*m*c;return e.traceCoordinate=[this.data._meshX[t],this.data._meshY[t],this.data._meshZ[t],this.data._value[t]],n=this.data.hovertext||this.data.text,u(n)&&void 0!==n[t]?e.textLabel=n[t]:n&&(e.textLabel=n),!0}},o.update=function(e){var t,i,n=this.scene,s=n.fullSceneLayout;function o(e,t,n,s){return t.map(function(t){return e.d2l(t,0,s)*n})}this.data=r(e),t={positions:c(o(s.xaxis,e._meshX,n.dataScale[0],e.xcalendar),o(s.yaxis,e._meshY,n.dataScale[1],e.ycalendar),o(s.zaxis,e._meshZ,n.dataScale[2],e.zcalendar)),cells:c(e._meshI,e._meshJ,e._meshK),lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:h(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},i=m(e),t.vertexIntensity=e._meshIntensity,t.vertexIntensityBounds=[i.min,i.max],t.colormap=d(e),this.mesh.update(t)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},a=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(e){e._meshI=[],e._meshJ=[],e._meshK=[];var y,_,w,O,x,S,V,U,J=e.surface.show,Z=e.spaceframe.show,B=e.surface.fill,I=e.spaceframe.fill,g=!1,m=!1,H=0,A=e._Xs,z=e._Ys,k=e._Zs,l=A.length,c=z.length,r=k.length,Q=a.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),t=function(e,t,n){switch(Q){case 5:return n+r*t+r*c*e;case 4:return n+r*e+r*l*t;case 3:return t+c*n+c*r*e;case 2:return t+c*e+c*l*n;case 1:return e+l*n+l*r*t;default:return e+l*t+l*c*n}},C=e._minValues,j=e._maxValues,u=e._vMin,f=e._vMax;function X(e,t,n){for(var o=_.length,s=U;s<o;s++)if(e===x[s]&&t===O[s]&&n===w[s])return s;return-1}function D(){U=S}function L(){x=[],O=[],w=[],_=[],S=0,D()}function N(e,t,n,s){return x.push(e),O.push(t),w.push(n),_.push(s),++S-1}function o(e,t,n){for(var o=[],s=0;s<e.length;s++)o[s]=e[s]*(1-n)+n*t[s];return o}function E(e){y=e}function v(e,t){return"all"===e||null===e||e.indexOf(t)>-1}function Y(e,t){return null===e?t:e}function d(t,n,s){D(),c=[n],l=[s],y>=1?(c=[n],l=[s]):y>0&&(d=function(e,t){var n=e[0],s=e[1],i=e[2],a=function(e,t,n){for(var o=[],s=0;s<e.length;s++)o[s]=(e[s]+t[s]+n[s])/3;return o}(n,s,i),r=Math.sqrt(1-y),c=o(a,n,r),l=o(a,s,r),d=o(a,i,r),u=t[0],h=t[1],m=t[2];return{xyzv:[[n,s,l],[l,c,n],[s,i,d],[d,l,s],[i,n,c],[c,d,i]],abc:[[u,h,-1],[-1,-1,u],[h,m,-1],[-1,-1,h],[m,u,-1],[-1,-1,m]]}}(n,s),c=d.xyzv,l=d.abc);for(a=0;a<c.length;a++){n=c[a],s=l[a];for(r=[],i=0;i<3;i++){var i,a,r,c,l,d,u,h,m,f=n[i][0],p=n[i][1],g=n[i][2],b=n[i][3],v=s[i]>-1?s[i]:X(f,p,g);r[i]=v>-1?v:N(f,p,g,Y(t,b))}u=r[0],m=r[1],h=r[2],e._meshI.push(u),e._meshJ.push(m),e._meshK.push(h),++H}}function i(e,t,n,s){o=e[3],o<n&&(o=n),o>s&&(o=s);for(var o,a=(e[3]-o)/(e[3]-t[3]+1e-9),r=[],i=0;i<4;i++)r[i]=(1-a)*e[i]+a*t[i];return r}function h(e,t,n){return e>=t&&e<=n}function M(e){var t=.001*(f-u);return e>=u-t&&e<=f+t}function n(t){for(var n,o=[],s=0;s<4;s++)n=t[s],o.push([e._x[n],e._y[n],e._z[n],e._value[n]]);return o}V=3;function b(e,t,n,s,o,a){a||(a=1),n=[-1,-1,-1];var l,m,c=!1,r=[h(t[0][3],s,o),h(t[1][3],s,o),h(t[2][3],s,o)];return!(!r[0]&&!r[1]&&!r[2])&&(l=function(e,t,n){return M(t[0][3])&&M(t[1][3])&&M(t[2][3])?(d(e,t,n),!0):a<V&&b(e,t,n,u,f,++a)},r[0]&&r[1]&&r[2]?l(e,t,n)||c:(m=!1,[[0,1,2],[2,0,1],[1,2,0]].forEach(function(a){if(r[a[0]]&&r[a[1]]&&!r[a[2]]){var d=t[a[0]],u=t[a[1]],h=t[a[2]],p=i(h,d,s,o),f=i(h,u,s,o);c=l(e,[f,p,d],[-1,-1,n[a[0]]])||c,c=l(e,[d,u,f],[n[a[0]],n[a[1]],-1])||c,m=!0}}),m||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(a){if(r[a[0]]&&!r[a[1]]&&!r[a[2]]){var d=t[a[0]],u=t[a[1]],h=t[a[2]],f=i(u,d,s,o),p=i(h,d,s,o);c=l(e,[p,f,d],[-1,-1,n[a[0]]])||c,m=!0}}),c))}function p(e,t,s,o){var l,a=!1,c=n(t),r=[h(c[0][3],s,o),h(c[1][3],s,o),h(c[2][3],s,o),h(c[3][3],s,o)];return r[0]||r[1]||r[2]||r[3]?r[0]&&r[1]&&r[2]&&r[3]?(m&&(a=function(e,t,n){var s=function(s,o,i){d(e,[t[s],t[o],t[i]],[n[s],n[o],n[i]])};s(0,1,2),s(3,0,1),s(2,3,0),s(1,2,3)}(e,c,t)||a),a):(l=!1,[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(n){if(r[n[0]]&&r[n[1]]&&r[n[2]]&&!r[n[3]]){var h=c[n[0]],f=c[n[1]],p=c[n[2]],u=c[n[3]];if(m)a=d(e,[h,f,p],[t[n[0]],t[n[1]],t[n[2]]])||a;else{var g=i(u,h,s,o),v=i(u,f,s,o),b=i(u,p,s,o);a=d(null,[g,v,b],[-1,-1,-1])||a}l=!0}}),l||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(n){if(r[n[0]]&&r[n[1]]&&!r[n[2]]&&!r[n[3]]){var u=c[n[0]],h=c[n[1]],f=c[n[2]],p=c[n[3]],g=i(f,u,s,o),v=i(f,h,s,o),b=i(p,h,s,o),j=i(p,u,s,o);m?(a=d(e,[u,j,g],[t[n[0]],-1,-1])||a,a=d(e,[h,v,b],[t[n[1]],-1,-1])||a):a=function(e,t,n){var s=function(e,s,o){d(null,[t[e],t[s],t[o]],[n[e],n[s],n[o]])};s(0,1,2),s(2,3,0)}(0,[g,v,b,j],[-1,-1,-1,-1])||a,l=!0}}),l||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(n){if(r[n[0]]&&!r[n[1]]&&!r[n[2]]&&!r[n[3]]){var u=c[n[0]],g=c[n[1]],v=c[n[2]],b=c[n[3]],h=i(g,u,s,o),f=i(v,u,s,o),p=i(b,u,s,o);m?(a=d(e,[u,h,f],[t[n[0]],-1,-1])||a,a=d(e,[u,f,p],[t[n[0]],-1,-1])||a,a=d(e,[u,p,h],[t[n[0]],-1,-1])||a):a=d(null,[h,f,p],[-1,-1,-1])||a,l=!0}})),a):a}function q(e,t,n,s,o,i,a,r,c,l,d){var u=!1;return g&&(v(e,"A")&&(u=p(null,[t,n,s,i],l,d)||u),v(e,"B")&&(u=p(null,[n,s,o,c],l,d)||u),v(e,"C")&&(u=p(null,[n,i,a,c],l,d)||u),v(e,"D")&&(u=p(null,[s,i,r,c],l,d)||u),v(e,"E")&&(u=p(null,[n,s,i,c],l,d)||u)),m&&(u=p(e,[n,s,i,c],l,d)||u),u}function K(e,t,s,o,i,a,r,c){return[!0===c[0]||b(e,n([t,s,o]),[t,s,o],a,r),!0===c[1]||b(e,n([o,i,t]),[o,i,t],a,r)]}function T(e,t,n,s,o,i,a,r,c){return r?K(e,t,n,o,s,i,a,c):K(e,n,o,s,t,i,a,c)}function F(e,s,i,a,r,c,l){var d,h,g,v,m=!1,j=function(){m=b(e,[d,v,h],[-1,-1,-1],r,c)||m,m=b(e,[h,g,d],[-1,-1,-1],r,c)||m},f=l[0],u=l[1],p=l[2];return f&&(d=o(n([t(s,i-0,a-0)])[0],n([t(s-1,i-0,a-0)])[0],f),v=o(n([t(s,i-0,a-1)])[0],n([t(s-1,i-0,a-1)])[0],f),h=o(n([t(s,i-1,a-1)])[0],n([t(s-1,i-1,a-1)])[0],f),g=o(n([t(s,i-1,a-0)])[0],n([t(s-1,i-1,a-0)])[0],f),j()),u&&(d=o(n([t(s-0,i,a-0)])[0],n([t(s-0,i-1,a-0)])[0],u),v=o(n([t(s-0,i,a-1)])[0],n([t(s-0,i-1,a-1)])[0],u),h=o(n([t(s-1,i,a-1)])[0],n([t(s-1,i-1,a-1)])[0],u),g=o(n([t(s-1,i,a-0)])[0],n([t(s-1,i-1,a-0)])[0],u),j()),p&&(d=o(n([t(s-0,i-0,a)])[0],n([t(s-0,i-0,a-1)])[0],p),v=o(n([t(s-0,i-1,a)])[0],n([t(s-0,i-1,a-1)])[0],p),h=o(n([t(s-1,i-1,a)])[0],n([t(s-1,i-1,a-1)])[0],p),g=o(n([t(s-1,i-0,a)])[0],n([t(s-1,i-0,a-1)])[0],p),j()),m}function G(e,t,n,s,o,i,a,r,c,l,d,u){var h=e;return u?(g&&"even"===e&&(h=null),q(h,t,n,s,o,i,a,r,c,l,d)):(g&&"odd"===e&&(h=null),q(h,c,r,a,i,o,s,n,t,l,d))}function R(e,n,s,o,i){for(var a,l,d,m=[],u=0,h=0;h<n.length;h++)for(d=n[h],a=1;a<r;a++)for(l=1;l<c;l++)m.push(T(e,t(d,l-1,a-1),t(d,l-1,a),t(d,l,a-1),t(d,l,a),s,o,(d+l+a)%2,i&&i[u]?i[u]:[])),u++;return m}function P(e,n,s,o,i){for(var a,c,d,m=[],u=0,h=0;h<n.length;h++)for(d=n[h],a=1;a<l;a++)for(c=1;c<r;c++)m.push(T(e,t(a-1,d,c-1),t(a,d,c-1),t(a-1,d,c),t(a,d,c),s,o,(a+d+c)%2,i&&i[u]?i[u]:[])),u++;return m}function $(e,n,s,o,i){for(var a,r,d,m=[],u=0,h=0;h<n.length;h++)for(d=n[h],a=1;a<c;a++)for(r=1;r<l;r++)m.push(T(e,t(r-1,a-1,d),t(r-1,a,d),t(r,a-1,d),t(r,a,d),s,o,(r+a+d)%2,i&&i[u]?i[u]:[])),u++;return m}function W(e,n,s){for(var o,i,a=1;a<r;a++)for(o=1;o<c;o++)for(i=1;i<l;i++)G(e,t(i-1,o-1,a-1),t(i-1,o-1,a),t(i-1,o,a-1),t(i-1,o,a),t(i,o-1,a-1),t(i,o-1,a),t(i,o,a-1),t(i,o,a),n,s,(i+o+a)%2)}function ee(e,t,n,s,o,i){for(var l,d,m,h=[],u=0,a=0;a<t.length;a++)for(m=t[a],l=1;l<r;l++)for(d=1;d<c;d++)h.push(F(e,m,d,l,n,s,o[a],i&&i[u]&&i[u])),u++;return h}function te(e,t,n,s,o,i){for(var c,d,m,h=[],u=0,a=0;a<t.length;a++)for(m=t[a],c=1;c<l;c++)for(d=1;d<r;d++)h.push(F(e,c,m,d,n,s,o[a],i&&i[u]&&i[u])),u++;return h}function ne(e,t,n,s,o,i){for(var r,d,m,h=[],u=0,a=0;a<t.length;a++)for(m=t[a],r=1;r<c;r++)for(d=1;d<l;d++)h.push(F(e,d,r,m,n,s,o[a],i&&i[u]&&i[u])),u++;return h}function se(e,t){for(var s=[],n=e;n<t;n++)s.push(n);return s}return function(){if(L(),function(){for(var n,s,o,i=0;i<l;i++)for(s=0;s<c;s++)for(o=0;o<r;o++)n=t(i,s,o),N(e._x[n],e._y[n],e._z[n],e._value[n])}(),n=null,Z&&I&&(E(I),m=!0,W(n,u,f),m=!1),J&&B){E(B);for(var n,o,v=e.surface.pattern,a=e.surface.count,d=0;d<a;d++){var h=1===a?.5:d/(a-1),i=(1-h)*u+h*f,p=Math.abs(i-C)>Math.abs(i-j)?[C,i]:[i,j];g=!0,W(v,p[0],p[1]),g=!1}}o=[[Math.min(u,j),Math.max(u,j)],[Math.min(C,f),Math.max(C,f)]],["x","y","z"].forEach(function(t){for(a=[],g=0;g<o.length;g++){var a,h,g,b,j,i=0,d=o[g][0],u=o[g][1],m=e.slices[t];if(m.show&&m.fill){E(m.fill);var f=[],v=[],p=[];if(m.locations.length)for(b=0;b<m.locations.length;b++)h=s(m.locations[b],"x"===t?A:"y"===t?z:k),0===h.distRatio?f.push(h.id):h.id>0&&(v.push(h.id),"x"===t?p.push([h.distRatio,0,0]):"y"===t?p.push([0,h.distRatio,0]):p.push([0,0,h.distRatio]));else f=se(1,"x"===t?l-1:"y"===t?c-1:r-1);v.length>0&&(a[i]="x"===t?ee(n,v,d,u,p,a[i]):"y"===t?te(n,v,d,u,p,a[i]):ne(n,v,d,u,p,a[i]),i++),f.length>0&&(a[i]="x"===t?R(n,f,d,u,a[i]):"y"===t?P(n,f,d,u,a[i]):$(n,f,d,u,a[i]),i++)}j=e.caps[t],j.show&&j.fill&&(E(j.fill),a[i]="x"===t?R(n,[0,l-1],d,u,a[i]):"y"===t?P(n,[0,c-1],d,u,a[i]):$(n,[0,r-1],d,u,a[i]),i++)}}),0===H&&L(),e._meshX=x,e._meshY=O,e._meshZ=w,e._meshIntensity=_,e._Xs=A,e._Ys=z,e._Zs=k}(),e}e.exports={findNearestOnAxis:s,generateIsoMeshes:r,createIsosurfaceTrace:function(e,t){var o=e.glplot.gl,n=l({gl:o}),s=new i(e,n,t.uid);return n._trace=s,s.update(t),e.glplot.add(n),s}}},70548:function(e,t,n){"use strict";var o=n(3400),i=n(24040),a=n(50048),r=n(27260);function s(e,t,n,s,o){a=o("isomin"),c=o("isomax"),c!=null&&a!=null&&a>c&&(t.isomin=null,t.isomax=null);var a,c,l=o("x"),d=o("y"),u=o("z"),h=o("value");l&&l.length&&d&&d.length&&u&&u.length&&h&&h.length?(i.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],s),o("valuehoverformat"),["x","y","z"].forEach(function(e){o(e+"hoverformat");var t,n="caps."+e;o(n+".show")&&o(n+".fill"),t="slices."+e,o(t+".show")&&(o(t+".fill"),o(t+".locations"))}),o("spaceframe.show")&&o("spaceframe.fill"),o("surface.show")&&(o("surface.count"),o("surface.fill"),o("surface.pattern")),o("contour.show")&&(o("contour.color"),o("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(e){o(e)}),r(e,t,s,o,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}e.exports={supplyDefaults:function(e,t,n,i){s(e,t,0,i,function(n,s){return o.coerce(e,t,a,n,s)})},supplyIsoDefaults:s}},6296:function(e,t,n){"use strict";e.exports={attributes:n(50048),supplyDefaults:n(70548).supplyDefaults,calc:n(62624),colorbar:{min:"cmin",max:"cmax"},plot:n(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:n(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(e,t,n){"use strict";var r=n(49084),i=n(29736).axisHoverFormat,c=n(21776).Ks,s=n(16716),a=n(45464),o=n(92880).extendFlat;e.exports=o({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:c({editType:"calc"}),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:s.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o({},s.contours.x.show,{}),color:s.contours.x.color,width:s.contours.x.width,editType:"calc"},lightposition:{x:o({},s.lightposition.x,{dflt:1e5}),y:o({},s.lightposition.y,{dflt:1e5}),z:o({},s.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},s.lighting),hoverinfo:o({},a.hoverinfo,{editType:"calc"}),showlegend:o({},a.showlegend,{dflt:!1})})},1876:function(e,t,n){"use strict";var s=n(47128);e.exports=function(e,t){t.intensity&&s(e,t,{vals:t.intensity,containerStr:"",cLetter:"c"})}},576:function(e,t,n){"use strict";var s,v=n(67792).gl_mesh3d,g=n(67792).delaunay_triangulate,p=n(67792).alpha_shape,f=n(67792).convex_hull,m=n(33040).parseColorScale,h=n(3400).isArrayOrTypedArray,o=n(43080),u=n(8932).extractOpts,d=n(52094);function l(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}s=l.prototype;function c(e){for(var n=[],s=e.length,t=0;t<s;t++)n[t]=o(e[t]);return n}function a(e,t,n,s){for(var i=[],a=t.length,o=0;o<a;o++)i[o]=e.d2l(t[o],0,s)*n;return i}function i(e){for(var n=[],s=e.length,t=0;t<s;t++)n[t]=Math.round(e[t]);return n}function r(e,t){for(var s=e.length,n=0;n<s;n++)if(e[n]<=-.5||e[n]>=t-.5)return!1;return!0}s.handlePick=function(e){if(e.object===this.mesh){var t,n=e.index=e.data.index;return e.data._cellCenter?e.traceCoordinate=e.data.dataCoordinate:e.traceCoordinate=[this.data.x[n],this.data.y[n],this.data.z[n]],t=this.data.hovertext||this.data.text,h(t)&&void 0!==t[n]?e.textLabel=t[n]:t&&(e.textLabel=t),!0}},s.update=function(e){var t,n,l,v,b,j,s=this.scene,h=s.fullSceneLayout;if(this.data=e,l=e.x.length,n=d(a(h.xaxis,e.x,s.dataScale[0],e.xcalendar),a(h.yaxis,e.y,s.dataScale[1],e.ycalendar),a(h.zaxis,e.z,s.dataScale[2],e.zcalendar)),e.i&&e.j&&e.k){if(e.i.length!==e.j.length||e.j.length!==e.k.length||!r(e.i,l)||!r(e.j,l)||!r(e.k,l))return;v=d(i(e.i),i(e.j),i(e.k))}else v=0===e.alphahull?f(n):e.alphahull>0?p(e.alphahull,n):function(e,t){for(var s=["x","y","z"].indexOf(e),o=[],i=t.length,n=0;n<i;n++)o[n]=[t[n][(s+1)%3],t[n][(s+2)%3]];return g(o)}(e.delaunayaxis,n);t={positions:n,cells:v,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:o(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},e.intensity?(b=u(e),this.color="#fff",j=e.intensitymode,t[j+"Intensity"]=e.intensity,t[j+"IntensityBounds"]=[b.min,b.max],t.colormap=m(e)):e.vertexcolor?(this.color=e.vertexcolor[0],t.vertexColors=c(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],t.cellColors=c(e.facecolor)):(this.color=e.color,t.meshColor=o(e.color)),this.mesh.update(t)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},e.exports=function(e,t){var o=e.glplot.gl,n=v({gl:o}),s=new l(e,n,t.uid);return n._trace=s,s.update(t),e.glplot.add(n),s}},74212:function(e,t,n){"use strict";var o=n(24040),s=n(3400),i=n(27260),a=n(52948);e.exports=function(e,t,n,r){function c(n,o){return s.coerce(e,t,a,n,o)}function l(e){var t=e.map(function(e){var t=c(e);return t&&s.isArrayOrTypedArray(t)?t:null});return t.every(function(e){return e&&e.length===t[0].length})&&t}l(["x","y","z"])?(l(["i","j","k"]),(!t.i||t.j&&t.k)&&(!t.j||t.k&&t.i)&&(!t.k||t.i&&t.j)?(o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(e){c(e)}),c("contour.show")&&(c("contour.color"),c("contour.width")),"intensity"in e?(c("intensity"),c("intensitymode"),i(e,t,r,c,{prefix:"",cLetter:"c"})):(t.showscale=!1,"facecolor"in e?c("facecolor"):"vertexcolor"in e?c("vertexcolor"):c("color",n)),c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),t._length=null):t.visible=!1):t.visible=!1}},7404:function(e,t,n){"use strict";e.exports={attributes:n(52948),supplyDefaults:n(74212),calc:n(1876),colorbar:{min:"cmin",max:"cmax"},plot:n(576),moduleType:"trace",name:"mesh3d",basePlotModule:n(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(e,t,n){"use strict";var o=n(3400).extendFlat,s=n(52904),c=n(29736).axisHoverFormat,a=n(98192).u,d=n(55756),r=n(48164),u=r.INCREASING.COLOR,h=r.DECREASING.COLOR,i=s.line;function l(e){return{line:{color:o({},i.color,{dflt:e}),width:i.width,dash:a,editType:"style"},editType:"style"}}e.exports={xperiod:s.xperiod,xperiod0:s.xperiod0,xperiodalignment:s.xperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:o({},i.width,{}),dash:o({},a,{}),editType:"style"},increasing:l(u),decreasing:l(h),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:o({},d.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:s.zorder}},42812:function(e,t,n){"use strict";var s=n(3400),i=s._,a=n(54460),c=n(1220),o=n(39032).BADNUM;function l(e,t,n,s){return{o:e,h:t,l:n,c:s}}function r(e,t,n,r,c,l){for(var d,E=c.makeCalcdata(t,"open"),y=c.makeCalcdata(t,"high"),_=c.makeCalcdata(t,"low"),C=c.makeCalcdata(t,"close"),x=s.isArrayOrTypedArray(t.text),O=s.isArrayOrTypedArray(t.hovertext),v=!0,p=null,w=!!t.xperiodalignment,f=[],u=0;u<r.length;u++){var j=r[u],m=E[u],g=y[u],b=_[u],h=C[u];j!==o&&m!==o&&g!==o&&b!==o&&h!==o?(h===m?null!==p&&h!==p&&(v=h>p):v=h>m,p=h,d=l(m,g,b,h),d.pos=j,d.yc=(m+h)/2,d.i=u,d.dir=v?"increasing":"decreasing",d.x=d.pos,d.y=[b,g],w&&(d.orig_p=n[u]),x&&(d.tx=t.text[u]),O&&(d.htx=t.hovertext[u]),f.push(d)):f.push({pos:j,empty:!0})}return t._extremes[c._id]=a.findExtremes(c,s.concat(_,y),{padded:!0}),f.length&&(f[0].t={labels:{open:i(e,"open:")+" ",high:i(e,"high:")+" ",low:i(e,"low:")+" ",close:i(e,"close:")+" "}}),f}e.exports={calc:function(e,t){var n,o,u,i=a.getFromId(e,t.xaxis),h=a.getFromId(e,t.yaxis),m=function(e,t,n){if(o=n._minDiff,!o){var o,i,a,r,d,u,h=e._fullData,l=[];for(o=1/0,i=0;i<h.length;i++)a=h[i],"ohlc"===a.type&&!0===a.visible&&a.xaxis===t._id&&(l.push(a),d=t.makeCalcdata(a,"x"),a._origX=d,u=c(n,t,"x",d).vals,a._xcalc=u,r=s.distinctVals(u).minDiff,r&&isFinite(r)&&(o=Math.min(o,r)));for(o===1/0&&(o=1),i=0;i<l.length;i++)l[i]._minDiff=o}return o*n.tickwidth}(e,i,t),d=t._minDiff;return t._minDiff=null,u=t._origX,t._origX=null,o=t._xcalc,t._xcalc=null,n=r(e,t,u,o,h,l),t._extremes[i._id]=a.findExtremes(i,o,{vpad:d/2}),n.length?(s.extendFlat(n[0].t,{wHover:d/2,tickLen:m}),n):[{t:{empty:!0}}]},calcCommon:r}},23860:function(e,t,n){"use strict";var o=n(3400),i=n(52744),a=n(31147),r=n(20279);function s(e,t,n,s){n(s+".line.color"),n(s+".line.width",t.line.width),n(s+".line.dash",t.line.dash)}e.exports=function(e,t,n,c){function l(n,s){return o.coerce(e,t,r,n,s)}i(e,t,l,c)?(a(e,t,c,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),l("line.dash"),s(0,t,l,"increasing"),s(0,t,l,"decreasing"),l("text"),l("hovertext"),l("tickwidth"),c._requestRangeslider[t.xaxis]=!0,l("zorder")):t.visible=!1}},18720:function(e,t,n){"use strict";var o=n(54460),u=n(3400),s=n(93024),h=n(76308),l=n(3400).fillText,r=n(48164),d={increasing:r.INCREASING.SYMBOL,decreasing:r.DECREASING.SYMBOL};function i(e,t,n,o){var i,r,d,f,_,O,c=e.cd,a=e.xa,w=c[0].trace,l=c[0].t,v=w.type,C="ohlc"===v?"l":"min",x="ohlc"===v?"h":"max",u=l.bPos||0,E=function(e){return e.pos+u-t},m=l.bdPos||l.tickLen,b=l.wHover,j=Math.min(1,m/Math.abs(a.r2c(a.range[1])-a.r2c(a.range[0])));function y(e){var t=E(e);return s.inbox(t-b,t+b,d)}function p(e){var t=e[C],o=e[x];return t===o||s.inbox(t-n,o-n,d)}function g(e){return(y(e)+p(e))/2}return d=e.maxHoverDistance-j,O=e.maxSpikeDistance-j,_=s.getDistanceFunction(o,y,p,g),s.getClosest(c,_,e),!1===e.index?null:(i=c[e.index],i.empty?null:(r=w[i.dir],f=r.line.color,h.opacity(f)&&r.line.width?e.color=f:e.color=r.fillcolor,e.x0=a.c2p(i.pos+u-m,!0),e.x1=a.c2p(i.pos+u+m,!0),e.xLabelVal=void 0!==i.orig_p?i.orig_p:i.pos,e.spikeDistance=g(i)*O/d,e.xSpike=a.c2p(i.pos,!0),e))}function c(e,t,n,s){var f,v,p=e.cd,h=e.ya,l=p[0].trace,y=p[0].t,j=[],c=i(e,t,n,s);if(!c)return[];if(f=p[c.index].hi||l.hoverinfo,v=f.split("+"),"all"!==f&&-1===v.indexOf("y"))return[];for(var b=["high","open","close","low"],g={},d=0;d<b.length;d++){var a,m=b[d],r=l[m][c.index],_=h.c2p(r,!0);r in g?(a=g[r]).yLabel+="<br>"+y.labels[m]+o.hoverLabelText(h,r,l.yhoverformat):((a=u.extendFlat({},c)).y0=a.y1=_,a.yLabelVal=r,a.yLabel=y.labels[m]+o.hoverLabelText(h,r,l.yhoverformat),a.name="",j.push(a),g[r]=a)}return j}function a(e,t,n,s){var h=e.cd,g=e.ya,c=h[0].trace,j=h[0].t,a=i(e,t,n,s);if(!a)return[];var r=h[a.index],b=a.index=r.i,w=r.dir;function u(e){return j.labels[e]+o.hoverLabelText(g,c[e][b],c.yhoverformat)}var m=r.hi||c.hoverinfo,p=m.split("+"),f="all"===m,y=f||-1!==p.indexOf("y"),_=f||-1!==p.indexOf("text"),v=y?[u("open"),u("high"),u("low"),u("close")+"  "+d[w]]:[];return _&&l(r,c,v),a.extraText=v.join("<br>"),a.y0=a.y1=g.c2p(r.yc,!0),[a]}e.exports={hoverPoints:function(e,t,n,s){return e.cd[0].trace.hoverlabel.split?c(e,t,n,s):a(e,t,n,s)},hoverSplit:c,hoverOnPoints:a}},65456:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"ohlc",basePlotModule:n(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:n(20279),supplyDefaults:n(23860),calc:n(42812).calc,plot:n(36664),style:n(14008),hoverPoints:n(18720).hoverPoints,selectPoints:n(97384)}},52744:function(e,t,n){"use strict";var s=n(24040),o=n(3400);e.exports=function(e,t,n,i){var a,r=n("x"),c=n("open"),l=n("high"),d=n("low"),u=n("close");if(n("hoverlabel.split"),s.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x"],i),c&&l&&d&&u)return a=Math.min(c.length,l.length,d.length,u.length),r&&(a=Math.min(a,o.minRowLength(r))),t._length=a,a}},36664:function(e,t,n){"use strict";var o=n(33428),s=n(3400);e.exports=function(e,t,n,i){var a=t.yaxis,r=t.xaxis,c=!!r.rangebreaks;s.makeTraceGroups(i,n,"trace ohlc").each(function(e){var t,n,i=o.select(this),l=e[0],d=l.t;!0!==l.trace.visible||d.empty?i.remove():(n=d.tickLen,t=i.selectAll("path").data(s.identity),t.enter().append("path"),t.exit().remove(),t.attr("d",function(e){if(e.empty)return"M0,0Z";var s=r.c2p(e.pos-n,!0),o=r.c2p(e.pos+n,!0),t=c?(s+o)/2:r.c2p(e.pos,!0);return"M"+s+","+a.c2p(e.o,!0)+"H"+t+"M"+t+","+a.c2p(e.h,!0)+"V"+a.c2p(e.l,!0)+"M"+o+","+a.c2p(e.c,!0)+"H"+t}))})}},97384:function(e){"use strict";e.exports=function(e,t){var n,s,o=e.cd,i=e.xaxis,a=e.yaxis,r=[],c=o[0].t.bPos||0;if(!1===t)for(s=0;s<o.length;s++)o[s].selected=0;else for(s=0;s<o.length;s++)n=o[s],t.contains([i.c2p(n.pos+c),a.c2p(n.yc)],null,n.i,e)?(r.push({pointNumber:n.i,x:i.c2d(n.pos),y:a.c2d(n.yc)}),n.selected=1):n.selected=0;return r}},14008:function(e,t,n){"use strict";var s=n(33428),o=n(43616),i=n(76308);e.exports=function(e,t,n){var a=n||s.select(e).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(e){return e[0].trace.opacity}),a.each(function(e){var t=e[0].trace;s.select(this).selectAll("path").each(function(e){if(!e.empty){var n=t[e.dir].line;s.select(this).style("fill","none").call(i.stroke,n.color).call(o.dashLine,n.dash,n.width).style("opacity",t.selectedpoints&&!e.selected?.3:1)}})})}},72140:function(e,t,n){"use strict";var s=n(92880).extendFlat,a=n(45464),o=n(25376),r=n(49084),i=n(21776).Ks,c=n(86968).u,l=s({editType:"calc"},r("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:i({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});e.exports={domain:c({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:s({},a.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:i({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:l,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(e,t,n){"use strict";var o=n(84888)._M,i=n(60268),s="parcats";t.name=s,t.plot=function(e,t,n,a){var c,r=o(e.calcdata,s);r.length&&(c=r[0],i(e,c,n,a))},t.clean=function(e,t,n,s){var o=s._has&&s._has("parcats"),i=t._has&&t._has("parcats");o&&!i&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(e,t,n){"use strict";var o=n(71688).wrap,i=n(94288).hasColorscale,a=n(47128),r=n(68944),c=n(43616),s=n(3400),l=n(38248);function d(e,t,n){e.valueInds.push(t),e.count+=n}function u(e,t,n){return{categoryInds:e,color:t,rawColor:n,valueInds:[],count:0}}function h(e,t,n){e.valueInds.push(t),e.count+=n}e.exports=function(e,t){if(f=s.filterVisible(t.dimensions),0===f.length)return[];x=f.map(function(e){if("trace"===e.categoryorder)t=null;else if("array"===e.categoryorder)t=e.categoryarray;else{t=r(e.values);for(var t,o=!0,n=0;n<t.length;n++)if(!l(t[n])){o=!1;break}t.sort(o?s.sorterAsc:void 0),"category descending"===e.categoryorder&&(t=t.reverse())}return function(e,t){t=t==null?[]:t.map(function(e){return e});var n,o,i,c,s={},a={},r=[];t.forEach(function(e,t){s[e]=0,a[e]=t});for(o=0;o<e.length;o++)n=e[o],void 0===s[n]?(s[n]=1,i=t.push(n)-1,a[n]=i):(s[n]++,i=a[n]),r.push(i);return c=t.map(function(e){return s[e]}),{uniqueValues:t,uniqueCounts:c,inds:r}}(e.values,t)}),j=s.isArrayOrTypedArray(t.counts)?t.counts:[t.counts],function(e){var t,n=e.map(function(e){return e.displayindex});if(function(e){for(var n=new Array(e.length),t=0;t<e.length;t++){if(e[t]<0||e[t]>=e.length)return!1;if(void 0!==n[e[t]])return!1;n[e[t]]=!0}return!0}(n))for(t=0;t<e.length;t++)e[t]._displayindex=e[t].displayindex;else for(t=0;t<e.length;t++)e[t]._displayindex=t}(f),f.forEach(function(e,t){!function(e,t){e._categoryarray=t.uniqueValues,null===e.ticktext||void 0===e.ticktext?e._ticktext=[]:e._ticktext=e.ticktext.slice();for(var n=e._ticktext.length;n<t.uniqueValues.length;n++)e._ticktext.push(t.uniqueValues[n])}(e,x[t])}),p=t.line,p?(i(t,"line")&&a(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),A=c.tryColorscale(p)):A=s.identity;var n,m,f,p,v,b,j,y,_,w,O,x,E,k,A,F,D,N,L,M=f[0].values.length,C={},z=x.map(function(e){return e.inds});for(E=0,n=0;n<M;n++){O=[];for(m=0;m<z.length;m++)O.push(z[m][n]);v=j[n%j.length],E+=v,_=(D=n,w=void 0,k=void 0,s.isArrayOrTypedArray(p.color)?k=w=p.color[D%p.color.length]:w=p.color,{color:A(w),rawColor:k}),y=O+"-"+_.rawColor,void 0===C[y]&&(C[y]=u(O,_.color,_.rawColor)),h(C[y],n,v)}b=f.map(function(e,t){return function(e,t,n,s,o){return{dimensionInd:e,containerInd:t,displayInd:n,dimensionLabel:s,count:o,categories:[],dragX:null}}(t,e._index,e._displayindex,e.label,E)});for(n=0;n<M;n++)for(v=j[n%j.length],m=0;m<b.length;m++){var T=b[m].containerInd,g=x[m].inds[n],S=b[m].categories;void 0===S[g]&&(N=t.dimensions[T]._categoryarray[g],L=t.dimensions[T]._ticktext[g],S[g]={dimensionInd:m,categoryInd:F=g,categoryValue:N,displayInd:F,categoryLabel:L,valueInds:[],count:0,dragY:null}),d(S[g],n,v)}return o(function(e,t,n){var s=e.map(function(e){return e.categories.length}).reduce(function(e,t){return Math.max(e,t)});return{dimensions:e,paths:t,trace:void 0,maxCats:s,count:n}}(b,C,E))}},76671:function(e,t,n){"use strict";var s=n(3400),i=n(94288).hasColorscale,a=n(27260),r=n(86968).Q,c=n(51272),o=n(72140),l=n(26284),d=n(38116).isTypedArraySpec;function u(e,t){function n(n,i){return s.coerce(e,t,o.dimensions,n,i)}var i,a,r,u,c=n("values"),l=n("visible");c&&c.length||(l=t.visible=!1),l&&(n("label"),n("displayindex",t._index),i=e.categoryarray,a=s.isArrayOrTypedArray(i)&&i.length>0||d(i),a&&(u="array"),r=n("categoryorder",u),"array"===r?(n("categoryarray"),n("ticktext")):(delete e.categoryarray,delete e.ticktext),a||"array"!==r||(t.categoryorder="trace"))}e.exports=function(e,t,n,d){function h(n,i){return s.coerce(e,t,o,n,i)}var f,p,m=c(e,t,{name:"dimensions",handleItemDefaults:u}),g=function(e,t,n,o,r){r("line.shape"),r("line.hovertemplate");var c=r("line.color",o.colorway[0]);if(i(e,"line")&&s.isArrayOrTypedArray(c)){if(c.length)return r("line.colorscale"),a(e,t,o,r,{prefix:"line.",cLetter:"c"}),c.length;t.line.color=n}return 1/0}(e,t,n,d,h);r(t,d,h),Array.isArray(m)&&m.length||(t.visible=!1),l(t,m,"values",g),h("hoveron"),h("hovertemplate"),h("arrangement"),h("bundlecolors"),h("sortpaths"),h("counts"),f={weight:d.font.weight,style:d.font.style,variant:d.font.variant,family:d.font.family,size:Math.round(d.font.size),color:d.font.color},s.coerceFont(h,"labelfont",f),p={weight:d.font.weight,style:d.font.style,variant:d.font.variant,family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color},s.coerceFont(h,"tickfont",p)}},22020:function(e,t,n){"use strict";e.exports={attributes:n(72140),supplyDefaults:n(76671),calc:n(69136),plot:n(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:n(91800),categories:["noOpacity"],meta:{}}},51036:function(e,t,n){"use strict";var s=n(33428),I=n(67756).Gz,H=n(36424),r=n(93024),i=n(3400),c=i.strTranslate,k=n(43616),m=n(49760),E=n(72736);function N(e,t,n,r){var l,d,h,m,f,v,b,j,y,w,C=t._context.staticPlot,x=e.map(R.bind(0,t,n)),_=r.selectAll("g.parcatslayer").data([null]);_.enter().append("g").attr("class","parcatslayer").style("pointer-events",C?"none":"all"),d=_.selectAll("g.trace.parcats").data(x,o),b=d.enter().append("g").attr("class","trace parcats"),d.attr("transform",function(e){return c(e.x,e.y)}),b.append("g").attr("class","paths"),h=d.select("g.paths").selectAll("path.path").data(function(e){return e.paths},o),h.attr("fill",function(e){return e.model.color}),j=h.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(e){return e.model.color}).attr("fill-opacity",0),u(j),h.attr("d",function(e){return e.svgD}),j.empty()||h.sort(p),h.exit().remove(),h.on("mouseover",L).on("mouseout",P).on("click",S),b.append("g").attr("class","dimensions"),f=d.select("g.dimensions").selectAll("g.dimension").data(function(e){return e.dimensions},o),f.enter().append("g").attr("class","dimension"),f.attr("transform",function(e){return c(e.x,0)}),f.exit().remove(),l=f.selectAll("g.category").data(function(e){return e.categories},o),v=l.enter().append("g").attr("class","category"),l.attr("transform",function(e){return c(0,e.y)}),v.append("rect").attr("class","catrect").attr("pointer-events","none"),l.select("rect.catrect").attr("fill","none").attr("width",function(e){return e.width}).attr("height",function(e){return e.height}),O(v),m=l.selectAll("rect.bandrect").data(function(e){return e.bands},o),m.each(function(){i.raiseToTop(this)}),m.attr("fill",function(e){return e.color}),w=m.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(e){return e.color}).attr("fill-opacity",0),m.attr("fill",function(e){return e.color}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("y",function(e){return e.y}).attr("cursor",function(e){return"fixed"===e.parcatsViewModel.arrangement?"default":"perpendicular"===e.parcatsViewModel.arrangement?"ns-resize":"move"}),g(w),m.exit().remove(),v.append("text").attr("class","catlabel").attr("pointer-events","none"),y=t._fullLayout.paper_bgcolor,l.select("text.catlabel").attr("text-anchor",function(e){return a(e)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",E.makeTextShadow(y)).style("fill","rgb(0, 0, 0)").attr("x",function(e){return a(e)?e.width+5:-5}).attr("y",function(e){return e.height/2}).text(function(e){return e.model.categoryLabel}).each(function(e){k.font(s.select(this),e.parcatsViewModel.categorylabelfont),E.convertToTspans(s.select(this),t)}),v.append("text").attr("class","dimlabel"),l.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(e){return"fixed"===e.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(e){return e.width/2}).attr("y",-5).text(function(e,t){return 0===t?e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel:null}).each(function(e){k.font(s.select(this),e.parcatsViewModel.labelfont)}),l.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",M),l.exit().remove(),f.call(s.behavior.drag().origin(function(e){return{x:e.x,y:0}}).on("dragstart",F).on("drag",T).on("dragend",z)),d.each(function(e){e.traceSelection=s.select(this),e.pathSelection=s.select(this).selectAll("g.paths").selectAll("path.path"),e.dimensionSelection=s.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),d.exit().remove()}function o(e){return e.key}function a(e){var t=e.parcatsViewModel.dimensions.length,n=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===n}function p(e,t){return e.model.rawColor>t.model.rawColor?1:e.model.rawColor<t.model.rawColor?-1:0}function L(e){if(!e.parcatsViewModel.dragDimension&&-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")&&(i.raiseToTop(this),y(s.select(this)),f=l(e),E=j(e),e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:f,event:s.event,constraints:E}),-1===e.parcatsViewModel.hoverinfoItems.indexOf("none"))){var t,O,x,v=s.mouse(this)[0],u=e.parcatsViewModel.graphDiv,n=e.parcatsViewModel.trace,o=u._fullLayout,p=o._paperdiv.node().getBoundingClientRect(),g=e.parcatsViewModel.graphDiv.getBoundingClientRect();for(t=0;t<e.leftXs.length-1;t++)if(e.leftXs[t]+e.dimWidths[t]-2<=v&&v<=e.leftXs[t+1]+2){d=e.parcatsViewModel.dimensions[t],b=e.parcatsViewModel.dimensions[t+1],x=(d.x+d.width+b.x)/2,O=(e.topYs[t]+e.topYs[t+1]+e.height)/2;break}var d,f,b,w,E,k,_=e.parcatsViewModel.x+x,S=e.parcatsViewModel.y+O,A=m.mostReadable(e.model.color,["black","white"]),a=e.model.count,C=a/e.parcatsViewModel.model.count,h={countLabel:a,probabilityLabel:C.toFixed(3)},c=[];-1!==e.parcatsViewModel.hoverinfoItems.indexOf("count")&&c.push(["Count:",h.countLabel].join(" ")),-1!==e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&c.push(["P:",h.probabilityLabel].join(" ")),w=c.join("<br>"),k=s.mouse(u)[0],r.loneHover({trace:n,x:_-p.left+g.left,y:S-p.top+g.top,text:w,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:A,idealAlign:k<_?"right":"left",hovertemplate:(n.line||{}).hovertemplate,hovertemplateLabels:h,eventData:[{data:n._input,fullData:n,count:a,probability:C}]},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:u})}}function P(e){if(!e.parcatsViewModel.dragDimension&&(u(s.select(this)),r.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),e.parcatsViewModel.pathSelection.sort(p),-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var t=l(e),n=j(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:s.event,constraints:n})}}function l(e){for(var s,n=[],o=_(e.parcatsViewModel),t=0;t<e.model.valueInds.length;t++)s=e.model.valueInds[t],n.push({curveNumber:o,pointNumber:s});return n}function j(e){for(var s,i,n={},o=e.parcatsViewModel.model.dimensions,t=0;t<o.length;t++)s=o[t],i=s.categories[e.model.categoryInds[t]],n[s.containerInd]=i.categoryValue;return void 0!==e.model.rawColor&&(n.color=e.model.rawColor),n}function S(e){if(-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){var t=l(e),n=j(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:s.event,constraints:n})}}function u(e){e.attr("fill",function(e){return e.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(e){e.attr("fill-opacity",.8).attr("stroke",function(e){return m.mostReadable(e.model.color,["black","white"])}).attr("stroke-width",.3)}function O(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function g(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function d(e){var t=e.parcatsViewModel.pathSelection,n=e.categoryViewModel.model.dimensionInd,s=e.categoryViewModel.model.categoryInd;return t.filter(function(t){return t.model.categoryInds[n]===s&&t.model.color===e.color})}function h(e,t,n){var o,i=s.select(e).datum(),a=i.categoryViewModel.model,c=i.parcatsViewModel.graphDiv,u=s.select(e.parentNode).selectAll("rect.bandrect"),r=[];u.each(function(e){d(e).each(function(e){Array.prototype.push.apply(r,l(e))})}),o={},o[a.dimensionInd]=a.categoryValue,c.emit(t,{points:r,event:n,constraints:o})}function f(e,t,n){var i,o=s.select(e).datum(),a=o.categoryViewModel.model,c=o.parcatsViewModel.graphDiv,u=d(o),r=[];u.each(function(e){Array.prototype.push.apply(r,l(e))}),i={},i[a.dimensionInd]=a.categoryValue,void 0!==o.rawColor&&(i.color=o.rawColor),c.emit(t,{points:r,event:n,constraints:i})}function A(e,t,n){e._fullLayout._calcInverseTransform(e);var u,h,m,j=e._fullLayout._invScaleX,b=e._fullLayout._invScaleY,p=s.select(n.parentNode).select("rect.catrect"),i=p.node().getBoundingClientRect(),o=p.datum(),a=o.parcatsViewModel,y=a.model.dimensions[o.model.dimensionInd],c=a.trace,v=i.top+i.height/2;a.dimensions.length>1&&y.displayInd===a.dimensions.length-1?(h=i.left,u="left"):(h=i.left+i.width,u="right");var d=o.model.count,g=o.model.categoryLabel,f=d/o.parcatsViewModel.model.count,r={countLabel:d,categoryLabel:g,probabilityLabel:f.toFixed(3)},l=[];return-1!==o.parcatsViewModel.hoverinfoItems.indexOf("count")&&l.push(["Count:",r.countLabel].join(" ")),-1!==o.parcatsViewModel.hoverinfoItems.indexOf("probability")&&l.push(["P("+r.categoryLabel+"):",r.probabilityLabel].join(" ")),m=l.join("<br>"),{trace:c,x:j*(h-t.left),y:b*(v-t.top),text:m,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:u,hovertemplate:c.hovertemplate,hovertemplateLabels:r,eventData:[{data:c._input,fullData:c,count:d,category:g,probability:f}]}}function D(e){if(!e.parcatsViewModel.dragDimension&&-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(s.mouse(this)[1]<-1)return;var n,o=e.parcatsViewModel.graphDiv,c=o._fullLayout,l=c._paperdiv.node().getBoundingClientRect(),a=e.parcatsViewModel.hoveron,t=this;"color"===a?(function(e){var t=s.select(e).datum(),n=d(t);y(n),n.each(function(){i.raiseToTop(this)}),s.select(e.parentNode).selectAll("rect.bandrect").filter(function(e){return e.color===t.color}).each(function(){i.raiseToTop(this),s.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(t),f(t,"plotly_hover",s.event)):(function(e){s.select(e.parentNode).selectAll("rect.bandrect").each(function(e){var t=d(e);y(t),t.each(function(){i.raiseToTop(this)})}),s.select(e.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(t),h(t,"plotly_hover",s.event)),-1===e.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===a?n=A(o,l,t):"color"===a?n=function(e,t,n){e._fullLayout._calcInverseTransform(e);var h,f,g,v,j,_,E=e._fullLayout._invScaleX,C=e._fullLayout._invScaleY,l=n.getBoundingClientRect(),o=s.select(n).datum(),a=o.categoryViewModel,r=a.parcatsViewModel,k=r.model.dimensions[a.model.dimensionInd],u=r.trace,w=l.y+l.height/2;r.dimensions.length>1&&k.displayInd===r.dimensions.length-1?(v=l.left,f="left"):(v=l.left+l.width,f="right");var d=a.model.categoryLabel,b=o.parcatsViewModel.model.count,i=0;o.categoryViewModel.bands.forEach(function(e){e.color===o.color&&(i+=e.count)}),g=a.model.count,h=0,r.pathSelection.each(function(e){e.model.color===o.color&&(h+=e.model.count)});var y=i/b,O=i/h,x=i/g,p={countLabel:i,categoryLabel:d,probabilityLabel:y.toFixed(3)},c=[];return-1!==a.parcatsViewModel.hoverinfoItems.indexOf("count")&&c.push(["Count:",p.countLabel].join(" ")),-1!==a.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(c.push("P(color ∩ "+d+"): "+p.probabilityLabel),c.push("P("+d+" | color): "+O.toFixed(3)),c.push("P(color | "+d+"): "+x.toFixed(3))),j=c.join("<br>"),_=m.mostReadable(o.color,["black","white"]),{trace:u,x:E*(v-t.left),y:C*(w-t.top),text:j,color:o.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:_,fontSize:10,idealAlign:f,hovertemplate:u.hovertemplate,hovertemplateLabels:p,eventData:[{data:u._input,fullData:u,category:d,count:b,probability:y,categorycount:g,colorcount:h,bandcolorcount:i}]}}(o,l,t):"dimension"===a&&(n=function(e,t,n){var o=[];return s.select(n.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){o.push(A(e,t,this))}),o}(o,l,t)),n&&r.loneHover(n,{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:o}))}}function M(e){var t=e.parcatsViewModel;t.dragDimension||(u(t.pathSelection),O(t.dimensionSelection.selectAll("g.category")),g(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),r.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node()),t.pathSelection.sort(p),-1!==t.hoverinfoItems.indexOf("skip"))||("color"===e.parcatsViewModel.hoveron?f(this,"plotly_unhover",s.event):h(this,"plotly_unhover",s.event))}function F(e){"fixed"!==e.parcatsViewModel.arrangement&&(e.dragDimensionDisplayInd=e.model.displayInd,e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map(function(e){return e.displayInd}),e.dragHasMoved=!1,e.dragCategoryDisplayInd=null,s.select(this).selectAll("g.category").select("rect.catrect").each(function(t){var o=s.mouse(this)[0],n=s.mouse(this)[1];-2<=o&&o<=t.width+2&&-2<=n&&n<=t.height+2&&(e.dragCategoryDisplayInd=t.model.displayInd,e.initialDragCategoryDisplayInds=e.model.categories.map(function(e){return e.displayInd}),t.model.dragY=t.y,i.raiseToTop(this.parentNode),s.select(this.parentNode).selectAll("rect.bandrect").each(function(t){t.y<n&&n<=t.y+t.height&&(e.potentialClickBand=this)}))}),e.parcatsViewModel.dragDimension=e,r.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function T(e){if("fixed"!==e.parcatsViewModel.arrangement&&(e.dragHasMoved=!0,null!==e.dragDimensionDisplayInd)){var c=e.dragDimensionDisplayInd,h=c-1,m=c+1,t=e.parcatsViewModel.dimensions[c];if(null!==e.dragCategoryDisplayInd){n=t.categories[e.dragCategoryDisplayInd],n.model.dragY+=s.event.dy;var n,o,a,u=n.model.dragY,l=n.model.displayInd,d=t.categories,i=d[l-1],r=d[l+1];void 0!==i&&u<i.y+i.height/2&&(n.model.displayInd=i.model.displayInd,i.model.displayInd=l),void 0!==r&&u+n.height>r.y+r.height/2&&(n.model.displayInd=r.model.displayInd,r.model.displayInd=l),e.dragCategoryDisplayInd=n.model.displayInd}(null===e.dragCategoryDisplayInd||"freeform"===e.parcatsViewModel.arrangement)&&(t.model.dragX=s.event.x,o=e.parcatsViewModel.dimensions[h],a=e.parcatsViewModel.dimensions[m],void 0!==o&&t.model.dragX<o.x+o.width&&(t.model.displayInd=o.model.displayInd,o.model.displayInd=c),void 0!==a&&t.model.dragX+t.width>a.x&&(t.model.displayInd=a.model.displayInd,a.model.displayInd=e.dragDimensionDisplayInd),e.dragDimensionDisplayInd=t.model.displayInd),b(e.parcatsViewModel),v(e.parcatsViewModel),x(e.parcatsViewModel),C(e.parcatsViewModel)}}function z(e){if("fixed"!==e.parcatsViewModel.arrangement&&null!==e.dragDimensionDisplayInd){s.select(this).selectAll("text").attr("font-weight","normal");var n,a,t={},c=_(e.parcatsViewModel),o=e.parcatsViewModel.model.dimensions.map(function(e){return e.displayInd}),i=e.initialDragDimensionDisplayInds.some(function(e,t){return e!==o[t]});if(i&&o.forEach(function(n,s){var o=e.parcatsViewModel.model.dimensions[s].containerInd;t["dimensions["+o+"].displayindex"]=n}),n=!1,null!==e.dragCategoryDisplayInd&&(a=e.model.categories.map(function(e){return e.displayInd}),n=e.initialDragCategoryDisplayInds.some(function(e,t){return e!==a[t]}))){var r=e.model.categories.slice().sort(function(e,t){return e.displayInd-t.displayInd}),l=r.map(function(e){return e.categoryValue}),d=r.map(function(e){return e.categoryLabel});t["dimensions["+e.model.containerInd+"].categoryarray"]=[l],t["dimensions["+e.model.containerInd+"].ticktext"]=[d],t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!e.dragHasMoved&&e.potentialClickBand&&("color"===e.parcatsViewModel.hoveron?f(e.potentialClickBand,"plotly_click",s.event.sourceEvent):h(e.potentialClickBand,"plotly_click",s.event.sourceEvent)),e.model.dragX=null,null!==e.dragCategoryDisplayInd&&(e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd].model.dragY=null,e.dragCategoryDisplayInd=null),e.dragDimensionDisplayInd=null,e.parcatsViewModel.dragDimension=null,e.dragHasMoved=null,e.potentialClickBand=null,b(e.parcatsViewModel),v(e.parcatsViewModel),s.transition().duration(300).ease("cubic-in-out").each(function(){x(e.parcatsViewModel,!0),C(e.parcatsViewModel,!0)}).each("end",function(){(i||n)&&H.restyle(e.parcatsViewModel.graphDiv,t,[c])})}}function _(e){for(var n,s=e.graphDiv._fullData,t=0;t<s.length;t++)if(e.key===s[t].uid){n=t;break}return n}function C(e,t){var n;void 0===t&&(t=!1),e.pathSelection.data(function(e){return e.paths},o),(n=e.pathSelection,t?n.transition():n).attr("d",function(e){return e.svgD})}function x(e,t){function l(e){return t?e.transition():e}void 0===t&&(t=!1),e.dimensionSelection.data(function(e){return e.dimensions},o),n=e.dimensionSelection.selectAll("g.category").data(function(e){return e.categories},o),l(e.dimensionSelection).attr("transform",function(e){return c(e.x,0)}),l(n).attr("transform",function(e){return c(0,e.y)}),n.select(".dimlabel").text(function(e,t){return 0===t?e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel:null}),n.select(".catlabel").attr("text-anchor",function(e){return a(e)?"start":"end"}).attr("x",function(e){return a(e)?e.width+5:-5}).each(function(e){var t,n;a(e)?(t=e.width+5,n="start"):(t=-5,n="end"),s.select(this).selectAll("tspan").attr("x",t).attr("text-anchor",n)});var n,r=n.selectAll("rect.bandrect").data(function(e){return e.bands},o),d=r.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(e){return e.color}).attr("fill-opacity",0);r.attr("fill",function(e){return e.color}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("y",function(e){return e.y}),g(d),r.each(function(){i.raiseToTop(this)}),r.exit().remove()}function R(e,t,n){var a=n[0],r=t.margin||{l:80,r:80,t:100,b:80},s=a.trace,o=s.domain,c=t.width,l=t.height,d=Math.floor(c*(o.x[1]-o.x[0])),u=Math.floor(l*(o.y[1]-o.y[0])),h=o.x[0]*c+r.l,m=t.height-o.y[1]*t.height+r.t,f=s.line.shape,p="all"===s.hoverinfo?["count","probability"]:(s.hoverinfo||"").split("+"),i={trace:s,key:s.uid,model:a,x:h,y:m,width:d,height:u,hoveron:s.hoveron,hoverinfoItems:p,arrangement:s.arrangement,bundlecolors:s.bundlecolors,sortpaths:s.sortpaths,labelfont:s.labelfont,categorylabelfont:s.tickfont,pathShape:f,dragDimension:null,margin:r,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};return a.dimensions&&(b(i),v(i)),i}function w(e,t,n,s,o){var i,a,r,c=[],l=[];for(i=0;i<n.length-1;i++)r=I(n[i]+e[i],e[i+1]),c.push(r(o)),l.push(r(1-o));a="M "+e[0]+","+t[0];for(a+="l"+n[0]+",0 ",i=1;i<n.length;i++)a+="C"+c[i-1]+","+t[i-1]+" "+l[i-1]+","+t[i]+" "+e[i]+","+t[i],a+="l"+n[i]+",0 ";for(a+="l0,"+s+" ",a+="l -"+n[n.length-1]+",0 ",i=n.length-2;i>=0;i--)a+="C"+l[i]+","+(t[i+1]+s)+" "+c[i]+","+(t[i]+s)+" "+(e[i]+n[i])+","+(t[i]+s),a+="l-"+n[i]+",0 ";return a+"Z"}function v(e){var t,n,o,i,f,p,j,y,a=e.dimensions,u=e.model,h=a.map(function(e){return e.categories.map(function(e){return e.y})}),x=e.model.dimensions.map(function(e){return e.categories.map(function(e){return e.displayInd})}),S=e.model.dimensions.map(function(e){return e.displayInd}),k=e.dimensions.map(function(e){return e.model.dimensionInd}),v=a.map(function(e){return e.x}),g=a.map(function(e){return e.width}),c=[];for(y in u.paths)u.paths.hasOwnProperty(y)&&c.push(u.paths[y]);function b(e){var t=e.categoryInds.map(function(e,t){return x[t][e]});return k.map(function(e){return t[e]})}c.sort(function(t,n){var s=b(t),o=b(n);return"backward"===e.sortpaths&&(s.reverse(),o.reverse()),s.push(t.valueInds[0]),o.push(n.valueInds[0]),e.bundlecolors&&(s.unshift(t.rawColor),o.unshift(n.rawColor)),s<o?-1:s>o?1:0});for(var C=new Array(c.length),O=a[0].model.count,A=a[0].categories.map(function(e){return e.height}).reduce(function(e,t){return e+t}),d=0;d<c.length;d++){t=c[d],n=O>0?A*(t.count/O):0;for(i=new Array(h.length),o=0;o<t.categoryInds.length;o++){var E=t.categoryInds[o],m=x[o][E],l=S[o];i[l]=h[l][m],h[l][m]+=n;var s=e.dimensions[l].categories[m],_=s.bands.length,r=s.bands[_-1];void 0===r||t.rawColor!==r.rawColor?(f=void 0===r?0:r.y+r.height,s.bands.push({key:f,color:t.color,rawColor:t.rawColor,height:n,width:s.width,count:t.count,y:f,categoryViewModel:s,parcatsViewModel:e})):(p=s.bands[_-1],p.height+=n,p.count+=t.count)}j="hspline"===e.pathShape?w(v,i,g,n,.5):w(v,i,g,n,0),C[d]={key:t.valueInds[0],model:t,height:n,leftXs:v,topYs:i,dimWidths:g,svgD:j,parcatsViewModel:e}}e.paths=C}function b(e){t=e.model.dimensions.map(function(e){return{displayInd:e.displayInd,dimensionInd:e.dimensionInd}}),t.sort(function(e,t){return e.displayInd-t.displayInd}),n=[];for(s in t){var t,n,s,o=t[s].dimensionInd,i=e.model.dimensions[o];n.push(B(e,i))}e.dimensions=n}function B(e,t){var n,s,i,r,c,g,p=t.displayInd,l=e.model.dimensions.length,g=40+(l>1?(e.width-80-16)/(l-1):0)*p,d=[],u=e.model.maxCats,h=t.categories.length,m=t.count,f=e.height-8*(u-1),o=8*(u-h)/2,a=t.categories.map(function(e){return{displayInd:e.displayInd,categoryInd:e.categoryInd}});for(a.sort(function(e,t){return e.displayInd-t.displayInd}),s=0;s<h;s++)c=a[s].categoryInd,n=t.categories[c],i=m>0?n.count/m*f:0,r={key:n.valueInds[0],model:n,width:16,height:i,y:null!==n.dragY?n.dragY:o,bands:[],parcatsViewModel:e},o=o+i+8,d.push(r);return{key:t.dimensionInd,x:null!==t.dragX?t.dragX:g,y:0,width:16,model:t,categories:d,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}e.exports=function(e,t,n,s){N(n,e,s,t)}},60268:function(e,t,n){"use strict";var s=n(51036);e.exports=function(e,t,n,o){var a=e._fullLayout,r=a._paper,i=a._size;s(e,r,t,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},n,o)}},82296:function(e,t,n){"use strict";var a=n(49084),o=n(94724),i=n(25376),r=n(86968).u,s=n(92880).extendFlat,c=n(31780).templatedArray;e.exports={domain:r({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:i({editType:"plot"}),tickfont:i({editType:"plot"}),rangefont:i({editType:"plot"}),dimensions:c("dimension",{label:{valType:"string",editType:"plot"},tickvals:s({},o.tickvals,{editType:"plot"}),ticktext:s({},o.ticktext,{editType:"plot"}),tickformat:s({},o.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:s({editType:"calc"},a("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(e,t,n){"use strict";var d,s=n(30140),o=n(33428),E=n(71688).keyFun,r=n(71688).repeat,i=n(3400).sorterAsc,C=n(3400).strTranslate,j=s.bar.snapRatio;function h(e,t){return e*(1-j)+t*j}d=s.bar.snapClose;function O(e,t){return e*(1-d)+t*d}function c(e,t,n,s){if(function(e,t){for(var n=0;n<t.length;n++)if(e>=t[n][0]&&e<=t[n][1])return!0;return!1}(n,s))return n;var a,d,u,o=e?-1:1,r=0,c=t.length-1;o<0&&(u=r,r=c,c=u);for(var i=t[r],m=i,l=r;o*l<o*c;l+=o){if(d=l+o,a=t[d],o*n<o*O(i,a))return h(i,m);if(o*n<o*a||d===c)return h(a,i);m=i,i=a}}function w(e){e.attr("x",-s.bar.captureWidth/2).attr("width",s.bar.captureWidth)}function k(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function _(e){if(!e.brush.filterSpecified)return"0,"+e.height;for(var o,i,a,t=v(e.brush.filter.getConsolidated(),e.height),s=[0],r=t.length?t[0][0]:null,n=0;n<t.length;n++)i=(o=t[n])[1]-o[0],s.push(r),s.push(i),(a=n+1)<t.length&&(r=t[a][0]-o[1]);return s.push(e.height),s}function v(e,t){return e.map(function(e){return e.map(function(e){return Math.max(0,e*t)}).sort(i)})}function b(){o.select(document.body).style("cursor",null)}function u(e){e.attr("stroke-dasharray",_)}function a(e,t){var n=o.select(e).selectAll(".highlight, .highlight-shadow");u(t?n.transition().duration(s.bar.snapDuration).each("end",t):n)}function g(e,t){var n,g=e.brush,i=NaN,a={};if(g.filterSpecified){var o,r,u,h,m,f,j=e.height,b=g.filter.getConsolidated(),l=v(b,j),p=NaN,c=NaN,d=NaN;for(n=0;n<=l.length;n++){if(r=l[n],r&&r[0]<=t&&t<=r[1]){p=n;break}if(c=n?n-1:NaN,r&&r[0]>t){d=n;break}}i=p,isNaN(i)&&(i=isNaN(c)||isNaN(d)?isNaN(c)?d:c:t-l[c][1]<l[d][0]-t?c:d),!isNaN(i)&&(m=l[i],f=function(e,t){var n=s.bar.handleHeight;if(!(t>e[1]+n||t<e[0]-n))return t>=.9*e[1]+.1*e[0]?"n":t<=.9*e[0]+.1*e[1]?"s":"ns"}(m,t),f&&(a.interval=b[i],a.intervalPix=m,a.region=f))}if(e.ordinal&&!a.region){o=e.unitTickvals,h=e.unitToPaddedPx.invert(t);for(n=0;n<o.length;n++)if(u=[.25*o[Math.max(n-1,0)]+.75*o[n],.25*o[Math.min(n+1,o.length-1)]+.75*o[n]],h>=u[0]&&h<=u[1]){a.clickableOrdinalRange=u;break}}return a}function f(e,t){o.event.sourceEvent.stopPropagation();var r=t.height-o.mouse(e)[1]-2*s.verticalPadding,n=t.brush.svgBrush;n.wasDragged=!0,n._dragging=!0,n.grabbingBar?n.newExtent=[r-n.grabPoint,r+n.barLength-n.grabPoint].map(t.unitToPaddedPx.invert):n.newExtent=[n.startExtent,t.unitToPaddedPx.invert(r)].sort(i),t.brush.filterSpecified=!0,n.extent=n.stayingIntervals.concat([n.newExtent]),n.brushCallback(t),a(e.parentNode)}function m(e,t){var n=g(t,t.height-o.mouse(e)[1]-2*s.verticalPadding),i="crosshair";n.clickableOrdinalRange?i="pointer":n.region&&(i=n.region+"-resize"),o.select(document.body).style("cursor",i)}function x(e){e.on("mousemove",function(e){o.event.preventDefault(),e.parent.inBrushDrag||m(this,e)}).on("mouseleave",function(e){e.parent.inBrushDrag||b()}).call(o.behavior.drag().on("dragstart",function(e){!function(e,t){o.event.sourceEvent.stopPropagation();var r,l=t.height-o.mouse(e)[1]-2*s.verticalPadding,d=t.unitToPaddedPx.invert(l),c=t.brush,i=g(t,l),a=i.interval,n=c.svgBrush;(n.wasDragged=!1,n.grabbingBar="ns"===i.region,n.grabbingBar)&&(r=a.map(t.unitToPaddedPx),n.grabPoint=l-r[0]-s.verticalPadding,n.barLength=r[1]-r[0]),n.clickableOrdinalRange=i.clickableOrdinalRange,n.stayingIntervals=t.multiselect&&c.filterSpecified?c.filter.getConsolidated():[],a&&(n.stayingIntervals=n.stayingIntervals.filter(function(e){return e[0]!==a[0]&&e[1]!==a[1]})),n.startExtent=i.region?a["s"===i.region?1:0]:d,t.parent.inBrushDrag=!0,n.brushStartCallback()}(this,e)}).on("drag",function(e){f(this,e)}).on("dragend",function(e){!function(e,t){var i,d,u,h,s=t.brush,r=s.filter,n=s.svgBrush;if(n._dragging||(m(e,t),f(e,t),t.brush.svgBrush.wasDragged=!1),n._dragging=!1,o.event.sourceEvent.stopPropagation(),h=n.grabbingBar,n.grabbingBar=!1,n.grabLocation=void 0,t.parent.inBrushDrag=!1,b(),!n.wasDragged)return n.wasDragged=void 0,n.clickableOrdinalRange?s.filterSpecified&&t.multiselect?n.extent.push(n.clickableOrdinalRange):(n.extent=[n.clickableOrdinalRange],s.filterSpecified=!0):h?(n.extent=n.stayingIntervals,0===n.extent.length&&l(s)):l(s),n.brushCallback(t),a(e.parentNode),void n.brushEndCallback(s.filterSpecified?r.getConsolidated():[]);d=function(){r.set(r.getConsolidated())},t.ordinal?(i=t.unitTickvals,i[i.length-1]<i[0]&&i.reverse(),n.newExtent=[c(0,i,n.newExtent[0],n.stayingIntervals),c(1,i,n.newExtent[1],n.stayingIntervals)],u=n.newExtent[1]>n.newExtent[0],n.extent=n.stayingIntervals.concat(u?[n.newExtent]:[]),n.extent.length||l(s),n.brushCallback(t),u?a(e.parentNode,d):(d(),a(e.parentNode))):d(),n.brushEndCallback(s.filterSpecified?r.getConsolidated():[])}(this,e)}))}function p(e,t){return e[0]-t[0]}function l(e){e.filterSpecified=!1,e.svgBrush.extent=[[-1/0,1/0]]}function y(e){for(var n,o=e.slice(),t=[],s=o.shift();s;){for(n=s.slice();(s=o.shift())&&s[0]<=n[1];)n[1]=Math.max(n[1],s[1]);t.push(n)}return 1===t.length&&t[0][0]>t[0][1]&&(t=[]),t}e.exports={makeBrush:function(e,t,n,s,o,a){var r,c=function(){var t,n,e=[];return{set:function(s){1===(e=s.map(function(e){return e.slice().sort(i)}).sort(p)).length&&e[0][0]===-1/0&&e[0][1]===1/0&&(e=[[0,-1]]),t=y(e),n=e.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0])},get:function(){return e.slice()},getConsolidated:function(){return t},getBounds:function(){return n}}}();return c.set(n),{filter:c,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:s,brushCallback:(r=o,function(e){var t=e.brush,n=function(e){return e.svgBrush.extent.map(function(e){return e.slice()})}(t),s=n.slice();t.filter.set(s),r()}),brushEndCallback:a}}},ensureAxisBrush:function(e,t,n){var o=e.selectAll("."+s.cn.axisBrush).data(r,E);o.enter().append("g").classed(s.cn.axisBrush,!0),function(e,t,n){var o,i,c=n._context.staticPlot,a=e.selectAll(".background").data(r);a.enter().append("rect").classed("background",!0).call(w).call(k).style("pointer-events",c?"none":"auto").attr("transform",C(0,s.verticalPadding)),a.call(x).attr("height",function(e){return e.height-s.verticalPadding}),o=e.selectAll(".highlight-shadow").data(r),o.enter().append("line").classed("highlight-shadow",!0).attr("x",-s.bar.width/2).attr("stroke-width",s.bar.width+s.bar.strokeWidth).attr("stroke",t).attr("opacity",s.bar.strokeOpacity).attr("stroke-linecap","butt"),o.attr("y1",function(e){return e.height}).call(u),i=e.selectAll(".highlight").data(r),i.enter().append("line").classed("highlight",!0).attr("x",-s.bar.width/2).attr("stroke-width",s.bar.width-s.bar.strokeWidth).attr("stroke",s.bar.fillColor).attr("opacity",s.bar.fillOpacity).attr("stroke-linecap","butt"),i.attr("y1",function(e){return e.height}).call(u)}(o,t,n)},cleanRanges:function(e,t){if(Array.isArray(e[0])?(e=e.map(function(e){return e.sort(i)}),e=t.multiselect?y(e.sort(p)):[e[0]]):e=[e.sort(i)],t.tickvals){var n=t.tickvals.slice().sort(i);if(!(e=e.map(function(e){var t=[c(0,n,e[0],[]),c(1,n,e[1],[])];if(t[1]>t[0])return t}).filter(function(e){return e})).length)return}return e.length>1?e:e[0]}}},61664:function(e,t,n){"use strict";e.exports={attributes:n(82296),supplyDefaults:n(60664),calc:n(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:n(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(e,t,n){"use strict";var s=n(33428),o=n(84888)._M,i=n(24196),a=n(9616);t.name="parcoords",t.plot=function(e){var t=o(e.calcdata,"parcoords")[0];t.length&&i(e,t)},t.clean=function(e,t,n,s){var o=s._has&&s._has("parcoords"),i=t._has&&t._has("parcoords");o&&!i&&(s._paperdiv.selectAll(".parcoords").remove(),s._glimages.selectAll("*").remove())},t.toSVG=function(e){var n=e._fullLayout._glimages,t=s.select(e).selectAll(".svg-container");t.filter(function(e,n){return n===t.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this,t=e.toDataURL("image/png");n.append("svg:image").attr({xmlns:a.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}),window.setTimeout(function(){s.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(e,t,n){"use strict";var o=n(3400).isArrayOrTypedArray,s=n(8932),i=n(71688).wrap;e.exports=function(e,t){var n,a;return s.hasColorscale(t,"line")&&o(t.line.color)?(n=t.line.color,a=s.extractOpts(t.line).colorscale,s.calc(e,t,{vals:n,containerStr:"line",cLetter:"c"})):(n=function(e){for(var n=new Array(e),t=0;t<e;t++)n[t]=.5;return n}(t._length),a=[[0,t.line.color],[1,t.line.color]]),i({lineColor:n,cscale:a})}},30140:function(e){"use strict";e.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(e,t,n){"use strict";var s=n(3400),a=n(94288).hasColorscale,u=n(27260),r=n(86968).Q,c=n(51272),l=n(54460),i=n(82296),d=n(71864),o=n(30140).maxDimensionCount,h=n(26284);function m(e,t,n,o){function a(n,o){return s.coerce(e,t,i.dimensions,n,o)}var r,h,c=a("values"),u=a("visible");c&&c.length||(u=t.visible=!1),u&&(a("label"),a("tickvals"),a("ticktext"),a("tickformat"),h=a("range"),t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:h},l.setConvert(t._ax,o.layout),a("multiselect"),r=a("constraintrange"),r&&(t.constraintrange=d.cleanRanges(r,t)))}e.exports=function(e,t,n,l){function d(n,o){return s.coerce(e,t,i,n,o)}f=e.dimensions,Array.isArray(f)&&f.length>o&&(s.log("parcoords traces support up to "+o+" dimensions at the moment"),f.splice(o));var f,p,g=c(e,t,{name:"dimensions",layout:l,handleItemDefaults:m}),v=function(e,t,n,o,i){var r=i("line.color",n);if(a(e,"line")&&s.isArrayOrTypedArray(r)){if(r.length)return i("line.colorscale"),u(e,t,o,i,{prefix:"line.",cLetter:"c"}),r.length;t.line.color=n}return 1/0}(e,t,n,l,d);r(t,l,d),Array.isArray(g)&&g.length||(t.visible=!1),h(t,g,"values",v),p={weight:l.font.weight,style:l.font.style,variant:l.font.variant,family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color},s.coerceFont(d,"labelfont",p),s.coerceFont(d,"tickfont",p),s.coerceFont(d,"rangefont",p),d("labelangle"),d("labelside"),d("unselected.line.color"),d("unselected.line.opacity")}},95724:function(e,t,n){"use strict";var s=n(3400).isTypedArray;t.convertTypedArray=function(e){return s(e)?Array.prototype.slice.call(e):e},t.isOrdinal=function(e){return!!e.tickvals},t.isVisible=function(e){return e.visible||!("visible"in e)}},29928:function(e,t,n){"use strict";var s=n(61664);s.plot=n(24196),e.exports=s},51352:function(e,t,n){"use strict";var j=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),v=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),s=n(30140).maxDimensionCount,r=n(3400),g=1e-6,f=new Uint8Array(4),l=new Uint8Array(4),d={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(e,t,n,s,o){var i=e._gl;i.enable(i.SCISSOR_TEST),i.scissor(t,n,s,o),e.clear({color:[0,0,0,0],depth:1})}function h(e,t,n,s,o,a){var r=a.key;n.drawCompleted||(function(e){e.read({x:0,y:0,width:1,height:1,data:f})}(e),n.drawCompleted=!0),function c(l){var d=Math.min(s,o-l*s);0===l&&(window.cancelAnimationFrame(n.currentRafs[r]),delete n.currentRafs[r],i(e,a.scissorX,a.scissorY,a.scissorWidth,a.viewBoxSize[1])),n.clearOnly||(a.count=2*d,a.offset=2*l*s,t(a),l*s+d<o&&(n.currentRafs[r]=window.requestAnimationFrame(function(){c(l+1)})),n.drawCompleted=!1)}(0)}function m(e,t){for(var s=new Array(256),n=0;n<256;n++)s[n]=e(n/255).concat(t);return s}function o(e,t){return(e>>>8*t)%256/255}function p(e,t,n){for(var s,o,i,r,c=new Array(8*t),l=0,a=0;a<t;a++)for(s=0;s<2;s++)for(o=0;o<4;o++)r=4*e+o,i=n[64*a+r],63===r&&0===s&&(i*=-1),c[l++]=i;return c}function c(e){var t="0"+e;return t.substr(t.length-2)}function a(e){return e<s?"p"+c(e+1)+"_"+c(e+4):"colors"}function b(e,t,n,s,o,i,a,c,l,d,u,h,m,f){for(p=[[],[]],g=0;g<64;g++)p[0][g]=g===o?1:0,p[1][g]=g===i?1:0;a*=f,c*=f,l*=f,d*=f;var p,g,v=e.lines.canvasOverdrag*f,b=e.domain,y=e.canvasWidth*f,_=e.canvasHeight*f,w=e.pad.l*f,O=e.pad.b*f,x=e.layoutHeight*f,C=e.layoutWidth*f,j=e.deselectedLines.color,E=e.deselectedLines.opacity;return r.extendFlat({key:u,resolution:[y,_],viewBoxPos:[a+v,c],viewBoxSize:[l,d],i0:o,i1:i,dim0A:p[0].slice(0,16),dim0B:p[0].slice(16,32),dim0C:p[0].slice(32,48),dim0D:p[0].slice(48,64),dim1A:p[1].slice(0,16),dim1B:p[1].slice(16,32),dim1C:p[1].slice(32,48),dim1D:p[1].slice(48,64),drwLayer:h,contextColor:[j[0]/255,j[1]/255,j[2]/255,"auto"!==E?j[3]*E:Math.max(1/255,Math.pow(1/e.lines.color.length,1/3))],scissorX:(s===t?0:a+v)+(w-v)+C*b.x[0],scissorWidth:(s===n?y-a+v:l+.5)+(s===t?a+v:0),scissorY:c+O+x*b.y[0],scissorHeight:d,viewportX:w-v+C*b.x[0],viewportY:O+x*b.y[0],viewportWidth:y,viewportHeight:_},m)}function u(e){var t=2047,n=Math.max(0,Math.floor(e[0]*t),0),s=Math.min(t,Math.ceil(e[1]*t),t);return[Math.min(n,s),Math.max(n,s)]}e.exports=function(e,t){var c,f,y,_,S,F,w=t.context,C=t.pick,n=t.regl,k=n._gl,M=k.getParameter(k.ALIASED_LINE_WIDTH_RANGE),z=Math.max(M[0],Math.min(M[1],t.viewModel.plotGlPixelRatio)),A={currentRafs:{},drawCompleted:!0,clearOnly:!1},O=function(e){for(var n={},t=0;t<=s;t+=4)n[a(t)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return n}(n),E=n.texture(d),x=[];T(t),S=n({profile:!1,blend:{enable:w,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!w,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:n.prop("scissorX"),y:n.prop("scissorY"),width:n.prop("scissorWidth"),height:n.prop("scissorHeight")}},viewport:{x:n.prop("viewportX"),y:n.prop("viewportY"),width:n.prop("viewportWidth"),height:n.prop("viewportHeight")},dither:!1,vert:j,frag:v,primitive:"lines",lineWidth:z,attributes:O,uniforms:{resolution:n.prop("resolution"),viewBoxPos:n.prop("viewBoxPos"),viewBoxSize:n.prop("viewBoxSize"),dim0A:n.prop("dim0A"),dim1A:n.prop("dim1A"),dim0B:n.prop("dim0B"),dim1B:n.prop("dim1B"),dim0C:n.prop("dim0C"),dim1C:n.prop("dim1C"),dim0D:n.prop("dim0D"),dim1D:n.prop("dim1D"),loA:n.prop("loA"),hiA:n.prop("hiA"),loB:n.prop("loB"),hiB:n.prop("hiB"),loC:n.prop("loC"),hiC:n.prop("hiC"),loD:n.prop("loD"),hiD:n.prop("hiD"),palette:E,contextColor:n.prop("contextColor"),maskTexture:n.prop("maskTexture"),drwLayer:n.prop("drwLayer"),maskHeight:n.prop("maskHeight")},offset:n.prop("offset"),count:n.prop("count")});function T(e){f=e.model,F=e.viewModel,c=F.dimensions.slice(),_=c[0]?c[0].values.length:0;var t=f.lines,i=C?t.color.map(function(e,n){return n/t.color.length}):t.color,l=function(e,t,n){for(var c,l,a=new Array(e*(s+4)),r=0,i=0;i<e;i++){for(c=0;c<s;c++)a[r++]=c<t.length?t[c].paddedUnitValues[i]:.5;a[r++]=o(i,2),a[r++]=o(i,1),a[r++]=o(i,0),a[r++]=(l=n[i],Math.max(g,Math.min(.999999,l)))}return a}(_,c,i);!function(e,t,n){for(var o=0;o<=s;o+=4)e[a(o)](p(o/4,t,n))}(O,_,l),w||C||(E=n.texture(r.extendFlat({data:m(f.unitToColor,255)},d)))}return{render:function(e,t,s){var o,g,v,d=e.length,O=1/0,j=-1/0;for(o=0;o<d;o++)e[o].dim0.canvasX<O&&(O=e[o].dim0.canvasX,v=o),e[o].dim1.canvasX>j&&(j=e[o].dim1.canvasX,g=o);0===d&&i(n,0,0,f.canvasWidth,f.canvasHeight),p=function(e){s=[[],[]];for(t=0;t<64;t++)m=!e&&t<c.length?c[t].brush.filter.getBounds():[-1/0,1/0],s[0][t]=m[0],s[1][t]=m[1];r=new Array(16384);for(o=0;o<16384;o++)r[o]=255;if(!e)for(o=0;o<c.length;o++){var t,s,o,i,r,l,d,h,m,f=o%8,g=(o-f)/8,p=Math.pow(2,f),a=c[o].brush.filter.get();if(!(a.length<2)){l=u(a[0])[1];for(i=1;i<a.length;i++){h=u(a[i]);for(t=l+1;t<h[0];t++)r[8*t+g]&=~p;l=Math.max(l,h[1])}}}return d={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:r},y?y(d):y=n.texture(d),{maskTexture:y,maskHeight:2048,loA:s[0].slice(0,16),loB:s[0].slice(16,32),loC:s[0].slice(32,48),loD:s[0].slice(48,64),hiA:s[1].slice(0,16),hiB:s[1].slice(16,32),hiC:s[1].slice(32,48),hiD:s[1].slice(48,64)}}(w);for(o=0;o<d;o++){var m,p,E,a=e[o],r=a.dim0.crossfilterDimensionIndex,T=a.dim1.crossfilterDimensionIndex,l=a.canvasX,F=a.canvasY,k=l+a.panelSizeX,M=a.plotGlPixelRatio;(t||!x[r]||x[r][0]!==l||x[r][1]!==k)&&(x[r]=[l,k],E=b(f,v,g,o,r,T,l,F,a.panelSizeX,a.panelSizeY,a.dim0.crossfilterDimensionIndex,w?0:C?2:1,p,M),A.clearOnly=s,m=t?f.lines.blockLineCount:_,h(n,S,A,m,_,E))}},readPixel:function(e,t){return n.read({x:e,y:t,width:1,height:1,data:l}),l},readPixels:function(e,t,s,o){var i=new Uint8Array(4*s*o);return n.read({x:e,y:t,width:s,height:o,data:i}),i},destroy:function(){for(var t in e.style["pointer-events"]="none",E.destroy(),y&&y.destroy(),O)O[t].destroy()},update:T}}},26284:function(e){"use strict";e.exports=function(e,t,n,s){var o,i;for(s||(s=1/0),o=0;o<t.length;o++)(i=t[o]).visible&&(s=Math.min(s,i[n].length));for(s===1/0&&(s=0),e._length=s,o=0;o<t.length;o++)(i=t[o]).visible&&(i._length=s);return s}},36336:function(e,t,n){"use strict";var o=n(33428),c=n(3400),p=c.isArrayOrTypedArray,C=c.numberFormat,x=n(96824),_=n(54460),N=c.strRotate,r=c.strTranslate,j=n(72736),d=n(43616),b=n(8932),f=n(71688),i=f.keyFun,a=f.repeat,v=f.unwrap,l=n(95724),s=n(30140),A=n(71864),D=n(51352);function w(e,t,n){return c.aggNums(e,null,t,n)}function O(e,t){return m(w(Math.min,e,t),w(Math.max,e,t))}function u(e){var t=e.range;return t?m(t[0],t[1]):O(e.values,e._length)}function m(e,t){return!isNaN(e)&&isFinite(e)||(e=0),!isNaN(t)&&isFinite(t)||(t=0),e===t&&(0===e?(e-=1,t+=1):(e*=.9,t*=1.1)),[e,t]}function z(e,t,n,s,i){var r,c,a=u(n);return s?o.scale.ordinal().domain(s.map((r=C(n.tickformat),c=i,c?function(e,t){var n=c[t];return n??r(e)}:r))).range(s.map(function(n){var s=(n-a[0])/(a[1]-a[0]);return e-t+s*(2*t-e)})):o.scale.linear().domain(a).range([e-t,t])}function T(e){if(e.tickvals){var t=u(e);return o.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(e){return(e-t[0])/(t[1]-t[0])}))}}function M(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){var t=x(e[1]);return o.rgb("rgb("+t[0]+","+t[1]+","+t[2]+")")}),s="rgb".split("").map(function(e){return o.scale.linear().clamp(!0).domain(t).range(n.map((s=e,function(e){return e[s]})));var s});return function(e){return s.map(function(t){return t(e)})}}function g(e){return e.dimensions.some(function(e){return e.brush.filterSpecified})}function L(e,t,n){var r=v(t),i=r.trace,m=l.convertTypedArray(r.lineColor),j=i.line,F={color:x(i.unselected.line.color),opacity:i.unselected.line.opacity},h=b.extractOpts(j),E=h.reversescale?b.flipScale(r.cscale):r.cscale,a=i.domain,g=i.dimensions,d=e.width,T=i.labelangle,_=i.labelside,w=i.labelfont,O=i.tickfont,C=i.rangefont,p=c.extendDeepNoArrays({},j,{color:m.map(o.scale.linear().domain(u({values:m,range:[h.min,h.max],_length:i._length}))),blockLineCount:s.blockLineCount,canvasOverdrag:s.overdrag*s.canvasPixelRatio}),k=Math.floor(d*(a.x[1]-a.x[0])),A=Math.floor(e.height*(a.y[1]-a.y[0])),S=e.margin||{l:80,r:80,t:100,b:80},f=k,y=A;return{key:n,colCount:g.filter(l.isVisible).length,dimensions:g,tickDistance:s.tickDistance,unitToColor:M(E),lines:p,deselectedLines:F,labelAngle:T,labelSide:_,labelFont:w,tickFont:O,rangeFont:C,layoutWidth:d,layoutHeight:e.height,domain:a,translateX:a.x[0]*d,translateY:e.height-a.y[1]*e.height,pad:S,canvasWidth:f*s.canvasPixelRatio+2*p.canvasOverdrag,canvasHeight:y*s.canvasPixelRatio,width:f,height:y,canvasPixelRatio:s.canvasPixelRatio}}function F(e,t,n){var h=n.width,r=n.height,b=n.dimensions,m=n.canvasPixelRatio,a=function(e){return h*e/Math.max(1,n.colCount-1)},f=s.verticalPadding/r,v=function(e,t){return o.scale.linear().range([t,e-t])}(r,s.verticalPadding),i={key:n.key,xScale:a,model:n,inBrushDrag:!1},d={};return i.dimensions=b.filter(l.isVisible).map(function(h,b){E=function(e,t){return o.scale.linear().domain(u(e)).range([t,1-t])}(h,f),k=d[h.label],d[h.label]=(k||0)+1;var j,y,_,w,x,E,k,M,F,L=h.label+(k?"__"+k:""),O=h.constraintrange,S=O&&O.length;S&&!p(O[0])&&(O=[O]),F=S?O.map(function(e){return e.map(E)}):[[-1/0,1/0]],_=h.values,_.length>h._length&&(_=_.slice(0,h._length)),j=h.tickvals;function D(e,t){return{val:e,text:y[t]}}function N(e,t){return e.val-t.val}if(p(j)&&j.length){{c.isTypedArray(j)&&(j=Array.from(j)),y=h.ticktext,p(y)&&y.length?y.length>j.length?y=y.slice(0,j.length):j.length>y.length&&(j=j.slice(0,y.length)):y=j.map(C(h.tickformat));for(x=1;x<j.length;x++)if(j[x]<j[x-1]){for(M=j.map(D).sort(N),w=0;w<j.length;w++)j[w]=M[w].val,y[w]=M[w].text;break}}}else j=void 0;return _=l.convertTypedArray(_),{key:L,label:h.label,tickFormat:h.tickformat,tickvals:j,ticktext:y,ordinal:l.isOrdinal(h),multiselect:h.multiselect,xIndex:b,crossfilterDimensionIndex:b,visibleIndex:h._index,height:r,values:_,paddedUnitValues:_.map(E),unitTickvals:j&&j.map(E),xScale:a,x:a(b),canvasX:a(b)*m,unitToPaddedPx:v,domainScale:z(r,s.verticalPadding,h,j,y),ordinalScale:T(h),parent:i,model:n,brush:A.makeBrush(e,S,F,function(){e.linePickActive(!1)},function(){var n,t=i;t.focusLayer&&t.focusLayer.render(t.panels,!0),n=g(t),!e.contextShown()&&n?(t.contextLayer&&t.contextLayer.render(t.panels,!0),e.contextShown(!0)):e.contextShown()&&!n&&(t.contextLayer&&t.contextLayer.render(t.panels,!0,!0),e.contextShown(!1))},function(n){if(i.focusLayer.render(i.panels,!0),i.pickLayer&&i.pickLayer.render(i.panels,!0),e.linePickActive(!0),t&&t.filterChanged){var s=E.invert,o=n.map(function(e){return e.map(s).sort(c.sorterAsc)}).sort(function(e,t){return e[0]-t[0]});t.filterChanged(i.key,h._index,o)}})}}),i}function k(e){e.classed(s.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function E(e,t){var s="top"===t?1:-1,n=e*Math.PI/180;return{dir:s,dx:Math.sin(n),dy:Math.cos(n),degrees:e}}function h(e,t,n){for(var r=t.panels||(t.panels=[]),i=e.data(),o=0;o<i.length-1;o++){var s=r[o]||(r[o]={}),a=i[o],c=i[o+1];s.dim0=a,s.dim1=c,s.canvasX=a.canvasX,s.panelSizeX=c.canvasX-a.canvasX,s.panelSizeY=t.model.canvasHeight,s.y=0,s.canvasY=0,s.plotGlPixelRatio=n}}function y(e,t){return _.tickText(e._ax,t,!1).text}function S(e,t){if(e.ordinal)return"";var n=e.domainScale.domain(),s=n[t?n.length-1:0];return y(e.model.dimensions[e.visibleIndex],s)}e.exports=function(e,t,n,u){var f,p,b,w,x,C,M,z,R,P,H,I,B,V,$,U,K,q,Q=e._context.staticPlot,X=e._fullLayout,G=X._toppaper,Y=X._glcontainer,T=e._context.plotGlPixelRatio,W=e._fullLayout.paper_bgcolor;!function(e){for(s=0;s<e.length;s++)for(o=0;o<e[s].length;o++)for(var t,s,o,r,a=e[s][o].trace,i=a.dimensions,n=0;n<i.length;n++)r=i[n].values,t=i[n]._ax,t&&(t.range?t.range=m(t.range[0],t.range[1]):t.range=O(r,a._length),t.dtick||(t.dtick=.01*(Math.abs(t.range[1]-t.range[0])||1)),t.tickformat=i[n].tickformat,_.calcTicks(t),t.cleanRange())}(t),w=($=!0,V=!1,{linePickActive:function(e){return arguments.length?$=!!e:$},contextShown:function(e){return arguments.length?V=!!e:V}}),P=t.filter(function(e){return v(e).trace.visible}).map(L.bind(0,n)).map(F.bind(0,w,u)),Y.each(function(e,t){return c.extendFlat(e,P[t])}),H=Y.selectAll(".gl-canvas").each(function(e){e.viewModel=P[0],e.viewModel.plotGlPixelRatio=T,e.viewModel.paperColor=W,e.model=e.viewModel?e.viewModel.model:null}),B=null,H.filter(function(e){return e.pick}).style("pointer-events",Q?"none":"auto").on("mousemove",function(e){if(w.linePickActive()&&e.lineLayer&&u&&u.hover){var c=o.event,h=this.width,l=this.height,r=o.mouse(this),n=r[0],s=r[1];if(n<0||s<0||n>=h||s>=l)return;var t=e.lineLayer.readPixel(n,l-1-s),a=0!==t[3],i=a?t[2]+256*(t[1]+256*t[0]):null,d={x:n,y:s,clientX:c.clientX,clientY:c.clientY,dataIndex:e.model.key,curveNumber:i};i!==B&&(a?u.hover(d):u.unhover&&u.unhover(d),B=i)}}),H.style("opacity",function(e){return e.pick?0:1}),G.style("background","rgba(255, 255, 255, 0)"),x=G.selectAll("."+s.cn.parcoords).data(P,i),x.exit().remove(),x.enter().append("g").classed(s.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),x.attr("transform",function(e){return r(e.model.translateX,e.model.translateY)}),C=x.selectAll("."+s.cn.parcoordsControlView).data(a,i),C.enter().append("g").classed(s.cn.parcoordsControlView,!0),C.attr("transform",function(e){return r(e.model.pad.l,e.model.pad.t)}),f=C.selectAll("."+s.cn.yAxis).data(function(e){return e.dimensions},i),f.enter().append("g").classed(s.cn.yAxis,!0),C.each(function(e){h(f,e,T)}),H.each(function(e){if(e.viewModel){!e.lineLayer||u?e.lineLayer=D(this,e):e.lineLayer.update(e),(e.key||0===e.key)&&(e.viewModel[e.key]=e.lineLayer);var t=!e.context||u;e.lineLayer.render(e.viewModel.panels,t)}}),f.attr("transform",function(e){return r(e.xScale(e.xIndex),0)}),f.call(o.behavior.drag().origin(function(e){return e}).on("drag",function(e){var t=e.parent;w.linePickActive(!1),e.x=Math.max(-s.overdrag,Math.min(e.model.width+s.overdrag,o.event.x)),e.canvasX=e.x*e.model.canvasPixelRatio,f.sort(function(e,t){return e.x-t.x}).each(function(t,n){t.xIndex=n,t.x=e===t?t.x:t.xScale(t.xIndex),t.canvasX=t.x*t.model.canvasPixelRatio}),h(f,t,T),f.filter(function(t){return 0!==Math.abs(e.xIndex-t.xIndex)}).attr("transform",function(e){return r(e.xScale(e.xIndex),0)}),o.select(this).attr("transform",r(e.x,0)),f.each(function(n,s,o){o===e.parent.key&&(t.dimensions[s]=n)}),t.contextLayer&&t.contextLayer.render(t.panels,!1,!g(t)),t.focusLayer.render&&t.focusLayer.render(t.panels)}).on("dragend",function(e){var t=e.parent;e.x=e.xScale(e.xIndex),e.canvasX=e.x*e.model.canvasPixelRatio,h(f,t,T),o.select(this).attr("transform",function(e){return r(e.x,0)}),t.contextLayer&&t.contextLayer.render(t.panels,!1,!g(t)),t.focusLayer&&t.focusLayer.render(t.panels),t.pickLayer&&t.pickLayer.render(t.panels,!0),w.linePickActive(!0),u&&u.axesMoved&&u.axesMoved(t.key,t.dimensions.map(function(e){return e.crossfilterDimensionIndex}))})),f.exit().remove(),p=f.selectAll("."+s.cn.axisOverlays).data(a,i),p.enter().append("g").classed(s.cn.axisOverlays,!0),p.selectAll("."+s.cn.axis).remove(),b=p.selectAll("."+s.cn.axis).data(a,i),b.enter().append("g").classed(s.cn.axis,!0),b.each(function(e){var n=e.model.height/e.model.tickDistance,t=e.domainScale,s=t.domain();o.select(this).call(o.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(n,e.tickFormat).tickValues(e.ordinal?s:null).tickFormat(function(t){return l.isOrdinal(e)?t:y(e.model.dimensions[e.visibleIndex],t)}).scale(t)),d.font(b.selectAll("text"),e.model.tickFont)}),b.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),b.selectAll("text").style("text-shadow",j.makeTextShadow(W)).style("cursor","default"),U=p.selectAll("."+s.cn.axisHeading).data(a,i),U.enter().append("g").classed(s.cn.axisHeading,!0),K=U.selectAll("."+s.cn.axisTitle).data(a,i),K.enter().append("text").classed(s.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",Q?"none":"auto"),K.text(function(e){return e.label}).each(function(t){var n=o.select(this);d.font(n,t.model.labelFont),j.convertToTspans(n,e)}).attr("transform",function(e){var t=E(e.model.labelAngle,e.model.labelSide),n=s.axisTitleOffset;return(t.dir>0?"":r(0,2*n+e.model.height))+N(t.degrees)+r(-n*t.dx,-n*t.dy)}).attr("text-anchor",function(e){var t=E(e.model.labelAngle,e.model.labelSide);return 2*Math.abs(t.dx)>Math.abs(t.dy)?t.dir*t.dx<0?"start":"end":"middle"}),R=p.selectAll("."+s.cn.axisExtent).data(a,i),R.enter().append("g").classed(s.cn.axisExtent,!0),M=R.selectAll("."+s.cn.axisExtentTop).data(a,i),M.enter().append("g").classed(s.cn.axisExtentTop,!0),M.attr("transform",r(0,-s.axisExtentOffset)),q=M.selectAll("."+s.cn.axisExtentTopText).data(a,i),q.enter().append("text").classed(s.cn.axisExtentTopText,!0).call(k),q.text(function(e){return S(e,!0)}).each(function(e){d.font(o.select(this),e.model.rangeFont)}),z=R.selectAll("."+s.cn.axisExtentBottom).data(a,i),z.enter().append("g").classed(s.cn.axisExtentBottom,!0),z.attr("transform",function(e){return r(0,e.model.height+s.axisExtentOffset)}),I=z.selectAll("."+s.cn.axisExtentBottomText).data(a,i),I.enter().append("text").classed(s.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(k),I.text(function(e){return S(e,!1)}).each(function(e){d.font(o.select(this),e.model.rangeFont)}),A.ensureAxisBrush(p,W,e)}},24196:function(e,t,n){"use strict";var a=n(36336),r=n(5048),s=n(95724).isVisible,o={};function i(e,t,n){var o=t.indexOf(n),s=e.indexOf(o);return-1===s&&(s+=t.length),s}(e.exports=function(e,t){if(d=e._fullLayout,r(e,[],o)){var d,n={},c={},u={},h={},l=d._size;t.forEach(function(t,s){var o,i=t[0].trace;u[s]=i.index,o=h[s]=i._fullInput.index,n[s]=e.data[o].dimensions,c[s]=e.data[o].dimensions.slice()}),a(e,t,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(t,n,s){var r,l,f,i=c[t][n],o=s.map(function(e){return e.slice()}),a="dimensions["+n+"].constraintrange",m=d._tracePreGUI[e._fullData[u[t]]._fullInput.uid];void 0===m[a]&&(f=i.constraintrange,m[a]=f||null),r=e._fullData[u[t]].dimensions[n],o.length?(1===o.length&&(o=o[0]),i.constraintrange=o,r.constraintrange=o.slice(),o=[o]):(delete i.constraintrange,delete r.constraintrange,o=null),l={},l[a]=o,e.emit("plotly_restyle",[l,[h[t]]])},hover:function(t){e.emit("plotly_hover",t)},unhover:function(t){e.emit("plotly_unhover",t)},axesMoved:function(t,o){var a=function(e,t){return function(n,s){return i(e,t,n)-i(e,t,s)}}(o,c[t].filter(s));n[t].sort(a),c[t].filter(function(e){return!s(e)}).sort(function(e){return c[t].indexOf(e)}).forEach(function(e){n[t].splice(n[t].indexOf(e),1),n[t].splice(c[t].indexOf(e),0,e)}),e.emit("plotly_restyle",[{dimensions:[n[t]]},[h[t]]])}})}}).reglPrecompiled=o},74996:function(e,t,n){"use strict";var l=n(45464),i=n(86968).u,u=n(25376),a=n(22548),r=n(21776).Ks,c=n(21776).Gw,s=n(92880).extendFlat,d=n(98192).c,o=u({editType:"plot",arrayOk:!0,colorEditType:"plot"});e.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:d,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},l.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:r({},{keys:["label","color","value","percent","text"]}),texttemplate:c({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},o,{}),outsidetextfont:s({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(e,t,n){"use strict";var s=n(7316);t.name="pie",t.plot=function(e,n,o,i){s.plotBasePlot(t.name,e,n,o,i)},t.clean=function(e,n,o,i){s.cleanBasePlot(t.name,e,n,o,i)}},45768:function(e,t,n){"use strict";var a=n(38248),s=n(49760),r=n(76308),c={};function o(e){return function(t,n){return!!t&&!!(t=s(t)).isValid()&&(t=r.addOpacity(t,t.getAlpha()),e[n]||(e[n]=t),t)}}function i(e,t){var n,i=JSON.stringify(e),o=t[i];if(!o){for(o=e.slice(),n=0;n<e.length;n++)o.push(s(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)o.push(s(e[n]).darken(20).toHexString());t[i]=o}return o}e.exports={calc:function(e,t){var n,s,r,c,m,b,i=[],v=e._fullLayout,y=v.hiddenlabels||[],d=t.labels,u=t.marker.colors||[],j=t.values,l=t._length,_=t._hasValues&&l;if(t.dlabel)for(d=new Array(l),n=0;n<l;n++)d[n]=String(t.label0+n*t.dlabel);var f={},p=o(v["_"+t.type+"colormap"]),h=0,g=!1;for(n=0;n<l;n++){if(_){if(r=j[n],!a(r))continue;r=+r}else r=1;void 0!==(s=d[n])&&""!==s||(s=n),m=f[s=String(s)],void 0===m?(f[s]=i.length,(b=-1!==y.indexOf(s))||(h+=r),i.push({v:r,label:s,color:p(u[n],s),i:n,pts:[n],hidden:b})):(g=!0,(c=i[m]).v+=r,c.pts.push(n),c.hidden||(h+=r),!1===c.color&&u[n]&&(c.color=p(u[n],s)))}return i=i.filter(function(e){return e.v>=0}),("funnelarea"===t.type?g:t.sort)&&i.sort(function(e,t){return t.v-e.v}),i[0]&&(i[0].vTotal=h),i},crossTraceCalc:function(e,t){n=(t||{}).type,n||(n="pie");var n,s,o,a,r,u,h=e._fullLayout,m=e.calcdata,l=h[n+"colorway"],d=h["_"+n+"colormap"];h["extend"+n+"colors"]&&(l=i(l,c));for(u=0,r=0;r<m.length;r++)if(o=m[r],o[0].trace.type===n)for(a=0;a<o.length;a++)s=o[a],!1===s.color&&(d[s.label]?s.color=d[s.label]:(d[s.label]=s.color=l[u%l.length],u++))},makePullColorFn:o,generateExtendedColors:i}},74174:function(e,t,n){"use strict";var d=n(38248),s=n(3400),a=n(74996),r=n(86968).Q,c=n(31508).handleText,l=n(3400).coercePattern;function o(e,t){var o,a,c,r=s.isArrayOrTypedArray(e),i=s.isArrayOrTypedArray(t),n=Math.min(r?e.length:1/0,i?t.length:1/0);if(isFinite(n)||(n=0),n&&i){for(o=0;o<n;o++)if(a=t[o],d(a)&&a>0){c=!0;break}c||(n=0)}return{hasLabels:r,hasValues:i,len:n}}function i(e,t,n,s,o){s("marker.line.width")&&s("marker.line.color",o?void 0:n.paper_bgcolor);var i=s("marker.colors");l(s,"marker.pattern",i),e.marker&&!t.marker.pattern.fgcolor&&(t.marker.pattern.fgcolor=e.marker.colors),t.marker.pattern.bgcolor||(t.marker.pattern.bgcolor=n.paper_bgcolor)}e.exports={handleLabelsAndValues:o,handleMarkerDefaults:i,supplyDefaults:function(e,t,n,l){function d(n,o){return s.coerce(e,t,a,n,o)}var u,h,f,p,v,b,m=o(d("labels"),d("values")),g=m.len;t._hasLabels=m.hasLabels,t._hasValues=m.hasValues,!t._hasLabels&&t._hasValues&&(d("label0"),d("dlabel")),g?(t._length=g,i(e,t,l,d,!0),d("scalegroup"),v=d("text"),f=d("texttemplate"),f||(h=d("textinfo",s.isArrayOrTypedArray(v)?"text+percent":"percent")),d("hovertext"),d("hovertemplate"),f||h&&"none"!==h?(u=d("textposition"),c(e,t,l,d,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(u)||"auto"===u||"outside"===u)&&d("automargin"),("inside"===u||"auto"===u||Array.isArray(u))&&d("insidetextorientation")):"none"===h&&d("textposition","none"),r(t,l,d),p=d("hole"),d("title.text")&&(b=d("title.position",p?"middle center":"top center"),p||"middle center"!==b||(t.title.position="top center"),s.coerceFont(d,"title.font",l.font)),d("sort"),d("direction"),d("rotation"),d("pull")):t.visible=!1}}},53644:function(e,t,n){"use strict";var s=n(10624).appendArrayMultiPointValues;e.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,bbox:e.bbox,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),s(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},21552:function(e,t,n){"use strict";var s=n(43616),o=n(76308);e.exports=function(e,t,n,i){var a=n.marker.pattern;a&&a.shape?s.pointStyle(e,n,i,t):o.fill(e,t.color)}},69656:function(e,t,n){"use strict";var s=n(3400);function o(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}t.formatPiePercent=function(e,t){var n=o((100*e).toPrecision(3));return s.numSeparate(n,t)+"%"},t.formatPieValue=function(e,t){var n=o(e.toPrecision(10));return s.numSeparate(n,t)},t.getFirstFilled=function(e,t){if(s.isArrayOrTypedArray(e))for(var n,o=0;o<t.length;o++)if(n=e[t[o]],n||0===n||""===n)return n},t.castOption=function(e,n){return s.isArrayOrTypedArray(e)?t.getFirstFilled(e,n):e||void 0},t.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},75792:function(e,t,n){"use strict";e.exports={attributes:n(74996),supplyDefaults:n(74174).supplyDefaults,supplyLayoutDefaults:n(90248),layoutAttributes:n(85204),calc:n(45768).calc,crossTraceCalc:n(45768).crossTraceCalc,plot:n(37820).plot,style:n(22152),styleOne:n(10528),moduleType:"trace",name:"pie",basePlotModule:n(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(e){"use strict";e.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(e,t,n){"use strict";var s=n(3400),o=n(85204);e.exports=function(e,t){function n(n,i){return s.coerce(e,t,o,n,i)}n("hiddenlabels"),n("piecolorway",t.colorway),n("extendpiecolors")}},37820:function(e,t,n){"use strict";var i=n(33428),N=n(7316),c=n(93024),y=n(76308),a=n(43616),o=n(3400),D=o.strScale,v=o.strTranslate,u=n(72736),g=n(82744),z=g.recordMinTextSize,T=g.clearMinTextSize,p=n(78048).TEXTPAD,s=n(69656),r=n(53644),b=n(3400).isValidTextValue;function j(e,t,n){var l=n[0],u=l.cx,h=l.cy,a=l.trace,d="funnelarea"===a.type;"_hasHoverLabel"in a||(a._hasHoverLabel=!1),"_hasHoverEvent"in a||(a._hasHoverEvent=!1),e.on("mouseover",function(e){if(p=t._fullLayout,m=t._fullData[a.index],!t._dragging&&!1!==p.hovermode){if(n=m.hoverinfo,Array.isArray(n)&&(n=c.castHoverinfo({hoverinfo:[s.castOption(n,e.pts)],_module:a._module},p,0)),"all"===n&&(n="label+text+value+percent+name"),m.hovertemplate||"none"!==n&&"skip"!==n&&n){var n,m,p,y,f=e.rInscribed||0,b=u+e.pxmid[0]*(1-f),j=h+e.pxmid[1]*(1-f),w=p.separators,g=[];(n&&-1!==n.indexOf("label")&&g.push(e.label),e.text=s.castOption(m.hovertext||m.text,e.pts),n&&-1!==n.indexOf("text"))&&(y=e.text,o.isValidTextValue(y)&&g.push(y)),e.value=e.v,e.valueLabel=s.formatPieValue(e.v,w),n&&-1!==n.indexOf("value")&&g.push(e.valueLabel),e.percent=e.v/l.vTotal,e.percentLabel=s.formatPiePercent(e.percent,w),n&&-1!==n.indexOf("percent")&&g.push(e.percentLabel);var v=m.hoverlabel,_=v.font,O=[];c.loneHover({trace:a,x0:b-f*l.r,x1:b+f*l.r,y:j,_x0:d?u+e.TL[0]:b-f*l.r,_x1:d?u+e.TR[0]:b+f*l.r,_y0:d?h+e.TL[1]:j-f*l.r,_y1:d?h+e.BL[1]:j+f*l.r,text:g.join("<br>"),name:m.hovertemplate||-1!==n.indexOf("name")?m.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:s.castOption(v.bgcolor,e.pts)||e.color,borderColor:s.castOption(v.bordercolor,e.pts),fontFamily:s.castOption(_.family,e.pts),fontSize:s.castOption(_.size,e.pts),fontColor:s.castOption(_.color,e.pts),nameLength:s.castOption(v.namelength,e.pts),textAlign:s.castOption(v.align,e.pts),hovertemplate:s.castOption(m.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[r(e,m)]},{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:t,inOut_bbox:O}),e.bbox=O[0],a._hasHoverLabel=!0}a._hasHoverEvent=!0,t.emit("plotly_hover",{points:[r(e,m)],event:i.event})}}),e.on("mouseout",function(e){var n=t._fullLayout,s=t._fullData[a.index],o=i.select(this).datum();a._hasHoverEvent&&(e.originalEvent=i.event,t.emit("plotly_unhover",{points:[r(o,s)],event:i.event}),a._hasHoverEvent=!1),a._hasHoverLabel&&(c.loneUnhover(n._hoverlayer.node()),a._hasHoverLabel=!1)}),e.on("click",function(e){var n=t._fullLayout,s=t._fullData[a.index];t._dragging||!1===n.hovermode||(t._hoverdata=[r(e,s)],c.click(t,i.event))})}function h(e,t,n){o=s.castOption(e.insidetextfont.color,t.pts),!o&&e._input.textfont&&(o=s.castOption(e._input.textfont.color,t.pts));var o,i=s.castOption(e.insidetextfont.family,t.pts)||s.castOption(e.textfont.family,t.pts)||n.family,a=s.castOption(e.insidetextfont.size,t.pts)||s.castOption(e.textfont.size,t.pts)||n.size,r=s.castOption(e.insidetextfont.weight,t.pts)||s.castOption(e.textfont.weight,t.pts)||n.weight,c=s.castOption(e.insidetextfont.style,t.pts)||s.castOption(e.textfont.style,t.pts)||n.style,l=s.castOption(e.insidetextfont.variant,t.pts)||s.castOption(e.textfont.variant,t.pts)||n.variant;return{color:o||y.contrast(t.color),family:i,size:a,weight:r,style:c,variant:l}}function _(e,t){for(s=0;s<e.length;s++)if((n=(r=e[s][0]).trace).title.text){i=n.title.text,n._meta&&(i=o.templateString(i,n._meta));var n,s,i,r,c=a.tester.append("text").attr("data-notex",1).text(i).call(a.font,n.title.font).call(u.convertToTspans,t),l=a.bBox(c.node(),!0);r.titleBox={width:l.width,height:l.height},c.remove()}}function w(e,t,n){if(a=n.r||t.rpx1,d=t.rInscribed,t.startangle===t.stopangle)return{rCenter:1-d,scale:0,rotate:0,textPosAngle:0};var s,o,a,c,d,p,b,l=t.ring,w=1===l&&Math.abs(t.startangle-t.stopangle)===2*Math.PI,y=t.halfangle,v=t.midangle,u=n.trace.insidetextorientation,m="horizontal"===u,g="tangential"===u,_="radial"===u,r="auto"===u,i=[];if(!r){if(c=function(n,s){if(function(e,t){var n=e.startangle,s=e.stopangle;return n>t&&t>s||n<t&&t<s}(t,n)){var r=Math.abs(n-t.startangle),c=Math.abs(n-t.stopangle),d=r<c?r:c;(o="tan"===s?x(e,a,l,d,0):O(e,a,l,d,Math.PI/2)).textPosAngle=n,i.push(o)}},m||g){for(s=4;s>=-4;s-=2)c(Math.PI*s,"tan");for(s=4;s>=-4;s-=2)c(Math.PI*(s+1),"tan")}if(m||_){for(s=4;s>=-4;s-=2)c(Math.PI*(s+1.5),"rad");for(s=4;s>=-4;s-=2)c(Math.PI*(s+.5),"rad")}}if(w||r||m){if(b=Math.sqrt(e.width*e.width+e.height*e.height),(o={scale:d*a*2/b,rCenter:1-d,rotate:0}).textPosAngle=(t.startangle+t.stopangle)/2,o.scale>=1)return o;i.push(o)}(r||_)&&((o=O(e,a,l,y,v)).textPosAngle=(t.startangle+t.stopangle)/2,i.push(o)),(r||g)&&((o=x(e,a,l,y,v)).textPosAngle=(t.startangle+t.stopangle)/2,i.push(o));for(var j=0,f=0,h=0;h<i.length;h++)if(p=i[h].scale,f<p&&(f=p,j=h),!r&&f>=1)break;return i[j]}function O(e,t,n,s,o){t=Math.max(0,t-2*p);var i=e.width/e.height,a=k(i,s,t,n);return{scale:2*a/e.height,rCenter:C(i,a/t),rotate:E(o)}}function x(e,t,n,s,o){t=Math.max(0,t-2*p);var i=e.height/e.width,a=k(i,s,t,n);return{scale:2*a/e.width,rCenter:C(i,a/t),rotate:E(o+Math.PI/2)}}function C(e,t){return Math.cos(t)-e*t}function E(e){return(180/Math.PI*e+720)%180-90}function k(e,t,n,s){var o=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(o*o+.5)+o),s/(Math.sqrt(e*e+s/2)+e))}function L(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}function S(e,t){var n=t.pxmid[0],s=t.pxmid[1],o=e.width/2,i=e.height/2;return n<0&&(o*=-1),s<0&&(i*=-1),{scale:1,rCenter:1,rotate:0,x:o+Math.abs(i)*(o>0?1:-1)/2,y:i/(1+n*n/(s*s)),outside:!0}}function M(e,t){var i,a,r,c,l,u,n=e.trace,s={x:e.cx,y:e.cy},o={tx:0,ty:0};return o.ty+=n.title.font.size,a=f(n),-1!==n.title.position.indexOf("top")?(s.y-=(1+a)*e.r,o.ty-=e.titleBox.height):-1!==n.title.position.indexOf("bottom")&&(s.y+=(1+a)*e.r),i=e.r/(void 0===(l=e.trace.aspectratio)?1:l),r=t.w*(n.domain.x[1]-n.domain.x[0])/2,-1!==n.title.position.indexOf("left")?(r+=i,s.x-=(1+a)*i,o.tx+=e.titleBox.width/2):-1!==n.title.position.indexOf("center")?r*=2:-1!==n.title.position.indexOf("right")&&(r+=i,s.x+=(1+a)*i,o.tx-=e.titleBox.width/2),c=r/e.titleBox.width,u=d(e,t)/e.titleBox.height,{x:s.x,y:s.y,scale:Math.min(c,u),tx:o.tx,ty:o.ty}}function d(e,t){var n=e.trace,s=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,s/2)}function f(e){var n,t=e.pull;if(!t)return 0;if(o.isArrayOrTypedArray(t))for(t=0,n=0;n<e.pull.length;n++)e.pull[n]>t&&(t=e.pull[n]);return t}function m(e,t){for(o=[],i=0;i<e.length;i++){var o,i,c,l,s=e[i][0],n=s.trace,a=n.domain,u=t.w*(a.x[1]-a.x[0]),r=t.h*(a.y[1]-a.y[0]);n.title.text&&"middle center"!==n.title.position&&(r-=d(s,t)),l=u/2,c=r/2,"funnelarea"!==n.type||n.scalegroup||(c/=n.aspectratio),s.r=Math.min(l,c)/(1+f(n)),s.cx=t.l+t.w*(n.domain.x[1]+n.domain.x[0])/2,s.cy=t.t+t.h*(1-n.domain.y[0])-r/2,n.title.text&&-1!==n.title.position.indexOf("bottom")&&(s.cy-=d(s,t)),n.scalegroup&&-1===o.indexOf(n.scalegroup)&&o.push(n.scalegroup)}!function(e,t){for(i=0;i<t.length;i++){var n,s,o,i,a,c,l,d,r=1/0,u=t[i];for(o=0;o<e.length;o++)(n=(s=e[o][0]).trace).scalegroup===u&&("pie"===n.type?c=s.r*s.r:"funnelarea"===n.type&&(n.aspectratio>1?d=(l=s.r)/n.aspectratio:l=(d=s.r)*n.aspectratio,c=(l*=(1+n.baseratio)/2)*d),r=Math.min(r,c/s.vTotal));for(o=0;o<e.length;o++)(n=(s=e[o][0]).trace).scalegroup===u&&(a=r*s.vTotal,"funnelarea"===n.type&&(a/=(1+n.baseratio)/2,a/=n.aspectratio),s.r=Math.sqrt(a))}}(e,o)}function l(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function A(e,t,n){var m=e._fullLayout,i=n.trace,p=i.texttemplate,d=i.textinfo;if(!p&&d&&"none"!==d){var a,r,c,u,h,y=d.split("+"),l=function(e){return-1!==y.indexOf(e)},j=l("label"),_=l("text"),g=l("value"),v=l("percent"),f=m.separators;(a=j?[t.label]:[],_)&&(h=s.getFirstFilled(i.text,t.pts),b(h)&&a.push(h)),g&&a.push(s.formatPieValue(t.v,f)),v&&a.push(s.formatPiePercent(t.v/n.vTotal,f)),t.text=a.join("<br>")}p&&(u=o.castOption(i,t.i,"texttemplate"),u?(c=function(e){return{label:e.label,value:e.v,valueLabel:s.formatPieValue(e.v,m.separators),percent:e.v/n.vTotal,percentLabel:s.formatPiePercent(e.v/n.vTotal,m.separators),color:e.color,text:e.text,customdata:o.castOption(i,e.i,"customdata")}}(t),r=s.getFirstFilled(i.text,t.pts),(b(r)||""===r)&&(c.text=r),t.text=o.texttemplateString(u,c,e._fullLayout._d3locale,c,i._meta||{})):t.text="")}function F(e,t){var n=e.rotate*Math.PI/180,s=Math.cos(n),o=Math.sin(n),i=(t.left+t.right)/2,a=(t.top+t.bottom)/2;e.textX=i*s-a*o,e.textY=i*o+a*s,e.noCenter=!0}e.exports={plot:function(e,t){var c,d=e._context.staticPlot,n=e._fullLayout,r=n._size;T("pie",n),_(t,e),m(t,r),c=o.makeTraceGroups(n._pielayer,t,"trace").each(function(t){var f=i.select(this),c=t[0],m=c.trace;!function(e){var t,n,a,i=e[0],c=i.r,d=i.trace,o=s.getRotationAngle(d.rotation),r=2*Math.PI/i.vTotal,u="px0",h="px1";if("counterclockwise"===d.direction){for(n=0;n<e.length&&e[n].hidden;n++);if(n===e.length)return;o+=r*e[n].v,r*=-1,u="px1",h="px0"}for(a=l(c,o),n=0;n<e.length;n++)(t=e[n]).hidden||(t[u]=a,t.startangle=o,o+=r*t.v/2,t.pxmid=l(c,o),t.midangle=o,a=l(c,o+=r*t.v/2),t.stopangle=o,t[h]=a,t.largeArc=t.v>i.vTotal/2?1:0,t.halfangle=Math.PI*Math.min(t.v/i.vTotal,.5),t.ring=1-d.hole,t.rInscribed=L(t,i))}(t),f.attr("stroke-linejoin","round"),f.each(function(){if(g=i.select(this).selectAll("g.slice").data(t),g.enter().append("g").classed("slice",!0),g.exit().remove(),x=[[[],[]],[[],[]]],b=!1,g.each(function(r,f){if(r.hidden)i.select(this).selectAll("path,g").remove();else{r.pointNumber=r.i,r.curveNumber=m.index,x[r.pxmid[1]<0?0:1][r.pxmid[0]<0?0:1].push(r);var p,O,C,E,M,T,D,g=c.cx,v=c.cy,k=i.select(this),_=k.selectAll("path.surface").data([r]);(_.enter().append("path").classed("surface",!0).style({"pointer-events":d?"none":"all"}),k.call(j,e,t),m.pull)&&(C=+s.castOption(m.pull,r.pts)||0,C>0&&(g+=C*r.pxmid[0],v+=C*r.pxmid[1])),r.cxFinal=g,r.cyFinal=v,p=m.hole,r.v===c.vTotal?(M="M"+(g+r.px0[0])+","+(v+r.px0[1])+y(r.px0,r.pxmid,!0,1)+y(r.pxmid,r.px0,!0,1)+"Z",p?_.attr("d","M"+(g+p*r.px0[0])+","+(v+p*r.px0[1])+y(r.px0,r.pxmid,!1,p)+y(r.pxmid,r.px0,!1,p)+"Z"+M):_.attr("d",M)):(T=y(r.px0,r.px1,!0,1),p?(D=1-p,_.attr("d","M"+(g+p*r.px1[0])+","+(v+p*r.px1[1])+y(r.px1,r.px0,!1,p)+"l"+D*r.px0[0]+","+D*r.px0[1]+T+"Z")):_.attr("d","M"+g+","+v+"l"+r.px0[0]+","+r.px0[1]+T+"Z")),A(e,r,c),O=s.castOption(m.textposition,r.pts),E=k.selectAll("g.slicetext").data(r.text&&"none"!==O?[0]:[]),E.enter().append("g").classed("slicetext",!0),E.exit().remove(),E.each(function(){var d,p,y,_,x,C,j=o.ensureSingle(i.select(this),"text","",function(e){e.attr("data-notex",1)}),E=o.ensureUniformFontSize(e,"outside"===O?function(e,t,n){return{color:s.castOption(e.outsidetextfont.color,t.pts)||s.castOption(e.textfont.color,t.pts)||n.color,family:s.castOption(e.outsidetextfont.family,t.pts)||s.castOption(e.textfont.family,t.pts)||n.family,size:s.castOption(e.outsidetextfont.size,t.pts)||s.castOption(e.textfont.size,t.pts)||n.size,weight:s.castOption(e.outsidetextfont.weight,t.pts)||s.castOption(e.textfont.weight,t.pts)||n.weight,style:s.castOption(e.outsidetextfont.style,t.pts)||s.castOption(e.textfont.style,t.pts)||n.style,variant:s.castOption(e.outsidetextfont.variant,t.pts)||s.castOption(e.textfont.variant,t.pts)||n.variant}}(m,r,n.font):h(m,r,n.font));j.text(r.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(a.font,E).call(u.convertToTspans,e),p=a.bBox(j.node()),"outside"===O?d=S(p,r):(d=w(p,r,c),"auto"===O&&d.scale<1)&&(C=o.ensureUniformFontSize(e,m.outsidetextfont),j.call(a.font,C),d=S(p=a.bBox(j.node()),r)),_=d.textPosAngle,x=void 0===_?r.pxmid:l(c.r,_),(d.targetX=g+x[0]*d.rCenter+(d.x||0),d.targetY=v+x[1]*d.rCenter+(d.y||0),F(d,p),d.outside)&&(y=d.targetY,r.yLabelMin=y-p.height/2,r.yLabelMid=y,r.yLabelMax=y+p.height/2,r.labelExtraX=0,r.labelExtraY=0,b=!0),d.fontSize=E.size,z(m.type,d,n),t[f].transform=d,o.setTransormAndDisplay(j,d)})}function y(e,t,n,s){var o=s*(t[0]-e[0]),i=s*(t[1]-e[1]);return"a"+s*c.r+","+s*c.r+" 0 "+r.largeArc+(n?" 1 ":" 0 ")+o+","+i}}),_=i.select(this).selectAll("g.titletext").data(m.title.text?[0]:[]),_.enter().append("g").classed("titletext",!0),_.exit().remove(),_.each(function(){var t,s=o.ensureSingle(i.select(this),"text","",function(e){e.attr("data-notex",1)}),n=m.title.text;m._meta&&(n=o.templateString(n,m._meta)),s.text(n).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(a.font,m.title.font).call(u.convertToTspans,e),t="middle center"===m.title.position?function(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}(c):M(c,r),s.attr("transform",v(t.x,t.y)+D(Math.min(1,t.scale))+v(t.tx,t.ty))}),b&&function(e,t){function b(e,t){return e.pxmid[1]-t.pxmid[1]}function j(e,t){return t.pxmid[1]-e.pxmid[1]}function y(e,n){n||(n={});var a,c,d,h,v=n.labelExtraY+(i?n.yLabelMax:n.yLabelMin),g=i?e.yLabelMin:e.yLabelMax,b=i?e.yLabelMax:e.yLabelMin,j=e.cyFinal+f(e.px0[1],e.px1[1]),l=v-g;if(l*r>0&&(e.labelExtraY=l),o.isArrayOrTypedArray(t.pull))for(c=0;c<u.length;c++)(a=u[c])===e||(s.castOption(t.pull,e.pts)||0)>=(s.castOption(t.pull,a.pts)||0)||((e.pxmid[1]-a.pxmid[1])*r>0?(l=a.cyFinal+f(a.px0[1],a.px1[1])-g-e.labelExtraY)*r>0&&(e.labelExtraY+=l):(b+e.labelExtraY-j)*r>0&&(d=3*m*Math.abs(c-u.indexOf(e)),(h=a.cxFinal+p(a.px0[0],a.px1[0])+d-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*m>0&&(e.labelExtraX+=h)))}for(i=0;i<2;i++)for(g=i?b:j,f=i?Math.max:Math.min,r=i?1:-1,a=0;a<2;a++){for(p=a?Math.max:Math.min,m=a?1:-1,(l=e[i][a]).sort(g),d=e[1-i][a],u=d.concat(l),c=[],n=0;n<l.length;n++)void 0!==l[n].yLabelMid&&c.push(l[n]);for(h=!1,n=0;i&&n<d.length;n++)if(void 0!==d[n].yLabelMid){h=d[n];break}for(n=0;n<c.length;n++){var n,i,a,r,c,l,d,u,h,m,f,p,g,v=n&&c[n-1];h&&!n&&(v=h),y(c[n],v)}}}(x,m),function(e,t){e.each(function(e){if(r=i.select(this),e.labelExtraX||e.labelExtraY){l=r.select("g.slicetext text"),e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,o.setTransormAndDisplay(l,e.transform);var n,a,r,l,d=e.cxFinal+e.pxmid[0],s="M"+d+","+(e.cyFinal+e.pxmid[1]),c=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;e.labelExtraX?(a=e.labelExtraX*e.pxmid[1]/e.pxmid[0],n=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]),Math.abs(a)>Math.abs(n)?s+="l"+n*e.pxmid[0]/e.pxmid[1]+","+n+"H"+(d+e.labelExtraX+c):s+="l"+e.labelExtraX+","+a+"v"+(n-a)+"h"+c):s+="V"+(e.yLabelMid+e.labelExtraY)+"h"+c,o.ensureSingle(r,"path","textline").call(y.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:s,fill:"none"})}else r.select("path.textline").remove()})}(g,m),b&&m.automargin){var g,b,_,x,O=a.bBox(f.node()),p=m.domain,k=r.w*(p.x[1]-p.x[0]),T=r.h*(p.y[1]-p.y[0]),C=(.5*k-c.r)/r.w,E=(.5*T-c.r)/r.h;N.autoMargin(e,"pie."+m.uid+".automargin",{xl:p.x[0]-C,xr:p.x[1]+C,yb:p.y[0]-E,yt:p.y[1]+E,l:Math.max(c.cx-c.r-O.left,0),r:Math.max(O.right-(c.cx+c.r),0),b:Math.max(O.bottom-(c.cy+c.r),0),t:Math.max(c.cy-c.r-O.top,0),pad:5})}})}),setTimeout(function(){c.selectAll("tspan").each(function(){var e=i.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},formatSliceLabel:A,transformInsideText:w,determineInsideTextFont:h,positionTitleOutside:M,prerenderTitles:_,layoutAreas:m,attachFxHandlers:j,computeTransform:F}},22152:function(e,t,n){"use strict";var s=n(33428),o=n(10528),i=n(82744).resizeText;e.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");i(e,t,"pie"),t.each(function(t){var n=t[0].trace,i=s.select(this);i.style({opacity:n.opacity}),i.selectAll("path.surface").each(function(t){s.select(this).call(o,t,n,e)})})}},10528:function(e,t,n){"use strict";var s=n(76308),o=n(69656).castOption,i=n(21552);e.exports=function(e,t,n,a){var r=n.marker.line,c=o(r.color,t.pts)||s.defaultLine,l=o(r.width,t.pts)||0;e.call(i,t,n,a).style("stroke-width",l).call(s.stroke,c)}},35484:function(e,t,n){"use strict";var s=n(52904);e.exports={x:s.x,y:s.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:s.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(e,t,n){"use strict";var s,l=n(67792).gl_pointcloud2d,r=n(3400).isArrayOrTypedArray,o=n(43080),i=n(19280).findExtremes,c=n(44928);function a(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=l(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}s=a.prototype,s.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:r(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},s.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=c(e,{})},s.updateFast=function(e){var n,s,a,r,c,l,d,h,j,u=this.xData=this.pickXData=e.x,y=this.yData=this.pickYData=e.y,m=this.pickXYData=e.xy,O=e.xbounds&&e.ybounds,f=e.indices,t=this.bounds;if(m){if(l=m,r=m.length>>>1,O)t[0]=e.xbounds[0],t[2]=e.xbounds[1],t[1]=e.ybounds[0],t[3]=e.ybounds[1];else for(n=0;n<r;n++)s=l[2*n],a=l[2*n+1],s<t[0]&&(t[0]=s),s>t[2]&&(t[2]=s),a<t[1]&&(t[1]=a),a>t[3]&&(t[3]=a);if(f)c=f;else for(c=new Int32Array(r),n=0;n<r;n++)c[n]=n}else for(r=u.length,l=new Float32Array(2*r),c=new Int32Array(r),n=0;n<r;n++)s=u[n],a=y[n],c[n]=n,l[2*n]=s,l[2*n+1]=a,s<t[0]&&(t[0]=s),s>t[2]&&(t[2]=s),a<t[1]&&(t[1]=a),a>t[3]&&(t[3]=a);this.idToIndex=c,this.pointcloudOptions.idToIndex=c,this.pointcloudOptions.positions=l;var p=o(e.marker.color),g=o(e.marker.border.color),v=e.opacity*e.marker.opacity;p[3]*=v,this.pointcloudOptions.color=p,d=e.marker.blend,null===d&&(d=u.length<100||y.length<100),this.pointcloudOptions.blend=d,g[3]*=v,this.pointcloudOptions.borderColor=g,j=e.marker.sizemin,h=Math.max(e.marker.sizemax,e.marker.sizemin),this.pointcloudOptions.sizeMin=j,this.pointcloudOptions.sizeMax=h,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var _=this.scene.xaxis,b=this.scene.yaxis,w=h/2||.5;e._extremes[_._id]=i(_,[t[0],t[2]],{ppad:w}),e._extremes[b._id]=i(b,[t[1],t[3]],{ppad:w})},s.dispose=function(){this.pointcloud.dispose()},e.exports=function(e,t){var n=new a(e,t.uid);return n.update(t),n}},41904:function(e,t,n){"use strict";var s=n(3400),o=n(35484);e.exports=function(e,t,n){function i(n,i){return s.coerce(e,t,o,n,i)}i("x"),i("y"),i("xbounds"),i("ybounds"),e.xy&&e.xy instanceof Float32Array&&(t.xy=e.xy),e.indices&&e.indices instanceof Int32Array&&(t.indices=e.indices),i("text"),i("marker.color",n),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",n),i("marker.border.arearatio"),t._length=null}},156:function(e,t,n){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),e.exports={attributes:n(35484),supplyDefaults:n(41904),calc:n(41484),plot:n(11072),moduleType:"trace",name:"pointcloud",basePlotModule:n(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(e,t,n){"use strict";var r=n(25376),c=n(45464),o=n(22548),s=n(55756),l=n(86968).u,i=n(21776).Ks,d=n(49084),u=n(31780).templatedArray,h=n(29736).descriptionOnlyNumbers,a=n(92880).extendFlat,m=n(67824).overrideAll;(e.exports=m({hoverinfo:a({},c.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:s.hoverlabel,domain:l({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:h("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:r({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:s.hoverlabel,hovertemplate:i({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:s.hoverlabel,hovertemplate:i({},{keys:["value","label"]}),colorscales:u("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:a(d().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(e,t,n){"use strict";var i=n(67824).overrideAll,d=n(84888)._M,a=n(59596),h=n(65460),r=n(93972),c=n(86476),l=n(22676).prepSelect,o=n(3400),u=n(24040),s="sankey";function m(e,t){var n=e._fullData[t],a=e._fullLayout,s=a.dragmode,f="pan"===a.dragmode?"move":"crosshair",i=n._bgRect;if(i&&"pan"!==s&&"zoom"!==s){r(i,f);var d={_id:"x",c2p:o.identity,_offset:n._sankey.translateX,_length:n._sankey.width},h={_id:"y",c2p:o.identity,_offset:n._sankey.translateY,_length:n._sankey.height},m={gd:e,element:i.node(),plotinfo:{id:t,xaxis:d,yaxis:h,fillRangeItems:o.noop},subplot:t,xaxes:[d],yaxes:[h],doneFnCompleted:function(n){var s,o,i,l,r=e._fullData[t],c=r.node.groups.slice(),a=[];function d(e){for(var n=r._sankey.graph.nodes,t=0;t<n.length;t++)if(n[t].pointNumber===e)return n[t]}for(i=0;i<n.length;i++)if(s=d(n[i].pointNumber),s)if(s.group){for(o=0;o<s.childrenNodes.length;o++)a.push(s.childrenNodes[o].pointNumber);c[s.pointNumber-r.node._count]=!1}else a.push(s.pointNumber);l=c.filter(Boolean).concat([a]),u.call("_guiRestyle",e,{"node.groups":[l]},t)},prepFn:function(e,t,n){l(e,t,n,m,s)}};c.init(m)}}t.name=s,t.baseLayoutAttrOverrides=i({hoverlabel:h.hoverlabel},"plot","nested"),t.plot=function(e){var n=d(e.calcdata,s)[0];a(e,n),t.updateFx(e)},t.clean=function(e,t,n,o){var i=o._has&&o._has(s),a=t._has&&t._has(s);i&&!a&&(o._paperdiv.selectAll(".sankey").remove(),o._paperdiv.selectAll(".bgsankey").remove())},t.updateFx=function(e){for(var t=0;t<e._fullData.length;t++)m(e,t)}},48068:function(e,t,n){"use strict";var r=n(78484),s=n(3400),c=n(71688).wrap,o=s.isArrayOrTypedArray,i=s.isIndex,a=n(8932);e.exports=function(e,t){var n=function(e){var t,c,u,m,f,p,g,v,b,y,_,O,E,A,h=e.node,n=e.link,S=[],F=o(n.color),T=o(n.hovercolor),z=o(n.customdata),j={},w={},L=n.colorscales.length;for(t=0;t<L;t++){var C=n.colorscales[t],P=a.extractScale(C,{cLetter:"c"}),R=a.makeColorScaleFunc(P);w[C.label]=R}m=0;for(t=0;t<n.value.length;t++)n.source[t]>m&&(m=n.source[t]),n.target[t]>m&&(m=n.target[t]);u=m+1,e.node._count=u,g=e.node.groups,c={};for(t=0;t<g.length;t++){_=g[t];for(b=0;b<_.length;b++)v=_[b],E=u+t,c.hasOwnProperty(v)?s.warn("Node "+v+" is already part of a group."):c[v]=E}p={source:[],target:[]};for(t=0;t<n.value.length;t++){var M=n.value[t],d=n.source[t],l=n.target[t];M>0&&i(d,u)&&i(l,u)&&(!c.hasOwnProperty(d)||!c.hasOwnProperty(l)||c[d]!==c[l])&&(c.hasOwnProperty(l)&&(l=c[l]),c.hasOwnProperty(d)&&(d=c[d]),l=+l,j[d=+d]=j[l]=!0,f="",n.label&&n.label[t]&&(f=n.label[t]),O=null,f&&w.hasOwnProperty(f)&&(O=w[f]),S.push({pointNumber:t,label:f,color:F?n.color[t]:n.color,hovercolor:T?n.hovercolor[t]:n.hovercolor,customdata:z?n.customdata[t]:n.customdata,concentrationscale:O,source:d,target:l,value:+M}),p.source.push(d),p.target.push(l))}var k=u+g.length,D=o(h.color),N=o(h.customdata),x=[];for(t=0;t<k;t++)j[t]&&(A=h.label[t],x.push({group:t>u-1,childrenNodes:[],pointNumber:t,label:A,color:D?h.color[t]:h.color,customdata:N?h.customdata[t]:h.customdata}));return y=!1,function(e,t,n){for(var i=s.init2dArray(e,0),o=0;o<Math.min(t.length,n.length);o++)if(s.isIndex(t[o],e)&&s.isIndex(n[o],e)){if(t[o]===n[o])return!0;i[t[o]].push(n[o])}return r(i).components.some(function(e){return e.length>1})}(k,p.source,p.target)&&(y=!0),{circular:y,links:S,nodes:x,groups:g,groupLookup:c}}(t);return c({circular:n.circular,_nodes:n.nodes,_links:n.links,_groups:n.groups,_groupLookup:n.groupLookup})}},11820:function(e){"use strict";e.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(e,t,n){"use strict";var s=n(3400),o=n(41440),c=n(76308),i=n(49760),l=n(86968).Q,a=n(16132),r=n(31780),d=n(51272);function u(e,t){function n(n,i){return s.coerce(e,t,o.link.colorscales,n,i)}n("label"),n("cmin"),n("cmax"),n("colorscale")}e.exports=function(e,t,n,h){function p(n,i){return s.coerce(e,t,o,n,i)}var v,b,j,y,_,O,x=s.extendDeep(h.hoverlabel,e.hoverlabel),w=e.node,g=r.newContainer(t,"node");function m(e,t){return s.coerce(w,g,o.node,e,t)}m("label"),m("groups"),m("x"),m("y"),m("pad"),m("thickness"),m("line.color"),m("line.width"),m("hoverinfo",e.hoverinfo),a(w,g,m,x),m("hovertemplate"),m("align"),y=h.colorway,m("color",g.label.map(function(e,t){return c.addOpacity(function(e){return y[e%y.length]}(t),.8)})),m("customdata"),j=e.link||{},b=r.newContainer(t,"link");function f(e,t){return s.coerce(j,b,o.link,e,t)}f("label"),f("arrowlen"),f("source"),f("target"),f("value"),f("line.color"),f("line.width"),f("hoverinfo",e.hoverinfo),a(j,b,f,x),f("hovertemplate"),_=i(h.paper_bgcolor).getLuminance()<.333,v=f("color",_?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function C(e){var n,t=i(e);return t.isValid()?(n=t.getAlpha(),n<=.8?t.setAlpha(n+.2):t=_?t.brighten():t.darken(),t.toRgbString()):e}f("hovercolor",Array.isArray(v)?v.map(C):C(v)),f("customdata"),d(j,b,{name:"colorscales",handleItemDefaults:u}),l(t,h,p),p("orientation"),p("valueformat"),p("valuesuffix"),g.x.length&&g.y.length&&(O="freeform"),p("arrangement",O),s.coerceFont(p,"textfont",s.extendFlat({},h.font)),t._length=null}},45499:function(e,t,n){"use strict";e.exports={attributes:n(41440),supplyDefaults:n(47140),calc:n(48068),plot:n(59596),moduleType:"trace",name:"sankey",basePlotModule:n(10760),selectPoints:n(81128),categories:["noOpacity"],meta:{}}},59596:function(e,t,n){"use strict";var o=n(33428),d=n(3400),l=d.numberFormat,_=n(83248),r=n(93024),y=n(76308),i=n(11820).cn,c=d._;function m(e){return""!==e}function a(e,t){return e.filter(function(e){return e.key===t.traceId})}function j(e,t){o.select(e).select("path").style("fill-opacity",t),o.select(e).select("rect").style("fill-opacity",t)}function p(e){o.select(e).select("text.name").style("fill","black")}function g(e){return function(t){return-1!==e.node.sourceLinks.indexOf(t.link)||-1!==e.node.targetLinks.indexOf(t.link)}}function h(e){return function(t){return-1!==t.node.sourceLinks.indexOf(e.link)||-1!==t.node.targetLinks.indexOf(e.link)}}function v(e,t,n){t&&n&&a(n,t).selectAll("."+i.sankeyLink).filter(g(t)).call(f.bind(0,t,n,!1))}function u(e,t,n){t&&n&&a(n,t).selectAll("."+i.sankeyLink).filter(g(t)).call(b.bind(0,t,n,!1))}function f(e,t,n,s){s.style("fill",function(e){if(!e.link.concentrationscale)return e.tinyColorHoverHue}).style("fill-opacity",function(e){if(!e.link.concentrationscale)return e.tinyColorHoverAlpha}),s.each(function(n){var s=n.link.label;""!==s&&a(t,e).selectAll("."+i.sankeyLink).filter(function(e){return e.link.label===s}).style("fill",function(e){if(!e.link.concentrationscale)return e.tinyColorHoverHue}).style("fill-opacity",function(e){if(!e.link.concentrationscale)return e.tinyColorHoverAlpha})}),n&&a(t,e).selectAll("."+i.sankeyNode).filter(h(e)).call(v)}function b(e,t,n,s){s.style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha}),s.each(function(n){var s=n.link.label;""!==s&&a(t,e).selectAll("."+i.sankeyLink).filter(function(e){return e.link.label===s}).style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha})}),n&&a(t,e).selectAll(i.sankeyNode).filter(h(e)).call(u)}function s(e,t){var s=e.hoverlabel||{},n=d.nestedProperty(s,t).get();return!Array.isArray(n)&&n}e.exports=function(e,t){for(var n=e._fullLayout,g=n._paper,d=n._size,a=0;a<e._fullData.length;a++)e._fullData[a].visible&&e._fullData[a].type===i.sankey&&!e._fullData[a]._viewInitial&&(h=e._fullData[a].node,e._fullData[a]._viewInitial={node:{groups:h.groups.slice(),x:h.x.slice(),y:h.y.slice()}});var h,w=c(e,"source:")+" ",O=c(e,"target:")+" ",x=c(e,"concentration:")+" ",C=c(e,"incoming flow count:")+" ",E=c(e,"outgoing flow count:")+" ";_(e,g,t,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:function(t,n,s){!1!==e._fullLayout.hovermode&&(o.select(t).call(f.bind(0,n,s,!0)),"skip"!==n.link.trace.link.hoverinfo&&(n.link.fullData=n.link.trace,e.emit("plotly_hover",{event:o.event,points:[n.link]})))},follow:function(t,i){if(!1!==e._fullLayout.hovermode&&(a=i.link.trace.link,"none"!==a.hoverinfo&&"skip"!==a.hoverinfo)){for(var a,c,u,h,f=[],g=0,d=0;d<i.flow.links.length;d++)c=i.flow.links[d],("closest"!==e._fullLayout.hovermode||i.link.pointNumber===c.pointNumber)&&(i.link.pointNumber===c.pointNumber&&(g=d),c.fullData=c.trace,a=i.link.trace.link,u=v(c),h={valueLabel:l(i.valueFormat)(c.value)+i.valueSuffix},f.push({x:u[0],y:u[1],name:h.valueLabel,text:[c.label||"",w+c.source.label,O+c.target.label,c.concentrationscale?x+l("%0.2f")(c.flow.labelConcentration):""].filter(m).join("<br>"),color:s(a,"bgcolor")||y.addOpacity(c.color,1),borderColor:s(a,"bordercolor"),fontFamily:s(a,"font.family"),fontSize:s(a,"font.size"),fontColor:s(a,"font.color"),fontWeight:s(a,"font.weight"),fontStyle:s(a,"font.style"),fontVariant:s(a,"font.variant"),nameLength:s(a,"namelength"),textAlign:s(a,"align"),idealAlign:o.event.x<u[0]?"right":"left",hovertemplate:a.hovertemplate,hovertemplateLabels:h,eventData:[c]}));r.loneHover(f,{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e,anchorIndex:g}).each(function(){i.link.concentrationscale||j(this,.65),p(this)})}function v(e){e.circular?(n=(e.circularPathData.leftInnerExtent+e.circularPathData.rightInnerExtent)/2,s=e.circularPathData.verticalFullExtent):(n=(e.source.x1+e.target.x0)/2,s=(e.y0+e.y1)/2);var n,s,t=[n,s];return"v"===e.trace.orientation&&t.reverse(),t[0]+=i.parent.translateX,t[1]+=i.parent.translateY,t}},unhover:function(t,s,i){!1!==e._fullLayout.hovermode&&(o.select(t).call(b.bind(0,s,i,!0)),"skip"!==s.link.trace.link.hoverinfo&&(s.link.fullData=s.link.trace,e.emit("plotly_unhover",{event:o.event,points:[s.link]})),r.loneUnhover(n._hoverlayer.node()))},select:function(t,n){var s=n.link;s.originalEvent=o.event,e._hoverdata=[s],r.click(e,{target:!0})}},nodeEvents:{hover:function(t,n,s){!1!==e._fullLayout.hovermode&&(o.select(t).call(v,n,s),"skip"!==n.node.trace.node.hoverinfo&&(n.node.fullData=n.node.trace,e.emit("plotly_hover",{event:o.event,points:[n.node]})))},follow:function(t,a){if(!1!==e._fullLayout.hovermode&&(c=a.node.trace.node,"none"!==c.hoverinfo&&"skip"!==c.hoverinfo)){var c,g=o.select(t).select("."+i.nodeRect),u=e._fullLayout._paperdiv.node().getBoundingClientRect(),d=g.node().getBoundingClientRect(),w=d.left-2-u.left,v=d.right+2-u.left,b=d.top+d.height/4-u.top,y={valueLabel:l(a.valueFormat)(a.node.value)+a.valueSuffix};a.node.fullData=a.node.trace,e._fullLayout._calcInverseTransform(e);var f=e._fullLayout._invScaleX,_=e._fullLayout._invScaleY,h=r.loneHover({x0:f*w,x1:f*v,y:_*b,name:l(a.valueFormat)(a.node.value)+a.valueSuffix,text:[a.node.label,C+a.node.targetLinks.length,E+a.node.sourceLinks.length].filter(m).join("<br>"),color:s(c,"bgcolor")||a.tinyColorHue,borderColor:s(c,"bordercolor"),fontFamily:s(c,"font.family"),fontSize:s(c,"font.size"),fontColor:s(c,"font.color"),fontWeight:s(c,"font.weight"),fontStyle:s(c,"font.style"),fontVariant:s(c,"font.variant"),nameLength:s(c,"namelength"),textAlign:s(c,"align"),idealAlign:"left",hovertemplate:c.hovertemplate,hovertemplateLabels:y,eventData:[a.node]},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e});j(h,.85),p(h)}},unhover:function(t,s,i){!1!==e._fullLayout.hovermode&&(o.select(t).call(u,s,i),"skip"!==s.node.trace.node.hoverinfo&&(s.node.fullData=s.node.trace,e.emit("plotly_unhover",{event:o.event,points:[s.node]})),r.loneUnhover(n._hoverlayer.node()))},select:function(t,n,s){var i=n.node;i.originalEvent=o.event,e._hoverdata=[i],o.select(t).call(u,n,s),r.click(e,{target:!0})}}})}},83248:function(e,t,n){"use strict";var C=n(49812),R=n(67756).Gz,r=n(33428),c=n(26800),L=n(48932),s=n(11820),a=n(49760),i=n(76308),D=n(43616),o=n(3400),m=o.strTranslate,z=o.strRotate,p=n(71688),l=p.keyFun,d=p.repeat,b=p.unwrap,u=n(72736),k=n(24040),_=n(84284),F=_.CAP_SHIFT,M=_.LINE_SPACING;function A(e,t,n){var i,l,d,u,h,m,j,w,x,C,k,p=b(t),r=p.trace,f=r.domain,_="h"===r.orientation,O=r.node.pad,y=r.node.thickness,S={justify:c.sankeyJustify,left:c.sankeyLeft,right:c.sankeyRight,center:c.sankeyCenter}[r.node.align],v=e.width*(f.x[1]-f.x[0]),g=e.height*(f.y[1]-f.y[0]),A=p._nodes,M=p._links,E=p.circular;(m=E?L.sankeyCircular().circularLinkGap(0):c.sankey()).iterations(s.sankeyIterations).size(_?[v,g]:[g,v]).nodeWidth(y).nodePadding(O).nodeId(function(e){return e.pointNumber}).nodeAlign(S).nodes(A).links(M),d=m();for(C in m.nodePadding()<O&&o.warn("node.pad was reduced to ",m.nodePadding()," to fit within the figure."),p._groupLookup){k=parseInt(p._groupLookup[C]);for(i=0;i<d.nodes.length;i++)if(d.nodes[i].pointNumber===k){h=d.nodes[i];break}h&&(w={pointNumber:parseInt(C),x0:h.x0,x1:h.x1,y0:h.y0,y1:h.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},d.nodes.unshift(w),h.childrenNodes.unshift(w))}if(function(){for(i=0;i<d.nodes.length;i++){t=d.nodes[i],n={};for(l=0;l<t.targetLinks.length;l++)s=(e=t.targetLinks[l]).source.pointNumber+":"+e.target.pointNumber,n.hasOwnProperty(s)||(n[s]=[]),n[s].push(e);h=Object.keys(n);for(l=0;l<h.length;l++){var e,t,n,s,h,m,f,o=n[s=h[l]],r=0,c={};for(u=0;u<o.length;u++)c[(e=o[u]).label]||(c[e.label]=0),c[e.label]+=e.value,r+=e.value;for(u=0;u<o.length;u++)(e=o[u]).flow={value:r,labelConcentration:c[e.label]/r,concentration:e.value/r,links:o},e.concentrationscale&&(e.color=a(e.concentrationscale(e.flow.labelConcentration)))}m=0;for(l=0;l<t.sourceLinks.length;l++)m+=t.sourceLinks[l].value;for(l=0;l<t.sourceLinks.length;l++)(e=t.sourceLinks[l]).concentrationOut=e.value/m;f=0;for(l=0;l<t.targetLinks.length;l++)f+=t.targetLinks[l].value;for(l=0;l<t.targetLinks.length;l++)(e=t.targetLinks[l]).concenrationIn=e.value/f}}(),r.node.x.length&&r.node.y.length){for(i=0;i<Math.min(r.node.x.length,r.node.y.length,d.nodes.length);i++)r.node.x[i]&&r.node.y[i]&&(j=[r.node.x[i]*v,r.node.y[i]*g],d.nodes[i].x0=j[0]-y/2,d.nodes[i].x1=j[0]+y/2,x=d.nodes[i].y1-d.nodes[i].y0,d.nodes[i].y0=j[1]-x/2,d.nodes[i].y1=j[1]+x/2);"snap"===r.arrangement&&function(e){var t,o,c,a=e.map(function(e,t){return{x0:e.x0,index:t}}).sort(function(e,t){return e.x0-t.x0}),n=[],s=-1,r=-1/0;for(i=0;i<a.length;i++)t=e[a[i].index],t.x0>r+y&&(s+=1,c=t.x0),r=t.x0,n[s]||(n[s]=[]),n[s].push(t),o=c-t.x0,t.x0+=o,t.x1+=o;return n}(A=d.nodes).forEach(function(e){var t,n,s,o=0,i=e.length;for(e.sort(function(e,t){return e.y0-t.y0}),n=0;n<i;++n)(t=e[n]).y0>=o||(s=o-t.y0)>1e-6&&(t.y0+=s,t.y1+=s),o=t.y1+O}),m.update(d)}return{circular:E,key:n,trace:r,guid:o.randstr(),horizontal:_,width:v,height:g,nodePad:r.node.pad,nodeLineColor:r.node.line.color,nodeLineWidth:r.node.line.width,linkLineColor:r.link.line.color,linkLineWidth:r.link.line.width,linkArrowLength:r.link.arrowlen,valueFormat:r.valueformat,valueSuffix:r.valuesuffix,textFont:r.textfont,translateX:f.x[0]*e.width+e.margin.l,translateY:e.height-f.y[1]*e.height+e.margin.t,dragParallel:_?g:v,dragPerpendicular:_?v:g,arrangement:r.arrangement,sankey:m,graph:d,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function P(e,t,n){var s=a(t.color),o=a(t.hovercolor),r=t.source.label+"|"+t.target.label+"__"+n;return t.trace=e.trace,t.curveNumber=e.trace.index,{circular:e.circular,key:r,traceId:e.key,pointNumber:t.pointNumber,link:t,tinyColorHue:i.tinyRGB(s),tinyColorAlpha:s.getAlpha(),tinyColorHoverHue:i.tinyRGB(o),tinyColorHoverAlpha:o.getAlpha(),linkPath:f,linkLineColor:e.linkLineColor,linkLineWidth:e.linkLineWidth,linkArrowLength:e.linkArrowLength,valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,parent:e,interactionState:e.interactionState,flow:t.flow}}function f(){return function(e){if(t=e.linkArrowLength,e.link.circular)return function(e,t){var s=e.width/2,n=e.circularPathData;return"top"===e.circularLinkType?"M "+(n.targetX-t)+" "+(n.targetY+s)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY+s)+"A"+(n.rightLargeArcRadius+s)+" "+(n.rightSmallArcRadius+s)+" 0 0 1 "+(n.rightFullExtent-s-t)+" "+(n.targetY-n.rightSmallArcRadius)+"L"+(n.rightFullExtent-s-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+s)+" "+(n.rightLargeArcRadius+s)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-s)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent-s)+"A"+(n.leftLargeArcRadius+s)+" "+(n.leftLargeArcRadius+s)+" 0 0 1 "+(n.leftFullExtent+s)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+s)+" "+(n.sourceY-n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+s)+" "+(n.leftSmallArcRadius+s)+" 0 0 1 "+n.leftInnerExtent+" "+(n.sourceY+s)+"L"+n.sourceX+" "+(n.sourceY+s)+"L"+n.sourceX+" "+(n.sourceY-s)+"L"+n.leftInnerExtent+" "+(n.sourceY-s)+"A"+(n.leftLargeArcRadius-s)+" "+(n.leftSmallArcRadius-s)+" 0 0 0 "+(n.leftFullExtent-s)+" "+(n.sourceY-n.leftSmallArcRadius)+"L"+(n.leftFullExtent-s)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-s)+" "+(n.leftLargeArcRadius-s)+" 0 0 0 "+n.leftInnerExtent+" "+(n.verticalFullExtent+s)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+s)+"A"+(n.rightLargeArcRadius-s)+" "+(n.rightLargeArcRadius-s)+" 0 0 0 "+(n.rightFullExtent+s-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+s-t)+" "+(n.targetY-n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-s)+" "+(n.rightSmallArcRadius-s)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.targetY-s)+"L"+(n.targetX-t)+" "+(n.targetY-s)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z":"M "+(n.targetX-t)+" "+(n.targetY-s)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY-s)+"A"+(n.rightLargeArcRadius+s)+" "+(n.rightSmallArcRadius+s)+" 0 0 0 "+(n.rightFullExtent-s-t)+" "+(n.targetY+n.rightSmallArcRadius)+"L"+(n.rightFullExtent-s-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+s)+" "+(n.rightLargeArcRadius+s)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+s)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent+s)+"A"+(n.leftLargeArcRadius+s)+" "+(n.leftLargeArcRadius+s)+" 0 0 0 "+(n.leftFullExtent+s)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+s)+" "+(n.sourceY+n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+s)+" "+(n.leftSmallArcRadius+s)+" 0 0 0 "+n.leftInnerExtent+" "+(n.sourceY-s)+"L"+n.sourceX+" "+(n.sourceY-s)+"L"+n.sourceX+" "+(n.sourceY+s)+"L"+n.leftInnerExtent+" "+(n.sourceY+s)+"A"+(n.leftLargeArcRadius-s)+" "+(n.leftSmallArcRadius-s)+" 0 0 1 "+(n.leftFullExtent-s)+" "+(n.sourceY+n.leftSmallArcRadius)+"L"+(n.leftFullExtent-s)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-s)+" "+(n.leftLargeArcRadius-s)+" 0 0 1 "+n.leftInnerExtent+" "+(n.verticalFullExtent-s)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-s)+"A"+(n.rightLargeArcRadius-s)+" "+(n.rightLargeArcRadius-s)+" 0 0 1 "+(n.rightFullExtent+s-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+s-t)+" "+(n.targetY+n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-s)+" "+(n.rightSmallArcRadius-s)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.targetY+s)+"L"+(n.targetX-t)+" "+(n.targetY+s)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z"}(e.link,t);s=Math.abs((e.link.target.x0-e.link.source.x1)/2),t>s&&(t=s);var t,s,o=e.link.source.x1,n=e.link.target.x0-t,d=R(o,n),c=d(.5),r=d(.5),a=e.link.y0-e.link.width/2,l=e.link.y0+e.link.width/2,i=e.link.y1-e.link.width/2,u=e.link.y1+e.link.width/2,h="M"+o+","+a,m="C"+c+","+a+" "+r+","+i+" "+n+","+i,f="C"+r+","+u+" "+c+","+l+" "+o+","+l,p=t>0?"L"+(n+t)+","+(i+e.link.width/2):"";return h+m+(p+="L"+n+","+u)+f+"Z"}}function T(e,t){var n=a(t.color),c=s.nodePadAcross,l=e.nodePad/2;t.dx=t.x1-t.x0,t.dy=t.y1-t.y0;var d=t.dx,u=Math.max(.5,t.dy),r="node_"+t.pointNumber;return t.group&&(r=o.randstr()),t.trace=e.trace,t.curveNumber=e.trace.index,{index:t.pointNumber,key:r,partOfGroup:t.partOfGroup||!1,group:t.group,traceId:e.key,trace:e.trace,node:t,nodePad:e.nodePad,nodeLineColor:e.nodeLineColor,nodeLineWidth:e.nodeLineWidth,textFont:e.textFont,size:e.horizontal?e.height:e.width,visibleWidth:Math.ceil(d),visibleHeight:u,zoneX:-c,zoneY:-l,zoneWidth:d+2*c,zoneHeight:u+2*l,labelY:e.horizontal?t.dy/2+1:t.dx/2+1,left:1===t.originalLayer,sizeAcross:e.width,forceLayouts:e.forceLayouts,horizontal:e.horizontal,darkBackground:n.getBrightness()<=128,tinyColorHue:i.tinyRGB(n),tinyColorAlpha:n.getAlpha(),valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,graph:e.graph,arrangement:e.arrangement,uniqueNodeLabelPathId:[e.guid,e.key,r].join("_"),interactionState:e.interactionState,figure:e}}function g(e){e.attr("transform",function(e){return m(e.node.x0.toFixed(3),e.node.y0.toFixed(3))})}function S(e){e.call(g)}function O(e,t){e.call(S),t.attr("d",f())}function w(e){e.attr("width",function(e){return e.node.x1-e.node.x0}).attr("height",function(e){return e.visibleHeight})}function h(e){return e.link.width>1||e.linkLineWidth>0}function x(e){return m(e.translateX,e.translateY)+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function v(e,t,n){e.on(".basic",null).on("mouseover.basic",function(e){e.interactionState.dragInProgress||e.partOfGroup||(n.hover(this,e,t),e.interactionState.hovered=[this,e])}).on("mousemove.basic",function(e){e.interactionState.dragInProgress||e.partOfGroup||(n.follow(this,e),e.interactionState.hovered=[this,e])}).on("mouseout.basic",function(e){e.interactionState.dragInProgress||e.partOfGroup||(n.unhover(this,e,t),e.interactionState.hovered=!1)}).on("click.basic",function(e){e.interactionState.hovered&&(n.unhover(this,e,t),e.interactionState.hovered=!1),e.interactionState.dragInProgress||e.partOfGroup||n.select(this,e,t)})}function N(e,t,n,i){var a=r.behavior.drag().origin(function(e){return{x:e.node.x0+e.visibleWidth/2,y:e.node.y0+e.visibleHeight/2}}).on("dragstart",function(a){if("fixed"!==a.arrangement&&(o.ensureSingle(i._fullLayout._infolayer,"g","dragcover",function(e){i._fullLayout._dragCover=e}),o.raiseToTop(this),a.interactionState.dragInProgress=a.node,y(a.node),a.interactionState.hovered&&(n.nodeEvents.unhover.apply(0,a.interactionState.hovered),a.interactionState.hovered=!1),"snap"===a.arrangement)){var r=a.traceId+"|"+a.key;a.forceLayouts[r]?a.forceLayouts[r].alpha(1):function(e,t,n){!function(e){for(var t=0;t<e.length;t++)e[t].y=(e[t].y0+e[t].y1)/2,e[t].x=(e[t].x0+e[t].x1)/2}(n.graph.nodes);var i=n.graph.nodes.filter(function(e){return e.originalX===n.node.originalX}).filter(function(e){return!e.partOfGroup});n.forceLayouts[t]=C.forceSimulation(i).alphaDecay(0).force("collide",C.forceCollide().radius(function(e){return e.dy/2+n.nodePad/2}).strength(1).iterations(s.forceIterations)).force("constrain",function(e,t,n,o){return function(){for(var e,i=0,a=0;a<n.length;a++)e=n[a],e===o.interactionState.dragInProgress?(e.x=e.lastDraggedX,e.y=e.lastDraggedY):(e.vx=(e.originalX-e.x)/s.forceTicksPerFrame,e.y=Math.min(o.size-e.dy/2,Math.max(e.dy/2,e.y))),i=Math.max(i,Math.abs(e.vx),Math.abs(e.vy));!o.interactionState.dragInProgress&&i<.1&&o.forceLayouts[t].alpha()>0&&o.forceLayouts[t].alpha(0)}}(0,t,i,n)).stop()}(0,r,a),function(e,t,n,o,i){window.requestAnimationFrame(function a(){for(r=0;r<s.forceTicksPerFrame;r++)n.forceLayouts[o].tick();if(function(e){for(var t=0;t<e.length;t++)e[t].y0=e[t].y-e[t].dy/2,e[t].y1=e[t].y0+e[t].dy,e[t].x0=e[t].x-e[t].dx/2,e[t].x1=e[t].x0+e[t].dx}(n.graph.nodes),n.sankey.update(n.graph),O(e.filter(E(n)),t),n.forceLayouts[o].alpha()>0)window.requestAnimationFrame(a);else{var r,c=n.node.originalX;n.node.x0=c-n.visibleWidth/2,n.node.x1=c+n.visibleWidth/2,j(n,i)}})}(e,t,a,r,i)}}).on("drag",function(n){if("fixed"!==n.arrangement){var o=r.event.x,s=r.event.y;"snap"===n.arrangement?(n.node.x0=o-n.visibleWidth/2,n.node.x1=o+n.visibleWidth/2,n.node.y0=s-n.visibleHeight/2,n.node.y1=s+n.visibleHeight/2):("freeform"===n.arrangement&&(n.node.x0=o-n.visibleWidth/2,n.node.x1=o+n.visibleWidth/2),s=Math.max(0,Math.min(n.size-n.visibleHeight/2,s)),n.node.y0=s-n.visibleHeight/2,n.node.y1=s+n.visibleHeight/2),y(n.node),"snap"!==n.arrangement&&(n.sankey.update(n.graph),O(e.filter(E(n)),t))}}).on("dragend",function(e){if("fixed"!==e.arrangement){e.interactionState.dragInProgress=!1;for(var t=0;t<e.node.childrenNodes.length;t++)e.node.childrenNodes[t].x=e.node.x,e.node.childrenNodes[t].y=e.node.y;"snap"!==e.arrangement&&j(e,i)}});e.on(".drag",null).call(a)}function j(e,t){for(var i,a,s=[],o=[],n=0;n<e.graph.nodes.length;n++)i=(e.graph.nodes[n].x0+e.graph.nodes[n].x1)/2,a=(e.graph.nodes[n].y0+e.graph.nodes[n].y1)/2,s.push(i/e.figure.width),o.push(a/e.figure.height);k.call("_guiRestyle",t,{"node.x":[s],"node.y":[o]},e.trace.index).then(function(){t._fullLayout._dragCover&&t._fullLayout._dragCover.remove()})}function y(e){e.lastDraggedX=e.x0+e.dx/2,e.lastDraggedY=e.y0+e.dy/2}function E(e){return function(t){return t.node.originalX===e.node.originalX}}e.exports=function(e,t,n,c,p){L=e._context.staticPlot,O=!1,o.ensureSingle(e._fullLayout._infolayer,"g","first-render",function(){O=!0});var y,_,O,C,E,k,S,L,R=e._fullLayout._dragCover,H=n.filter(function(e){return b(e).trace.visible}).map(A.bind(null,c)),j=t.selectAll("."+s.cn.sankey).data(H,l);j.exit().remove(),j.enter().append("g").classed(s.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",L?"none":"auto").attr("transform",x),j.each(function(t,n){e._fullData[n]._sankey=t;var s="bgsankey-"+t.trace.uid+"-"+n;o.ensureSingle(e._fullLayout._draggers,"rect",s),e._fullData[n]._bgRect=r.select("."+s),e._fullData[n]._bgRect.style("pointer-events",L?"none":"all").attr("width",t.width).attr("height",t.height).attr("x",t.translateX).attr("y",t.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),j.transition().ease(s.ease).duration(s.duration).attr("transform",x),S=j.selectAll("."+s.cn.sankeyLinks).data(d,l),S.enter().append("g").classed(s.cn.sankeyLinks,!0).style("fill","none"),_=S.selectAll("."+s.cn.sankeyLink).data(function(e){return e.graph.links.filter(function(e){return e.value}).map(P.bind(null,e))},l),_.enter().append("path").classed(s.cn.sankeyLink,!0).call(v,j,p.linkEvents),_.style("stroke",function(e){return h(e)?i.tinyRGB(a(e.linkLineColor)):e.tinyColorHue}).style("stroke-opacity",function(e){return h(e)?i.opacity(e.linkLineColor):e.tinyColorAlpha}).style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha}).style("stroke-width",function(e){return h(e)?e.linkLineWidth:1}).attr("d",f()),_.style("opacity",function(){return e._context.staticPlot||O||R?1:0}).transition().ease(s.ease).duration(s.duration).style("opacity",1),_.exit().transition().ease(s.ease).duration(s.duration).style("opacity",0).remove(),E=j.selectAll("."+s.cn.sankeyNodeSet).data(d,l),E.enter().append("g").classed(s.cn.sankeyNodeSet,!0),E.style("cursor",function(e){switch(e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}}),y=E.selectAll("."+s.cn.sankeyNode).data(function(e){var t=e.graph.nodes;return function(e){var t,n=[];for(t=0;t<e.length;t++)e[t].originalX=(e[t].x0+e[t].x1)/2,e[t].originalY=(e[t].y0+e[t].y1)/2,-1===n.indexOf(e[t].originalX)&&n.push(e[t].originalX);for(n.sort(function(e,t){return e-t}),t=0;t<e.length;t++)e[t].originalLayerIndex=n.indexOf(e[t].originalX),e[t].originalLayer=e[t].originalLayerIndex/(n.length-1)}(t),t.map(T.bind(null,e))},l),y.enter().append("g").classed(s.cn.sankeyNode,!0).call(g).style("opacity",function(t){return!e._context.staticPlot&&!O||t.partOfGroup?0:1}),y.call(v,j,p.nodeEvents).call(N,_,p,e),y.transition().ease(s.ease).duration(s.duration).call(g).style("opacity",function(e){return e.partOfGroup?0:1}),y.exit().transition().ease(s.ease).duration(s.duration).style("opacity",0).remove(),C=y.selectAll("."+s.cn.nodeRect).data(d),C.enter().append("rect").classed(s.cn.nodeRect,!0).call(w),C.style("stroke-width",function(e){return e.nodeLineWidth}).style("stroke",function(e){return i.tinyRGB(a(e.nodeLineColor))}).style("stroke-opacity",function(e){return i.opacity(e.nodeLineColor)}).style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha}),C.transition().ease(s.ease).duration(s.duration).call(w),k=y.selectAll("."+s.cn.nodeLabel).data(d),k.enter().append("text").classed(s.cn.nodeLabel,!0).style("cursor","default"),k.attr("data-notex",1).text(function(e){return e.node.label}).each(function(t){var n=r.select(this);D.font(n,t.textFont),u.convertToTspans(n,e)}).style("text-shadow",u.makeTextShadow(e._fullLayout.paper_bgcolor)).attr("text-anchor",function(e){return e.horizontal&&e.left?"end":"start"}).attr("transform",function(e){var s,o=r.select(this),i=u.lineCount(o),a=e.textFont.size*((i-1)*M-F),t=e.nodeLineWidth/2+3,n=((e.horizontal?e.visibleHeight:e.visibleWidth)-a)/2;return e.horizontal&&(e.left?t=-t:t+=e.visibleWidth),s=e.horizontal?"":"scale(-1,1)"+z(90),m(e.horizontal?t:n,e.horizontal?n:t)+s}),k.transition().ease(s.ease).duration(s.duration)}},81128:function(e){"use strict";e.exports=function(e,t){for(var n,o,i=[],a=e.cd[0].trace,r=a._sankey.graph.nodes,s=0;s<r.length;s++)n=r[s],n.partOfGroup||(o=[(n.x0+n.x1)/2,(n.y0+n.y1)/2],"v"===a.orientation&&o.reverse(),t&&t.contains(o,!1,s,e)&&i.push({pointNumber:n.pointNumber}));return i}},20148:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){for(var n,o,a,i=0;i<e.length;i++)e[i].i=i;s.mergeArray(t.text,e,"tx"),s.mergeArray(t.texttemplate,e,"txt"),s.mergeArray(t.hovertext,e,"htx"),s.mergeArray(t.customdata,e,"data"),s.mergeArray(t.textposition,e,"tp"),t.textfont&&(s.mergeArrayCastPositive(t.textfont.size,e,"ts"),s.mergeArray(t.textfont.color,e,"tc"),s.mergeArray(t.textfont.family,e,"tf"),s.mergeArray(t.textfont.weight,e,"tw"),s.mergeArray(t.textfont.style,e,"ty"),s.mergeArray(t.textfont.variant,e,"tv")),n=t.marker,n&&(s.mergeArrayCastPositive(n.size,e,"ms"),s.mergeArrayCastPositive(n.opacity,e,"mo"),s.mergeArray(n.symbol,e,"mx"),s.mergeArray(n.angle,e,"ma"),s.mergeArray(n.standoff,e,"mf"),s.mergeArray(n.color,e,"mc"),a=n.line,n.line&&(s.mergeArray(a.color,e,"mlc"),s.mergeArrayCastPositive(a.width,e,"mlw")),o=n.gradient,o&&"none"!==o.type&&(s.mergeArray(o.type,e,"mgt"),s.mergeArray(o.color,e,"mgc")))}},52904:function(e,t,n){"use strict";var o=n(29736).axisHoverFormat,a=n(21776).Gw,r=n(21776).Ks,i=n(49084),c=n(25376),l=n(98192).u,d=n(98192).c,u=n(43616),h=n(88200),s=n(92880).extendFlat,m=n(98304);e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:o("x"),yhoverformat:o("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:a({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:r({},{keys:h.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:s({},l,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:m(!0),fillgradient:s({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:d,marker:s({symbol:{valType:"enumerated",values:u.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:s({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},i("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},i("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:c({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(e,t,n){"use strict";var c=n(38248),i=n(3400),s=n(54460),d=n(1220),r=n(39032).BADNUM,o=n(43028),p=n(90136),g=n(20148),f=n(4500);function h(e,t,n,i,r,c,d){var h,m,f,p=t._length,b=e._fullLayout,j=n._id,y=i._id,g=b._firstScatter[l(t)]===t.uid,v=(a(t,b,n,i)||{}).orientation,u=t.fill;n._minDtick=0,i._minDtick=0,h={padded:!0},m={padded:!0},d&&(h.ppad=m.ppad=d),f=p<2||r[0]!==r[p-1]||c[0]!==c[p-1],f&&("tozerox"===u||"tonextx"===u&&(g||"h"===v))?h.tozero=!0:(t.error_y||{}).visible||"tonexty"!==u&&"tozeroy"!==u&&(o.hasMarkers(t)||o.hasText(t))||(h.padded=!1,h.ppad=0),f&&("tozeroy"===u||"tonexty"===u&&(g||"v"===v))?m.tozero=!0:"tonextx"!==u&&"tozerox"!==u||(m.padded=!1),j&&(t._extremes[j]=s.findExtremes(n,r,h)),y&&(t._extremes[y]=s.findExtremes(i,c,m))}function m(e,t){if(o.hasMarkers(e)){if(a=e.marker,r=1.6*(e.marker.sizeref||1),l="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)},i.isArrayOrTypedArray(a.size)){c={type:"linear"},s.setConvert(c);for(var a,r,c,l,u=c.makeCalcdata(e.marker,"size"),d=new Array(t),n=0;n<t;n++)d[n]=l(u[n]);return d}return l(a.size)}}function u(e,t){var n=l(t),s=e._firstScatter;s[n]||(s[n]=t.uid)}function l(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function a(e,t,n,s){if(o=e.stackgroup,o){var o,i=t._scatterStackOpts[n._id+s._id][o],a="v"===i.orientation?s:n;return"linear"===a.type||"log"===a.type?i:void 0}}e.exports={calc:function(e,t){var n,v,b,j,_,O,x,F,R,P,H,L=e._fullLayout,w=t._xA=s.getFromId(e,t.xaxis||"x","x"),k=t._yA=s.getFromId(e,t.yaxis||"y","y"),N=w.makeCalcdata(t,"x"),D=k.makeCalcdata(t,"y"),A=d(t,w,"x",N),S=d(t,k,"y",D),C=A.vals,E=S.vals,M=t._length,o=new Array(M),T=t.ids,y=a(t,L,w,k),z=!1;u(L,t),x="x",O="y",y?(i.pushUnique(y.traceIndices,t._expandedIndex),(F="v"===y.orientation)?(O="s",b="x"):(x="s",b="y"),H="interpolate"===y.stackgaps):h(e,t,w,k,C,E,m(t,M)),R=!!t.xperiodalignment,P=!!t.yperiodalignment;for(n=0;n<M;n++){var l=o[n]={},I=c(C[n]),B=c(E[n]);I&&B?(l[x]=C[n],l[O]=E[n],R&&(l.orig_x=N[n],l.xEnd=A.ends[n],l.xStart=A.starts[n]),P&&(l.orig_y=D[n],l.yEnd=S.ends[n],l.yStart=S.starts[n])):y&&(F?I:B)?(l[b]=F?C[n]:E[n],l.gap=!0,H?(l.s=r,z=!0):l.s=0):l[x]=l[O]=r,T&&(l.id=String(T[n]))}if(g(o,t),p(e,t),f(o,t),y){for(n=0;n<o.length;)o[n][b]===r?o.splice(n,1):n++;if(i.sort(o,function(e,t){return e[b]-t[b]||e.i-t.i}),z){for(n=0;n<o.length-1&&o[n].gap;)n++;for((_=o[n].s)||(_=o[n].s=0),v=0;v<n;v++)o[v].s=_;for(j=o.length-1;j>n&&o[j].gap;)j--;for(_=o[j].s,v=o.length-1;v>j;v--)o[v].s=_;for(;n<j;)if(o[++n].gap){for(v=n+1;o[v].gap;)v++;for(var V=o[n-1][b],$=o[n-1].s,W=(o[v].s-$)/(o[v][b]-V);n<v;)o[n].s=$+(o[n][b]-V)*W,n++}}}return o},calcMarkerSize:m,calcAxisExpansion:h,setFirstScatter:u,getStackOpts:a}},4500:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){s.isArrayOrTypedArray(t.selectedpoints)&&s.tagSelected(e,t)}},90136:function(e,t,n){"use strict";var s=n(94288).hasColorscale,o=n(47128),i=n(43028);e.exports=function(e,t){i.hasLines(t)&&s(t,"line")&&o(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(t)&&(s(t,"marker")&&o(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),s(t,"marker.line")&&o(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(e){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(e,t,n){"use strict";var o=n(16356),i=n(96376).setGroupPositions;function s(e,t,n,s,o,i,a){o[s]=!0;var c,r={i:null,gap:!0,s:0};r[a]=n,e.splice(t,0,r),t&&n===e[t-1][a]?(c=e[t-1],r.s=c.s,r.i=c.i,r.gap=c.gap):i&&(r.s=function(e,t,n,s){var o=e[t-1],i=e[t+1];return i?o?o.s+(i.s-o.s)*(n-o[s])/(i[s]-o[s]):i.s:o.s}(e,t,n,a)),t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}e.exports=function(e,t){"group"===e._fullLayout.scattermode&&function(e,t){for(var n,a,o=t.xaxis,r=t.yaxis,u=e._fullLayout,h=e._fullData,c=e.calcdata,l=[],d=[],s=0;s<h.length;s++)n=h[s],!0===n.visible&&"scatter"===n.type&&n.xaxis===o._id&&n.yaxis===r._id&&("h"===n.orientation?l.push(c[s]):"v"===n.orientation&&d.push(c[s]));a={mode:u.scattermode,gap:u.scattergap},i(e,o,r,d,a),i(e,r,o,l,a)}(e,t);var n,a,r,c,l,d,u,h,m,f,p,v,b,j,y,_,w,O,x,C,k,A,S,D,z=t.xaxis,T=t.yaxis,N=z._id+T._id,E=e._fullLayout._scatterStackOpts[N];if(E){f=e.calcdata;for(D in E)if(c=(j=E[D]).traceIndices,c.length){for(w="interpolate"===j.stackgaps,S=j.groupnorm,"v"===j.orientation?(m="x",_="y"):(m="y",_="x"),p=new Array(c.length),n=0;n<p.length;n++)p[n]=!1;h=f[c[0]],d=new Array(h.length);for(n=0;n<h.length;n++)d[n]=h[n][m];for(n=1;n<c.length;n++){for(r=f[c[n]],a=l=0;a<r.length;a++){for(v=r[a][m];v>d[l]&&l<d.length;l++)s(r,a,d[l],n,p,w,m),a++;if(v!==d[l]){for(y=0;y<n;y++)s(f[c[y]],l,v,y,p,w,m);d.splice(l,0,v)}l++}for(;l<d.length;l++)s(r,a,d[l],n,p,w,m),a++}u=d.length;for(a=0;a<h.length;a++){for(b=h[a][_]=h[a].s,n=1;n<c.length;n++)(r=f[c[n]])[0].trace._rawLength=r[0].trace._length,r[0].trace._length=u,b+=r[a].s,r[a][_]=b;if(S)for(C=("fraction"===S?b:b/100)||1,n=0;n<c.length;n++)O=f[c[n]][a],O[_]/=C,O.sNorm=O.s/C}for(n=0;n<c.length;n++){var M=(r=f[c[n]])[0].trace,g=o.calcMarkerSize(M,M._rawLength),F=Array.isArray(g);if(g&&p[n]||F){k=g;for(g=new Array(u),a=0;a<u;a++)g[a]=r[a].gap?0:F?k[r[a].i]:k}A=new Array(u),x=new Array(u);for(a=0;a<u;a++)A[a]=r[a].x,x[a]=r[a].y;o.calcAxisExpansion(e,M,z,T,A,x,g),r[0].t.orientation=j.orientation}}}}},35036:function(e,t,n){"use strict";var s=n(3400),o=n(20011),i=n(52904);e.exports=function(e,t){function h(e){return s.coerce(a._input,a,i,e)}if("group"===t.scattermode)for(n=0;n<e.length;n++)"scatter"===(a=e[n]).type&&(u=a._input,o(u,a,t,h));for(n=0;n<e.length;n++){var n,a,c,l,d,u,r=e[n];if("scatter"===r.type&&(c=r.fill,"none"!==c&&"toself"!==c&&(r.opacity=void 0,"tonexty"===c||"tonextx"===c)))for(d=n-1;d>=0;d--)if(l=e[d],"scatter"===l.type&&l.xaxis===r.xaxis&&l.yaxis===r.yaxis){l.opacity=void 0;break}}}},18800:function(e,t,n){"use strict";var i=n(3400),m=n(24040),d=n(52904),r=n(88200),s=n(43028),c=n(43980),l=n(31147),a=n(43912),u=n(74428),h=n(66828),o=n(11731),f=n(124),p=n(70840),g=n(3400).coercePattern;e.exports=function(e,t,n,v){function b(n,s){return i.coerce(e,t,d,n,s)}if(_=c(e,t,v,b),_||(t.visible=!1),t.visible){l(e,t,v,b),b("xhoverformat"),b("yhoverformat"),b("zorder"),j=a(e,t,v,b),"group"===v.scattermode&&void 0===t.orientation&&b("orientation","v"),O=!j&&_<r.PTS_LINESONLY?"lines+markers":"lines",b("text"),b("hovertext"),b("mode",O),s.hasMarkers(t)&&u(e,t,n,v,b,{gradient:!0}),s.hasLines(t)&&(h(e,t,n,v,b,{backoff:!0}),o(e,t,b),b("connectgaps"),b("line.simplify")),s.hasText(t)&&(b("texttemplate"),f(e,t,v,b)),y=[],(s.hasMarkers(t)||s.hasText(t))&&(b("cliponaxis"),b("marker.maxdisplayed"),y.push("points")),b("fill",j?j.fillDflt:"none"),"none"!==t.fill&&(p(e,t,n,b,{moduleHasFillgradient:!0}),s.hasLines(t)||o(e,t,b),g(b,"fillpattern",t.fillcolor,!1));var j,y,_,w,O,x=(t.line||{}).color,C=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||y.push("fills"),b("hoveron",y.join("+")||"points"),"fills"!==t.hoveron&&b("hovertemplate"),w=m.getComponentMethod("errorbars","supplyDefaults"),w(e,t,x||C||n,{axis:"y"}),w(e,t,x||C||n,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(t,b)}}},98304:function(e){"use strict";e.exports=function(){return{valType:"color",editType:"style",anim:!0}}},70840:function(e,t,n){"use strict";var s=n(76308),o=n(3400).isArrayOrTypedArray;e.exports=function(e,t,n,i,a){if(a||(a={}),r=!1,t.marker){var r,d,u,c=t.marker.color,l=(t.marker.line||{}).color;c&&!o(c)?r=c:l&&!o(l)&&(r=l)}a.moduleHasFillgradient&&"none"!==i("fillgradient.type")&&(i("fillgradient.start"),i("fillgradient.stop"),d=i("fillgradient.colorscale"),d&&(u=function(e){for(var o,n=s.interpolate(e[0][1],e[1][1],.5),t=2;t<e.length;t++)o=s.interpolate(e[t-1][1],e[t][1],.5),n=s.interpolate(n,o,e[t-1][0]/e[t][0]);return n}(d))),i("fillcolor",s.addOpacity((t.line||{}).color||r||u||n,.5))}},76688:function(e,t,n){"use strict";var s=n(54460);e.exports=function(e,t,n){var o,i={},r={_fullLayout:n},c=s.getFromTrace(r,t,"x"),l=s.getFromTrace(r,t,"y"),a=e.orig_x;return void 0===a&&(a=e.x),o=e.orig_y,void 0===o&&(o=e.y),i.xLabel=s.tickText(c,c.c2l(a),!0).text,i.yLabel=s.tickText(l,l.c2l(o),!0).text,i}},44928:function(e,t,n){"use strict";var s=n(76308),o=n(43028);e.exports=function(e,t){if("lines"===e.mode)return(n=e.line.color)&&s.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var n,i,a=t.mcc||(e.marker||{}).color,r=t.mlcc||((e.marker||{}).line||{}).color;return(i=a&&s.opacity(a)?a:r&&s.opacity(r)&&(t.mlw||((e.marker||{}).line||{}).width)?r:"")?s.opacity(i)<.3?s.addOpacity(i,.3):i:(n=(e.line||{}).color)&&s.opacity(n)&&o.hasLines(e)&&e.line.width?n:e.fillcolor}},20011:function(e,t,n){"use strict";var s=n(71888).getAxisGroup;e.exports=function(e,t,n,o){var i,u=t.orientation,f=t[{v:"x",h:"y"}[u]+"axis"],h=s(n,f)+u,m=n._alignmentOpts||{},d=o("alignmentgroup"),a=m[h];a||(a=m[h]={}),i=a[d],i?i.traces.push(t):i=a[d]={traces:[t],alignmentIndex:Object.keys(a).length,offsetGroups:{}};var r=o("offsetgroup"),c=i.offsetGroups,l=c[r];r&&(l||(l=c[r]={offsetIndex:Object.keys(c).length}),t._offsetIndex=l.offsetIndex)}},98723:function(e,t,n){"use strict";var s=n(3400),i=n(93024),a=n(24040),r=n(44928),o=n(76308),c=s.fillText;e.exports=function(e,t,n,l){var f,y,w,E,b=e.cd,d=b[0].trace,m=e.xa,p=e.ya,g=m.c2p(t),v=p.c2p(n),h=[g,v],S=d.hoveron||"",C=-1!==d.mode.indexOf("markers")?3:.5,M=!!d.xperiodalignment,z=!!d.yperiodalignment;if(-1!==S.indexOf("points")&&(w=function(e){var t=Math.max(C,e.mrc||0),n=m.c2p(e.x)-g,s=p.c2p(e.y)-v;return Math.max(Math.sqrt(n*n+s*s)-t,1-C/t)},E=i.getDistanceFunction(l,function(e){if(M)return n=m.c2p(e.xStart),s=m.c2p(e.xEnd),g>=Math.min(n,s)&&g<=Math.max(n,s)?0:1/0;var n,s,t=Math.max(3,e.mrc||0),i=1-1/t,o=Math.abs(m.c2p(e.x)-g);return o<t?i*o/t:o-t+i},function(e){if(z)return n=p.c2p(e.yStart),s=p.c2p(e.yEnd),v>=Math.min(n,s)&&v<=Math.max(n,s)?0:1/0;var n,s,t=Math.max(3,e.mrc||0),i=1-1/t,o=Math.abs(p.c2p(e.y)-v);return o<t?i*o/t:o-t+i},w),i.getClosest(b,E,e),!1!==e.index)){var u=b[e.index],O=m.c2p(u.x,!0),x=p.c2p(u.y,!0),j=u.mrc||1;e.index=u.i;var _=b[0].t.orientation,k=_&&(u.sNorm||u.s),F="h"===_?k:void 0!==u.orig_x?u.orig_x:u.x,T="v"===_?k:void 0!==u.orig_y?u.orig_y:u.y;return s.extendFlat(e,{color:r(d,u),x0:O-j,x1:O+j,xLabelVal:F,y0:x-j,y1:x+j,yLabelVal:T,spikeDistance:w(u),hovertemplate:d.hovertemplate}),c(u,d,e),a.getComponentMethod("errorbars","hoverInfo")(u,d,e),[e]}function A(e){if(!e)return!1;var t,s,n=e.node();try{return s=new DOMPoint(h[0],h[1]),n.isPointInFill(s)}catch{return t=n.ownerSVGElement.createSVGPoint(),t.x=h[0],t.y=h[1],n.isPointInFill(t)}}if(-1!==S.indexOf("fills")&&d._fillElement&&A(d._fillElement)&&!A(d._fillExclusionElement))return f=function(e){var t,n,s,o,i,l,f,g,v,b,d=[],u=1/0,a=-1/0,r=1/0,c=-1/0;for(t=0;t<e.length;t++)i=e[t],i.contains(h)&&(d.push(i),r=Math.min(r,i.ymin),c=Math.max(c,i.ymax));if(0===d.length)return null;for(s=((r=Math.max(r,0))+(c=Math.min(c,p._length)))/2,t=0;t<d.length;t++)for(o=d[t].pts,n=1;n<o.length;n++)(l=o[n-1][1])>s!=(v=o[n][1])>=s&&(f=o[n-1][0],b=o[n][0],v-l&&(g=f+(b-f)*(s-l)/(v-l),u=Math.min(u,g),a=Math.max(a,g)));return{x0:u=Math.max(u,0),x1:a=Math.min(a,m._length),y0:s,y1:s}}(d._polygons),null===f&&(f={x0:h[0],x1:h[0],y0:h[1],y1:h[1]}),y=o.defaultLine,o.opacity(d.fillcolor)?y=d.fillcolor:o.opacity((d.line||{}).color)&&(y=d.line.color),s.extendFlat(e,{distance:e.maxHoverDistance,x0:f.x0,x1:f.x1,y0:f.y0,y1:f.y1,color:y,hovertemplate:!1}),delete e.index,d.text&&!s.isArrayOrTypedArray(d.text)?e.text=String(d.text):e.text=d.name,[e]}},65875:function(e,t,n){"use strict";var s=n(43028);e.exports={hasLines:s.hasLines,hasMarkers:s.hasMarkers,hasText:s.hasText,isBubble:s.isBubble,attributes:n(52904),layoutAttributes:n(55308),supplyDefaults:n(18800),crossTraceDefaults:n(35036),supplyLayoutDefaults:n(59748),calc:n(16356).calc,crossTraceCalc:n(96664),arraysToCalcdata:n(20148),plot:n(96504),colorbar:n(5528),formatLabels:n(76688),style:n(49224).style,styleOnSelect:n(49224).styleOnSelect,hoverPoints:n(98723),selectPoints:n(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:n(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(e){"use strict";e.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(e,t,n){"use strict";var s=n(3400),o=n(55308);e.exports=function(e,t){var n,i="group"===t.barmode;"group"===t.scattermode&&("scattergap",n=i?t.bargap:.2,s.coerce(e,t,o,"scattergap",n))}},66828:function(e,t,n){"use strict";var s=n(3400).isArrayOrTypedArray,o=n(94288).hasColorscale,i=n(27260);e.exports=function(e,t,n,a,r,c){c||(c={});var l=(e.marker||{}).color;l&&l._inputArray&&(l=l._inputArray),r("line.color",n),o(e,"line")?i(e,t,a,r,{prefix:"line.",cLetter:"c"}):r("line.color",!s(l)&&l||n),r("line.width"),c.noDash||r("line.dash"),c.backoff&&r("line.backoff")}},52340:function(e,t,n){"use strict";var u=n(43616),a=n(39032),s=a.BADNUM,d=a.LOG_CLIP,r=d+.5,c=d-.5,o=n(3400),h=o.segmentsIntersect,l=o.constrain,i=n(88200);e.exports=function(e,t){var d,b,y,x,T,N,L,R,P,I,B,$,U,G,Q,J,oe,te,ne,se,me,K=t.trace||{},S=t.xaxis,M=t.yaxis,Ee="log"===S.type,de="log"===M.type,z=S._length,D=M._length,ae=t.backoff,ie=K.marker,be=t.connectGaps,xe=t.baseTolerance,C=t.shape,Oe="linear"===C,we=K.fill&&"none"!==K.fill,k=[],_e=i.minTolerance,W=e.length,a=new Array(W),n=0,pe;function q(n){if(o=e[n],!o)return!1;var o,i=t.linearized?S.l2p(o.x):S.c2p(o.x),a=t.linearized?M.l2p(o.y):M.c2p(o.y);if(i===s){if(Ee&&(i=S.c2p(o.x,!0)),i===s)return!1;de&&a===s&&(i*=Math.abs(S._m*D*(S._m>0?r:c)/(M._m*z*(M._m>0?r:c)))),i*=1e3}if(a===s){if(de&&(a=M.c2p(o.y,!0)),a===s)return!1;a*=1e3}return[i,a]}function ge(e,t,n,s){var a,o=n-e,i=s-t,r=.5-e,c=.5-t,l=o*o+i*i,d=o*r+i*c;if(d>0&&d<l&&(a=r*i-c*o,a*a<l))return!0}function le(e,t){var s=e[0]/z,o=e[1]/D,n=Math.max(0,-s,s-1,-o,o-1);return n&&void 0!==se&&ge(s,o,se,me)&&(n=0),n&&t&&ge(s,o,t[0]/z,t[1]/D)&&(n=0),(1+i.toleranceGrowth*n)*xe}function re(e,t){var n=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(n*n+s*s)}var g,j,_,w,O,F,ve,V=i.maxScreensAway,f=-z*V,m=z*(1+V),p=-D*V,v=D*(1+V),Ce=[[f,p,m,p],[m,p,m,v],[m,v,f,v],[f,v,f,p]];function X(e){if(e[0]<f||e[0]>m||e[1]<p||e[1]>v)return[l(e[0],f,m),l(e[1],p,v)]}function ye(e,t){return e[0]===t[0]&&(e[0]===f||e[0]===m)||e[1]===t[1]&&(e[1]===p||e[1]===v)||void 0}function he(e,t,n){return function(s,i){var l,a=X(s),r=X(i),c=[];return a&&r&&ye(a,r)?c:(a&&c.push(a),r&&c.push(r),l=2*o.constrain((s[e]+i[e])/2,t,n)-((a||s)[e]+(r||i)[e]),l&&((a&&r?l>0==a[e]>r[e]?a:r:a||r)[e]+=l),c)}}function A(e){var o,i,t=e[0],s=e[1],r=t===a[n-1][0],c=s===a[n-1][1];(!r||!c)&&(n>1?(o=t===a[n-2][0],i=s===a[n-2][1],r&&(t===f||t===m)&&o?i?n--:a[n-1]=e:c&&(s===p||s===v)&&i?o?n--:a[n-1]=e:a[n++]=e):a[n++]=e)}function fe(e){a[n-1][0]!==e[0]&&a[n-1][1]!==e[1]&&A([_,j]),A(e),g=null,_=j=0}"linear"===C||"spline"===C?F=function(e,t){for(var n,o,s=[],i=0,a=0;a<4;a++)o=Ce[a],n=h(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]),n&&(!i||Math.abs(n.x-s[0][0])>1||Math.abs(n.y-s[0][1])>1)&&(n=[n.x,n.y],i&&re(n,e)<re(s[0],e)?s.unshift(n):s.push(n),i++);return s}:"hv"===C||"vh"===C?F=function(e,t){var o=[],n=X(e),s=X(t);return n&&s&&ye(n,s)||(n&&o.push(n),s&&o.push(s)),o}:"hvh"===C?F=he(0,f,m):"vhv"===C&&(F=he(1,p,v)),pe=o.isArrayOrTypedArray(ie);function E(t){if(t&&ae&&(t.i=d,t.d=e,t.trace=K,t.marker=pe?ie[t.i]:ie,t.backoff=ae),se=t[0]/z,me=t[1]/D,w=t[0]<f?f:t[0]>m?m:0,O=t[1]<p?p:t[1]>v?v:0,w||O){if(n)if(g){var s,o,r,c,l,i=F(g,t);i.length>1&&(fe(i[0]),a[n++]=i[1])}else ve=F(a[n-1],t)[0],a[n++]=ve;else a[n++]=[w||t[0],O||t[1]];r=a[n-1],w&&O&&(r[0]!==w||r[1]!==O)?(g&&(_!==w&&j!==O?A(_&&j?(s=g,c=(o=t)[0]-s[0],l=(o[1]-s[1])/c,(s[1]*o[0]-o[1]*s[0])/c>0?[l>0?f:m,v]:[l>0?m:f,p]):[_||w,j||O]):_&&j&&A([_,j])),A([w,O])):_-w&&j-O&&A([w||_,O||j]),g=t,_=w,j=O}else g&&fe(F(g,t)[0]),a[n++]=t}for(d=0;d<W;d++)if(x=q(d)){for(n=0,g=null,E(x),d++;d<W;d++){if(!(y=q(d))){if(be)continue;break}if(Oe&&t.simplify){if(P=q(d+1),I=re(y,x),we&&(0===n||n===W-1)||!(I<le(y,P)*_e)){for(R=[(y[0]-x[0])/I,(y[1]-x[1])/I],T=x,oe=I,J=U=te=0,B=!1,L=y,d++;d<e.length;d++){if(b=P,P=q(d+1),!b){if(be)continue;break}if(ne=(G=[b[0]-x[0],b[1]-x[1]])[0]*R[1]-G[1]*R[0],U=Math.min(U,ne),(te=Math.max(te,ne))-U>le(b,P))break;L=b,($=G[0]*R[0]+G[1]*R[1])>oe?(oe=$,y=b,B=!1):$<J&&(J=$,T=b,B=!0)}if(B?(E(y),L!==T&&E(T)):(T!==x&&E(T),L!==y&&E(y)),E(L),d>=e.length||!b)break;E(b),x=b}}else E(y)}g&&A([_||g[0],j||g[1]]),k.push(a.slice(0,n))}if(Q=C.slice(C.length-1),ae&&"h"!==Q&&"v"!==Q){for(var je=!1,ce=-1,ee=[],H=0;H<k.length;H++)for(N=0;N<k[H].length-1;N++){var ue=k[H][N],Z=k[H][N+1],Y=u.applyBackoff(Z,ue);Y[0]===Z[0]&&Y[1]===Z[1]||(je=!0),ee[ce+1]||(ee[++ce]=[ue,[Y[0],Y[1]]])}return je?ee:k}return k}},11731:function(e){"use strict";e.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},14328:function(e){"use strict";var t={tonextx:1,tonexty:1,tonext:1};e.exports=function(e,n,s){var o,i,a,r,c,l,m,u={},f=!1,p=-1,d=0,h=-1;for(i=0;i<s.length;i++)(a=(o=s[i][0].trace).stackgroup||"")?a in u?r=u[a]:(r=u[a]=d,d++):o.fill in t&&h>=0?r=h:(r=h=d,d++),r<p&&(f=!0),o._groupIndex=p=r;c=s.slice(),f&&c.sort(function(e,t){var n=e[0].trace,s=t[0].trace;return n._groupIndex-s._groupIndex||n.index-s.index}),m={};for(i=0;i<c.length;i++)a=(o=c[i][0].trace).stackgroup||"",!0===o.visible?(o._nexttrace=null,o.fill in t&&(l=m[a],o._prevtrace=l||null,l&&(l._nexttrace=o)),o._ownfill=o.fill&&("tozero"===o.fill.substr(0,6)||"toself"===o.fill||"to"===o.fill.substr(0,2)&&!o._prevtrace),m[a]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return c}},7152:function(e,t,n){"use strict";var s=n(38248);e.exports=function(e,t){t||(t=2);var n=e.marker,o=n.sizeref||1,i=n.sizemin||0,a="area"===n.sizemode?function(e){return Math.sqrt(e/o)}:function(e){return e/o};return function(e){var n=a(e/t);return s(n)&&n>0?Math.max(n,i):0}}},5528:function(e){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(e,t,n){"use strict";var s=n(76308),o=n(94288).hasColorscale,i=n(27260),a=n(43028);e.exports=function(e,t,n,r,c,l){var u=a.isBubble(e),d=(e.line||{}).color;l=l||{},d&&(n=d),c("marker.symbol"),c("marker.opacity",u?.7:1),c("marker.size"),l.noAngle||(c("marker.angle"),l.noAngleRef||c("marker.angleref"),l.noStandOff||c("marker.standoff")),c("marker.color",n),o(e,"marker")&&i(e,t,r,c,{prefix:"marker.",cLetter:"c"}),l.noSelect||(c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size")),l.noLine||(c("marker.line.color",d&&!Array.isArray(d)&&t.marker.color!==d?d:u?s.background:s.defaultLine),o(e,"marker.line")&&i(e,t,r,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width",u?1:0)),u&&(c("marker.sizeref"),c("marker.sizemin"),c("marker.sizemode")),l.gradient&&"none"!==c("marker.gradient.type")&&c("marker.gradient.color")}},31147:function(e,t,n){"use strict";var o=n(3400).dateTick0,i=n(39032).ONEWEEK;function s(e,t){return o(t,e%i==0?1:0)}e.exports=function(e,t,n,o,i){if(i||(i={x:!0,y:!0}),i.x){var a,r=o("xperiod");r&&(o("xperiod0",s(r,t.xcalendar)),o("xperiodalignment"))}i.y&&(a=o("yperiod"),a&&(o("yperiod0",s(a,t.ycalendar)),o("yperiodalignment")))}},96504:function(e,t,n){"use strict";var o=n(33428),u=n(24040),r=n(3400),i=r.ensureSingle,l=r.identity,s=n(43616),a=n(43028),h=n(52340),m=n(14328),c=n(92065).tester;function d(e,t,n,d,m,f,p){ne=e._context.staticPlot,!function(e,t,n,s,i){var d,v,u=n.xaxis,p=n.yaxis,g=o.extent(r.simpleMap(u.range,u.r2c)),h=o.extent(r.simpleMap(p.range,p.r2c)),m=s[0].trace;if(a.hasMarkers(m)&&(d=m.marker.maxdisplayed,0!==d)){var f=s.filter(function(e){return e.x>=g[0]&&e.x<=g[1]&&e.y>=h[0]&&e.y<=h[1]}),c=Math.ceil(f.length/d),l=0;i.forEach(function(e,n){var s=e[0].trace;a.hasMarkers(s)&&s.marker.maxdisplayed>0&&n<t&&l++}),v=Math.round(l*c/3+Math.floor(l/3)*c/7.1),s.forEach(function(e){delete e.vis}),f.forEach(function(e,t){0===Math.round((t+v)%c)&&(e.vis=!0)})}}(0,t,n,d,m),P=!!p&&p.duration>0;function b(e){return P?e.transition():e}var _,x,C,A,M,D,N,L,P,H,U,K,Y,G,ne,O=n.xaxis,E=n.yaxis,g=d[0].trace,j=g.line,T=o.select(f),ae=i(T,"g","errorbars"),he=i(T,"g","lines"),Q=i(T,"g","points"),X=i(T,"g","text");if(u.getComponentMethod("errorbars","plot")(e,ae,n,p),!0===g.visible){b(T).style("opacity",g.opacity),x=g.fill.charAt(g.fill.length-1),"x"!==x&&"y"!==x&&(x=""),"y"===x?(M=1,H=E.c2p(0,!0)):"x"===x&&(M=0,H=O.c2p(0,!0)),d[0][n.isRangePlot?"nodeRangePlot3":"node3"]=T;var z,V,R="",te=[],S=g._prevtrace,se=null,oe=null;S&&(R=S._prevRevpath||"",_=S._nextFill,te=S._ownPolygons,se=S._fillsegments,oe=S._fillElement);var I,B,W,q,J,ie,w="",F="",k=[];g._polygons=[];var v=[],y=[],$=r.noop;if(A=g._ownFill,a.hasLines(g)||"none"!==g.fill){_&&_.datum(d),-1!==["hv","vh","hvh","vhv"].indexOf(j.shape)?(q=s.steps(j.shape),W=s.steps(j.shape.split("").reverse().join(""))):q=W="spline"===j.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?s.smoothclosed(e.slice(1),j.smoothing):s.smoothopen(e,j.smoothing)}:function(e){return"M"+e.join("L")},ie=function(e){return W(e.reverse())},y=h(d,{xaxis:O,yaxis:E,trace:g,connectGaps:g.connectgaps,baseTolerance:Math.max(j.width||1,3)/4,shape:j.shape,backoff:j.backoff,simplify:j.simplify,fill:g.fill}),v=new Array(y.length),L=0;for(C=0;C<y.length;C++)G=y[C],N&&x?N.push.apply(N,G):(N=G.slice(),v[L]=N,L++);g._fillElement=null,g._fillExclusionElement=oe,g._fillsegments=v.slice(0,L),v=g._fillsegments,y.length&&(B=y[0][0].slice(),I=(J=y[y.length-1])[J.length-1].slice()),$=function(e){return function(t){if(z=q(t),V=ie(t),w?x?(w+="L"+z.substr(1),F=V+"L"+F.substr(1)):(w+="Z"+z,F=V+"Z"+F):(w=z,F=V),a.hasLines(g)){var i,n=o.select(this);n.datum(d),e?b(n.style("opacity",0).attr("d",z).call(s.lineGroupStyle)).style("opacity",1):(i=b(n),i.attr("d",z),s.singleLineStyle(d,i))}}}}D=he.selectAll(".js-line").data(y),b(D.exit()).style("opacity",0).remove(),D.each($(!1)),D.enter().append("path").classed("js-line",!0).style("vector-effect",ne?"none":"non-scaling-stroke").call(s.lineGroupStyle).each($(!0)),s.setClipUrl(D,n.layerClipId,e),Y=function(){var e=new Array(v.length);for(C=0;C<v.length;C++)e[C]=c(v[C]);return e},K=function(e){if(e&&0!==e.length){for(n=new Array(e.length-1+v.length),t=0;t<e.length-1;t++)n[t]=c(e[t]);s=e[e.length-1].slice();for(s.reverse(),t=0;t<v.length;t++)n[e.length-1+t]=c(v[t].concat(s))}else for(n=new Array(v.length),t=0;t<v.length;t++){var t,n,s,a,o=v[t][0].slice(),i=v[t][v[t].length-1].slice();o[M]=i[M]=H,a=[i,o].concat(v[t]),n[t]=c(a)}return n},y.length?(A?(A.datum(d),B&&I&&(x?(B[M]=I[M]=H,b(A).attr("d","M"+I+"L"+B+"L"+w.substr(1)).call(s.singleFillStyle,e),k=K(null)):(b(A).attr("d",w+"Z").call(s.singleFillStyle,e),k=Y())),g._polygons=k,g._fillElement=A):_&&("tonext"===g.fill.substr(0,6)&&w&&R?("tonext"===g.fill?(b(_).attr("d",w+"Z"+R+"Z").call(s.singleFillStyle,e),k=Y(),g._polygons=k.concat(te)):(b(_).attr("d",w+"L"+R.substr(1)+"Z").call(s.singleFillStyle,e),k=K(se),g._polygons=k),g._fillElement=_):Z(_)),g._prevRevpath=F):(A?Z(A):_&&Z(_),g._prevRevpath=null),g._ownPolygons=k,Q.datum(d),X.datum(d),function(t,i,r){var d,y,_,c=r[0].trace,h=a.hasMarkers(c),f=a.hasText(c),p=ue(c),g=ee,v=ee;if(h||f){var u=l,m=c.stackgroup,j=m&&"infer zero"===e._fullLayout._scatterStackOpts[O._id+E._id][m].stackgaps;c.marker.maxdisplayed||c._needsCull?u=j?ce:re:m&&!j&&(u=le),h&&(g=u),f&&(v=u)}_=(d=t.selectAll("path.point").data(g,p)).enter().append("path").classed("point",!0),P&&_.call(s.pointStyle,c,e).call(s.translatePoints,O,E).style("opacity",0).transition().style("opacity",1),d.order(),h&&(y=s.makePointStyleFns(c)),d.each(function(t){var a=o.select(this),i=b(a);s.translatePoint(t,i,O,E)?(s.singlePointStyle(t,i,c,y,e),n.layerClipId&&s.hideOutsideRangePoint(t,i,O,E,c.xcalendar,c.ycalendar),c.customdata&&a.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):i.remove()}),P?d.exit().transition().style("opacity",0).remove():d.exit().remove(),(d=i.selectAll("g").data(v,p)).enter().append("g").classed("textpoint",!0).append("text"),d.order(),d.each(function(e){var t=o.select(this),i=b(t.select("text"));s.translatePoint(e,i,O,E)?n.layerClipId&&s.hideOutsideRangePoint(e,t,O,E,c.xcalendar,c.ycalendar):t.remove()}),d.selectAll("text").call(s.textPointStyle,c,e).each(function(e){var t=O.c2p(e.x),n=E.c2p(e.y);o.select(this).selectAll("tspan.line").each(function(){b(o.select(this)).attr({x:t,y:n})})}),d.exit().remove()}(Q,X,d),U=!1===g.cliponaxis?null:n.layerClipId,s.setClipUrl(Q,U,e),s.setClipUrl(X,U,e)}function Z(e){b(e).attr("d","M0,0Z")}function re(e){return e.filter(function(e){return!e.gap&&e.vis})}function ce(e){return e.filter(function(e){return e.vis})}function le(e){return e.filter(function(e){return!e.gap})}function de(e){return e.id}function ue(e){if(e.ids)return de}function ee(){return!1}}e.exports=function(e,t,n,a,r,c){var u,h,p=!r,g=!!r&&r.duration>0,f=m(e,t,n);(u=a.selectAll("g.trace").data(f,function(e){return e[0].trace.uid})).enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),u.order(),function(e,t,n){t.each(function(t){c=i(o.select(this),"g","fills"),s.setClipUrl(c,n.layerClipId,e);var r,c,a=t[0].trace,d=[];a._ownfill&&d.push("_ownFill"),a._nexttrace&&d.push("_nextFill"),r=c.selectAll("g").data(d,l),r.enter().append("g"),r.exit().each(function(e){a[e]=null}).remove(),r.order().each(function(e){a[e]=i(o.select(this),"path","js-fill")})})}(e,u,t),g?(c&&(h=c()),o.transition().duration(r.duration).ease(r.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).each(function(){a.selectAll("g.trace").each(function(n,s){d(e,s,t,n,f,this,r)})})):u.each(function(n,s){d(e,s,t,n,f,this,r)}),p&&u.exit().remove(),a.selectAll("path:not([d])").remove()}},91560:function(e,t,n){"use strict";var s=n(43028);e.exports=function(e,t){var n,o,a,r,i=e.cd,c=e.xaxis,l=e.yaxis,d=[],u=i[0].trace;if(!s.hasMarkers(u)&&!s.hasText(u))return[];if(!1===t)for(n=0;n<i.length;n++)i[n].selected=0;else for(n=0;n<i.length;n++)o=i[n],a=c.c2p(o.x),r=l.c2p(o.y),null!==o.i&&t.contains([a,r],!1,n,e)?(d.push({pointNumber:o.i,x:c.c2d(o.x),y:l.c2d(o.y)}),o.selected=1):o.selected=0;return d}},43912:function(e){"use strict";var t=["orientation","groupnorm","stackgaps"];e.exports=function(e,n,s,o){var i,a,r,c,l,d,u,h,m,f,p,v,b=s._scatterStackOpts,g=o("stackgroup");if(g){h=n.xaxis+n.yaxis,r=b[h],r||(r=b[h]={}),i=r[g],d=!1,i?i.traces.push(n):(i=r[g]={traceIndices:[],traces:[n]},d=!0);for(v={orientation:n.x&&!n.y?"h":"v"},c=0;c<t.length;c++)if(a=t[c],m=a+"Found",!i[m]&&(f=void 0!==e[a],p="orientation"===a,(f||d)&&(i[a]=o(a,v[a]),p&&(i.fillDflt="h"===i[a]?"tonextx":"tonexty"),f&&(i[m]=!0,!d&&(delete i.traces[0][a],p)))))for(l=0;l<i.traces.length-1;l++)u=i.traces[l],u._input.fill!==u.fill&&(u.fill=i.fillDflt);return i}}},49224:function(e,t,n){"use strict";var o=n(33428),s=n(43616),r=n(24040);function i(e,t,n){s.pointStyle(e.selectAll("path.point"),t,n)}function a(e,t,n){s.textPointStyle(e.selectAll("text"),t,n)}e.exports={style:function(e){var t=o.select(e).selectAll("g.trace.scatter");t.style("opacity",function(e){return e[0].trace.opacity}),t.selectAll("g.points").each(function(t){i(o.select(this),t.trace||t[0].trace,e)}),t.selectAll("g.text").each(function(t){a(o.select(this),t.trace||t[0].trace,e)}),t.selectAll("g.trace path.js-line").call(s.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(s.fillGroupStyle,e,!1),r.getComponentMethod("errorbars","style")(t)},stylePoints:i,styleText:a,styleOnSelect:function(e,t,n){var o=t[0].trace;o.selectedpoints?(s.selectedPointStyle(n.selectAll("path.point"),o),s.selectedTextStyle(n.selectAll("text"),o)):(i(n,o,e),a(n,o,e))}}},43028:function(e,t,n){"use strict";var s=n(3400),o=n(38116).isTypedArraySpec;e.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){var t=e.marker;return s.isPlainObject(t)&&(s.isArrayOrTypedArray(t.size)||o(t.size))}}},124:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t,n,o,i){i=i||{},o("textposition"),s.coerceFont(o,"textfont",i.font||n.font,i),i.noSelect||(o("selected.textfont.color"),o("unselected.textfont.color"))}},43980:function(e,t,n){"use strict";var s=n(3400),o=n(24040);e.exports=function(e,t,n,i){var a,c,l=i("x"),r=i("y");if(o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),l)c=s.minRowLength(l),r?a=Math.min(c,s.minRowLength(r)):(a=c,i("y0"),i("dy"));else{if(!r)return 0;a=s.minRowLength(r),i("x0"),i("dx")}return t._length=a,a}},91592:function(e,t,n){"use strict";var o=n(52904),g=n(25376),a=n(49084),r=n(29736).axisHoverFormat,m=n(21776).Ks,h=n(21776).Gw,l=n(45464),u=n(99168),j=n(87792),s=n(92880).extendFlat,f=n(67824).overrideAll,d=n(95376),p=o.line,i=o.marker,v=i.line,b=s({width:p.width,dash:{valType:"enumerated",values:d(u),dflt:"solid"}},a("line")),c=e.exports=f({x:o.x,y:o.y,z:{valType:"data_array"},text:s({},o.text,{}),texttemplate:h({},{}),hovertext:s({},o.hovertext,{}),hovertemplate:m(),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),mode:s({},o.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:o.connectgaps,line:b,marker:s({symbol:{valType:"enumerated",values:d(j),dflt:"circle",arrayOk:!0},size:s({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:s({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:s({width:s({},v.width,{arrayOk:!1})},a("marker.line"))},a("marker")),textposition:s({},o.textposition,{dflt:"top center"}),textfont:g({editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:l.opacity,hoverinfo:s({},l.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},41484:function(e,t,n){"use strict";var s=n(20148),o=n(90136);e.exports=function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return s(n,t),o(e,t),n}},45156:function(e,t,n){"use strict";var o=n(24040);function s(e,t,n,s){if(!t||!t.visible)return null;for(var a,l,u=o.getComponentMethod("errorbars","makeComputeError")(t),r=new Array(e.length),i=0;i<e.length;i++)if(a=u(+e[i],i),"log"===s.type){var d=s.c2l(e[i]),c=e[i]-a[0],h=e[i]+a[1];r[i]=[(s.c2l(c,!0)-d)*n,(s.c2l(h,!0)-d)*n],c>0&&(l=s.c2l(c),s._lowerLogErrorBound||(s._lowerLogErrorBound=l),s._lowerErrorBound=Math.min(s._lowerLogErrorBound,l))}else r[i]=[-a[0]*n,a[1]*n];return r}e.exports=function(e,t,n){var o,i,a,c,l,d=[s(e.x,e.error_x,t[0],n.xaxis),s(e.y,e.error_y,t[1],n.yaxis),s(e.z,e.error_z,t[2],n.zaxis)],r=function(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}(d);if(0===r)return null;for(c=new Array(r),a=0;a<r;a++){for(l=[[0,0,0],[0,0,0]],o=0;o<3;o++)if(d[o])for(i=0;i<2;i++)l[i][o]=d[o][a][i];c[a]=l}return c}},41064:function(e,t,n){"use strict";var i,C=n(67792).gl_line3d,u=n(67792).gl_scatter3d,x=n(67792).gl_error3d,O=n(67792).gl_mesh3d,y=n(67792).delaunay_triangulate,s=n(3400),d=n(43080),o=n(33040).formatColor,j=n(7152),r=n(99168),b=n(87792),p=n(54460),v=n(10624).appendArrayPointValue,g=n(45156);function c(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}i=c.prototype;function h(e){return e==null?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function m(e){return e==null?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function _(e,t){return t(4*e)}function w(e){return b[e]}function a(e,t,n,o,i){var a,r=null;if(s.isArrayOrTypedArray(e)){r=[];for(a=0;a<t;a++)void 0===e[a]?r[a]=o:r[a]=n(e[a],i)}else r=n(e,s.identity);return r}function l(e){if(s.isArrayOrTypedArray(e)){var t=e[0];return s.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(e){return Math.round(255*e)})+")"}return null}function f(e){return s.isArrayOrTypedArray(e)?4===e.length&&"number"==typeof e[0]?l(e):e.map(l):null}i.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(s.isArrayOrTypedArray(this.textLabels)?(this.textLabels[t]||0===this.textLabels[t])&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},i.update=function(e){var t,n,i,c,b,E,k,A=this.scene.glplot.gl,l=r.solid;this.data=e,t=function(e,t){var n,i,c,l,b,x,M,T,z,N,L,R,F=[],u=e.fullSceneLayout,y=e.dataScale,K=u.xaxis,q=u.yaxis,Y=u.zaxis,f=t.marker,k=t.line,O=t.x||[],C=t.y||[],A=t.z||[],r=O.length,U=t.xcalendar,W=t.ycalendar,$=t.zcalendar;for(i=0;i<r;i++)R=K.d2l(O[i],0,U)*y[0],N=q.d2l(C[i],0,W)*y[1],L=Y.d2l(A[i],0,$)*y[2],F[i]=[R,N,L];if(Array.isArray(t.text))c=t.text;else if(s.isTypedArray(t.text))c=Array.from(t.text);else if(void 0!==t.text)for(c=new Array(r),i=0;i<r;i++)c[i]=t.text;function E(e,t){var n=u[e];return p.tickText(n,n.d2l(t),!0).text}if(l=t.texttemplate,l){var H=e.fullLayout._d3locale,P=Array.isArray(l),S=P?Math.min(l.length,r):r,I=P?function(e){return l[e]}:function(){return l};for(c=new Array(S),i=0;i<S;i++){var B={x:O[i],y:C[i],z:A[i]},V={xLabel:E("xaxis",O[i]),yLabel:E("yaxis",C[i]),zLabel:E("zaxis",A[i])},D={};v(D,t,i),z=t._meta||{},c[i]=s.texttemplateString(I(i),V,H,D,B,z)}}(n={position:F,mode:t.mode,text:c},"line"in t&&(n.lineColor=o(k,1,r),n.lineWidth=k.width,n.lineDashes=k.dash),"marker"in t)&&(T=j(t),n.scatterColor=o(f,1,r),n.scatterSize=a(f.size,r,_,20,T),n.scatterMarker=a(f.symbol,r,w,"●"),n.scatterLineWidth=f.line.width,n.scatterLineColor=o(f.line,1,r),n.scatterAngle=0),"textposition"in t&&(n.textOffset=function(e){var t,n=[0,0];if(Array.isArray(e))for(t=0;t<e.length;t++)n[t]=[0,0],e[t]&&(n[t][0]=h(e[t]),n[t][1]=m(e[t]));else n[0]=h(e),n[1]=m(e);return n}(t.textposition),n.textColor=o(t.textfont,1,r),n.textSize=a(t.textfont.size,r,s.identity,12),n.textFontFamily=t.textfont.family,n.textFontWeight=t.textfont.weight,n.textFontStyle=t.textfont.style,n.textFontVariant=t.textfont.variant,n.textAngle=0),M=["x","y","z"];for(n.project=[!1,!1,!1],n.projectScale=[1,1,1],n.projectOpacity=[1,1,1],i=0;i<3;++i)b=t.projection[M[i]],(n.project[i]=b.show)&&(n.projectOpacity[i]=b.opacity,n.projectScale[i]=b.scale);return n.errorBounds=g(t,y,u),x=function(e){for(var t,s=[0,0,0],o=[[0,0,0],[0,0,0],[0,0,0]],i=[1,1,1],n=0;n<3;n++)t=e[n],t&&!1!==t.copy_zstyle&&!1!==e[2].visible&&(t=e[2]),t&&t.visible&&(s[n]=t.width/2,o[n]=d(t.color),i[n]=t.thickness);return{capSize:s,color:o,lineWidth:i}}([t.error_x,t.error_y,t.error_z]),n.errorColor=x.color,n.errorLineWidth=x.lineWidth,n.errorCapSize=x.capSize,n.delaunayAxis=t.surfaceaxis,n.delaunayColor=d(t.surfacecolor),n}(this.scene,e),"mode"in t&&(this.mode=t.mode),"lineDashes"in t&&t.lineDashes in r&&(l=r[t.lineDashes]),this.color=f(t.scatterColor)||f(t.lineColor),this.dataPoints=t.position,b={gl:this.scene.glplot.gl,position:t.position,color:t.lineColor,lineWidth:t.lineWidth||1,dashes:l[0],dashScale:l[1],opacity:e.opacity,connectGaps:e.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(b):(this.linePlot=C(b),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null),E=e.opacity,e.marker&&void 0!==e.marker.opacity&&(E*=e.marker.opacity),i={gl:this.scene.glplot.gl,position:t.position,color:t.scatterColor,size:t.scatterSize,glyph:t.scatterMarker,opacity:E,orthographic:!0,lineWidth:t.scatterLineWidth,lineColor:t.scatterLineColor,project:t.project,projectScale:t.projectScale,projectOpacity:t.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(i):(this.scatterPlot=u(i),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),c={gl:this.scene.glplot.gl,position:t.position,glyph:t.text,color:t.textColor,size:t.textSize,angle:t.textAngle,alignment:t.textOffset,font:t.textFontFamily,fontWeight:t.textFontWeight,fontStyle:t.textFontStyle,fontVariant:t.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(c):(this.textMarkers=u(c),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),k={gl:this.scene.glplot.gl,position:t.position,color:t.errorColor,error:t.errorBounds,lineWidth:t.errorLineWidth,capSize:t.errorCapSize,opacity:e.opacity},this.errorBars?t.errorBounds?this.errorBars.update(k):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):t.errorBounds&&(this.errorBars=x(k),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),t.delaunayAxis>=0?(n=function(e,t,n){var s,o,i,a,r,c=(n+1)%3,l=(n+2)%3,d=[],u=[];for(s=0;s<e.length;++s)o=e[s],!isNaN(o[c])&&isFinite(o[c])&&!isNaN(o[l])&&isFinite(o[l])&&(d.push([o[c],o[l]]),u.push(s));r=y(d);for(s=0;s<r.length;++s)for(a=r[s],i=0;i<a.length;++i)a[i]=u[a[i]];return{positions:e,cells:r,meshColor:t}}(t.position,t.delaunayColor,t.delaunayAxis),n.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(n):(n.gl=A,this.delaunayMesh=O(n),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))):this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},i.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},e.exports=function(e,t){var n=new c(e,t.uid);return n.update(t),n}},83484:function(e,t,n){"use strict";var o=n(24040),i=n(3400),s=n(43028),a=n(74428),r=n(66828),c=n(124),l=n(91592);e.exports=function(e,t,n,d){function u(n,s){return i.coerce(e,t,l,n,s)}if(b=function(e,t,n,s){var i=0,a=n("x"),r=n("y"),c=n("z");return o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],s),a&&r&&c&&(i=Math.min(a.length,r.length,c.length),t._length=t._xlength=t._ylength=t._zlength=i),i}(e,t,u,d),b){u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),u("mode"),s.hasMarkers(t)&&a(e,t,n,d,u,{noSelect:!0,noAngle:!0}),s.hasLines(t)&&(u("connectgaps"),r(e,t,n,d,u)),s.hasText(t)&&(u("texttemplate"),c(e,t,d,u,{noSelect:!0}));var h,p,g,v,b,m=(t.line||{}).color,f=(t.marker||{}).color;u("surfaceaxis")>=0&&u("surfacecolor",m||f);for(v=["x","y","z"],p=0;p<3;++p)g="projection."+v[p],u(g+".show")&&(u(g+".opacity"),u(g+".scale"));h=o.getComponentMethod("errorbars","supplyDefaults"),h(e,t,m||f||n,{axis:"z"}),h(e,t,m||f||n,{axis:"y",inherit:"z"}),h(e,t,m||f||n,{axis:"x",inherit:"z"})}else t.visible=!1}},3296:function(e,t,n){"use strict";e.exports={plot:n(41064),attributes:n(91592),markerSymbols:n(87792),supplyDefaults:n(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:n(41484),moduleType:"trace",name:"scatter3d",basePlotModule:n(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(e,t,n){"use strict";var d=n(98304),s=n(52904),u=n(45464),c=n(21776).Ks,l=n(21776).Gw,r=n(49084),i=n(92880).extendFlat,o=s.marker,a=s.line,h=o.line;e.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:i({},s.mode,{dflt:"markers"}),text:i({},s.text,{}),texttemplate:l({editType:"plot"},{keys:["a","b","text"]}),hovertext:i({},s.hovertext,{}),line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:i({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:s.connectgaps,fill:i({},s.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:d(),marker:i({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,angle:o.angle,angleref:o.angleref,standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:i({width:h.width,editType:"calc"},r("marker.line")),gradient:o.gradient,editType:"calc"},r("marker")),textfont:s.textfont,textposition:s.textposition,selected:s.selected,unselected:s.unselected,hoverinfo:i({},u.hoverinfo,{flags:["a","b","text","name"]}),hoveron:s.hoveron,hovertemplate:c(),zorder:s.zorder}},48228:function(e,t,n){"use strict";var s=n(38248),o=n(90136),i=n(20148),a=n(4500),r=n(16356).calcMarkerSize,c=n(50948);e.exports=function(e,t){if(n=t._carpetTrace=c(e,t),n&&n.visible&&"legendonly"!==n.visible){t.xaxis=n.xaxis,t.yaxis=n.yaxis;var n,l,u,h,f,p,m=t._length,d=new Array(m),g=!1;for(l=0;l<m;l++)u=t.a[l],h=t.b[l],s(u)&&s(h)?(f=n.ab2xy(+u,+h,!0),p=n.isVisible(+u,+h),p||(g=!0),d[l]={x:f[0],y:f[1],a:u,b:h,vis:p}):d[l]={x:!1,y:!1};return t._needsCull=g,d[0].carpet=n,d[0].trace=t,r(t,m),o(e,t),i(d,t),a(d,t),d}}},6176:function(e,t,n){"use strict";var o=n(3400),a=n(88200),s=n(43028),r=n(74428),c=n(66828),i=n(11731),l=n(124),d=n(70840),u=n(90372);e.exports=function(e,t,n,h){function m(n,s){return o.coerce(e,t,u,n,s)}m("carpet"),t.xaxis="x",t.yaxis="y";var f,g=m("a"),v=m("b"),p=Math.min(g.length,v.length);p?(t._length=p,m("text"),m("texttemplate"),m("hovertext"),m("mode",p<a.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(t)&&r(e,t,n,h,m,{gradient:!0}),s.hasLines(t)&&(c(e,t,n,h,m,{backoff:!0}),i(e,t,m),m("connectgaps")),s.hasText(t)&&l(e,t,h,m),f=[],(s.hasMarkers(t)||s.hasText(t))&&(m("marker.maxdisplayed"),f.push("points")),m("fill"),"none"!==t.fill&&(d(e,t,n,m),s.hasLines(t)||i(e,t,m)),"tonext"!==t.fill&&"toself"!==t.fill||f.push("fills"),"fills"!==m("hoveron",f.join("+")||"points")&&m("hovertemplate"),m("zorder"),o.coerceSelectionMarkerOpacity(t,m)):t.visible=!1}},89307:function(e){"use strict";e.exports=function(e,t,n,s,o){var i=s[o];return e.a=i.a,e.b=i.b,e.y=i.y,e}},52364:function(e){"use strict";e.exports=function(e,t){var s={},o=t._carpet,n=o.ab2ij([e.a,e.b]),i=Math.floor(n[0]),r=n[0]-i,a=Math.floor(n[1]),c=n[1]-a,l=o.evalxy([],i,a,r,c);return s.yLabel=l[1].toFixed(3),s}},58960:function(e,t,n){"use strict";var s=n(98723),o=n(3400).fillText;e.exports=function(e,t,n,i){if(d=s(e,t,n,i),d&&!1!==d[0].index){if(a=d[0],void 0===a.index){var a,r,c,d,u,b=1-a.y0/e.ya._length,f=e.xa._length,h=f*b/2,m=f-h;return a.x0=Math.max(Math.min(a.x0,m),h),a.x1=Math.max(Math.min(a.x1,m),h),d}r=a.cd[a.index],a.a=r.a,a.b=r.b,a.xLabelVal=void 0,a.yLabelVal=void 0;var l=a.trace,p=l._carpet,v=l._module.formatLabels(r,l);return a.yLabel=v.yLabel,delete a.text,u=[],l.hovertemplate||(c=(r.hi||l.hoverinfo).split("+"),-1!==c.indexOf("all")&&(c=["a","b","text"]),-1!==c.indexOf("a")&&g(p.aaxis,r.a),-1!==c.indexOf("b")&&g(p.baxis,r.b),u.push("y: "+a.yLabel),-1!==c.indexOf("text")&&o(r,l,u),a.extraText=u.join("<br>")),d}function g(e,t){var n=e.labelprefix&&e.labelprefix.length>0?e.labelprefix.replace(/ = $/,""):e._hovertitle;u.push(n+": "+t.toFixed(3)+e.labelsuffix)}}},4184:function(e,t,n){"use strict";e.exports={attributes:n(90372),supplyDefaults:n(6176),colorbar:n(5528),formatLabels:n(52364),calc:n(48228),plot:n(20036),style:n(49224).style,styleOnSelect:n(49224).styleOnSelect,hoverPoints:n(58960),selectPoints:n(91560),eventData:n(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:n(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(e,t,n){"use strict";var o=n(96504),s=n(54460),i=n(43616);e.exports=function(e,t,n,a){var r,c,l,d=n[0][0].carpet,u=s.getFromId(e,d.xaxis||"x"),h=s.getFromId(e,d.yaxis||"y"),m={xaxis:u,yaxis:h,plot:t.plot};for(r=0;r<n.length;r++)(c=n[r][0].trace)._xA=u,c._yA=h;for(o(e,m,n,a),r=0;r<n.length;r++)c=n[r][0].trace,l=a.selectAll("g.trace"+c.uid+" .js-line"),i.setClipUrl(l,n[r][0].carpet._clipPathId,e)}},6096:function(e,t,n){"use strict";var c=n(21776).Ks,u=n(21776).Gw,l=n(98304),o=n(52904),m=n(45464),r=n(49084),d=n(98192).u,i=n(92880).extendFlat,h=n(67824).overrideAll,s=o.marker,a=o.line,f=s.line;e.exports=h({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},o.mode,{dflt:"markers"}),text:i({},o.text,{}),texttemplate:u({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},o.hovertext,{}),textfont:o.textfont,textposition:o.textposition,line:{color:a.color,width:a.width,dash:d},connectgaps:o.connectgaps,marker:i({symbol:s.symbol,opacity:s.opacity,angle:s.angle,angleref:i({},s.angleref,{values:["previous","up","north"]}),standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,colorbar:s.colorbar,line:i({width:f.width},r("marker.line")),gradient:s.gradient},r("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l(),selected:o.selected,unselected:o.unselected,hoverinfo:i({},m.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:c()},"calc","nested")},25212:function(e,t,n){"use strict";var s=n(38248),o=n(39032).BADNUM,r=n(90136),c=n(20148),l=n(4500),d=n(3400).isArrayOrTypedArray,i=n(3400)._;function a(e){return e&&"string"==typeof e}e.exports=function(e,t){for(var h,m,f,g,v=d(t.locations),p=v?t.locations.length:t._length,u=new Array(p),b=t.geojson?function(e){return a(e)||s(e)}:a,n=0;n<p;n++)h=u[n]={},v?(m=t.locations[n],h.loc=b(m)?m:null):(f=t.lon[n],g=t.lat[n],s(f)&&s(g)?h.lonlat=[+f,+g]:h.lonlat=[o,o]);return c(u,t),r(e,t),l(u,t),p&&(u[0].t={labels:{lat:i(e,"lat:")+" ",lon:i(e,"lon:")+" "}}),u}},86188:function(e,t,n){"use strict";var s=n(3400),o=n(43028),i=n(74428),a=n(66828),r=n(124),c=n(70840),l=n(6096);e.exports=function(e,t,n,d){function u(n,o){return s.coerce(e,t,l,n,o)}if(m=u("locations"),m&&m.length)f=u("geojson"),("string"==typeof f&&""!==f||s.isPlainObject(f))&&(p="geojson-id"),"geojson-id"===u("locationmode",p)&&u("featureidkey"),h=m.length;else{var h,m,f,p,g=u("lon")||[],v=u("lat")||[];h=Math.min(g.length,v.length)}h?(t._length=h,u("text"),u("hovertext"),u("hovertemplate"),u("mode"),o.hasMarkers(t)&&i(e,t,n,d,u,{gradient:!0}),o.hasLines(t)&&(a(e,t,n,d,u),u("connectgaps")),o.hasText(t)&&(u("texttemplate"),r(e,t,d,u)),u("fill"),"none"!==t.fill&&c(e,t,n,u),s.coerceSelectionMarkerOpacity(t,u)):t.visible=!1}},58544:function(e){"use strict";e.exports=function(e,t,n,s,o){e.lon=t.lon,e.lat=t.lat,e.location=t.loc?t.loc:null;var i=s[o];return i.fIn&&i.fIn.properties&&(e.properties=i.fIn.properties),e}},56696:function(e,t,n){"use strict";var s=n(54460);e.exports=function(e,t,n){var i={},o=n[t.geo]._subplot.mockAxis,a=e.lonlat;return i.lonLabel=s.tickText(o,o.c2l(a[0]),!0).text,i.latLabel=s.tickText(o,o.c2l(a[1]),!0).text,i}},64292:function(e,t,n){"use strict";var s=n(93024),o=n(39032).BADNUM,i=n(44928),a=n(3400).fillText,r=n(6096);e.exports=function(e,t,n){var f,g,d=e.cd,c=d[0].trace,y=e.xa,j=e.ya,p=e.subplot,b=p.projection.isLonLatOverEdges,v=p.project;if(s.getClosest(d,function(e){if(s=e.lonlat,s[0]===o)return 1/0;if(b(s))return 1/0;var s,i=v(s),a=v([t,n]),r=Math.abs(i[0]-a[0]),c=Math.abs(i[1]-a[1]),l=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(r*r+c*c)-l,1-3/l)},e),!1!==e.index){var l=d[e.index],u=l.lonlat,m=[y.c2p(u),j.c2p(u)],h=l.mrc||1;return e.x0=m[0]-h,e.x1=m[0]+h,e.y0=m[1]-h,e.y1=m[1]+h,e.loc=l.loc,e.lon=u[0],e.lat=u[1],g={},g[c.geo]={_subplot:p},f=c._module.formatLabels(l,c,g),e.lonLabel=f.lonLabel,e.latLabel=f.latLabel,e.color=i(c,l),e.extraText=function(e,t,n,s){if(!e.hovertemplate){var u=t.hi||e.hoverinfo,i="all"===u?r.hoverinfo.flags:u.split("+"),h=-1!==i.indexOf("location")&&Array.isArray(e.locations),l=-1!==i.indexOf("lon"),d=-1!==i.indexOf("lat"),m=-1!==i.indexOf("text"),o=[];return h?o.push(t.loc):l&&d?o.push("("+c(n.latLabel)+", "+c(n.lonLabel)+")"):l?o.push(s.lon+c(n.lonLabel)):d&&o.push(s.lat+c(n.latLabel)),m&&a(t,e,o),o.join("<br>")}function c(e){return e+"°"}}(c,l,e,d[0].t.labels),e.hovertemplate=c.hovertemplate,[e]}}},36952:function(e,t,n){"use strict";e.exports={attributes:n(6096),supplyDefaults:n(86188),colorbar:n(5528),formatLabels:n(56696),calc:n(25212),calcGeoJSON:n(48691).calcGeoJSON,plot:n(48691).plot,style:n(25064),styleOnSelect:n(49224).styleOnSelect,hoverPoints:n(64292),eventData:n(58544),selectPoints:n(8796),moduleType:"trace",name:"scattergeo",basePlotModule:n(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(e,t,n){"use strict";var l=n(33428),s=n(3400),u=n(59972).getTopojsonFeatures,r=n(44808),o=n(27144),c=n(19280).findExtremes,i=n(39032).BADNUM,d=n(16356).calcMarkerSize,a=n(43028),h=n(25064);e.exports={calcGeoJSON:function(e,t){var a,r,h,m,p,g,v,b,j,n=e[0].trace,f=t[n.geo],y=f._subplot,l=n._length;if(s.isArrayOrTypedArray(n.locations)){v=n.locationmode,j="geojson-id"===v?o.extractTraceFeature(e):u(n,y.topojson);for(a=0;a<l;a++)r=e[a],b="geojson-id"===v?r.fOut:o.locationToFeature(v,r.loc,j),r.lonlat=b?b.properties.ct:[i,i]}if(m={padded:!0},"geojson"===f.fitbounds&&"geojson-id"===n.locationmode)h=o.computeBbox(o.getTraceGeojson(n)),p=[h[0],h[2]],g=[h[1],h[3]];else{for(p=new Array(l),g=new Array(l),a=0;a<l;a++)r=e[a],p[a]=r.lonlat[0],g[a]=r.lonlat[1];m.ppad=d(n,l)}n._extremes.lon=c(f.lonaxis._ax,p,m),n._extremes.lat=c(f.lataxis._ax,g,m)},plot:function(e,t,n){var d=t.layers.frontplot.select(".scatterlayer"),o=s.makeTraceGroups(d,n,"trace scattergeo");function c(e,t){e.lonlat[0]===i&&l.select(t).remove()}o.selectAll("*").remove(),o.each(function(t){var i,d,o=l.select(this),n=t[0].trace;(a.hasLines(n)||"none"!==n.fill)&&(i=r.calcTraceToLineCoords(t),d="none"!==n.fill?r.makePolygon(i):r.makeLine(i),o.selectAll("path.js-line").data([{geojson:d,trace:n}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)),a.hasMarkers(n)&&o.selectAll("path.point").data(s.identity).enter().append("path").classed("point",!0).each(function(e){c(e,this)}),a.hasText(n)&&o.selectAll("g").data(s.identity).enter().append("g").append("text").each(function(e){c(e,this)}),h(e,t)})}}},8796:function(e,t,n){"use strict";var s=n(43028),o=n(39032).BADNUM;e.exports=function(e,t){var n,i,r,c,l,a=e.cd,h=e.xaxis,m=e.yaxis,d=[],u=a[0].trace;if(!s.hasMarkers(u)&&!s.hasText(u))return[];if(!1===t)for(n=0;n<a.length;n++)a[n].selected=0;else for(n=0;n<a.length;n++)(i=(r=a[n]).lonlat)[0]!==o&&(c=h.c2p(i),l=m.c2p(i),t.contains([c,l],null,n,e)?(d.push({pointNumber:n,lon:i[0],lat:i[1]}),r.selected=1):r.selected=0);return d}},25064:function(e,t,n){"use strict";var i=n(33428),a=n(43616),s=n(76308),o=n(49224),r=o.stylePoints,c=o.styleText;e.exports=function(e,t){t&&function(e,t){var o=t[0].trace,n=t[0].node3;n.style("opacity",t[0].trace.opacity),r(n,o,e),c(n,o,e),n.selectAll("path.js-line").style("fill","none").each(function(e){var o=i.select(this),t=e.trace,n=t.line||{};o.call(s.stroke,n.color).call(a.dashLine,n.dash||"",n.width||0),"none"!==t.fill&&o.call(s.fill,t.fillcolor)})}(e,t)}},2876:function(e,t,n){"use strict";var g=n(45464),f=n(25376),u=n(98304),s=n(52904),r=n(29736).axisHoverFormat,c=n(49084),d=n(95376),a=n(92880).extendFlat,h=n(67824).overrideAll,m=n(67072).DASHES,l=s.line,o=s.marker,p=o.line,i=e.exports=h({x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),text:s.text,hovertext:s.hovertext,textposition:s.textposition,textfont:f({editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:l.color,width:l.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:d(m),dflt:"solid"}},marker:a({},c("marker"),{symbol:o.symbol,angle:o.angle,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:a({},c("marker.line"),{width:p.width})}),connectgaps:s.connectgaps,fill:a({},s.fill,{dflt:"none"}),fillcolor:u(),selected:{marker:s.selected.marker,textfont:s.selected.textfont},unselected:{marker:s.unselected.marker,textfont:s.unselected.textfont},opacity:g.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=s.hovertemplate,i.texttemplate=s.texttemplate},64628:function(e,t,n){"use strict";var s=n(41272);e.exports={moduleType:"trace",name:"scattergl",basePlotModule:n(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:n(2876),supplyDefaults:n(80220),crossTraceDefaults:n(35036),colorbar:n(5528),formatLabels:n(99396),calc:n(24856),hoverPoints:s.hoverPoints,selectPoints:n(73224),meta:{}}},24856:function(e,t,n){"use strict";var v=n(3108),o=n(3400),a=n(79811),p=n(19280).findExtremes,c=n(1220),i=n(16356),m=i.calcMarkerSize,d=i.calcAxisExpansion,u=i.setFirstScatter,h=n(90136),s=n(84236),f=n(74588),r=n(39032).BADNUM,g=n(67072).TOO_MANY_POINTS;function l(e,t,n){var s=e._extremes[t._id],o=p(t,n._bnds,{padded:!0});s.min=s.min.concat(o.min),s.max=s.max.concat(o.max)}e.exports=function(e,t){var n,i,p,b,C,E,T=e._fullLayout,y=t._xA=a.getFromId(e,t.xaxis,"x"),_=t._yA=a.getFromId(e,t.yaxis,"y"),D=T._plots[t.xaxis+t.yaxis],x=t._length,F=x>=g,A=2*x,j={},M=y.makeCalcdata(t,"x"),z=_.makeCalcdata(t,"y"),S=c(t,y,"x",M),k=c(t,_,"y",z),w=S.vals,O=k.vals;t._x=w,t._y=O,t.xperiodalignment&&(t._origX=M,t._xStarts=S.starts,t._xEnds=S.ends),t.yperiodalignment&&(t._origY=z,t._yStarts=k.starts,t._yEnds=k.ends),b=new Array(A),C=new Array(x);for(p=0;p<x;p++)b[2*p]=w[p]===r?NaN:w[p],b[2*p+1]=O[p]===r?NaN:O[p],C[p]=p;if("log"===y.type)for(p=0;p<A;p+=2)b[p]=y.c2l(b[p]);if("log"===_.type)for(p=1;p<A;p+=2)b[p]=_.c2l(b[p]);return F&&"log"!==y.type&&"log"!==_.type?j.tree=v(b):j.ids=C,h(e,t),i=function(e,t,n,i,a,r){var l,c=s.style(e,n);return(c.marker&&(c.marker.positions=i),c.line&&i.length>1&&o.extendFlat(c.line,s.linePositions(e,n,i)),c.errorX||c.errorY)&&(l=s.errorBarPositions(e,n,i,a,r),c.errorX&&o.extendFlat(c.errorX,l.x),c.errorY&&o.extendFlat(c.errorY,l.y)),c.text&&(o.extendFlat(c.text,{positions:i},s.textPosition(e,n,c.text,c.marker)),o.extendFlat(c.textSel,{positions:i},s.textPosition(e,n,c.text,c.markerSel)),o.extendFlat(c.textUnsel,{positions:i},s.textPosition(e,n,c.text,c.markerUnsel))),c}(e,0,t,b,w,O),n=f(e,D),u(T,t),F?i.marker&&(E=i.marker.sizeAvg||Math.max(i.marker.size,3)):E=m(t,x),d(e,t,y,_,w,O,E),i.errorX&&l(t,y,i.errorX),i.errorY&&l(t,_,i.errorY),i.fill&&!n.fill2d&&(n.fill2d=!0),i.marker&&!n.scatter2d&&(n.scatter2d=!0),i.line&&!n.line2d&&(n.line2d=!0),!i.errorX&&!i.errorY||n.error2d||(n.error2d=!0),i.text&&!n.glText&&(n.glText=!0),i.marker&&(i.marker.snap=x),n.lineOptions.push(i.line),n.errorXOptions.push(i.errorX),n.errorYOptions.push(i.errorY),n.fillOptions.push(i.fill),n.markerOptions.push(i.marker),n.markerSelectedOptions.push(i.markerSel),n.markerUnselectedOptions.push(i.markerUnsel),n.textOptions.push(i.text),n.textSelectedOptions.push(i.textSel),n.textUnselectedOptions.push(i.textUnsel),n.selectBatch.push([]),n.unselectBatch.push([]),j._scene=n,j.index=n.count,j.x=w,j.y=O,j.positions=b,n.count++,[{x:!1,y:!1,t:j,trace:t}]}},67072:function(e){"use strict";e.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(e,t,n){"use strict";var d=n(38248),k=n(20472),l=n(72160),E=n(24040),r=n(3400),s=r.isArrayOrTypedArray,i=n(43616),y=n(79811),g=n(33040).formatColor,a=n(43028),C=n(7152),f=n(80088),c=n(67072),S=n(13448).DESELECTDIM,v={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},x=n(10624).appendArrayPointValue;function j(e,t){var n,l,h,O,y=e._fullLayout,a=t._length,c=t.textfont,b=t.textposition,w=s(b)?b:[b],v=c.color,i=c.size,m=c.family,f=c.weight,p=c.style,g=c.variant,o={},j=e._context.plotGlPixelRatio,u=t.texttemplate;if(u){o.text=[];var M=y._d3locale,_=Array.isArray(u),S=_?Math.min(u.length,a):a,A=_?function(e){return u[e]}:function(){return u};for(n=0;n<S;n++){var C={i:n},k=t._module.formatLabels(C,t,y),E={};x(E,t,n),O=t._meta||{},o.text.push(r.texttemplateString(A(n),k,M,E,C,O))}}else s(t.text)&&t.text.length<a?o.text=t.text.slice():o.text=t.text;if(s(o.text))for(n=o.text.length;n<a;n++)o.text[n]="";for(o.opacity=t.opacity,o.font={},o.align=[],o.baseline=[],n=0;n<w.length;n++){switch(h=w[n].split(/\s+/),h[1]){case"left":o.align.push("right");break;case"right":o.align.push("left");break;default:o.align.push(h[1])}switch(h[0]){case"top":o.baseline.push("bottom");break;case"bottom":o.baseline.push("top");break;default:o.baseline.push(h[0])}}if(s(v))for(o.color=new Array(a),n=0;n<a;n++)o.color[n]=v[n];else o.color=v;if(s(i)||Array.isArray(m)||Array.isArray(f)||Array.isArray(p)||Array.isArray(g))for(o.font=new Array(a),n=0;n<a;n++)l=o.font[n]={},l.size=(r.isTypedArray(i)?i[n]:s(i)?d(i[n])?i[n]:0:i)*j,l.family=Array.isArray(m)?m[n]:m,l.weight=Array.isArray(f)?f[n]:f,l.style=Array.isArray(p)?p[n]:p,l.variant=Array.isArray(g)?g[n]:g;else o.font={size:i*j,family:m,weight:f,style:p,variant:g};return o}function h(e,t){var n,u,m,p,w,x,E,k,a=t._length,o=t.marker,i={},b=s(o.symbol),M=s(o.angle),F=s(o.color),T=s(o.line.color),z=s(o.opacity),S=s(o.size),A=s(o.line.width);if(b||(m=f.isOpenSymbol(o.symbol)),b||F||T||z||M){i.symbols=new Array(a),i.angles=new Array(a),i.colors=new Array(a),i.borderColors=new Array(a);var d=o.symbol,h=o.angle,r=g(o,o.opacity,a),c=g(o.line,o.opacity,a);if(!s(c[0])){w=c;for(c=Array(a),n=0;n<a;n++)c[n]=w}if(!s(r[0])){x=r;for(r=Array(a),n=0;n<a;n++)r[n]=x}if(!s(d)){E=d;for(d=Array(a),n=0;n<a;n++)d[n]=E}if(!s(h)){k=h;for(h=Array(a),n=0;n<a;n++)h[n]=k}for(i.symbols=d,i.angles=h,i.colors=r,i.borderColors=c,n=0;n<a;n++)b&&(m=f.isOpenSymbol(o.symbol[n])),m&&(c[n]=r[n].slice(),r[n]=r[n].slice(),r[n][3]=0);for(i.opacity=t.opacity,i.markers=new Array(a),n=0;n<a;n++)i.markers[n]=O({mx:i.symbols[n],ma:i.angles[n]},t)}else m?(i.color=l(o.color,"uint8"),i.color[3]=0,i.borderColor=l(o.color,"uint8")):(i.color=l(o.color,"uint8"),i.borderColor=l(o.line.color,"uint8")),i.opacity=t.opacity*o.opacity,i.marker=O({mx:o.symbol,ma:o.angle},t);if(u=C(t,1),S||A){var y,v=i.sizes=new Array(a),_=i.borderSizes=new Array(a),j=0;if(S){for(n=0;n<a;n++)v[n]=u(o.size[n]),j+=v[n];y=j/a}else for(p=u(o.size),n=0;n<a;n++)v[n]=p;if(A)for(n=0;n<a;n++)_[n]=o.line.width[n];else for(p=o.line.width,n=0;n<a;n++)_[n]=p;i.sizeAvg=y}else i.size=u(o&&o.size||10),i.borderSizes=u(o.line.width);return i}function m(e,t,n){var o=t.marker,s={};return n?(n.marker&&n.marker.symbol?s=h(0,r.extendFlat({},o,n.marker)):n.marker&&(n.marker.size&&(s.size=n.marker.size),n.marker.color&&(s.colors=n.marker.color),void 0!==n.marker.opacity&&(s.opacity=n.marker.opacity)),s):s}function w(e,t,n){var o,s={};return n?(n.textfont&&(o={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:r.extendFlat({},t.textfont)},n.textfont&&r.extendFlat(o.textfont,n.textfont),s=j(e,o)),s):s}function p(e,t,n){var s={capSize:2*t.width*n,lineWidth:t.thickness*n,color:t.color};return t.copy_ystyle&&(s=e.error_y),s}var b=c.SYMBOL_SDF_SIZE,o=c.SYMBOL_SIZE,_=c.SYMBOL_STROKE,u={},A=i.symbolFuncs[0](.05*o);function O(e,t){if(n=e.mx,"circle"===n)return null;var n,s,r,c,a=i.symbolNumber(n),l=i.symbolFuncs[a%100],d=!!i.symbolNoDot[a%100],h=!!i.symbolNoFill[a%100],m=f.isDotSymbol(n);return e.ma&&(n+="_"+e.ma),u[n]?u[n]:(r=i.getMarkerAngle(e,t),c=m&&!d?l(1.1*o,r)+A:l(o,r),s=k(c,{w:b,h:b,viewBox:[-o,-o,o,o],stroke:h?_:-_}),u[n]=s,s||null)}e.exports={style:function(e,t){var o,r,l,n={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},i=e._context.plotGlPixelRatio;if(!0!==t.visible)return n;if(a.hasText(t)&&(n.text=j(e,t),n.textSel=w(e,t,t.selected),n.textUnsel=w(e,t,t.unselected)),a.hasMarkers(t)&&(n.marker=h(0,t),n.markerSel=m(0,t,t.selected),n.markerUnsel=m(0,t,t.unselected),!t.unselected&&s(t.marker.opacity))){r=t.marker.opacity;for(n.markerUnsel.opacity=new Array(r.length),o=0;o<r.length;o++)n.markerUnsel.opacity[o]=S*r[o]}if(a.hasLines(t)){n.line={overlay:!0,thickness:t.line.width*i,color:t.line.color,opacity:t.opacity},l=(c.DASHES[t.line.dash]||[1]).slice();for(o=0;o<l.length;++o)l[o]*=t.line.width*i;n.line.dashes=l}return t.error_x&&t.error_x.visible&&(n.errorX=p(t,t.error_x,i)),t.error_y&&t.error_y.visible&&(n.errorY=p(t,t.error_y,i)),t.fill&&"none"!==t.fill&&(n.fill={closed:!0,fill:t.fillcolor,thickness:0}),n},markerStyle:h,markerSelection:m,linePositions:function(e,t,n){var s,o,l,d,u,h,m,f,i=n.length,r=i/2;if(a.hasLines(t)&&r)if("hv"===t.line.shape){for(o=[],s=0;s<r-1;s++)isNaN(n[2*s])||isNaN(n[2*s+1])?o.push(NaN,NaN,NaN,NaN):(o.push(n[2*s],n[2*s+1]),isNaN(n[2*s+2])||isNaN(n[2*s+3])?o.push(NaN,NaN):o.push(n[2*s+2],n[2*s+1]));o.push(n[i-2],n[i-1])}else if("hvh"===t.line.shape){for(o=[],s=0;s<r-1;s++)isNaN(n[2*s])||isNaN(n[2*s+1])||isNaN(n[2*s+2])||isNaN(n[2*s+3])?(isNaN(n[2*s])||isNaN(n[2*s+1])?o.push(NaN,NaN):o.push(n[2*s],n[2*s+1]),o.push(NaN,NaN)):(d=(n[2*s]+n[2*s+2])/2,o.push(n[2*s],n[2*s+1],d,n[2*s+1],d,n[2*s+3]));o.push(n[i-2],n[i-1])}else if("vhv"===t.line.shape){for(o=[],s=0;s<r-1;s++)isNaN(n[2*s])||isNaN(n[2*s+1])||isNaN(n[2*s+2])||isNaN(n[2*s+3])?(isNaN(n[2*s])||isNaN(n[2*s+1])?o.push(NaN,NaN):o.push(n[2*s],n[2*s+1]),o.push(NaN,NaN)):(u=(n[2*s+1]+n[2*s+3])/2,o.push(n[2*s],n[2*s+1],n[2*s],u,n[2*s+2],u));o.push(n[i-2],n[i-1])}else if("vh"===t.line.shape){for(o=[],s=0;s<r-1;s++)isNaN(n[2*s])||isNaN(n[2*s+1])?o.push(NaN,NaN,NaN,NaN):(o.push(n[2*s],n[2*s+1]),isNaN(n[2*s+2])||isNaN(n[2*s+3])?o.push(NaN,NaN):o.push(n[2*s],n[2*s+3]));o.push(n[i-2],n[i-1])}else o=n;l=!1;for(s=0;s<o.length;s++)if(isNaN(o[s])){l=!0;break}if(f=l||o.length>c.TOO_MANY_POINTS||a.hasMarkers(t)?"rect":"round",l&&t.connectgaps){h=o[0],m=o[1];for(s=0;s<o.length;s+=2)isNaN(o[s])||isNaN(o[s+1])?(o[s]=h,o[s+1]=m):(h=o[s],m=o[s+1])}return{join:f,positions:o}},errorBarPositions:function(e,t,n,s,o){var c=E.getComponentMethod("errorbars","makeComputeError"),l=y.getFromId(e,t.xaxis,"x"),u=y.getFromId(e,t.yaxis,"y"),i=n.length/2,a={};function r(e,s){if(h=s._id.charAt(0),f=t["error_"+h],f&&f.visible&&("linear"===s.type||"log"===s.type)){for(var o,h,f,j,w,x=c(f),O={x:0,y:1}[h],m={x:[0,1,2,3],y:[2,3,0,1]}[h],r=new Float64Array(4*i),p=1/0,g=-1/0,u=0,l=0;u<i;u++,l+=4)if(o=e[u],d(o)){var y=n[2*u+O],_=x(o,u),b=_[0],v=_[1];d(b)&&d(v)&&(j=o-b,w=o+v,r[l+m[0]]=y-s.c2l(j),r[l+m[1]]=s.c2l(w)-y,r[l+m[2]]=0,r[l+m[3]]=0,p=Math.min(p,o-b),g=Math.max(g,o+v))}a[h]={positions:n,errors:r,_bnds:[p,g]}}}return r(s,l),r(o,u),a},textPosition:function(e,t,n,o){if(d=t._length,l={},a.hasMarkers(t)){var u=n.font,r=n.align,c=n.baseline;for(l.offset=new Array(d),i=0;i<d;i++){var i,l,d,m=o.sizes?o.sizes[i]:o.size,h=s(u)?u[i].size:u.size,j=s(r)?r.length>1?r[i]:r[0]:r,b=s(c)?c.length>1?c[i]:c[0]:c,g=v[j],p=v[b],f=m?m/.8+1:0,y=-p*f-.5*p;l.offset[i]=[g*f/h,y/h]}}return l}}},80220:function(e,t,n){"use strict";var o=n(3400),i=n(24040),a=n(80088),r=n(2876),c=n(88200),s=n(43028),l=n(43980),d=n(31147),u=n(74428),h=n(66828),m=n(70840),f=n(124);e.exports=function(e,t,n,p){function g(n,s){return o.coerce(e,t,r,n,s)}var v,b,j,_,O=!!e.marker&&a.isOpenSymbol(e.marker.symbol),w=s.isBubble(e),y=l(e,t,p,g);y?(d(e,t,p,g),g("xhoverformat"),g("yhoverformat"),_=y<c.PTS_LINESONLY?"lines+markers":"lines",g("text"),g("hovertext"),g("hovertemplate"),g("mode",_),s.hasMarkers(t)&&(u(e,t,n,p,g,{noAngleRef:!0,noStandOff:!0}),g("marker.line.width",O||w?1:0)),s.hasLines(t)&&(g("connectgaps"),h(e,t,n,p,g),g("line.shape")),s.hasText(t)&&(g("texttemplate"),f(e,t,p,g)),b=(t.line||{}).color,j=(t.marker||{}).color,g("fill"),"none"!==t.fill&&m(e,t,n,g),v=i.getComponentMethod("errorbars","supplyDefaults"),v(e,t,b||j||n,{axis:"y"}),v(e,t,b||j||n,{axis:"x",inherit:"y"}),o.coerceSelectionMarkerOpacity(t,g)):t.visible=!1}},26768:function(e,t,n){"use strict";var s=n(3400),o=n(76308),i=n(13448).DESELECTDIM;e.exports={styleTextSelection:function(e){var t,a,h,v=e[0],b=v.trace,m=v.t,r=m._scene,n=m.index,u=r.selectBatch[n],d=r.unselectBatch[n],p=r.textOptions[n],y=r.textSelectedOptions[n]||{},_=r.textUnselectedOptions[n]||{},l=s.extendFlat({},p);if(u.length||d.length){var g=y.color,j=_.color,c=p.color,f=s.isArrayOrTypedArray(c);for(l.color=new Array(b._length),t=0;t<u.length;t++)a=u[t],l.color[a]=g||(f?c[a]:c);for(t=0;t<d.length;t++)a=d[t],h=f?c[a]:c,l.color[a]=j||(g?h:o.addOpacity(h,i))}r.glText[n].update(l)}}},99396:function(e,t,n){"use strict";var s=n(76688);e.exports=function(e,t,n){var o=e.i;return"x"in e||(e.x=t._x[o]),"y"in e||(e.y=t._y[o]),s(e,t,n)}},80088:function(e,t,n){"use strict";var s=n(67072);t.isOpenSymbol=function(e){return"string"==typeof e?s.OPEN_RE.test(e):e%200>100},t.isDotSymbol=function(e){return"string"==typeof e?s.DOT_RE.test(e):e>200}},41272:function(e,t,n){"use strict";var i=n(24040),s=n(3400),a=n(44928);function o(e,t,n,o){var l,d,h,m,p,g,b,E=e.xa,C=e.ya,x=e.distance,O=e.dxy,c=e.index,r={pointNumber:c,x:t[c],y:n[c]};r.tx=s.isArrayOrTypedArray(o.text)?o.text[c]:o.text,r.htx=Array.isArray(o.hovertext)?o.hovertext[c]:o.hovertext,r.data=Array.isArray(o.customdata)?o.customdata[c]:o.customdata,r.tp=Array.isArray(o.textposition)?o.textposition[c]:o.textposition,d=o.textfont,d&&(r.ts=s.isArrayOrTypedArray(d.size)?d.size[c]:d.size,r.tc=s.isArrayOrTypedArray(d.color)?d.color[c]:d.color,r.tf=Array.isArray(d.family)?d.family[c]:d.family,r.tw=Array.isArray(d.weight)?d.weight[c]:d.weight,r.ty=Array.isArray(d.style)?d.style[c]:d.style,r.tv=Array.isArray(d.variant)?d.variant[c]:d.variant),l=o.marker,l&&(r.ms=s.isArrayOrTypedArray(l.size)?l.size[c]:l.size,r.mo=s.isArrayOrTypedArray(l.opacity)?l.opacity[c]:l.opacity,r.mx=s.isArrayOrTypedArray(l.symbol)?l.symbol[c]:l.symbol,r.ma=s.isArrayOrTypedArray(l.angle)?l.angle[c]:l.angle,r.mc=s.isArrayOrTypedArray(l.color)?l.color[c]:l.color),m=l&&l.line,m&&(r.mlc=Array.isArray(m.color)?m.color[c]:m.color,r.mlw=s.isArrayOrTypedArray(m.width)?m.width[c]:m.width),h=l&&l.gradient,h&&"none"!==h.type&&(r.mgt=Array.isArray(h.type)?h.type[c]:h.type,r.mgc=Array.isArray(h.color)?h.color[c]:h.color);var j=E.c2p(r.x,!0),y=C.c2p(r.y,!0),v=r.mrc||1,u=o.hoverlabel;u&&(r.hbg=Array.isArray(u.bgcolor)?u.bgcolor[c]:u.bgcolor,r.hbc=Array.isArray(u.bordercolor)?u.bordercolor[c]:u.bordercolor,r.hts=s.isArrayOrTypedArray(u.font.size)?u.font.size[c]:u.font.size,r.htc=Array.isArray(u.font.color)?u.font.color[c]:u.font.color,r.htf=Array.isArray(u.font.family)?u.font.family[c]:u.font.family,r.hnl=s.isArrayOrTypedArray(u.namelength)?u.namelength[c]:u.namelength),g=o.hoverinfo,g&&(r.hi=Array.isArray(g)?g[c]:g),p=o.hovertemplate,p&&(r.ht=Array.isArray(p)?p[c]:p),b={},b[e.index]=r;var _=o._origX,w=o._origY,f=s.extendFlat({},e,{color:a(o,r),x0:j-v,x1:j+v,xLabelVal:_?_[c]:r.x,y0:y-v,y1:y+v,yLabelVal:w?w[c]:r.y,cd:b,distance:x,spikeDistance:O,hovertemplate:r.ht});return r.htx?f.text=r.htx:r.tx?f.text=r.tx:o.text&&(f.text=o.text),s.fillText(r,o,f),i.getComponentMethod("errorbars","hoverInfo")(r,o,f),f}e.exports={hoverPoints:function(e,t,n,s){var a,r,c,d,u,g,b,y,_,x,C,E,k,S,M,F,D,z=e.cd,m=z[0].t,h=z[0].trace,l=e.xa,i=e.ya,A=m.x,O=m.y,p=l.c2p(t),f=i.c2p(n),v=e.distance;if(m.tree){var j=l.p2c(p-v),w=l.p2c(p+v),T=i.p2c(f-v),N=i.p2c(f+v);d="x"===s?m.tree.range(Math.min(j,w),Math.min(i._rl[0],i._rl[1]),Math.max(j,w),Math.max(i._rl[0],i._rl[1])):m.tree.range(Math.min(j,w),Math.min(T,N),Math.max(j,w),Math.max(T,N))}else d=m.ids;if(g=v,"x"===s){M=!!h.xperiodalignment,F=!!h.yperiodalignment;for(c=0;c<d.length;c++)(_=A[r=d[c]],a=Math.abs(l.c2p(_)-p),M)&&(k=l.c2p(h._xStarts[r]),x=l.c2p(h._xEnds[r]),a=p>=Math.min(k,x)&&p<=Math.max(k,x)?0:1/0),a<g&&((g=a,y=O[r],u=i.c2p(y)-f,F)&&(E=i.c2p(h._yStarts[r]),S=i.c2p(h._yEnds[r]),u=f>=Math.min(E,S)&&f<=Math.max(E,S)?0:1/0),C=Math.sqrt(a*a+u*u),b=d[c])}else for(c=d.length-1;c>-1;c--)_=A[r=d[c]],y=O[r],a=l.c2p(_)-p,u=i.c2p(y)-f,(D=Math.sqrt(a*a+u*u))<g&&(g=C=D,b=r);return e.index=b,e.distance=g,e.dxy=C,void 0===b?[e]:[o(e,A,O,h)]},calcHover:o}},38983:function(e,t,n){"use strict";var s=n(64628);s.plot=n(89876),e.exports=s},89876:function(e,t,n){"use strict";var o=n(38540),i=n(13472),c=n(24544),a=n(23352),s=n(3400),l=n(72760).selectMode,d=n(5048),u=n(43028),h=n(14328),m=n(26768).styleTextSelection,r={};function f(e,t,n,s){var o=e._size,u=e.width*s,h=e.height*s,r=o.l*s,c=o.b*s,l=o.r*s,d=o.t*s,i=o.w*s,a=o.h*s;return[r+t.domain[0]*i,c+n.domain[0]*a,u-l-(1-t.domain[1])*i,h-d-(1-n.domain[1])*a]}(e.exports=function(e,t,n){if(n.length){var g,v,x=e._fullLayout,p=t._scene,O=t.xaxis,w=t.yaxis;if(p)if(d(e,["ANGLE_instanced_arrays","OES_element_index_uint"],r)){if(b=p.count,j=x._glcanvas.data()[0].regl,h(e,t,n),p.dirty){if(!p.line2d&&!p.error2d||p.scatter2d||p.fill2d||p.glText||j.clear({}),!0===p.error2d&&(p.error2d=c(j)),!0===p.line2d&&(p.line2d=i(j)),!0===p.scatter2d&&(p.scatter2d=o(j)),!0===p.fill2d&&(p.fill2d=i(j)),!0===p.glText)for(p.glText=new Array(b),g=0;g<b;g++)p.glText[g]=new a(j);if(p.glText){if(b>p.glText.length){D=b-p.glText.length;for(g=0;g<D;g++)p.glText.push(new a(j))}else b<p.glText.length&&(R=p.glText.length-b,p.glText.splice(b,R).forEach(function(e){e.destroy()}));for(g=0;g<b;g++)p.glText[g].update(p.textOptions[g])}(p.line2d&&(p.line2d.update(p.lineOptions),p.lineOptions=p.lineOptions.map(function(e){if(e&&e.positions){for(var s,t=e.positions,n=0;n<t.length&&(isNaN(t[n])||isNaN(t[n+1]));)n+=2;for(s=t.length-2;s>n&&(isNaN(t[s])||isNaN(t[s+1]));)s-=2;e.positions=t.slice(n,s+2)}return e}),p.line2d.update(p.lineOptions)),p.error2d)&&(P=(p.errorXOptions||[]).concat(p.errorYOptions||[]),p.error2d.update(P)),p.scatter2d&&p.scatter2d.update(p.markerOptions),p.fillOrder=s.repeat(null,b),p.fill2d&&(p.fillOptions=p.fillOptions.map(function(e,t){if(d=n[t],e&&d&&d[0]&&d[0].trace){var s,o,i,a,r,l,d,m,f,g,v,b,y=d[0],c=y.trace,O=y.t,j=p.lineOptions[t],u=[];if(c._ownfill&&u.push(t),c._nexttrace&&u.push(t+1),u.length&&(p.fillOrder[t]=u),o=[],s=j&&j.positions||O.positions,"tozeroy"===c.fill){for(i=0;i<s.length&&isNaN(s[i+1]);)i+=2;for(r=s.length-2;r>i&&isNaN(s[r+1]);)r-=2;0!==s[i+1]&&(o=[s[i],0]),o=o.concat(s.slice(i,r+2)),0!==s[r+1]&&(o=o.concat([s[r],0]))}else if("tozerox"===c.fill){for(i=0;i<s.length&&isNaN(s[i]);)i+=2;for(r=s.length-2;r>i&&isNaN(s[r]);)r-=2;0!==s[i]&&(o=[0,s[i+1]]),o=o.concat(s.slice(i,r+2)),0!==s[r]&&(o=o.concat([0,s[r+1]]))}else if("toself"===c.fill||"tonext"===c.fill){for(o=[],l=0,e.splitNull=!0,a=0;a<s.length;a+=2)(isNaN(s[a])||isNaN(s[a+1]))&&((o=o.concat(s.slice(l,a))).push(s[l],s[l+1]),o.push(null,null),l=a+2);o=o.concat(s.slice(l)),l&&o.push(s[l],s[l+1])}else if(v=c._nexttrace,v&&(b=p.lineOptions[t+1],b&&(m=b.positions,"tonexty"===c.fill))){for(o=s.slice(),t=Math.floor(m.length/2);t--;)f=m[2*t],g=m[2*t+1],isNaN(f)||isNaN(g)||o.push(f,g);e.fill=v.fillcolor}if(c._prevtrace&&"tonext"===c._prevtrace.fill){var h=p.lineOptions[t-1].positions,_=o.length/2,w=[l=_];for(a=0;a<h.length;a+=2)(isNaN(h[a])||isNaN(h[a+1]))&&(w.push(a/2+_+1),l=a+2);o=o.concat(h),e.hole=w}return e.fillmode=c.fill,e.opacity=c.opacity,e.positions=o,e}}),p.fill2d.update(p.fillOptions))}var V=x.dragmode,C=l(V),$=x.clickmode.indexOf("select")>-1;for(g=0;g<b;g++){var b,j,_,A,S,M,F,T,D,N,R,P,H,z=n[g][0],E=z.trace,y=z.t,L=y.index,k=E._length,B=y.x,I=y.y;if(E.selectedpoints||C||$){if(C||(C=!0),E.selectedpoints){T=p.selectBatch[L]=s.selIndices2selPoints(E),F={};for(v=0;v<T.length;v++)F[T[v]]=1;M=[];for(v=0;v<k;v++)F[v]||M.push(v);p.unselectBatch[L]=M}H=y.xpx=new Array(k),N=y.ypx=new Array(k);for(v=0;v<k;v++)H[v]=O.c2p(B[v]),N[v]=w.c2p(I[v])}else y.xpx=y.ypx=null}if(C){if(p.select2d||(p.select2d=o(x._glcanvas.data()[1].regl)),p.scatter2d){A=new Array(b);for(g=0;g<b;g++)A[g]=p.selectBatch[g].length||p.unselectBatch[g].length?p.markerUnselectedOptions[g]:{};p.scatter2d.update(A)}p.select2d&&(p.select2d.update(p.markerOptions),p.select2d.update(p.markerSelectedOptions)),p.glText&&n.forEach(function(e){var t=((e||[])[0]||{}).trace||{};u.hasText(t)&&m(e)})}else p.scatter2d&&p.scatter2d.update(p.markerOptions);S={viewport:f(x,O,w,e._context.plotGlPixelRatio),range:[(O._rl||O.range)[0],(w._rl||w.range)[0],(O._rl||O.range)[1],(w._rl||w.range)[1]]},_=s.repeat(S,p.count),p.fill2d&&p.fill2d.update(_),p.line2d&&p.line2d.update(_),p.error2d&&p.error2d.update(_.concat(_)),p.scatter2d&&p.scatter2d.update(_),p.select2d&&p.select2d.update(_),p.glText&&p.glText.forEach(function(e){e.update(S)})}else p.init()}}).reglPrecompiled=r},74588:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){var n=t._scene,o={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return t._scene||((n=t._scene={}).init=function(){s.extendFlat(n,i,o)},n.init(),n.update=function(e){var o,t=s.repeat(e,n.count);if(n.fill2d&&n.fill2d.update(t),n.scatter2d&&n.scatter2d.update(t),n.line2d&&n.line2d.update(t),n.error2d&&n.error2d.update(t.concat(t)),n.select2d&&n.select2d.update(t),n.glText)for(o=0;o<n.count;o++)n.glText[o].update(e)},n.draw=function(){for(var i,a=n.count,r=n.fill2d,t=n.error2d,h=n.line2d,o=n.scatter2d,c=n.glText,l=n.select2d,d=n.selectBatch,u=n.unselectBatch,e=0;e<a;e++)(r&&n.fillOrder[e]&&r.draw(n.fillOrder[e]),h&&n.lineOptions[e]&&h.draw(e),t&&(n.errorXOptions[e]&&t.draw(e),n.errorYOptions[e]&&t.draw(e+a)),o&&n.markerOptions[e])&&(u[e].length?(i=s.repeat([],n.count),i[e]=u[e],o.draw(i)):d[e].length||o.draw(e)),c[e]&&n.textOptions[e]&&c[e].render();l&&l.draw(d),n.dirty=!1},n.destroy=function(){n.fill2d&&n.fill2d.destroy&&n.fill2d.destroy(),n.scatter2d&&n.scatter2d.destroy&&n.scatter2d.destroy(),n.error2d&&n.error2d.destroy&&n.error2d.destroy(),n.line2d&&n.line2d.destroy&&n.line2d.destroy(),n.select2d&&n.select2d.destroy&&n.select2d.destroy(),n.glText&&n.glText.forEach(function(e){e.destroy&&e.destroy()}),n.lineOptions=null,n.fillOptions=null,n.markerOptions=null,n.markerSelectedOptions=null,n.markerUnselectedOptions=null,n.errorXOptions=null,n.errorYOptions=null,n.textOptions=null,n.textSelectedOptions=null,n.textUnselectedOptions=null,n.selectBatch=null,n.unselectBatch=null,t._scene=null}),n.dirty||s.extendFlat(n,o),n}},73224:function(e,t,n){"use strict";var s=n(43028),o=n(26768).styleTextSelection;e.exports=function(e,t){var n,c,l,u,m,p,f=e.cd,w=e.xaxis,_=e.yaxis,h=[],d=f[0].trace,r=f[0].t,y=d._length,j=r.x,b=r.y,i=r._scene,a=r.index;if(!i)return h;var g=s.hasText(d),v=s.hasMarkers(d),O=!v&&!g;if(!0!==d.visible||O)return h;if(u=[],l=[],!1!==t&&!t.degenerate)for(n=0;n<y;n++)t.contains([r.xpx[n],r.ypx[n]],!1,n,e)?(u.push(n),h.push({pointNumber:n,x:w.c2d(j[n]),y:_.c2d(b[n])})):l.push(n);return v&&(c=i.scatter2d,u.length||l.length?!i.selectBatch[a].length&&!i.unselectBatch[a].length&&(m=new Array(i.count),m[a]=i.markerUnselectedOptions[a],c.update.apply(c,m)):(p=new Array(i.count),p[a]=i.markerOptions[a],c.update.apply(c,p))),i.selectBatch[a]=u,i.unselectBatch[a]=l,g&&o(f),h}},31512:function(e,t,n){"use strict";var p=n(21776).Ks,f=n(21776).Gw,u=n(98304),a=n(6096),i=n(52904),c=n(5232),l=n(45464),d=n(49084),s=n(92880).extendFlat,h=n(67824).overrideAll,m=n(5232),r=a.line,o=a.marker;e.exports=h({lon:a.lon,lat:a.lat,cluster:{enabled:{valType:"boolean"},maxzoom:s({},m.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:s({},o.opacity,{dflt:1})},mode:s({},i.mode,{dflt:"markers"}),text:s({},i.text,{}),texttemplate:f({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:s({},i.hovertext,{}),line:{color:r.color,width:r.width},connectgaps:i.connectgaps,marker:s({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},d("marker")),fill:a.fill,fillcolor:u(),textfont:c.layers.symbol.textfont,textposition:c.layers.symbol.textposition,below:{valType:"string"},selected:{marker:i.selected.marker},unselected:{marker:i.unselected.marker},hoverinfo:s({},l.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:p()},"calc","nested")},59392:function(e,t,n){"use strict";var h=n(38248),s=n(3400),j=n(39032).BADNUM,i=n(44808),d=n(8932),b=n(43616),v=n(7152),r=n(43028),g=n(89032),y=n(10624).appendArrayPointValue,p=n(72736).NEWLINES,f=n(72736).BR_TAG_ALL;function o(e){return{type:e,geojson:i.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function l(e,t){return s.isArrayOrTypedArray(e)?t?function(t){return h(e[t])?+e[t]:0}:function(t){return e[t]}:e?function(){return e}:a}function a(){return""}function u(e){return e[0]===j}function c(e,t){if(s.isArrayOrTypedArray(e)&&s.isArrayOrTypedArray(t)){n=["step",["get","point_count"],e[0]];for(var n,o=1;o<e.length;o++)n.push(t[o-1],e[o])}else n=e;return n}function m(e){var n,s=e.textfont,t="";return"bold"===s.weight&&(t+=" Bold"),"italic"===s.style&&(t+=" Italic"),n=s.family,t&&(n=n.replace(" Regular",t)),n.split(", ")}e.exports=function(e,t){var w,E,k,D,n=t[0].trace,L=!0===n.visible&&0!==n._length,z="none"!==n.fill,T=r.hasLines(n),F=r.hasMarkers(n),M=r.hasText(n),S=F&&"circle"===n.marker.symbol,A=F&&"circle"!==n.marker.symbol,N=n.cluster&&n.cluster.enabled,C=o("fill"),O=o("line"),_=o("circle"),j=o("symbol"),x={fill:C,line:O,circle:_,symbol:j};return L?(((z||T)&&(E=i.calcTraceToLineCoords(t)),z&&(C.geojson=i.makePolygon(E),C.layout.visibility="visible",s.extendFlat(C.paint,{"fill-color":n.fillcolor})),T&&(O.geojson=i.makeLine(E),O.layout.visibility="visible",s.extendFlat(O.paint,{"line-width":n.line.width,"line-color":n.line.color,"line-opacity":n.opacity})),S)&&(w=function(e){var t,n,o,a,c,l,m,f,p,j,y,r=e[0].trace,i=r.marker,O=r.selectedpoints,w=s.isArrayOrTypedArray(i.color),_=s.isArrayOrTypedArray(i.size),x=s.isArrayOrTypedArray(i.opacity);function g(e){return r.opacity*e}w&&(f=d.hasColorscale(r,"marker")?d.makeColorScaleFuncFromTrace(i):s.identity),_&&(j=v(r)),x&&(p=function(e){return g(h(e)?+s.constrain(e,0,1):0)}),l=[];for(n=0;n<e.length;n++)o=e[n],m=o.lonlat,u(m)||(c={},f&&(c.mcc=o.mcc=f(o.mc)),j&&(c.mrc=o.mrc=j(o.ms)),p&&(c.mo=p(o.mo)),O&&(c.selected=o.selected||0),l.push({type:"Feature",id:n+1,geometry:{type:"Point",coordinates:m},properties:c}));if(O)for(t=b.makeSelectedPointStyleFns(r),n=0;n<l.length;n++)a=l[n].properties,t.selectedOpacityFn&&(a.mo=g(t.selectedOpacityFn(a))),t.selectedColorFn&&(a.mcc=t.selectedColorFn(a)),t.selectedSizeFn&&(a.mrc=t.selectedSizeFn(a));return{geojson:{type:"FeatureCollection",features:l},mcc:w||t&&t.selectedColorFn?{type:"identity",property:"mcc"}:i.color,mrc:_||t&&t.selectedSizeFn?{type:"identity",property:"mrc"}:(y=i.size,y/2),mo:x||t&&t.selectedOpacityFn?{type:"identity",property:"mo"}:g(i.opacity)}}(t),_.geojson=w.geojson,_.layout.visibility="visible",N&&(_.filter=["!",["has","point_count"]],x.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":c(n.cluster.color,n.cluster.step),"circle-radius":c(n.cluster.size,n.cluster.step),"circle-opacity":c(n.cluster.opacity,n.cluster.step)}},x.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":m(n),"text-size":12}}),s.extendFlat(_.paint,{"circle-color":w.mcc,"circle-radius":w.mrc,"circle-opacity":w.mo})),(S&&N&&(_.filter=["!",["has","point_count"]]),(A||M)&&(j.geojson=function(e,t){for(var i,c,d,_,j=t._fullLayout,n=e[0].trace,h=n.marker||{},b=h.symbol,m=h.angle,E="circle"!==b?l(b):a,O="auto"!==m?l(m,!0):a,w=r.hasText(n)?l(n.text):a,v=[],o=0;o<e.length;o++)if(i=e[o],!u(i.lonlat)){if(d=n.texttemplate,d){var x=Array.isArray(d)?d[o]||"":d,C=n._module.formatLabels(i,n,j),g={};y(g,n,i.i),_=n._meta||{},c=s.texttemplateString(x,C,j._d3locale,g,i,_)}else c=w(o);c&&(c=c.replace(p,"").replace(f,`
`)),v.push({type:"Feature",geometry:{type:"Point",coordinates:i.lonlat},properties:{symbol:E(o),angle:O(o),text:c}})}return{type:"FeatureCollection",features:v}}(t,e),s.extendFlat(j.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),A&&(s.extendFlat(j.layout,{"icon-size":n.marker.size/10}),"angle"in n.marker&&"auto"!==n.marker.angle&&s.extendFlat(j.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),j.layout["icon-allow-overlap"]=n.marker.allowoverlap,s.extendFlat(j.paint,{"icon-opacity":n.opacity*n.marker.opacity,"icon-color":n.marker.color})),M))&&(D=(n.marker||{}).size,k=g(n.textposition,D),s.extendFlat(j.layout,{"text-size":n.textfont.size,"text-anchor":k.anchor,"text-offset":k.offset,"text-font":m(n)}),s.extendFlat(j.paint,{"text-color":n.textfont.color,"text-opacity":n.opacity})),x):x}},15752:function(e,t,n){"use strict";var s=n(3400),o=n(43028),a=n(74428),r=n(66828),c=n(124),l=n(70840),i=n(31512),d=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];e.exports=function(e,t,n,u){function h(n,o){return s.coerce(e,t,i,n,o)}function f(n,o){return s.coerce2(e,t,i,n,o)}if(p=function(e,t,n){var o=n("lon")||[],i=n("lat")||[],s=Math.min(o.length,i.length);return t._length=s,s}(0,t,h),p){(h("text"),h("texttemplate"),h("hovertext"),h("hovertemplate"),h("mode"),h("below"),o.hasMarkers(t))&&(a(e,t,n,u,h,{noLine:!0,noAngle:!0}),h("marker.allowoverlap"),h("marker.angle"),m=t.marker,"circle"!==m.symbol&&(s.isArrayOrTypedArray(m.size)&&(m.size=m.size[0]),s.isArrayOrTypedArray(m.color)&&(m.color=m.color[0]))),o.hasLines(t)&&(r(e,t,n,u,h,{noDash:!0}),h("connectgaps"));var m,p,g=f("cluster.maxzoom"),v=f("cluster.step"),b=f("cluster.color",t.marker&&t.marker.color||n),j=f("cluster.size"),y=f("cluster.opacity");(h("cluster.enabled",!1!==g||!1!==v||!1!==b||!1!==j||!1!==y)||o.hasText(t))&&c(e,t,u,h,{noSelect:!0,noFontVariant:!0,font:{family:-1!==d.indexOf(u.font.family)?u.font.family:"Open Sans Regular",weight:u.font.weight,style:u.font.style,size:u.font.size,color:u.font.color}}),h("fill"),"none"!==t.fill&&l(e,t,n,h),s.coerceSelectionMarkerOpacity(t,h)}else t.visible=!1}},37920:function(e){"use strict";e.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e}},11960:function(e,t,n){"use strict";var s=n(54460);e.exports=function(e,t,n){var i={},o=n[t.subplot]._subplot.mockAxis,a=e.lonlat;return i.lonLabel=s.tickText(o,o.c2l(a[0]),!0).text,i.latLabel=s.tickText(o,o.c2l(a[1]),!0).text,i}},63312:function(e,t,n){"use strict";var l=n(93024),s=n(3400),i=n(44928),a=s.fillText,r=n(39032).BADNUM,c=n(47552).traceLayerPrefix;function o(e,t,n){if(!e.hovertemplate){var o=(t.hi||e.hoverinfo).split("+"),c=-1!==o.indexOf("all"),l=-1!==o.indexOf("lon"),d=-1!==o.indexOf("lat"),i=t.lonlat,s=[];return c||l&&d?s.push("("+r(i[1])+", "+r(i[0])+")"):l?s.push(n.lon+r(i[0])):d&&s.push(n.lat+r(i[1])),(c||-1!==o.indexOf("text"))&&a(t,e,s),s.join("<br>")}function r(e){return e+"°"}}e.exports={hoverPoints:function(e,t,n){var m,p,g,b,y,u=e.cd,a=u[0].trace,C=e.xa,x=e.ya,f=e.subplot,_=[],k=c+a.uid+"-circle",v=a.cluster&&a.cluster.enabled;if(v&&(b=f.map.queryRenderedFeatures(null,{layers:[k]}),_=b.map(function(e){return e.id})),p=360*(t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360)),y=t-p,l.getClosest(u,function(e){if(t=e.lonlat,t[0]===r)return 1/0;if(v&&-1===_.indexOf(e.i+1))return 1/0;var t,o=s.modHalf(t[0],360),i=t[1],a=f.project([o,i]),c=a.x-C.c2p([y,i]),l=a.y-x.c2p([o,n]),d=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(c*c+l*l)-d,1-3/d)},e),!1!==e.index){var d=u[e.index],E=d.lonlat,w=[s.modHalf(E[0],360)+p,E[1]],O=C.c2p(w),j=x.c2p(w),h=d.mrc||1;return e.x0=O-h,e.x1=O+h,e.y0=j-h,e.y1=j+h,m={},m[a.subplot]={_subplot:f},g=a._module.formatLabels(d,a,m),e.lonLabel=g.lonLabel,e.latLabel=g.latLabel,e.color=i(a,d),e.extraText=o(a,d,u[0].t.labels),e.hovertemplate=a.hovertemplate,[e]}},getExtraText:o}},11572:function(e,t,n){"use strict";e.exports={attributes:n(31512),supplyDefaults:n(15752),colorbar:n(5528),formatLabels:n(11960),calc:n(25212),plot:n(9660),hoverPoints:n(63312).hoverPoints,eventData:n(37920),selectPoints:n(404),styleOnSelect:function(e,t){t&&t[0].trace._glTrace.update(t)},moduleType:"trace",name:"scattermapbox",basePlotModule:n(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(e,t,n){"use strict";var i,c=n(3400),a=n(59392),o=n(47552).traceLayerPrefix,s={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function r(e,t,n,s){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=n,this.isHidden=s,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol",cluster:o+t+"-cluster",clusterCount:o+t+"-cluster-count"},this.below=null}i=r.prototype,i.addSource=function(e,t,n){var s,o={type:"geojson",data:t.geojson};n&&n.enabled&&c.extendFlat(o,{cluster:!0,clusterMaxZoom:n.maxzoom}),s=this.subplot.map.getSource(this.sourceIds[e]),s?s.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],o)},i.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)},i.addLayer=function(e,t,n){s={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint},t.filter&&(s.filter=t.filter);for(var s,a,o=this.layerIds[e],r=this.subplot.getMapLayers(),i=0;i<r.length;i++)if(r[i].id===o){a=!0;break}a?(this.subplot.setOptions(o,"setLayoutProperty",s.layout),"visible"===s.layout.visibility&&this.subplot.setOptions(o,"setPaintProperty",s.paint)):this.subplot.addLayer(s,n)},i.update=function(e){var d,m,l=e[0].trace,n=this.subplot,o=n.map,i=a(n.gd,e),r=n.belowLookup["trace-"+this.uid],c=!!l.cluster&&!!l.cluster.enabled,p=!!this.clusterEnabled,t=this;function u(e){p?function(e){for(var a,i=s.cluster,n=i.length-1;n>=0;n--)a=i[n],o.removeLayer(t.layerIds[a]);e||o.removeSource(t.sourceIds.circle)}(e):function(e){for(var i,a=s.nonCluster,n=a.length-1;n>=0;n--)i=a[n],o.removeLayer(t.layerIds[i]),e||o.removeSource(t.sourceIds[i])}(e)}function h(e){c?function(e){e||t.addSource("circle",i.circle,l.cluster);for(var o,c,a=s.cluster,n=0;n<a.length;n++)o=a[n],c=i[o],t.addLayer(o,c,r)}(e):function(e){for(var n,a,c=s.nonCluster,o=0;o<c.length;o++)n=c[o],a=i[n],e||t.addSource(n,a),t.addLayer(n,a,r)}(e)}function f(){for(var e,o,r=c?s.cluster:s.nonCluster,a=0;a<r.length;a++)e=r[a],o=i[e],o&&(n.setOptions(t.layerIds[e],"setLayoutProperty",o.layout),"visible"===o.layout.visibility&&("cluster"!==e&&t.setSourceData(e,o),n.setOptions(t.layerIds[e],"setPaintProperty",o.paint)))}m=this.isHidden,d=!0!==l.visible,d?m||u():m?d||h():p!==c?(u(),h()):this.below!==r?(u(!0),h(!0),f()):f(),this.clusterEnabled=c,this.isHidden=d,this.below=r,e[0].trace._glTrace=this},i.dispose=function(){for(var t,n=this.subplot.map,o=this.clusterEnabled?s.cluster:s.nonCluster,e=o.length-1;e>=0;e--)t=o[e],n.removeLayer(this.layerIds[t]),n.removeSource(this.sourceIds[t])},e.exports=function(e,t){var n,c,l,o=t[0].trace,u=o.cluster&&o.cluster.enabled,m=!0!==o.visible,i=new r(e,o.uid,u,m),d=a(e.gd,t),h=i.below=e.belowLookup["trace-"+o.uid];if(u)for(i.addSource("circle",d.circle,o.cluster),n=0;n<s.cluster.length;n++)l=d[c=s.cluster[n]],i.addLayer(c,l,h);else for(n=0;n<s.nonCluster.length;n++)l=d[c=s.nonCluster[n]],i.addSource(c,l,o.cluster),i.addLayer(c,l,h);return t[0].trace._glTrace=i,i}},404:function(e,t,n){"use strict";var s=n(3400),o=n(43028),i=n(39032).BADNUM;e.exports=function(e,t){var n,a,c,l,d,r=e.cd,m=e.xaxis,f=e.yaxis,u=[],h=r[0].trace;if(!o.hasMarkers(h))return[];if(!1===t)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++)c=r[n],a=c.lonlat,a[0]!==i&&(l=[s.modHalf(a[0],360),a[1]],d=[m.c2p(l),f.c2p(l)],t.contains(d,null,n,e)?(u.push({pointNumber:n,lon:a[0],lat:a[1]}),c.selected=1):c.selected=0);return u}},8319:function(e,t,n){"use strict";var l=n(21776).Ks,a=n(21776).Gw,i=n(92880).extendFlat,r=n(98304),s=n(52904),c=n(45464),o=s.line;e.exports={mode:s.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:s.text,texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:s.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:i({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:s.connectgaps,marker:s.marker,cliponaxis:i({},s.cliponaxis,{dflt:!1}),textposition:s.textposition,textfont:s.textfont,fill:i({},s.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r(),hoverinfo:i({},c.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:s.hoveron,hovertemplate:l(),selected:s.selected,unselected:s.unselected}},58320:function(e,t,n){"use strict";var s=n(38248),o=n(39032).BADNUM,i=n(54460),a=n(90136),r=n(20148),c=n(4500),l=n(16356).calcMarkerSize;e.exports=function(e,t){for(var j,m=e._fullLayout,v=t.subplot,g=m[v].radialaxis,_=m[v].angularaxis,p=g.makeCalcdata(t,"r"),y=_.makeCalcdata(t,"theta"),u=t._length,d=new Array(u),n=0;n<u;n++){var b=p[n],f=y[n],h=d[n]={};s(b)&&s(f)?(h.r=b,h.theta=f):h.r=o}return j=l(t,u),t._extremes.x=i.findExtremes(g,p,{ppad:j}),a(e,t),r(d,t),c(d,t),d}},85968:function(e,t,n){"use strict";var o=n(3400),s=n(43028),r=n(74428),h=n(66828),a=n(11731),c=n(124),l=n(70840),d=n(88200).PTS_LINESONLY,u=n(8319);function i(e,t,n,s){var r,i=s("r"),a=s("theta");if(o.isTypedArray(i)&&(t.r=i=Array.from(i)),o.isTypedArray(a)&&(t.theta=a=Array.from(a)),i)a?r=Math.min(i.length,a.length):(r=i.length,s("theta0"),s("dtheta"));else{if(!a)return 0;r=t.theta.length,s("r0"),s("dr")}return t._length=r,r}e.exports={handleRThetaDefaults:i,supplyDefaults:function(e,t,n,m){function f(n,s){return o.coerce(e,t,u,n,s)}var p,g=i(0,t,0,f);g?(f("thetaunit"),f("mode",g<d?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==t.hoveron&&f("hovertemplate"),s.hasMarkers(t)&&r(e,t,n,m,f,{gradient:!0}),s.hasLines(t)&&(h(e,t,n,m,f,{backoff:!0}),a(e,t,f),f("connectgaps")),s.hasText(t)&&(f("texttemplate"),c(e,t,m,f)),p=[],(s.hasMarkers(t)||s.hasText(t))&&(f("cliponaxis"),f("marker.maxdisplayed"),p.push("points")),f("fill"),"none"!==t.fill&&(l(e,t,n,f),s.hasLines(t)||a(e,t,f)),"tonext"!==t.fill&&"toself"!==t.fill||p.push("fills"),f("hoveron",p.join("+")||"points"),o.coerceSelectionMarkerOpacity(t,f)):t.visible=!1}}},22852:function(e,t,n){"use strict";var o=n(3400),s=n(54460);e.exports=function(e,t,n){var a,r,l,d,c={},i=n[t.subplot]._subplot;return i?(a=i.radialAxis,r=i.angularAxis):(a=(i=n[t.subplot]).radialaxis,r=i.angularaxis),l=a.c2l(e.r),c.rLabel=s.tickText(a,l,!0).text,d="degrees"===r.thetaunit?o.rad2deg(e.theta):e.theta,c.thetaLabel=s.tickText(r,d,!0).text,c}},8504:function(e,t,n){"use strict";var o=n(98723);function s(e,t,n,s){var o,i,a,r,l,c=n.radialAxis,u=n.angularAxis;c._hovertitle="r",u._hovertitle="θ",a={},a[t.subplot]={_subplot:n},r=t._module.formatLabels(e,t,a),s.rLabel=r.rLabel,s.thetaLabel=r.thetaLabel,l=e.hi||t.hoverinfo,i=[];function d(e,t){i.push(e._hovertitle+": "+t)}t.hovertemplate||(o=l.split("+"),-1!==o.indexOf("all")&&(o=["r","theta","text"]),-1!==o.indexOf("r")&&d(c,s.rLabel),-1!==o.indexOf("theta")&&d(u,s.thetaLabel),-1!==o.indexOf("text")&&s.text&&(i.push(s.text),delete s.text),s.extraText=i.join("<br>"))}e.exports={hoverPoints:function(e,t,n,i){if(r=o(e,t,n,i),r&&!1!==r[0].index){if(a=r[0],void 0===a.index)return r;var a,r,c=e.subplot,l=a.cd[a.index],d=a.trace;if(c.isPtInside(l))return a.xLabelVal=void 0,a.yLabelVal=void 0,s(l,d,c,a),a.hovertemplate=d.hovertemplate,r}},makeHoverPointText:s}},76924:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:n(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:n(8319),supplyDefaults:n(85968).supplyDefaults,colorbar:n(5528),formatLabels:n(22852),calc:n(58320),plot:n(43456),style:n(49224).style,styleOnSelect:n(49224).styleOnSelect,hoverPoints:n(8504).hoverPoints,selectPoints:n(91560),meta:{}}},43456:function(e,t,n){"use strict";var o=n(96504),s=n(39032).BADNUM;e.exports=function(e,t,n){for(var i,a,r,l,d,u,v=t.layers.frontplot.select("g.scatterlayer"),m=t.xaxis,h=t.yaxis,g={xaxis:m,yaxis:h,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},p=t.radialAxis,f=t.angularAxis,c=0;c<n.length;c++)for(r=n[c],a=0;a<r.length;a++)0===a&&(r[0].trace._xA=m,r[0].trace._yA=h),i=r[a],d=i.r,d===s?i.x=i.y=s:(l=p.c2g(d),u=f.c2g(i.theta),i.x=l*Math.cos(u),i.y=l*Math.sin(u));o(e,g,n,v)}},24396:function(e,t,n){"use strict";var s=n(8319),o=n(2876),i=n(21776).Gw;e.exports={mode:s.mode,r:s.r,theta:s.theta,r0:s.r0,dr:s.dr,theta0:s.theta0,dtheta:s.dtheta,thetaunit:s.thetaunit,text:s.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:s.hovertext,hovertemplate:s.hovertemplate,line:{color:o.line.color,width:o.line.width,dash:o.line.dash,editType:"calc"},connectgaps:o.connectgaps,marker:o.marker,fill:o.fill,fillcolor:o.fillcolor,textposition:o.textposition,textfont:o.textfont,hoverinfo:s.hoverinfo,selected:s.selected,unselected:s.unselected}},27160:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:n(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:n(24396),supplyDefaults:n(98608),colorbar:n(5528),formatLabels:n(94120),calc:n(66720),hoverPoints:n(1600).hoverPoints,selectPoints:n(73224),meta:{}}},66720:function(e,t,n){"use strict";var s=n(90136),o=n(16356).calcMarkerSize,i=n(84236),a=n(54460),r=n(67072).TOO_MANY_POINTS;e.exports=function(e,t){var d,h,m=e._fullLayout,f=t.subplot,p=m[f].radialaxis,g=m[f].angularaxis,c=t._r=p.makeCalcdata(t,"r"),u=t._theta=g.makeCalcdata(t,"theta"),n=t._length,l={};return n<c.length&&(c=c.slice(0,n)),n<u.length&&(u=u.slice(0,n)),l.r=c,l.theta=u,s(e,t),d=l.opts=i.style(e,t),n<r?h=o(t,n):d.marker&&(h=2*(d.marker.sizeAvg||Math.max(d.marker.size,3))),t._extremes.x=a.findExtremes(p,c,{ppad:h}),[{x:!1,y:!1,t:l,trace:t}]}},98608:function(e,t,n){"use strict";var o=n(3400),s=n(43028),i=n(85968).handleRThetaDefaults,a=n(74428),r=n(66828),c=n(124),l=n(70840),d=n(88200).PTS_LINESONLY,u=n(24396);e.exports=function(e,t,n,h){function m(n,s){return o.coerce(e,t,u,n,s)}var f=i(e,t,h,m);f?(m("thetaunit"),m("mode",f<d?"lines+markers":"lines"),m("text"),m("hovertext"),"fills"!==t.hoveron&&m("hovertemplate"),s.hasMarkers(t)&&a(e,t,n,h,m,{noAngleRef:!0,noStandOff:!0}),s.hasLines(t)&&(r(e,t,n,h,m),m("connectgaps")),s.hasText(t)&&(m("texttemplate"),c(e,t,h,m)),m("fill"),"none"!==t.fill&&l(e,t,n,m),o.coerceSelectionMarkerOpacity(t,m)):t.visible=!1}},94120:function(e,t,n){"use strict";var s=n(22852);e.exports=function(e,t,n){var o=e.i;return"r"in e||(e.r=t._r[o]),"theta"in e||(e.theta=t._theta[o]),s(e,t,n)}},1600:function(e,t,n){"use strict";var s=n(41272),o=n(8504).makeHoverPointText;e.exports={hoverPoints:function(e,t,n,i){var a,d=e.cd[0].t,u=d.r,h=d.theta,r=s.hoverPoints(e,t,n,i);if(r&&!1!==r[0].index){if(a=r[0],void 0===a.index)return r;var l=e.subplot,c=a.cd[a.index],m=a.trace;if(c.r=u[a.index],c.theta=h[a.index],l.isPtInside(c))return a.xLabelVal=void 0,a.yLabelVal=void 0,o(c,m,l,a),r}}}},62944:function(e,t,n){"use strict";var s=n(27160);s.plot=n(56512),e.exports=s},56512:function(e,t,n){"use strict";var i=n(3108),a=n(38248),r=n(89876),c=n(74588),s=n(84236),o=n(3400),l=n(67072).TOO_MANY_POINTS;e.exports=function(e,t,n){if(n.length){var u=t.radialAxis,h=t.angularAxis,d=c(e,t);return n.forEach(function(n){if(n&&n[0]&&n[0].trace){var c,b,j,_,x,C,k=n[0],p=k.trace,m=k.t,g=p._length,v=m.r,y=m.theta,r=m.opts,E=v.slice(),A=y.slice();for(c=0;c<v.length;c++)t.isPtInside({r:v[c],theta:y[c]})||(E[c]=NaN,A[c]=NaN);var f=new Array(2*g),w=Array(g),O=Array(g);for(c=0;c<g;c++)j=E[c],a(j)?(_=u.c2g(j),b=h.c2g(A[c],p.thetaunit),x=_*Math.cos(b),C=_*Math.sin(b)):x=C=NaN,w[c]=f[2*c]=x,O[c]=f[2*c+1]=C;m.tree=i(f),r.marker&&g>=l&&(r.marker.cluster=m.tree),r.marker&&(r.markerSel.positions=r.markerUnsel.positions=r.marker.positions=f),r.line&&f.length>1&&o.extendFlat(r.line,s.linePositions(e,p,f)),r.text&&(o.extendFlat(r.text,{positions:f},s.textPosition(e,p,r.text,r.marker)),o.extendFlat(r.textSel,{positions:f},s.textPosition(e,p,r.text,r.markerSel)),o.extendFlat(r.textUnsel,{positions:f},s.textPosition(e,p,r.text,r.markerUnsel))),r.fill&&!d.fill2d&&(d.fill2d=!0),r.marker&&!d.scatter2d&&(d.scatter2d=!0),r.line&&!d.line2d&&(d.line2d=!0),r.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(r.line),d.fillOptions.push(r.fill),d.markerOptions.push(r.marker),d.markerSelectedOptions.push(r.markerSel),d.markerUnselectedOptions.push(r.markerUnsel),d.textOptions.push(r.text),d.textSelectedOptions.push(r.textSel),d.textUnselectedOptions.push(r.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),m.x=w,m.y=O,m.rawx=w,m.rawy=O,m.r=v,m.theta=y,m.positions=f,m._scene=d,m.index=d.count,d.count++}}),r(e,t,n)}},e.exports.reglPrecompiled={}},69496:function(e,t,n){"use strict";var l=n(21776).Ks,a=n(21776).Gw,i=n(92880).extendFlat,r=n(98304),s=n(52904),c=n(45464),o=s.line;e.exports={mode:s.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:s.text,texttemplate:a({editType:"plot"},{keys:["real","imag","text"]}),hovertext:s.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:i({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:s.connectgaps,marker:s.marker,cliponaxis:i({},s.cliponaxis,{dflt:!1}),textposition:s.textposition,textfont:s.textfont,fill:i({},s.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r(),hoverinfo:i({},c.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:s.hoveron,hovertemplate:l(),selected:s.selected,unselected:s.unselected}},47507:function(e,t,n){"use strict";var s=n(38248),o=n(39032).BADNUM,i=n(90136),a=n(20148),r=n(4500),c=n(16356).calcMarkerSize;e.exports=function(e,t){for(var f=e._fullLayout,p=t.subplot,g=f[p].realaxis,v=f[p].imaginaryaxis,b=g.makeCalcdata(t,"real"),j=v.makeCalcdata(t,"imag"),d=t._length,l=new Array(d),n=0;n<d;n++){var h=b[n],m=j[n],u=l[n]={};s(h)&&s(m)?(u.real=h,u.imag=m):u.real=o}return c(t,d),i(e,t),a(l,t),r(l,t),l}},76716:function(e,t,n){"use strict";var o=n(3400),s=n(43028),a=n(74428),r=n(66828),i=n(11731),c=n(124),l=n(70840),d=n(88200).PTS_LINESONLY,u=n(69496);e.exports=function(e,t,n,h){function m(n,s){return o.coerce(e,t,u,n,s)}var f,p=function(e,t,n,s){var r,i=s("real"),a=s("imag");return i&&a&&(r=Math.min(i.length,a.length)),o.isTypedArray(i)&&(t.real=i=Array.from(i)),o.isTypedArray(a)&&(t.imag=a=Array.from(a)),t._length=r,r}(0,t,0,m);p?(m("mode",p<d?"lines+markers":"lines"),m("text"),m("hovertext"),"fills"!==t.hoveron&&m("hovertemplate"),s.hasMarkers(t)&&a(e,t,n,h,m,{gradient:!0}),s.hasLines(t)&&(r(e,t,n,h,m,{backoff:!0}),i(e,t,m),m("connectgaps")),s.hasText(t)&&(m("texttemplate"),c(e,t,h,m)),f=[],(s.hasMarkers(t)||s.hasText(t))&&(m("cliponaxis"),m("marker.maxdisplayed"),f.push("points")),m("fill"),"none"!==t.fill&&(l(e,t,n,m),s.hasLines(t)||i(e,t,m)),"tonext"!==t.fill&&"toself"!==t.fill||f.push("fills"),m("hoveron",f.join("+")||"points"),o.coerceSelectionMarkerOpacity(t,m)):t.visible=!1}},49504:function(e,t,n){"use strict";var s=n(54460);e.exports=function(e,t,n){var o={},i=n[t.subplot]._subplot;return o.realLabel=s.tickText(i.radialAxis,e.real,!0).text,o.imagLabel=s.tickText(i.angularAxis,e.imag,!0).text,o}},25292:function(e,t,n){"use strict";var o=n(98723);function s(e,t,n,s){var o,i,a,r,l,c=n.radialAxis,u=n.angularAxis;c._hovertitle="real",u._hovertitle="imag",a={},a[t.subplot]={_subplot:n},r=t._module.formatLabels(e,t,a),s.realLabel=r.realLabel,s.imagLabel=r.imagLabel,l=e.hi||t.hoverinfo,i=[];function d(e,t){i.push(e._hovertitle+": "+t)}t.hovertemplate||(o=l.split("+"),-1!==o.indexOf("all")&&(o=["real","imag","text"]),-1!==o.indexOf("real")&&d(c,s.realLabel),-1!==o.indexOf("imag")&&d(u,s.imagLabel),-1!==o.indexOf("text")&&s.text&&(i.push(s.text),delete s.text),s.extraText=i.join("<br>"))}e.exports={hoverPoints:function(e,t,n,i){if(r=o(e,t,n,i),r&&!1!==r[0].index){if(a=r[0],void 0===a.index)return r;var a,r,c=e.subplot,l=a.cd[a.index],d=a.trace;if(c.isPtInside(l))return a.xLabelVal=void 0,a.yLabelVal=void 0,s(l,d,c,a),a.hovertemplate=d.hovertemplate,r}},makeHoverPointText:s}},95443:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"scattersmith",basePlotModule:n(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:n(69496),supplyDefaults:n(76716),colorbar:n(5528),formatLabels:n(49504),calc:n(47507),plot:n(34927),style:n(49224).style,styleOnSelect:n(49224).styleOnSelect,hoverPoints:n(25292).hoverPoints,selectPoints:n(91560),meta:{}}},34927:function(e,t,n){"use strict";var o=n(96504),s=n(39032).BADNUM,i=n(36416).smith;e.exports=function(e,t,n){for(var a,r,c,l,d,f=t.layers.frontplot.select("g.scatterlayer"),h=t.xaxis,m=t.yaxis,p={xaxis:h,yaxis:m,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},u=0;u<n.length;u++)for(c=n[u],r=0;r<c.length;r++)0===r&&(c[0].trace._xA=h,c[0].trace._yA=m),a=c[r],l=a.real,l===s?a.x=a.y=s:(d=i([l,a.imag]),a.x=d[0],a.y=d[1]);o(e,p,n,f)}},5896:function(e,t,n){"use strict";var c=n(21776).Ks,u=n(21776).Gw,h=n(98304),s=n(52904),l=n(45464),r=n(49084),d=n(98192).u,i=n(92880).extendFlat,o=s.marker,a=s.line,m=o.line;e.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},s.mode,{dflt:"markers"}),text:i({},s.text,{}),texttemplate:u({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},s.hovertext,{}),line:{color:a.color,width:a.width,dash:d,backoff:a.backoff,shape:i({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:s.connectgaps,cliponaxis:s.cliponaxis,fill:i({},s.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:h(),marker:i({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:o.angleref,standoff:o.standoff,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:i({width:m.width,editType:"calc"},r("marker.line")),gradient:o.gradient,editType:"calc"},r("marker")),textfont:s.textfont,textposition:s.textposition,selected:s.selected,unselected:s.unselected,hoverinfo:i({},l.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:s.hoveron,hovertemplate:c()}},34335:function(e,t,n){"use strict";var s=n(38248),a=n(90136),r=n(20148),c=n(4500),l=n(16356).calcMarkerSize,o=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};e.exports=function(e,t){var n,d,u,h,f,p,g,v,b,j,y,_,w,x,O=e._fullLayout[t.subplot].sum,C=t.sum||O,m={a:t.a,b:t.b,c:t.c};for(n=0;n<o.length;n++)if(!m[j=o[n]]){for(v=m[i[j][0]],w=m[i[j][1]],y=new Array(v.length),f=0;f<v.length;f++)y[f]=C-v[f]-w[f];m[j]=y}b=t._length,p=new Array(b);for(n=0;n<b;n++)h=m.a[n],u=m.b[n],d=m.c[n],s(h)&&s(u)&&s(d)?(1!=(g=O/((h=+h)+(u=+u)+(d=+d)))&&(h*=g,u*=g,d*=g),x=h,_=d-u,p[n]={x:_,y:x,a:h,b:u,c:d}):p[n]={x:!1,y:!1};return l(t,b),a(e,t),r(p,t),c(p,t),p}},84256:function(e,t,n){"use strict";var o=n(3400),a=n(88200),s=n(43028),r=n(74428),c=n(66828),i=n(11731),l=n(124),d=n(70840),u=n(5896);e.exports=function(e,t,n,h){function m(n,s){return o.coerce(e,t,u,n,s)}var f,v,b=m("a"),g=m("b"),p=m("c");b?(f=b.length,g?(f=Math.min(f,g.length),p&&(f=Math.min(f,p.length))):f=p?Math.min(f,p.length):0):g&&p&&(f=Math.min(g.length,p.length)),f?(t._length=f,m("sum"),m("text"),m("hovertext"),"fills"!==t.hoveron&&m("hovertemplate"),m("mode",f<a.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(t)&&r(e,t,n,h,m,{gradient:!0}),s.hasLines(t)&&(c(e,t,n,h,m,{backoff:!0}),i(e,t,m),m("connectgaps")),s.hasText(t)&&(m("texttemplate"),l(e,t,h,m)),v=[],(s.hasMarkers(t)||s.hasText(t))&&(m("cliponaxis"),m("marker.maxdisplayed"),v.push("points")),m("fill"),"none"!==t.fill&&(d(e,t,n,m),s.hasLines(t)||i(e,t,m)),"tonext"!==t.fill&&"toself"!==t.fill||v.push("fills"),m("hoveron",v.join("+")||"points"),o.coerceSelectionMarkerOpacity(t,m)):t.visible=!1}},97476:function(e){"use strict";e.exports=function(e,t,n,s,o){if(t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),s[o]){var i=s[o];e.a=i.a,e.b=i.b,e.c=i.c}else e.a=t.a,e.b=t.b,e.c=t.c;return e}},90404:function(e,t,n){"use strict";var s=n(54460);e.exports=function(e,t,n){var o={},i=n[t.subplot]._subplot;return o.aLabel=s.tickText(i.aaxis,e.a,!0).text,o.bLabel=s.tickText(i.baxis,e.b,!0).text,o.cLabel=s.tickText(i.caxis,e.c,!0).text,o}},26596:function(e,t,n){"use strict";var s=n(98723);e.exports=function(e,t,n,o){if(c=s(e,t,n,o),c&&!1!==c[0].index){if(i=c[0],void 0===i.index){var i,r,c,d,h,f,b,j=1-i.y0/e.ya._length,v=e.xa._length,m=v*j/2,g=v-m;return i.x0=Math.max(Math.min(i.x0,g),m),i.x1=Math.max(Math.min(i.x1,g),m),c}var l=i.cd[i.index],a=i.trace,u=i.subplot;return i.a=l.a,i.b=l.b,i.c=l.c,i.xLabelVal=void 0,i.yLabelVal=void 0,h={},h[a.subplot]={_subplot:u},d=a._module.formatLabels(l,a,h),i.aLabel=d.aLabel,i.bLabel=d.bLabel,i.cLabel=d.cLabel,b=l.hi||a.hoverinfo,f=[],a.hovertemplate||(r=b.split("+"),-1!==r.indexOf("all")&&(r=["a","b","c"]),-1!==r.indexOf("a")&&p(u.aaxis,i.aLabel),-1!==r.indexOf("b")&&p(u.baxis,i.bLabel),-1!==r.indexOf("c")&&p(u.caxis,i.cLabel)),i.extraText=f.join("<br>"),i.hovertemplate=a.hovertemplate,c}function p(e,t){f.push(e._hovertitle+": "+t)}}},34864:function(e,t,n){"use strict";e.exports={attributes:n(5896),supplyDefaults:n(84256),colorbar:n(5528),formatLabels:n(90404),calc:n(34335),plot:n(88776),style:n(49224).style,styleOnSelect:n(49224).styleOnSelect,hoverPoints:n(26596),selectPoints:n(91560),eventData:n(97476),moduleType:"trace",name:"scatterternary",basePlotModule:n(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(e,t,n){"use strict";var s=n(96504);e.exports=function(e,t,n){a=t.plotContainer,a.select(".scatterlayer").selectAll("*").remove();for(var o,a,r=t.xaxis,c=t.yaxis,l={xaxis:r,yaxis:c,plot:a,layerClipId:t._hasClipOnAxisFalse?t.clipIdRelative:null},d=t.layers.frontplot.select("g.scatterlayer"),i=0;i<n.length;i++)o=n[i],o.length&&(o[0].trace._xA=r,o[0].trace._yA=c);s(e,l,n,d)}},44524:function(e,t,n){"use strict";var p=n(52904),r=n(49084),c=n(29736).axisHoverFormat,f=n(21776).Ks,i=n(2876),u=n(33816).idRegex,d=n(31780).templatedArray,o=n(92880).extendFlat,s=p.marker,h=s.line,m=o(r("marker.line",{editTypeOverride:"calc"}),{width:o({},h.width,{editType:"calc"}),editType:"calc"}),a=o(r("marker"),{symbol:s.symbol,angle:s.angle,size:o({},s.size,{editType:"markerSize"}),sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,opacity:s.opacity,colorbar:s.colorbar,line:m,editType:"calc"});function l(e){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:u[e],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",e.exports={dimensions:d("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:o({},i.text,{}),hovertext:o({},i.hovertext,{}),hovertemplate:f(),xhoverformat:c("x"),yhoverformat:c("y"),marker:a,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:i.selected.marker,editType:"calc"},unselected:{marker:i.unselected.marker,editType:"calc"},opacity:i.opacity}},28888:function(e,t,n){"use strict";var s=n(24040),o=n(12704);e.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:n(44524),supplyDefaults:n(69544),colorbar:n(5528),calc:n(66821),plot:n(54840),hoverPoints:n(72248).hoverPoints,selectPoints:n(62500),editStyle:n(83156),meta:{}},s.register(o)},99332:function(e,t,n){"use strict";var d=n(13472),u=n(24040),h=n(5048),l=n(84888)._M,s=n(57952),c=n(79811).getFromId,i=n(54460).shouldShowZeroLine,a="splom",r={};function m(e,t,n){for(var s,u=n.matrixOptions.data.length,d=t._visibleDims,i=n.viewOpts.ranges=new Array(u),a=0;a<d.length;a++){var l=d[a],r=i[a]=new Array(4),o=c(e,t._diag[l][0]);o&&(r[0]=o.r2l(o.range[0]),r[2]=o.r2l(o.range[1])),s=c(e,t._diag[l][1]),s&&(r[1]=s.r2l(s.range[0]),r[3]=s.r2l(s.range[1]))}n.selectBatch.length||n.unselectBatch.length?n.matrix.update({ranges:i},{ranges:i}):n.matrix.update({ranges:i})}function o(e){var t=e._fullLayout,s=t._glcanvas.data()[0].regl,n=t._splomGrid;n||(n=t._splomGrid=d(s)),n.update(function(e){var t,o=e._context.plotGlPixelRatio,l=e._fullLayout,w=l._size,j=[0,0,l.width*o,l.height*o],d={};function u(e,t,n,s,i,a){n*=o,s*=o,i*=o,a*=o;var c=t[e+"color"],l=t[e+"width"],r=String(c+l);r in d?d[r].data.push(NaN,NaN,n,s,i,a):d[r]={data:[n,s,i,a],join:"rect",thickness:l*o,color:c,viewport:j,range:j,overlay:!1}}for(t in l._splomSubplots){var c,h,m,g=l._plots[t],s=g.xaxis,n=g.yaxis,f=s._gridVals,p=n._gridVals,a=s._offset,v=s._length,b=n._length,r=w.b+n.domain[0]*w.h,y=-n._m,_=-y*n.r2l(n.range[0],n.calendar);if(s.showgrid)for(t=0;t<f.length;t++)c=a+s.l2p(f[t].x),u("grid",s,c,r,c,r+b);if(n.showgrid)for(t=0;t<p.length;t++)u("grid",n,a,h=r+_+y*p[t].x,a+v,h);i(e,s,n)&&(c=a+s.l2p(0),u("zeroline",s,c,r,c,r+b)),i(e,n,s)&&u("zeroline",n,a,h=r+_+0,a+v,h)}m=[];for(t in d)m.push(d[t]);return m}(e))}e.exports={name:a,attr:s.attr,attrRegex:s.attrRegex,layoutAttributes:s.layoutAttributes,supplyLayoutDefaults:s.supplyLayoutDefaults,drawFramework:s.drawFramework,plot:function(e){var n=e._fullLayout,t=u.getModule(a),s=l(e.calcdata,t)[0];h(e,["ANGLE_instanced_arrays","OES_element_index_uint"],r)&&(n._hasOnlyLargeSploms&&o(e),t.plot(e,{},s))},drag:function(e){var t,n,s,i=e.calcdata,a=e._fullLayout;a._hasOnlyLargeSploms&&o(e);for(t=0;t<i.length;t++)n=i[t][0].trace,s=a._splomScenes[n.uid],"splom"===n.type&&s&&s.matrix&&m(e,n,s)},updateGrid:o,clean:function(e,t,n,o){var i,a,r,c,l={};if(o._splomScenes){for(i=0;i<e.length;i++)c=e[i],"splom"===c.type&&(l[c.uid]=1);for(i=0;i<n.length;i++)a=n[i],l[a.uid]||(r=o._splomScenes[a.uid],r&&r.destroy&&r.destroy(),o._splomScenes[a.uid]=null,delete o._splomScenes[a.uid])}0===Object.keys(o._splomScenes||{}).length&&delete o._splomScenes,o._splomGrid&&!t._hasOnlyLargeSploms&&o._hasOnlyLargeSploms&&(o._splomGrid.destroy(),o._splomGrid=null,delete o._splomGrid),s.clean(e,t,n,o)},updateFx:s.updateFx,toSVG:s.toSVG,reglPrecompiled:r}},66821:function(e,t,n){"use strict";var o=n(3400),s=n(79811),a=n(16356).calcMarkerSize,r=n(16356).calcAxisExpansion,c=n(90136),i=n(84236).markerSelection,l=n(84236).markerStyle,d=n(72308),u=n(39032).BADNUM,h=n(67072).TOO_MANY_POINTS;e.exports=function(e,t){var n,m,f,p,v,b,w,y=t.dimensions,x=t._length,g={},j=g.cdata=[],C=g.data=[],_=t._visibleDims=[];function O(e,n){for(var s=e.makeCalcdata({v:n.values,vcalendar:t.calendar},"v"),i=0;i<s.length;i++)s[i]=s[i]===u?NaN:s[i];j.push(s),C.push("log"===e.type?o.simpleMap(s,e.c2l):s)}for(n=0;n<y.length;n++)if((b=y[n]).visible){if(f=s.getFromId(e,t._diag[n][0]),m=s.getFromId(e,t._diag[n][1]),f&&m&&f.type!==m.type){o.log("Skipping splom dimension "+n+" with conflicting axis types");continue}f?(O(f,b),m&&"category"===m.type&&(m._categories=f._categories.slice())):O(m,b),_.push(n)}for(c(e,t),o.extendFlat(g,l(e,t)),w=j.length*x>h?g.sizeAvg||Math.max(g.size,3):a(t,x),p=0;p<_.length;p++)b=y[n=_[p]],f=s.getFromId(e,t._diag[n][0])||{},m=s.getFromId(e,t._diag[n][1])||{},r(e,t,f,m,j[p],j[p],w);return v=d(e,t),v.matrix||(v.matrix=!0),v.matrixOptions=g,v.selectedOptions=i(e,t,t.selected),v.unselectedOptions=i(e,t,t.unselected),[{x:!1,y:!1,t:{},trace:t}]}},69544:function(e,t,n){"use strict";var s=n(3400),i=n(51272),o=n(44524),a=n(43028),r=n(74428),c=n(26284),l=n(80088).isOpenSymbol;function d(e,t){function n(n,i){return s.coerce(e,t,o.dimensions,n,i)}n("label");var i=n("values");i&&i.length?n("visible"):t.visible=!1,n("axis.type"),n("axis.matches")}e.exports=function(e,t,n,u){function h(n,i){return s.coerce(e,t,o,n,i)}var m,f,p=i(e,t,{name:"dimensions",handleItemDefaults:d}),g=h("diagonal.visible"),v=h("showupperhalf"),b=h("showlowerhalf");c(t,p,"values")&&(g||v||b)?(h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),r(e,t,n,u,h,{noAngleRef:!0,noStandOff:!0}),m=l(t.marker.symbol),f=a.isBubble(t),h("marker.line.width",m||f?1:0),function(e,t,n,s){var o,i,h,m,f,p,g,v,y=t.dimensions,a=y.length,l=t.showupperhalf,r=t.showlowerhalf,c=t.diagonal.visible,x=new Array(a),_=new Array(a);for(o=0;o<a;o++)f=o?o+1:"",x[o]="x"+f,_[o]="y"+f;var E=s("xaxes",x),C=s("yaxes",_),k=t._diag=new Array(a);t._xaxes={},t._yaxes={},m=[],h=[];function j(e,s,o,i){if(e){var a,r=e.charAt(0),c=n._splomAxes[r];t["_"+r+"axes"][e]=1,i.push(e),!(e in c)&&(a=c[e]={},o&&(a.label=o.label||"",o.visible&&o.axis&&(o.axis.type&&(a.type=o.axis.type),o.axis.matches&&(a.matches=s))))}}p=!c&&!r,g=!c&&!l;for(t._axesDim={},o=0;o<a;o++){var w=y[o],O=0===o,b=o===a-1,u=O&&p||b&&g?void 0:E[o],d=O&&g||b&&p?void 0:C[o];j(u,d,w,m),j(d,u,w,h),k[o]=[u,d],t._axesDim[u]=o,t._axesDim[d]=o}for(o=0;o<m.length;o++)for(i=0;i<h.length;i++)v=m[o]+h[i],o>i&&l||o<i&&r?n._splomSubplots[v]=1:o!==i||!c&&r&&l||(n._splomSubplots[v]=1);(!r||!c&&l&&r)&&(n._splomGridDflt.xside="bottom",n._splomGridDflt.yside="left")}(0,t,u,h),s.coerceSelectionMarkerOpacity(t,h)):t.visible=!1}},83156:function(e,t,n){"use strict";var s=n(3400),o=n(90136),i=n(84236).markerStyle;e.exports=function(e,t){var r,a=t.trace,n=e._fullLayout._splomScenes[a.uid];n&&(o(e,a),s.extendFlat(n.matrixOptions,i(e,a)),r=s.extendFlat({},n.matrixOptions,n.viewOpts),n.matrix.update(r,null))}},50328:function(e,t){"use strict";t.getDimIndex=function(e,t){for(var i,s=t._id,a={x:0,y:1}[s.charAt(0)],o=e._visibleDims,n=0;n<o.length;n++)if(i=o[n],e._diag[i][a]===s)return n;return!1}},72248:function(e,t,n){"use strict";var s=n(50328),a=n(41272).calcHover,o=n(54460).getFromId,r=n(92880).extendFlat;function i(e,t,n,o){var d=e.cd[0].trace,v=e.scene.matrixOptions.cdata,c=e.xa,l=e.ya,C=c.c2p(t),x=l.c2p(n),_=e.distance,m=s.getDimIndex(d,c),f=s.getDimIndex(d,l);if(!1===m||!1===f)return[e];for(var u,j,r=v[m],b=v[f],h=_,i=0;i<r.length;i++)if(!o||i===e.index){var w=r[i],O=b[i],p=c.c2p(w)-C,g=l.c2p(O)-x,y=Math.sqrt(p*p+g*g);(o||y<h)&&(h=j=y,u=i)}return e.index=u,e.distance=h,e.dxy=j,void 0===u?[e]:[a(e,r,b,d)]}e.exports={hoverPoints:function(e,t,n,s,a){a||(a={});var d="x"===(s||"").charAt(0),m="y"===(s||"").charAt(0),l=i(e,t,n);if((d||m)&&"axis"===a.hoversubplots&&l[0])for(var c,g,f=(d?e.xa:e.ya)._subplotsWith,p=a.gd,u=r({},e),h=0;h<f.length;h++)c=f[h],c!==e.xa._id+e.ya._id&&(m?u.xa=o(p,c,"x"):u.ya=o(p,c,"y"),g=i(u,t,n,d||m),l=l.concat(g));return l}}},97924:function(e,t,n){"use strict";var s=n(28888);s.basePlotModule=n(99332),e.exports=s},54840:function(e,t,n){"use strict";var i=n(55795),o=n(3400),s=n(79811),a=n(72760).selectMode;function r(e,t){var n,r,d,h,m,p,g,b,C,E,k,A,S,M,F,T,z,L,v=e._fullLayout,x=v._size,c=t.trace,O=t.t,l=v._splomScenes[c.uid],f=l.matrixOptions,w=f.cdata,H=v._glcanvas.data()[0].regl,I=v.dragmode;if(0!==w.length){f.lower=c.showupperhalf,f.upper=c.showlowerhalf,f.diagonal=c.diagonal.visible;var y=c._visibleDims,_=w.length,u=l.viewOpts={};for(u.ranges=new Array(_),u.domains=new Array(_),n=0;n<y.length;n++)r=y[n],b=u.ranges[n]=new Array(4),g=u.domains[n]=new Array(4),(h=s.getFromId(e,c._diag[r][0]))&&(b[0]=h._rl[0],b[2]=h._rl[1],g[0]=h.domain[0],g[2]=h.domain[1]),(m=s.getFromId(e,c._diag[r][1]))&&(b[1]=m._rl[0],b[3]=m._rl[1],g[1]=m.domain[0],g[3]=m.domain[1]);var j=e._context.plotGlPixelRatio,N=x.l*j,D=x.b*j,P=x.w*j,R=x.h*j;if(u.viewport=[N,D,P+N,R+D],!0===l.matrix&&(l.matrix=i(H)),T=v.clickmode.indexOf("select")>-1,E=!0,a(I)||c.selectedpoints||T){if(p=c._length,c.selectedpoints){l.selectBatch=c.selectedpoints,S=c.selectedpoints,A={};for(r=0;r<S.length;r++)A[S[r]]=!0;k=[];for(r=0;r<p;r++)A[r]||k.push(r);l.unselectBatch=k}C=O.xpx=new Array(_),M=O.ypx=new Array(_);for(n=0;n<y.length;n++){if(r=y[n],h=s.getFromId(e,c._diag[r][0]))for(C[n]=new Array(p),d=0;d<p;d++)C[n][d]=h.c2p(w[n][d]);if(m=s.getFromId(e,c._diag[r][1]))for(M[n]=new Array(p),d=0;d<p;d++)M[n][d]=m.c2p(w[n][d])}(l.selectBatch.length||l.unselectBatch.length)&&(z=o.extendFlat({},f,l.unselectedOptions,u),L=o.extendFlat({},f,l.selectedOptions,u),l.matrix.update(z,L),E=!1)}else O.xpx=O.ypx=null;E&&(F=o.extendFlat({},f,u),l.matrix.update(F,null))}}e.exports=function(e,t,n){if(n.length)for(var s=0;s<n.length;s++)r(e,n[s][0])}},72308:function(e,t,n){"use strict";var s=n(3400);e.exports=function(e,t){var n,i,a=e._fullLayout,r=t.uid,o=a._splomScenes;return o||(o=a._splomScenes={}),i={dirty:!0,selectBatch:[],unselectBatch:[]},n=o[t.uid],n||((n=o[r]=s.extendFlat({},i,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){n.matrix&&n.matrix.draw&&(n.selectBatch.length||n.unselectBatch.length?n.matrix.draw(n.unselectBatch,n.selectBatch):n.matrix.draw()),n.dirty=!1},n.destroy=function(){n.matrix&&n.matrix.destroy&&n.matrix.destroy(),n.matrixOptions=null,n.selectBatch=null,n.unselectBatch=null,n=null}),n.dirty||s.extendFlat(n,i),n}},62500:function(e,t,n){"use strict";var s=n(3400),o=s.pushUnique,i=n(43028),a=n(50328);e.exports=function(e,t){var n,u,h,f,p,b=e.cd,c=b[0].trace,v=b[0].t,r=e.scene,g=r.matrixOptions.cdata,_=e.xaxis,w=e.yaxis,d=[];if(!r)return d;if(p=!i.hasMarkers(c)&&!i.hasText(c),!0!==c.visible||p)return d;if(u=a.getDimIndex(c,_),h=a.getDimIndex(c,w),!1===u||!1===h)return d;var O=v.xpx[u],x=v.ypx[h],j=g[u],y=g[h],l=(e.scene.selectBatch||[]).slice(),m=[];if(!1!==t&&!t.degenerate)for(n=0;n<j.length;n++)t.contains([O[n],x[n]],null,n,e)?(d.push({pointNumber:n,x:j[n],y:y[n]}),o(l,n)):-1!==l.indexOf(n)?o(l,n):m.push(n);return f=r.matrixOptions,l.length||m.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,s.extendFlat({},f,r.selectedOptions,r.viewOpts)):r.matrix.update(f,null),r.selectBatch=l,r.unselectBatch=m,d}},90167:function(e,t,n){"use strict";var l=n(49084),s=n(29736).axisHoverFormat,r=n(21776).Ks,c=n(52948),a=n(45464),i=n(92880).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:s("u",1),vhoverformat:s("v",1),whoverformat:s("w",1),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),showlegend:i({},a.showlegend,{dflt:!1})};i(o,l("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){o[e]=c[e]}),o.hoverinfo=i({},a.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,e.exports=o},3832:function(e,t,n){"use strict";var o=n(3400),r=n(47128);function a(e){var n,a,r,b,y,E,k,A,F,R,H,I,c=e._x,u=e._y,d=e._z,s=e._len,j=-1/0,M=1/0,_=-1/0,w=1/0,O=-1/0,x=1/0,t="";for(s&&(E=c[0],y=u[0],b=d[0]),s>1&&(R=c[s-1],I=u[s-1],H=d[s-1]),n=0;n<s;n++)j=Math.max(j,c[n]),M=Math.min(M,c[n]),_=Math.max(_,u[n]),w=Math.min(w,u[n]),O=Math.max(O,d[n]),x=Math.min(x,d[n]),A||c[n]===E||(A=!0,t+="x"),k||u[n]===y||(k=!0,t+="y"),F||d[n]===b||(F=!0,t+="z");A||(t+="x"),k||(t+="y"),F||(t+="z");var m=i(e._x),p=i(e._y),g=i(e._z),t=(t=(t=t.replace("x",(E>R?"-":"+")+"x")).replace("y",(y>I?"-":"+")+"y")).replace("z",(b>H?"-":"+")+"z"),V=function(){s=0,m=[],p=[],g=[]};(!s||s<m.length*p.length*g.length)&&V();var l=function(e){return"x"===e?c:"y"===e?u:d},v=function(e){return"x"===e?m:"y"===e?p:g},S=function(e){return e[s-1]<e[0]?-1:1},z=l(t[1]),D=l(t[3]),N=l(t[5]),L=v(t[1]).length,$=v(t[3]).length,W=v(t[5]).length,h=!1,f=function(e,t,n){return L*($*e+t)+n},B=S(l(t[1])),T=S(l(t[3])),P=S(l(t[5]));for(n=0;n<W-1;n++){for(a=0;a<$-1;a++){for(r=0;r<L-1;r++){var C=f(n,a,r),K=f(n,a,r+1),q=f(n,a+1,r),U=f(n+1,a,r);if(z[C]*B<z[K]*B&&D[C]*T<D[q]*T&&N[C]*P<N[U]*P||(h=!0),h)break}if(h)break}if(h)break}return h&&(o.warn("Encountered arbitrary coordinates! Unable to input data grid."),V()),{xMin:M,yMin:w,zMin:x,xMax:j,yMax:_,zMax:O,Xs:m,Ys:p,Zs:g,len:s,fill:t}}function i(e){return o.distinctVals(e).vals}function s(e,t){if(void 0===t&&(t=e.length),o.isTypedArray(e))return e.subarray(0,t);for(var s=[],n=0;n<t;n++)s[n]=+e[n];return s}e.exports={calc:function(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=s(t.u,t._len),t._v=s(t.v,t._len),t._w=s(t.w,t._len),t._x=s(t.x,t._len),t._y=s(t.y,t._len),t._z=s(t.z,t._len),n=a(t),t._gridFill=n.fill,t._Xs=n.Xs,t._Ys=n.Ys,t._Zs=n.Zs,t._len=n.len,u=0,t.starts&&(c=s(t.starts.x||[]),l=s(t.starts.y||[]),d=s(t.starts.z||[]),u=Math.min(c.length,l.length,d.length)),t._startsX=c||[],t._startsY=l||[],t._startsZ=d||[],i=0,h=1/0;for(o=0;o<t._len;o++){var n,o,i,c,l,d,u,h,m,f,p,j=t._u[o],g=t._v[o],v=t._w[o],b=Math.sqrt(j*j+g*g+v*v);i=Math.max(i,b),h=Math.min(h,b)}for(r(e,t,{vals:[h,i],containerStr:"",cLetter:"c"}),o=0;o<u;o++)f=c[o],n.xMax=Math.max(n.xMax,f),n.xMin=Math.min(n.xMin,f),p=l[o],n.yMax=Math.max(n.yMax,p),n.yMin=Math.min(n.yMin,p),m=d[o],n.zMax=Math.max(n.zMax,m),n.zMin=Math.min(n.zMin,m);t._slen=u,t._normMax=i,t._xbnds=[n.xMin,n.xMax],t._ybnds=[n.yMin,n.yMax],t._zbnds=[n.zMin,n.zMax]},filter:s,processGrid:a}},25668:function(e,t,n){"use strict";var s,i=n(67792).gl_streamtube3d,u=i.createTubeMesh,h=n(3400),m=n(33040).parseColorScale,f=n(8932).extractOpts,c=n(52094),l={xaxis:0,yaxis:1,zaxis:2};function a(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}s=a.prototype;function r(e){var t=e.length;return t>2?e.slice(1,t-1):2===t?[(e[0]+e[1])/2]:e}function o(e){var t=e.length;return 1===t?[.5,.5]:[e[1]-e[0],e[t-1]-e[t-2]]}function d(e,t){var D=e.fullSceneLayout,z=e.dataScale,O=t._len,a={};function n(e,t){var n=D[t],s=z[l[t]];return h.simpleMap(e,function(e){return n.d2l(e)*s})}if(a.vectors=c(n(t._u,"xaxis"),n(t._v,"yaxis"),n(t._w,"zaxis"),O),!O)return{positions:[],cells:[]};var p=n(t._Xs,"xaxis"),g=n(t._Ys,"yaxis"),v=n(t._Zs,"zaxis");if(a.meshgrid=[p,g,v],a.gridFill=t._gridFill,t._slen)a.startingPositions=c(n(t._startsX,"xaxis"),n(t._startsY,"yaxis"),n(t._startsZ,"zaxis"));else{for(var T=g[0],j=r(p),y=r(v),w=new Array(j.length*y.length),M=0,b=0;b<j.length;b++)for(u=0;u<y.length;u++)w[M++]=[j[b],T,y[u]];a.startingPositions=w}a.colormap=m(t),a.tubeSize=t.sizeref,a.maxLength=t.maxdisplayed;var d,u,C=n(t._xbnds,"xaxis"),E=n(t._ybnds,"yaxis"),k=n(t._zbnds,"zaxis"),A=o(p),S=o(g),_=o(v),F=[[C[0]-A[0],E[0]-S[0],k[0]-_[0]],[C[1]+A[1],E[1]+S[1],k[1]+_[1]]],s=i(a,F),x=f(t);return s.vertexIntensityBounds=[x.min/t._normMax,x.max/t._normMax],d=t.lightposition,s.lightPosition=[d.x,d.y,d.z],s.ambient=t.lighting.ambient,s.diffuse=t.lighting.diffuse,s.specular=t.lighting.specular,s.roughness=t.lighting.roughness,s.fresnel=t.lighting.fresnel,s.opacity=t.opacity,t._pad=s.tubeScale*t.sizeref*2,s}s.handlePick=function(e){var n,s,o=this.scene.fullSceneLayout,i=this.scene.dataScale;function t(e,t){var n=o[t],s=i[l[t]];return n.l2c(e)/s}if(e.object===this.mesh)return n=e.data.position,s=e.data.velocity,e.traceCoordinate=[t(n[0],"xaxis"),t(n[1],"yaxis"),t(n[2],"zaxis"),t(s[0],"xaxis"),t(s[1],"yaxis"),t(s[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence],e.textLabel=this.data.hovertext||this.data.text,!0},s.update=function(e){this.data=e;var t=d(this.scene,e);this.mesh.update(t)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},e.exports=function(e,t){var o=e.glplot.gl,i=d(e,t),s=u(o,i),n=new a(e,t.uid);return n.mesh=s,n.data=t,s._trace=n,e.glplot.add(s),n}},54304:function(e,t,n){"use strict";var s=n(3400),o=n(27260),i=n(90167);e.exports=function(e,t,n,a){function r(n,o){return s.coerce(e,t,i,n,o)}var c=r("u"),l=r("v"),d=r("w"),u=r("x"),h=r("y"),m=r("z");c&&c.length&&l&&l.length&&d&&d.length&&u&&u.length&&h&&h.length&&m&&m.length?(r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),o(e,t,a,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),t._length=null):t.visible=!1}},15436:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"streamtube",basePlotModule:n(12536),categories:["gl3d","showLegend"],attributes:n(90167),supplyDefaults:n(54304),colorbar:{min:"cmin",max:"cmax"},calc:n(3832).calc,plot:n(25668),eventData:function(e,t){return e.tubex=e.x,e.tubey=e.y,e.tubez=e.z,e.tubeu=t.traceCoordinate[3],e.tubev=t.traceCoordinate[4],e.tubew=t.traceCoordinate[5],e.norm=t.traceCoordinate[6],e.divergence=t.traceCoordinate[7],delete e.x,delete e.y,delete e.z,e},meta:{}}},424:function(e,t,n){"use strict";var l=n(45464),d=n(21776).Ks,a=n(21776).Gw,r=n(49084),c=n(86968).u,s=n(74996),i=n(27328),o=n(92880).extendFlat,u=n(98192).c;e.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:o({colors:{valType:"data_array",editType:"calc"},line:{color:o({},s.marker.line.color,{dflt:null}),width:o({},s.marker.line.width,{dflt:1}),editType:"calc"},pattern:u,editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:s.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:o({},l.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:d({},{keys:i.eventDataKeys}),textfont:s.textfont,insidetextorientation:s.insidetextorientation,insidetextfont:s.insidetextfont,outsidetextfont:o({},s.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:s.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:c({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(e,t,n){"use strict";var s=n(7316);t.name="sunburst",t.plot=function(e,n,o,i){s.plotBasePlot(t.name,e,n,o,i)},t.clean=function(e,n,o,i){s.cleanBasePlot(t.name,e,n,o,i)}},3776:function(e,t,n){"use strict";var o=n(74148),a=n(38248),s=n(3400),r=n(8932).makeColorScaleFuncFromTrace,c=n(45768).makePullColorFn,f=n(45768).generateExtendedColors,l=n(8932).calc,d=n(39032).ALMOST_EQUAL,u={},h={},m={};function i(e,t,n){var o,r,s=0,a=e.children;if(a){for(r=a.length,o=0;o<r;o++)s+=i(a[o],t,n);n.branches&&s++}else n.leaves&&s++;return e.value=e.data.data.value=s,t._values||(t._values=[]),t._values[e.data.data.i]=s,s}t.calc=function(e,t){var n,h,f,p,g,v,b,O,E,k,A,S,M,z,D,P,H,I=e._fullLayout,x=t.ids,B=s.isArrayOrTypedArray(x),j=t.labels,w=t.parents,_=t.values,y=s.isArrayOrTypedArray(_),u=[],m={},F={},C=function(e){return e||"number"==typeof e},R=function(e){return!y||a(_[e])&&_[e]>=0};B?(g=Math.min(x.length,w.length),A=function(e){return C(x[e])&&R(e)},S=function(e){return String(x[e])}):(g=Math.min(j.length,w.length),A=function(e){return C(j[e])&&R(e)},S=function(e){return String(j[e])}),y&&(g=Math.min(g,_.length));for(n=0;n<g;n++)if(A(n)){var L=S(n),N=C(w[n])?String(w[n]):"",T={i:n,id:L,pid:N,label:C(j[n])?String(j[n]):""};y&&(T.v=+_[n]),u.push(T),O=L,m[M=N]?m[M].push(O):m[M]=[O],F[O]=1}if(m[""]){if(m[""].length>1){for(E=s.randstr(),v=0;v<u.length;v++)""===u[v].pid&&(u[v].pid=E);u.unshift({hasMultipleRoots:!0,id:E,pid:"",label:""})}}else{b=[];for(p in m)F[p]||b.push(p);if(1!==b.length)return s.warn(["Multiple implied roots, cannot build",t.type,"hierarchy of",t.name+".","These roots include:",b.join(", ")].join(" "));p=b[0],u.unshift({hasImpliedRoot:!0,id:p,pid:"",label:p})}try{D=o.stratify().id(function(e){return e.id}).parentId(function(e){return e.pid})(u)}catch(e){return s.warn(["Failed to build",t.type,"hierarchy of",t.name+".","Error:",e.message].join(" "))}if(h=o.hierarchy(D),k=!1,y)switch(t.branchvalues){case"remainder":h.sum(function(e){return e.data.v});break;case"total":h.each(function(e){var o,i=e.data.data,n=i.v;if(e.children&&(o=e.children.reduce(function(e,t){return e+t.data.data.v},0),(i.hasImpliedRoot||i.hasMultipleRoots)&&(n=o),n<o*d))return k=!0,s.warn(["Total value for node",e.data.data.id,"of",t.name,"is smaller than the sum of its children.",`
parent value =`,n,`
children sum =`,o].join(" "));e.value=n})}else i(h,t,{branches:-1!==t.count.indexOf("branches"),leaves:-1!==t.count.indexOf("leaves")});if(!k)return t.sort&&h.sort(function(e,t){return t.value-e.value}),f=t.marker.colors||[],H=!!f.length,t._hasColorscale?(H||(f=y?t.values:t._values),l(e,t,{vals:f,containerStr:"marker",cLetter:"c"}),z=r(t.marker)):P=c(I["_"+t.type+"colormap"]),h.each(function(e){var n=e.data.data;n.color=t._hasColorscale?z(f[n.i]):P(f[n.i],n.id)}),u[0].hierarchy=h,u},t._runCrossTraceCalc=function(e,t){var n,s,r,c,i=t._fullLayout,l=t.calcdata,o=i[e+"colorway"],a=i["_"+e+"colormap"];i["extend"+e+"colors"]&&(o=f(o,"icicle"===e?m:"treemap"===e?h:u)),r=0;function d(e){var t=e.data.data,n=t.id;!1===t.color&&(a[n]?t.color=a[n]:e.parent?e.parent.parent?t.color=e.parent.data.data.color:(a[n]=t.color=o[r%o.length],r++):t.color=c)}for(s=0;s<l.length;s++)n=l[s][0],n.trace.type===e&&n.hierarchy&&(c=n.trace.root.color,n.hierarchy.each(d))},t.crossTraceCalc=function(e){return t._runCrossTraceCalc("sunburst",e)}},27328:function(e){"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(e,t,n){"use strict";var s=n(3400),i=n(424),a=n(86968).Q,r=n(31508).handleText,c=n(74174).handleMarkerDefaults,o=n(8932),l=o.hasColorscale,d=o.handleDefaults;e.exports=function(e,t,n,o){function u(n,o){return s.coerce(e,t,i,n,o)}var h,m,g,f=u("labels"),p=u("parents");f&&f.length&&p&&p.length?(h=u("values"),u(h&&h.length?"branchvalues":"count"),u("level"),u("maxdepth"),c(e,t,o,u),m=t._hasColorscale=l(e,"marker","colors")||(e.marker||{}).coloraxis,m&&d(e,t,o,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",m?1:.7),g=u("text"),u("texttemplate"),t.texttemplate||u("textinfo",s.isArrayOrTypedArray(g)?"text+label":"label"),u("hovertext"),u("hovertemplate"),r(e,t,o,u,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("insidetextorientation"),u("sort"),u("rotation"),u("root.color"),a(t,o,u),t._length=null):t.visible=!1}},60404:function(e,t,n){"use strict";var s=n(43616),o=n(76308);e.exports=function(e,t,n,i,a){var r,c=t.data.data,d=c.i,l=a||c.color;d>=0?(t.i=c.i,r=n.marker,r.pattern&&r.colors&&r.pattern.shape||(r.color=l,t.color=l),s.pointStyle(e,n,i,t)):o.fill(e,l)}},45716:function(e,t,n){"use strict";var o=n(33428),r=n(24040),u=n(10624).appendArrayPointValue,a=n(93024),c=n(3400),l=n(95924),s=n(78176),d=n(69656).formatPieValue;function i(e,t,n){for(var i,r=e.data.data,o={curveNumber:t.index,pointNumber:r.i,data:t._input,fullData:t},a=0;a<n.length;a++)i=n[a],i in e&&(o[i]=e[i]);return"parentString"in e&&!s.isHierarchyRoot(e)&&(o.parent=e.parentString),u(o,t,r.i),o}e.exports=function(e,t,n,u,h){var p=u[0],m=p.trace,f=p.hierarchy,v="sunburst"===m.type,g="treemap"===m.type||"icicle"===m.type;"_hasHoverLabel"in m||(m._hasHoverLabel=!1),"_hasHoverEvent"in m||(m._hasHoverEvent=!1),e.on("mouseover",function(r){if(C=n._fullLayout,!n._dragging&&!1!==C.hovermode){var _,x,C,k,S,M,F,N,H,y=n._fullData[m.index],E=r.data.data,L=E.i,T=s.isHierarchyRoot(r),P=s.getParent(f,r),D=s.getValue(r),u=function(e){return c.castOption(y,L,e)},z=u("hovertemplate"),O=a.castHoverinfo(y,C,L),A=C.separators;if(z||O&&"none"!==O&&"skip"!==O){v&&(x=p.cx+r.pxmid[0]*(1-r.rInscribed),M=p.cy+r.pxmid[1]*(1-r.rInscribed)),g&&(x=r._hoverX,M=r._hoverY);var b,l={},R=[],w=[],j=function(e){return-1!==R.indexOf(e)};O&&(R="all"===O?y._module.attributes.hoverinfo.flags:O.split("+")),l.label=E.label,j("label")&&l.label&&w.push(l.label),E.hasOwnProperty("v")&&(l.value=E.v,l.valueLabel=d(l.value,A),j("value")&&w.push(l.valueLabel)),l.currentPath=r.currentPath=s.getPath(r.data),j("current path")&&!T&&w.push(l.currentPath),N=[],k=function(){-1===N.indexOf(b)&&(w.push(b),N.push(b))},l.percentParent=r.percentParent=D/s.getValue(P),l.parent=r.parentString=s.getPtLabel(P),j("percent parent")&&(b=s.formatPercent(l.percentParent,A)+" of "+l.parent,k()),l.percentEntry=r.percentEntry=D/s.getValue(t),l.entry=r.entry=s.getPtLabel(t),!j("percent entry")||T||r.onPathbar||(b=s.formatPercent(l.percentEntry,A)+" of "+l.entry,k()),l.percentRoot=r.percentRoot=D/s.getValue(f),l.root=r.root=s.getPtLabel(f),j("percent root")&&!T&&(b=s.formatPercent(l.percentRoot,A)+" of "+l.root,k()),l.text=u("hovertext")||u("text"),j("text")&&(b=l.text,c.isValidTextValue(b)&&w.push(b)),S=[i(r,y,h.eventDataKeys)],_={trace:y,y:M,_x0:r._x0,_x1:r._x1,_y0:r._y0,_y1:r._y1,text:w.join("<br>"),name:z||j("name")?y.name:void 0,color:u("hoverlabel.bgcolor")||E.color,borderColor:u("hoverlabel.bordercolor"),fontFamily:u("hoverlabel.font.family"),fontSize:u("hoverlabel.font.size"),fontColor:u("hoverlabel.font.color"),fontWeight:u("hoverlabel.font.weight"),fontStyle:u("hoverlabel.font.style"),fontVariant:u("hoverlabel.font.variant"),nameLength:u("hoverlabel.namelength"),textAlign:u("hoverlabel.align"),hovertemplate:z,hovertemplateLabels:l,eventData:S},v&&(_.x0=x-r.rInscribed*r.rpx1,_.x1=x+r.rInscribed*r.rpx1,_.idealAlign=r.pxmid[0]<0?"left":"right"),g&&(_.x=x,_.idealAlign=x<0?"left":"right"),F=[],a.loneHover(_,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:n,inOut_bbox:F}),S[0].bbox=F[0],m._hasHoverLabel=!0}g&&(H=e.select("path.surface"),h.styleOne(H,r,y,n,{hovered:!0})),m._hasHoverEvent=!0,n.emit("plotly_hover",{points:S||[i(r,y,h.eventDataKeys)],event:o.event})}}),e.on("mouseout",function(t){var c,l=n._fullLayout,s=n._fullData[m.index],r=o.select(this).datum();m._hasHoverEvent&&(t.originalEvent=o.event,n.emit("plotly_unhover",{points:[i(r,s,h.eventDataKeys)],event:o.event}),m._hasHoverEvent=!1),m._hasHoverLabel&&(a.loneUnhover(l._hoverlayer.node()),m._hasHoverLabel=!1),g&&(c=e.select("path.surface"),h.styleOne(c,r,s,n,{hovered:!1}))}),e.on("click",function(e){var d,j,y,c=n._fullLayout,t=n._fullData[m.index],u=v&&(s.isHierarchyRoot(e)||s.isLeaf(e)),p=s.getPtId(e),_=s.isEntry(e)?s.findEntryWithChild(f,p):s.findEntryWithLevel(f,p),g=s.getPtId(_),b={points:[i(e,t,h.eventDataKeys)],event:o.event};u||(b.nextLevel=g),d=l.triggerHandler(n,"plotly_"+m.type+"click",b),(!1!==d&&c.hovermode&&(n._hoverdata=[i(e,t,h.eventDataKeys)],a.click(n,o.event)),!u&&!1!==d&&!n._dragging&&!n._transitioning)&&(r.call("_storeDirectGUIEdit",t,c._tracePreGUI[t.uid],{level:t.level}),j={data:[{level:g}],traces:[m.index]},y={frame:{redraw:!1,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(c._hoverlayer.node()),r.call("animate",n,j,y))})}},78176:function(e,t,n){"use strict";var s=n(3400),a=n(76308),r=n(93972),o=n(69656);function i(e){return e.data.data.pid}t.findEntryWithLevel=function(e,n){var s;return n&&e.eachAfter(function(e){if(t.getPtId(e)===n)return s=e.copy()}),s||e},t.findEntryWithChild=function(e,n){var s;return e.eachAfter(function(e){for(var a,i=e.children||[],o=0;o<i.length;o++)if(a=i[o],t.getPtId(a)===n)return s=e.copy()}),s||e},t.isEntry=function(e){return!e.parent},t.isLeaf=function(e){return!e.children},t.getPtId=function(e){return e.data.data.id},t.getPtLabel=function(e){return e.data.data.label},t.getValue=function(e){return e.value},t.isHierarchyRoot=function(e){return""===i(e)},t.setSliceCursor=function(e,n,s){var i,o=s.isTransitioning;o||(i=e.datum(),o=s.hideOnRoot&&t.isHierarchyRoot(i)||s.hideOnLeaves&&t.isLeaf(i)),r(e,o?null:"pointer")},t.getInsideTextFontKey=function(e,t,n,o,i){var r=(i||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=n.data.data.i;return s.castOption(t,a,r+"."+e)||s.castOption(t,a,"textfont."+e)||o.size},t.getOutsideTextFontKey=function(e,t,n,o){var i=n.data.data.i;return s.castOption(t,i,"outsidetextfont."+e)||s.castOption(t,i,"textfont."+e)||o.size},t.isOutsideText=function(e,n){return!e._hasColorscale&&t.isHierarchyRoot(n)},t.determineTextFont=function(e,n,o,i){return t.isOutsideText(e,n)?function(e,n,s){return{color:t.getOutsideTextFontKey("color",e,n,s),family:t.getOutsideTextFontKey("family",e,n,s),size:t.getOutsideTextFontKey("size",e,n,s),weight:t.getOutsideTextFontKey("weight",e,n,s),style:t.getOutsideTextFontKey("style",e,n,s),variant:t.getOutsideTextFontKey("variant",e,n,s)}}(e,n,o):function(e,n,o,i){var d=(i||{}).onPathbar,c=n.data.data,l=c.i,r=s.castOption(e,l,(d?"pathbar.textfont":"insidetextfont")+".color");return!r&&e._input.textfont&&(r=s.castOption(e._input,l,"textfont.color")),{color:r||a.contrast(c.color),family:t.getInsideTextFontKey("family",e,n,o,i),size:t.getInsideTextFontKey("size",e,n,o,i),weight:t.getInsideTextFontKey("weight",e,n,o,i),style:t.getInsideTextFontKey("style",e,n,o,i),variant:t.getInsideTextFontKey("variant",e,n,o,i)}}(e,n,o,i)},t.hasTransition=function(e){return!!(e&&e.duration>0)},t.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0},t.isHeader=function(e,n){return!t.isLeaf(e)&&e.depth!==n._maxDepth-1},t.getParent=function(e,n){return t.findEntryWithLevel(e,i(n))},t.listPath=function(e,n){var o,s=e.parent;return s?(o=n?[s.data[n]]:[s],t.listPath(s,n).concat(o)):[]},t.getPath=function(e){return t.listPath(e,"label").join("/")+"/"},t.formatValue=o.formatPieValue,t.formatPercent=function(e,t){var n=s.formatPercent(e,0);return"0%"===n&&(n=o.formatPiePercent(e,t)),n}},5621:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"sunburst",basePlotModule:n(54904),categories:[],animatable:!0,attributes:n(424),layoutAttributes:n(84920),supplyDefaults:n(25244),supplyLayoutDefaults:n(28732),calc:n(3776).calc,crossTraceCalc:n(3776).crossTraceCalc,plot:n(96488).plot,style:n(85676).style,colorbar:n(5528),meta:{}}},84920:function(e){"use strict";e.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(e,t,n){"use strict";var s=n(3400),o=n(84920);e.exports=function(e,t){function n(n,i){return s.coerce(e,t,o,n,i)}n("sunburstcolorway",t.colorway),n("extendsunburstcolors")}},96488:function(e,t,n){"use strict";var a=n(33428),_=n(74148),i=n(67756).qy,l=n(43616),o=n(3400),y=n(72736),d=n(82744),u=d.recordMinTextSize,j=d.clearMinTextSize,h=n(37820),w=n(69656).getRotationAngle,f=h.computeTransform,p=h.transformInsideText,g=n(85676).styleOne,v=n(60100).resizeText,b=n(45716),r=n(27328),s=n(78176);function c(e,n,c,d){var h,x,E,k,D,$,Z=e._context.staticPlot,T=e._fullLayout,F=!T.uniformtext.mode&&s.hasTransition(d),v=a.select(c).selectAll("g.slice"),M=n[0],j=M.trace,Q=M.hierarchy,O=s.findEntryWithLevel(Q,j.level),K=s.getMaxDepth(j),S=T._size,C=j.domain,X=S.w*(C.x[1]-C.x[0]),V=S.h*(C.y[1]-C.y[0]),z=.5*Math.min(X,V),P=M.cx=S.l+S.w*(C.x[1]+C.x[0])/2,R=M.cy=S.t+S.h*(1-C.y[0])-V/2;if(!O)return v.remove();E=null,k={},F&&v.each(function(e){k[s.getPtId(e)]={rpx0:e.rpx0,rpx1:e.rpx1,x0:e.x0,x1:e.x1,transform:e.transform},!E&&s.isEntry(e)&&(E=e)});var A=function(e){return _.partition().size([2*Math.PI,e.height+1])(e)}(O).descendants(),H=O.height+1,I=0,B=K;M.hasMultipleRoots&&s.isHierarchyRoot(O)&&(A=A.slice(1),H-=1,I=1,B+=1),A=A.filter(function(e){return e.y1<=B}),h=w(j.rotation),h&&A.forEach(function(e){e.x0+=h,e.x1+=h});var G=Math.min(H,K),W=function(e){return(e-I)/G*z},U=function(e,t){return[e*Math.cos(t),-e*Math.sin(t)]},N=function(e){return o.pathAnnulus(e.rpx0,e.rpx1,e.x0,e.x1,P,R)},q=function(e){return P+m(e)[0]*(e.transform.rCenter||0)+(e.transform.x||0)},Y=function(e){return R+m(e)[1]*(e.transform.rCenter||0)+(e.transform.y||0)};(v=v.data(A,s.getPtId)).enter().append("g").classed("slice",!0),F?v.exit().transition().each(function(){var e=a.select(this);e.select("path.surface").transition().attrTween("d",function(e){var t=function(e){var t,n,o,a,c,l,d,u,m=s.getPtId(e),f=k[m],r=k[s.getPtId(O)];return r?(c=(e.x1>r.x1?2*Math.PI:0)+h,n=e.rpx1<r.rpx1?{x0:e.x0,x1:e.x1,rpx0:0,rpx1:0}:{x0:c,x1:c,rpx0:e.rpx0,rpx1:e.rpx1}):(u=s.getPtId(e.parent),v.each(function(e){if(s.getPtId(e)===u)return t=e}),a=t.children,a.forEach(function(e,t){if(s.getPtId(e)===m)return o=t}),l=a.length,d=i(t.x0,t.x1),n={rpx0:z,rpx1:z,x0:d(o/l),x1:d((o+1)/l)}),i(f,n)}(e);return function(e){return N(t(e))}}),e.select("g.slicetext").attr("opacity",0)}).remove():v.exit().remove(),v.order(),x=null,F&&E&&($=s.getPtId(E),v.each(function(e){null===x&&s.getPtId(e)===$&&(x=e.x1)})),D=v;function L(e){var o=e.parent,n=k[s.getPtId(o)],t={};if(n){var a=o.children,r=a.indexOf(e),c=a.length,l=i(n.x0,n.x1);t.x0=l(r/c),t.x1=l(r/c)}else t.x0=t.x1=0;return t}F&&(D=D.transition().each("end",function(){var t=a.select(this);s.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),D.each(function(c){d=a.select(this),m=o.ensureSingle(d,"path","surface",function(e){e.style("pointer-events",Z?"none":"all")}),c.rpx0=W(c.y0),c.rpx1=W(c.y1),c.xmid=(c.x0+c.x1)/2,c.pxmid=U(c.rpx1,c.xmid),c.midangle=-(c.xmid-Math.PI/2),c.startangle=-(c.x0-Math.PI/2),c.stopangle=-(c.x1-Math.PI/2),c.halfangle=.5*Math.min(o.angleDelta(c.x0,c.x1)||Math.PI,Math.PI),c.ring=1-c.rpx0/c.rpx1,c.rInscribed=function(e){return 0===e.rpx0&&o.isFullCircle([e.x0,e.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2))}(c),F?m.transition().attrTween("d",function(e){var t=function(e){var t,n,a=k[s.getPtId(e)],r={x0:e.x0,x1:e.x1,rpx0:e.rpx0,rpx1:e.rpx1};return a?t=a:E?e.parent?x?(n=(e.x1>x?2*Math.PI:0)+h,t={x0:n,x1:n}):(t={rpx0:z,rpx1:z},o.extendFlat(t,L(e))):t={rpx0:0,rpx1:0}:t={x0:h,x1:h},i(t,r)}(e);return function(e){return N(t(e))}}):m.attr("d",N),d.call(b,O,e,n,{eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(s.setSliceCursor,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:e._transitioning}),m.call(g,c,j,e);var d,m,_,w,A=o.ensureSingle(d,"g","slicetext"),v=o.ensureSingle(A,"text","",function(e){e.attr("data-notex",1)}),C=o.ensureUniformFontSize(e,s.determineTextFont(j,c,T.font));v.text(t.formatSliceLabel(c,O,j,n,T)).classed("slicetext",!0).attr("text-anchor","middle").call(l.font,C).call(y.convertToTspans,e),_=l.bBox(v.node()),c.transform=p(_,c,M),c.transform.targetX=q(c),c.transform.targetY=Y(c),w=function(e,t){var n=e.transform;return f(n,t),n.fontSize=C.size,u(j.type,n,T),o.getTextTransform(n)},F?v.transition().attrTween("transform",function(e){var t=function(e){a=k[s.getPtId(e)],n=e.transform,a?t=a:(t={rpx1:e.rpx1,transform:{textPosAngle:n.textPosAngle,scale:0,rotate:n.rotate,rCenter:n.rCenter,x:n.x,y:n.y}},E?e.parent?x?(r=e.x1>x?2*Math.PI:0,t.x0=t.x1=r):o.extendFlat(t,L(e)):t.x0=t.x1=h:t.x0=t.x1=h);var t,n,a,r,c=i(t.transform.textPosAngle,e.transform.textPosAngle),l=i(t.rpx1,e.rpx1),d=i(t.x0,e.x0),m=i(t.x1,e.x1),f=i(t.transform.scale,n.scale),p=i(t.transform.rotate,n.rotate),g=0===n.rCenter?3:0===t.transform.rCenter?1/3:1,v=i(t.transform.rCenter,n.rCenter);return function(e){var t=l(e),i=d(e),a=m(e),s=function(e){return v(Math.pow(e,g))}(e),o={pxmid:U(t,(i+a)/2),rpx1:t,transform:{textPosAngle:c(e),rCenter:s,x:n.x,y:n.y}};return u(j.type,n,T),{transform:{targetX:q(o),targetY:Y(o),scale:f(e),rotate:p(e),rCenter:s}}}}(e);return function(e){return w(t(e),_)}}):v.attr("transform",w(c,_))})}function m(e){return t=e.rpx1,n=e.transform.textPosAngle,[t*Math.sin(n),-t*Math.cos(n)];var t,n}t.plot=function(e,t,n,o){var i,l,r=e._fullLayout,d=r._sunburstlayer,u=!n,h=!r.uniformtext.mode&&s.hasTransition(n);j("sunburst",r),(l=d.selectAll("g.trace.sunburst").data(t,function(e){return e[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),l.order(),h?(o&&(i=o()),a.transition().duration(n.duration).ease(n.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){d.selectAll("g.trace").each(function(t){c(e,t,this,n)})})):(l.each(function(t){c(e,t,this,n)}),r.uniformtext.mode&&v(e,r._sunburstlayer.selectAll(".trace"),"sunburst")),u&&l.exit().remove()},t.formatSliceLabel=function(e,t,n,i,a){if(y=n.texttemplate,b=n.textinfo,!(y||b&&"none"!==b))return"";var r,m,p,v,b,j,y,_,x,u=a.separators,C=i[0],c=e.data.data,g=C.hierarchy,O=s.isHierarchyRoot(e),w=s.getParent(g,e),d=s.getValue(e);if(!y){var h,E=b.split("+"),l=function(e){return-1!==E.indexOf(e)},f=[];return(l("label")&&c.label&&f.push(c.label),c.hasOwnProperty("v")&&l("value")&&f.push(s.formatValue(c.v,u)),!O)&&(l("current path")&&f.push(s.getPath(e.data)),m=0,l("percent parent")&&m++,l("percent entry")&&m++,l("percent root")&&m++,x=m>1,m&&(j=function(e){h=s.formatPercent(p,u),x&&(h+=" of "+e),f.push(h)},l("percent parent")&&!O&&(p=d/s.getValue(w),j("parent")),l("percent entry")&&(p=d/s.getValue(t),j("entry")),l("percent root")&&(p=d/s.getValue(g),j("root")))),l("text")&&(h=o.castOption(n,c.i,"text"),o.isValidTextValue(h)&&f.push(h)),f.join("<br>")}return _=o.castOption(n,c.i,"texttemplate"),_?(r={},c.label&&(r.label=c.label),c.hasOwnProperty("v")&&(r.value=c.v,r.valueLabel=s.formatValue(c.v,u)),r.currentPath=s.getPath(e.data),O||(r.percentParent=d/s.getValue(w),r.percentParentLabel=s.formatPercent(r.percentParent,u),r.parent=s.getPtLabel(w)),r.percentEntry=d/s.getValue(t),r.percentEntryLabel=s.formatPercent(r.percentEntry,u),r.entry=s.getPtLabel(t),r.percentRoot=d/s.getValue(g),r.percentRootLabel=s.formatPercent(r.percentRoot,u),r.root=s.getPtLabel(g),c.hasOwnProperty("color")&&(r.color=c.color),v=o.castOption(n,c.i,"text"),(o.isValidTextValue(v)||""===v)&&(r.text=v),r.customdata=o.castOption(n,c.i,"customdata"),o.texttemplateString(_,r,a._d3locale,r,n._meta||{})):""}},85676:function(e,t,n){"use strict";var s=n(33428),o=n(76308),i=n(3400),r=n(82744).resizeText,c=n(60404);function a(e,t,n,s){var r=t.data.data,l=!t.children,a=r.i,d=i.castOption(n,a,"marker.line.color")||o.defaultLine,u=i.castOption(n,a,"marker.line.width")||0;e.call(c,t,n,s).style("stroke-width",u).call(o.stroke,d).style("opacity",l?n.leaf.opacity:null)}e.exports={style:function(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");r(e,t,"sunburst"),t.each(function(t){var n=s.select(this),o=t[0].trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(t){s.select(this).call(a,t,o,e)})})},styleOne:a}},16716:function(e,t,n){"use strict";var o,c=n(76308),i=n(49084),r=n(29736).axisHoverFormat,d=n(21776).Ks,l=n(45464),s=n(92880).extendFlat,u=n(67824).overrideAll;function a(){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:c.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:c.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}o=e.exports=u(s({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:d(),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},i("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:a(),y:a(),z:a()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:s({},i.zauto,{}),zmin:s({},i.zmin,{}),zmax:s({},i.zmax,{})},hoverinfo:s({},l.hoverinfo),showlegend:s({},l.showlegend,{dflt:!1})}),"calc","nested"),o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},56576:function(e,t,n){"use strict";var s=n(47128);e.exports=function(e,t){t.surfacecolor?s(e,t,{vals:t.surfacecolor,containerStr:"",cLetter:"c"}):s(e,t,{vals:t.z,containerStr:"",cLetter:"c"})}},79164:function(e,t,n){"use strict";var s,o,m=n(67792).gl_surface3d,i=n(67792).ndarray,_=n(67792).ndarray_linear_interpolate.d2,y=n(70448),j=n(11240),a=n(3400).isArrayOrTypedArray,g=n(33040).parseColorScale,u=n(43080),f=n(8932).extractOpts;function h(e,t,n){this.scene=e,this.uid=n,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}s=h.prototype,s.getXat=function(e,t,n,s){var o=a(this.data.x)?a(this.data.x[0])?this.data.x[t][e]:this.data.x[e]:e;return void 0===n?o:s.d2l(o,0,n)},s.getYat=function(e,t,n,s){var o=a(this.data.y)?a(this.data.y[0])?this.data.y[t][e]:this.data.y[t]:t;return void 0===n?o:s.d2l(o,0,n)},s.getZat=function(e,t,n,s){var o=this.data.z[t][e];return null===o&&this.data.connectgaps&&this.data._interpolatedZ&&(o=this.data._interpolatedZ[t][e]),void 0===n?o:s.d2l(o,0,n)},s.handlePick=function(e){if(e.object===this.surface){var s,o,i=(e.data.index[0]-1)/this.dataScaleX-1,r=(e.data.index[1]-1)/this.dataScaleY-1,n=Math.max(Math.min(Math.round(i),this.data.z[0].length-1),0),t=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);e.index=[n,t],e.traceCoordinate=[this.getXat(n,t),this.getYat(n,t),this.getZat(n,t)],e.dataCoordinate=[this.getXat(n,t,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(n,t,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(n,t,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(s=0;s<3;s++)null!=e.dataCoordinate[s]&&(e.dataCoordinate[s]*=this.scene.dataScale[s]);return o=this.data.hovertext||this.data.text,a(o)&&o[t]&&void 0!==o[t][n]?e.textLabel=o[t][n]:e.textLabel=o||"",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}},o=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function p(e,t){if(e<t)return 0;for(var n=0;0===Math.floor(e%t);)e/=t,n++;return n}function c(e){for(var s,n=[],t=0;t<o.length;t++)s=o[t],n.push(p(e,s));return n}function v(e){for(var s=c(e),n=e,t=0;t<o.length;t++)if(s[t]>0){n=o[t];break}return n}function b(e,t){if(!(e<1||t<1)){for(var i=c(e),a=c(t),s=1,n=0;n<o.length;n++)s*=Math.pow(o[n],Math.max(i[n],a[n]));return s}}s.calcXnums=function(e){n=[];for(t=1;t<e;t++){var t,n,i,s=this.getXat(t-1,0),o=this.getXat(t,0);n[t-1]=o!==s&&s!=null&&o!=null?Math.abs(o-s):0}i=0;for(t=1;t<e;t++)i+=n[t-1];for(t=1;t<e;t++)0===n[t-1]?n[t-1]=1:n[t-1]=Math.round(i/n[t-1]);return n},s.calcYnums=function(e){n=[];for(t=1;t<e;t++){var t,n,i,s=this.getYat(0,t-1),o=this.getYat(0,t);n[t-1]=o!==s&&s!=null&&o!=null?Math.abs(o-s):0}i=0;for(t=1;t<e;t++)i+=n[t-1];for(t=1;t<e;t++)0===n[t-1]?n[t-1]=1:n[t-1]=Math.round(i/n[t-1]);return n};var d=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],l=d[9],r=d[13];function w(e,t,n){var s=n[8]+n[2]*t[0]+n[5]*t[1];return e[0]=(n[6]+n[0]*t[0]+n[3]*t[1])/s,e[1]=(n[7]+n[1]*t[0]+n[4]*t[1])/s,e}function O(e,t,n){return function(e,t,n,s){for(var o,a=[0,0],r=e.shape[0],c=e.shape[1],i=0;i<r;i++)for(o=0;o<c;o++)n(a,[i,o],s),e.set(i,o,_(t,a[0],a[1]))}(e,t,w,n),e}function x(e,t){for(var s=!1,n=0;n<e.length;n++)if(t===e[n]){s=!0;break}!1===s&&e.push(t)}s.estimateScale=function(e,t){for(var s,n=1+function(e){if(0!==e.length){for(var t=1,n=0;n<e.length;n++)t=b(t,e[n]);return t}}(0===t?this.calcXnums(e):this.calcYnums(e));n<l;)n*=2;for(;n>r;)n--,n/=v(n),++n<l&&(n=r);return s=Math.round(n/e),s>1?s:1},s.refineCoords=function(e){for(var n,s=this.dataScaleX,o=this.dataScaleY,h=e[0].shape[0],u=e[0].shape[1],l=0|Math.floor(e[0].shape[0]*s+1),d=0|Math.floor(e[0].shape[1]*o+1),r=1+h+1,c=1+u+1,a=i(new Float32Array(r*c),[r,c]),m=[1/s,0,0,0,1/o,0,0,0,1],t=0;t<e.length;++t)this.surface.padField(a,e[t]),n=i(new Float32Array(l*d),[l,d]),O(n,a,m),e[t]=n},s.setContourLevels=function(){var e,t,n,s,o=[[],[],[]],i=[!1,!1,!1],a=!1;for(e=0;e<3;++e)if(this.showContour[e]&&(a=!0,this.contourSize[e]>0&&null!==this.contourStart[e]&&null!==this.contourEnd[e]&&this.contourEnd[e]>this.contourStart[e]))for(i[e]=!0,t=this.contourStart[e];t<this.contourEnd[e];t+=this.contourSize[e])s=t*this.scene.dataScale[e],x(o[e],s);if(a){n=[[],[],[]];for(e=0;e<3;++e)this.showContour[e]&&(n[e]=i[e]?o[e]:this.scene.contourLevels[e]);this.surface.update({levels:n})}},s.update=function(e){var t,n,s,o,a,c,m,p,v,O,x,C,w=this.scene,_=w.fullSceneLayout,h=this.surface,E=g(e),b=w.dataScale,l=e.z[0].length,d=e._ylength,k=w.contourLevels;this.data=e,a=[];for(t=0;t<3;t++)for(a[t]=[],n=0;n<l;n++)a[t][n]=[];for(n=0;n<l;n++)for(s=0;s<d;s++)a[0][n][s]=this.getXat(n,s,e.xcalendar,_.xaxis),a[1][n][s]=this.getYat(n,s,e.ycalendar,_.yaxis),a[2][n][s]=this.getZat(n,s,e.zcalendar,_.zaxis);if(e.connectgaps)for(e._emptypoints=j(a[2]),y(a[2],e._emptypoints),e._interpolatedZ=[],n=0;n<l;n++)for(e._interpolatedZ[n]=[],s=0;s<d;s++)e._interpolatedZ[n][s]=a[2][n][s];for(t=0;t<3;t++)for(n=0;n<l;n++)for(s=0;s<d;s++)null==(p=a[t][n][s])?a[t][n][s]=NaN:p=a[t][n][s]*=b[t];for(t=0;t<3;t++)for(n=0;n<l;n++)for(s=0;s<d;s++)null!=(p=a[t][n][s])&&(this.minValues[t]>p&&(this.minValues[t]=p),this.maxValues[t]<p&&(this.maxValues[t]=p));for(t=0;t<3;t++)this.objectOffset[t]=.5*(this.minValues[t]+this.maxValues[t]);for(t=0;t<3;t++)for(n=0;n<l;n++)for(s=0;s<d;s++)null!=(p=a[t][n][s])&&(a[t][n][s]-=this.objectOffset[t]);m=[i(new Float32Array(l*d),[l,d]),i(new Float32Array(l*d),[l,d]),i(new Float32Array(l*d),[l,d])];for(t=0;t<3;t++)for(n=0;n<l;n++)for(s=0;s<d;s++)m[t].set(n,s,a[t][n][s]);if(a=[],o={colormap:E,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:e.opacityscale,opacity:e.opacity},O=f(e),o.intensityBounds=[O.min,O.max],e.surfacecolor){x=i(new Float32Array(l*d),[l,d]);for(n=0;n<l;n++)for(s=0;s<d;s++)x.set(n,s,e.surfacecolor[s][n]);m.push(x)}else o.intensityBounds[0]*=b[2],o.intensityBounds[1]*=b[2];(r<m[0].shape[0]||r<m[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(m[0].shape[0],0),this.dataScaleY=this.estimateScale(m[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(m)),e.surfacecolor&&(o.intensity=m.pop()),v=[!0,!0,!0],C=["x","y","z"];for(t=0;t<3;++t)c=e.contours[C[t]],v[t]=c.highlight,o.showContour[t]=c.show||c.highlight,o.showContour[t]&&(o.contourProject[t]=[c.project.x,c.project.y,c.project.z],c.show?(this.showContour[t]=!0,o.levels[t]=k[t],h.highlightColor[t]=o.contourColor[t]=u(c.color),c.usecolormap?h.highlightTint[t]=o.contourTint[t]=0:h.highlightTint[t]=o.contourTint[t]=1,o.contourWidth[t]=c.width,this.contourStart[t]=c.start,this.contourEnd[t]=c.end,this.contourSize[t]=c.size):(this.showContour[t]=!1,this.contourStart[t]=null,this.contourEnd[t]=null,this.contourSize[t]=0),c.highlight&&(o.dynamicColor[t]=u(c.highlightcolor),o.dynamicWidth[t]=c.highlightwidth));(function(e){var t=e[0].rgb,n=e[e.length-1].rgb;return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]})(E)&&(o.vertexColor=!0),o.objectOffset=this.objectOffset,o.coords=m,h.update(o),h.visible=e.visible,h.enableDynamic=v,h.enableHighlight=v,h.snapToData=!0,"lighting"in e&&(h.ambientLight=e.lighting.ambient,h.diffuseLight=e.lighting.diffuse,h.specularLight=e.lighting.specular,h.roughness=e.lighting.roughness,h.fresnel=e.lighting.fresnel),"lightposition"in e&&(h.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},e.exports=function(e,t){var o=e.glplot.gl,n=m({gl:o}),s=new h(e,n,t.uid);return n._trace=s,s.update(t),e.glplot.add(n),s}},60192:function(e,t,n){"use strict";var a=n(24040),o=n(3400),r=n(27260),c=n(16716);function i(e,t,n,s){var o=s("opacityscale");"max"===o?t.opacityscale=[[0,.1],[1,1]]:"min"===o?t.opacityscale=[[0,1],[1,.1]]:"extremes"===o?t.opacityscale=function(){for(var s,i,o=[],n=0;n<32;n++)s=n/31,i=.1+.9*(1-Math.pow(Math.sin(1*s*Math.PI),2)),o.push([s,Math.max(0,Math.min(1,i))]);return o}():function(e){var t,n,s=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(t=0;t<e.length;t++){if(n=e[t],2!==n.length||+n[0]<s)return!1;s=+n[0]}return!0}(o)||(t.opacityscale=void 0)}function s(e,t,n){t in e&&!(n in e)&&(e[n]=e[t])}e.exports={supplyDefaults:function(e,t,n,l){function d(n,s){return o.coerce(e,t,c,n,s)}var m,f,g,b,p=d("x"),v=d("y"),h=d("z");if(!h||!h.length||p&&p.length<1||v&&v.length<1)t.visible=!1;else{t._xlength=Array.isArray(p)&&o.isArrayOrTypedArray(p[0])?h.length:h[0].length,t._ylength=h.length,a.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],l),d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(e){d(e)}),b=d("surfacecolor"),g=["x","y","z"];for(m=0;m<3;++m){var u="contours."+g[m],j=d(u+".show"),y=d(u+".highlight");if(j||y)for(f=0;f<3;++f)d(u+".project."+g[f]);j&&(d(u+".color"),d(u+".width"),d(u+".usecolormap")),y&&(d(u+".highlightcolor"),d(u+".highlightwidth")),d(u+".start"),d(u+".end"),d(u+".size")}b||(s(e,"zmin","cmin"),s(e,"zmax","cmax"),s(e,"zauto","cauto")),r(e,t,l,d,{prefix:"",cLetter:"c"}),i(0,t,0,d),t._length=null}},opacityscaleDefaults:i}},91304:function(e,t,n){"use strict";e.exports={attributes:n(16716),supplyDefaults:n(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:n(56576),plot:n(79164),moduleType:"trace",name:"surface",basePlotModule:n(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(e,t,n){"use strict";var o=n(13916),s=n(92880).extendFlat,r=n(67824).overrideAll,i=n(25376),c=n(86968).u,a=n(29736).descriptionOnlyNumbers;(e.exports=r({domain:c({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:s({},o.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:s({},i({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:s({},o.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:s({},i({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(e,t,n){"use strict";var o=n(84888)._M,i=n(24752),s="table";t.name=s,t.plot=function(e){var t=o(e.calcdata,s)[0];t.length&&i(e,t)},t.clean=function(e,t,n,o){var i=o._has&&o._has(s),a=t._has&&t._has(s);i&&!a&&o._paperdiv.selectAll(".table").remove()}},39312:function(e,t,n){"use strict";var s=n(71688).wrap;e.exports=function(){return s({})}},23536:function(e){"use strict";e.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(e,t,n){"use strict";var r=n(23536),o=n(92880).extendFlat,m=n(38248),f=n(38116).isTypedArray,s=n(38116).isArrayOrTypedArray;function i(e){if(s(e)){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,i(e[n]));return t}return e}function d(e,t){return e+t}function a(e){var t,a,n=e.slice(),i=1/0,o=0;for(t=0;t<n.length;t++)f(n[t])?n[t]=Array.from(n[t]):s(n[t])||(n[t]=[n[t]]),i=Math.min(i,n[t].length),o=Math.max(o,n[t].length);if(i!==o)for(t=0;t<n.length;t++)a=o-n[t].length,a&&(n[t]=n[t].concat(c(a)));return n}function c(e){for(var n=new Array(e),t=0;t<e;t++)n[t]="";return n}function l(e){return e.calcdata.columns.reduce(function(t,n){return n.xIndex<e.xIndex?t+n.columnWidth:t},0)}function u(e,t){return Object.keys(e).map(function(n){return o({},e[n],{auxiliaryBlocks:t})})}function h(e,t){for(var o,c={},a=0,i=0,s={firstRowIndex:null,lastRowIndex:null,rows:[]},r=0,l=0,n=0;n<e.length;n++)o=e[n],s.rows.push({rowIndex:n,rowHeight:o}),((i+=o)>=t||n===e.length-1)&&(c[a]=s,s.key=l++,s.firstRowIndex=r,s.lastRowIndex=n,s={firstRowIndex:null,lastRowIndex:null,rows:[]},a+=i,r=n+1,i=0);return c}e.exports=function(e,t){var v=a(t.cells.values),k=function(e){return e.slice(t.header.values.length,e.length)},n=a(t.header.values);n.length&&!n[0].length&&(n[0]=[""],n=a(n));var b,j,O,A,p=n.concat(k(v).map(function(){return c((n[0]||[""]).length)})),g=t.domain,w=Math.floor(e._fullLayout._size.w*(g.x[1]-g.x[0])),_=Math.floor(e._fullLayout._size.h*(g.y[1]-g.y[0])),E=t.header.values.length?p[0].map(function(){return t.header.height}):[r.emptyHeaderHeight],S=v.length?v[0].map(function(){return t.cells.height}):[],C=E.reduce(d,0),M=h(S,_-C+r.uplift),x=u(h(E,C),[]),F=u(M,x),y={},f=t._fullInput.columnorder;return s(f)&&(f=Array.from(f)),f=f.concat(k(v.map(function(e,t){return t}))),b=p.map(function(e,n){var o=s(t.columnwidth)?t.columnwidth[Math.min(n,t.columnwidth.length-1)]:t.columnwidth;return m(o)?Number(o):1}),O=b.reduce(d,0),b=b.map(function(e){return e/O*w}),A=Math.max(i(t.header.line.width),i(t.cells.line.width)),j={key:t.uid+e._context.staticPlot,translateX:g.x[0]*e._fullLayout._size.w,translateY:e._fullLayout._size.h*(1-g.y[1]),size:e._fullLayout._size,width:w,maxLineWidth:A,height:_,columnOrder:f,groupHeight:_,rowBlocks:F,headerRowBlocks:x,scrollY:0,cells:o({},t.cells,{values:v}),headerCells:o({},t.header,{values:p}),gdColumns:p.map(function(e){return e[0]}),gdColumnsOriginalOrder:p.map(function(e){return e[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(e,t){var n=y[e];return y[e]=(n||0)+1,{key:e+"__"+y[e],label:e,specIndex:t,xIndex:f[t],xScale:l,x:void 0,calcdata:void 0,columnWidth:b[t]}})},j.columns.forEach(function(e){e.calcdata=j,e.x=l(e)}),j}},53056:function(e,t,n){"use strict";var s=n(92880).extendFlat;t.splitToPanels=function(e){var t=[0,0],n=s({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!0,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:s({},e.calcdata,{cells:e.calcdata.headerCells})});return[s({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),s({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),n]},t.splitToCells=function(e){var t=function(e){var t=e.rowBlocks[e.page],n=t?t.rows[0].rowIndex:0;return[n,t?n+t.rows.length:0]}(e);return(e.values||[]).slice(t[0],t[1]).map(function(n,s){return{keyWithinBlock:s+("string"==typeof n&&n.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:t[0]+s,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:n}})}},53212:function(e,t,n){"use strict";var s=n(3400),o=n(60520),i=n(86968).Q;e.exports=function(e,t,n,a){function r(n,i){return s.coerce(e,t,o,n,i)}i(t,a,r),r("columnwidth"),r("header.values"),r("header.format"),r("header.align"),r("header.prefix"),r("header.suffix"),r("header.height"),r("header.line.width"),r("header.line.color"),r("header.fill.color"),s.coerceFont(r,"header.font",s.extendFlat({},a.font)),function(e,t){for(var a=e.columnorder||[],o=e.header.values.length,i=a.slice(0,o),r=i.slice().sort(function(e,t){return e-t}),n=i.map(function(e){return r.indexOf(e)}),s=n.length;s<o;s++)n.push(s);t("columnorder",n)}(t,r),r("cells.values"),r("cells.format"),r("cells.align"),r("cells.prefix"),r("cells.suffix"),r("cells.height"),r("cells.line.width"),r("cells.line.color"),r("cells.fill.color"),s.coerceFont(r,"cells.font",s.extendFlat({},a.font)),t._length=null}},41724:function(e,t,n){"use strict";e.exports={attributes:n(60520),supplyDefaults:n(53212),calc:n(39312),plot:n(24752),moduleType:"trace",name:"table",basePlotModule:n(85852),categories:["noOpacity"],meta:{}}},24752:function(e,t,n){"use strict";var s=n(23536),i=n(33428),b=n(3400),R=b.numberFormat,o=n(71688),h=n(43616),L=n(72736),N=n(3400).raiseToTop,r=n(3400).strTranslate,H=n(3400).cancelTransition,F=n(55992),A=n(53056),E=n(76308);function l(e){return Math.ceil(e.calcdata.maxLineWidth/2)}function x(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function _(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function M(e){return[].concat.apply([],e.map(function(e){return e})).map(function(e){return e.__data__})}function c(e,t,n){var a,c,l,h,f=e.selectAll("."+s.cn.scrollbarKit).data(o.repeat,o.keyFun);f.enter().append("g").classed(s.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),f.each(function(e){var t=e.scrollbarState;t.totalHeight=function(e){var t=e.rowBlocks;return m(t,t.length-1)+(t.length?d(t[t.length-1],1/0):1)}(e),t.scrollableAreaHeight=e.groupHeight-p(e),t.currentlyVisibleHeight=Math.min(t.totalHeight,t.scrollableAreaHeight),t.ratio=t.currentlyVisibleHeight/t.totalHeight,t.barLength=Math.max(t.ratio*t.currentlyVisibleHeight,s.goldenRatio*s.scrollbarWidth),t.barWiggleRoom=t.currentlyVisibleHeight-t.barLength,t.wiggleRoom=Math.max(0,t.totalHeight-t.scrollableAreaHeight),t.topY=0===t.barWiggleRoom?0:e.scrollY/t.wiggleRoom*t.barWiggleRoom,t.bottomY=t.topY+t.barLength,t.dragMultiplier=t.wiggleRoom/t.barWiggleRoom}).attr("transform",function(e){var t=e.width+s.scrollbarWidth/2+s.scrollbarOffset;return r(t,p(e))}),c=f.selectAll("."+s.cn.scrollbar).data(o.repeat,o.keyFun),c.enter().append("g").classed(s.cn.scrollbar,!0),l=c.selectAll("."+s.cn.scrollbarSlider).data(o.repeat,o.keyFun),l.enter().append("g").classed(s.cn.scrollbarSlider,!0),l.attr("transform",function(e){return r(0,e.scrollbarState.topY||0)}),a=l.selectAll("."+s.cn.scrollbarGlyph).data(o.repeat,o.keyFun),a.enter().append("line").classed(s.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",s.scrollbarWidth).attr("stroke-linecap","round").attr("y1",s.scrollbarWidth/2),a.attr("y2",function(e){return e.scrollbarState.barLength-s.scrollbarWidth/2}).attr("stroke-opacity",function(e){return e.columnDragInProgress||!e.scrollbarState.barWiggleRoom||n?0:.4}),a.transition().delay(0).duration(0),a.transition().delay(s.scrollbarHideDelay).duration(s.scrollbarHideDuration).attr("stroke-opacity",0),h=c.selectAll("."+s.cn.scrollbarCaptureZone).data(o.repeat,o.keyFun),h.enter().append("line").classed(s.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",s.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(n){var a=i.event.y,r=this.getBoundingClientRect(),s=n.scrollbarState,o=a-r.top,c=i.scale.linear().domain([0,s.scrollableAreaHeight]).range([0,s.totalHeight]).clamp(!0);s.topY<=o&&o<=s.bottomY||u(t,e,null,c(o-s.barLength/2))(n)}).call(i.behavior.drag().origin(function(e){return i.event.stopPropagation(),e.scrollbarState.scrollbarScrollInProgress=!0,e}).on("drag",u(t,e)).on("dragend",function(){})),h.attr("y2",function(e){return e.scrollbarState.scrollableAreaHeight}),t._context.staticPlot&&(a.remove(),h.remove())}function j(e,t,n,r){var l,d,u,m=function(e){var t=e.selectAll("."+s.cn.columnCells).data(o.repeat,o.keyFun);return t.enter().append("g").classed(s.cn.columnCells,!0),t.exit().remove(),t}(n),c=function(e){var t=e.selectAll("."+s.cn.columnCell).data(A.splitToCells,function(e){return e.keyWithinBlock});return t.enter().append("g").classed(s.cn.columnCell,!0),t.exit().remove(),t}(m);!function(e){e.each(function(e,t){var s=e.calcdata.cells.font,n=e.column.specIndex,o={size:a(s.size,n,t),color:a(s.color,n,t),family:a(s.family,n,t),weight:a(s.weight,n,t),style:a(s.style,n,t),variant:a(s.variant,n,t)};e.rowNumber=e.key,e.align=a(e.calcdata.cells.align,n,t),e.cellBorderWidth=a(e.calcdata.cells.line.width,n,t),e.font=o})}(c),d=function(e){var t=e.selectAll("."+s.cn.cellRect).data(o.repeat,function(e){return e.keyWithinBlock});return t.enter().append("rect").classed(s.cn.cellRect,!0),t}(c),!function(e){e.attr("width",function(e){return e.column.columnWidth}).attr("stroke-width",function(e){return e.cellBorderWidth}).each(function(e){var t=i.select(this);E.stroke(t,a(e.calcdata.cells.line.color,e.column.specIndex,e.rowNumber)),E.fill(t,a(e.calcdata.cells.fill.color,e.column.specIndex,e.rowNumber))})}(d),u=function(e){var t=e.selectAll("."+s.cn.cellTextHolder).data(o.repeat,function(e){return e.keyWithinBlock});return t.enter().append("g").classed(s.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),t}(c),l=function(e){var t=e.selectAll("."+s.cn.cellText).data(o.repeat,function(e){return e.keyWithinBlock});return t.enter().append("text").classed(s.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){i.event.stopPropagation()}),t}(u),!function(e){e.each(function(e){h.font(i.select(this),e.font)})}(l),w(l,t,r,e),v(c)}function w(e,t,n,o){e.text(function(e){var t,c,h,p,u=e.column.specIndex,d=e.rowNumber,o=e.value,r="string"==typeof o,f=r&&o.match(/<br>/i),b=!r||f;e.mayHaveMarkup=r&&o.match(/[<&>]/),t="string"==typeof(p=o)&&p.match(s.latexCheck),e.latex=t;var i,l,g=t?"":a(e.calcdata.cells.prefix,u,d)||"",v=t?"":a(e.calcdata.cells.suffix,u,d)||"",m=t?null:a(e.calcdata.cells.format,u,d)||null,n=g+(m?R(m)(e.value):e.value)+v;return e.wrappingNeeded=!e.wrapped&&!b&&!t&&(i=O(n)),e.cellHeightMayIncrease=f||t||e.mayHaveMarkup||(void 0===i?O(n):i),e.needsConvertToTspans=e.mayHaveMarkup||e.wrappingNeeded||e.latex,e.wrappingNeeded?(c=(" "===s.wrapSplitCharacter?n.replace(/<a href=/gi,"<a_href="):n).split(s.wrapSplitCharacter),h=" "===s.wrapSplitCharacter?c.map(function(e){return e.replace(/<a_href=/gi,"<a href=")}):c,e.fragments=h.map(function(e){return{text:e,width:null}}),e.fragments.push({fragment:s.wrapSpacer,width:null}),l=h.join(s.lineBreaker)+s.lineBreaker+s.wrapSpacer):(delete e.fragments,l=n),l}).attr("dy",function(e){return e.needsConvertToTspans?0:"0.75em"}).each(function(e){var a=this,c=i.select(a),l=e.wrappingNeeded?T:z;e.needsConvertToTspans?L.convertToTspans(c,o,l(n,a,t,o,e)):i.select(a.parentNode).attr("transform",function(e){return r(k(e),s.cellPad)}).attr("text-anchor",function(e){return{left:"start",center:"middle",right:"end"}[e.align]})})}function O(e){return-1!==e.indexOf(s.wrapSplitCharacter)}function a(e,t,n){if(b.isArrayOrTypedArray(e)){var s=e[Math.min(t,e.length-1)];return b.isArrayOrTypedArray(s)?s[Math.min(n,s.length-1)]:s}return e}function C(e,t,n){e.transition().ease(s.releaseTransitionEase).duration(s.releaseTransitionDuration).attr("transform",r(t.x,n))}function g(e){return"cells"===e.type}function D(e){return"header"===e.type}function p(e){return(e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(e,t){return e+d(t,1/0)},0)}function f(e,t,n){if(o=M(t)[0],void 0!==o){var o,i=o.rowBlocks,a=o.calcdata,u=m(i,i.length),l=o.calcdata.groupHeight-p(o),d=a.scrollY=Math.max(0,Math.min(u-l,a.scrollY)),s=function(e,t,n){for(var l=[],a=0,s=0;s<e.length;s++){for(var r=e[s],c=r.rows,o=0,i=0;i<c.length;i++)o+=c[i].rowHeight;r.allRowsHeight=o,t<a+o&&t+n>a&&l.push(s),a+=o}return l}(i,d,l);1===s.length&&(s[0]===i.length-1?s.unshift(s[0]-1):s.push(s[0]+1)),s[0]%2&&s.reverse(),t.each(function(e,t){e.page=s[t],e.scrollY=d}),t.attr("transform",function(e){var t=m(e.rowBlocks,e.page)-e.scrollY;return r(0,t)}),e&&(S(e,n,t,s,o.prevPages,o,0),S(e,n,t,s,o.prevPages,o,1),c(n,e))}}function u(e,t,n,o){return function(a){var l,r=a.calcdata?a.calcdata:a,c=t.filter(function(e){return r.key===e.key}),d=n||r.scrollbarState.dragMultiplier,u=r.scrollY;return r.scrollY=void 0===o?r.scrollY+d*i.event.dy:o,l=c.selectAll("."+s.cn.yColumn).selectAll("."+s.cn.columnBlock).filter(g),f(e,l,c),r.scrollY===u}}function S(e,t,n,s,o,i,a){s[a]!==o[a]&&(clearTimeout(i.currentRepaint[a]),i.currentRepaint[a]=setTimeout(function(){var i=n.filter(function(e,t){return t===a&&s[t]!==o[t]});j(e,t,i,n),o[a]=s[a]}))}function T(e,t,n,o){return function(){var a=i.select(t.parentNode);a.each(function(e){t=e.fragments,a.selectAll("tspan.line").each(function(e,n){t[n].width=this.getComputedTextLength()});var t,i,r,l=t[t.length-1].width,c=t.slice(0,-1),n=[],o=0,d=e.column.columnWidth-2*s.cellPad;for(e.value="";c.length;)o+(r=(i=c.shift()).width+l)>d&&(e.value+=n.join(s.wrapSpacer)+s.lineBreaker,n=[],o=0),n.push(i.text),o+=r;o&&(e.value+=n.join(s.wrapSpacer)),e.wrapped=!0}),a.selectAll("tspan.line").remove(),w(a.select("."+s.cn.cellText),n,e,o),i.select(t.parentNode.parentNode).call(v)}}function z(e,t,n,o,a){return function(){if(!a.settledY){var m=i.select(t.parentNode),l=y(a),d=a.key-l.firstRowIndex,u=l.rows[d].rowHeight,p=a.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*s.cellPad:u,h=Math.max(p,u);h-l.rows[d].rowHeight&&(l.rows[d].rowHeight=h,e.selectAll("."+s.cn.columnCell).call(v),f(null,e.filter(g),0),c(n,o,!0)),m.attr("transform",function(){var e=this,n=e.parentNode.getBoundingClientRect(),o=i.select(e.parentNode).select("."+s.cn.cellRect).node().getBoundingClientRect(),t=e.transform.baseVal.consolidate(),c=o.top-n.top+(t?t.matrix.f:s.cellPad);return r(k(a,i.select(e.parentNode).select("."+s.cn.cellTextHolder).node().getBoundingClientRect().width),c)}),a.settledY=!0}}}function k(e,t){switch(e.align){case"left":default:return s.cellPad;case"right":return e.column.columnWidth-(t||0)-s.cellPad;case"center":return(e.column.columnWidth-(t||0))/2}}function v(e){e.attr("transform",function(e){var t=e.rowBlocks[0].auxiliaryBlocks.reduce(function(e,t){return e+d(t,1/0)},0),n=d(y(e),e.key);return r(0,n+t)}).selectAll("."+s.cn.cellRect).attr("height",function(e){return(t=y(e),n=e.key,t.rows[n-t.firstRowIndex]).rowHeight;var t,n})}function m(e,t){for(var s=0,n=t-1;n>=0;n--)s+=P(e[n]);return s}function d(e,t){for(var s=0,n=0;n<e.rows.length&&e.rows[n].rowIndex<t;n++)s+=e.rows[n].rowHeight;return s}function P(e){if(t=e.allRowsHeight,void 0!==t)return t;for(var t,n=0,s=0;s<e.rows.length;s++)n+=e.rows[s].rowHeight;return e.allRowsHeight=n,n}function y(e){return e.rowBlocks[e.page]}e.exports=function(e,t){var n,a,d,p,v,y,w,O,E,k,S,T,b=!e._context.staticPlot,m=e._fullLayout._paper.selectAll("."+s.cn.table).data(t.map(function(t){var n=o.unwrap(t).trace;return F(e,n)}),o.keyFun);m.exit().remove(),m.enter().append("g").classed(s.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),m.attr("width",function(e){return e.width+e.size.l+e.size.r}).attr("height",function(e){return e.height+e.size.t+e.size.b}).attr("transform",function(e){return r(e.translateX,e.translateY)}),n=m.selectAll("."+s.cn.tableControlView).data(o.repeat,o.keyFun),T=n.enter().append("g").classed(s.cn.tableControlView,!0).style("box-sizing","content-box"),b&&(S="onwheel"in document?"wheel":"mousewheel",T.on("mousemove",function(t){n.filter(function(e){return t===e}).call(c,e)}).on(S,function(t){if(!t.scrollbarState.wheeling){t.scrollbarState.wheeling=!0;var s=t.scrollY+i.event.deltaY;u(e,n,null,s)(t)||(i.event.stopPropagation(),i.event.preventDefault()),t.scrollbarState.wheeling=!1}}).call(c,e,!0)),n.attr("transform",function(e){return r(e.size.l,e.size.t)}),y=n.selectAll("."+s.cn.scrollBackground).data(o.repeat,o.keyFun),y.enter().append("rect").classed(s.cn.scrollBackground,!0).attr("fill","none"),y.attr("width",function(e){return e.width}).attr("height",function(e){return e.height}),n.each(function(t){h.setClipUrl(i.select(this),x(e,t),e)}),a=n.selectAll("."+s.cn.yColumn).data(function(e){return e.columns},o.keyFun),a.enter().append("g").classed(s.cn.yColumn,!0),a.exit().remove(),a.attr("transform",function(e){return r(e.x,0)}),b&&a.call(i.behavior.drag().origin(function(t){return C(i.select(this),t,-s.uplift),N(this),t.calcdata.columnDragInProgress=!0,c(n.filter(function(e){return t.calcdata.key===e.key}),e),t}).on("drag",function(e){var n=i.select(this),t=function(t){return(e===t?i.event.x:t.x)+t.columnWidth/2};e.x=Math.max(-s.overdrag,Math.min(e.calcdata.width+s.overdrag-e.columnWidth,i.event.x)),M(a).filter(function(t){return t.calcdata.key===e.calcdata.key}).sort(function(e,n){return t(e)-t(n)}).forEach(function(t,n){t.xIndex=n,t.x=e===t?t.x:t.xScale(t)}),a.filter(function(t){return e!==t}).transition().ease(s.transitionEase).duration(s.transitionDuration).attr("transform",function(e){return r(e.x,0)}),n.call(H).attr("transform",r(e.x,-s.uplift))}).on("dragend",function(t){var s=i.select(this),n=t.calcdata;t.x=t.xScale(t),t.calcdata.columnDragInProgress=!1,C(s,t,0),function(e,t,n){var s=t.gdColumnsOriginalOrder;t.gdColumns.sort(function(e,t){return n[s.indexOf(e)]-n[s.indexOf(t)]}),t.columnorder=n,e.emit("plotly_restyle")}(e,n,n.columns.map(function(e){return e.xIndex}))})),a.each(function(t){h.setClipUrl(i.select(this),_(e,t),e)}),d=a.selectAll("."+s.cn.columnBlock).data(A.splitToPanels,o.keyFun),d.enter().append("g").classed(s.cn.columnBlock,!0).attr("id",function(e){return e.key}),d.style("cursor",function(e){return e.dragHandle?"ew-resize":e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"}),k=d.filter(D),v=d.filter(g),b&&v.call(i.behavior.drag().origin(function(e){return i.event.stopPropagation(),e}).on("drag",u(e,n,-1)).on("dragend",function(){})),j(e,n,k,d),j(e,n,v,d),w=n.selectAll("."+s.cn.scrollAreaClip).data(o.repeat,o.keyFun),w.enter().append("clipPath").classed(s.cn.scrollAreaClip,!0).attr("id",function(t){return x(e,t)}),O=w.selectAll("."+s.cn.scrollAreaClipRect).data(o.repeat,o.keyFun),O.enter().append("rect").classed(s.cn.scrollAreaClipRect,!0).attr("x",-s.overdrag).attr("y",-s.uplift).attr("fill","none"),O.attr("width",function(e){return e.width+2*s.overdrag}).attr("height",function(e){return e.height+s.uplift}),a.selectAll("."+s.cn.columnBoundary).data(o.repeat,o.keyFun).enter().append("g").classed(s.cn.columnBoundary,!0),p=a.selectAll("."+s.cn.columnBoundaryClippath).data(o.repeat,o.keyFun),p.enter().append("clipPath").classed(s.cn.columnBoundaryClippath,!0),p.attr("id",function(t){return _(e,t)}),E=p.selectAll("."+s.cn.columnBoundaryRect).data(o.repeat,o.keyFun),E.enter().append("rect").classed(s.cn.columnBoundaryRect,!0).attr("fill","none"),E.attr("width",function(e){return e.columnWidth+2*l(e)}).attr("height",function(e){return e.calcdata.height+2*l(e)+s.uplift}).attr("x",function(e){return-l(e)}).attr("y",function(e){return-l(e)}),f(null,v,n)}},40516:function(e,t,n){"use strict";var l=n(21776).Ks,d=n(21776).Gw,r=n(49084),c=n(86968).u,o=n(74996),s=n(424),a=n(32984),i=n(92880).extendFlat,u=n(98192).c;e.exports={labels:s.labels,parents:s.parents,values:s.values,branchvalues:s.branchvalues,count:s.count,level:s.level,maxdepth:s.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:i({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:s.marker.colors,pattern:u,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:s.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:i({},o.textfont,{}),editType:"calc"},text:o.text,textinfo:s.textinfo,texttemplate:d({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:s.hoverinfo,hovertemplate:l({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextfont:o.insidetextfont,outsidetextfont:i({},o.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:o.sort,root:s.root,domain:c({name:"treemap",trace:!0,editType:"calc"})}},79516:function(e,t,n){"use strict";var s=n(7316);t.name="treemap",t.plot=function(e,n,o,i){s.plotBasePlot(t.name,e,n,o,i)},t.clean=function(e,n,o,i){s.cleanBasePlot(t.name,e,n,o,i)}},97840:function(e,t,n){"use strict";var s=n(3776);t.r=function(e,t){return s.calc(e,t)},t.q=function(e){return s._runCrossTraceCalc("treemap",e)}},32984:function(e){"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(e,t,n){"use strict";var s=n(3400),d=n(40516),i=n(76308),a=n(86968).Q,r=n(31508).handleText,c=n(78048).TEXTPAD,l=n(74174).handleMarkerDefaults,o=n(8932),u=o.hasColorscale,h=o.handleDefaults;e.exports=function(e,t,n,o){function m(n,o){return s.coerce(e,t,d,n,o)}var f,p,g,v,j,y=m("labels"),b=m("parents");y&&y.length&&b&&b.length?(p=m("values"),m(p&&p.length?"branchvalues":"count"),m("level"),m("maxdepth"),"squarify"===m("tiling.packing")&&m("tiling.squarifyratio"),m("tiling.flip"),m("tiling.pad"),j=m("text"),m("texttemplate"),t.texttemplate||m("textinfo",s.isArrayOrTypedArray(j)?"text+label":"label"),m("hovertext"),m("hovertemplate"),g=m("pathbar.visible"),r(e,t,o,m,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),m("textposition"),v=-1!==t.textposition.indexOf("bottom"),l(e,t,o,m),(t._hasColorscale=u(e,"marker","colors")||(e.marker||{}).coloraxis)?h(e,t,o,m,{prefix:"marker.",cLetter:"c"}):m("marker.depthfade",!(t.marker.colors||[]).length),f=2*t.textfont.size,m("marker.pad.t",v?f/4:f),m("marker.pad.l",f/4),m("marker.pad.r",f/4),m("marker.pad.b",v?f:f/4),m("marker.cornerradius"),t._hovered={marker:{line:{width:2,color:i.contrast(o.paper_bgcolor)}}},g&&(m("pathbar.thickness",t.pathbar.textfont.size+2*c),m("pathbar.side"),m("pathbar.edgeshape")),m("sort"),m("root.color"),a(t,o,m),t._length=null):t.visible=!1}},95808:function(e,t,n){"use strict";var o=n(33428),i=n(78176),a=n(82744).clearMinTextSize,r=n(60100).resizeText,s=n(52960);e.exports=function(e,t,n,c,l){var d,h,u=l.type,p=l.drawDescendants,m=e._fullLayout,f=m["_"+u+"layer"],g=!n;a(u,m),(h=f.selectAll("g.trace."+u).data(t,function(e){return e[0].trace.uid})).enter().append("g").classed("trace",!0).classed(u,!0),h.order(),!m.uniformtext.mode&&i.hasTransition(n)?(c&&(d=c()),o.transition().duration(n.duration).ease(n.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).each(function(){f.selectAll("g.trace").each(function(t){s(e,t,this,n,p)})})):(h.each(function(t){s(e,t,this,n,p)}),m.uniformtext.mode&&r(e,f.selectAll(".trace"),u)),g&&h.exit().remove()}},27336:function(e,t,n){"use strict";var l=n(33428),o=n(3400),r=n(43616),h=n(72736),d=n(13832),c=n(66192).styleOne,i=n(32984),s=n(78176),u=n(45716),a=!0;e.exports=function(e,t,n,m,f){var v,A=f.barDifY,g=f.width,p=f.height,w=f.viewX,j=f.viewY,y=f.pathSlice,N=f.toMoveInsideSlice,E=f.strTransform,O=f.hasTransition,z=f.handleSlicesExit,F=f.makeUpdateSliceInterpolator,L=f.makeUpdateTextInterpolator,b={},M=e._context.staticPlot,S=e._fullLayout,k=t[0],x=k.trace,T=k.hierarchy,C=g/x._entryDepth,D=s.listPath(n.data,"id"),_=d(T.copy(),[g,p],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(_=_.filter(function(e){var t=D.indexOf(e.data.id);return-1!==t&&(e.x0=C*t,e.x1=C*(t+1),e.y0=A,e.y1=A+p,e.onPathbar=!0,!0)})).reverse(),(m=m.data(_,s.getPtId)).enter().append("g").classed("pathbar",!0),z(m,a,b,[g,p],y),m.order(),v=m,O&&(v=v.transition().each("end",function(){var t=l.select(this);s.setSliceCursor(t,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),v.each(function(d){d._x0=w(d.x0),d._x1=w(d.x1),d._y0=j(d.y0),d._y1=j(d.y1),d._hoverX=w(d.x1-Math.min(g,p)/2),d._hoverY=j(d.y1-p/2),m=l.select(this),f=o.ensureSingle(m,"path","surface",function(e){e.style("pointer-events",M?"none":"all")}),O?f.transition().attrTween("d",function(e){var t=F(e,a,b,[g,p]);return function(e){return y(t(e))}}):f.attr("d",y),m.call(u,n,e,t,{styleOne:c,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(s.setSliceCursor,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:e._transitioning}),f.call(c,d,x,e,{hovered:!1}),d._text=(s.getPtLabel(d)||"").split("<br>").join(" ")||"";var m,f,C=o.ensureSingle(m,"g","slicetext"),v=o.ensureSingle(C,"text","",function(e){e.attr("data-notex",1)}),_=o.ensureUniformFontSize(e,s.determineTextFont(x,d,S.font,{onPathbar:!0}));v.text(d._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(r.font,_).call(h.convertToTspans,e),d.textBB=r.bBox(v.node()),d.transform=N(d,{fontSize:_.size,onPathbar:!0}),d.transform.fontSize=_.size,O?v.transition().attrTween("transform",function(e){var t=L(e,a,b,[g,p]);return function(e){return E(t(e))}}):v.attr("transform",E(d))})}},76477:function(e,t,n){"use strict";var l=n(33428),o=n(3400),r=n(43616),d=n(72736),m=n(13832),c=n(66192).styleOne,i=n(32984),s=n(78176),u=n(45716),h=n(96488).formatSliceLabel,a=!1;e.exports=function(e,t,n,f,p){var b,w,x,S,j=p.width,v=p.height,C=p.viewX,E=p.viewY,A=p.pathSlice,L=p.toMoveInsideSlice,T=p.strTransform,y=p.hasTransition,I=p.handleSlicesExit,H=p.makeUpdateSliceInterpolator,P=p.makeUpdateTextInterpolator,M=p.prevEntry,R=e._context.staticPlot,z=e._fullLayout,g=t[0].trace,N=-1!==g.textposition.indexOf("left"),B=-1!==g.textposition.indexOf("right"),O=-1!==g.textposition.indexOf("bottom"),D=!O&&!g.marker.pad.t||O&&!g.marker.pad.b,F=m(n,[j,v],{packing:g.tiling.packing,squarifyratio:g.tiling.squarifyratio,flipX:g.tiling.flip.indexOf("x")>-1,flipY:g.tiling.flip.indexOf("y")>-1,pad:{inner:g.tiling.pad,top:g.marker.pad.t,left:g.marker.pad.l,right:g.marker.pad.r,bottom:g.marker.pad.b}}).descendants(),k=1/0,_=-1/0;return F.forEach(function(e){var t=e.depth;t>=g._maxDepth?(e.x0=e.x1=(e.x0+e.x1)/2,e.y0=e.y1=(e.y0+e.y1)/2):(k=Math.min(k,t),_=Math.max(_,t))}),f=f.data(F,s.getPtId),g._maxVisibleLayers=isFinite(_)?_-k+1:0,f.enter().append("g").classed("slice",!0),I(f,a,{},[j,v],A),f.order(),b=null,y&&M&&(S=s.getPtId(M),f.each(function(e){null===b&&s.getPtId(e)===S&&(b={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})})),x=function(){return b||{x0:0,x1:j,y0:0,y1:v}},w=f,y&&(w=w.transition().each("end",function(){var t=l.select(this);s.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),w.each(function(m){f=s.isHeader(m,g),m._x0=C(m.x0),m._x1=C(m.x1),m._y0=E(m.y0),m._y1=E(m.y1),m._hoverX=C(m.x1-g.marker.pad.r),m._hoverY=E(O?m.y1-g.marker.pad.b/2:m.y0+g.marker.pad.t/2),p=l.select(this),b=o.ensureSingle(p,"path","surface",function(e){e.style("pointer-events",R?"none":"all")}),y?b.transition().attrTween("d",function(e){var t=H(e,a,x(),[j,v]);return function(e){return A(t(e))}}):b.attr("d",A),p.call(u,n,e,t,{styleOne:c,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(s.setSliceCursor,e,{isTransitioning:e._transitioning}),b.call(c,m,g,e,{hovered:!1}),m.x0===m.x1||m.y0===m.y1?m._text="":m._text=f?D?"":s.getPtLabel(m)||"":h(m,n,g,t,z)||"";var f,p,b,S=o.ensureSingle(p,"g","slicetext"),_=o.ensureSingle(S,"text","",function(e){e.attr("data-notex",1)}),w=o.ensureUniformFontSize(e,s.determineTextFont(g,m,z.font)),k=m._text||" ",M=f&&-1===k.indexOf("<br>");_.text(k).classed("slicetext",!0).attr("text-anchor",B?"end":N||M?"start":"middle").call(r.font,w).call(d.convertToTspans,e),m.textBB=r.bBox(_.node()),m.transform=L(m,{fontSize:w.size,isHeader:f}),m.transform.fontSize=w.size,y?_.transition().attrTween("transform",function(e){var t=P(e,a,x(),[j,v]);return function(e){return T(t(e))}}):_.attr("transform",T(m))}),b}},83024:function(e){"use strict";e.exports=function e(t,n,s){s.swapXY&&(o=t.x0,t.x0=t.y0,t.y0=o,o=t.x1,t.x1=t.y1,t.y1=o),s.flipX&&(o=t.x0,t.x0=n[0]-t.x1,t.x1=n[0]-o),s.flipY&&(o=t.y0,t.y0=n[1]-t.y1,t.y1=n[1]-o);var o,i,a=t.children;if(a)for(i=0;i<a.length;i++)e(a[i],n,s)}},31991:function(e,t,n){"use strict";e.exports={moduleType:"trace",name:"treemap",basePlotModule:n(79516),categories:[],animatable:!0,attributes:n(40516),layoutAttributes:n(45392),supplyDefaults:n(34092),supplyLayoutDefaults:n(77480),calc:n(97840).r,crossTraceCalc:n(97840).q,plot:n(53264),style:n(66192).style,colorbar:n(5528),meta:{}}},45392:function(e){"use strict";e.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(e,t,n){"use strict";var s=n(3400),o=n(45392);e.exports=function(e,t){function n(n,i){return s.coerce(e,t,o,n,i)}n("treemapcolorway",t.colorway),n("extendtreemapcolors")}},13832:function(e,t,n){"use strict";var s=n(74148),o=n(83024);e.exports=function(e,t,n){var i,m,a=n.flipX,r=n.flipY,c="dice-slice"===n.packing,l=n.pad[r?"bottom":"top"],d=n.pad[a?"right":"left"],u=n.pad[a?"left":"right"],h=n.pad[r?"top":"bottom"];return c&&(i=d,d=l,l=i,i=u,u=h,h=i),m=s.treemap().tile(function(e,t){switch(e){case"squarify":return s.treemapSquarify.ratio(t);case"binary":return s.treemapBinary;case"dice":return s.treemapDice;case"slice":return s.treemapSlice;default:return s.treemapSliceDice}}(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(d).paddingRight(u).paddingTop(l).paddingBottom(h).size(c?[t[1],t[0]]:t)(e),(c||a||r)&&o(m,t,{swapXY:c,flipX:a,flipY:r}),m}},53264:function(e,t,n){"use strict";var s=n(95808),o=n(76477);e.exports=function(e,t,n,i){return s(e,t,n,i,{type:"treemap",drawDescendants:o})}},52960:function(e,t,n){"use strict";var l=n(33428),r=n(67756).qy,s=n(78176),i=n(3400),c=n(78048).TEXTPAD,d=n(98184).toMoveInsideBar,a=n(82744).recordMinTextSize,u=n(32984),h=n(27336);function o(e){return s.isHierarchyRoot(e)?"":s.getPtId(e)}e.exports=function(e,t,n,m,f){var w=e._fullLayout,q=t[0],p=q.trace,y="icicle"===p.type,te=q.hierarchy,j=s.findEntryWithLevel(te,p.level),X=l.select(n),D=X.selectAll("g.pathbar"),V=X.selectAll("g.slice");if(!j)return D.remove(),void V.remove();var se=s.isHierarchyRoot(j),z=!w.uniformtext.mode&&s.hasTransition(m),E=s.getMaxDepth(p),O=w._size,b=p.domain,H=O.w*(b.x[1]-b.x[0]),U=O.h*(b.y[1]-b.y[0]),F=H,T=p.pathbar.thickness,Q=p.marker.line.width+u.gapWithPathbar,B=p.pathbar.visible?p.pathbar.side.indexOf("bottom")>-1?U+Q:-(T+Q):0,I={x0:F,x1:F,y0:B,y1:B+T},$=function(e,t,n){var s=p.tiling.pad,o=function(e){return e-s<=t.x0},i=function(e){return e+s>=t.x1},a=function(e){return e-s<=t.y0},r=function(e){return e+s>=t.y1};return e.x0===t.x0&&e.x1===t.x1&&e.y0===t.y0&&e.y1===t.y1?{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}:{x0:o(e.x0-s)?0:i(e.x0-s)?n[0]:e.x0,x1:o(e.x1+s)?0:i(e.x1+s)?n[0]:e.x1,y0:a(e.y0-s)?0:r(e.y0-s)?n[1]:e.y0,y1:a(e.y1+s)?0:r(e.y1+s)?n[1]:e.y1}},R=null,S={},L={},oe=null,C=function(e,t){return t?S[o(e)]:L[o(e)]};q.hasMultipleRoots&&se&&E++,p._maxDepth=E,p._backgroundColor=w.paper_bgcolor,p._entryDepth=j.data.depth,p._atRootLevel=se;var de=-H/2+O.l+O.w*(b.x[1]+b.x[0])/2,le=-U/2+O.t+O.h*(1-(b.y[1]+b.y[0])/2),k=function(e){return de+e},A=function(e){return le+e},ce=A(0),re=k(0),M=function(e){return re+e},K=function(e){return ce+e};function g(e,t){return e+","+t}var ae=M(0),x=function(e){e.x=Math.max(ae,e.x)},P=p.pathbar.edgeshape,v=p[y?"tiling":"marker"].pad,_=function(e){return-1!==p.textposition.indexOf(e)},ne=_("top"),ue=_("left"),ie=_("right"),N=_("bottom"),W=function(e,t){var n,i,u,r=e.x0,l=e.x1,s=e.y0,o=e.y1,g=e.textBB,h=ne||t.isHeader&&!N?"start":N?"end":"middle",m=_("right"),f=_("left")||t.onPathbar?-1:m?1:0;return t.isHeader&&((r+=(y?v:v.l)-c)>=(l-=(y?v:v.r)-c)&&(u=(r+l)/2,r=u,l=u),N?s<(i=o-(y?v:v.b))&&i<o&&(s=i):s<(i=s+(y?v:v.t))&&i<o&&(o=i)),n=d(r,l,s,o,g,{isHorizontal:!1,constrained:!0,angle:0,anchor:h,leftToRight:f}),n.fontSize=t.fontSize,n.targetX=k(n.targetX),n.targetY=A(n.targetY),isNaN(n.targetX)||isNaN(n.targetY)?{}:(r!==l&&s!==o&&a(p.type,n,w),{scale:n.scale,rotate:n.rotate,textX:n.textX,textY:n.textY,anchorX:n.anchorX,anchorY:n.anchorY,targetX:n.targetX,targetY:n.targetY})},Y=function(e,t){for(var n,s=0,o=e;!n&&s<E;)s++,(o=o.parent)?n=C(o,t):s=E;return n||{}},G=function(e,t,n,s,o){var a,c,l=C(e,t);return l?a=l:t?a=I:R?e.parent?(c=oe||n,c&&!t?a=$(e,c,s):(a={},i.extendFlat(a,Y(e,t)))):(a=i.extendFlat({},e),y&&("h"===o.orientation?o.flipX?a.x0=e.x1:a.x1=0:o.flipY?a.y0=e.y1:a.y1=0)):a={},r(a,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})},Z=function(e,t,n,c){var l,h=C(e,t),d={},u=function(e,t,n,s){if(t)return S[o(te)]||I;var i=L[p.level]||n;return function(e){return e.data.depth-j.data.depth<E}(e)?$(e,i,s):{}}(e,t,n,c);return i.extendFlat(d,{transform:W({x0:u.x0,x1:u.x1,y0:u.y0,y1:u.y1,textBB:e.textBB,_text:e._text},{isHeader:s.isHeader(e,p)})}),h?d=h:e.parent&&i.extendFlat(d,Y(e,t)),l=e.transform,e.x0!==e.x1&&e.y0!==e.y1&&a(p.type,l,w),r(d,{transform:{scale:l.scale,rotate:l.rotate,textX:l.textX,textY:l.textY,anchorX:l.anchorX,anchorY:l.anchorY,targetX:l.targetX,targetY:l.targetY}})},ee=function(e,t,n,s,o){var i=s[0],a=s[1];z?e.exit().transition().each(function(){var e=l.select(this);e.select("path.surface").transition().attrTween("d",function(e){var n=function(e,t,n,s){var o,i,a=C(e,t);return t?o=I:(i=C(j,t),o=i?$(e,i,s):{}),r(a,o)}(e,t,0,[i,a]);return function(e){return o(n(e))}}),e.select("g.slicetext").attr("opacity",0)}).remove():e.exit().remove()},J=function(e){var t=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&a(p.type,t,w),i.getTextTransform({textX:t.textX,textY:t.textY,anchorX:t.anchorX,anchorY:t.anchorY,targetX:t.targetX,targetY:t.targetY,scale:t.scale,rotate:t.rotate})};z&&(D.each(function(e){S[o(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(S[o(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate})}),V.each(function(e){L[o(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(L[o(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate}),!R&&s.isEntry(e)&&(R=e)})),oe=f(e,t,j,V,{width:H,height:U,viewX:k,viewY:A,pathSlice:function(e){var t,n,l,s=k(e.x0),i=k(e.x1),a=A(e.y0),o=A(e.y1),r=i-s,c=o-a;return!r||!c?"":(l=p.marker.cornerradius||0,t=Math.min(l,r/2,c/2),t&&e.data&&e.data.data&&e.data.data.label&&(ne&&(t=Math.min(t,v.t)),ue&&(t=Math.min(t,v.l)),ie&&(t=Math.min(t,v.r)),N&&(t=Math.min(t,v.b))),n=function(e,n){return t?"a"+g(t,t)+" 0 0 1 "+g(e,n):""},"M"+g(s,a+t)+n(t,-t)+"L"+g(i-t,a)+n(t,t)+"L"+g(i,o-t)+n(-t,t)+"L"+g(s+t,o)+n(-t,-t)+"Z")},toMoveInsideSlice:W,prevEntry:R,makeUpdateSliceInterpolator:G,makeUpdateTextInterpolator:Z,handleSlicesExit:ee,hasTransition:z,strTransform:J}),p.pathbar.visible?h(e,t,j,D,{barDifY:B,width:F,height:T,viewX:M,viewY:K,pathSlice:function(e){var c=M(Math.max(Math.min(e.x0,e.x0),0)),l=M(Math.min(Math.max(e.x1,e.x1),F)),d=K(e.y0),u=K(e.y1),t=T/2,s={},n={};s.x=c,n.x=l,s.y=n.y=(d+u)/2;var o={x:c,y:d},i={x:l,y:d},a={x:l,y:u},r={x:c,y:u};return">"===P?(o.x-=t,i.x-=t,a.x-=t,r.x-=t):"/"===P?(a.x-=t,r.x-=t,s.x-=t/2,n.x-=t/2):"\\"===P?(o.x-=t,i.x-=t,s.x-=t/2,n.x-=t/2):"<"===P&&(s.x-=t,n.x-=t),x(o),x(r),x(s),x(i),x(a),x(n),"M"+g(o.x,o.y)+"L"+g(i.x,i.y)+"L"+g(n.x,n.y)+"L"+g(a.x,a.y)+"L"+g(r.x,r.y)+"L"+g(s.x,s.y)+"Z"},toMoveInsideSlice:W,makeUpdateSliceInterpolator:G,makeUpdateTextInterpolator:Z,handleSlicesExit:ee,hasTransition:z,strTransform:J}):D.remove()}},66192:function(e,t,n){"use strict";var i=n(33428),s=n(76308),a=n(3400),o=n(78176),c=n(82744).resizeText,l=n(60404);function r(e,t,n,i,r){var c,u,h,m,f,g,j,y,w=(r||{}).hovered,b=t.data.data,v=b.i,d=b.color,_=o.isHierarchyRoot(t),p=1;if(w)u=n._hovered.marker.line.color,h=n._hovered.marker.line.width;else if(_&&d===n.root.color)p=100,u="rgba(0,0,0,0)",h=0;else if(u=a.castOption(n,v,"marker.line.color")||s.defaultLine,h=a.castOption(n,v,"marker.line.width")||0,!n._hasColorscale&&!t.onPathbar&&(f=n.marker.depthfade,f&&(j=s.combine(s.addOpacity(n._backgroundColor,.75),d),!0===f?(g=o.getMaxDepth(n),c=isFinite(g)?o.isLeaf(t)?0:n._maxVisibleLayers-(t.data.depth-n._entryDepth):t.data.height+1):(c=t.data.depth-n._entryDepth,n._atRootLevel||c++),c>0)))for(m=0;m<c;m++)y=.5*m/c,d=s.combine(s.addOpacity(j,y),d);e.call(l,t,n,i,d).style("stroke-width",h).call(s.stroke,u).style("opacity",p)}e.exports={style:function(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");c(e,t,"treemap"),t.each(function(t){var n=i.select(this),s=t[0].trace;n.style("opacity",s.opacity),n.selectAll("path.surface").each(function(t){i.select(this).call(r,t,s,e,{hovered:!1})})})},styleOne:r}},13988:function(e,t,n){"use strict";var s=n(63188),o=n(92880).extendFlat,i=n(29736).axisHoverFormat;e.exports={y:s.y,x:s.x,x0:s.x0,y0:s.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:o({},s.name,{}),orientation:o({},s.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:s.fillcolor,points:o({},s.boxpoints,{}),jitter:o({},s.jitter,{}),pointpos:o({},s.pointpos,{}),width:o({},s.width,{}),marker:s.marker,text:s.text,hovertext:s.hovertext,hovertemplate:s.hovertemplate,quartilemethod:s.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:s.selected,unselected:s.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:s.zorder}},67064:function(e,t,n){"use strict";var s=n(3400),o=n(54460),a=n(62555),i=n(63800),r=n(39032).BADNUM;function c(e,t,n){if(o=t.max-t.min,!o)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,o/1e4);var o,i=n.length,a=s.stdev(n,i-1,t.mean);return Math.max(function(e,t,n){return 1.059*Math.min(t,n/1.349)*Math.pow(e,-.2)}(i,a,t.q3-t.q1),o/100)}function l(e,t,n,s){var i,d,a=e.spanmode,u=e.span||[],h=[t.min,t.max],c=[t.min-2*s,t.max+2*s];function l(s){var o=u[s],i="multicategory"===n.type?n.r2c(o):n.d2c(o,0,e[t.valLetter+"calendar"]);return i===r?c[s]:i}return i={type:"linear",range:d="soft"===a?c:"hard"===a?h:[l(0),l(1)]},o.setConvert(i),i.cleanRange(),d}e.exports=function(e,t){if(r=a(e,t),r[0].t.empty)return r;for(var r,h,g,y,E,S,M=e._fullLayout,v=o.getFromId(e,t["h"===t.orientation?"xaxis":"yaxis"]),x=1/0,j=-1/0,u=0,p=0,_=0;_<r.length;_++){var n=r[_],b=n.pts.map(i.extractVal),f=n.bandwidth=c(t,n,b),d=n.span=l(t,n,v,f);if(n.min===n.max&&0===f)d=n.span=[n.min,n.max],n.density=[{v:1,t:d[0]}],n.bandwidth=f,u=Math.max(u,1);else{var C=d[1]-d[0],O=Math.ceil(C/(f/3)),w=C/O;if(!isFinite(w)||!isFinite(O))return s.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;S=i.makeKDE(n,t,b),n.density=new Array(O);for(g=0,h=d[0];h<d[1]+w/2;g++,h+=w)y=S(h),n.density[g]={v:y,t:h},u=Math.max(u,y)}p=Math.max(p,b.length),x=Math.min(x,d[0]),j=Math.max(j,d[1])}if(E=o.findExtremes(v,[x,j],{padded:!0}),t._extremes[v._id]=E,t.width)r[0].t.maxKDE=u;else{var k=M._violinScaleGroupStats,A=t.scalegroup,m=k[A];m?(m.maxKDE=Math.max(m.maxKDE,u),m.maxCount=Math.max(m.maxCount,p)):k[A]={maxKDE:u,maxCount:p}}return r[0].t.labels.kde=s._(e,"kde:"),r}},14348:function(e,t,n){"use strict";var o=n(96404).setPositionOffset,s=["v","h"];e.exports=function(e,t){for(var r=e.calcdata,d=t.xaxis,c=t.yaxis,a=0;a<s.length;a++){for(var h=s[a],m="h"===h?c:d,l=[],i=0;i<r.length;i++){var u=r[i],f=u[0].t,n=u[0].trace;!0!==n.visible||"violin"!==n.type||f.empty||n.orientation!==h||n.xaxis!==d._id||n.yaxis!==c._id||l.push(i)}o("violin",e,l,m)}}},36240:function(e,t,n){"use strict";var s=n(3400),a=n(76308),o=n(90624),i=n(13988);e.exports=function(e,t,n,r){function c(n,o){return s.coerce(e,t,i,n,o)}function l(n,o){return s.coerce2(e,t,i,n,o)}if(o.handleSampleDefaults(e,t,c,r),!1!==t.visible){c("bandwidth"),c("side"),c("width")||(c("scalegroup",t.name),c("scalemode")),u=c("span"),Array.isArray(u)&&(d="manual"),c("spanmode",d);var h=c("line.color",(e.marker||{}).color||n),m=c("line.width"),y=c("fillcolor",a.addOpacity(t.line.color,.5));o.handlePointsDefaults(e,t,c,{prefix:""});var d,u,f,p,j=l("box.width"),g=l("box.fillcolor",y),v=l("box.line.color",h),b=l("box.line.width",m);c("box.visible",Boolean(j||g||v||b))||(t.box={visible:!1}),f=l("meanline.color",h),p=l("meanline.width",m),c("meanline.visible",Boolean(f||p))||(t.meanline={visible:!1}),c("quartilemethod"),c("zorder")}}},63800:function(e,t,n){"use strict";var s=n(3400),o=function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)};t.makeKDE=function(e,t,n){var s=n.length,a=o,i=e.bandwidth,r=1/(s*i);return function(e){for(var o=0,t=0;t<s;t++)o+=a((e-n[t])/i);return r*o}},t.getPositionOnKdePath=function(e,t,n){"h"===t.orientation?(o="y",i="x"):(o="x",i="y");var o,i,c=s.findPointOnPath(e.path,n,i,{pathLength:e.pathLength}),a=e.posCenterPx,r=c[o];return[r,"both"===t.side?2*a-r:a]},t.getKdeValue=function(e,n,s){var o=e.pts.map(t.extractVal);return t.makeKDE(e,n,o)(s)/e.posDensityScale},t.extractVal=function(e){return e.v}},78e3:function(e,t,n){"use strict";var a=n(76308),s=n(3400),r=n(54460),o=n(27576),i=n(63800);e.exports=function(e,t,n,c,l){l||(l={});var u,h,m,g,b,j,y,_,w,O,C,E,k,M,T,L=l.hoverLayer,A=e.cd,f=A[0].trace,F=f.hoveron,N=-1!==F.indexOf("violins"),z=-1!==F.indexOf("kde"),p=[];if(N||z){if(h=o.hoverOnBoxes(e,t,n,c),z&&h.length>0&&(M=e.xa,T=e.ya,"h"===f.orientation?(g=t,m="y",E=T,u="x",w=M):(g=n,m="x",E=M,u="y",w=T),y=A[e.index],g>=y.span[0]&&g<=y.span[1])){var d=s.extendFlat({},e),S=w.c2p(g,!0),R=i.getKdeValue(y,f,g),x=i.getPositionOnKdePath(y,f,S),v=E._offset,D=E._length;d[m+"0"]=x[0],d[m+"1"]=x[1],d[u+"0"]=d[u+"1"]=S,d[u+"Label"]=u+": "+r.hoverLabelText(w,g,f[u+"hoverformat"])+", "+A[0].t.labels.kde+" "+R.toFixed(3);for(b=0,_=0;_<h.length;_++)if("med"===h[_].attr){b=_;break}d.spikeDistance=h[b].spikeDistance,C=m+"Spike",d[C]=h[b][C],h[b].spikeDistance=void 0,h[b][C]=void 0,d.hovertemplate=!1,p.push(d),(j={})[m+"1"]=s.constrain(v+x[0],v,v+D),j[m+"2"]=s.constrain(v+x[1],v,v+D),j[u+"1"]=j[u+"2"]=w._offset+S}N&&(p=p.concat(h))}return-1!==F.indexOf("points")&&(O=o.hoverOnPoints(e,t,n)),k=L.selectAll(".violinline-"+f.uid).data(j?[0]:[]),k.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),k.exit().remove(),k.attr(j).call(a.stroke,e.color),"closest"===c?O?[O]:p:O?(p.push(O),p):p}},22869:function(e,t,n){"use strict";e.exports={attributes:n(13988),layoutAttributes:n(98228),supplyDefaults:n(36240),crossTraceDefaults:n(90624).crossTraceDefaults,supplyLayoutDefaults:n(8939),calc:n(67064),crossTraceCalc:n(14348),plot:n(5140),style:n(95908),styleOnSelect:n(49224).styleOnSelect,hoverPoints:n(78e3),selectPoints:n(8264),moduleType:"trace",name:"violin",basePlotModule:n(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(e,t,n){"use strict";var s=n(16560),o=n(3400).extendFlat;e.exports={violinmode:o({},s.boxmode,{}),violingap:o({},s.boxgap,{}),violingroupgap:o({},s.boxgroupgap,{})}},8939:function(e,t,n){"use strict";var s=n(3400),o=n(98228),i=n(68832);e.exports=function(e,t,n){i._supply(e,t,n,function(n,i){return s.coerce(e,t,o,n,i)},"violin")}},5140:function(e,t,n){"use strict";var s=n(33428),o=n(3400),a=n(43616),i=n(18728),r=n(52340),c=n(63800);e.exports=function(e,t,n,l){var d=e._context.staticPlot,f=e._fullLayout,u=t.xaxis,h=t.yaxis;function m(e,t){var n=r(e,{xaxis:u,yaxis:h,trace:t,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return a.smoothopen(n[0],1)}o.makeTraceGroups(l,n,"trace violins").each(function(e){var p=s.select(this),C=e[0],a=C.t,n=C.trace;if(!0!==n.visible||a.empty)p.remove();else{var y,O=a.bPos,l=a.bdPos,r=t[a.valLetter+"axis"],j=t[a.posLetter+"axis"],b="both"===n.side,x=b||"positive"===n.side,S=b||"negative"===n.side,w=p.selectAll("path.violin").data(o.identity);w.enter().append("path").style("vector-effect",d?"none":"non-scaling-stroke").attr("class","violin"),w.exit().remove(),w.each(function(e){var t,c,d,u,h,p,g,v,y,C,E,k=s.select(this),o=e.density,i=o.length,_=j.c2l(e.pos+O,!0),w=j.l2p(_);if(n.width?d=a.maxKDE/l:(g=f._violinScaleGroupStats[n.scalegroup],d="count"===n.scalemode?g.maxKDE/l*(g.maxCount/e.pts.length):g.maxKDE/l),x){for(c=new Array(i),t=0;t<i;t++)(p=c[t]={})[a.posLetter]=_+o[t].v/d,p[a.valLetter]=r.c2l(o[t].t,!0);E=m(c,n)}if(S){for(c=new Array(i),h=0,t=i-1;h<i;h++,t--)(p=c[h]={})[a.posLetter]=_-o[t].v/d,p[a.valLetter]=r.c2l(o[t].t,!0);C=m(c,n)}b?y=E+"L"+C.substr(1)+"Z":(u=[w,r.c2p(o[0].t)],v=[w,r.c2p(o[i-1].t)],"h"===n.orientation&&(u.reverse(),v.reverse()),y=x?"M"+u+"L"+E.substr(1)+"L"+v:"M"+v+"L"+C.substr(1)+"L"+u),k.attr("d",y),e.posCenterPx=w,e.posDensityScale=d*l,e.path=k.node(),e.pathLength=e.path.getTotalLength()/(b?2:1)});var g,v,E,k=n.box,_=k.width,A=(k.line||{}).width;b?(v=l*_,g=0):x?(v=[0,l*_/2],g=A*{x:1,y:-1}[a.posLetter]):(v=[l*_/2,0],g=A*{x:-1,y:1}[a.posLetter]),i.plotBoxAndWhiskers(p,{pos:j,val:r},n,{bPos:O,bdPos:v,bPosPxOffset:g}),i.plotBoxMean(p,{pos:j,val:r},n,{bPos:O,bdPos:v,bPosPxOffset:g}),!n.box.visible&&n.meanline.visible&&(E=o.identity),y=p.selectAll("path.meanline").data(E||[]),y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",d?"none":"non-scaling-stroke"),y.exit().remove(),y.each(function(e){var o=r.c2p(e.mean,!0),t=c.getPositionOnKdePath(e,n,o);s.select(this).attr("d","h"===n.orientation?"M"+o+","+t[0]+"V"+t[1]:"M"+t[0]+","+o+"H"+t[1])}),i.plotPoints(p,{x:u,y:h},n,a)}})}},95908:function(e,t,n){"use strict";var o=n(33428),s=n(76308),i=n(49224).stylePoints;e.exports=function(e){var t=o.select(e).selectAll("g.trace.violins");t.style("opacity",function(e){return e[0].trace.opacity}),t.each(function(t){var l,n=t[0].trace,a=o.select(this),d=n.box||{},u=d.line||{},r=n.meanline||{},c=r.width;a.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(s.stroke,n.line.color).call(s.fill,n.fillcolor),a.selectAll("path.box").style("stroke-width",u.width+"px").call(s.stroke,u.color).call(s.fill,d.fillcolor),l={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"},a.selectAll("path.mean").style(l).call(s.stroke,r.color),a.selectAll("path.meanline").style(l).call(s.stroke,r.color),i(a,n,e)})}},58168:function(e,t,n){"use strict";var l=n(49084),s=n(50048),r=n(16716),a=n(45464),i=n(92880).extendFlat,c=n(67824).overrideAll,o=e.exports=c(i({x:s.x,y:s.y,z:s.z,value:s.value,isomin:s.isomin,isomax:s.isomax,surface:s.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:s.slices,caps:s.caps,text:s.text,hovertext:s.hovertext,xhoverformat:s.xhoverformat,yhoverformat:s.yhoverformat,zhoverformat:s.zhoverformat,valuehoverformat:s.valuehoverformat,hovertemplate:s.hovertemplate},l("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:s.colorbar,opacity:s.opacity,opacityscale:r.opacityscale,lightposition:s.lightposition,lighting:s.lighting,flatshading:s.flatshading,contour:s.contour,hoverinfo:i({},a.hoverinfo),showlegend:i({},a.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},91976:function(e,t,n){"use strict";var s,l=n(67792).gl_mesh3d,r=n(33040).parseColorScale,u=n(3400).isArrayOrTypedArray,h=n(43080),c=n(8932).extractOpts,a=n(52094),o=n(31460).findNearestOnAxis,d=n(31460).generateIsoMeshes;function i(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.data=null,this.showContour=!1}s=i.prototype,s.handlePick=function(e){if(e.object===this.mesh){var n,s=e.data.index,a=this.data._meshX[s],r=this.data._meshY[s],h=this.data._meshZ[s],m=this.data._Ys.length,i=this.data._Zs.length,c=o(a,this.data._Xs).id,l=o(r,this.data._Ys).id,d=o(h,this.data._Zs).id,t=e.index=d+i*l+i*m*c;return e.traceCoordinate=[this.data._meshX[t],this.data._meshY[t],this.data._meshZ[t],this.data._value[t]],n=this.data.hovertext||this.data.text,u(n)&&void 0!==n[t]?e.textLabel=n[t]:n&&(e.textLabel=n),!0}},s.update=function(e){var t,i,n=this.scene,s=n.fullSceneLayout;function o(e,t,n,s){return t.map(function(t){return e.d2l(t,0,s)*n})}this.data=d(e),t={positions:a(o(s.xaxis,e._meshX,n.dataScale[0],e.xcalendar),o(s.yaxis,e._meshY,n.dataScale[1],e.ycalendar),o(s.zaxis,e._meshZ,n.dataScale[2],e.zcalendar)),cells:a(e._meshI,e._meshJ,e._meshK),lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,opacityscale:e.opacityscale,contourEnable:e.contour.show,contourColor:h(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},i=c(e),t.vertexIntensity=e._meshIntensity,t.vertexIntensityBounds=[i.min,i.max],t.colormap=r(e),this.mesh.update(t)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},e.exports=function(e,t){var o=e.glplot.gl,n=l({gl:o}),s=new i(e,n,t.uid);return n._trace=s,s.update(t),e.glplot.add(n),s}},12448:function(e,t,n){"use strict";var s=n(3400),o=n(58168),i=n(70548).supplyIsoDefaults,a=n(60192).opacityscaleDefaults;e.exports=function(e,t,n,r){function c(n,i){return s.coerce(e,t,o,n,i)}i(e,t,n,r,c),a(e,t,r,c)}},67776:function(e,t,n){"use strict";e.exports={attributes:n(58168),supplyDefaults:n(12448),calc:n(62624),colorbar:{min:"cmin",max:"cmax"},plot:n(91976),moduleType:"trace",name:"volume",basePlotModule:n(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(e,t,n){"use strict";var s=n(20832),a=n(52904).line,l=n(45464),c=n(29736).axisHoverFormat,d=n(21776).Ks,u=n(21776).Gw,r=n(10213),o=n(92880).extendFlat,h=n(76308);function i(){return{marker:{color:o({},s.marker.color,{arrayOk:!1,editType:"style"}),line:{color:o({},s.marker.line.color,{arrayOk:!1,editType:"style"}),width:o({},s.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),hovertext:s.hovertext,hovertemplate:d({},{keys:r.eventDataKeys}),hoverinfo:o({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:u({editType:"plot"},{keys:r.eventDataKeys.concat(["label"])}),text:s.text,textposition:s.textposition,insidetextanchor:s.insidetextanchor,textangle:s.textangle,textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:s.outsidetextfont,constraintext:s.constraintext,cliponaxis:s.cliponaxis,orientation:s.orientation,offset:s.offset,width:s.width,increasing:i(),decreasing:i(),totals:i(),connector:{line:{color:o({},a.color,{dflt:h.defaultLine}),width:o({},a.width,{editType:"plot"}),dash:a.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,zorder:s.zorder}},73540:function(e,t,n){"use strict";var c=n(54460),i=n(1220),a=n(3400).mergeArray,l=n(4500),r=n(39032).BADNUM;function o(e){return"a"===e||"absolute"===e}function s(e){return"t"===e||"total"===e}e.exports=function(e,t){g=c.getFromId(e,t.xaxis||"x"),v=c.getFromId(e,t.yaxis||"y"),"h"===t.orientation?(m=g.makeCalcdata(t,"x"),f=v.makeCalcdata(t,"y"),p=i(t,v,"y",f),j=!!t.yperiodalignment,b="y"):(m=v.makeCalcdata(t,"y"),f=g.makeCalcdata(t,"x"),p=i(t,g,"x",f),j=!!t.xperiodalignment,b="x"),_=p.vals;for(var d,m,f,p,g,v,b,j,_,w,O,x,y=Math.min(_.length,m.length),u=new Array(y),h=0,C=!1,n=0;n<y;n++)w=m[n]||0,O=!1,(m[n]!==r||s(t.measure[n])||o(t.measure[n]))&&n+1<y&&(m[n+1]!==r||s(t.measure[n+1])||o(t.measure[n+1]))&&(O=!0),d=u[n]={i:n,p:_[n],s:w,rawS:w,cNext:O},o(t.measure[n])?(h=d.s,d.isSum=!0,d.dir="totals",d.s=h):s(t.measure[n])?(d.isSum=!0,d.dir="totals",d.s=h):(d.isSum=!1,d.dir=d.rawS<0?"decreasing":"increasing",x=d.s,d.s=h+x,h+=x),"totals"===d.dir&&(C=!0),j&&(u[n].orig_p=f[n],u[n][b+"End"]=p.ends[n],u[n][b+"Start"]=p.starts[n]),t.ids&&(d.id=String(t.ids[n])),d.v=(t.base||0)+h;return u.length&&(u[0].hasTotals=C),a(t.text,u,"tx"),a(t.hovertext,u,"htx"),l(u,t),u}},10213:function(e){"use strict";e.exports={eventDataKeys:["initial","delta","final"]}},50152:function(e,t,n){"use strict";var s=n(96376).setGroupPositions;e.exports=function(e,t){var n,o,i,a,c,h,r=e._fullLayout,p=e._fullData,g=e.calcdata,l=t.xaxis,d=t.yaxis,u=[],f=[],m=[];for(i=0;i<p.length;i++)a=p[i],!0===a.visible&&a.xaxis===l._id&&a.yaxis===d._id&&"waterfall"===a.type&&(n=g[i],"h"===a.orientation?m.push(n):f.push(n),u.push(n));c={mode:r.waterfallmode,norm:r.waterfallnorm,gap:r.waterfallgap,groupgap:r.waterfallgroupgap};for(s(e,l,d,f,c),s(e,d,l,m,c),i=0;i<u.length;i++){n=u[i];for(o=0;o<n.length;o++)h=n[o],!1===h.isSum&&(h.s0+=0===o?0:n[o-1].s),o+1<n.length&&(n[o].nextP0=n[o+1].p0,n[o].nextS0=n[o+1].s0)}}},24224:function(e,t,n){"use strict";var o=n(3400),d=n(20011),r=n(31508).handleText,c=n(43980),m=n(31147),a=n(65776),l=n(76308),i=n(48164),u=i.INCREASING.COLOR,h=i.DECREASING.COLOR;function s(e,t,n){e(t+".marker.color",n),e(t+".marker.line.color",l.defaultLine),e(t+".marker.line.width")}e.exports={supplyDefaults:function(e,t,n,i){function l(n,s){return o.coerce(e,t,a,n,s)}if(c(e,t,i,l)){m(e,t,i,l),l("xhoverformat"),l("yhoverformat"),l("measure"),l("orientation",t.x&&!t.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var d=l("textposition");r(e,t,i,l,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==t.textposition&&(l("texttemplate"),t.texttemplate||l("textinfo")),s(l,"increasing",u),s(l,"decreasing",h),s(l,"totals","#4499FF"),l("connector.visible")&&(l("connector.mode"),l("connector.line.width")&&(l("connector.line.color"),l("connector.line.dash"))),l("zorder")}else t.visible=!1},crossTraceDefaults:function(e,t){function r(e){return o.coerce(n._input,n,a,e)}if("group"===t.waterfallmode)for(var n,i,s=0;s<e.length;s++)i=(n=e[s])._input,d(i,n,t,r)}}},53256:function(e){"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"initial"in t&&(e.initial=t.initial),"delta"in t&&(e.delta=t.delta),"final"in t&&(e.final=t.final),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},94196:function(e,t,n){"use strict";var i=n(54460).hoverLabelText,s=n(76308).opacity,a=n(63400).hoverOnBars,o=n(48164),r=o.INCREASING.SYMBOL,c=o.DECREASING.SYMBOL;e.exports=function(e,t,n,o,l){if(d=a(e,t,n,o,l),d){var d,h,m,v,y=d.cd,p=y[0].trace,b="h"===p.orientation,_=b?"x":"y",x=b?e.xa:e.ya,u=y[d.index],g=u.isSum?u.b+u.s:u.rawS;if(d.initial=u.b+u.s-g,d.delta=g,d.final=d.initial+d.delta,v=j(Math.abs(d.delta)),d.deltaLabel=g<0?"("+v+")":v,d.finalLabel=j(d.final),d.initialLabel=j(d.initial),m=u.hi||p.hoverinfo,h=[],m&&"none"!==m&&"skip"!==m){var w="all"===m,O=m.split("+"),f=function(e){return w||-1!==O.indexOf(e)};u.isSum||(!f("final")||f(b?"x":"y")||h.push(d.finalLabel),f("delta")&&(g<0?h.push(d.deltaLabel+" "+c):h.push(d.deltaLabel+" "+r)),f("initial")&&h.push("Initial: "+d.initialLabel))}return h.length&&(d.extraText=h.join("<br>")),d.color=function(e,t){var n=e[t.dir].marker,o=n.color,i=n.line.color,a=n.line.width;return s(o)?o:s(i)&&a?i:void 0}(p,u),[d]}function j(e){return i(x,e,p[_+"hoverformat"])}}},95952:function(e,t,n){"use strict";e.exports={attributes:n(65776),layoutAttributes:n(91352),supplyDefaults:n(24224).supplyDefaults,crossTraceDefaults:n(24224).crossTraceDefaults,supplyLayoutDefaults:n(59464),calc:n(73540),crossTraceCalc:n(50152),plot:n(64488),style:n(12252).style,hoverPoints:n(94196),eventData:n(53256),selectPoints:n(45784),moduleType:"trace",name:"waterfall",basePlotModule:n(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(e){"use strict";e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(e,t,n){"use strict";var s=n(3400),o=n(91352);e.exports=function(e,t,n){var i,r,c=!1;function a(n,i){return s.coerce(e,t,o,n,i)}for(i=0;i<n.length;i++)if(r=n[i],r.visible&&"waterfall"===r.type){c=!0;break}c&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},64488:function(e,t,n){"use strict";var i=n(33428),o=n(3400),a=n(43616),s=n(39032).BADNUM,r=n(98184),c=n(82744).clearMinTextSize;e.exports=function(e,t,n,l){var d=e._fullLayout;c("waterfall",d),r.plot(e,t,n,l,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),function(e,t,n,r){var c=t.xaxis,l=t.yaxis;o.makeTraceGroups(r,n,"trace bars").each(function(n){var h,p=i.select(this),r=n[0].trace,m=o.ensureSingle(p,"g","lines");if(r.connector&&r.connector.visible){var d="h"===r.orientation,f=r.connector.mode,u=m.selectAll("g.line").data(o.identity);u.enter().append("g").classed("line",!0),u.exit().remove(),h=u.size(),u.each(function(n,r){if(r===h-1||n.cNext){var g=function(e,t,n,s){var o=[],i=[],a=s?t:n,r=s?n:t;return o[0]=a.c2p(e.s0,!0),i[0]=r.c2p(e.p0,!0),o[1]=a.c2p(e.s1,!0),i[1]=r.c2p(e.p1,!0),o[2]=a.c2p(e.nextS0,!0),i[2]=r.c2p(e.nextP0,!0),s?[o,i]:[i,o]}(n,c,l,d),u=g[0],m=g[1],p="";u[0]!==s&&m[0]!==s&&u[1]!==s&&m[1]!==s&&("spanning"===f&&!n.isSum&&r>0&&(p+=d?"M"+u[0]+","+m[1]+"V"+m[0]:"M"+u[1]+","+m[0]+"H"+u[0]),"between"!==f&&(n.isSum||r<h-1)&&(p+=d?"M"+u[1]+","+m[0]+"V"+m[1]:"M"+u[0]+","+m[1]+"H"+u[1]),u[2]!==s&&m[2]!==s&&(p+=d?"M"+u[1]+","+m[1]+"V"+m[2]:"M"+u[1]+","+m[1]+"H"+u[2])),""===p&&(p="M0,0Z"),o.ensureSingle(i.select(this),"path").attr("d",p).call(a.setClipUrl,t.layerClipId,e)}})}else m.remove()})}(e,t,n,l)}},12252:function(e,t,n){"use strict";var s=n(33428),o=n(43616),i=n(76308),a=n(13448).DESELECTDIM,r=n(60100),c=n(82744).resizeText,l=r.styleTextPoints;e.exports={style:function(e,t,n){var r=n||s.select(e).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");c(e,r,"waterfall"),r.style("opacity",function(e){return e[0].trace.opacity}),r.each(function(t){var r=s.select(this),n=t[0].trace;r.selectAll(".point > path").each(function(e){if(!e.isBlank){var t=n[e.dir].marker;s.select(this).call(i.fill,t.color).call(i.stroke,t.line.color).call(o.dashLine,t.line.dash,t.line.width).style("opacity",n.selectedpoints&&!e.selected?a:1)}}),l(r,n,e),r.selectAll(".lines").each(function(){var e=n.connector.line;o.lineGroupStyle(s.select(this).selectAll("path"),e.width,e.color,e.dash)})})}}},84224:function(e,t,n){"use strict";var i,a,d=n(54460),o=n(3400),c=n(73060),l=n(60468).W,s=n(39032).BADNUM;t.moduleType="transform",t.name="aggregate",a=t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=a.aggregations;function r(e,t,n,i){if(i.enabled){for(var r=i.target,c=o.nestedProperty(t,r),l=c.get(),p=function(e,t){var a=e.func,n=t.d2c,i=t.c2d;switch(a){case"count":return u;case"first":return h;case"last":return m;case"sum":return function(e,t){for(var a,r=0,o=0;o<t.length;o++)a=n(e[t[o]]),a!==s&&(r+=a);return i(r)};case"avg":return function(e,t){for(var r,c=0,o=0,a=0;a<t.length;a++)r=n(e[t[a]]),r!==s&&(c+=r,o++);return o?i(c/o):s};case"min":return function(e,t){for(var r,o=1/0,a=0;a<t.length;a++)r=n(e[t[a]]),r!==s&&(o=Math.min(o,r));return o===1/0?s:i(o)};case"max":return function(e,t){for(var r,o=-1/0,a=0;a<t.length;a++)r=n(e[t[a]]),r!==s&&(o=Math.max(o,r));return o===-1/0?s:i(o)};case"range":return function(e,t){for(var r,o=1/0,a=-1/0,c=0;c<t.length;c++)r=n(e[t[c]]),r!==s&&(o=Math.min(o,r),a=Math.max(a,r));return a===-1/0||o===1/0?s:i(a-o)};case"change":return function(e,t){var o=n(e[t[0]]),a=n(e[t[t.length-1]]);return o===s||a===s?s:i(a-o)};case"median":return function(e,t){for(var c,l,a=[],r=0;r<t.length;r++)c=n(e[t[r]]),c!==s&&a.push(c);return a.length?(a.sort(o.sorterAsc),l=(a.length-1)/2,i((a[Math.floor(l)]+a[Math.ceil(l)])/2)):s};case"mode":return function(e,t){for(var o,c,l={},a=0,d=s,r=0;r<t.length;r++)o=n(e[t[r]]),o!==s&&(c=l[o]=(l[o]||0)+1,c>a&&(a=c,d=o));return a?i(d):s};case"rms":return function(e,t){for(var o,c=0,a=0,r=0;r<t.length;r++)o=n(e[t[r]]),o!==s&&(c+=o*o,a++);return a?i(Math.sqrt(c/a)):s};case"stddev":return function(t,o){var i,c,d,u,l=0,h=0,a=1,r=s;for(i=0;i<o.length&&r===s;i++)r=n(t[o[i]]);if(r===s)return s;for(;i<o.length;i++)d=n(t[o[i]]),d!==s&&(c=d-r,l+=c,h+=c*c,a++);return u="sample"===e.funcmode?a-1:a,u?Math.sqrt((h-l*l/a)/u):0}}}(i,d.getDataConversions(e,t,r,l)),f=new Array(n.length),a=0;a<n.length;a++)f[a]=p(l,n[a]);c.set(f),"count"===i.func&&o.pushUnique(t._arrayAttrs,r)}}function u(e,t){return t.length}function h(e,t){return e[t[0]]}function m(e,t){return e[t[t.length-1]]}t.supplyDefaults=function(e,t){s={};function v(t,n){return o.coerce(e,s,a,t,n)}if(!v("enabled"))return s;var n,s,d,u,h,m,p,g,l=c.findArrayAttributes(t),r={};for(n=0;n<l.length;n++)r[l[n]]=1;if(h=v("groups"),!Array.isArray(h)){if(!r[h])return s.enabled=!1,s;r[h]=0}m=e.aggregations||[],u=s.aggregations=new Array(m.length);function f(e,t){return o.coerce(m[n],p,i,e,t)}for(n=0;n<m.length;n++)p={_index:n},d=f("target"),g=f("func"),f("enabled")&&d&&(r[d]||"count"===g&&void 0===r[d])?("stddev"===g&&f("funcmode"),r[d]=0,u[n]=p):u[n]={enabled:!1,_index:n};for(n=0;n<l.length;n++)r[l[n]]&&u.push({target:l[n],func:i.func.dflt,enabled:!0,_index:-1});return s},t.calcTransform=function(e,t,n){if(n.enabled&&(u=n.groups,d=o.getTargetArray(t,{target:u}),d)){var s,c,d,u,f,g,v,a={},h={},i=[],p=l(t.transforms,n),m=d.length;for(t._length&&(m=Math.min(m,t._length)),s=0;s<m;s++)void 0===(g=a[c=d[s]])?(a[c]=i.length,v=[s],i.push(v),h[a[c]]=p(s)):(i[g].push(s),h[a[c]]=(h[a[c]]||[]).concat(p(s)));n._indexToPoints=h,f=n.aggregations;for(s=0;s<f.length;s++)r(e,t,i,f[s]);"string"==typeof u&&r(e,t,i,{target:u,func:"first",enabled:!0}),t._length=i.length}}},76744:function(e,t,n){"use strict";var s=n(3400),d=n(24040),c=n(54460),l=n(60468).W,o=n(69104),a=o.COMPARISON_OPS,r=o.INTERVAL_OPS,i=o.SET_OPS;t.moduleType="transform",t.name="filter",t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(r).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},t.supplyDefaults=function(e){var i,a,n={};function o(o,i){return s.coerce(e,n,t.attributes,o,i)}if(o("enabled")){if(i=o("target"),s.isArrayOrTypedArray(i)&&0===i.length)return n.enabled=!1,n;o("preservegaps"),o("operation"),o("value"),a=d.getComponentMethod("calendars","handleDefaults"),a(e,n,"valuecalendar",null),a(e,n,"targetcalendar",null)}return n},t.calcTransform=function(e,t,n){if(n.enabled&&(d=s.getTargetArray(t,n),d)){h=n.target,u=d.length,t._length&&(u=Math.min(u,t._length));var O=n.targetcalendar,_=t._arrayAttrs,j=n.preservegaps;"string"==typeof h&&(p=s.nestedProperty(t,h+"calendar").get(),p&&(O=p));var o,d,u,h,p,g,v,w,x=function(e,t,n){var o,c,d,m=e.operation,l=e.value,u=s.isArrayOrTypedArray(l);function h(e){return-1!==e.indexOf(m)}switch(d=function(n){return t(n,0,e.valuecalendar)},c=function(e){return t(e,0,n)},h(a)?o=d(u?l[0]:l):h(r)?o=u?[d(l[0]),d(l[1])]:[d(l),d(l)]:h(i)&&(o=u?l.map(d):[d(l)]),m){case"=":return function(e){return c(e)===o};case"!=":return function(e){return c(e)!==o};case"<":return function(e){return c(e)<o};case"<=":return function(e){return c(e)<=o};case">":return function(e){return c(e)>o};case">=":return function(e){return c(e)>=o};case"[]":return function(e){var t=c(e);return t>=o[0]&&t<=o[1]};case"()":return function(e){var t=c(e);return t>o[0]&&t<o[1]};case"[)":return function(e){var t=c(e);return t>=o[0]&&t<o[1]};case"(]":return function(e){var t=c(e);return t>o[0]&&t<=o[1]};case"][":return function(e){var t=c(e);return t<=o[0]||t>=o[1]};case")(":return function(e){var t=c(e);return t<o[0]||t>o[1]};case"](":return function(e){var t=c(e);return t<=o[0]||t>o[1]};case")[":return function(e){var t=c(e);return t<o[0]||t>=o[1]};case"{}":return function(e){return-1!==o.indexOf(c(e))};case"}{":return function(e){return-1===o.indexOf(c(e))}}}(n,c.getDataToCoordFunc(e,t,h,d),O),m={},y={},f=0;j?(g=function(e){m[e.astr]=s.extendDeep([],e.get()),e.set(new Array(u))},v=function(e,t){var n=m[e.astr][t];e.get()[t]=n}):(g=function(e){m[e.astr]=s.extendDeep([],e.get()),e.set([])},v=function(e,t){var n=m[e.astr][t];e.get().push(n)}),b(g);for(w=l(t.transforms,n),o=0;o<u;o++)x(d[o])?(b(v,o),y[f++]=w(o)):j&&f++;n._indexToPoints=y,t._length=f}function b(e,n){for(var o=0;o<_.length;o++)e(s.nestedProperty(t,_[o]),n)}}},32028:function(e,t,n){"use strict";var s=n(3400),o=n(73060),i=n(7316),a=n(60468).W;function r(e,t){var n,r,c,d,v,y,_,w,O,E,m=t.transform,j=t.transformIndex,l=e.transforms[j].groups,A=a(e.transforms,m);if(!s.isArrayOrTypedArray(l)||0===l.length)return[e];var f,p,b,u=s.filterUnique(l),h=new Array(u.length),k=l.length,g=o.findArrayAttributes(e),x=m.styles||[],C={};for(r=0;r<x.length;r++)C[x[r].target]=x[r].value;m.styles&&(w=s.keyedContainer(m,"styles","target","value.name")),p={},b={};for(r=0;r<u.length;r++){p[d=u[r]]=r,b[d]=0,(c=h[r]=s.extendDeepNoArrays({},e))._group=d,c.transforms[j]._indexToPoints={},f=null;for(w&&(f=w.get(d)),c.name=f||""===f?f:s.templateString(m.nameformat,{trace:e.name,group:d}),_=c.transforms,c.transforms=[],n=0;n<_.length;n++)c.transforms[n]=s.extendDeepNoArrays({},_[n]);for(n=0;n<g.length;n++)s.nestedProperty(c,g[n]).set([])}for(v=0;v<g.length;v++){for(y=g[v],n=0,O=[];n<u.length;n++)O[n]=s.nestedProperty(h[n],y).get();for(E=s.nestedProperty(e,y).get(),n=0;n<k;n++)O[p[l[n]]].push(E[n])}for(n=0;n<k;n++)(c=h[p[l[n]]]).transforms[j]._indexToPoints[b[l[n]]]=A(n),b[l[n]]++;for(r=0;r<u.length;r++)d=u[r],c=h[r],i.clearExpandedTraceDefaultColors(c),c=s.extendDeepNoArrays(c,C[d]||{});return h}t.moduleType="transform",t.name="groupby",t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},t.supplyDefaults=function(e,n,o){a={};function l(n,o){return s.coerce(e,a,t.attributes,n,o)}if(!l("enabled"))return a;l("groups"),l("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var i,a,c,u,r=e.styles,d=a.styles=[];if(r)for(i=0;i<r.length;i++)u=d[i]={},s.coerce(r[i],d[i],t.attributes.styles,"target"),c=s.coerce(r[i],d[i],t.attributes.styles,"value"),s.isPlainObject(c)?u.value=s.extendDeep({},c):c&&delete u.value;return a},t.transform=function(e,t){var n,s,o,i=[];for(n=0;n<e.length;n++)for(o=r(e[n],t),s=0;s<o.length;s++)i.push(o[s]);return i}},60468:function(e,t){"use strict";t.W=function(e,t){for(var n,s,i,o=0;o<e.length&&(n=e[o])!==t;o++)n._indexToPoints&&!1!==n.enabled&&(s=n._indexToPoints);return i=s?function(e){return s[e]}:function(e){return[e]},i}},76272:function(e,t,n){"use strict";var o=n(3400),i=n(54460),a=n(60468).W,s=n(39032).BADNUM;t.moduleType="transform",t.name="sort",t.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},t.supplyDefaults=function(e){var s={};function n(n,i){return o.coerce(e,s,t.attributes,n,i)}return n("enabled")&&(n("target"),n("order")),s},t.calcTransform=function(e,t,n){if(n.enabled&&(l=o.getTargetArray(t,n),l)){u=n.target,c=l.length,t._length&&(c=Math.min(c,t._length));var r,c,l,d,u,h=t._arrayAttrs,m=function(e,t,n,o){var i,a=new Array(o),r=new Array(o);for(i=0;i<o;i++)a[i]={v:t[i],i};for(a.sort(function(e,t){switch(e.order){case"ascending":return function(e,n){var o=t(e.v),i=t(n.v);return o===s?1:i===s?-1:o-i};case"descending":return function(e,n){var o=t(e.v),i=t(n.v);return o===s?1:i===s?-1:i-o}}}(e,n)),i=0;i<o;i++)r[i]=a[i].i;return r}(n,l,i.getDataToCoordFunc(e,t,u,l),c),v=a(t.transforms,n),f={};for(d=0;d<h.length;d++){var p=o.nestedProperty(t,h[d]),b=p.get(),g=new Array(c);for(r=0;r<c;r++)g[r]=b[m[r]];p.set(g)}for(r=0;r<c;r++)f[r]=v(m[r]);n._indexToPoints=f,t._length=c}}},25788:function(e,t){"use strict";t.version="2.32.0"},67792:function(e,t,n){var s=n(4168);!function(){var o,i={1964:function(e,t,n){e.exports={alpha_shape:n(3502),convex_hull:n(7352),delaunay_triangulate:n(7642),gl_cone3d:n(6405),gl_error3d:n(9165),gl_heatmap2d:n(2510),gl_line3d:n(5714),gl_mesh3d:n(7201),gl_plot2d:n(1850),gl_plot3d:n(4100),gl_pointcloud2d:n(4696),gl_scatter3d:n(8418),gl_select_box:n(3161),gl_spikes2d:n(4098),gl_streamtube3d:n(7815),gl_surface3d:n(9499),ndarray:n(9618),ndarray_linear_interpolate:n(4317)}},4793:function(e,t,n){"use strict";function X(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oe(n.key),n)}function oe(e){var t=function(e){if("object"!=a(e)||!e)return e;var n,s=e[Symbol.toPrimitive];if(void 0!==s){if(n=s.call(e,"string"),"object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var d,p,E,S,L,O=n(7507),m=n(3778),F="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=s,t.IS=50,p=2147483647;function c(e){if(e>p)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return b(e)}return z(e,t,n)}function z(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var o=0|R(e,t),n=c(o),i=n.write(e,t);return i!==o&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(r(e,Uint8Array)){var t=new Uint8Array(e);return j(t.buffer,t.byteOffset,t.byteLength)}return _(e)}(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(e));if(r(e,ArrayBuffer)||e&&r(e.buffer,ArrayBuffer))return j(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(r(e,SharedArrayBuffer)||e&&r(e.buffer,SharedArrayBuffer)))return j(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i,o=e.valueOf&&e.valueOf();if(o!=null&&o!==e)return s.from(o,t,n);if(i=function(e){if(s.isBuffer(e)){var n=0|y(e.length),t=c(n);return 0===t.length||e.copy(t,0,0,n),t}return void 0!==e.length?"number"!=typeof e.length||C(e.length)?c(0):_(e):"Buffer"===e.type&&Array.isArray(e.data)?_(e.data):void 0}(e),i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(e))}function N(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function b(e){return N(e),c(e<0?0:0|y(e))}function _(e){for(var n=e.length<0?0:0|y(e.length),s=c(n),t=0;t<n;t+=1)s[t]=255&e[t];return s}function j(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(o,s.prototype),o}function y(e){if(e>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|e}function R(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||r(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+a(e));var o,n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(e).length;default:if(o)return i?-1:k(e).length;t=(""+t).toLowerCase(),o=!0}}function K(e,t,n){var s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Q(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return J(this,t,n);case"latin1":case"binary":return Z(this,t,n);case"base64":return Y(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function u(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function U(e,t,n,o,i){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),C(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,o)),s.isBuffer(t))return 0===t.length?-1:H(e,t,n,o,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):H(e,[t],n,o,i);throw new TypeError("val must be string, number or Buffer")}function H(e,t,n,s,o){var i,a,r,h,u=1,l=e.length,c=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;u=2,l/=2,c/=2,n/=2}function d(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(o){a=-1;for(i=n;i<l;i++)if(d(e,i)===d(t,-1===a?0:i-a)){if(-1===a&&(a=i),i-a+1===c)return a*u}else-1!==a&&(i-=i-a),a=-1}else for(n+c>l&&(n=l-c),i=n;i>=0;i--){for(h=!0,r=0;r<c;r++)if(d(e,i+r)!==d(t,r)){h=!1;break}if(h)return i}return-1}function ee(e,t,n,s){n=Number(n)||0;var o,a,r,i=e.length-n;s?(s=Number(s))>i&&(s=i):s=i,a=t.length;for(s>a/2&&(s=a/2),o=0;o<s;++o){if(r=parseInt(t.substr(2*o,2),16),C(r))return o;e[n+o]=r}return o}function te(e,t,n,s){return g(k(t,e.length-n),e,n,s)}function ie(e,t,n,s){return g(function(e){for(var n=[],t=0;t<e.length;++t)n.push(255&e.charCodeAt(t));return n}(t),e,n,s)}function se(e,t,n,s){return g(D(t),e,n,s)}function ne(e,t,n,s){return g(function(e,t){for(var o,i,a,n=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(o=e.charCodeAt(s))>>8,a=o%256,n.push(a),n.push(i);return n}(t,e.length-n),e,n,s)}function Y(e,t,n){return 0===t&&n===e.length?O.fromByteArray(e):O.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(d=[],o=t;o<n;){var r=e[o],s=null,l=r>239?4:r>223?3:r>191?2:1;if(o+l<=n){var o,d,a=void 0,c=void 0,u=void 0,i=void 0;switch(l){case 1:r<128&&(s=r);break;case 2:128==(192&(a=e[o+1]))&&(i=(31&r)<<6|63&a)>127&&(s=i);break;case 3:a=e[o+1],c=e[o+2],128==(192&a)&&128==(192&c)&&(i=(15&r)<<12|(63&a)<<6|63&c)>2047&&(i<55296||i>57343)&&(s=i);break;case 4:a=e[o+1],c=e[o+2],u=e[o+3],128==(192&a)&&128==(192&c)&&128==(192&u)&&(i=(15&r)<<18|(63&a)<<12|(63&c)<<6|63&u)>65535&&i<1114112&&(s=i)}}null===s?(s=65533,l=1):s>65535&&(s-=65536,d.push(s>>>10&1023|55296),s=56320|1023&s),d.push(s),o+=l}return function(e){if(t=e.length,t<=E)return String.fromCharCode.apply(String,e);for(var t,s="",n=0;n<t;)s+=String.fromCharCode.apply(String,e.slice(n,n+=E));return s}(d)}s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return z(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return function(e,t,n){return N(e),e<=0?c(e):void 0!==t?"string"==typeof n?c(e).fill(t,n):c(e).fill(t):c(e)}(e,t,n)},s.allocUnsafe=function(e){return b(e)},s.allocUnsafeSlow=function(e){return b(e)},s.isBuffer=function(e){return e!=null&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(r(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),r(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var o=e.length,i=t.length,n=0,a=Math.min(o,i);n<a;++n)if(e[n]!==t[n]){o=e[n],i=t[n];break}return o<i?-1:i<o?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(t=0,o=0;o<e.length;++o)t+=e[o].length;var n,o,i=s.allocUnsafe(t),a=0;for(o=0;o<e.length;++o){if(n=e[o],r(n,Uint8Array))a+n.length>i.length?(s.isBuffer(n)||(n=s.from(n)),n.copy(i,a)):Uint8Array.prototype.set.call(i,n,a);else{if(!s.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(i,a)}a+=n.length}return i},s.byteLength=R,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e,t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(e=0;e<t;e+=2)u(this,e,e+1);return this},s.prototype.swap32=function(){var e,t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(e=0;e<t;e+=4)u(this,e,e+3),u(this,e+1,e+2);return this},s.prototype.swap64=function(){var e,t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(e=0;e<t;e+=8)u(this,e,e+7),u(this,e+1,e+6),u(this,e+2,e+5),u(this,e+3,e+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):K.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},F&&(s.prototype[F]=s.prototype.inspect),s.prototype.compare=function(e,t,n,o,i){if(r(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+a(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=n)return 0;if(o>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var l=(i>>>=0)-(o>>>=0),d=(n>>>=0)-(t>>>=0),m=Math.min(l,d),u=this.slice(o,i),h=e.slice(t,n),c=0;c<m;++c)if(u[c]!==h[c]){l=u[c],d=h[c];break}return l<d?-1:d<l?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return U(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return U(this,e,t,n,!1)},s.prototype.write=function(e,t,n,s){if(void 0===t)s="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)s=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===s&&(s="utf8")):(s=n,n=void 0)}var o,i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(o=!1;;)switch(s){case"hex":return ee(this,e,t,n);case"utf8":case"utf-8":return te(this,e,t,n);case"ascii":case"latin1":case"binary":return ie(this,e,t,n);case"base64":return se(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},E=4096;function J(e,t,n){var s,o="";n=Math.min(e.length,n);for(s=t;s<n;++s)o+=String.fromCharCode(127&e[s]);return o}function Z(e,t,n){var s,o="";n=Math.min(e.length,n);for(s=t;s<n;++s)o+=String.fromCharCode(e[s]);return o}function Q(e,t,n){s=e.length,(!t||t<0)&&(t=0),(!n||n<0||n>s)&&(n=s);for(var s,i="",o=t;o<n;++o)i+=S[e[o]];return i}function G(e,t,n){for(var o=e.slice(t,n),i="",s=0;s<o.length-1;s+=2)i+=String.fromCharCode(o[s]+256*o[s+1]);return i}function o(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function i(e,t,n,o,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function I(e,t,n,s,o){P(t,s,o,e,n,7);var i,a=Number(t&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,i=Number(t>>BigInt(32)&BigInt(4294967295)),e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function B(e,t,n,s,o){P(t,s,o,e,n,7);var i,a=Number(t&BigInt(4294967295));return e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a,i=Number(t>>BigInt(32)&BigInt(4294967295)),e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function V(e,t,n,s){if(n+s>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $(e,t,n,s,o){return t=+t,n>>>=0,o||V(e,0,n,4),m.write(e,t,n,s,23,4),n+4}function W(e,t,n,s,o){return t=+t,n>>>=0,o||V(e,0,n,8),m.write(e,t,n,s,52,8),n+8}s.prototype.slice=function(e,t){var o,n=this.length;return(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),o=this.subarray(e,t),Object.setPrototypeOf(o,s.prototype),o},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var s=this[e],i=1,a=0;++a<t&&(i*=256);)s+=this[e+a]*i;return s},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var s=this[e+--t],i=1;t>0&&(i*=256);)s+=this[e+--t]*i;return s},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||o(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||o(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||o(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||o(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||o(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=l(function(e){h(e>>>=0,"offset");var s,o,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),o=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24),BigInt(s)+(BigInt(o)<<BigInt(32))}),s.prototype.readBigUInt64BE=l(function(e){h(e>>>=0,"offset");var s,o,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],o=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n,(BigInt(s)<<BigInt(32))+BigInt(o)}),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var s=this[e],i=1,a=0;++a<t&&(i*=256);)s+=this[e+a]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var i=t,a=1,s=this[e+--i];i>0&&(a*=256);)s+=this[e+--i]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||o(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||o(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||o(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||o(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||o(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=l(function(e){h(e>>>=0,"offset");var s,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24),(BigInt(s)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))}),s.prototype.readBigInt64BE=l(function(e){h(e>>>=0,"offset");var s,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],(BigInt(s)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||o(e,4,this.length),m.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||o(e,4,this.length),m.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||o(e,8,this.length),m.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||o(e,8,this.length),m.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,s){e=+e,t>>>=0,n>>>=0,s||i(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,s){e=+e,t>>>=0,n>>>=0,s||i(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=l(function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=l(function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,n,s){e=+e,t>>>=0,!s&&(o=Math.pow(2,8*n-1),i(this,e,t,n,o-1,-o));var o,a=0,c=1,r=0;for(this[t]=255&e;++a<n&&(c*=256);)e<0&&0===r&&0!==this[t+a-1]&&(r=1),this[t+a]=(e/c>>0)-r&255;return t+n},s.prototype.writeIntBE=function(e,t,n,s){e=+e,t>>>=0,!s&&(a=Math.pow(2,8*n-1),i(this,e,t,n,a-1,-a));var a,o=n-1,c=1,r=0;for(this[t+o]=255&e;--o>=0&&(c*=256);)e<0&&0===r&&0!==this[t+o+1]&&(r=1),this[t+o]=(e/c>>0)-r&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=l(function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=l(function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(e,t,n){return $(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return $(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,o){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var i=o-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),t),i},s.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!s.isEncoding(o))throw new TypeError("Unknown encoding: "+o);1===e.length&&(a=e.charCodeAt(0),("utf8"===o&&a<128||"latin1"===o)&&(e=a))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var i,a,r=s.isBuffer(e)?e:s.from(e,o),c=r.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=r[i%c]}return this},d={};function w(e,t,n){d[e]=function(n){function s(){var n,o,i,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o=this,i=v(i=s),n=function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(o,M()?Reflect.construct(i,r||[],v(o).constructor):i.apply(o,r)),Object.defineProperty(n,"message",{value:t.apply(n,arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(s,n),o=s,(i=[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}])&&X(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i}(n)}function A(e){for(var n="",t=e.length,s="-"===e[0]?1:0;t>=s+4;t-=3)n="_".concat(e.slice(t-3,t)).concat(n);return"".concat(e.slice(0,t)).concat(n)}function P(e,t,n,s,o,i){if(e>n||e<t){var r,a="bigint"==typeof t?"n":"";throw r=i>3?0===t||t===BigInt(0)?">= 0".concat(a," and < 2").concat(a," ** ").concat(8*(i+1)).concat(a):">= -(2".concat(a," ** ").concat(8*(i+1)-1).concat(a,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(a):">= ".concat(t).concat(a," and <= ").concat(n).concat(a),new d.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){h(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||f(t,e.length-(n+1))}(s,o,i)}function h(e,t){if("number"!=typeof e)throw new d.ERR_INVALID_ARG_TYPE(t,"number",e)}function f(e,t,n){throw Math.floor(e)!==e?(h(e,n),new d.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new d.ERR_BUFFER_OUT_OF_BOUNDS:new d.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}w("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),w("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(a(t))},TypeError),w("ERR_OUT_OF_RANGE",function(e,t,n){var o='The value of "'.concat(e,'" is out of range.'),s=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?s=A(String(n)):"bigint"==typeof n&&(s=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(s=A(s)),s+="n"),o+" It must be ".concat(t,". Received ").concat(s)},RangeError),L=/[^+/0-9A-Za-z-_]/g;function k(e,t){t=t||1/0;for(var n,a=e.length,o=null,s=[],i=0;i<a;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===a){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function D(e){return O.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function g(e,t,n,s){var o;for(o=0;o<s&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function r(e,t){return e instanceof t||e!=null&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function C(e){return e!=e}S=function(){for(var e,o,n="0123456789abcdef",s=new Array(256),t=0;t<16;++t)for(o=16*t,e=0;e<16;++e)s[o+e]=n[t]+n[e];return s}();function l(e){return"undefined"==typeof BigInt?q:e}function q(){throw new Error("BigInt not supported")}},9216:function(e){"use strict";e.exports=t,e.exports.isMobile=t,e.exports.default=t;var n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/CrOS/,o=/android|ipad|playbook|silk/i;function t(e){e||(e={});var i,t=e.ua;return t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"==typeof t&&(i=n.test(t)&&!s.test(t)||!!e.tablet&&o.test(t),!i&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(i=!0),i)}},6296:function(e,t,n){"use strict";e.exports=function(e){var n=(e=e||{}).eye||[0,0,1],s=e.center||[0,0,0],c=e.up||[0,1,0],t=e.distanceLimits||[0,1/0],h=e.mode||"turntable",l=i(),d=a(),u=r();return l.setDistanceLimits(t[0],t[1]),l.lookAt(0,n,s,c),d.setDistanceLimits(t[0],t[1]),d.lookAt(0,n,s,c),u.setDistanceLimits(t[0],t[1]),u.lookAt(0,n,s,c),new o({turntable:l,orbit:d,matrix:u},h)};var s,i=n(7261),a=n(9977),r=n(4192);function o(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}s=o.prototype,s.flush=function(e){for(var n=this._controllerList,t=0;t<n.length;++t)n[t].flush(e)},s.idle=function(e){for(var n=this._controllerList,t=0;t<n.length;++t)n[t].idle(e)},s.lookAt=function(e,t,n,s){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].lookAt(e,t,n,s)},s.rotate=function(e,t,n,s){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].rotate(e,t,n,s)},s.pan=function(e,t,n,s){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].pan(e,t,n,s)},s.translate=function(e,t,n,s){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].translate(e,t,n,s)},s.setMatrix=function(e,t){for(var s=this._controllerList,n=0;n<s.length;++n)s[n].setMatrix(e,t)},s.setDistanceLimits=function(e,t){for(var s=this._controllerList,n=0;n<s.length;++n)s[n].setDistanceLimits(e,t)},s.setDistance=function(e,t){for(var s=this._controllerList,n=0;n<s.length;++n)s[n].setDistance(e,t)},s.recalcMatrix=function(e){this._active.recalcMatrix(e)},s.getDistance=function(e){return this._active.getDistance(e)},s.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},s.lastT=function(){return this._active.lastT()},s.setMode=function(e){if(e!==this._mode&&(t=this._controllerNames.indexOf(e),!(t<0))){var t,n=this._active,s=this._controllerList[t],o=Math.max(n.lastT(),s.lastT());n.recalcMatrix(o),s.setMatrix(o,n.computedMatrix),this._active=s,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}},s.getMode=function(){return this._mode}},7169:function(e,t,n){"use strict";var o="undefined"==typeof WeakMap?n(1538):WeakMap,i=n(2762),a=n(8116),s=new o;e.exports=function(e){var n,t=s.get(e),o=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);(!o||!e.isBuffer(o))&&(n=i(e,new Float32Array([-1,-1,-1,4,4,-1])),(t=a(e,[{buffer:n,type:e.FLOAT,size:2}]))._triangleBuffer=n,s.set(e,t)),t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}},1085:function(e,t,n){var s=n(1371);e.exports=function(e,t,n){t="number"==typeof t?t:1,n=n||": ";var o=e.split(/\r?\n/),i=String(o.length+t-1).length;return o.map(function(e,o){var a=o+t,r=String(a).length;return s(a,i-r)+n+e}).join(`
`)}},3952:function(e,t,n){"use strict";e.exports=function(e){if(t=e.length,0===t)return[];if(1===t)return[0];for(var t,a=e[0].length,i=[e[0]],n=[0],s=1;s<t;++s)if(i.push(e[s]),o(i,a)){if(n.push(s),n.length===a+1)return n}else i.pop();return n};var s=n(3250);function o(e,t){for(var o,i,r,a=new Array(t+1),n=0;n<e.length;++n)a[n]=e[n];for(n=0;n<=e.length;++n){for(o=e.length;o<=t;++o){for(r=new Array(t),i=0;i<t;++i)r[i]=Math.pow(o+1-n,i);a[o]=r}if(s.apply(void 0,a))return!0}return!1}},5995:function(e,t,n){"use strict";e.exports=function(e,t){return s(t).filter(function(n){for(var i=new Array(n.length),s=0;s<n.length;++s)i[s]=t[n[s]];return o(i)*e<1})};var s=n(7642),o=n(6037)},3502:function(e,t,n){e.exports=function(e,t){return o(s(e,t))};var s=n(5995),o=n(9127)},6468:function(e){e.exports=function(e){return atob(e)}},2642:function(e,t,n){"use strict";e.exports=function(e,t){for(var a,c,l,d,u,h,i=t.length,r=new Array(i+1),n=0;n<i;++n){for(d=new Array(i+1),a=0;a<=i;++a)d[a]=e[a][n];r[n]=d}for(r[i]=new Array(i+1),n=0;n<=i;++n)r[i][n]=1;c=new Array(i+1);for(n=0;n<i;++n)c[n]=t[n];c[i]=1,u=o(r,c),l=s(u[i+1]),0===l&&(l=1),h=new Array(i+1);for(n=0;n<=i;++n)h[n]=s(u[n])/l;return h};var o=n(727);function s(e){for(var n=0,t=0;t<e.length;++t)n+=e[t];return n}},7507:function(e,t){"use strict";t.byteLength=function(e){var t=a(e),s=t[0],n=t[1];return 3*(s+n)/4-n},t.toByteArray=function(e){var t,s,d=a(e),l=d[0],c=d[1],o=new r(function(e,t,n){return 3*(t+n)/4-n}(0,l,c)),i=0,u=c>0?l-4:l;for(t=0;t<u;t+=4)s=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],o[i++]=s>>16&255,o[i++]=s>>8&255,o[i++]=255&s;return 2===c&&(s=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,o[i++]=255&s),1===c&&(s=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,o[i++]=s>>8&255,o[i++]=255&s),o},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],r=16383,o=0,l=n-a;o<l;o+=r)i.push(c(e,o,o+r>l?l:o+r));return 1===a?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"=")),i.join("")};for(var s=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)s[o]=i[o],n[i.charCodeAt(o)]=o;function a(e){var t,n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return t=e.indexOf("="),-1===t&&(t=n),[t,t===n?0:4-t%4]}function c(e,t,n){for(var i,a,r=[],o=t;o<n;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(s[(i=a)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return r.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3865:function(e,t,n){"use strict";var s=n(869);e.exports=function(e,t){return s(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},1318:function(e){"use strict";e.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},8697:function(e,t,n){"use strict";var s=n(869);e.exports=function(e,t){return s(e[0].mul(t[1]),e[1].mul(t[0]))}},7842:function(e,t,n){"use strict";var o=n(6330),i=n(1533),s=n(2651),a=n(4387),r=n(869),c=n(8697);e.exports=function e(t,n){if(o(t))return n?c(t,e(n)):[t[0].clone(),t[1].clone()];var l,d,u=0;if(i(t))d=t.clone();else if("string"==typeof t)d=a(t);else{if(0===t)return[s(0),s(1)];if(t===Math.floor(t))d=s(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),u-=256;d=s(t)}}if(o(n))d.mul(n[1]),l=n[0].clone();else if(i(n))l=n.clone();else if("string"==typeof n)l=a(n);else if(n)if(n===Math.floor(n))l=s(n);else{for(;n!==Math.floor(n);)n*=Math.pow(2,256),u+=256;l=s(n)}else l=s(1);return u>0?d=d.ushln(u):u<0&&(l=l.ushln(-u)),r(d,l)}},6330:function(e,t,n){"use strict";var s=n(1533);e.exports=function(e){return Array.isArray(e)&&2===e.length&&s(e[0])&&s(e[1])}},5716:function(e,t,n){"use strict";var s=n(6859);e.exports=function(e){return e.cmp(new s(0))}},1369:function(e,t,n){"use strict";var s=n(5716);e.exports=function(e){var t,i=e.length,n=e.words,o=0;if(1===i)o=n[0];else if(2===i)o=n[0]+67108864*n[1];else for(t=0;t<i;t++)o+=n[t]*Math.pow(67108864,t);return s(e)*o}},4025:function(e,t,n){"use strict";var s=n(2361),o=n(8828).countTrailingZeros;e.exports=function(e){var t,n=o(s.lo(e));return n<32?n:(t=o(s.hi(e)),t>20?52:t+32)}},1533:function(e,t,n){"use strict";n(6859),e.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},2651:function(e,t,n){"use strict";var s=n(6859),o=n(2361);e.exports=function(e){var t=o.exponent(e);return t<52?new s(e):new s(e*Math.pow(2,52-t)).ushln(t-52)}},869:function(e,t,n){"use strict";var s=n(2651),o=n(5716);e.exports=function(e,t){var n,a=o(e),i=o(t);return 0===a?[s(0),s(1)]:0===i?[s(0),s(0)]:(i<0&&(e=e.neg(),t=t.neg()),n=e.gcd(t),n.cmpn(1)?[e.div(n),t.div(n)]:[e,t])}},4387:function(e,t,n){"use strict";var s=n(6859);e.exports=function(e){return new s(e)}},6504:function(e,t,n){"use strict";var s=n(869);e.exports=function(e,t){return s(e[0].mul(t[0]),e[1].mul(t[1]))}},7721:function(e,t,n){"use strict";var s=n(5716);e.exports=function(e){return s(e[0])*s(e[1])}},5572:function(e,t,n){"use strict";var s=n(869);e.exports=function(e,t){return s(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},946:function(e,t,n){"use strict";var s=n(1369),o=n(4025);e.exports=function(e){if(i=e[0],t=e[1],0===i.cmpn(0))return 0;var t,n,i,a,d,u=i.abs().divmod(t.abs()),h=u.div,r=s(h),c=u.mod,l=i.negative!==t.negative?-1:1;return 0===c.cmpn(0)?l*r:r?(d=o(r)+4,l*(r+(a=s(c.ushln(d).divRound(t)))*Math.pow(2,-d))):(n=t.bitLength()-c.bitLength()+53,a=s(c.ushln(n).divRound(t)),n<1023?l*a*Math.pow(2,-n):l*(a*=Math.pow(2,-1023))*Math.pow(2,1023-n))}},2478:function(e){"use strict";function n(e,t,n,s,o){for(a=o+1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)>=0?(a=i,o=i-1):s=i+1}return a}function s(e,t,n,s,o){for(a=o+1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)>0?(a=i,o=i-1):s=i+1}return a}function o(e,t,n,s,o){for(a=s-1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)<0?(a=i,s=i+1):o=i-1}return a}function i(e,t,n,s,o){for(a=s-1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)<=0?(a=i,s=i+1):o=i-1}return a}function a(e,t,n,s,o){for(;s<=o;){var i=s+o>>>1,a=e[i],r=void 0!==n?n(a,t):a-t;if(0===r)return i;r<=0?s=i+1:o=i-1}return-1}function t(e,t,n,s,o,i){return"function"==typeof n?i(e,t,n,void 0===s?0:0|s,void 0===o?e.length-1:0|o):i(e,t,void 0,void 0===n?0:0|n,void 0===s?e.length-1:0|s)}e.exports={ge:function(e,s,o,i,a){return t(e,s,o,i,a,n)},gt:function(e,n,o,i,a){return t(e,n,o,i,a,s)},lt:function(e,n,s,i,a){return t(e,n,s,i,a,o)},le:function(e,n,s,o,a){return t(e,n,s,o,a,i)},eq:function(e,n,s,o,i){return t(e,n,s,o,i,a)}}},8828:function(e,t){"use strict";function s(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return n=(e>65535)<<4,n|=t=((e>>>=n)>255)<<3,n|=t=((e>>>=t)>15)<<2,(n|=t=((e>>>=t)>3)<<1)|(e>>>=t)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=s,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var n=new Array(256);!function(e){for(t=0;t<256;++t){var t,n=t,s=t,o=7;for(n>>>=1;n;n>>>=1)s<<=1,s|=1&n,--o;e[t]=s<<o&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>s(e)+1}},6859:function(e,t,n){!function(e,t){"use strict";function o(e,t){if(!e)throw new Error(t||"Assertion failed")}function l(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function s(e,t,n){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{m="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(7790).Buffer}catch{}function g(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function v(e,t,n){var s=g(e,n);return n-1>=t&&(s|=g(e,n-1)<<4),s}function w(e,t,n,s){for(var o,i=0,r=Math.min(e.length,n),a=t;a<r;a++)o=e.charCodeAt(a)-48,i*=s,i+=o>=49?o-49+10:o>=17?o-17+10:o;return i}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),o(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,n):(this._parseBase(e,t,s),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(o(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(o("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i,a,r,s=0;s<this.length;s++)this.words[s]=0;if(i=0,"be"===n)for(s=e.length-1,a=0;s>=0;s-=3)r=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[a]|=r<<i&67108863,this.words[a+1]=r>>>26-i&67108863,(i+=24)>=26&&(i-=26,a++);else if("le"===n)for(s=0,a=0;s<e.length;s+=3)r=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[a]|=r<<i&67108863,this.words[a+1]=r>>>26-i&67108863,(i+=24)>=26&&(i-=26,a++);return this.strip()},s.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(s=0;s<this.length;s++)this.words[s]=0;var s,i,o=0,a=0;if("be"===n)for(s=e.length-1;s>=t;s-=2)i=v(e,t,s)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)i=v(e,t,s)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},s.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(a=0,i=1;i<=67108863;i*=t)a++;a--,i=i/t|0;for(var i,a,l,r=e.length-n,c=r%a,d=Math.min(r,r-c)+n,o=0,s=n;s<d;s+=a)o=w(e,s,s+a,t),this.imuln(i),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(0!==c){l=1;for(o=w(e,s,e.length,t),s=0;s<c;s++)l*=t;this.imuln(l),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d,m,f,_=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function b(e,t,n){n.negative=t.negative^e.negative,r=e.length+t.length|0,n.length=r;var s,h,r=r-1|0,l=0|e.words[0],u=0|t.words[0],i=l*u,f=67108863&i,o=i/67108864|0;n.words[0]=f;for(s=1;s<r;s++){for(var d=o>>>26,c=67108863&o,m=Math.min(s,t.length-1),a=Math.max(0,s-e.length+1);a<=m;a++)h=s-a|0,d+=(i=(l=0|e.words[h])*(u=0|t.words[a])+c)/67108864|0,c=67108863&i;n.words[s]=0|c,o=0|d}return 0!==o?n.words[s]=0|o:n.length--,n.strip()}s.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var n,s,r,l,d,u,h,a=0,c=0,i=0;i<this.length;i++)d=this.words[i],r=(16777215&(d<<a|c)).toString(16),n=0!=(c=d>>>24-a&16777215)||i!==this.length-1?_[6-r.length]+r+n:r+n,(a+=2)>=26&&(a-=26,i--);for(0!==c&&(n=c.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){h=x[e],u=O[e],n="",s=this.clone();for(s.negative=0;!s.isZero();)l=s.modn(u).toString(e),n=(s=s.idivn(u)).isZero()?l+n:_[h-l.length]+l+n;for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}o(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return o(void 0!==m),this.toArrayLike(m,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,n){l=this.byteLength(),i=n||Math.max(1,l),o(l<=i,"byte array longer than desired length"),o(i>0,"Requested array length <= 0"),this.strip();var s,i,c,l,d="le"===t,r=new e(i),a=this.clone();if(d){for(s=0;!a.isZero();s++)c=a.andln(255),a.iushrn(8),r[s]=c;for(;s<i;s++)r[s]=0}else{for(s=0;s<i-l;s++)r[s]=0;for(s=0;!a.isZero();s++)c=a.andln(255),a.iushrn(8),r[i-s-1]=c}return r},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t,n=0,e=0;e<this.length;e++)if(t=this._zeroBits(this.words[e]),n+=t,26!==t)break;return n},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return o(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){n=this.length>e.length?e:this;for(var n,t=0;t<n.length;t++)this.words[t]=this.words[t]&e.words[t];return this.length=n.length,this.strip()},s.prototype.iand=function(e){return o(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){this.length>e.length?(n=this,s=e):(n=e,s=this);for(var n,s,t=0;t<s.length;t++)this.words[t]=n.words[t]^s.words[t];if(this!==n)for(;t<n.length;t++)this.words[t]=n.words[t];return this.length=n.length,this.strip()},s.prototype.ixor=function(e){return o(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){o("number"==typeof e&&e>=0);var t,n=0|Math.ceil(e/26),s=e%26;this._expand(n),s>0&&n--;for(t=0;t<n;t++)this.words[t]=67108863&~this.words[t];return s>0&&(this.words[t]=~this.words[t]&67108863>>26-s),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){o("number"==typeof e&&e>=0);var n=e/26|0,s=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<s:this.words[n]&~(1<<s),this.strip()},s.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,n=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,n=this.isub(e),e.negative=1,n._normSign();this.length>e.length?(s=this,i=e):(s=e,i=this);for(var n,s,i,o=0,t=0;t<i.length;t++)n=(0|s.words[t])+(0|i.words[t])+o,this.words[t]=67108863&n,o=n>>>26;for(;0!==o&&t<s.length;t++)n=(0|s.words[t])+o,this.words[t]=67108863&n,o=n>>>26;if(this.length=s.length,0!==o)this.words[this.length]=o,this.length++;else if(s!==this)for(;t<s.length;t++)this.words[t]=s.words[t];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative)return e.negative=0,s=this.iadd(e),e.negative=1,s._normSign();if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();if(a=this.cmp(e),0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=e):(n=e,i=this);for(var n,s,i,a,o=0,t=0;t<i.length;t++)o=(s=(0|n.words[t])-(0|i.words[t])+o)>>26,this.words[t]=67108863&s;for(;0!==o&&t<n.length;t++)o=(s=(0|n.words[t])+o)>>26,this.words[t]=67108863&s;if(0===o&&t<n.length&&n!==this)for(;t<n.length;t++)this.words[t]=n.words[t];return this.length=Math.max(this.length,t),n!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)},f=function(e,t,n){var s,o,i,X,Q,Z,J,Y=e.words,G=t.words,r=n.words,a=0,ge=0|Y[0],u=8191&ge,h=ge>>>13,we=0|Y[1],f=8191&we,p=we>>>13,ve=0|Y[2],v=8191&ve,b=ve>>>13,je=0|Y[3],y=8191&je,_=je>>>13,ye=0|Y[4],q=8191&ye,x=ye>>>13,Oe=0|Y[5],E=8191&Oe,k=Oe>>>13,Ce=0|Y[6],S=8191&Ce,M=Ce>>>13,Ae=0|Y[7],T=8191&Ae,z=Ae>>>13,Se=0|Y[8],N=8191&Se,L=Se>>>13,Fe=0|Y[9],P=8191&Fe,H=Fe>>>13,Te=0|G[0],B=8191&Te,V=Te>>>13,De=0|G[1],W=8191&De,U=De>>>13,Ee=0|G[2],m=8191&Ee,$=Ee>>>13,ze=0|G[3],I=8191&ze,R=ze>>>13,Me=0|G[4],D=8191&Me,F=Me>>>13,ke=0|G[5],K=8191&ke,A=ke>>>13,xe=0|G[6],C=8191&xe,O=xe>>>13,_e=0|G[7],w=8191&_e,j=_e>>>13,be=0|G[8],g=8191&be,d=be>>>13,pe=0|G[9],l=8191&pe,c=pe>>>13,he,ue,de,me,ce,re,ae,ie,se,ne,te,ee,fe,oe,le;return n.negative=e.negative^t.negative,n.length=19,he=(a+(o=Math.imul(u,B))|0)+((8191&(s=(s=Math.imul(u,V))+Math.imul(h,B)|0))<<13)|0,a=((i=Math.imul(h,V))+(s>>>13)|0)+(he>>>26)|0,he&=67108863,o=Math.imul(f,B),s=(s=Math.imul(f,V))+Math.imul(p,B)|0,i=Math.imul(p,V),ue=(a+(o=o+Math.imul(u,W)|0)|0)+((8191&(s=(s=s+Math.imul(u,U)|0)+Math.imul(h,W)|0))<<13)|0,a=((i=i+Math.imul(h,U)|0)+(s>>>13)|0)+(ue>>>26)|0,ue&=67108863,o=Math.imul(v,B),s=(s=Math.imul(v,V))+Math.imul(b,B)|0,i=Math.imul(b,V),o=o+Math.imul(f,W)|0,s=(s=s+Math.imul(f,U)|0)+Math.imul(p,W)|0,i=i+Math.imul(p,U)|0,de=(a+(o=o+Math.imul(u,m)|0)|0)+((8191&(s=(s=s+Math.imul(u,$)|0)+Math.imul(h,m)|0))<<13)|0,a=((i=i+Math.imul(h,$)|0)+(s>>>13)|0)+(de>>>26)|0,de&=67108863,o=Math.imul(y,B),s=(s=Math.imul(y,V))+Math.imul(_,B)|0,i=Math.imul(_,V),o=o+Math.imul(v,W)|0,s=(s=s+Math.imul(v,U)|0)+Math.imul(b,W)|0,i=i+Math.imul(b,U)|0,o=o+Math.imul(f,m)|0,s=(s=s+Math.imul(f,$)|0)+Math.imul(p,m)|0,i=i+Math.imul(p,$)|0,me=(a+(o=o+Math.imul(u,I)|0)|0)+((8191&(s=(s=s+Math.imul(u,R)|0)+Math.imul(h,I)|0))<<13)|0,a=((i=i+Math.imul(h,R)|0)+(s>>>13)|0)+(me>>>26)|0,me&=67108863,o=Math.imul(q,B),s=(s=Math.imul(q,V))+Math.imul(x,B)|0,i=Math.imul(x,V),o=o+Math.imul(y,W)|0,s=(s=s+Math.imul(y,U)|0)+Math.imul(_,W)|0,i=i+Math.imul(_,U)|0,o=o+Math.imul(v,m)|0,s=(s=s+Math.imul(v,$)|0)+Math.imul(b,m)|0,i=i+Math.imul(b,$)|0,o=o+Math.imul(f,I)|0,s=(s=s+Math.imul(f,R)|0)+Math.imul(p,I)|0,i=i+Math.imul(p,R)|0,ce=(a+(o=o+Math.imul(u,D)|0)|0)+((8191&(s=(s=s+Math.imul(u,F)|0)+Math.imul(h,D)|0))<<13)|0,a=((i=i+Math.imul(h,F)|0)+(s>>>13)|0)+(ce>>>26)|0,ce&=67108863,o=Math.imul(E,B),s=(s=Math.imul(E,V))+Math.imul(k,B)|0,i=Math.imul(k,V),o=o+Math.imul(q,W)|0,s=(s=s+Math.imul(q,U)|0)+Math.imul(x,W)|0,i=i+Math.imul(x,U)|0,o=o+Math.imul(y,m)|0,s=(s=s+Math.imul(y,$)|0)+Math.imul(_,m)|0,i=i+Math.imul(_,$)|0,o=o+Math.imul(v,I)|0,s=(s=s+Math.imul(v,R)|0)+Math.imul(b,I)|0,i=i+Math.imul(b,R)|0,o=o+Math.imul(f,D)|0,s=(s=s+Math.imul(f,F)|0)+Math.imul(p,D)|0,i=i+Math.imul(p,F)|0,re=(a+(o=o+Math.imul(u,K)|0)|0)+((8191&(s=(s=s+Math.imul(u,A)|0)+Math.imul(h,K)|0))<<13)|0,a=((i=i+Math.imul(h,A)|0)+(s>>>13)|0)+(re>>>26)|0,re&=67108863,o=Math.imul(S,B),s=(s=Math.imul(S,V))+Math.imul(M,B)|0,i=Math.imul(M,V),o=o+Math.imul(E,W)|0,s=(s=s+Math.imul(E,U)|0)+Math.imul(k,W)|0,i=i+Math.imul(k,U)|0,o=o+Math.imul(q,m)|0,s=(s=s+Math.imul(q,$)|0)+Math.imul(x,m)|0,i=i+Math.imul(x,$)|0,o=o+Math.imul(y,I)|0,s=(s=s+Math.imul(y,R)|0)+Math.imul(_,I)|0,i=i+Math.imul(_,R)|0,o=o+Math.imul(v,D)|0,s=(s=s+Math.imul(v,F)|0)+Math.imul(b,D)|0,i=i+Math.imul(b,F)|0,o=o+Math.imul(f,K)|0,s=(s=s+Math.imul(f,A)|0)+Math.imul(p,K)|0,i=i+Math.imul(p,A)|0,ae=(a+(o=o+Math.imul(u,C)|0)|0)+((8191&(s=(s=s+Math.imul(u,O)|0)+Math.imul(h,C)|0))<<13)|0,a=((i=i+Math.imul(h,O)|0)+(s>>>13)|0)+(ae>>>26)|0,ae&=67108863,o=Math.imul(T,B),s=(s=Math.imul(T,V))+Math.imul(z,B)|0,i=Math.imul(z,V),o=o+Math.imul(S,W)|0,s=(s=s+Math.imul(S,U)|0)+Math.imul(M,W)|0,i=i+Math.imul(M,U)|0,o=o+Math.imul(E,m)|0,s=(s=s+Math.imul(E,$)|0)+Math.imul(k,m)|0,i=i+Math.imul(k,$)|0,o=o+Math.imul(q,I)|0,s=(s=s+Math.imul(q,R)|0)+Math.imul(x,I)|0,i=i+Math.imul(x,R)|0,o=o+Math.imul(y,D)|0,s=(s=s+Math.imul(y,F)|0)+Math.imul(_,D)|0,i=i+Math.imul(_,F)|0,o=o+Math.imul(v,K)|0,s=(s=s+Math.imul(v,A)|0)+Math.imul(b,K)|0,i=i+Math.imul(b,A)|0,o=o+Math.imul(f,C)|0,s=(s=s+Math.imul(f,O)|0)+Math.imul(p,C)|0,i=i+Math.imul(p,O)|0,ie=(a+(o=o+Math.imul(u,w)|0)|0)+((8191&(s=(s=s+Math.imul(u,j)|0)+Math.imul(h,w)|0))<<13)|0,a=((i=i+Math.imul(h,j)|0)+(s>>>13)|0)+(ie>>>26)|0,ie&=67108863,o=Math.imul(N,B),s=(s=Math.imul(N,V))+Math.imul(L,B)|0,i=Math.imul(L,V),o=o+Math.imul(T,W)|0,s=(s=s+Math.imul(T,U)|0)+Math.imul(z,W)|0,i=i+Math.imul(z,U)|0,o=o+Math.imul(S,m)|0,s=(s=s+Math.imul(S,$)|0)+Math.imul(M,m)|0,i=i+Math.imul(M,$)|0,o=o+Math.imul(E,I)|0,s=(s=s+Math.imul(E,R)|0)+Math.imul(k,I)|0,i=i+Math.imul(k,R)|0,o=o+Math.imul(q,D)|0,s=(s=s+Math.imul(q,F)|0)+Math.imul(x,D)|0,i=i+Math.imul(x,F)|0,o=o+Math.imul(y,K)|0,s=(s=s+Math.imul(y,A)|0)+Math.imul(_,K)|0,i=i+Math.imul(_,A)|0,o=o+Math.imul(v,C)|0,s=(s=s+Math.imul(v,O)|0)+Math.imul(b,C)|0,i=i+Math.imul(b,O)|0,o=o+Math.imul(f,w)|0,s=(s=s+Math.imul(f,j)|0)+Math.imul(p,w)|0,i=i+Math.imul(p,j)|0,X=(a+(o=o+Math.imul(u,g)|0)|0)+((8191&(s=(s=s+Math.imul(u,d)|0)+Math.imul(h,g)|0))<<13)|0,a=((i=i+Math.imul(h,d)|0)+(s>>>13)|0)+(X>>>26)|0,X&=67108863,o=Math.imul(P,B),s=(s=Math.imul(P,V))+Math.imul(H,B)|0,i=Math.imul(H,V),o=o+Math.imul(N,W)|0,s=(s=s+Math.imul(N,U)|0)+Math.imul(L,W)|0,i=i+Math.imul(L,U)|0,o=o+Math.imul(T,m)|0,s=(s=s+Math.imul(T,$)|0)+Math.imul(z,m)|0,i=i+Math.imul(z,$)|0,o=o+Math.imul(S,I)|0,s=(s=s+Math.imul(S,R)|0)+Math.imul(M,I)|0,i=i+Math.imul(M,R)|0,o=o+Math.imul(E,D)|0,s=(s=s+Math.imul(E,F)|0)+Math.imul(k,D)|0,i=i+Math.imul(k,F)|0,o=o+Math.imul(q,K)|0,s=(s=s+Math.imul(q,A)|0)+Math.imul(x,K)|0,i=i+Math.imul(x,A)|0,o=o+Math.imul(y,C)|0,s=(s=s+Math.imul(y,O)|0)+Math.imul(_,C)|0,i=i+Math.imul(_,O)|0,o=o+Math.imul(v,w)|0,s=(s=s+Math.imul(v,j)|0)+Math.imul(b,w)|0,i=i+Math.imul(b,j)|0,o=o+Math.imul(f,g)|0,s=(s=s+Math.imul(f,d)|0)+Math.imul(p,g)|0,i=i+Math.imul(p,d)|0,se=(a+(o=o+Math.imul(u,l)|0)|0)+((8191&(s=(s=s+Math.imul(u,c)|0)+Math.imul(h,l)|0))<<13)|0,a=((i=i+Math.imul(h,c)|0)+(s>>>13)|0)+(se>>>26)|0,se&=67108863,o=Math.imul(P,W),s=(s=Math.imul(P,U))+Math.imul(H,W)|0,i=Math.imul(H,U),o=o+Math.imul(N,m)|0,s=(s=s+Math.imul(N,$)|0)+Math.imul(L,m)|0,i=i+Math.imul(L,$)|0,o=o+Math.imul(T,I)|0,s=(s=s+Math.imul(T,R)|0)+Math.imul(z,I)|0,i=i+Math.imul(z,R)|0,o=o+Math.imul(S,D)|0,s=(s=s+Math.imul(S,F)|0)+Math.imul(M,D)|0,i=i+Math.imul(M,F)|0,o=o+Math.imul(E,K)|0,s=(s=s+Math.imul(E,A)|0)+Math.imul(k,K)|0,i=i+Math.imul(k,A)|0,o=o+Math.imul(q,C)|0,s=(s=s+Math.imul(q,O)|0)+Math.imul(x,C)|0,i=i+Math.imul(x,O)|0,o=o+Math.imul(y,w)|0,s=(s=s+Math.imul(y,j)|0)+Math.imul(_,w)|0,i=i+Math.imul(_,j)|0,o=o+Math.imul(v,g)|0,s=(s=s+Math.imul(v,d)|0)+Math.imul(b,g)|0,i=i+Math.imul(b,d)|0,ne=(a+(o=o+Math.imul(f,l)|0)|0)+((8191&(s=(s=s+Math.imul(f,c)|0)+Math.imul(p,l)|0))<<13)|0,a=((i=i+Math.imul(p,c)|0)+(s>>>13)|0)+(ne>>>26)|0,ne&=67108863,o=Math.imul(P,m),s=(s=Math.imul(P,$))+Math.imul(H,m)|0,i=Math.imul(H,$),o=o+Math.imul(N,I)|0,s=(s=s+Math.imul(N,R)|0)+Math.imul(L,I)|0,i=i+Math.imul(L,R)|0,o=o+Math.imul(T,D)|0,s=(s=s+Math.imul(T,F)|0)+Math.imul(z,D)|0,i=i+Math.imul(z,F)|0,o=o+Math.imul(S,K)|0,s=(s=s+Math.imul(S,A)|0)+Math.imul(M,K)|0,i=i+Math.imul(M,A)|0,o=o+Math.imul(E,C)|0,s=(s=s+Math.imul(E,O)|0)+Math.imul(k,C)|0,i=i+Math.imul(k,O)|0,o=o+Math.imul(q,w)|0,s=(s=s+Math.imul(q,j)|0)+Math.imul(x,w)|0,i=i+Math.imul(x,j)|0,o=o+Math.imul(y,g)|0,s=(s=s+Math.imul(y,d)|0)+Math.imul(_,g)|0,i=i+Math.imul(_,d)|0,te=(a+(o=o+Math.imul(v,l)|0)|0)+((8191&(s=(s=s+Math.imul(v,c)|0)+Math.imul(b,l)|0))<<13)|0,a=((i=i+Math.imul(b,c)|0)+(s>>>13)|0)+(te>>>26)|0,te&=67108863,o=Math.imul(P,I),s=(s=Math.imul(P,R))+Math.imul(H,I)|0,i=Math.imul(H,R),o=o+Math.imul(N,D)|0,s=(s=s+Math.imul(N,F)|0)+Math.imul(L,D)|0,i=i+Math.imul(L,F)|0,o=o+Math.imul(T,K)|0,s=(s=s+Math.imul(T,A)|0)+Math.imul(z,K)|0,i=i+Math.imul(z,A)|0,o=o+Math.imul(S,C)|0,s=(s=s+Math.imul(S,O)|0)+Math.imul(M,C)|0,i=i+Math.imul(M,O)|0,o=o+Math.imul(E,w)|0,s=(s=s+Math.imul(E,j)|0)+Math.imul(k,w)|0,i=i+Math.imul(k,j)|0,o=o+Math.imul(q,g)|0,s=(s=s+Math.imul(q,d)|0)+Math.imul(x,g)|0,i=i+Math.imul(x,d)|0,ee=(a+(o=o+Math.imul(y,l)|0)|0)+((8191&(s=(s=s+Math.imul(y,c)|0)+Math.imul(_,l)|0))<<13)|0,a=((i=i+Math.imul(_,c)|0)+(s>>>13)|0)+(ee>>>26)|0,ee&=67108863,o=Math.imul(P,D),s=(s=Math.imul(P,F))+Math.imul(H,D)|0,i=Math.imul(H,F),o=o+Math.imul(N,K)|0,s=(s=s+Math.imul(N,A)|0)+Math.imul(L,K)|0,i=i+Math.imul(L,A)|0,o=o+Math.imul(T,C)|0,s=(s=s+Math.imul(T,O)|0)+Math.imul(z,C)|0,i=i+Math.imul(z,O)|0,o=o+Math.imul(S,w)|0,s=(s=s+Math.imul(S,j)|0)+Math.imul(M,w)|0,i=i+Math.imul(M,j)|0,o=o+Math.imul(E,g)|0,s=(s=s+Math.imul(E,d)|0)+Math.imul(k,g)|0,i=i+Math.imul(k,d)|0,fe=(a+(o=o+Math.imul(q,l)|0)|0)+((8191&(s=(s=s+Math.imul(q,c)|0)+Math.imul(x,l)|0))<<13)|0,a=((i=i+Math.imul(x,c)|0)+(s>>>13)|0)+(fe>>>26)|0,fe&=67108863,o=Math.imul(P,K),s=(s=Math.imul(P,A))+Math.imul(H,K)|0,i=Math.imul(H,A),o=o+Math.imul(N,C)|0,s=(s=s+Math.imul(N,O)|0)+Math.imul(L,C)|0,i=i+Math.imul(L,O)|0,o=o+Math.imul(T,w)|0,s=(s=s+Math.imul(T,j)|0)+Math.imul(z,w)|0,i=i+Math.imul(z,j)|0,o=o+Math.imul(S,g)|0,s=(s=s+Math.imul(S,d)|0)+Math.imul(M,g)|0,i=i+Math.imul(M,d)|0,Z=(a+(o=o+Math.imul(E,l)|0)|0)+((8191&(s=(s=s+Math.imul(E,c)|0)+Math.imul(k,l)|0))<<13)|0,a=((i=i+Math.imul(k,c)|0)+(s>>>13)|0)+(Z>>>26)|0,Z&=67108863,o=Math.imul(P,C),s=(s=Math.imul(P,O))+Math.imul(H,C)|0,i=Math.imul(H,O),o=o+Math.imul(N,w)|0,s=(s=s+Math.imul(N,j)|0)+Math.imul(L,w)|0,i=i+Math.imul(L,j)|0,o=o+Math.imul(T,g)|0,s=(s=s+Math.imul(T,d)|0)+Math.imul(z,g)|0,i=i+Math.imul(z,d)|0,Q=(a+(o=o+Math.imul(S,l)|0)|0)+((8191&(s=(s=s+Math.imul(S,c)|0)+Math.imul(M,l)|0))<<13)|0,a=((i=i+Math.imul(M,c)|0)+(s>>>13)|0)+(Q>>>26)|0,Q&=67108863,o=Math.imul(P,w),s=(s=Math.imul(P,j))+Math.imul(H,w)|0,i=Math.imul(H,j),o=o+Math.imul(N,g)|0,s=(s=s+Math.imul(N,d)|0)+Math.imul(L,g)|0,i=i+Math.imul(L,d)|0,J=(a+(o=o+Math.imul(T,l)|0)|0)+((8191&(s=(s=s+Math.imul(T,c)|0)+Math.imul(z,l)|0))<<13)|0,a=((i=i+Math.imul(z,c)|0)+(s>>>13)|0)+(J>>>26)|0,J&=67108863,o=Math.imul(P,g),s=(s=Math.imul(P,d))+Math.imul(H,g)|0,i=Math.imul(H,d),oe=(a+(o=o+Math.imul(N,l)|0)|0)+((8191&(s=(s=s+Math.imul(N,c)|0)+Math.imul(L,l)|0))<<13)|0,a=((i=i+Math.imul(L,c)|0)+(s>>>13)|0)+(oe>>>26)|0,oe&=67108863,le=(a+(o=Math.imul(P,l))|0)+((8191&(s=(s=Math.imul(P,c))+Math.imul(H,l)|0))<<13)|0,a=((i=Math.imul(H,c))+(s>>>13)|0)+(le>>>26)|0,le&=67108863,r[0]=he,r[1]=ue,r[2]=de,r[3]=me,r[4]=ce,r[5]=re,r[6]=ae,r[7]=ie,r[8]=X,r[9]=se,r[10]=ne,r[11]=te,r[12]=ee,r[13]=fe,r[14]=Z,r[15]=Q,r[16]=J,r[17]=oe,r[18]=le,0!==a&&(r[19]=a,n.length++),n};function p(e,t,n){return(new r).mulp(e,t,n)}function r(e,t){this.x=e,this.y=t}Math.imul||(f=b),s.prototype.mulTo=function(e,t){var n,s=this.length+e.length;return n=10===this.length&&10===e.length?f(this,e,t):s<63?b(this,e,t):s<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var o,i=0,a=0,s=0;s<n.length-1;s++){o=a,a=0;for(var c=67108863&i,u=Math.min(s,t.length-1),r=Math.max(0,s-e.length+1);r<=u;r++){var h=s-r,d=(0|e.words[h])*(0|t.words[r]),l=67108863&d,c=67108863&(l=l+c|0);a+=(o=(o=o+(d/67108864|0)|0)+(l>>>26)|0)>>>26,o&=67108863}n.words[s]=c,i=o,o=a}return 0!==i?n.words[s]=i:n.length--,n.strip()}(this,e,t):p(this,e,t),n},r.prototype.makeRBT=function(e){for(var n=new Array(e),o=s.prototype._countBits(e)-1,t=0;t<e;t++)n[t]=this.revBin(t,o,e);return n},r.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var o=0,s=0;s<t;s++)o|=(1&e)<<t-s-1,e>>=1;return o},r.prototype.permute=function(e,t,n,s,o,i){for(var a=0;a<i;a++)s[a]=t[e[a]],o[a]=n[e[a]]},r.prototype.transform=function(e,t,n,s,o,i){this.permute(i,e,t,n,s,o);for(c=1;c<o;c<<=1)for(var m=c<<1,p=Math.cos(2*Math.PI/m),f=Math.sin(2*Math.PI/m),r=0;r<o;r+=m)for(var u=p,h=f,a=0;a<c;a++){var c,v=n[r+a],b=s[r+a],d=n[r+a+c],l=s[r+a+c],g=u*d-h*l,l=u*l+h*d,d=g;n[r+a]=v+d,s[r+a]=b+l,n[r+a+c]=v-d,s[r+a+c]=b-l,a!==m&&(g=p*u-f*h,h=p*h+f*u,u=g)}},r.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),o=1&n,s=0;for(n=n/2|0;n;n>>>=1)s++;return 1<<s+1+o},r.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var o,s=0;s<n/2;s++)o=e[s],e[s]=e[n-s-1],e[n-s-1]=o,o=t[s],t[s]=-t[n-s-1],t[n-s-1]=-o},r.prototype.normalize13b=function(e,t){for(var s,o=0,n=0;n<t/2;n++)s=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+o,e[n]=67108863&s,o=s<67108864?0:s/67108864|0;return e},r.prototype.convert13b=function(e,t,n,s){for(var a=0,i=0;i<t;i++)a+=0|e[i],n[2*i]=8191&a,a>>>=13,n[2*i+1]=8191&a,a>>>=13;for(i=2*t;i<s;++i)n[i]=0;o(0===a),o(0==(-8192&a))},r.prototype.stub=function(e){for(var n=new Array(e),t=0;t<e;t++)n[t]=0;return n},r.prototype.mulp=function(e,t,n){var o,f,s=2*this.guessLen13b(e.length,t.length),l=this.makeRBT(s),r=this.stub(s),m=new Array(s),a=new Array(s),i=new Array(s),h=new Array(s),d=new Array(s),u=new Array(s),c=n.words;c.length=s,this.convert13b(e.words,e.length,m,s),this.convert13b(t.words,t.length,h,s),this.transform(m,r,a,i,s,l),this.transform(h,r,d,u,s,l);for(o=0;o<s;o++)f=a[o]*d[o]-i[o]*u[o],i[o]=a[o]*u[o]+i[o]*d[o],a[o]=f;return this.conjugate(a,i,s),this.transform(a,i,c,r,s,l),this.conjugate(c,r,s),this.normalize13b(c,s),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),p(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){o("number"==typeof e),o(e<67108864);for(var s,i,t=0,n=0;n<this.length;n++)s=(0|this.words[n])*e,i=(67108863&s)+(67108863&t),t>>=26,t+=s/67108864|0,t+=i>>>26,this.words[n]=67108863&i;return 0!==t&&(this.words[n]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){if(t=function(e){for(var s,o,n=new Array(e.bitLength()),t=0;t<n.length;t++)o=t/26|0,s=t%26,n[t]=(e.words[o]&1<<s)>>>s;return n}(e),0===t.length)return new s(1);for(var t,i,o=this,n=0;n<t.length&&0===t[n];n++,o=o.sqr());if(++n<t.length)for(i=o.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(o=o.mul(i));return o},s.prototype.iushln=function(e){o("number"==typeof e&&e>=0);var t,s,a,r,n=e%26,i=(e-n)/26,c=67108863>>>26-n<<26-n;if(0!==n){s=0;for(t=0;t<this.length;t++)a=this.words[t]&c,r=(0|this.words[t])-a<<n,this.words[t]=r|s,s=a>>>26-n;s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},s.prototype.ishln=function(e){return o(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){o("number"==typeof e&&e>=0);var s,a,d,l=t?(t-t%26)/26:0,c=e%26,i=Math.min((e-c)/26,this.length),u=67108863^67108863>>>c<<c,r=n;if(l-=i,l=Math.max(0,l),r){for(s=0;s<i;s++)r.words[s]=this.words[s];r.length=i}if(0===i);else if(this.length>i)for(this.length-=i,s=0;s<this.length;s++)this.words[s]=this.words[s+i];else this.words[0]=0,this.length=1;a=0;for(s=this.length-1;s>=0&&(0!==a||s>=l);s--)d=0|this.words[s],this.words[s]=a<<26-c|d>>>c,a=d&u;return r&&0!==a&&(r.words[r.length++]=a),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,n){return o(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){o("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,s=1<<t;return!(this.length<=n||!(this.words[n]&s))},s.prototype.imaskn=function(e){o("number"==typeof e&&e>=0);var s,t=e%26,n=(e-t)/26;return o(0===this.negative,"imaskn works only with positive numbers"),this.length<=n?this:((0!==t&&n++,this.length=Math.min(n,this.length),0!==t)&&(s=67108863^67108863>>>t<<t,this.words[this.length-1]&=s),this.strip())},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return o("number"==typeof e),o(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(o("number"==typeof e),o(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var s,i,a,r,c=e.length+n;this._expand(c),i=0;for(s=0;s<e.length;s++)a=(0|this.words[s+n])+i,r=(0|e.words[s])*t,i=((a-=67108863&r)>>26)-(r/67108864|0),this.words[s+n]=67108863&a;for(;s<this.length-n;s++)i=(a=(0|this.words[s+n])+i)>>26,this.words[s+n]=67108863&a;if(0===i)return this.strip();for(o(-1===i),i=0,s=0;s<this.length;s++)i=(a=-(0|this.words[s])+i)>>26,this.words[s]=67108863&a;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var i,a,r,l,d,u,c=(this.length,e.length),n=this.clone(),o=e,h=0|o.words[o.length-1];if(0!=(c=26-this._countBits(h))&&(o=o.ushln(c),n.iushln(c),h=0|o.words[o.length-1]),l=n.length-o.length,"mod"!==t){(i=new s(null)).length=l+1,i.words=new Array(i.length);for(d=0;d<i.length;d++)i.words[d]=0}u=n.clone()._ishlnsubmul(o,1,l),0===u.negative&&(n=u,i&&(i.words[l]=1));for(a=l-1;a>=0;a--){r=67108864*(0|n.words[o.length+a])+(0|n.words[o.length+a-1]);for(r=Math.min(r/h|0,67108863),n._ishlnsubmul(o,r,a);0!==n.negative;)r--,n.negative=0,n._ishlnsubmul(o,1,a),n.isZero()||(n.negative^=1);i&&(i.words[a]=r)}return i&&i.strip(),n.strip(),"div"!==t&&0!==c&&n.iushrn(c),{div:i||null,mod:n}},s.prototype.divmod=function(e,t,n){return o(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(i=this.neg().divmod(e,t),"mod"!==t&&(r=i.div.neg()),"div"!==t&&(a=i.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:r,mod:a}):0===this.negative&&0!==e.negative?(i=this.divmod(e.neg(),t),"mod"!==t&&(r=i.div.neg()),{div:r,mod:i.mod}):0!=(this.negative&e.negative)?(i=this.neg().divmod(e.neg(),t),"div"!==t&&(a=i.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:i.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,a,r},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){if(t=this.divmod(e),t.mod.isZero())return t.div;var t,s=0!==t.div.negative?t.mod.isub(e):t.mod,o=e.ushrn(1),i=e.andln(1),n=s.cmp(o);return n<0||1===i&&0===n?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){o(e<=67108863);for(var s=(1<<26)%e,t=0,n=this.length-1;n>=0;n--)t=(s*t+(0|this.words[n]))%e;return t},s.prototype.idivn=function(e){o(e<=67108863);for(var n,s=0,t=this.length-1;t>=0;t--)n=(0|this.words[t])+67108864*s,this.words[t]=n/e|0,s=n%e;return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){o(0===e.negative),o(!e.isZero()),t=this,n=e.clone(),t=0!==t.negative?t.umod(e):t.clone();for(var t,n,r,c,u,h,m,f,l=new s(1),d=new s(0),i=new s(0),a=new s(1),p=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++p;for(f=n.clone(),h=t.clone();!t.isZero();){for(r=0,m=1;0==(t.words[0]&m)&&r<26;++r,m<<=1);if(r>0)for(t.iushrn(r);r-- >0;)(l.isOdd()||d.isOdd())&&(l.iadd(f),d.isub(h)),l.iushrn(1),d.iushrn(1);for(c=0,u=1;0==(n.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(n.iushrn(c);c-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(f),a.isub(h)),i.iushrn(1),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),l.isub(i),d.isub(a)):(n.isub(t),i.isub(l),a.isub(d))}return{a:i,b:a,gcd:n.iushln(p)}},s.prototype._invmp=function(e){o(0===e.negative),o(!e.isZero()),t=this,n=e.clone(),t=0!==t.negative?t.umod(e):t.clone();for(var t,n,i,c,l,d,u,a=new s(1),r=new s(0),h=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);for(i=0,u=1;0==(n.words[0]&u)&&i<26;++i,u<<=1);if(i>0)for(n.iushrn(i);i-- >0;)r.isOdd()&&r.iadd(h),r.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(r)):(n.isub(t),r.isub(a))}return(d=0===t.cmpn(1)?a:r).cmpn(0)<0&&d.iadd(e),d},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var s,o,i,n=this.clone(),t=e.clone();n.negative=0,t.negative=0;for(s=0;n.isEven()&&t.isEven();s++)n.iushrn(1),t.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;t.isEven();)t.iushrn(1);if(o=n.cmp(t),o<0)i=n,n=t,t=i;else if(0===o||0===t.cmpn(1))break;n.isub(t)}return t.iushln(s)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){o("number"==typeof e);var t,n,i,a=e%26,s=(e-a)/26,r=1<<a;if(this.length<=s)return this._expand(s+1),this.words[s]|=r,this;for(t=r,n=s;0!==t&&n<this.length;n++)i=0|this.words[n],t=(i+=t)>>>26,i&=67108863,this.words[n]=i;return 0!==t&&(this.words[n]=t,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,s,n=e<0;return 0!==this.negative&&!n?-1:0===this.negative&&n?1:(this.strip(),this.length>1?t=1:(n&&(e=-e),o(e<=67108863,"Number is too big"),s=0|this.words[0],t=s===e?0:s<e?-1:1),0!==this.negative?0|-t:t)},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var n,s,o=0,t=this.length-1;t>=0;t--)if(n=0|this.words[t],s=0|e.words[t],n!==s){n<s?o=-1:n>s&&(o=1);break}return o},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new i(e)},s.prototype.toRed=function(e){return o(!this.red,"Already a number in reduction context"),o(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return o(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return o(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)},d={k256:null,p224:null,p192:null,p25519:null};function a(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function u(){a.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){a.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){a.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function h(){a.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function i(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else o(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function c(e){i.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},a.prototype.ireduce=function(e){var n,s,t=e;do this.split(t,this.tmp),n=(t=(t=this.imulK(t)).iadd(this.tmp)).bitLength();while(n>this.n)return s=n<this.n?-1:t.ucmp(this.p),0===s?(t.words[0]=0,t.length=1):s>0?t.isub(this.p):void 0!==t.strip?t.strip():t._strip(),t},a.prototype.split=function(e,t){e.iushrn(this.n,0,t)},a.prototype.imulK=function(e){return e.imul(this.k)},l(u,a),u.prototype.split=function(e,t){for(var s,o,i=4194303,a=Math.min(e.length,9),n=0;n<a;n++)t.words[n]=e.words[n];if(t.length=a,e.length<=9)return e.words[0]=0,void(e.length=1);s=e.words[9];for(t.words[t.length++]=s&i,n=10;n<e.length;n++)o=0|e.words[n],e.words[n-10]=(o&i)<<4|s>>>22,s=o;s>>>=22,e.words[n-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},u.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var s,t=0,n=0;n<e.length;n++)s=0|e.words[n],t+=977*s,e.words[n]=67108863&t,t=64*s+(t/67108864|0);return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},l(j,a),l(y,a),l(h,a),h.prototype.imulK=function(e){for(var s,o,t=0,n=0;n<e.length;n++)s=19*(0|e.words[n])+t,o=67108863&s,s>>>=26,e.words[n]=o,t=s;return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(d[e])return d[e];var t;if("k256"===e)t=new u;else if("p224"===e)t=new j;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new h}return d[e]=t,t},i.prototype._verify1=function(e){o(0===e.negative,"red works only with positives"),o(e.red,"red works only with red numbers")},i.prototype._verify2=function(e,t){o(0==(e.negative|t.negative),"red works only with positives"),o(e.red&&e.red===t.red,"red works only with red numbers")},i.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},i.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},i.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},i.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},i.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},i.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},i.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},i.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},i.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},i.prototype.isqr=function(e){return this.imul(e,e.clone())},i.prototype.sqr=function(e){return this.mul(e,e)},i.prototype.sqrt=function(e){if(e.isZero())return e.clone();if(c=this.m.andln(3),o(c%2==1),3===c)return g=this.m.add(new s(1)).iushrn(2),this.pow(e,g);for(t=this.m.subn(1),m=0;!t.isZero()&&0===t.andln(1);)m++,t.iushrn(1);o(!t.isZero());var t,i,a,c,m,f,g,d=new s(1).toRed(this),p=d.redNeg(),v=this.m.subn(1).iushrn(1),n=this.m.bitLength();for(n=new s(2*n*n).toRed(this);0!==this.pow(n,v).cmp(p);)n.redIAdd(p);for(var u=this.pow(n,t),h=this.pow(e,t.addn(1).iushrn(1)),r=this.pow(e,t),l=m;0!==r.cmp(d);){for(a=r,i=0;0!==a.cmp(d);i++)a=a.redSqr();o(i<l),f=this.pow(u,new s(1).iushln(l-i-1)),h=h.redMul(f),u=f.redSqr(),r=r.redMul(u),l=i}return h},i.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},i.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();o=new Array(16),o[0]=new s(1).toRed(this),o[1]=e;for(n=2;n<o.length;n++)o[n]=this.mul(o[n-1],e);var n,o,r,d,u,i=o[0],a=0,l=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(u=t.words[n],r=c-1;r>=0;r--)d=u>>r&1,i!==o[0]&&(i=this.sqr(i)),0!==d||0!==a?(a<<=1,a|=d,(4==++l||0===n&&0===r)&&(i=this.mul(i,o[a]),l=0,a=0)):l=0;c=26}return i},i.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},i.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new c(e)},l(c,i),c.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},c.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},c.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var o=e.imul(t),i=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=o.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},c.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var i=e.mul(t),a=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(a).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},c.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},6204:function(e){"use strict";e.exports=function(e){var t,n,s,o,i,a,r,l,u,h,d=e.length,c=0;for(t=0;t<d;++t)c+=e[t].length;a=new Array(c),l=0;for(t=0;t<d;++t){r=e[t],i=r.length;for(s=0;s<i;++s){n=a[l++]=new Array(i-1),u=0;for(o=0;o<i;++o)o!==s&&(n[u++]=r[o]);1&s&&(h=n[1],n[1]=n[0],n[0]=h)}}return a}},6867:function(e,t,n){"use strict";e.exports=function(e,t,n){switch(arguments.length){case 1:return o=[],a(s=e,s,c,!0),o;case 2:return"function"==typeof t?a(e,e,t,!0):function(e,t){return o=[],a(e,t,c,!1),o}(e,t);case 3:return a(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}var s};var o,s=n(1888),i=n(855),l=n(7150);function d(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function r(e,t,n,s){for(var i,a,c=0,r=0,o=0,l=e.length;o<l;++o)if(a=e[o],!d(t,a)){for(i=0;i<2*t;++i)n[c++]=a[i];s[r++]=o}return r}function a(e,t,n,o){var a,u,h,m,f,p,c=e.length,d=t.length;if(!(c<=0||d<=0)&&(a=e[0].length>>>1,!(a<=0)))return u=s.mallocDouble(2*a*c),h=s.mallocInt32(c),(c=r(e,a,u,h))>0&&(1===a&&o?(i.init(c),p=i.sweepComplete(a,n,0,c,u,h,0,c,u,h)):(m=s.mallocDouble(2*a*d),f=s.mallocInt32(d),(d=r(t,a,m,f))>0&&(i.init(c+d),p=1===a?i.sweepBipartite(a,n,0,c,u,h,0,d,m,f):l(a,n,o,c,u,h,d,m,f),s.free(m),s.free(f))),s.free(u),s.free(h)),p}function c(e,t){o.push([e,t])}},2455:function(e,t){"use strict";function n(e){return e?function(e,t,n,s,o,i,a,r,c,l,d){return o-s>c-r?function(e,t,n,s,o,i,a,r,c,l,d){for(var p=2*e,g=s,m=p*s;g<o;++g,m+=p){var w=i[t+m],j=i[t+m+e],b=a[g];t:for(f=r,h=p*r;f<c;++f,h+=p){var k=l[t+h],y=l[t+h+e],_=d[f];if(!(y<w||j<k)){for(u=t+1;u<e;++u){var u,h,f,v,O=i[u+m],x=i[u+e+m],C=l[u+h],E=l[u+e+h];if(x<C||E<O)continue t}if(v=n(b,_),void 0!==v)return v}}}}(e,t,n,s,o,i,a,r,c,l,d):function(e,t,n,s,o,i,a,r,c,l,d){for(var p=2*e,g=r,m=p*r;g<c;++g,m+=p){var w=l[t+m],j=l[t+m+e],b=d[g];t:for(f=s,h=p*s;f<o;++f,h+=p){var k=i[t+h],y=i[t+h+e],_=a[f];if(!(j<k||y<w)){for(u=t+1;u<e;++u){var u,h,f,v,O=i[u+h],x=i[u+e+h],C=l[u+m],E=l[u+e+m];if(x<C||E<O)continue t}if(v=n(_,b),void 0!==v)return v}}}}(e,t,n,s,o,i,a,r,c,l,d)}:function(e,t,n,s,o,i,a,r,c,l,d,u){return i-o>l-c?s?function(e,t,n,s,o,i,a,r,c,l,d){for(var p=2*e,g=s,h=p*s;g<o;++g,h+=p){var w=i[t+h],_=i[t+h+e],y=a[g];t:for(f=r,m=p*r;f<c;++f,m+=p)if(v=l[t+m],j=d[f],!(v<=w||_<v)){for(u=t+1;u<e;++u){var u,m,f,v,b,j,O=i[u+h],x=i[u+e+h],C=l[u+m],E=l[u+e+m];if(x<C||E<O)continue t}if(b=n(j,y),void 0!==b)return b}}}(e,t,n,o,i,a,r,c,l,d,u):function(e,t,n,s,o,i,a,r,c,l,d){for(var p=2*e,g=s,h=p*s;g<o;++g,h+=p){var w=i[t+h],_=i[t+h+e],y=a[g];t:for(f=r,m=p*r;f<c;++f,m+=p)if(v=l[t+m],j=d[f],!(v<w||_<v)){for(u=t+1;u<e;++u){var u,m,f,v,b,j,O=i[u+h],x=i[u+e+h],C=l[u+m],E=l[u+e+m];if(x<C||E<O)continue t}if(b=n(y,j),void 0!==b)return b}}}(e,t,n,o,i,a,r,c,l,d,u):s?function(e,t,n,s,o,i,a,r,c,l,d){for(var p=2*e,g=r,m=p*r;g<c;++g,m+=p){v=l[t+m],j=d[g];t:for(f=s,h=p*s;f<o;++f,h+=p){var y=i[t+h],E=i[t+h+e],_=a[f];if(!(v<=y||E<v)){for(u=t+1;u<e;++u){var u,h,f,v,b,j,w=i[u+h],O=i[u+e+h],x=l[u+m],C=l[u+e+m];if(O<x||C<w)continue t}if(b=n(j,_),void 0!==b)return b}}}}(e,t,n,o,i,a,r,c,l,d,u):function(e,t,n,s,o,i,a,r,c,l,d){for(var p=2*e,g=r,m=p*r;g<c;++g,m+=p){v=l[t+m],j=d[g];t:for(f=s,h=p*s;f<o;++f,h+=p){var y=i[t+h],E=i[t+h+e],_=a[f];if(!(v<y||E<v)){for(u=t+1;u<e;++u){var u,h,f,v,b,j,w=i[u+h],O=i[u+e+h],x=l[u+m],C=l[u+e+m];if(O<x||C<w)continue t}if(b=n(_,j),void 0!==b)return b}}}}(e,t,n,o,i,a,r,c,l,d,u)}}t.partial=n(!1),t.full=n(!0)},7150:function(e,t,n){"use strict";e.exports=function(e,t,n,r,h,k,A,S,M){!function(e,t){var n,o=8*l.log2(t+1)*(e+1)|0,i=l.nextPow2(u*o);s.length<i&&(c.free(s),s=c.mallocInt32(i)),n=l.nextPow2(d*o),a.length<n&&(c.free(a),a=c.mallocDouble(n))}(e,r+A),B=0,se=2*e;for(o(B++,0,0,r,0,A,n?16:0,-1/0,1/0),n||o(B++,0,0,A,0,r,1,-1/0,1/0);B>0;){var T,R,B,U,q,X,J,se,G=(B-=1)*u,F=s[G],H=s[G+1],L=s[G+2],K=s[G+3],$=s[G+4],Z=s[G+5],ne=B*d,ee=a[ne],te=a[ne+1],W=1&Z,Q=!!(16&Z),z=h,D=k,P=S,I=M;if(W&&(z=S,D=M,P=h,I=k),!(2&Z&&H>=(L=g(e,F,H,L,z,D,te))||4&Z&&(H=v(e,F,H,L,z,D,ee))>=L)){if(X=L-H,J=$-K,Q){if(e*X*(X+J)<y){if(void 0!==(R=i.scanComplete(e,F,t,H,L,z,D,K,$,P,I)))return R;continue}}else{if(e*Math.min(X,J)<m){if(void 0!==(R=x(e,F,t,W,H,L,z,D,K,$,P,I)))return R;continue}if(e*X*J<_){if(void 0!==(R=i.scanBipartite(e,F,t,W,H,L,z,D,K,$,P,I)))return R;continue}}if(T=b(e,F,H,L,z,D,ee,te),H<T)if(e*(T-H)<m){if(void 0!==(R=O(e,F+1,t,H,T,z,D,K,$,P,I)))return R}else if(F===e-2){if(void 0!==(R=W?i.sweepBipartite(e,t,K,$,P,I,H,T,z,D):i.sweepBipartite(e,t,H,T,z,D,K,$,P,I)))return R}else o(B++,F+1,H,T,K,$,W,-1/0,1/0),o(B++,F+1,K,$,H,T,1^W,-1/0,1/0);if(T<L){var N=w(e,F,K,$,P,I),Y=P[se*N+F],V=p(e,F,N,$,P,I,Y);if(V<$&&o(B++,F,T,L,V,$,(4|W)+(Q?16:0),Y,te),K<N&&o(B++,F,T,L,K,N,(2|W)+(Q?16:0),ee,Y),N+1===V){if(void 0!==(R=Q?E(e,F,t,T,L,z,D,N,P,I[N]):C(e,F,t,W,T,L,z,D,N,P,I[N])))return R}else if(N<V)if(Q){if(T<(U=f(e,F,T,L,z,D,Y)))if(q=p(e,F,T,U,z,D,Y),F===e-2){{if(T<q&&void 0!==(R=i.sweepComplete(e,t,T,q,z,D,N,V,P,I)))return R;if(q<U&&void 0!==(R=i.sweepBipartite(e,t,q,U,z,D,N,V,P,I)))return R}}else T<q&&o(B++,F+1,T,q,N,V,16,-1/0,1/0),q<U&&(o(B++,F+1,q,U,N,V,0,-1/0,1/0),o(B++,F+1,N,V,q,U,1,-1/0,1/0))}else T<(U=W?j(e,F,T,L,z,D,Y):f(e,F,T,L,z,D,Y))&&(F===e-2?R=W?i.sweepBipartite(e,t,N,V,P,I,T,U,z,D):i.sweepBipartite(e,t,T,U,z,D,N,V,P,I):(o(B++,F+1,T,U,N,V,W,-1/0,1/0),o(B++,F+1,N,V,T,U,1^W,-1/0,1/0)))}}}};var c=n(1888),l=n(8828),h=n(2455),x=h.partial,O=h.full,i=n(855),w=n(3545),r=n(8105),m=128,_=1<<22,y=1<<22,b=r("!(lo>=p0)&&!(p1>=hi)"),p=r("lo===p0"),g=r("lo<p0"),v=r("hi<=p0"),f=r("lo<=p0&&p0<=hi"),j=r("lo<p0&&p0<=hi"),u=6,d=2,s=c.mallocInt32(1024),a=c.mallocDouble(1024);function o(e,t,n,o,i,r,c,l,h){var f,m=u*e;s[m]=t,s[m+1]=n,s[m+2]=o,s[m+3]=i,s[m+4]=r,s[m+5]=c,f=d*e,a[f]=l,a[f+1]=h}function C(e,t,n,s,o,i,a,r,c,l,d){var u,h,m,f,p,j,y,_,w,b=2*e,g=c*b,v=l[g+t];t:for(p=o,h=o*b;p<i;++p,h+=b)if(m=a[h+t],f=a[h+t+e],!(v<m||f<v||s&&v===m)){for(j=r[p],u=t+1;u<e;++u)if(m=a[h+u],f=a[h+u+e],_=l[g+u],w=l[g+u+e],f<_||w<m)continue t;if(void 0!==(y=s?n(d,j):n(j,d)))return y}}function E(e,t,n,s,o,i,a,r,c,l){var d,u,h,m,f,p,b,y,_,g=2*e,v=r*g,j=c[v+t];t:for(f=s,u=s*g;f<o;++f,u+=g)if(p=a[f],p!==l&&(h=i[u+t],m=i[u+t+e],!(j<h||m<j))){for(d=t+1;d<e;++d)if(h=i[u+d],m=i[u+d+e],y=c[v+d],_=c[v+d+e],m<y||_<h)continue t;if(b=n(p,l),void 0!==b)return b}}},3545:function(e,t,n){"use strict";e.exports=function(e,t,n,a,r,c){if(a<=n+1)return n;for(var h=n,l=a,p=a+n>>>1,u=2*e,d=p,m=r[u*p+t];h<l;){if(l-h<o){i(e,t,h,l,r,c),m=r[u*p+t];break}var _,w,C=l-h,x=Math.random()*C+h|0,j=r[u*x+t],E=Math.random()*C+h|0,y=r[u*E+t],O=Math.random()*C+h|0,v=r[u*O+t];j<=y?v>=y?(d=E,m=y):j>=v?(d=x,m=j):(d=O,m=v):y>=v?(d=E,m=y):v>=j?(d=x,m=j):(d=O,m=v);for(var f=u*(l-1),g=u*d,b=0;b<u;++b,++f,++g)w=r[f],r[f]=r[g],r[g]=w;_=c[l-1];for(c[l-1]=c[d],c[d]=_,f=u*(l-1),g=u*(d=s(e,t,h,l-1,r,c,m)),b=0;b<u;++b,++f,++g)w=r[f],r[f]=r[g],r[g]=w;if(_=c[l-1],c[l-1]=c[d],c[d]=_,p<d){for(l=d-1;h<l&&r[u*(l-1)+t]===m;)l-=1;l+=1}else{if(!(d<p))break;for(h=d+1;h<l&&r[u*h+t]===m;)h+=1}}return s(e,t,n,p,r,c,r[u*p+t])};var s=n(8105)("lo<p0"),o=8;function i(e,t,n,s,o,i){for(var h,p,a=2*e,m=a*(n+1)+t,c=n+1;c<s;++c,m+=a)for(var g=o[m],r=c,l=a*(c-1);r>n&&o[l+t]>g;--r,l-=a){for(var u=l,d=l+a,f=0;f<a;++f,++u,++d)h=o[u],o[u]=o[d],o[d]=h;p=i[r],i[r]=i[r-1],i[r-1]=p}}},8105:function(e){"use strict";e.exports=function(e){return t[e]};var t={"lo===p0":function(e,t,n,s,o,i,a){for(var r,m,f,u=2*e,c=u*n,h=c,l=n,p=t,d=n;s>d;++d,c+=u)if(o[c+p]===a)if(l===d)l+=1,h+=u;else{for(r=0;u>r;++r)m=o[c+r],o[c+r]=o[h],o[h++]=m;f=i[d],i[d]=i[l],i[l++]=f}return l},"lo<p0":function(e,t,n,s,o,i,a){for(var r,m,f,u=2*e,c=u*n,h=c,l=n,p=t,d=n;s>d;++d,c+=u)if(o[c+p]<a)if(l===d)l+=1,h+=u;else{for(r=0;u>r;++r)m=o[c+r],o[c+r]=o[h],o[h++]=m;f=i[d],i[d]=i[l],i[l++]=f}return l},"lo<=p0":function(e,t,n,s,o,i,a){for(var r,m,f,u=2*e,c=u*n,h=c,l=n,p=e+t,d=n;s>d;++d,c+=u)if(o[c+p]<=a)if(l===d)l+=1,h+=u;else{for(r=0;u>r;++r)m=o[c+r],o[c+r]=o[h],o[h++]=m;f=i[d],i[d]=i[l],i[l++]=f}return l},"hi<=p0":function(e,t,n,s,o,i,a){for(var r,m,f,u=2*e,c=u*n,h=c,l=n,p=e+t,d=n;s>d;++d,c+=u)if(o[c+p]<=a)if(l===d)l+=1,h+=u;else{for(r=0;u>r;++r)m=o[c+r],o[c+r]=o[h],o[h++]=m;f=i[d],i[d]=i[l],i[l++]=f}return l},"lo<p0&&p0<=hi":function(e,t,n,s,o,i,a){for(var d,m,f,p,g,u=2*e,r=u*n,h=r,l=n,v=t,b=e+t,c=n;s>c;++c,r+=u)if(p=o[r+v],g=o[r+b],p<a&&a<=g)if(l===c)l+=1,h+=u;else{for(d=0;u>d;++d)m=o[r+d],o[r+d]=o[h],o[h++]=m;f=i[c],i[c]=i[l],i[l++]=f}return l},"lo<=p0&&p0<=hi":function(e,t,n,s,o,i,a){for(var d,m,f,p,g,u=2*e,r=u*n,h=r,l=n,v=t,b=e+t,c=n;s>c;++c,r+=u)if(p=o[r+v],g=o[r+b],p<=a&&a<=g)if(l===c)l+=1,h+=u;else{for(d=0;u>d;++d)m=o[r+d],o[r+d]=o[h],o[h++]=m;f=i[c],i[c]=i[l],i[l++]=f}return l},"!(lo>=p0)&&!(p1>=hi)":function(e,t,n,s,o,i,a,r){for(var u,f,p,g,v,h=2*e,c=h*n,m=c,d=n,b=t,j=e+t,l=n;s>l;++l,c+=h)if(g=o[c+b],v=o[c+j],!(g>=a||r>=v))if(d===l)d+=1,m+=h;else{for(u=0;h>u;++u)f=o[c+u],o[c+u]=o[m],o[m++]=f;p=i[l],i[l]=i[d],i[d++]=p}return d}}},1811:function(e){"use strict";e.exports=function(e,t){t<=4*o?n(0,t-1,e):s(0,t-1,e)};var o=32;function n(e,t,n){for(o=2*(e+1),i=e+1;i<=t;++i){for(var o,i,a,c,r=n[o++],l=n[o++],d=i,s=o-2;d-- >e;){if(a=n[s-2],c=n[s-1],a<r)break;if(a===r&&c<l)break;n[s]=a,n[s+1]=c,s-=2}n[s]=r,n[s+1]=l}}function c(e,t,n){t*=2;var s=n[e*=2],o=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=s,n[t+1]=o}function a(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function l(e,t,n,s){t*=2,n*=2;var o=s[e*=2],i=s[e+1];s[e]=s[t],s[e+1]=s[t+1],s[t]=s[n],s[t+1]=s[n+1],s[n]=o,s[n+1]=i}function r(e,t,n,s,o){t*=2,o[e*=2]=o[t],o[t]=n,o[e+1]=o[t+1],o[t+1]=s}function t(e,t,n){t*=2;var s=n[e*=2],o=n[t];return!(s<o)&&(s!==o||n[e+1]>n[t+1])}function i(e,t,n,s){var o=s[e*=2];return o<t||o===t&&s[e+1]<n}function s(e,d,u){var j,O=(d-e+1)/6|0,M=e+O,S=d-O,w=e+d>>1,A=w-O,F=w+O,b=M,f=A,v=w,p=F,y=S,g=e+1,m=d-1,h=0;t(b,f,u)&&(h=b,b=f,f=h),t(p,y,u)&&(h=p,p=y,y=h),t(b,v,u)&&(h=b,b=v,v=h),t(f,v,u)&&(h=f,f=v,v=h),t(b,p,u)&&(h=b,b=p,p=h),t(v,p,u)&&(h=v,v=p,p=h),t(f,y,u)&&(h=f,f=y,y=h),t(f,v,u)&&(h=f,f=v,v=h),t(p,y,u)&&(h=p,p=y,y=h);for(var x=u[2*f],C=u[2*f+1],E=u[2*p],k=u[2*p+1],L=2*b,T=2*v,I=2*y,z=2*M,D=2*w,N=2*S,_=0;_<2;++_){var R=u[L+_],P=u[T+_],H=u[I+_];u[z+_]=R,u[D+_]=P,u[N+_]=H}a(A,e,u),a(F,d,u);for(j=g;j<=m;++j)if(i(j,x,C,u))j!==g&&c(j,g,u),++g;else if(!i(j,E,k,u))for(;;){if(i(m,E,k,u)){i(m,x,C,u)?(l(j,g,m,u),++g,--m):(c(j,m,u),--m);break}if(--m<j)break}r(e,g-1,x,C,u),r(d,m+1,E,k,u),g-2-e<=o?n(e,g-2,u):s(e,g-2,u),d-(m+2)<=o?n(m+2,d,u):s(m+2,d,u),m-g<=o?n(g,m,u):s(g,m,u)}},855:function(e,t,n){"use strict";e.exports={init:function(e){var n,t=g.nextPow2(e);i.length<t&&(o.free(i),i=o.mallocInt32(t)),r.length<t&&(o.free(r),r=o.mallocInt32(t)),c.length<t&&(o.free(c),c=o.mallocInt32(t)),l.length<t&&(o.free(l),l=o.mallocInt32(t)),h.length<t&&(o.free(h),h=o.mallocInt32(t)),f.length<t&&(o.free(f),f=o.mallocInt32(t)),n=8*t,s.length<n&&(o.free(s),s=o.mallocDouble(n))},sweepBipartite:function(e,t,n,o,d,h,f,g,v,b){for(var j,w,O,x,C,E,k,A,M,_=0,S=2*e,T=e-1,F=S-1,y=n;y<o;++y)O=h[y],A=S*y,s[_++]=d[A+T],s[_++]=-(O+1),s[_++]=d[A+F],s[_++]=O;for(y=f;y<g;++y)O=b[y]+a,M=S*y,s[_++]=v[M+T],s[_++]=-O,s[_++]=v[M+F],s[_++]=O;k=_>>>1,p(s,k),C=0,x=0;for(y=0;y<k;++y)if(j=0|s[2*y+1],j>=a)m(c,l,x--,j=j-a|0);else if(j>=0)m(i,r,C--,j);else if(j<=-a){j=-j-a|0;for(w=0;w<C;++w)if(void 0!==(E=t(i[w],j)))return E;u(c,l,x++,j)}else{for(j=-j-1|0,w=0;w<x;++w)if(void 0!==(E=t(j,c[w])))return E;u(i,r,C++,j)}},sweepComplete:function(e,t,n,o,a,d,g,v,b,j){for(var _,w,O,C,E,k,A,S,T,x=0,z=2*e,L=e-1,N=z-1,y=n;y<o;++y)C=d[y]+1<<1,T=z*y,s[x++]=a[T+L],s[x++]=-C,s[x++]=a[T+N],s[x++]=C;for(y=g;y<v;++y)C=j[y]+1<<1,S=z*y,s[x++]=b[S+L],s[x++]=1|-C,s[x++]=b[S+N],s[x++]=1|C;A=x>>>1,p(s,A);var M=0,D=0,F=0;for(y=0;y<A;++y)if(E=0|s[2*y+1],O=1&E,y<A-1&&E>>1==s[2*y+3]>>1&&(O=2,y+=1),E<0){for(w=-(E>>1)-1,_=0;_<F;++_)if(void 0!==(k=t(h[_],w)))return k;if(0!==O)for(_=0;_<M;++_)if(void 0!==(k=t(i[_],w)))return k;if(1!==O)for(_=0;_<D;++_)if(void 0!==(k=t(c[_],w)))return k;0===O?u(i,r,M++,w):1===O?u(c,l,D++,w):2===O&&u(h,f,F++,w)}else w=(E>>1)-1,0===O?m(i,r,M--,w):1===O?m(c,l,D--,w):2===O&&m(h,f,F--,w)},scanBipartite:function(e,t,n,o,c,l,d,h,f,g,v,b){var j,y,_,O,x,E,A,S,M,F,T,D,N,P,w=0,k=2*e,H=t,I=t+e,z=1,L=1;o?L=a:z=a;for(j=c;j<l;++j)y=j+z,T=k*j,s[w++]=d[T+H],s[w++]=-y,s[w++]=d[T+I],s[w++]=y;for(j=f;j<g;++j)y=j+L,P=k*j,s[w++]=v[P+H],s[w++]=-y;M=w>>>1,p(s,M),E=0;for(j=0;j<M;++j)if(S=0|s[2*j+1],S<0){if(A=!1,(y=-S)>=a?(A=!o,y-=a):(A=!!o,y-=1),A)u(i,r,E++,y);else{var R=b[y],C=k*y,B=v[C+t+1],V=v[C+t+1+e];t:for(x=0;x<E;++x)if(F=i[x],O=k*F,!(V<d[O+t+1]||d[O+t+1+e]<B)){for(_=t+2;_<e;++_)if(v[C+_+e]<d[O+_]||d[O+_+e]<v[C+_])continue t;if(D=h[F],void 0!==(N=o?n(R,D):n(D,R)))return N}}}else m(i,r,E--,S-z)},scanComplete:function(e,t,n,o,r,c,l,d,u,h,m){for(var g,v,b,y,_,x,C,E,k,A,S,M,j=0,w=2*e,F=t,z=t+e,f=o;f<r;++f)v=f+a,A=w*f,s[j++]=c[A+F],s[j++]=-v,s[j++]=c[A+z],s[j++]=v;for(f=d;f<u;++f)v=f+1,M=w*f,s[j++]=h[M+F],s[j++]=-v;C=j>>>1,p(s,C),y=0;for(f=0;f<C;++f)if(x=0|s[2*f+1],x<0){if((v=-x)>=a)i[y++]=v-a;else{var T=m[v-=1],O=w*v,D=h[O+t+1],N=h[O+t+1+e];t:for(b=0;b<y;++b){if(S=i[b],E=l[S],E===T)break;if(_=w*S,!(N<c[_+t+1]||c[_+t+1+e]<D)){for(g=t+2;g<e;++g)if(h[O+g+e]<c[_+g]||c[_+g+e]<h[O+g])continue t;if(k=n(E,T),void 0!==k)return k}}}}else{for(v=x-a,b=y-1;b>=0;--b)if(i[b]===v){for(g=b+1;g<y;++g)i[g-1]=i[g];break}--y}}};var o=n(1888),g=n(8828),p=n(1811),a=1<<28,d=1024,i=o.mallocInt32(d),r=o.mallocInt32(d),c=o.mallocInt32(d),l=o.mallocInt32(d),h=o.mallocInt32(d),f=o.mallocInt32(d),s=o.mallocDouble(8192);function m(e,t,n,s){var o=t[s],i=e[n-1];e[o]=i,t[i]=o}function u(e,t,n,s){e[n]=s,t[s]=n}},2538:function(e,t,n){"use strict";var l=n(8902),i=n(5542),a=n(2272),o=n(5023);function r(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function c(e,t){return e[0]-t[0]||e[1]-t[1]}function s(e,t,n){return t in e?e[t]:n}e.exports=function(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var d,u,h,f,v=!!s(n,"delaunay",!0),g=!!s(n,"interior",!0),p=!!s(n,"exterior",!0),m=!!s(n,"infinity",!1);if(!g&&!p||0===e.length)return[];if(f=l(e,t),v||g!==p||m){for(d=i(e.length,function(e){return e.map(r).sort(c)}(t)),u=0;u<f.length;++u)h=f[u],d.addTriangle(h[0],h[1],h[2]);return v&&a(e,d),p?g?m?o(d,0,m):d.cells():o(d,1,m):o(d,-1)}return f}},2272:function(e,t,n){"use strict";var o=n(2646)[4];function s(e,t,n,s,i,a){var c,r=t.opposite(s,i);r<0||(i<s&&(c=s,s=i,i=c,c=a,a=r,r=c),t.isConstraint(s,i)||o(e[s],e[i],e[a],e[r])<0&&n.push(s,i))}n(2478),e.exports=function(e,t){for(var n,r,d,u,m,f,l=[],g=e.length,p=t.stars,i=0;i<g;++i)for(r=p[i],d=1;d<r.length;d+=2)if(!((n=r[d])<i||t.isConstraint(i,n))){for(var c=r[d-1],a=-1,h=1;h<r.length;h+=2)if(r[h-1]===n){a=r[h];break}a<0||o(e[i],e[n],e[c],e[a])<0&&l.push(i,n)}for(;l.length>0;){for(n=l.pop(),u=(c=-1,a=-1,r=p[i=l.pop()],1);u<r.length;u+=2)m=r[u-1],f=r[u],m===n?a=f:f===n&&(c=m);c<0||a<0||o(e[i],e[n],e[c],e[a])>=0||(t.flip(i,n),s(e,t,l,c,i,a),s(e,t,l,i,a,c),s(e,t,l,a,n,c),s(e,t,l,n,c,a))}}},5023:function(e,t,n){"use strict";var s,a=n(2478);function o(e,t,n,s,o,i,a){this.cells=e,this.neighbor=t,this.flags=s,this.constraint=n,this.active=o,this.next=i,this.boundary=a}function i(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}e.exports=function(e,t,n){if(s=function(e,t){for(var u=e.cells(),d=u.length,n=0;n<d;++n){var r=(s=u[n])[0],a=s[1],h=s[2];a<h?a<r&&(s[0]=a,s[1]=h,s[2]=r):h<r&&(s[0]=h,s[1]=r,s[2]=a)}u.sort(i),l=new Array(d);for(n=0;n<l.length;++n)l[n]=0;var s,c,l,f,j,y,b=[],p=[],v=new Array(3*d),g=new Array(3*d),m=null;t&&(m=[]),f=new o(u,v,g,l,b,p,m);for(n=0;n<d;++n)for(s=u[n],c=0;c<3;++c)r=s[c],a=s[(c+1)%3],j=v[3*n+c]=f.locate(a,r,e.opposite(a,r)),y=g[3*n+c]=e.isConstraint(r,a),j<0&&(y?p.push(n):(b.push(n),l[n]=1),t&&m.push([a,r,-1]));return f}(e,n),0===t)return n?s.cells.concat(s.boundary):s.cells;for(var s,r,c,h,m,p,l=1,a=s.active,d=s.next,u=s.flags,f=s.cells,v=s.constraint,g=s.neighbor;a.length>0||d.length>0;){for(;a.length>0;)if(c=a.pop(),u[c]!==-l){u[c]=l,f[c];for(h=0;h<3;++h)r=g[3*c+h],r>=0&&0===u[r]&&(v[3*c+h]?d.push(r):(a.push(r),u[r]=l))}p=d,d=a,a=p,d.length=0,l=-l}return m=function(e,t,n){for(var o=0,s=0;s<e.length;++s)t[s]===n&&(e[o++]=e[s]);return e.length=o,e}(f,u,t),n?m.concat(s.boundary):m},o.prototype.locate=(s=[0,0,0],function(e,t,n){var o=e,r=t,c=n;return t<n?t<e&&(o=t,r=n,c=e):n<e&&(o=n,r=e,c=t),o<0?-1:(s[0]=o,s[1]=r,s[2]=c,a.eq(this.cells,s,i))})},8902:function(e,t,n){"use strict";var i=n(2478),s=n(3250)[3];function a(e,t,n,s,o){this.a=e,this.b=t,this.idx=n,this.lowerIds=s,this.upperIds=o}function o(e,t,n,s){this.a=e,this.b=t,this.type=n,this.idx=s}function l(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n||(0!==e.type&&(n=s(e.a,e.b,t.b))?n:e.idx-t.idx)}function r(e,t){return s(e.a,e.b,t)}function d(e,t,n,o,a){for(var l,f=i.lt(t,o,r),m=i.gt(t,o,r),u=f;u<m;++u){for(var h=t[u],d=h.lowerIds,c=d.length;c>1&&s(n[d[c-2]],n[d[c-1]],o)>0;)e.push([d[c-1],d[c-2],a]),c-=1;d.length=c,d.push(a),l=h.upperIds;for(c=l.length;c>1&&s(n[l[c-2]],n[l[c-1]],o)<0;)e.push([l[c-2],l[c-1],a]),c-=1;l.length=c,l.push(a)}}function c(e,t){var n;return(n=e.a[0]<t.a[0]?s(e.a,e.b,t.a):s(t.b,t.a,e.a))||(n=t.b[0]<e.b[0]?s(e.a,e.b,t.b):s(t.b,t.a,e.b))||e.idx-t.idx}function u(e,t,n){var o=i.le(e,n,c),r=e[o],s=r.upperIds,l=s[s.length-1];r.upperIds=[l],e.splice(o+1,0,new a(n.a,n.b,n.idx,[l],s))}function h(e,t,n){o=n.a,n.a=n.b,n.b=o;var o,s=i.eq(e,n,c),a=e[s];e[s-1].upperIds=a.upperIds,e.splice(s,1)}e.exports=function(e,t){for(var r,f,y=e.length,j=t.length,s=[],n=0;n<y;++n)s.push(new o(e[n],null,0,n));for(n=0;n<j;++n){var g=t[n],c=e[g[0]],i=e[g[1]];c[0]<i[0]?s.push(new o(c,i,2,n),new o(i,c,1,n)):c[0]>i[0]&&s.push(new o(i,c,2,n),new o(c,i,1,n))}s.sort(l);for(var p=s[0].a[0]-(1+Math.abs(s[0].a[0]))*Math.pow(2,-52),m=[new a([p,1],[p,0],-1,[],[],[],[])],v=[],b=(n=0,s.length);n<b;++n)r=s[n],f=r.type,0===f?d(v,m,e,r.a,r.idx):2===f?u(m,0,r):h(m,0,r);return v}},5542:function(e,t,n){"use strict";var s,a=n(2478);function i(e,t){this.stars=e,this.edges=t}e.exports=function(e,t){for(var s=new Array(e),n=0;n<e;++n)s[n]=[];return new i(s,t)},s=i.prototype;function o(e,t,n){for(var s=1,o=e.length;s<o;s+=2)if(e[s-1]===t&&e[s]===n)return e[s-1]=e[o-2],e[s]=e[o-1],void(e.length=o-2)}s.isConstraint=function(){var e=[0,0];function t(e,t){return e[0]-t[0]||e[1]-t[1]}return function(n,s){return e[0]=Math.min(n,s),e[1]=Math.max(n,s),a.eq(this.edges,e,t)>=0}}(),s.removeTriangle=function(e,t,n){var s=this.stars;o(s[e],t,n),o(s[t],n,e),o(s[n],e,t)},s.addTriangle=function(e,t,n){var s=this.stars;s[e].push(t,n),s[t].push(n,e),s[n].push(e,t)},s.opposite=function(e,t){for(var s=this.stars[t],n=1,o=s.length;n<o;n+=2)if(s[n]===e)return s[n-1];return-1},s.flip=function(e,t){var n=this.opposite(e,t),s=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,s),this.addTriangle(e,s,n),this.addTriangle(t,n,s)},s.edges=function(){for(var s=this.stars,o=[],t=0,i=s.length;t<i;++t)for(var n=s[t],e=0,a=n.length;e<a;e+=2)o.push([n[e],n[e+1]]);return o},s.cells=function(){for(var n,o,i=this.stars,a=[],e=0,r=i.length;e<r;++e)for(var s=i[e],t=0,c=s.length;t<c;t+=2)n=s[t],o=s[t+1],e<Math.min(n,o)&&a.push([e,n,o]);return a}},2419:function(e){"use strict";e.exports=function(e){for(var n,s=1,t=1;t<e.length;++t)for(n=0;n<t;++n)if(e[t]<e[n])s=-s;else if(e[n]===e[t])return 0;return s}},3628:function(e,t,n){"use strict";var s=n(1338),r=n(727);function o(e,t){for(var s=0,o=e.length,n=0;n<o;++n)s+=e[n]*t[n];return s}function i(e){if(i=e.length,0===i)return[];e[0].length,a=s([e.length+1,e.length+1],1),l=s([e.length+1],1),a[i][i]=0;for(t=0;t<i;++t){for(n=0;n<=t;++n)a[n][t]=a[t][n]=2*o(e[t],e[n]);l[t]=o(e[t],e[t])}var t,n,i,a,l,d,u,h=r(a,l),m=0,c=h[i+1];for(t=0;t<c.length;++t)m+=c[t];d=new Array(i);for(t=0;t<i;++t){c=h[t],u=0;for(n=0;n<c.length;++n)u+=c[n];d[t]=u/m}return d}function a(e){if(0===e.length)return[];for(var t,o=e[0].length,a=s([o]),r=i(e),n=0;n<e.length;++n)for(t=0;t<o;++t)a[t]+=e[n][t]*r[n];return a}a.barycenetric=i,e.exports=a},6037:function(e,t,n){e.exports=function(e){for(var t,a,o=s(e),i=0,n=0;n<e.length;++n)for(a=e[n],t=0;t<o.length;++t)i+=Math.pow(a[t]-o[t],2);return Math.sqrt(i/e.length)};var s=n(3628)},332:function(e,t,n){"use strict";e.exports=function(e,t,n){if(n){a=t;for(var o,i,a,r=new Array(t.length),s=0;s<t.length;++s)o=t[s],r[s]=[o[0],o[1],n[s]];t=r}for(i=function(e,t,n){var s=d(e,[],m(e));return u(t,s,n),!!s}(e,t,!!n);b(e,t,!!n);)i=!0;if(n&&i)for(a.length=0,n.length=0,s=0;s<t.length;++s)o=t[s],a.push([o[0],o[1]]),n.push(o[2]);return i};var f=n(1755),a=n(6867),r=n(1125),c=n(7842),l=n(1318),i=n(946),o=n(5838),s=n(1278),v=n(3637);function h(e){var t=i(e);return[s(t,-1/0),s(t,1/0)]}function m(e){for(var t,o=new Array(e.length),n=0;n<e.length;++n)t=e[n],o[n]=[s(t[0],-1/0),s(t[1],-1/0),s(t[0],1/0),s(t[1],1/0)];return o}function d(e,t){for(var i,c,d,u,r=t.length,l=new f(r),g=[],o=0;o<t.length;++o){var v=t[o],m=h(v[0]),p=h(v[1]);g.push([s(m[0],-1/0),s(p[0],-1/0),s(m[1],1/0),s(p[1],1/0)])}a(g,function(e,t){l.link(e,t)}),u=!0,i=new Array(r);for(o=0;o<r;++o)(c=l.find(o))!==o&&(u=!1,e[c]=[Math.min(e[o][0],e[c][0]),Math.min(e[o][1],e[c][1])]);if(u)return null;d=0;for(o=0;o<r;++o)(c=l.find(o))===o?(i[o]=d,e[d++]=e[o]):i[o]=-1;for(e.length=d,o=0;o<r;++o)i[o]<0&&(i[o]=i[l.find(o)]);return i}function p(e,t){return e[0]-t[0]||e[1]-t[1]}function g(e,t){return e[0]-t[0]||e[1]-t[1]||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function u(e,t,n){if(0!==e.length){if(t)for(s=0;s<e.length;++s){var s,o,r,c,l,i=t[(o=e[s])[0]],a=t[o[1]];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}else for(s=0;s<e.length;++s)i=(o=e[s])[0],a=o[1],o[0]=Math.min(i,a),o[1]=Math.max(i,a);n?e.sort(g):e.sort(p),l=1;for(s=1;s<e.length;++s)c=e[s-1],r=e[s],(r[0]!==c[0]||r[1]!==c[1]||n&&r[2]!==c[2])&&(e[l++]=r);e.length=l}}function b(e,t,n){var h=function(e,t){for(a=new Array(t.length),n=0;n<t.length;++n){var n,a,r=t[n],o=e[r[0]],i=e[r[1]];a[n]=[s(Math.min(o[0],i[0]),-1/0),s(Math.min(o[1],i[1]),-1/0),s(Math.max(o[0],i[0]),1/0),s(Math.max(o[1],i[1]),1/0)]}return a}(e,t),f=function(e,t,n){var s=[];return a(n,function(n,o){if(i=t[n],a=t[o],i[0]!==a[0]&&i[0]!==a[1]&&i[1]!==a[0]&&i[1]!==a[1]){var i,a,c=e[i[0]],l=e[i[1]],d=e[a[0]],u=e[a[1]];r(c,l,d,u)&&s.push([n,o])}}),s}(e,t,h),p=function(e,t,n,s){var o=[];return a(n,s,function(n,s){if(i=t[n],i[0]!==s&&i[1]!==s){var i,a=e[s],c=e[i[0]],l=e[i[1]];r(c,l,a,a)&&o.push([n,s])}}),o}(e,t,h,m(e)),b=function(e,t,n,s,a){h=e.map(function(e){return[c(e[0]),c(e[1])]});for(r=0;r<n.length;++r){_=n[r],u=_[0];var E=_[1],k=t[u],A=t[E],g=v(o(e[k[0]]),o(e[k[1]]),o(e[A[0]]),o(e[A[1]]));g&&(j=e.length,e.push([i(g[0]),i(g[1])]),h.push(g),s.push([u,j],[E,j]))}for(s.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=h[e[1]],s=h[t[1]];return l(n[0],s[0])||l(n[1],s[1])}),r=s.length-1;r>=0;--r){var r,d,u,h,p,j,y,_,w,x,f=t[u=(y=s[r])[0]],b=f[0],m=f[1],O=e[b],C=e[m];(O[0]-C[0]||O[1]-C[1])<0&&(x=b,b=m,m=x),f[0]=b,d=f[1]=y[1];for(a&&(w=f[2]);r>0&&s[r-1][0]===u;)p=(y=s[--r])[1],a?t.push([d,p,w]):t.push([d,p]),d=p;a?t.push([d,m,w]):t.push([d,m])}return h}(e,t,f,p,n),g=d(e,b);return u(t,g,n),!!g||f.length>0||p.length>0}},3637:function(e,t,n){"use strict";e.exports=function(e,t,n,o){var a=s(t,e),u=s(o,n),h=i(a,u);if(0===r(h))return null;var m=i(u,s(e,n)),f=d(m,h),p=l(a,f);return c(e,p)};var o=n(6504),d=n(8697),a=n(5572),r=n(7721),s=n(544),c=n(2653),l=n(8987);function i(e,t){return a(o(e[0],t[1]),o(e[1],t[0]))}},3642:function(e){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(e,t,n){"use strict";var o=n(3642),s=n(395);function i(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function a(e){for(var t,s="#",n=0;n<3;++n)s+=("00"+(t=(t=e[n]).toString(16))).substr(t.length);return s}function r(e){return"rgba("+e.join(",")+")"}e.exports=function(e){if(e||(e={}),b=(e.nshades||72)-1,p=e.format||"hex",(t=e.colormap)||(t="jet"),"string"==typeof t){if(t=t.toLowerCase(),!o[t])throw Error(t+" not a supported colorscale");n=o[t]}else{if(!Array.isArray(t))throw Error("unsupported colormap option",t);n=t.slice()}if(n.length>b+1)throw new Error(t+" map requires nshades to be at least size "+n.length);c=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1],f=n.map(function(e){return Math.round(e.index*b)}),c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1);var t,n,c,d,u,h,m,f,p,g,v,b,j=n.map(function(e,t){var o=n[t].index,s=n[t].rgb.slice();return 4===s.length&&s[3]>=0&&s[3]<=1||(s[3]=c[0]+(c[1]-c[0])*o),s}),l=[];for(d=0;d<f.length-1;++d){v=f[d+1]-f[d],u=j[d],h=j[d+1];for(g=0;g<v;g++)m=g/v,l.push([Math.round(s(u[0],h[0],m)),Math.round(s(u[1],h[1],m)),Math.round(s(u[2],h[2],m)),s(u[3],h[3],m)])}return l.push(n[n.length-1].rgb.concat(c[1])),"hex"===p?l=l.map(a):"rgbaString"===p?l=l.map(r):"float"===p&&(l=l.map(i)),l}},3140:function(e,t,n){"use strict";e.exports=function(e,t,n,i){if(c=s(t,n,i),0===c){var c,d,u,r=a(s(e,t,n)),l=a(s(e,t,i));return r===l?0===r?(d=o(e,t,n),d===o(e,t,i)?0:d?1:-1):0:0===l?r>0||o(e,t,i)?-1:1:0===r?l>0||o(e,t,n)?1:-1:a(l-r)}return u=s(e,t,n),u>0?c>0&&s(e,t,i)>0?1:-1:u<0?c>0||s(e,t,i)>0?1:-1:s(e,t,i)>0||o(e,t,n)?1:-1};var s=n(3250),a=n(8572),i=n(9362),r=n(5382),c=n(8210);function o(e,t,n){var o=i(e[0],-t[0]),a=i(e[1],-t[1]),l=i(n[0],-t[0]),d=i(n[1],-t[1]),s=c(r(o,l),r(a,d));return s[s.length-1]>=0}},8572:function(e){"use strict";e.exports=function(e){return e<0?-1:e>0?1:0}},8507:function(e){e.exports=function(e,s){if(b=e.length,h=e.length-s.length,h)return h;switch(b){case 0:return 0;case 1:return e[0]-s[0];case 2:return e[0]+e[1]-s[0]-s[1]||t(e[0],e[1])-t(s[0],s[1]);case 3:return v=e[0]+e[1],g=s[0]+s[1],(h=v+e[2]-(g+s[2]))||(p=t(e[0],e[1]),f=t(s[0],s[1]),t(p,e[2])-t(f,s[2])||t(p+e[2],v)-t(f+s[2],g));case 4:var h,f,p,g,v,b,d=e[0],a=e[1],u=e[2],i=e[3],o=s[0],l=s[1],c=s[2],r=s[3];return d+a+u+i-(o+l+c+r)||t(d,a,u,i)-t(o,l,c,r,o)||t(d+a,d+u,d+i,a+u,a+i,u+i)-t(o+l,o+c,o+r,l+c,l+r,c+r)||t(d+a+u,d+a+i,d+u+i,a+u+i)-t(o+l+c,o+l+r,o+c+r,l+c+r);default:for(var j=e.slice().sort(n),y=s.slice().sort(n),m=0;m<b;++m)if(h=j[m]-y[m])return h;return 0}};var t=Math.min;function n(e,t){return e-t}},3788:function(e,t,n){"use strict";var o=n(8507),s=n(2419);e.exports=function(e,t){return o(e,t)||s(e)-s(t)}},7352:function(e,t,n){"use strict";var s=n(5721),o=n(4750),i=n(2690);e.exports=function(e){var t,n=e.length;return 0===n?[]:1===n?[[0]]:(t=e[0].length,0===t?[]:1===t?s(e):2===t?o(e):i(e,t))}},5721:function(e){"use strict";e.exports=function(e){for(var t=0,n=0,s=1;s<e.length;++s)e[s][0]<e[t][0]&&(t=s),e[s][0]>e[n][0]&&(n=s);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}},4750:function(e,t,n){"use strict";e.exports=function(e){if(n=s(e),t=n.length,t<=2)return[];for(var t,n,i,a=new Array(t),r=n[t-1],o=0;o<t;++o)i=n[o],a[o]=[r,i],r=i;return a};var s=n(3090)},2690:function(e,t,n){"use strict";e.exports=function(e,t){try{return s(e,!0)}catch{var i,n=o(e);return n.length<=t?[]:(i=function(e,t){for(var i,o=e.length,s=new Array(o),n=0;n<t.length;++n)s[n]=e[t[n]];i=t.length;for(n=0;n<o;++n)t.indexOf(n)<0&&(s[i++]=e[n]);return s}(e,n),function(e,t){for(var n,s,o,i,c=e.length,a=t.length,r=0;r<c;++r)for(o=e[r],s=0;s<o.length;++s)if(n=o[s],n<a)o[s]=t[n];else{n-=a;for(i=0;i<a;++i)n>=t[i]&&(n+=1);o[s]=n}return e}(s(i,!0),n))}};var s=n(8954),o=n(3952)},4769:function(e){"use strict";e.exports=function(e,t,n,s,o,i){var a,r=o-1,m=o*o,c=r*r,l=(1+2*o)*c,d=o*c,u=m*(3-2*o),h=m*r;if(e.length){i||(i=new Array(e.length));for(a=e.length-1;a>=0;--a)i[a]=l*e[a]+d*t[a]+u*n[a]+h*s[a];return i}return l*e+d*t+u*n+h*s},e.exports.derivative=function(e,t,n,s,o,i){var a,r=6*o*o-6*o,c=3*o*o-4*o+1,l=-6*o*o+6*o,d=3*o*o-2*o;if(e.length){i||(i=new Array(e.length));for(a=e.length-1;a>=0;--a)i[a]=r*e[a]+c*t[a]+l*n[a]+d*s[a];return i}return r*e+c*t+l*n[a]+d*s}},7642:function(e,t,n){"use strict";var s=n(8954),o=n(1682);function i(e,t){this.point=e,this.index=t}function a(e,t){for(var s,o=e.point,i=t.point,a=o.length,n=0;n<a;++n)if(s=i[n]-o[n],s)return s;return 0}e.exports=function(e,t){if(c=e.length,0===c)return[];if(r=e[0].length,r<1)return[];if(1===r)return function(e,t,n){if(1===e)return n?[[-1,0]]:[];i=t.map(function(e,t){return[e[0],t]}),i.sort(function(e,t){return e[0]-t[0]});for(var i,a,r,s=new Array(e-1),o=1;o<e;++o)a=i[o-1],r=i[o],s[o-1]=[a[1],r[1]];return n&&s.push([-1,s[0][1]],[s[e-1][1],-1]),s}(c,e,t);for(var f=new Array(c),j=1,n=0;n<c;++n){for(var r,d,u,p,y=e[n],l=new Array(r+1),b=0,v=0;v<r;++v)p=y[v],l[v]=p,b+=p*p;l[r]=b,f[n]=new i(l,n),j=Math.max(b,j)}o(f,a);var c=f.length,g=new Array(c+r+1),h=new Array(c+r+1),_=(r+1)*(r+1)*j,m=new Array(r+1);for(n=0;n<=r;++n)m[n]=0;for(m[r]=_,g[0]=m.slice(),h[0]=-1,n=0;n<=r;++n)(l=m.slice())[n]=1,g[n+1]=l,h[n+1]=-1;for(n=0;n<c;++n)d=f[n],g[n+r+1]=d.point,h[n+r+1]=d.index;if(u=s(g,!1),u=t?u.filter(function(e){for(var n,s=0,t=0;t<=r;++t){if(n=h[e[t]],n<0&&++s>=2)return!1;e[t]=n}return!0}):u.filter(function(e){for(var n,t=0;t<=r;++t){if(n=h[e[t]],n<0)return!1;e[t]=n}return!0}),1&r)for(n=0;n<u.length;++n)l=(d=u[n])[0],d[0]=d[1],d[1]=l;return u}},2361:function(e){if(o=!1,"undefined"!=typeof Float64Array){var n,o,s=new Float64Array(1),t=new Uint32Array(s.buffer);s[0]=1,o=!0,1072693248===t[1]?(e.exports=function(e){return s[0]=e,[t[0],t[1]]},e.exports.pack=function(e,n){return t[0]=e,t[1]=n,s[0]},e.exports.lo=function(e){return s[0]=e,t[0]},e.exports.hi=function(e){return s[0]=e,t[1]}):1072693248===t[0]?(e.exports=function(e){return s[0]=e,[t[1],t[0]]},e.exports.pack=function(e,n){return t[1]=e,t[0]=n,s[0]},e.exports.lo=function(e){return s[0]=e,t[1]},e.exports.hi=function(e){return s[0]=e,t[0]}):o=!1}o||(n=new Buffer(8),e.exports=function(e){return n.writeDoubleLE(e,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},e.exports.pack=function(e,t){return n.writeUInt32LE(e,0,!0),n.writeUInt32LE(t,4,!0),n.readDoubleLE(0,!0)},e.exports.lo=function(e){return n.writeDoubleLE(e,0,!0),n.readUInt32LE(0,!0)},e.exports.hi=function(e){return n.writeDoubleLE(e,0,!0),n.readUInt32LE(4,!0)}),e.exports.sign=function(t){return e.exports.hi(t)>>>31},e.exports.exponent=function(t){return(e.exports.hi(t)<<1>>>21)-1023},e.exports.fraction=function(t){var o=e.exports.lo(t),n=e.exports.hi(t),s=1048575&n;return 2146435072&n&&(s+=1<<20),[o,s]},e.exports.denormalized=function(t){return!(2146435072&e.exports.hi(t))}},1338:function(e){"use strict";function t(e,n,s){var o,a,i=0|e[s];if(i<=0)return[];if(a=new Array(i),s===e.length-1)for(o=0;o<i;++o)a[o]=n;else for(o=0;o<i;++o)a[o]=t(e,n,s+1);return a}e.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(e,t){var n,s;for(s=new Array(e),n=0;n<e;++n)s[n]=t;return s}(0|e,n);break;case"object":if("number"==typeof e.length)return t(e,n,0)}return[]}},3134:function(e,t,n){"use strict";e.exports=function(e,t){var n,o,i,a,r=e.length;if("number"!=typeof t){t=0;for(n=0;n<r;++n)o=e[n],t=Math.max(t,o[0],o[1]);t=1+(0|t)}t|=0,i=new Array(t);for(n=0;n<t;++n)i[n]=[];for(n=0;n<r;++n)i[(o=e[n])[0]].push(o[1]),i[o[1]].push(o[0]);for(a=0;a<t;++a)s(i[a],function(e,t){return e-t});return i};var s=n(1682)},5033:function(e){"use strict";e.exports=function(e,t,n){var s=t||0,o=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[s*e[12]+e[8],s*e[13]+e[9],s*e[14]+e[10],s*e[15]+e[11]],[o*e[12]-e[8],o*e[13]-e[9],o*e[14]-e[10],o*e[15]-e[11]]]}},9215:function(e,t,n){"use strict";e.exports=function(e,t,n){switch(arguments.length){case 0:return new i([0],[0],0);case 1:return"number"==typeof e?new i(s=r(e),s,0):new i(e,r(e.length),0);case 2:var s;if("number"==typeof t)return new i(e,s=r(e.length),+t);n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new i(e,t,n)}};var s,c=n(4769),a=n(2478);function o(e,t,n){return Math.min(t,Math.max(e,n))}function i(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var s=0;s<this.dimension;++s)this.bounds[0][s]=-1/0,this.bounds[1][s]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}s=i.prototype;function r(e){for(var n=new Array(e),t=0;t<e;++t)n[t]=0;return n}s.flush=function(e){var t=a.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},s.curve=function(e){var t,n,b,w,O,l=this._time,_=l.length,d=a.le(l,e),i=this._scratch[0],r=this._state,f=this._velocity,s=this.dimension,y=this.bounds;if(d<0)for(n=s-1,t=0;t<s;++t,--n)i[t]=r[n];else if(d>=_-1){n=r.length-1,b=e-l[_-1];for(t=0;t<s;++t,--n)i[t]=r[n]+b*f[n]}else{n=s*(d+1)-1;var j=l[d],g=l[d+1]-j||1,h=this._scratch[1],v=this._scratch[2],u=this._scratch[3],m=this._scratch[4],p=!0;for(t=0;t<s;++t,--n)h[t]=r[n],u[t]=f[n]*g,v[t]=r[n+s],m[t]=f[n+s]*g,p=p&&h[t]===v[t]&&u[t]===m[t]&&0===u[t];if(p)for(t=0;t<s;++t)i[t]=h[t];else c(h,u,v,m,(e-j)/g,i)}w=y[0],O=y[1];for(t=0;t<s;++t)i[t]=o(w[t],O[t],i[t]);return i},s.dcurve=function(e){var t,n,i=this._time,v=i.length,r=a.le(i,e),o=this._scratch[0],h=this._state,u=this._velocity,s=this.dimension;if(r>=v-1)for(n=h.length-1,t=(i[v-1],0);t<s;++t,--n)o[t]=u[n];else{n=s*(r+1)-1;var b=i[r],l=i[r+1]-b||1,p=this._scratch[1],g=this._scratch[2],d=this._scratch[3],m=this._scratch[4],f=!0;for(t=0;t<s;++t,--n)p[t]=h[n],d[t]=u[n]*l,g[t]=h[n+s],m[t]=u[n+s]*l,f=f&&p[t]===g[t]&&d[t]===m[t]&&0===d[t];if(f)for(t=0;t<s;++t)o[t]=0;else for(c.derivative(p,d,g,m,(e-b)/l,o),t=0;t<s;++t)o[t]/=l}return o},s.lastT=function(){var e=this._time;return e[e.length-1]},s.stable=function(){for(var e=this._velocity,n=e.length,t=this.dimension-1;t>=0;--t)if(e[--n])return!1;return!0},s.jump=function(e){if(i=this.lastT(),n=this.dimension,!(e<i||arguments.length!==n+1)){var t,n,i,a,s=this._state,c=this._velocity,l=s.length-this.dimension,r=this.bounds,d=r[0],u=r[1];this._time.push(i,e);for(a=0;a<2;++a)for(t=0;t<n;++t)s.push(s[l++]),c.push(0);for(this._time.push(e),t=n;t>0;--t)s.push(o(d[t-1],u[t-1],arguments[t])),c.push(0)}},s.push=function(e){if(n=this.lastT(),s=this.dimension,!(e<n||arguments.length!==s+1)){var t,n,s,a,i=this._state,l=this._velocity,m=i.length-this.dimension,c=e-n,r=this.bounds,d=r[0],u=r[1],h=c>1e-6?1/c:0;this._time.push(e);for(t=s;t>0;--t)a=o(d[t-1],u[t-1],arguments[t]),i.push(a),l.push((a-i[m++])*h)}},s.set=function(e){if(n=this.dimension,!(e<this.lastT()||arguments.length!==n+1)){var t,n,i=this._state,a=this._velocity,s=this.bounds,r=s[0],c=s[1];this._time.push(e);for(t=n;t>0;--t)i.push(o(r[t-1],c[t-1],arguments[t])),a.push(0)}},s.move=function(e){if(n=this.lastT(),s=this.dimension,!(e<=n||arguments.length!==s+1)){var t,n,s,a,i=this._state,l=this._velocity,m=i.length-this.dimension,c=this.bounds,d=c[0],u=c[1],r=e-n,h=r>1e-6?1/r:0;this._time.push(e);for(t=s;t>0;--t)a=arguments[t],i.push(o(d[t-1],u[t-1],i[m++]+a)),l.push(a*h)}},s.idle=function(e){if(n=this.lastT(),!(e<n)){var t,n,a=this.dimension,s=this._state,c=this._velocity,i=s.length-a,r=this.bounds,l=r[0],d=r[1],u=e-n;this._time.push(e);for(t=a-1;t>=0;--t)s.push(o(l[t],d[t],s[i]+u*c[i])),c.push(0),i+=1}}},3840:function(e){"use strict";function i(e,t,n,s,o,i){this._color=e,this.key=t,this.value=n,this.left=s,this.right=o,this._count=i}function a(e){return new i(e._color,e.key,e.value,e.left,e.right,e._count)}function r(e,t){return new i(e,t.key,t.value,t.left,t.right,t._count)}function t(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function c(e,t){this._compare=e,this.root=t}e.exports=function(e){return new c(e||m,null)};var o,n=c.prototype;function l(e,t){var n;return t.left&&(n=l(e,t.left))?n:(n=e(t.key,t.value))||(t.right?l(e,t.right):void 0)}function u(e,t,n,s){if(t(e,s.key)<=0){var o;if(s.left&&(o=u(e,t,n,s.left)))return o;if(o=n(s.key,s.value))return o}if(s.right)return u(e,t,n,s.right)}function d(e,t,n,s,o){var i,r=n(e,o.key),a=n(t,o.key);if(r<=0){if(o.left&&(i=d(e,t,n,s,o.left)))return i;if(a>0&&(i=s(o.key,o.value)))return i}if(a>0&&o.right)return d(e,t,n,s,o.right)}function s(e,t){this.tree=e,this._stack=t}Object.defineProperty(n,"keys",{get:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}}),Object.defineProperty(n,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(n,"length",{get:function(){return this.root?this.root._count:0}}),n.insert=function(e,n){for(var o,a,l,u,h,m,f=this._compare,s=this.root,d=[],p=[];s;)m=f(e,s.key),d.push(s),p.push(m),s=m<=0?s.left:s.right;d.push(new i(0,e,n,null,null,1));for(o=d.length-2;o>=0;--o)s=d[o],p[o]<=0?d[o]=new i(s._color,s.key,s.value,d[o+1],s.right,s._count+1):d[o]=new i(s._color,s.key,s.value,s.left,d[o+1],s._count+1);for(o=d.length-1;o>1;--o){if(l=d[o-1],s=d[o],1===l._color||1===s._color)break;if(a=d[o-2],a.left===l)if(l.left===s){if(!(h=a.right)||0!==h._color){a._color=0,a.left=l.right,l._color=1,l.right=a,d[o-2]=l,d[o-1]=s,t(a),t(l),o>=3&&((u=d[o-3]).left===a?u.left=l:u.right=l);break}l._color=1,a.right=r(1,h),a._color=0,o-=1}else{if(!(h=a.right)||0!==h._color){l.right=s.left,a._color=0,a.left=s.right,s._color=1,s.left=l,s.right=a,d[o-2]=s,d[o-1]=l,t(a),t(l),t(s),o>=3&&((u=d[o-3]).left===a?u.left=s:u.right=s);break}l._color=1,a.right=r(1,h),a._color=0,o-=1}else if(l.right===s){if(!(h=a.left)||0!==h._color){a._color=0,a.right=l.left,l._color=1,l.left=a,d[o-2]=l,d[o-1]=s,t(a),t(l),o>=3&&((u=d[o-3]).right===a?u.right=l:u.left=l);break}l._color=1,a.left=r(1,h),a._color=0,o-=1}else{if(!(h=a.left)||0!==h._color){l.left=s.right,a._color=0,a.right=s.left,s._color=1,s.right=l,s.left=a,d[o-2]=s,d[o-1]=l,t(a),t(l),t(s),o>=3&&((u=d[o-3]).right===a?u.right=s:u.left=s);break}l._color=1,a.left=r(1,h),a._color=0,o-=1}}return d[0]._color=1,new c(f,d[0])},n.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return l(e,this.root);case 2:return u(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return d(t,n,this._compare,e,this.root)}},Object.defineProperty(n,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new s(this,t)}}),Object.defineProperty(n,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new s(this,t)}}),n.at=function(e){if(e<0)return new s(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new s(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new s(this,[])},n.ge=function(e){for(var o,a=this._compare,t=this.root,n=[],i=0;t;)o=a(e,t.key),n.push(t),o<=0&&(i=n.length),t=o<=0?t.left:t.right;return n.length=i,new s(this,n)},n.gt=function(e){for(var o,a=this._compare,t=this.root,n=[],i=0;t;)o=a(e,t.key),n.push(t),o<0&&(i=n.length),t=o<0?t.left:t.right;return n.length=i,new s(this,n)},n.lt=function(e){for(var o,a=this._compare,t=this.root,n=[],i=0;t;)o=a(e,t.key),n.push(t),o>0&&(i=n.length),t=o<=0?t.left:t.right;return n.length=i,new s(this,n)},n.le=function(e){for(var o,a=this._compare,t=this.root,n=[],i=0;t;)o=a(e,t.key),n.push(t),o>=0&&(i=n.length),t=o<0?t.left:t.right;return n.length=i,new s(this,n)},n.find=function(e){for(var n,i=this._compare,t=this.root,o=[];t;){if(n=i(e,t.key),o.push(t),0===n)return new s(this,o);t=n<=0?t.left:t.right}return new s(this,[])},n.remove=function(e){var t=this.find(e);return t?t.remove():this},n.get=function(e){for(var n,s=this._compare,t=this.root;t;){if(n=s(e,t.key),0===n)return t.value;t=n<=0?t.left:t.right}},o=s.prototype;function h(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function m(e,t){return e<t?-1:e>t?1:0}Object.defineProperty(o,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(o,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),o.clone=function(){return new s(this.tree,this._stack.slice())},o.remove=function(){if(o=this._stack,0===o.length)return this.tree;var s,o,l,d,u,m,n=new Array(o.length),e=o[o.length-1];n[n.length-1]=new i(e._color,e.key,e.value,e.left,e.right,e._count);for(s=o.length-2;s>=0;--s)(e=o[s]).left===o[s+1]?n[s]=new i(e._color,e.key,e.value,n[s+1],e.right,e._count):n[s]=new i(e._color,e.key,e.value,e.left,n[s+1],e._count);if((e=n[n.length-1]).left&&e.right){l=n.length;for(e=e.left;e.right;)n.push(e),e=e.right;m=n[l-1];for(n.push(new i(e._color,m.key,m.value,e.left,e.right,e._count)),n[l-1].key=e.key,n[l-1].value=e.value,s=n.length-2;s>=l;--s)e=n[s],n[s]=new i(e._color,e.key,e.value,e.left,n[s+1],e._count);n[l-1].left=n[l]}if(0===(e=n[n.length-1])._color){d=n[n.length-2];for(d.left===e?d.left=null:d.right===e&&(d.right=null),n.pop(),s=0;s<n.length;++s)n[s]._count--;return new c(this.tree._compare,n[0])}if(e.left||e.right){for(e.left?h(e,e.left):e.right&&h(e,e.right),e._color=1,s=0;s<n.length-1;++s)n[s]._count--;return new c(this.tree._compare,n[0])}if(1===n.length)return new c(this.tree._compare,null);for(s=0;s<n.length;++s)n[s]._count--;return u=n[n.length-2],function(e){for(var n,s,i,c,l,o=e.length-1;o>=0;--o){if(l=e[o],0===o)return void(l._color=1);if((s=e[o-1]).left===l){if((n=s.right).right&&0===n.right._color)return i=(n=s.right=a(n)).right=a(n.right),s.right=n.left,n.left=s,n.right=i,n._color=s._color,l._color=1,s._color=1,i._color=1,t(s),t(n),o>1&&((c=e[o-2]).left===s?c.left=n:c.right=n),void(e[o-1]=n);if(n.left&&0===n.left._color)return i=(n=s.right=a(n)).left=a(n.left),s.right=i.left,n.left=i.right,i.left=s,i.right=n,i._color=s._color,s._color=1,n._color=1,l._color=1,t(s),t(n),t(i),o>1&&((c=e[o-2]).left===s?c.left=i:c.right=i),void(e[o-1]=i);if(1===n._color){if(0===s._color)return s._color=1,void(s.right=r(0,n));s.right=r(0,n);continue}n=a(n),s.right=n.left,n.left=s,n._color=s._color,s._color=0,t(s),t(n),o>1&&((c=e[o-2]).left===s?c.left=n:c.right=n),e[o-1]=n,e[o]=s,o+1<e.length?e[o+1]=l:e.push(l),o+=2}else{if((n=s.left).left&&0===n.left._color)return i=(n=s.left=a(n)).left=a(n.left),s.left=n.right,n.right=s,n.left=i,n._color=s._color,l._color=1,s._color=1,i._color=1,t(s),t(n),o>1&&((c=e[o-2]).right===s?c.right=n:c.left=n),void(e[o-1]=n);if(n.right&&0===n.right._color)return i=(n=s.left=a(n)).right=a(n.right),s.left=i.right,n.right=i.left,i.right=s,i.left=n,i._color=s._color,s._color=1,n._color=1,l._color=1,t(s),t(n),t(i),o>1&&((c=e[o-2]).right===s?c.right=i:c.left=i),void(e[o-1]=i);if(1===n._color){if(0===s._color)return s._color=1,void(s.left=r(0,n));s.left=r(0,n);continue}n=a(n),s.left=n.right,n.right=s,n._color=s._color,s._color=0,t(s),t(n),o>1&&((c=e[o-2]).right===s?c.right=n:c.left=n),e[o-1]=n,e[o]=s,o+1<e.length?e[o+1]=l:e.push(l),o+=2}}}(n),u.left===e?u.left=null:u.right=null,new c(this.tree._compare,n[0])},Object.defineProperty(o,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(o,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(o,"index",{get:function(){var t,s,n=0,e=this._stack;if(0===e.length)return s=this.tree.root,s?s._count:0;e[e.length-1].left&&(n=e[e.length-1].left._count);for(t=e.length-2;t>=0;--t)e[t+1]===e[t].right&&(++n,e[t].left&&(n+=e[t].left._count));return n},enumerable:!0}),o.next=function(){var t,e=this._stack;if(0!==e.length)if(t=e[e.length-1],t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()},Object.defineProperty(o,"hasNext",{get:function(){var t,e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),o.update=function(e){if(s=this._stack,0===s.length)throw new Error("Can't update empty node!");var n,s,o=new Array(s.length),t=s[s.length-1];o[o.length-1]=new i(t._color,t.key,e,t.left,t.right,t._count);for(n=s.length-2;n>=0;--n)(t=s[n]).left===s[n+1]?o[n]=new i(t._color,t.key,t.value,o[n+1],t.right,t._count):o[n]=new i(t._color,t.key,t.value,t.left,o[n+1],t._count);return new c(this.tree._compare,o[0])},o.prev=function(){var t,e=this._stack;if(0!==e.length)if(t=e[e.length-1],t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()},Object.defineProperty(o,"hasPrev",{get:function(){var t,e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},3837:function(e,t,n){"use strict";e.exports=function(e,t){var n=new d(e);return n.update(t),n};var s,a,c,u,h=n(4935),g=n(501),p=n(5304),m=n(6429),l=n(6444),o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function d(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=p(e)}s=d.prototype;function i(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}s.update=function(e){function u(t,n,s){if(s in e){var i,a,o=e[s],r=this[s];(t?Array.isArray(o)&&Array.isArray(o[0]):Array.isArray(o))?this[s]=a=[n(o[0]),n(o[1]),n(o[2])]:this[s]=a=[n(o),n(o),n(o)];for(i=0;i<3;++i)if(a[i]!==r[i])return!0}return!1}e=e||{};var t,a,c,d,f,p,v,n=u.bind(this,!1,Number),o=u.bind(this,!1,Boolean),i=u.bind(this,!1,String),r=u.bind(this,!0,function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]}),s=!1,m=!1;if("bounds"in e)for(f=e.bounds,t=0;t<2;++t)for(a=0;a<3;++a)f[t][a]!==this.bounds[t][a]&&(m=!0),this.bounds[t][a]=f[t][a];if("ticks"in e)for(d=e.ticks,s=!0,this.autoTicks=!1,t=0;t<3;++t)this.tickSpacing[t]=0;else n("tickSpacing")&&(this.autoTicks=!0,m=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),m=!0,s=!0,this._firstInit=!1),m&&this.autoTicks&&(d=l.create(this.bounds,this.tickSpacing),s=!0),s){for(t=0;t<3;++t)d[t].sort(function(e,t){return e.x-t.x});l.equal(d,this.ticks)?s=!1:this.ticks=d}o("tickEnable"),i("tickFont")&&(s=!0),i("tickFontStyle")&&(s=!0),i("tickFontWeight")&&(s=!0),i("tickFontVariant")&&(s=!0),n("tickSize"),n("tickAngle"),n("tickPad"),r("tickColor"),c=i("labels"),i("labelFont")&&(c=!0),i("labelFontStyle")&&(c=!0),i("labelFontWeight")&&(c=!0),i("labelFontVariant")&&(c=!0),o("labelEnable"),n("labelSize"),n("labelPad"),r("labelColor"),o("lineEnable"),o("lineMirror"),n("lineWidth"),r("lineColor"),o("lineTickEnable"),o("lineTickMirror"),n("lineTickLength"),n("lineTickWidth"),r("lineTickColor"),o("gridEnable"),n("gridWidth"),r("gridColor"),o("zeroEnable"),r("zeroLineColor"),n("zeroLineWidth"),o("backgroundEnable"),r("backgroundColor"),p=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],v=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}],this._text?this._text&&(c||s)&&this._text.update(this.bounds,this.labels,p,this.ticks,v):this._text=h(this.gl,this.bounds,this.labels,p,this.ticks,v),this._lines&&s&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=g(this.gl,this.bounds,this.ticks))},a=[new i,new i,new i];function f(e,t,n,s,o){for(var c=e.primalOffset,l=e.primalMinor,h=e.mirrorOffset,m=e.mirrorMinor,f=s[t],i=0;i<3;++i)if(t!==i){var d=c,u=h,a=l,r=m;f&1<<i&&(d=h,u=c,a=m,r=l),d[i]=n[0][i],u[i]=n[1][i],o[i]>0?(a[i]=-1,r[i]=0):(a[i]=0,r[i]=1)}}u=[0,0,0],c={model:o,view:o,projection:o,_ortho:!1},s.isOpaque=function(){return!0},s.isTransparent=function(){return!1},s.drawTransparent=function(){};var v=[0,0,0],b=[0,0,0],j=[0,0,0];s.draw=function(e){e=e||c;for(var n,s,i,l,y,w,O,x,A,S,F,P=this.gl,h=e.model||o,p=e.view||o,g=e.projection||o,d=this.bounds,z=e._ortho||!1,D=m(h,p,g,d,z),T=D.cubeEdges,E=D.axis,H=p[12],B=p[13],$=p[14],W=p[15],C=(z?2:1)*this.pixelRatio*(g[3]*H+g[7]*B+g[11]*$+g[15]*W)/P.drawingBufferHeight,t=0;t<3;++t)this.lastCubeProps.cubeEdges[t]=T[t],this.lastCubeProps.axis[t]=E[t];l=a;for(t=0;t<3;++t)f(a[t],t,this.bounds,T,E);P=this.gl,A=u;for(t=0;t<3;++t)this.backgroundEnable[t]?A[t]=E[t]:A[t]=0;for(this._background.draw(h,p,g,d,A,this.backgroundColor),this._lines.bind(h,p,g,this),t=0;t<3;++t){x=[0,0,0],E[t]>0?x[t]=d[1][t]:x[t]=d[0][t];for(n=0;n<2;++n)y=(t+1+n)%3,s=(t+1+(1^n))%3,this.gridEnable[y]&&this._lines.drawGrid(y,s,this.bounds,x,this.gridColor[y],this.gridWidth[y]*this.pixelRatio);for(n=0;n<2;++n)y=(t+1+n)%3,s=(t+1+(1^n))%3,this.zeroEnable[s]&&Math.min(d[0][s],d[1][s])<=0&&Math.max(d[0][s],d[1][s])>=0&&this._lines.drawZero(y,s,this.bounds,x,this.zeroLineColor[s],this.zeroLineWidth[s]*this.pixelRatio)}for(t=0;t<3;++t){this.lineEnable[t]&&this._lines.drawAxisLine(t,this.bounds,l[t].primalOffset,this.lineColor[t],this.lineWidth[t]*this.pixelRatio),this.lineMirror[t]&&this._lines.drawAxisLine(t,this.bounds,l[t].mirrorOffset,this.lineColor[t],this.lineWidth[t]*this.pixelRatio);var N=r(v,l[t].primalMinor),L=r(b,l[t].mirrorMinor),R=this.lineTickLength;for(n=0;n<3;++n)S=C/h[5*n],N[n]*=R[n]*S,L[n]*=R[n]*S;this.lineTickEnable[t]&&this._lines.drawAxisTicks(t,l[t].primalOffset,N,this.lineTickColor[t],this.lineTickWidth[t]*this.pixelRatio),this.lineTickMirror[t]&&this._lines.drawAxisTicks(t,l[t].mirrorOffset,L,this.lineTickColor[t],this.lineTickWidth[t]*this.pixelRatio)}function M(e){(O=[0,0,0])[e]=1}function I(e,t,n){var r=(e+1)%3,c=(e+2)%3,s=t[r],o=t[c],i=n[r],a=n[c];s>0&&a>0||s>0&&a<0||s<0&&a>0||s<0&&a<0?M(r):(o>0&&i>0||o>0&&i<0||o<0&&i>0||o<0&&i<0)&&M(c)}for(this._lines.unbind(),this._text.bind(h,p,g,this.pixelRatio),t=0;t<3;++t){var k=l[t].primalMinor,V=l[t].mirrorMinor,_=r(j,l[t].primalOffset);for(n=0;n<3;++n)this.lineTickEnable[t]&&(_[n]+=C*k[n]*Math.max(this.lineTickLength[n],0)/h[5*n]);if(F=[0,0,0],F[t]=1,this.tickEnable[t]){for(-3600===this.tickAngle[t]?(this.tickAngle[t]=0,this.tickAlign[t]="auto"):this.tickAlign[t]=-1,w=1,"auto"===(i=[this.tickAlign[t],.5,w])[0]?i[0]=0:i[0]=parseInt(""+i[0]),O=[0,0,0],I(t,k,V),n=0;n<3;++n)_[n]+=C*k[n]*this.tickPad[n]/h[5*n];this._text.drawTicks(t,this.tickSize[t],this.tickAngle[t],_,this.tickColor[t],F,O,i)}if(this.labelEnable[t]){for(w=0,O=[0,0,0],this.labels[t].length>4&&(M(t),w=1),"auto"===(i=[this.labelAlign[t],.5,w])[0]?i[0]=0:i[0]=parseInt(""+i[0]),n=0;n<3;++n)_[n]+=C*k[n]*this.labelPad[n]/h[5*n];_[t]+=.5*(d[0][t]+d[1][t]),this._text.drawLabel(t,this.labelSize[t],this.labelAngle[t],_,this.labelColor[t],[0,0,0],O,i)}}this._text.unbind()},s.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(e,t,n){"use strict";e.exports=function(e){for(var b=[],v=[],t=0,s=0;s<3;++s)for(var l,u,g,h=(s+1)%3,m=(s+2)%3,n=[0,0,0],c=[0,0,0],d=-1;d<=1;d+=2){v.push(t,t+2,t+1,t+1,t+2,t+3),n[s]=d,c[s]=d;for(u=-1;u<=1;u+=2){n[h]=u;for(l=-1;l<=1;l+=2)n[m]=l,b.push(n[0],n[1],n[2],c[0],c[1],c[2]),t+=1}g=h,h=m,m=g}var f=o(e,new Float32Array(b)),j=o(e,new Uint16Array(v),e.ELEMENT_ARRAY_BUFFER),y=a(e,[{buffer:f,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:f,type:e.FLOAT,size:3,offset:12,stride:24}],j),p=r(e);return p.attributes.position.location=0,p.attributes.normal.location=1,new i(e,f,y,p)};var s,o=n(2762),a=n(8116),r=n(1879).bg;function i(e,t,n,s){this.gl=e,this.buffer=t,this.vao=n,this.shader=s}s=i.prototype,s.draw=function(e,t,n,s,o,i){for(var a,r=!1,c=0;c<3;++c)r=r||o[c];r&&(a=this.gl,a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:s,enable:o,colors:i},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),a.disable(a.POLYGON_OFFSET_FILL))},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(e,t,n){"use strict";e.exports=function(e,t,n,c,g){d(i,t,e),d(i,n,i);for(H=0,b=0;b<2;++b){a[2]=c[b][2];for(R=0;R<2;++R){a[1]=c[R][1];for(L=0;L<2;++L)a[0]=c[L][0],f(o[H],a,i),H+=1}}_=-1;for(b=0;b<8;++b){for(B=o[b][3],D=0;D<3;++D)s[b][D]=o[b][D]/B;g&&(s[b][2]*=-1),B<0&&(_<0||s[b][2]<s[_][2])&&(_=b)}if(_<0){_=0;for(y=0;y<3;++y){for(var b,y,_,w,O,x,C,E,k,S,F,D,N,L,R,P,H,I,B,V,$,T=(y+2)%3,A=(y+1)%3,M=-1,z=-1,j=0;j<2;++j)N=(S=j<<y)+(j<<T)+(1-j<<A),P=S+(1-j<<T)+(j<<A),h(s[S],s[N],s[P],m)<0||(j?M=1:z=1);if(M<0||z<0)z>M&&(_|=1<<y);else{for(j=0;j<2;++j)N=(S=j<<y)+(j<<T)+(1-j<<A),P=S+(1-j<<T)+(j<<A),I=p([o[S],o[N],o[P],o[S+(1<<T)+(1<<A)]]),j?M=I:z=I;z>M&&(_|=1<<y)}}}F=7^_,x=-1;for(b=0;b<8;++b)b!==_&&b!==F&&(x<0||s[x][1]>s[b][1])&&(x=b);w=-1;for(b=0;b<3;++b)(O=x^1<<b)!==_&&O!==F&&(w<0&&(w=O),(A=s[O])[0]<s[w][0]&&(w=O));C=-1;for(b=0;b<3;++b)(O=x^1<<b)!==_&&O!==F&&O!==w&&(C<0&&(C=O),(A=s[O])[0]>s[C][0]&&(C=O));k=l,k[0]=k[1]=k[2]=0,k[r.log2(w^x)]=x&w,k[r.log2(x^C)]=x&C,E=7^C,E===_||E===F?(E=7^w,k[r.log2(C^E)]=E&C):k[r.log2(w^E)]=E&w,V=u,$=_;for(y=0;y<3;++y)V[y]=$&1<<y?-1:1;return v};var c,r=n(8828),d=n(6760),g=n(5202),h=n(3250),i=new Array(16),o=new Array(8),s=new Array(8),a=new Array(3),m=[0,0,0];function f(e,t,n){for(var o,s=0;s<4;++s){e[s]=n[12+s];for(o=0;o<3;++o)e[s]+=t[o]*n[4*o+s]}}!function(){for(var e=0;e<8;++e)o[e]=[1,1,1,1],s[e]=[1,1,1]}(),c=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(e){for(t=0;t<c.length;++t)if((e=g.positive(e,c[t])).length<3)return 0;var n=e[0],i=n[0]/n[3],a=n[1]/n[3],r=0;for(t=1;t+1<e.length;++t){var t,s=e[t],o=e[t+1],l=s[0]/s[3]-i,d=s[1]/s[3]-a,u=o[0]/o[3]-i,h=o[1]/o[3]-a;r+=Math.abs(l*h-d*u)}return r}var l=[1,1,1],u=[0,0,0],v={cubeEdges:l,axis:u}},501:function(e,t,n){"use strict";e.exports=function(e,t,n){var s,o,a,r,c,l,i=[],v=[0,0,0],g=[0,0,0],p=[0,0,0],d=[0,0,0];i.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(o=0;o<3;++o){for(a=i.length/3|0,l=0;l<n[o].length;++l)s=+n[o][l].x,i.push(s,0,1,s,1,1,s,0,-1,s,0,-1,s,1,1,s,1,-1);c=i.length/3|0,v[o]=a,g[o]=c-a,a=i.length/3|0;for(r=0;r<n[o].length;++r)s=+n[o][r].x,i.push(s,0,1,s,1,1,s,0,-1,s,0,-1,s,1,1,s,1,-1);c=i.length/3|0,p[o]=a,d[o]=c-a}var b=h(e,new Float32Array(i)),y=m(e,[{buffer:b,type:e.FLOAT,size:3,stride:0,offset:0}]),j=f(e);return j.attributes.position.location=0,new u(e,b,y,j,g,v,d,p)};var o,h=n(2762),m=n(8116),f=n(1879).n,d=[0,0,0],a=[0,0,0],i=[0,0,0],r=[0,0,0],c=[1,1];function s(e){return e[0]=e[1]=e[2]=0,e}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function u(e,t,n,s,o,i,a,r){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=s,this.tickCount=o,this.tickOffset=i,this.gridCount=a,this.gridOffset=r}o=u.prototype,o.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},o.unbind=function(){this.vao.unbind()},o.drawAxisLine=function(e,t,n,o,c){var d,u,h=s(a);this.shader.uniforms.majorAxis=a,h[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=h,u=l(r,n),u[e]+=t[0][e],this.shader.uniforms.offset=u,this.shader.uniforms.lineWidth=c,this.shader.uniforms.color=o,(d=s(i))[(e+2)%3]=1,this.shader.uniforms.screenAxis=d,this.vao.draw(this.gl.TRIANGLES,6),(d=s(i))[(e+1)%3]=1,this.shader.uniforms.screenAxis=d,this.vao.draw(this.gl.TRIANGLES,6)},o.drawAxisTicks=function(e,t,n,o,a){if(this.tickCount[e]){var r,c=s(d);c[e]=1,this.shader.uniforms.majorAxis=c,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=o,this.shader.uniforms.lineWidth=a,r=s(i),r[e]=1,this.shader.uniforms.screenAxis=r,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}},o.drawGrid=function(e,t,n,o,c,u){if(this.gridCount[e]){var h,m,f,p=s(a);p[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=p,h=l(r,o),h[t]+=n[0][t],this.shader.uniforms.offset=h,m=s(d),m[e]=1,this.shader.uniforms.majorAxis=m,f=s(i),f[e]=1,this.shader.uniforms.screenAxis=f,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=c,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}},o.drawZero=function(e,t,n,o,c,d){var h,m,u=s(a);this.shader.uniforms.majorAxis=u,u[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=u,h=l(r,o),h[e]+=n[0][e],this.shader.uniforms.offset=h,m=s(i),m[t]=1,this.shader.uniforms.screenAxis=m,this.shader.uniforms.lineWidth=d,this.shader.uniforms.color=c,this.vao.draw(this.gl.TRIANGLES,6)},o.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(e,t,n){"use strict";var i,a,r,c,s=n(3236),o=n(9405),l=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),d=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);t.n=function(e){return o(e,l,d,null,[{name:"position",type:"vec3"}])},i=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),a=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]),t.Q=function(e){return o(e,i,a,null,[{name:"position",type:"vec3"}])},r=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]),t.bg=function(e){return o(e,r,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(e,t,n){"use strict";e.exports=function(e,t,n,s,o,i){var r,c=d(e),m=u(e,[{buffer:c,size:3}]),h=l(e);return h.attributes.position.location=0,r=new a(e,h,c,m),r.update(t,n,s,o,i),r};var o,i,d=n(2762),u=n(8116),h=n(4359),l=n(1879).Q,r=window||s.global||{},c=r.__TEXT_CACHE||{};function a(e,t,n,s){this.gl=e,this.shader=t,this.buffer=n,this.vao=s,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}r.__TEXT_CACHE={},o=a.prototype,i=[0,0],o.bind=function(e,t,n,s){this.vao.bind(),this.shader.bind();var o=this.shader.uniforms;o.model=e,o.view=t,o.projection=n,o.pixelScale=s,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=i},o.unbind=function(){this.vao.unbind()},o.update=function(e,t,n,s,o){r=[];function p(e,t,n,s,o,i){u=[n.style,n.weight,n.variant,n.family].join("_"),a=c[u],a||(a=c[u]={}),l=a[t],l||(l=a[t]=function(e,t){try{return h(e,t)}catch(t){return console.warn('error vectorizing text:"'+e+'" error:',t),{cells:[],positions:[]}}}(t,{triangles:!0,font:n.family,fontStyle:n.style,fontWeight:n.weight,fontVariant:n.variant,textAlign:"center",textBaseline:"middle",lineSpacing:o,styletags:i}));for(var a,l,d,u,m,g,v=(s||12)/12,j=l.positions,p=l.cells,f=0,b=p.length;f<b;++f)for(g=p[f],d=2;d>=0;--d)m=j[g[d]],r.push(v*m[0],-v*m[1],e)}for(var a,r,g,d=[0,0,0],u=[0,0,0],l=[0,0,0],m=[0,0,0],f={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},i=0;i<3;++i){l[i]=r.length/3|0,p(.5*(e[0][i]+e[1][i]),t[i],n[i],12,1.25,f),m[i]=(r.length/3|0)-l[i],d[i]=r.length/3|0;for(a=0;a<s[i].length;++a)s[i][a].text&&(g={family:s[i][a].font||o[i].family,style:o[i].fontStyle||o[i].style,weight:o[i].fontWeight||o[i].weight,variant:o[i].fontVariant||o[i].variant},p(s[i][a].x,s[i][a].text,g,s[i][a].fontSize||12,1.25,f));u[i]=(r.length/3|0)-d[i]}this.buffer.update(r),this.tickOffset=d,this.tickCount=u,this.labelOffset=l,this.labelCount=m},o.drawTicks=function(e,t,n,s,o,i,a,r){this.tickCount[e]&&(this.shader.uniforms.axis=i,this.shader.uniforms.color=o,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=s,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=r,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e]))},o.drawLabel=function(e,t,n,s,o,i,a,r){this.labelCount[e]&&(this.shader.uniforms.axis=i,this.shader.uniforms.color=o,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=s,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=r,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},o.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(e,t){"use strict";function n(e,t){var n,s,o,i,d=e+"",u=d.indexOf("."),r=0;u>=0&&(r=d.length-u-1);var c=Math.pow(10,r),a=Math.round(e*t*c),l=a+"";if(l.indexOf("e")>=0)return l;if(n=a/c,s=a%c,a<0?(n=0|-Math.ceil(n),s=0|-s):(n=0|Math.floor(n),s|=0),o=""+n,a<0&&(o="-"+o),r){for(i=""+s;i.length<r;)i="0"+i;return o+"."+i}return o}t.create=function(e,t){for(var o,i,a=[],s=0;s<3;++s){for(i=[],o=(e[0][s],e[1][s],0);o*t[s]<=e[1][s];++o)i.push({x:o*t[s],text:n(t[s],o)});for(o=-1;o*t[s]>=e[0][s];--o)i.push({x:o*t[s],text:n(t[s],o)});a.push(i)}return a},t.equal=function(e,t){for(n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(i=0;i<e[n].length;++i){var n,i,s=e[n][i],o=t[n][i];if(s.x!==o.x||s.text!==o.text||s.font!==o.font||s.fontColor!==o.fontColor||s.fontSize!==o.fontSize||s.dx!==o.dx||s.dy!==o.dy)return!1}}return!0}},5445:function(e,t,n){"use strict";e.exports=function(e,t,n,i,c){var d,u,v,b,j,y,x,k,F,C=t.model||o,M=t.view||o,S=t.projection||o,A=t._ortho||!1,w=e.bounds,T=(c=c||m(C,M,S,w,A)).axis;l(s,M,C),l(s,S,s);for(b=h,v=0;v<3;++v)b[v].lo=1/0,b[v].hi=-1/0,b[v].pixelsPerDataUnit=1/0;k=g(r(s,s)),r(s,s);for(j=0;j<3;++j){var E=(j+1)%3,_=(j+2)%3,O=a;t:for(v=0;v<2;++v)if(y=[],T[j]<0!=!!v){O[j]=w[v][j];for(u=0;u<2;++u){O[E]=w[u^v][E];for(d=0;d<2;++d)O[_]=w[d^u^v][_],y.push(O.slice())}x=A?5:4;for(u=x;u===x;++u){if(0===y.length)continue t;y=f.positive(y,k[u])}for(u=0;u<y.length;++u){_=y[u],F=p(a,s,_,n,i);for(d=0;d<3;++d)b[d].lo=Math.min(b[d].lo,_[d]),b[d].hi=Math.max(b[d].hi,_[d]),d!==j&&(b[d].pixelsPerDataUnit=Math.min(b[d].pixelsPerDataUnit,Math.abs(F[d])))}}}return b};var a,d,u,h,g=n(5033),f=n(5202),m=n(6429),l=n(6760),r=n(5665),c=n(5352),o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=new Float32Array(16);function i(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}d=[0,0,0,1],u=[0,0,0,1];function p(e,t,n,s,o){for(r=0;r<3;++r){for(var r,h,m,i=d,a=u,l=0;l<3;++l)a[l]=i[l]=n[l];a[3]=i[3]=1,a[r]+=1,c(a,a,t),a[3]<0&&(e[r]=1/0),i[r]-=1,c(i,i,t),i[3]<0&&(e[r]=1/0),h=(i[0]/i[3]-a[0]/a[3])*s,m=(i[1]/i[3]-a[1]/a[3])*o,e[r]=.25*Math.sqrt(h*h+m*m)}return e}h=[new i(1/0,-1/0,1/0),new i(1/0,-1/0,1/0),new i(1/0,-1/0,1/0)],a=[0,0,0]},2762:function(e,t,n){"use strict";var o,i=n(1888),d=n(5298),c=n(9618),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(e,t,n,s,o){this.gl=e,this.type=t,this.handle=n,this.length=s,this.usage=o}o=r.prototype;function s(e,t,n,s,o,i){var a=o.length*o.BYTES_PER_ELEMENT;if(i<0)return e.bufferData(t,o,s),a;if(a+i>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,i,o),n}function a(e,t){for(var s=i.malloc(e.length,t),o=e.length,n=0;n<o;++n)s[n]=e[n];return s}o.bind=function(){this.gl.bindBuffer(this.type,this.handle)},o.unbind=function(){this.gl.bindBuffer(this.type,null)},o.dispose=function(){this.gl.deleteBuffer(this.handle)},o.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&void 0!==e.shape)if(n=e.dtype,l.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(n=gl.getExtension("OES_element_index_uint")&&"uint16"!==n?"uint32":"uint16"),n===e.dtype&&function(e,t){for(var s=1,n=t.length-1;n>=0;--n){if(t[n]!==s)return!1;s*=e[n]}return!0}(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,e.data,t):this.length=s(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var n,r,o=i.malloc(e.size,n),u=c(o,e.shape);d.assign(u,e),this.length=s(this.gl,this.type,this.length,this.usage,t<0?o:o.subarray(0,e.size),t),i.free(o)}else if(Array.isArray(e))r=this.type===this.gl.ELEMENT_ARRAY_BUFFER?a(e,"uint16"):a(e,"float32"),this.length=s(this.gl,this.type,this.length,this.usage,t<0?r:r.subarray(0,e.length),t),i.free(r);else if("object"==typeof e&&"number"==typeof e.length)this.length=s(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(e|=0)<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},e.exports=function(e,t,n,s){if(n=n||e.ARRAY_BUFFER,s=s||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(s!==e.DYNAMIC_DRAW&&s!==e.STATIC_DRAW&&s!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=e.createBuffer(),o=new r(e,n,i,0,s);return o.update(t),o}},6405:function(e,t,n){"use strict";var o,s=n(2931);e.exports=function(e,t){var g=e.positions,D=e.vectors,n={positions:[],vertexIntensity:[],vertexIntensityBounds:e.vertexIntensityBounds,vectors:[],cells:[],coneOffset:e.coneOffset,colormap:e.colormap};if(0===e.positions.length)return t&&(t[0]=[0,0,0],t[1]=[0,0,0]),n;for(var o,r,c,d,v,x,C,k,A,f=0,y=1/0,j=-1/0,E=1/0,O=-1/0,w=1/0,_=-1/0,F=null,M=null,S=[],p=1/0,b=!1,z="raw"===e.coneSizemode,i=0;i<g.length;i++)o=g[i],y=Math.min(o[0],y),j=Math.max(o[0],j),E=Math.min(o[1],E),O=Math.max(o[1],O),w=Math.min(o[2],w),_=Math.max(o[2],_),d=D[i],(s.length(d)>f&&(f=s.length(d)),i&&!z)&&(C=2*s.distance(F,o)/(s.length(M)+s.length(d)),C?(p=Math.min(p,C),b=!1):b=!0),b||(F=o,M=d),S.push(d);A=[y,E,w],k=[j,O,_],t&&(t[0]=A,t[1]=k),0===f&&(f=1),v=1/f,isFinite(p)||(p=1),n.vectorScale=p,x=e.coneSize||(z?1:.5),e.absoluteConeSize&&(x=e.absoluteConeSize*v),n.coneScale=x,i=0;for(r=0;i<g.length;i++)for(var l=(o=g[i])[0],m=o[1],h=o[2],a=S[i],u=s.length(a)*v,T=0;T<8;T++)n.positions.push([l,m,h,r++]),n.positions.push([l,m,h,r++]),n.positions.push([l,m,h,r++]),n.positions.push([l,m,h,r++]),n.positions.push([l,m,h,r++]),n.positions.push([l,m,h,r++]),n.vectors.push(a),n.vectors.push(a),n.vectors.push(a),n.vectors.push(a),n.vectors.push(a),n.vectors.push(a),n.vertexIntensity.push(u,u,u),n.vertexIntensity.push(u,u,u),c=n.positions.length,n.cells.push([c-6,c-5,c-4],[c-3,c-2,c-1]);return n},o=n(614),e.exports.createMesh=n(9060),e.exports.createConeMesh=function(t,n){return e.exports.createMesh(t,n,{shaders:o,traceType:"cone"})}},9060:function(e,t,n){"use strict";var s,a=n(9405),i=n(2762),h=n(8116),m=n(7766),d=n(6760),c=n(7608),l=n(9618),u=n(6729),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(e,t,n,s,i,a,r,c,l,d,u){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.pickShader=s,this.trianglePositions=i,this.triangleVectors=a,this.triangleColors=c,this.triangleUVs=l,this.triangleIds=r,this.triangleVAO=d,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=u,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=o,this._view=o,this._projection=o,this._resolution=[1,1]}s=r.prototype,s.isOpaque=function(){return this.opacity>=1},s.isTransparent=function(){return this.opacity<1},s.pickSlots=1,s.setPickBase=function(e){this.pickId=e},s.update=function(e){e=e||{},_=this.gl,this.dirty=!0,"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale),void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale),void 0!==e.coneScale&&(this.coneScale=e.coneScale),void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset),e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(function(e){for(var n,o,i=u({colormap:e,nshades:256,format:"rgba"}),s=new Uint8Array(1024),t=0;t<256;++t){for(o=i[t],n=0;n<3;++n)s[4*t+n]=o[n];s[4*t+3]=255*o[3]}return l(s,[256,256,4],[4,0,1])}(e.colormap)),this.texture.generateMipmap());var g=e.cells,i=e.positions,j=e.vectors;if(i&&g&&j){var t,n,s,a,c,h,m,f,p,b,y,_,w=[],O=[],v=[],C=[],x=[];this.cells=g,this.positions=i,this.vectors=j;var E=e.meshColor||[1,1,1,1],d=e.vertexIntensity,o=1/0,r=-1/0;if(d)if(e.vertexIntensityBounds)o=+e.vertexIntensityBounds[0],r=+e.vertexIntensityBounds[1];else for(n=0;n<d.length;++n)c=d[n],o=Math.min(o,c),r=Math.max(r,c);else for(n=0;n<i.length;++n)c=i[n][2],o=Math.min(o,c),r=Math.max(r,c);for(this.intensity=d||function(e){for(var n=e.length,s=new Array(n),t=0;t<n;++t)s[t]=e[t][2];return s}(i),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],n=0;n<i.length;++n)for(s=i[n],t=0;t<3;++t)!isNaN(s[t])&&isFinite(s[t])&&(this.bounds[0][t]=Math.min(this.bounds[0][t],s[t]),this.bounds[1][t]=Math.max(this.bounds[1][t],s[t]));y=0;t:for(n=0;n<g.length;++n)if(p=g[n],3===p.length){for(t=0;t<3;++t){s=i[f=p[t]];for(h=0;h<3;++h)if(isNaN(s[h])||!isFinite(s[h]))continue t}for(t=0;t<3;++t)s=i[f=p[2-t]],w.push(s[0],s[1],s[2],s[3]),m=j[f],O.push(m[0],m[1],m[2],m[3]||0),a=E,3===a.length?v.push(a[0],a[1],a[2],1):v.push(a[0],a[1],a[2],a[3]),b=d?[(d[f]-o)/(r-o),0]:[(s[2]-o)/(r-o),0],C.push(b[0],b[1]),x.push(n);y+=1}this.triangleCount=y,this.trianglePositions.update(w),this.triangleVectors.update(O),this.triangleColors.update(v),this.triangleUVs.update(C),this.triangleIds.update(new Uint32Array(x))}},s.drawTransparent=s.draw=function(e){e=e||{};for(var n,s,a,l,u,h,r=this.gl,m=e.model||o,f=e.view||o,p=e.projection||o,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],t=0;t<3;++t)i[0][t]=Math.max(i[0][t],this.clipBounds[0][t]),i[1][t]=Math.min(i[1][t],this.clipBounds[1][t]);s={model:m,view:f,projection:p,inverseModel:o.slice(),clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0},s.inverseModel=c(s.inverseModel,s.model),r.disable(r.CULL_FACE),this.texture.bind(0),n=new Array(16);for(d(n,s.view,s.model),d(n,s.projection,n),c(n,n),t=0;t<3;++t)s.eyePosition[t]=n[12+t]/n[15];l=n[15];for(t=0;t<3;++t)l+=this.lightPosition[t]*n[4*t+3];for(t=0;t<3;++t){for(u=n[12+t],a=0;a<3;++a)u+=n[4*a+t]*this.lightPosition[a];s.lightPosition[t]=u/l}this.triangleCount>0&&(h=this.triShader,h.bind(),h.uniforms=s,this.triangleVAO.bind(),r.drawArrays(r.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},s.drawPick=function(e){e=e||{};for(var i,c,s=this.gl,l=e.model||o,a=e.view||o,r=e.projection||o,n=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],t=0;t<3;++t)n[0][t]=Math.max(n[0][t],this.clipBounds[0][t]),n[1][t]=Math.min(n[1][t],this.clipBounds[1][t]);this._model=[].slice.call(l),this._view=[].slice.call(a),this._projection=[].slice.call(r),this._resolution=[s.drawingBufferWidth,s.drawingBufferHeight],c={model:l,view:a,projection:r,clipBounds:n,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},i=this.pickShader,i.bind(),i.uniforms=c,this.triangleCount>0&&(this.triangleVAO.bind(),s.drawArrays(s.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},s.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var s=e.value[0]+256*e.value[1]+65536*e.value[2],t=this.cells[s],o=this.positions[t[1]].slice(0,3),n={position:o,dataCoordinate:o,index:Math.floor(t[1]/48)};return"cone"===this.traceType?n.index=Math.floor(t[1]/48):"streamtube"===this.traceType&&(n.intensity=this.intensity[t[1]],n.velocity=this.vectors[t[1]].slice(0,3),n.divergence=this.vectors[t[1]][3],n.index=s),n},s.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},e.exports=function(e,t,n){o=n.shaders,1===arguments.length&&(e=(t=e).gl);var v=function(e,t){var n=a(e,t.meshShader.vertex,t.meshShader.fragment,null,t.meshShader.attributes);return n.attributes.position.location=0,n.attributes.color.location=2,n.attributes.uv.location=3,n.attributes.vector.location=4,n}(e,o),b=function(e,t){var n=a(e,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);return n.attributes.position.location=0,n.attributes.id.location=1,n.attributes.vector.location=4,n}(e,o),s=m(e,l(new Uint8Array([255,255,255,255]),[1,1,4]));s.generateMipmap(),s.minFilter=e.LINEAR_MIPMAP_LINEAR,s.magFilter=e.LINEAR;var o,u=i(e),f=i(e),p=i(e),c=i(e),d=i(e),g=new r(e,s,v,b,u,f,d,p,c,h(e,[{buffer:u,type:e.FLOAT,size:4},{buffer:d,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:p,type:e.FLOAT,size:4},{buffer:c,type:e.FLOAT,size:2},{buffer:f,type:e.FLOAT,size:4}]),n.traceType||"cone");return g.update(t),g}},614:function(e,t,n){var s=n(3236),o=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);t.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},t.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(e){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(e,t,n){var s=n(737);e.exports=function(e){return s[e]}},9165:function(e,t,n){"use strict";e.exports=function(e){var o,t=e.gl,n=l(t),i=d(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),s=u(t);return s.attributes.position.location=0,s.attributes.color.location=1,s.attributes.offset.location=2,o=new c(t,n,i,s),o.update(e),o};var s,a,l=n(2762),d=n(8116),u=n(3436),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(e,t,n,s){this.gl=e,this.shader=s,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}s=c.prototype;function i(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}s.isOpaque=function(){return!this.hasAlpha},s.isTransparent=function(){return this.hasAlpha},s.drawTransparent=s.draw=function(e){s=this.gl,n=this.shader.uniforms,this.shader.bind(),i=n.view=e.view||o,a=n.projection=e.projection||o,n.model=e.model||o,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var t,n,s,i,a,r=i[12],c=i[13],l=i[14],d=i[15],u=(e._ortho?2:1)*this.pixelRatio*(a[3]*r+a[7]*c+a[11]*l+a[15]*d)/s.drawingBufferHeight;this.vao.bind();for(t=0;t<3;++t)s.lineWidth(this.lineWidth[t]*this.pixelRatio),n.capSize=this.capSize[t]*u,this.lineCount[t]&&s.drawArrays(s.LINES,this.lineOffset[t],this.lineCount[t]);this.vao.unbind()},a=function(){for(var t,n,s,o,i=new Array(3),e=0;e<3;++e){for(s=[],t=1;t<=2;++t)for(n=-1;n<=1;n+=2)o=[0,0,0],o[(t+e)%3]=n,s.push(o);i[e]=s}return i}();function r(e,t,n,s){for(var o,i=a[s],r=0;r<i.length;++r)o=i[r],e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2]);return i.length}s.update=function(e){"lineWidth"in(e=e||{})&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var t,n,s,o,a,l,u,c=e.color||[[0,0,0],[0,0,0],[0,0,0]],m=e.position,f=e.error;if(Array.isArray(c[0])||(c=[c,c,c]),m&&f){var d=[],p=m.length,h=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(n=0;n<3;++n){this.lineOffset[n]=h;t:for(l=0;l<p;++l){for(o=m[l],u=0;u<3;++u)if(isNaN(o[u])||!isFinite(o[u]))continue t;a=f[l],t=c[n],(Array.isArray(t[0])&&(t=c[l]),3===t.length?t=[t[0],t[1],t[2],1]:4===t.length&&(t=[t[0],t[1],t[2],t[3]],!this.hasAlpha&&t[3]<1&&(this.hasAlpha=!0)),!isNaN(a[0][n])&&!isNaN(a[1][n]))&&(a[0][n]<0&&((s=o.slice())[n]+=a[0][n],d.push(o[0],o[1],o[2],t[0],t[1],t[2],t[3],0,0,0,s[0],s[1],s[2],t[0],t[1],t[2],t[3],0,0,0),i(this.bounds,s),h+=2+r(d,s,t,n)),a[1][n]>0&&((s=o.slice())[n]+=a[1][n],d.push(o[0],o[1],o[2],t[0],t[1],t[2],t[3],0,0,0,s[0],s[1],s[2],t[0],t[1],t[2],t[3],0,0,0),i(this.bounds,s),h+=2+r(d,s,t,n)))}this.lineCount[n]=h-this.lineOffset[n]}this.buffer.update(d)}},s.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(e,t,n){"use strict";var s=n(3236),o=n(9405),i=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);e.exports=function(e){return o(e,i,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(e,t,n){"use strict";var s,i,r,h,m,p,g=n(7766);e.exports=function(e,t,n,o){if(r||(r=e.FRAMEBUFFER_UNSUPPORTED,p=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,m=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT),a=e.getExtension("WEBGL_draw_buffers"),!s&&a&&function(e,t){i=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL),s=new Array(i+1);for(o=0;o<=i;++o){for(var o,i,a=new Array(i),n=0;n<o;++n)a[n]=e.COLOR_ATTACHMENT0+n;for(n=o;n<i;++n)a[n]=e.NONE;s[o]=a}}(e,a),Array.isArray(t)&&(o=n,n=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");if(c=e.getParameter(e.MAX_RENDERBUFFER_SIZE),t<0||t>c||n<0||n>c)throw new Error("gl-fbo: Parameters are too large for FBO");if(i=1,"color"in(o=o||{})){if((i=Math.max(0|o.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(i>1){if(!a)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(i>e.getParameter(a.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+i+" draw buffers")}}var i,a,c,d,u,l=e.UNSIGNED_BYTE,g=e.getExtension("OES_texture_float");if(o.float&&i>0){if(!g)throw new Error("gl-fbo: Context does not support floating point textures");l=e.FLOAT}else o.preferFloat&&i>0&&g&&(l=e.FLOAT);return d=!0,"depth"in o&&(d=!!o.depth),u=!1,"stencil"in o&&(u=!!o.stencil),new f(e,t,n,l,i,d,u,a)},s=null;function d(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function o(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function u(e){switch(e){case r:throw new Error("gl-fbo: Framebuffer unsupported");case p:throw new Error("gl-fbo: Framebuffer incomplete attachment");case m:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(e,t,n,s,o,i){if(!s)return null;var a=g(e,t,n,o,s);return a.magFilter=e.NEAREST,a.minFilter=e.NEAREST,a.mipSamples=1,a.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,i,e.TEXTURE_2D,a.handle,0),a}function a(e,t,n,s,o){var i=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorage(e.RENDERBUFFER,s,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,o,e.RENDERBUFFER,i),i}function f(e,t,n,i,r,l,h,m){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=m,this.color=new Array(r);for(f=0;f<r;++f)this.color[f]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=i,this._useDepth=l,this._useStencil=h;var f,p=this,g=[0|t,0|n];Object.defineProperties(g,{0:{get:function(){return p._shape[0]},set:function(e){return p.width=e}},1:{get:function(){return p._shape[1]},set:function(e){return p.height=e}}}),this._shapeVector=g,function(e){var n,h,g,v=d(e.gl),t=e.gl,j=e.handle=t.createFramebuffer(),i=e._shape[0],r=e._shape[1],l=e.color.length,m=e._ext,f=e._useStencil,p=e._useDepth,b=e._colorType;t.bindFramebuffer(t.FRAMEBUFFER,j);for(n=0;n<l;++n)e.color[n]=c(t,i,r,b,t.RGBA,t.COLOR_ATTACHMENT0+n);if(0===l?(e._color_rb=a(t,i,r,t.RGBA4,t.COLOR_ATTACHMENT0),m&&m.drawBuffersWEBGL(s[0])):l>1&&m.drawBuffersWEBGL(s[l]),g=t.getExtension("WEBGL_depth_texture"),g?f?e.depth=c(t,i,r,g.UNSIGNED_INT_24_8_WEBGL,t.DEPTH_STENCIL,t.DEPTH_STENCIL_ATTACHMENT):p&&(e.depth=c(t,i,r,t.UNSIGNED_SHORT,t.DEPTH_COMPONENT,t.DEPTH_ATTACHMENT)):p&&f?e._depth_rb=a(t,i,r,t.DEPTH_STENCIL,t.DEPTH_STENCIL_ATTACHMENT):p?e._depth_rb=a(t,i,r,t.DEPTH_COMPONENT16,t.DEPTH_ATTACHMENT):f&&(e._depth_rb=a(t,i,r,t.STENCIL_INDEX,t.STENCIL_ATTACHMENT)),h=t.checkFramebufferStatus(t.FRAMEBUFFER),h!==t.FRAMEBUFFER_COMPLETE){for(e._destroyed=!0,t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(t.deleteRenderbuffer(e._depth_rb),e._depth_rb=null),n=0;n<e.color.length;++n)e.color[n].dispose(),e.color[n]=null;e._color_rb&&(t.deleteRenderbuffer(e._color_rb),e._color_rb=null),o(t,v),u(h)}o(t,v)}(this)}i=f.prototype;function l(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var i,a,r,s=e.gl,c=s.getParameter(s.MAX_RENDERBUFFER_SIZE);if(t<0||t>c||n<0||n>c)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(a=d(s),i=0;i<e.color.length;++i)e.color[i].shape=e._shape;e._color_rb&&(s.bindRenderbuffer(s.RENDERBUFFER,e._color_rb),s.renderbufferStorage(s.RENDERBUFFER,s.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(s.bindRenderbuffer(s.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&s.renderbufferStorage(s.RENDERBUFFER,s.STENCIL_INDEX,e._shape[0],e._shape[1])),s.bindFramebuffer(s.FRAMEBUFFER,e.handle),r=s.checkFramebufferStatus(s.FRAMEBUFFER),r!==s.FRAMEBUFFER_COMPLETE&&(e.dispose(),o(s,a),u(r)),o(s,a)}}Object.defineProperties(i,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],n=0|e[1];return l(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return l(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,l(this,this._shape[0],e),e},enumerable:!1}}),i.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},i.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e,t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(e,t,n){var s=n(3387).sprintf,o=n(5171),i=n(1848),a=n(1085);e.exports=function(e,t,n){"use strict";p=i(t)||"of unknown name (see npm glsl-shader-name)",m="unknown type",void 0!==n&&(m=n===o.FRAGMENT_SHADER?"fragment":"vertex");for(var c,d,h,m,f,p,u=s(`Error compiling %s shader %s:
`,m,p),v=s("%s%s",u,e),g=e.split(`
`),l={},r=0;r<g.length;r++)if(c=g[r],""!==c&&"\0"!==c){if(f=parseInt(c.split(":")[2]),isNaN(f))throw new Error(s("Could not parse error: %s",c));l[f]=c}h=a(t).split(`
`);for(r=0;r<h.length;r++)(l[r+3]||l[r+2]||l[r+1])&&(u+=h[r]+`
`,l[r+1])&&(d=l[r+1],d=d.substr(d.split(":",3).join(":").length+1).trim(),u+=s(`^^^ %s

`,d));return{long:u.trim(),short:v.trim()}}},2510:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.gl,s=new l(e,u(n,c.vertex,c.fragment),u(n,c.pickVertex,c.pickFragment),r(n),r(n),r(n),r(n));return s.update(t),e.addObject(s),s};var o,i,a,h=n(2478),d=n(7762),s=n(1888),u=n(9405),r=n(2762),c=n(6768);function l(e,t,n,s,o,i,a){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=s,this.weightBuffer=o,this.colorBuffer=i,this.idBuffer=a,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}i=l.prototype,a=[0,0,1,0,0,1,1,0,1,1,0,1],i.draw=(o=[1,0,0,0,1,0,0,0,1],function(){var r=this.plot,i=this.shader,e=this.bounds,c=this.numVertices;if(!(c<=0)){var s,a,n=r.gl,t=r.dataBox,u=e[2]-e[0],h=e[3]-e[1],l=t[2]-t[0],d=t[3]-t[1];o[0]=2*u/l,o[4]=2*h/d,o[6]=2*(e[0]-t[0])/l-1,o[7]=2*(e[1]-t[1])/d-1,i.bind(),a=i.uniforms,a.viewTransform=o,a.shape=this.shape,s=i.attributes,this.positionBuffer.bind(),s.position.pointer(),this.weightBuffer.bind(),s.weight.pointer(n.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),s.color.pointer(n.UNSIGNED_BYTE,!0),n.drawArrays(n.TRIANGLES,0,c)}}),i.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var d=this.plot,l=this.pickShader,s=this.bounds,m=this.numVertices;if(!(m<=0)){var i,a,c,r=d.gl,o=d.dataBox,p=s[2]-s[0],f=s[3]-s[1],u=o[2]-o[0],h=o[3]-o[1];e[0]=2*p/u,e[4]=2*f/h,e[6]=2*(s[0]-o[0])/u-1,e[7]=2*(s[1]-o[1])/h-1;for(i=0;i<4;++i)t[i]=n>>8*i&255;return this.pickOffset=n,l.bind(),a=l.uniforms,a.viewTransform=e,a.pickOffset=t,a.shape=this.shape,c=l.attributes,this.positionBuffer.bind(),c.position.pointer(),this.weightBuffer.bind(),c.weight.pointer(r.UNSIGNED_BYTE,!1),this.idBuffer.bind(),c.pickId.pointer(r.UNSIGNED_BYTE,!1),r.drawArrays(r.TRIANGLES,0,m),n+this.shape[0]*this.shape[1]}}}(),i.pick=function(e,t,n){if(s=this.pickOffset,i=this.shape[0]*this.shape[1],n<s||n>=s+i)return null;var s,i,o=n-s,a=this.xData,r=this.yData;return{object:this,pointId:o,dataCoord:[a[o%this.shape[0]],r[o/this.shape[0]|0]]}},i.update=function(e){var _=(e=e||{}).shape||[0,0],t=e.x||d(_[0]),n=e.y||d(_[1]),K=e.z||new Float32Array(_[0]*_[1]),p=!1!==e.zsmooth;this.xData=t,this.yData=n;var u,m,R,I,O=e.colorLevels||[0],r=e.colorValues||[0,0,0,1],E=O.length,f=this.bounds;p?(m=f[0]=t[0],u=f[1]=n[0],R=f[2]=t[t.length-1],I=f[3]=n[n.length-1]):(m=f[0]=t[0]+(t[1]-t[0])/2,u=f[1]=n[0]+(n[1]-n[0])/2,R=f[2]=t[t.length-1]+(t[t.length-1]-t[t.length-2])/2,I=f[3]=n[n.length-1]+(n[n.length-1]-n[n.length-2])/2);var j=1/(R-m),y=1/(I-u),c=_[0],g=_[1];this.shape=[c,g],w=(p?(c-1)*(g-1):c*g)*(a.length>>>1),this.numVertices=w;for(var o,w,C,L,P,H,B,b=s.mallocUint8(4*w),N=s.mallocFloat32(2*w),k=s.mallocUint8(2*w),V=s.mallocUint32(w),l=0,Y=p?c-1:c,q=p?g-1:g,i=0;i<q;++i){p?(H=y*(n[i]-u),P=y*(n[i+1]-u)):(H=i<g-1?y*(n[i]-(n[i+1]-n[i])/2-u):y*(n[i]-(n[i]-n[i-1])/2-u),P=i<g-1?y*(n[i]+(n[i+1]-n[i])/2-u):y*(n[i]+(n[i]-n[i-1])/2-u));for(o=0;o<Y;++o){p?(B=j*(t[o]-m),L=j*(t[o+1]-m)):(B=o<c-1?j*(t[o]-(t[o+1]-t[o])/2-m):j*(t[o]-(t[o]-t[o-1])/2-m),L=o<c-1?j*(t[o]+(t[o+1]-t[o])/2-m):j*(t[o]+(t[o]-t[o-1])/2-m));for(C=0;C<a.length;C+=2){var M,F,T,z,W=a[C],$=a[C+1],U=K[p?(i+$)*c+(o+W):i*c+o],v=h.le(O,U);if(v<0)z=r[0],T=r[1],F=r[2],M=r[3];else if(v===E-1)z=r[4*E-4],T=r[4*E-3],F=r[4*E-2],M=r[4*E-1];else{var x=(U-O[v])/(O[v+1]-O[v]),S=1-x,A=4*v,D=4*(v+1);z=S*r[A]+x*r[D],T=S*r[A+1]+x*r[D+1],F=S*r[A+2]+x*r[D+2],M=S*r[A+3]+x*r[D+3]}b[4*l]=255*z,b[4*l+1]=255*T,b[4*l+2]=255*F,b[4*l+3]=255*M,N[2*l]=.5*B+.5*L,N[2*l+1]=.5*H+.5*P,k[2*l]=W,k[2*l+1]=$,V[l]=i*c+o,l+=1}}}this.positionBuffer.update(N),this.weightBuffer.update(k),this.colorBuffer.update(b),this.idBuffer.update(V),s.free(N),s.free(b),s.free(k),s.free(V)},i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(e,t,n){"use strict";var s=n(3236);e.exports={fragment:s([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(e,t,n){var s=n(3236),o=n(9405),i=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];t.createShader=function(e){return o(e,i,r,null,a)},t.createPickShader=function(e){return o(e,i,c,null,a)}},5714:function(e,t,n){"use strict";e.exports=function(e){t=e.gl||e.scene&&e.scene.gl,n=h(t),n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4,s=m(t),s.attributes.position.location=0,s.attributes.nextPosition.location=1,s.attributes.arcLength.location=2,s.attributes.lineWidth.location=3,s.attributes.color.location=4;for(var t,n,s,r,c,o=b(t),u=v(t,[{buffer:o,size:3,offset:0,stride:48},{buffer:o,size:3,offset:12,stride:48},{buffer:o,size:1,offset:24,stride:48},{buffer:o,size:1,offset:28,stride:48},{buffer:o,size:4,offset:32,stride:48}]),d=l(new Array(1024),[256,1,4]),i=0;i<1024;++i)d.data[i]=255;return r=g(t,d),r.wrap=t.REPEAT,c=new a(t,n,s,o,u,r),c.update(e),c};var s,b=n(2762),v=n(8116),g=n(7766),i=new Uint8Array(4),p=new Float32Array(i.buffer),c=n(2478),l=n(9618),d=n(7319),h=d.createShader,m=d.createPickShader,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(e,t){for(var s,o=0,n=0;n<3;++n)s=e[n]-t[n],o+=s*s;return Math.sqrt(o)}function r(e){for(var n=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],t=0;t<3;++t)n[0][t]=Math.max(e[0][t],n[0][t]),n[1][t]=Math.min(e[1][t],n[1][t]);return n}function u(e,t,n,s){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=s}function a(e,t,n,s,o,i){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=s,this.vao=o,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=i,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}s=a.prototype,s.isTransparent=function(){return this.hasAlpha},s.isOpaque=function(){return!this.hasAlpha},s.pickSlots=1,s.setPickBase=function(e){this.pickId=e},s.drawTransparent=s.draw=function(e){if(this.vertexCount){var t=this.gl,s=this.shader,n=this.vao;s.bind(),s.uniforms={model:e.model||o,view:e.view||o,projection:e.projection||o,clipBounds:r(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(t.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},s.drawPick=function(e){if(this.vertexCount){var t=this.gl,s=this.pickShader,n=this.vao;s.bind(),s.uniforms={model:e.model||o,view:e.view||o,projection:e.projection||o,pickId:this.pickId,clipBounds:r(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(t.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},s.update=function(e){this.dirty=!0,C=!!e.connectGaps,"dashScale"in e&&(this.dashScale=e.dashScale),this.hasAlpha=!1,"opacity"in e&&(this.opacity=+e.opacity,this.opacity<1&&(this.hasAlpha=!0));var t,n,s,o,i,a,d,g,b,y,x,C,u=[],O=[],w=[],p=0,j=0,v=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],m=e.position||e.positions;if(m){var r=e.color||e.colors||[0,0,0,1],h=e.lineWidth||1,_=!1;t:for(t=1;t<m.length;++t){s=m[t-1],o=m[t];for(O.push(p),w.push(s.slice()),n=0;n<3;++n){if(isNaN(s[n])||isNaN(o[n])||!isFinite(s[n])||!isFinite(o[n])){if(!C&&u.length>0){for(x=0;x<24;++x)u.push(u[u.length-12]);j+=2,_=!0}continue t}v[0][n]=Math.min(v[0][n],s[n],o[n]),v[1][n]=Math.max(v[1][n],s[n],o[n])}if(Array.isArray(r[0])?(i=r.length>t-1?r[t-1]:r.length>0?r[r.length-1]:[0,0,0,1],a=r.length>t?r[t]:r.length>0?r[r.length-1]:[0,0,0,1]):i=a=r,3===i.length&&(i=[i[0],i[1],i[2],1]),3===a.length&&(a=[a[0],a[1],a[2],1]),!this.hasAlpha&&i[3]<1&&(this.hasAlpha=!0),g=Array.isArray(h)?h.length>t-1?h[t-1]:h.length>0?h[h.length-1]:[0,0,0,1]:h,y=p,p+=f(s,o),_){for(n=0;n<2;++n)u.push(s[0],s[1],s[2],o[0],o[1],o[2],y,g,i[0],i[1],i[2],i[3]);j+=2,_=!1}u.push(s[0],s[1],s[2],o[0],o[1],o[2],y,g,i[0],i[1],i[2],i[3],s[0],s[1],s[2],o[0],o[1],o[2],y,-g,i[0],i[1],i[2],i[3],o[0],o[1],o[2],s[0],s[1],s[2],p,-g,a[0],a[1],a[2],a[3],o[0],o[1],o[2],s[0],s[1],s[2],p,g,a[0],a[1],a[2],a[3]),j+=4}}if(this.buffer.update(u),O.push(p),w.push(m[m.length-1].slice()),this.bounds=v,this.vertexCount=j,this.points=w,this.arcLength=O,"dashes"in e){d=e.dashes.slice();for(d.unshift(0),t=1;t<d.length;++t)d[t]=d[t-1]+d[t];b=l(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(n=0;n<4;++n)b.set(t,0,n,0);1&c.le(d,d[d.length-1]*t/255)?b.set(t,0,0,0):b.set(t,0,0,255)}this.texture.setPixels(b)}},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},s.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;if(s=function(e,t,n){return i[0]=0,i[1]=n,i[2]=t,i[3]=e,p[0]}(e.value[0],e.value[1],e.value[2]),t=c.le(this.arcLength,s),t<0)return null;if(t===this.arcLength.length-1)return new u(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),t);for(var t,s,o,h=this.points[t],l=this.points[Math.min(t+1,this.points.length-1)],a=(s-this.arcLength[t])/(this.arcLength[t+1]-this.arcLength[t]),d=1-a,r=[0,0,0],n=0;n<3;++n)r[n]=d*h[n]+a*l[n];return o=Math.min(a<.5?t:t+1,this.points.length-1),new u(s,r,o,this.points[o])}},1903:function(e){e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},6864:function(e){e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},9921:function(e){e.exports=function(e){var t=e[0],n=e[1],s=e[2],o=e[3],i=e[4],a=e[5],r=e[6],c=e[7],l=e[8],d=e[9],u=e[10],h=e[11],m=e[12],f=e[13],p=e[14],g=e[15];return(t*a-n*i)*(u*g-h*p)-(t*r-s*i)*(d*g-h*f)+(t*c-o*i)*(d*p-u*f)+(n*r-s*a)*(l*g-h*m)-(n*c-o*a)*(l*p-u*m)+(s*c-o*r)*(l*f-d*m)}},7399:function(e){e.exports=function(e,t){var i=t[0],s=t[1],n=t[2],a=t[3],o=i+i,r=s+s,d=n+n,l=i*o,c=s*o,u=s*r,h=n*o,m=n*r,f=n*d,p=a*o,g=a*r,v=a*d;return e[0]=1-u-f,e[1]=c+v,e[2]=h-g,e[3]=0,e[4]=c-v,e[5]=1-l-f,e[6]=m+p,e[7]=0,e[8]=h+g,e[9]=m-p,e[10]=1-l-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},6743:function(e){e.exports=function(e,t,n){var s=t[0],i=t[1],a=t[2],r=t[3],u=s+s,c=i+i,o=a+a,d=s*u,l=s*c,h=s*o,m=i*c,f=i*o,p=a*o,g=r*u,v=r*c,b=r*o;return e[0]=1-(m+p),e[1]=l+b,e[2]=h-v,e[3]=0,e[4]=l-b,e[5]=1-(d+p),e[6]=f+g,e[7]=0,e[8]=h+v,e[9]=f-g,e[10]=1-(d+m),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},7894:function(e){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7608:function(e){e.exports=function(e,t){var b=t[0],l=t[1],o=t[2],i=t[3],a=t[4],r=t[5],c=t[6],s=t[7],d=t[8],u=t[9],h=t[10],m=t[11],f=t[12],p=t[13],v=t[14],g=t[15],M=b*r-l*a,x=b*c-o*a,y=b*s-i*a,_=l*c-o*r,w=l*s-i*r,O=o*s-i*c,j=d*p-u*f,C=d*v-h*f,E=d*g-m*f,k=u*v-h*p,A=u*g-m*p,S=h*g-m*v,n=M*S-x*A+y*k+_*E-w*C+O*j;return n?(n=1/n,e[0]=(r*S-c*A+s*k)*n,e[1]=(o*A-l*S-i*k)*n,e[2]=(p*O-v*w+g*_)*n,e[3]=(h*w-u*O-m*_)*n,e[4]=(c*E-a*S-s*C)*n,e[5]=(b*S-o*E+i*C)*n,e[6]=(v*y-f*O-g*x)*n,e[7]=(d*O-h*y+m*x)*n,e[8]=(a*A-r*E+s*j)*n,e[9]=(l*E-b*A-i*j)*n,e[10]=(f*w-p*y+g*M)*n,e[11]=(u*y-d*w-m*M)*n,e[12]=(r*C-a*k-c*j)*n,e[13]=(b*k-l*C+o*j)*n,e[14]=(p*x-f*_-v*M)*n,e[15]=(d*_-u*x+h*M)*n,e):null}},6582:function(e,t,n){var s=n(7894);e.exports=function(e,t,n,o){var i,a,r,c,l,d,u,h,m,f,p=t[0],g=t[1],v=t[2],b=o[0],j=o[1],y=o[2],_=n[0],w=n[1],O=n[2];return Math.abs(p-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(v-O)<1e-6?s(e):(a=p-_,d=g-w,l=v-O,u=j*(l*=i=1/Math.sqrt(a*a+d*d+l*l))-y*(d*=i),r=y*(a*=i)-b*l,c=b*d-j*a,(i=Math.sqrt(u*u+r*r+c*c))?(u*=i=1/i,r*=i,c*=i):(u=0,r=0,c=0),f=d*c-l*r,m=l*u-a*c,h=a*r-d*u,(i=Math.sqrt(f*f+m*m+h*h))?(f*=i=1/i,m*=i,h*=i):(f=0,m=0,h=0),e[0]=u,e[1]=f,e[2]=a,e[3]=0,e[4]=r,e[5]=m,e[6]=d,e[7]=0,e[8]=c,e[9]=h,e[10]=l,e[11]=0,e[12]=-(u*p+r*g+c*v),e[13]=-(f*p+m*g+h*v),e[14]=-(a*p+d*g+l*v),e[15]=1,e)}},6760:function(e){e.exports=function(e,t,n){var w=t[0],_=t[1],y=t[2],j=t[3],m=t[4],c=t[5],l=t[6],d=t[7],u=t[8],h=t[9],r=t[10],f=t[11],p=t[12],g=t[13],v=t[14],b=t[15],a=n[0],i=n[1],o=n[2],s=n[3];return e[0]=a*w+i*m+o*u+s*p,e[1]=a*_+i*c+o*h+s*g,e[2]=a*y+i*l+o*r+s*v,e[3]=a*j+i*d+o*f+s*b,a=n[4],i=n[5],o=n[6],s=n[7],e[4]=a*w+i*m+o*u+s*p,e[5]=a*_+i*c+o*h+s*g,e[6]=a*y+i*l+o*r+s*v,e[7]=a*j+i*d+o*f+s*b,a=n[8],i=n[9],o=n[10],s=n[11],e[8]=a*w+i*m+o*u+s*p,e[9]=a*_+i*c+o*h+s*g,e[10]=a*y+i*l+o*r+s*v,e[11]=a*j+i*d+o*f+s*b,a=n[12],i=n[13],o=n[14],s=n[15],e[12]=a*w+i*m+o*u+s*p,e[13]=a*_+i*c+o*h+s*g,e[14]=a*y+i*l+o*r+s*v,e[15]=a*j+i*d+o*f+s*b,e}},4040:function(e){e.exports=function(e,t,n,s,o,i,a){var r=1/(t-n),c=1/(s-o),l=1/(i-a);return e[0]=-2*r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*r,e[13]=(o+s)*c,e[14]=(a+i)*l,e[15]=1,e}},4772:function(e){e.exports=function(e,t,n,s,o){var i=1/Math.tan(t/2),a=1/(s-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+s)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*s*a,e[15]=0,e}},6079:function(e){e.exports=function(e,t,n,s){var r,c,l,d,u,h,m,f,p,g,v,j,y,_,w,O,x,C,E,k,A,S,M,F,a=s[0],i=s[1],o=s[2],b=Math.sqrt(a*a+i*i+o*o);return Math.abs(b)<1e-6?null:(a*=b=1/b,i*=b,o*=b,c=Math.sin(n),r=1-(M=Math.cos(n)),S=t[0],A=t[1],k=t[2],E=t[3],C=t[4],x=t[5],O=t[6],w=t[7],_=t[8],y=t[9],j=t[10],F=t[11],v=a*a*r+M,g=i*a*r+o*c,p=o*a*r-i*c,f=a*i*r-o*c,m=i*i*r+M,h=o*i*r+a*c,l=a*o*r+i*c,d=i*o*r-a*c,u=o*o*r+M,e[0]=S*v+C*g+_*p,e[1]=A*v+x*g+y*p,e[2]=k*v+O*g+j*p,e[3]=E*v+w*g+F*p,e[4]=S*f+C*m+_*h,e[5]=A*f+x*m+y*h,e[6]=k*f+O*m+j*h,e[7]=E*f+w*m+F*h,e[8]=S*l+C*d+_*u,e[9]=A*l+x*d+y*u,e[10]=k*l+O*d+j*u,e[11]=E*l+w*d+F*u,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},5567:function(e){e.exports=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],r=t[6],c=t[7],l=t[8],d=t[9],u=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+l*s,e[5]=a*o+d*s,e[6]=r*o+u*s,e[7]=c*o+h*s,e[8]=l*o-i*s,e[9]=d*o-a*s,e[10]=u*o-r*s,e[11]=h*o-c*s,e}},2408:function(e){e.exports=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],r=t[2],c=t[3],l=t[8],d=t[9],u=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-l*s,e[1]=a*o-d*s,e[2]=r*o-u*s,e[3]=c*o-h*s,e[8]=i*s+l*o,e[9]=a*s+d*o,e[10]=r*s+u*o,e[11]=c*s+h*o,e}},7089:function(e){e.exports=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],r=t[2],c=t[3],l=t[4],d=t[5],u=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+l*s,e[1]=a*o+d*s,e[2]=r*o+u*s,e[3]=c*o+h*s,e[4]=l*o-i*s,e[5]=d*o-a*s,e[6]=u*o-r*s,e[7]=h*o-c*s,e}},2504:function(e){e.exports=function(e,t,n){var s=n[0],o=n[1],i=n[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},7656:function(e){e.exports=function(e,t,n){var a,r,c,l,d,u,h,m,f,p,g,v,i=n[0],o=n[1],s=n[2];return t===e?(e[12]=t[0]*i+t[4]*o+t[8]*s+t[12],e[13]=t[1]*i+t[5]*o+t[9]*s+t[13],e[14]=t[2]*i+t[6]*o+t[10]*s+t[14],e[15]=t[3]*i+t[7]*o+t[11]*s+t[15]):(v=t[0],g=t[1],p=t[2],d=t[3],r=t[4],c=t[5],l=t[6],a=t[7],u=t[8],h=t[9],m=t[10],f=t[11],e[0]=v,e[1]=g,e[2]=p,e[3]=d,e[4]=r,e[5]=c,e[6]=l,e[7]=a,e[8]=u,e[9]=h,e[10]=m,e[11]=f,e[12]=v*i+r*o+u*s+t[12],e[13]=g*i+c*o+h*s+t[13],e[14]=p*i+l*o+m*s+t[14],e[15]=d*i+a*o+f*s+t[15]),e}},5665:function(e){e.exports=function(e,t){if(e===t){var n=t[1],s=t[2],o=t[3],i=t[6],a=t[7],r=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=r}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},7626:function(e,t,n){"use strict";var o=n(2642),i=n(9346);function s(e,t){for(var n,o=[0,0,0,0],s=0;s<4;++s)for(n=0;n<4;++n)o[n]+=e[4*s+n]*t[s];return o}function a(e,t,n,o,i){for(var a=s(o,s(n,s(t,[e[0],e[1],e[2],1]))),r=0;r<3;++r)a[r]/=a[3];return[.5*i[0]*(1+a[0]),.5*i[1]*(1-a[1])]}function r(e,t){for(o=[0,0,0],n=0;n<e.length;++n)for(var n,o,i=e[n],a=t[n],s=0;s<3;++s)o[s]+=a*i[s];return o}e.exports=function(e,t,n,s,c,l){if(1===e.length)return[0,e[0].slice()];for(var u,h,m,p,g,v,f=new Array(e.length),d=0;d<e.length;++d)f[d]=a(e[d],n,s,c,l);p=0,g=1/0;for(d=0;d<f.length;++d){for(m=0,h=0;h<2;++h)m+=Math.pow(f[d][h]-t[h],2);m<g&&(g=m,p=d)}u=function(e,t){if(2===e.length){for(var r,n=0,s=0,a=0;a<2;++a)n+=Math.pow(t[a]-e[0][a],2),s+=Math.pow(t[a]-e[1][a],2);return(n=Math.sqrt(n))+(s=Math.sqrt(s))<1e-6?[1,0]:[s/(n+s),n/(s+n)]}return 3===e.length?(r=[0,0],i(e[0],e[1],e[2],t,r),o(e,r)):[]}(f,t),v=0;for(d=0;d<3;++d){if(u[d]<-.001||u[d]>1.0001)return null;v+=u[d]}return Math.abs(v-1)>.001?null:[p,r(e,u),u]}},840:function(e,t,n){var s=n(3236),i=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),l=s([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),d=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),o=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),h=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),m=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),f=s([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);t.meshShader={vertex:i,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.wireShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},t.pointShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},t.pickShader={vertex:d,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},t.pointPickShader={vertex:h,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},t.contourShader={vertex:m,fragment:f,attributes:[{name:"position",type:"vec3"}]}},7201:function(e,t,n){"use strict";var o,a=n(9405),s=n(2762),l=n(8116),d=n(7766),g=n(8406),f=n(6760),h=n(7608),u=n(9618),C=n(6729),x=n(7765),m=n(1888),r=n(840),O=n(7626),w=r.meshShader,v=r.wireShader,b=r.pointShader,j=r.pickShader,y=r.pointPickShader,_=r.contourShader,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(e,t,n,s,o,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k){this.gl=e,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=s,this.pointShader=o,this.pickShader=a,this.pointPickShader=r,this.contourShader=c,this.trianglePositions=l,this.triangleColors=u,this.triangleNormals=m,this.triangleUVs=h,this.triangleIds=d,this.triangleVAO=f,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=v,this.edgeUVs=b,this.edgeIds=g,this.edgeVAO=j,this.edgeCount=0,this.pointPositions=y,this.pointColors=w,this.pointUVs=O,this.pointSizes=x,this.pointIds=_,this.pointVAO=C,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=E,this.contourVAO=k,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=i,this._view=i,this._projection=i,this._resolution=[1,1]}o=p.prototype;function c(e,t){if(!t)return 1;if(!t.length)return 1;for(var s,n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&n>0)return s=(t[n][0]-e)/(t[n][0]-t[n-1][0]),t[n][1]*(1-s)+s*t[n-1][1]}return 1}function E(e){var t=a(e,b.vertex,b.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function k(e){var t=a(e,j.vertex,j.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t}function A(e){var t=a(e,y.vertex,y.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function S(e){var t=a(e,_.vertex,_.fragment);return t.attributes.position.location=0,t}o.isOpaque=function(){return!this.hasAlpha},o.isTransparent=function(){return this.hasAlpha},o.pickSlots=1,o.setPickBase=function(e){this.pickId=e},o.highlight=function(e){if(e&&this.contourEnable){for(var t,n,s,i=x(this.cells,this.intensity,e.intensity),u=i.cells,d=i.vertexIds,p=i.vertexWeights,h=u.length,a=m.mallocFloat32(6*h),r=0,c=0;c<h;++c)for(n=u[c],s=0;s<2;++s){t=n[0],2===n.length&&(t=n[s]);for(var j=d[t][0],f=d[t][1],l=p[t],g=1-l,v=this.positions[j],b=this.positions[f],o=0;o<3;++o)a[r++]=l*v[o]+g*b[o]}this.contourCount=r/3|0,this.contourPositions.update(a.subarray(0,r)),m.free(a)}else this.contourCount=0},o.update=function(e){if(e=e||{},E=this.gl,this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),this.hasAlpha=!1,"opacity"in e&&(this.opacity=e.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in e&&(this.opacityscale=e.opacityscale,this.hasAlpha=!0),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=d(E,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=E.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=E.LINEAR,this.texture.setPixels(function(e,t){for(var s,i,a=C({colormap:e,nshades:256,format:"rgba"}),o=new Uint8Array(1024),n=0;n<256;++n){for(i=a[n],s=0;s<3;++s)o[4*n+s]=i[s];o[4*n+3]=t?255*c(n/255,t):255*i[3]}return u(o,[256,256,4],[4,0,1])}(e.colormap,this.opacityscale)),this.texture.generateMipmap()),y=e.cells,h=e.positions,h&&y){var t,n,s,i,r,h,f,p,v,y,O,E,A,M,H,Y=[],b=[],N=[],q=[],K=[],U=[],T=[],R=[],L=[],P=[],D=[],I=[],z=[],B=[];this.cells=y,this.positions=h;var S=e.vertexNormals,k=e.cellNormals,X=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,G=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;e.useFacetNormals&&!k&&(k=g.faceNormals(y,h,G)),k||S||(S=g.vertexNormals(y,h,X));var x=e.vertexColors,w=e.cellColors,F=e.meshColor||[1,1,1,1],_=e.vertexUVs,l=e.vertexIntensity,j=e.cellUVs,m=e.cellIntensity,o=1/0,a=-1/0;if(!_&&!j)if(l)if(e.vertexIntensityBounds)o=+e.vertexIntensityBounds[0],a=+e.vertexIntensityBounds[1];else for(n=0;n<l.length;++n)p=l[n],o=Math.min(o,p),a=Math.max(a,p);else if(m)if(e.cellIntensityBounds)o=+e.cellIntensityBounds[0],a=+e.cellIntensityBounds[1];else for(n=0;n<m.length;++n)p=m[n],o=Math.min(o,p),a=Math.max(a,p);else for(n=0;n<h.length;++n)p=h[n][2],o=Math.min(o,p),a=Math.max(a,p);this.intensity=l||m||function(e){for(var n=e.length,s=new Array(n),t=0;t<n;++t)s[t]=e[t][2];return s}(h),this.pickVertex=!m&&!w,M=e.pointSizes,H=e.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],n=0;n<h.length;++n)for(i=h[n],s=0;s<3;++s)!isNaN(i[s])&&isFinite(i[s])&&(this.bounds[0][s]=Math.min(this.bounds[0][s],i[s]),this.bounds[1][s]=Math.max(this.bounds[1][s],i[s]));var V=0,$=0,W=0;t:for(n=0;n<y.length;++n)switch(O=y[n],O.length){case 1:for(i=h[r=O[0]],s=0;s<3;++s)if(isNaN(i[s])||!isFinite(i[s]))continue t;P.push(i[0],i[1],i[2]),t=x?x[r]:w?w[n]:F,this.opacityscale&&l?b.push(t[0],t[1],t[2],this.opacity*c((l[r]-o)/(a-o),this.opacityscale)):3===t.length?D.push(t[0],t[1],t[2],this.opacity):(D.push(t[0],t[1],t[2],t[3]*this.opacity),t[3]<1&&(this.hasAlpha=!0)),v=_?_[r]:l?[(l[r]-o)/(a-o),0]:j?j[n]:m?[(m[n]-o)/(a-o),0]:[(i[2]-o)/(a-o),0],I.push(v[0],v[1]),M?z.push(M[r]):z.push(H),B.push(n),W+=1;break;case 2:for(s=0;s<2;++s){i=h[r=O[s]];for(f=0;f<3;++f)if(isNaN(i[f])||!isFinite(i[f]))continue t}for(s=0;s<2;++s)i=h[r=O[s]],U.push(i[0],i[1],i[2]),t=x?x[r]:w?w[n]:F,this.opacityscale&&l?b.push(t[0],t[1],t[2],this.opacity*c((l[r]-o)/(a-o),this.opacityscale)):3===t.length?T.push(t[0],t[1],t[2],this.opacity):(T.push(t[0],t[1],t[2],t[3]*this.opacity),t[3]<1&&(this.hasAlpha=!0)),v=_?_[r]:l?[(l[r]-o)/(a-o),0]:j?j[n]:m?[(m[n]-o)/(a-o),0]:[(i[2]-o)/(a-o),0],R.push(v[0],v[1]),L.push(n);$+=1;break;case 3:for(s=0;s<3;++s)for(i=h[r=O[s]],f=0;f<3;++f)if(isNaN(i[f])||!isFinite(i[f]))continue t;for(s=0;s<3;++s)i=h[r=O[2-s]],Y.push(i[0],i[1],i[2]),(t=x?x[r]:w?w[n]:F)?this.opacityscale&&l?b.push(t[0],t[1],t[2],this.opacity*c((l[r]-o)/(a-o),this.opacityscale)):3===t.length?b.push(t[0],t[1],t[2],this.opacity):(b.push(t[0],t[1],t[2],t[3]*this.opacity),t[3]<1&&(this.hasAlpha=!0)):b.push(.5,.5,.5,1),v=_?_[r]:l?[(l[r]-o)/(a-o),0]:j?j[n]:m?[(m[n]-o)/(a-o),0]:[(i[2]-o)/(a-o),0],q.push(v[0],v[1]),A=S?S[r]:k[n],N.push(A[0],A[1],A[2]),K.push(n);V+=1}this.pointCount=W,this.edgeCount=$,this.triangleCount=V,this.pointPositions.update(P),this.pointColors.update(D),this.pointUVs.update(I),this.pointSizes.update(z),this.pointIds.update(new Uint32Array(B)),this.edgePositions.update(U),this.edgeColors.update(T),this.edgeUVs.update(R),this.edgeIds.update(new Uint32Array(L)),this.trianglePositions.update(Y),this.triangleColors.update(b),this.triangleUVs.update(q),this.triangleNormals.update(N),this.triangleIds.update(new Uint32Array(K))}},o.drawTransparent=o.draw=function(e){e=e||{};for(var n,s,a,c,l,d,o=this.gl,u=e.model||i,m=e.view||i,p=e.projection||i,r=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],t=0;t<3;++t)r[0][t]=Math.max(r[0][t],this.clipBounds[0][t]),r[1][t]=Math.min(r[1][t],this.clipBounds[1][t]);n={model:u,view:m,projection:p,inverseModel:i.slice(),clipBounds:r,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0},n.inverseModel=h(n.inverseModel,n.model),o.disable(o.CULL_FACE),this.texture.bind(0),s=new Array(16);for(f(s,n.view,n.model),f(s,n.projection,s),h(s,s),t=0;t<3;++t)n.eyePosition[t]=s[12+t]/s[15];l=s[15];for(t=0;t<3;++t)l+=this.lightPosition[t]*s[4*t+3];for(t=0;t<3;++t){for(d=s[12+t],c=0;c<3;++c)d+=s[4*c+t]*this.lightPosition[c];n.lightPosition[t]=d/l}this.triangleCount>0&&((a=this.triShader).bind(),a.uniforms=n,this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((a=this.lineShader).bind(),a.uniforms=n,this.edgeVAO.bind(),o.lineWidth(this.lineWidth*this.pixelRatio),o.drawArrays(o.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((a=this.pointShader).bind(),a.uniforms=n,this.pointVAO.bind(),o.drawArrays(o.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((a=this.contourShader).bind(),a.uniforms=n,this.contourVAO.bind(),o.drawArrays(o.LINES,0,this.contourCount),this.contourVAO.unbind())},o.drawPick=function(e){e=e||{};for(var o,a,t=this.gl,l=e.model||i,r=e.view||i,c=e.projection||i,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)s[0][n]=Math.max(s[0][n],this.clipBounds[0][n]),s[1][n]=Math.min(s[1][n],this.clipBounds[1][n]);this._model=[].slice.call(l),this._view=[].slice.call(r),this._projection=[].slice.call(c),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight],a={model:l,view:r,projection:c,clipBounds:s,pickId:this.pickId/255},(o=this.pickShader).bind(),o.uniforms=a,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((o=this.pointPickShader).bind(),o.uniforms=a,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind())},o.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var s,r,c,d,h,o=e.value[0]+256*e.value[1]+65536*e.value[2],t=this.cells[o],f=this.positions,u=new Array(t.length),n=0;n<t.length;++n)u[n]=f[t[n]];if(r=e.coord[0],c=e.coord[1],!this.pickVertex){var l=this.positions[t[0]],i=this.positions[t[1]],a=this.positions[t[2]],m=[(l[0]+i[0]+a[0])/3,(l[1]+i[1]+a[1])/3,(l[2]+i[2]+a[2])/3];return{_cellCenter:!0,position:[r,c],index:o,cell:t,cellId:o,intensity:this.intensity[o],dataCoordinate:m}}if(s=O(u,[r*this.pixelRatio,this._resolution[1]-c*this.pixelRatio],this._model,this._view,this._projection,this._resolution),!s)return null;h=s[2],d=0;for(n=0;n<t.length;++n)d+=h[n]*this.intensity[t[n]];return{position:s[1],index:t[s[0]],cell:t,cellId:o,intensity:d,dataCoordinate:this.positions[t[s[0]]]}},o.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},e.exports=function(e,t){if(1===arguments.length&&(e=(t=e).gl),!(e.getExtension("OES_standard_derivatives")||e.getExtension("MOZ_OES_standard_derivatives")||e.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var H=function(e){var t=a(e,w.vertex,w.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}(e),P=function(e){var t=a(e,v.vertex,v.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}(e),L=E(e),N=k(e),D=A(e),z=S(e),n=d(e,u(new Uint8Array([255,255,255,255]),[1,1,4]));n.generateMipmap(),n.minFilter=e.LINEAR_MIPMAP_LINEAR,n.magFilter=e.LINEAR;var f=s(e),g=s(e),b=s(e),j=s(e),y=s(e),T=l(e,[{buffer:f,type:e.FLOAT,size:3},{buffer:y,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:g,type:e.FLOAT,size:4},{buffer:b,type:e.FLOAT,size:2},{buffer:j,type:e.FLOAT,size:3}]),O=s(e),x=s(e),C=s(e),o=s(e),F=l(e,[{buffer:O,type:e.FLOAT,size:3},{buffer:o,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:e.FLOAT,size:4},{buffer:C,type:e.FLOAT,size:2}]),_=s(e),h=s(e),c=s(e),r=s(e),i=s(e),R=l(e,[{buffer:_,type:e.FLOAT,size:3},{buffer:i,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:h,type:e.FLOAT,size:4},{buffer:c,type:e.FLOAT,size:2},{buffer:r,type:e.FLOAT,size:1}]),m=s(e),M=new p(e,n,H,P,L,N,D,z,f,y,g,b,j,T,O,o,x,C,F,_,i,h,c,r,R,m,l(e,[{buffer:m,type:e.FLOAT,size:3}]));return M.update(t),M}},8120:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl;return new r(e,l(t,[0,0,0,1,1,0,1,1]),c(t,a.boxVert,a.lineFrag))};var s,o,i,l=n(2762),c=n(9405),a=n(3603);function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n}s=r.prototype,s.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},s.drawBox=(o=[0,0],i=[0,0],function(e,t,n,s,a){var l=this.plot,r=this.shader,c=l.gl;o[0]=e,o[1]=t,i[0]=n,i[1]=s,r.uniforms.lo=o,r.uniforms.hi=i,r.uniforms.color=a,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl;return new d(e,f(t),u(t,i.gridVert,i.gridFrag),u(t,i.tickVert,i.gridFrag))};var s,o,c,l,h,m,f=n(2762),u=n(9405),a=n(2478),i=n(3603);function d(e,t,n,s){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=s,this.ticks=[[],[]]}function r(e,t){return e-t}o=d.prototype,o.draw=(c=[0,0],l=[0,0],s=[0,0],function(){for(var i,a,t=this.plot,f=this.vbo,n=this.shader,j=this.ticks,d=t.gl,r=t._tickBounds,o=t.dataBox,u=t.viewBox,y=t.gridLineWidth,_=t.gridLineColor,g=t.gridLineEnable,p=t.pixelRatio,e=0;e<2;++e){var m=r[e],v=r[e+2]-m,b=.5*(o[e+2]+o[e]),h=o[e+2]-o[e];l[e]=2*v/h,c[e]=2*(m-b)/h}n.bind(),f.bind(),n.attributes.dataCoord.pointer(),n.uniforms.dataShift=c,n.uniforms.dataScale=l,a=0;for(e=0;e<2;++e)s[0]=s[1]=0,s[e]=1,n.uniforms.dataAxis=s,n.uniforms.lineWidth=y[e]/(u[e+2]-u[e])*p,n.uniforms.color=_[e],i=6*j[e].length,g[e]&&i&&d.drawArrays(d.TRIANGLES,a,i),a+=i}),o.drawTickMarks=function(){var n=[0,0],s=[0,0],o=[1,0],i=[0,1],e=[0,0],t=[0,0];return function(){for(var c,p=this.plot,N=this.vbo,C=this.tickShader,f=this.ticks,b=p.gl,d=p._tickBounds,g=p.dataBox,l=p.viewBox,v=p.pixelRatio,O=p.screenBox,m=O[2]-O[0],h=O[3]-O[1],M=l[2]-l[0],S=l[3]-l[1],u=0;u<2;++u){var A=d[u],H=d[u+2]-A,D=.5*(g[u+2]+g[u]),k=g[u+2]-g[u];s[u]=2*H/k,n[u]=2*(A-D)/k}s[0]*=M/m,n[0]*=M/m,s[1]*=S/h,n[1]*=S/h,C.bind(),N.bind(),C.attributes.dataCoord.pointer(),c=C.uniforms,c.dataShift=n,c.dataScale=s;var j=p.tickMarkLength,_=p.tickMarkWidth,y=p.tickMarkColor,P=6*f[0].length,T=Math.min(a.ge(f[0],(g[0]-d[0])/(d[2]-d[0]),r),f[0].length),L=Math.min(a.gt(f[0],(g[2]-d[0])/(d[2]-d[0]),r),f[0].length),E=0+6*T,w=6*Math.max(0,L-T),z=Math.min(a.ge(f[1],(g[1]-d[1])/(d[3]-d[1]),r),f[1].length),R=Math.min(a.gt(f[1],(g[3]-d[1])/(d[3]-d[1]),r),f[1].length),F=P+6*z,x=6*Math.max(0,R-z);e[0]=2*(l[0]-j[1])/m-1,e[1]=(l[3]+l[1])/h-1,t[0]=j[1]*v/m,t[1]=_[1]*v/h,x&&(c.color=y[1],c.tickScale=t,c.dataAxis=i,c.screenOffset=e,b.drawArrays(b.TRIANGLES,F,x)),e[0]=(l[2]+l[0])/m-1,e[1]=2*(l[1]-j[0])/h-1,t[0]=_[0]*v/m,t[1]=j[0]*v/h,w&&(c.color=y[0],c.tickScale=t,c.dataAxis=o,c.screenOffset=e,b.drawArrays(b.TRIANGLES,E,w)),e[0]=2*(l[2]+j[3])/m-1,e[1]=(l[3]+l[1])/h-1,t[0]=j[3]*v/m,t[1]=_[3]*v/h,x&&(c.color=y[3],c.tickScale=t,c.dataAxis=i,c.screenOffset=e,b.drawArrays(b.TRIANGLES,F,x)),e[0]=(l[2]+l[0])/m-1,e[1]=2*(l[3]+j[2])/h-1,t[0]=_[2]*v/m,t[1]=j[2]*v/h,w&&(c.color=y[2],c.tickScale=t,c.dataAxis=o,c.screenOffset=e,b.drawArrays(b.TRIANGLES,E,w))}}(),o.update=(h=[1,1,-1,-1,1,-1],m=[1,-1,1,1,-1,-1],function(e){for(var n,o,r=e.ticks,u=e.bounds,s=new Float32Array(18*(r[0].length+r[1].length)),i=(this.plot.zeroLineEnable,0),d=[[],[]],t=0;t<2;++t)for(var p=d[t],c=r[t],l=u[t],f=u[t+2],a=0;a<c.length;++a){o=(c[a].x-l)/(f-l),p.push(o);for(n=0;n<6;++n)s[i++]=o,s[i++]=h[n],s[i++]=m[n]}this.ticks=d,this.vbo.update(s)}),o.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl;return new r(e,l(t,[-1,-1,-1,1,1,-1,1,1]),c(t,a.lineVert,a.lineFrag))};var s,o,i,l=n(2762),c=n(9405),a=n(3603);function r(e,t,n){this.plot=e,this.vbo=t,this.shader=n}s=r.prototype,s.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},s.drawLine=(o=[0,0],i=[0,0],function(e,t,n,s,a,r){var l=this.plot,c=this.shader,d=l.gl;o[0]=e,o[1]=t,i[0]=n,i[1]=s,c.uniforms.start=o,c.uniforms.end=i,c.uniforms.width=a*l.pixelRatio,c.uniforms.color=r,d.drawArrays(d.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(e,t,n){"use strict";var s=n(3236),o=s([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);e.exports={lineVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:o,textVert:s([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:o,gridVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:o,boxVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(e,t,n){"use strict";e.exports=function(e){var t=e.gl;return new m(e,p(t),f(t,h.textVert,h.textFrag))};var s,o,i,a,r,c,d,p=n(2762),f=n(9405),l=n(529),u=n(2478),h=n(3603);function m(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}i=m.prototype,i.drawTicks=(o=[0,0],s=[0,0],d=[0,0],function(e){var c,n=this.plot,t=this.shader,x=this.tickX[e],i=this.tickOffset[e],r=n.gl,h=n.viewBox,g=n.dataBox,m=n.screenBox,f=n.pixelRatio,C=n.tickEnable,O=n.tickPad,E=n.tickColor,v=n.tickAngle,b=n.labelEnable,j=n.labelPad,y=n.labelColor,_=n.labelAngle,w=this.labelOffset[e],p=this.labelCount[e],a=u.lt(x,g[e]),l=u.le(x,g[e+2]);o[0]=o[1]=0,o[e]=1,s[e]=(h[2+e]+h[e])/(m[2+e]-m[e])-1,c=2/m[2+(1^e)]-m[1^e],s[1^e]=c*h[1^e]-1,C[e]&&(s[1^e]-=c*f*O[e],a<l&&i[l]>i[a]&&(t.uniforms.dataAxis=o,t.uniforms.screenOffset=s,t.uniforms.color=E[e],t.uniforms.angle=v[e],r.drawArrays(r.TRIANGLES,i[a],i[l]-i[a]))),b[e]&&p&&(s[1^e]-=c*f*j[e],t.uniforms.dataAxis=d,t.uniforms.screenOffset=s,t.uniforms.color=y[e],t.uniforms.angle=_[e],r.drawArrays(r.TRIANGLES,w,p)),s[1^e]=c*h[2+(1^e)]-1,C[e+2]&&(s[1^e]+=c*f*O[e+2],a<l&&i[l]>i[a]&&(t.uniforms.dataAxis=o,t.uniforms.screenOffset=s,t.uniforms.color=E[e+2],t.uniforms.angle=v[e+2],r.drawArrays(r.TRIANGLES,i[a],i[l]-i[a]))),b[e+2]&&p&&(s[1^e]+=c*f*j[e+2],t.uniforms.dataAxis=d,t.uniforms.screenOffset=s,t.uniforms.color=y[e+2],t.uniforms.angle=_[e+2],r.drawArrays(r.TRIANGLES,w,p))}),i.drawTitle=function(){var t=[0,0],e=[0,0];return function(){var n,s=this.plot,o=this.shader,a=s.gl,i=s.screenBox,r=s.titleCenter,c=s.titleAngle,l=s.titleColor,d=s.pixelRatio;if(this.titleCount){for(n=0;n<2;++n)e[n]=2*(r[n]*d-i[n])/(i[2+n]-i[n])-1;o.bind(),o.uniforms.dataAxis=t,o.uniforms.screenOffset=e,o.uniforms.angle=c,o.uniforms.color=l,a.drawArrays(a.TRIANGLES,this.titleOffset,this.titleCount)}}}(),i.bind=(r=[0,0],c=[0,0],a=[0,0],function(){var s=this.plot,n=this.shader,i=s._tickBounds,o=s.dataBox,t=s.screenBox,l=s.viewBox;n.bind();for(e=0;e<2;++e){var e,h=i[e],g=i[e+2]-h,f=.5*(o[e+2]+o[e]),d=o[e+2]-o[e],p=l[e],u=l[e+2]-p,v=t[e],m=t[e+2]-v;c[e]=2*g/d*u/m,r[e]=2*(h-f)/d*u/m}a[1]=2*s.pixelRatio/(t[3]-t[1]),a[0]=a[1]*(t[3]-t[1])/(t[2]-t[0]),n.uniforms.dataScale=c,n.uniforms.dataShift=r,n.uniforms.textScale=a,this.vbo.bind(),n.attributes.textCoordinate.pointer()}),i.update=function(e){var t,n,s,i,r,o=[],O=e.ticks,d=e.bounds;for(t=0;t<2;++t){var u=[Math.floor(o.length/3)],h=[-1/0],m=O[t];for(n=0;n<m.length;++n){var a=m[n],f=a.x,w=a.text,g=a.font||"sans-serif",v=a.fontStyle||"normal",b=a.fontWeight||"normal",j=a.fontVariant||"normal";i=a.fontSize||12;for(var y=1/(d[t+2]-d[t]),_=d[t],p=w.split(`
`),c=0;c<p.length;c++)for(s=l(g,p[c],{fontStyle:v,fontWeight:b,fontVariant:j}).data,r=0;r<s.length;r+=2)o.push(s[r]*i,-s[r+1]*i-c*i*1.2,(f-_)*y);u.push(Math.floor(o.length/3)),h.push(f)}this.tickOffset[t]=u,this.tickX[t]=h}for(t=0;t<2;++t){for(this.labelOffset[t]=Math.floor(o.length/3),s=l(e.labelFont[t],e.labels[t],{fontStyle:e.labelFontStyle[t],fontWeight:e.labelFontWeight[t],fontVariant:e.labelFontVariant[t],textAlign:"center"}).data,i=e.labelSize[t],n=0;n<s.length;n+=2)o.push(s[n]*i,-s[n+1]*i,0);this.labelCount[t]=Math.floor(o.length/3)-this.labelOffset[t]}for(this.titleOffset=Math.floor(o.length/3),s=l(e.titleFont,e.title,{fontStyle:e.titleFontStyle,fontWeight:e.titleFontWeight,fontVariant:e.titleFontVariant}).data,i=e.titleSize,n=0;n<s.length;n+=2)o.push(s[n]*i,-s[n+1]*i,0);this.titleCount=Math.floor(o.length/3)-this.titleOffset,this.vbo.update(o)},i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(e,t,n){"use strict";e.exports=function(e){var n=e.gl,t=new i(n,l(n,[n.drawingBufferWidth,n.drawingBufferHeight]));return t.grid=d(t),t.text=a(t),t.line=r(t),t.box=c(t),t.update(e),t};var s,l=n(3589),d=n(1913),a=n(2142),r=n(4747),c=n(8120);function i(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}s=i.prototype;function o(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function u(e,t){return e.x-t.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var t,i,c,l,m,e=this.gl,s=this.screenBox,n=this.viewBox,d=this.dataBox,a=this.pixelRatio,j=this.grid,r=this.line,f=this.text,g=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){(this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.borderColor)&&(e.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),i=this.borderColor,e.clearColor(i[0]*i[3],i[1]*i[3],i[2]*i[3],i[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)),e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]),c=this.backgroundColor,e.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),e.clear(e.COLOR_BUFFER_BIT),j.draw();var p=this.zeroLineEnable,v=this.zeroLineColor,b=this.zeroLineWidth;if(p[0]||p[1]){r.bind();for(t=0;t<2;++t)p[t]&&d[t]<=0&&d[t+2]>=0&&(l=s[t]-d[t]*(s[t+2]-s[t])/(d[t+2]-d[t]),0===t?r.drawLine(l,s[1],l,s[3],b[t],v[t]):r.drawLine(s[0],l,s[2],l,b[t],v[t]))}for(t=0;t<g.length;++t)g[t].draw();e.viewport(s[0],s[1],s[2]-s[0],s[3]-s[1]),e.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),this.grid.drawTickMarks(),r.bind();var u=this.borderLineEnable,o=this.borderLineWidth,h=this.borderLineColor;for(u[1]&&r.drawLine(n[0],n[1]-.5*o[1]*a,n[0],n[3]+.5*o[3]*a,o[1],h[1]),u[0]&&r.drawLine(n[0]-.5*o[0]*a,n[1],n[2]+.5*o[2]*a,n[1],o[0],h[0]),u[3]&&r.drawLine(n[2],n[1]-.5*o[1]*a,n[2],n[3]+.5*o[3]*a,o[3],h[3]),u[2]&&r.drawLine(n[0]-.5*o[0]*a,n[3],n[2]+.5*o[2]*a,n[3],o[2],h[2]),f.bind(),t=0;t<2;++t)f.drawTicks(t);this.titleEnable&&f.drawTitle(),m=this.overlays;for(t=0;t<m.length;++t)m[t].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}},s.drawPick=function(){if(!this.static){e=this.pickBuffer,this.gl,this._pickTimeout=null,e.begin();for(var e,n=1,s=this.objects,t=0;t<s.length;++t)n=s[t].drawPick(n);e.end()}},s.pick=function(e,t){if(!this.static){var o,i=this.pixelRatio,a=this.pickPixelRatio,l=this.viewBox,d=0|Math.round((e-l[0]/i)*a),r=0|Math.round((t-l[1]/i)*a),n=this.pickBuffer.query(d,r,this.pickRadius);if(!n)return null;for(var u=n.id+(n.value[0]<<8)+(n.value[1]<<16)+(n.value[2]<<24),c=this.objects,s=0;s<c.length;++s)if(o=c[s].pick(d,r,u),o)return o;return null}},s.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},s.setDataBox=function(e){var t=this.dataBox;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3])&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},s.setViewBox=function(e){var s,t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t),s=this.pickPixelRatio,this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*s),0|Math.round((e[3]-e[1])*s)],this.setDirty()},s.update=function(e){e=e||{},c=this.gl,this.pixelRatio=e.pixelRatio||1,n=this.pixelRatio,this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,c.drawingBufferWidth/n,c.drawingBufferHeight/n]),this.screenBox,this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var t,n,s,a,r,c,i=this.viewBox,l=(i[2]-i[0])/(i[3]-i[1]);this.setDataBox(e.dataBox||[-10,-10/l,10,10/l]),this.borderColor=!1!==e.borderColor&&(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(i[0]+i[2])/n,(i[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e)||!!e.titleEnable,this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),r=e.ticks||[[],[]],t=this._tickBounds,t[0]=t[1]=1/0,t[2]=t[3]=-1/0;for(s=0;s<2;++s)a=r[s].slice(0),0!==a.length&&(a.sort(u),t[s]=Math.min(t[s],a[0].x),t[s+2]=Math.max(t[s+2],a[a.length-1].x));this.grid.update({bounds:t,ticks:r}),this.text.update({bounds:t,ticks:r,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],labelFontStyle:e.labelFontStyle||["normal","normal"],labelFontWeight:e.labelFontWeight||["normal","normal"],labelFontVariant:e.labelFontVariant||["normal","normal"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif",titleFontStyle:e.titleFontStyle||"normal",titleFontWeight:e.titleFontWeight||"normal",titleFontVariant:e.titleFontVariant||"normal"}),this.static=!!e.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();for(this.objects.length=0,e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},s.removeObject=function(e){for(var n=this.objects,t=0;t<n.length;++t)if(n[t]===e){n.splice(t,1),this.setDirty();break}},s.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},s.removeOverlay=function(e){for(var n=this.overlays,t=0;t<n.length;++t)if(n[t]===e){n.splice(t,1),this.setOverlayDirty();break}}},4437:function(e,t,n){"use strict";e.exports=function(e,t){e=e||document.body,d=[.01,1/0],"distanceLimits"in(t=t||{})&&(d[0]=t.distanceLimits[0],d[1]=t.distanceLimits[1]),"zoomMin"in t&&(d[0]=t.zoomMin),"zoomMax"in t&&(d[1]=t.zoomMax);var d,n=a({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:d}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0,m=e.clientWidth,f=e.clientHeight,l={keyBindingMode:"rotate",enableWheel:!0,view:n,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:n.modes,_ortho:t._ortho||t.projection&&"orthographic"===t.projection.type||!1,tick:function(){var c,o=s(),i=this.delay,l=o-2*i;n.idle(o-i),n.recalcMatrix(l),n.flush(o-(100+2*i));for(var a=!0,r=n.computedMatrix,t=0;t<16;++t)a=a&&h[t]===r[t],h[t]=r[t];return c=e.clientWidth===m&&e.clientHeight===f,m=e.clientWidth,f=e.clientHeight,a?!c:(u=Math.exp(n.computedRadius[0]),!0)},lookAt:function(e,t,s){n.lookAt(n.lastT(),e,t,s)},rotate:function(e,t,s){n.rotate(n.lastT(),e,t,s)},pan:function(e,t,s){n.pan(n.lastT(),e,t,s)},translate:function(e,t,s){n.translate(n.lastT(),e,t,s)}};return Object.defineProperties(l,{matrix:{get:function(){return n.computedMatrix},set:function(e){return n.setMatrix(n.lastT(),e),n.computedMatrix},enumerable:!0},mode:{get:function(){return n.getMode()},set:function(e){var t,a=n.computedUp.slice(),o=n.computedEye.slice(),i=n.computedCenter.slice();return(n.setMode(e),"turntable"===e)&&(t=s(),n._active.lookAt(t,o,i,a),n._active.lookAt(t+500,o,i,[0,0,1]),n._active.flush(t)),n.getMode()},enumerable:!0},center:{get:function(){return n.computedCenter},set:function(e){return n.lookAt(n.lastT(),null,e),n.computedCenter},enumerable:!0},eye:{get:function(){return n.computedEye},set:function(e){return n.lookAt(n.lastT(),e),n.computedEye},enumerable:!0},up:{get:function(){return n.computedUp},set:function(e){return n.lookAt(n.lastT(),null,null,e),n.computedUp},enumerable:!0},distance:{get:function(){return u},set:function(e){return n.setDistance(n.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return n.getDistanceLimits(d)},set:function(e){return n.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),l._lastX=-1,l._lastY=-1,l._lastMods={shift:!1,control:!1,alt:!1,meta:!1},l.enableMouseListeners=function(){function t(t,o,i,a){if(m=l.keyBindingMode,!1!==m){var m,j,C="rotate"===m,x="pan"===m,_="zoom"===m,d=!!a.control,h=!!a.alt,r=!!a.shift,c=!!(1&t),y=!!(2&t),E=!!(4&t),v=1/e.clientHeight,b=v*(o-l._lastX),p=v*(i-l._lastY),w=l.flipX?1:-1,O=l.flipY?1:-1,g=Math.PI*l.rotateSpeed,f=s();return-1!==l._lastX&&-1!==l._lastY&&((C&&c&&!d&&!h&&!r||c&&!d&&!h&&r)&&n.rotate(f,w*g*b,-O*g*p,0),(x&&c&&!d&&!h&&!r||y||c&&d&&!h&&!r)&&n.pan(f,-l.translateSpeed*b*u,l.translateSpeed*p*u,0),_&&c&&!d&&!h&&!r||E||c&&!d&&h&&!r)&&(j=-l.zoomSpeed*p/window.innerHeight*(f-n.lastT())*100,n.pan(f,0,0,u*(Math.exp(j)-1))),l._lastX=o,l._lastY=i,l._lastMods=a,!0}}l.mouseListener=r(e,t),e.addEventListener("touchstart",function(n){var s=i(n.changedTouches[0],e);t(0,s[0],s[1],l._lastMods),t(1,s[0],s[1],l._lastMods)},!!o&&{passive:!0}),e.addEventListener("touchmove",function(n){var s=i(n.changedTouches[0],e);t(1,s[0],s[1],l._lastMods),n.preventDefault()},!!o&&{passive:!1}),e.addEventListener("touchend",function(){t(0,l._lastX,l._lastY,l._lastMods)},!!o&&{passive:!0}),l.wheelListener=c(e,function(e,t){if(!1!==l.keyBindingMode&&l.enableWheel){var i,a=l.flipX?1:-1,r=l.flipY?1:-1,o=s();Math.abs(e)>Math.abs(t)?n.rotate(o,0,0,-e*a*Math.PI*l.rotateSpeed/window.innerWidth):l._ortho||(i=-l.zoomSpeed*r*t/window.innerHeight*(o-n.lastT())/20,n.pan(o,0,0,u*(Math.exp(i)-1)))}},!0)},l.enableMouseListeners(),l};var s=n(3025),a=n(6296),r=n(351),c=n(8512),i=n(24),o=n(7520)},799:function(e,t,n){var s=n(3236),o=n(9405),i=s([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=s([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);e.exports=function(e){return o(e,i,a,null,[{name:"position",type:"vec2"}])}},4100:function(e,t,n){"use strict";var i=n(4437),f=n(3837),d=n(5445),a=n(4449),r=n(3589),c=n(2260),l=n(7169),v=n(351),u=n(4772),h=n(4040),m=n(799),o=n(9216)({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(e){var t,n=Math.round(Math.log(Math.abs(e))/Math.log(10));return n<0?(t=Math.round(Math.pow(10,-n)),Math.ceil(e*t)/t):n>0?(t=Math.round(Math.pow(10,n)),Math.ceil(e/t)*t):Math.ceil(e)}function s(e){return"boolean"!=typeof e||e}e.exports={createScene:function(e){if((e=e||{}).camera=e.camera||{},_=e.canvas,_||(_=document.createElement("canvas"),e.container?e.container.appendChild(_):document.body.appendChild(_)),t=e.gl,t||(e.glOptions&&(o=!!e.glOptions.preserveDrawingBuffer),t=function(e,t){var n=null;try{(n=e.getContext("webgl",t))||(n=e.getContext("experimental-webgl",t))}catch{return null}return n}(_,e.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:o})),!t)throw new Error("webgl not supported");var B=e.bounds||[[-10,-10,-10],[10,10,10]],b=new p,D=c(t,t.drawingBufferWidth,t.drawingBufferHeight,{preferFloat:!o}),L=m(t),H=e.cameraObject&&!0===e.cameraObject._ortho||e.camera.projection&&"orthographic"===e.camera.projection.type||!1,$={eye:e.camera.eye||[2,0,0],center:e.camera.center||[0,0,0],up:e.camera.up||[0,1,0],zoomMin:e.camera.zoomMax||.1,zoomMax:e.camera.zoomMin||100,mode:e.camera.mode||"turntable",_ortho:H},R=e.axes||{},y=f(t,R);y.enable=!R.disable;var t,_,M,F,W=e.spikes||{},E=a(t,W),j=[],k=[],A=[],C=[],O=!0,w=!0,x={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},S=(w=!0,[t.drawingBufferWidth,t.drawingBufferHeight]),V=e.cameraObject||i(_,$),n={gl:t,contextLost:!1,pixelRatio:e.pixelRatio||1,canvas:_,selection:b,camera:V,axes:y,axesPixels:null,spikes:E,bounds:B,objects:j,shape:S,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:s(e.autoResize),autoBounds:s(e.autoBounds),autoScale:!!e.autoScale,autoCenter:s(e.autoCenter),clipToBounds:s(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:x,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(e){this.aspect[0]=e.x,this.aspect[1]=e.y,this.aspect[2]=e.z,w=!0},setBounds:function(e,t){this.bounds[0][e]=t.min,this.bounds[1][e]=t.max},setClearColor:function(e){this.clearColor=e},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},T=[t.drawingBufferWidth/n.pixelRatio|0,t.drawingBufferHeight/n.pixelRatio|0];function z(){if(!n._stopped&&n.autoResize){var e,i,a,t=_.parentNode,s=1,o=1;t&&t!==document.body?(s=t.clientWidth,o=t.clientHeight):(s=window.innerWidth,o=window.innerHeight),i=0|Math.ceil(s*n.pixelRatio),a=0|Math.ceil(o*n.pixelRatio),(i!==_.width||a!==_.height)&&(_.width=i,_.height=a,e=_.style,e.position=e.position||"absolute",e.left="0px",e.top="0px",e.width=s+"px",e.height=o+"px",O=!0)}}function I(){for(var n,o,i,a,c=j.length,s=C.length,e=0;e<s;++e)A[e]=0;t:for(e=0;e<c;++e)if(i=j[e],o=i.pickSlots,o){for(n=0;n<s;++n)if(A[n]+o<255){k[e]=n,i.setPickBase(A[n]+1),A[n]+=o;continue t}a=r(t,S),k[e]=s,C.push(a),A.push(o),i.setPickBase(1),s+=1}else k[e]=-1;for(;s>0&&0===A[s-1];)A.pop(),C.pop().dispose()}function N(){if(n.contextLost)return!0;t.isContextLost()&&(n.contextLost=!0,n.mouseListener.enabled=!1,n.selection.object=null,n.oncontextloss&&n.oncontextloss())}n.autoResize&&z(),window.addEventListener("resize",z),n.update=function(e){n._stopped||(e=e||{},O=!0,w=!0)},n.add=function(e){n._stopped||(e.axes=y,j.push(e),k.push(-1),O=!0,w=!0,I())},n.remove=function(e){if(!n._stopped){var t=j.indexOf(e);t<0||(j.splice(t,1),k.pop(),O=!0,w=!0,I())}},n.dispose=function(){if(!n._stopped&&(n._stopped=!0,window.removeEventListener("resize",z),_.removeEventListener("webglcontextlost",N),n.mouseListener.enabled=!1,!n.contextLost)){y.dispose(),E.dispose();for(var e=0;e<j.length;++e)j[e].dispose();for(D.dispose(),e=0;e<C.length;++e)C[e].dispose();L.dispose(),t=null,y=null,E=null,j=[]}},n._mouseRotating=!1,n._prevButtons=0,n.enableMouseListeners=function(){n.mouseListener=v(_,function(e,t,s){if(!n._stopped){var o,i,a,r,l,d,u=C.length,h=j.length,c=b.object;if(b.distance=1/0,b.mouse[0]=t,b.mouse[1]=s,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null,l=!1,e&&n._prevButtons)n._mouseRotating=!0;else{n._mouseRotating&&(w=!0),n._mouseRotating=!1;for(r=0;r<u;++r)if(i=C[r].query(t,T[1]-s-1,n.pickRadius),i){if(i.distance>b.distance)continue;for(a=0;a<h;++a)d=j[a],k[a]===r&&(o=d.pick(i),o&&(b.buttons=e,b.screen=i.coord,b.distance=i.distance,b.object=d,b.index=o.distance,b.dataPosition=o.position,b.dataCoordinate=o.dataCoordinate,b.data=o,l=!0))}}c&&c!==b.object&&(c.highlight&&c.highlight(null),O=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),O=!0),(l=l||b.object!==c)&&n.onselect&&n.onselect(b),1&e&&!(1&n._prevButtons)&&n.onclick&&n.onclick(b),n._prevButtons=e}})},_.addEventListener("webglcontextlost",N),M=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=[M[0].slice(),M[1].slice()];function P(){if(!N()){z(),P=n.camera.tick(),x.view=n.camera.matrix,O=O||P,w=w||P,y.pixelRatio=n.pixelRatio,E.pixelRatio=n.pixelRatio;var s,o,i,c,f,p,v,_,A,R,P,m=j.length,a=M[0],r=M[1];a[0]=a[1]=a[2]=1/0,r[0]=r[1]=r[2]=-1/0;for(s=0;s<m;++s)if((o=j[s]).pixelRatio=n.pixelRatio,o.axes=n.axes,O=O||!!o.dirty,w=w||!!o.dirty,_=o.bounds,_)for(var B=_[0],I=_[1],e=0;e<3;++e)a[e]=Math.min(a[e],B[e]),r[e]=Math.max(r[e],I[e]);if(i=n.bounds,n.autoBounds)for(e=0;e<3;++e)r[e]<a[e]?(a[e]=-1,r[e]=1):(a[e]===r[e]&&(a[e]-=1,r[e]+=1),A=.05*(r[e]-a[e]),a[e]=a[e]-A,r[e]=r[e]+A),i[0][e]=a[e],i[1][e]=r[e];c=!1;for(e=0;e<3;++e)c=c||F[0][e]!==i[0][e]||F[1][e]!==i[1][e],F[0][e]=i[0][e],F[1][e]=i[1][e];if(w=w||c,O=O||c){if(c){R=[0,0,0];for(s=0;s<3;++s)R[s]=g((i[1][s]-i[0][s])/10);y.autoTicks?y.update({bounds:i,tickSpacing:R}):y.update({bounds:i})}v=t.drawingBufferWidth,p=t.drawingBufferHeight;for(S[0]=v,S[1]=p,T[0]=0|Math.max(v/n.pixelRatio,1),T[1]=0|Math.max(p/n.pixelRatio,1),function(e,t){var n,a,s=e.bounds,i=e.cameraParams,c=i.projection,o=i.model,f=e.gl.drawingBufferWidth,p=e.gl.drawingBufferHeight,l=e.zNear,d=e.zFar,m=e.fovy,r=f/p;t?(h(c,-r,r,-1,1,l,d),i._ortho=!0):(u(c,m,r,l,d),i._ortho=!1);for(n=0;n<16;++n)o[n]=0;o[15]=1,a=0;for(n=0;n<3;++n)a=Math.max(a,s[1][n]-s[0][n]);for(n=0;n<3;++n)e.autoScale?o[5*n]=e.aspect[n]/(s[1][n]-s[0][n]):o[5*n]=1/a,e.autoCenter&&(o[12+n]=.5*-o[5*n]*(s[0][n]+s[1][n]))}(n,H),s=0;s<m;++s)(o=j[s]).axesBounds=i,n.clipToBounds&&(o.clipBounds=i);b.object&&(n.snapToData?E.position=b.dataCoordinate:E.position=b.dataPosition,E.bounds=i),w&&(w=!1,function(){if(!N()){t.colorMask(!0,!0,!0,!0),t.depthMask(!0),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL);for(var e,s,o,i=j.length,a=C.length,n=0;n<a;++n){s=C[n],s.shape=T,s.begin();for(e=0;e<i;++e)k[e]===n&&(o=j[e],o.drawPick&&(o.pixelRatio=1,o.drawPick(x)));s.end()}}}()),n.axesPixels=d(n.axes,x,v,p),n.onrender&&n.onrender(),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,v,p),n.clearRGBA(),t.depthMask(!0),t.colorMask(!0,!0,!0,!0),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.disable(t.BLEND),t.disable(t.CULL_FACE),f=!1;for(y.enable&&(f=f||y.isTransparent(),y.draw(x)),E.axes=y,b.object&&E.draw(x),t.disable(t.CULL_FACE),s=0;s<m;++s)(o=j[s]).axes=y,o.pixelRatio=n.pixelRatio,o.isOpaque&&o.isOpaque()&&o.draw(x),o.isTransparent&&o.isTransparent()&&(f=!0);if(f){for(D.shape=S,D.bind(),t.clear(t.DEPTH_BUFFER_BIT),t.colorMask(!1,!1,!1,!1),t.depthMask(!0),t.depthFunc(t.LESS),y.enable&&y.isTransparent()&&y.drawTransparent(x),s=0;s<m;++s)(o=j[s]).isOpaque&&o.isOpaque()&&o.draw(x);for(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.colorMask(!0,!0,!0,!0),t.depthMask(!1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),y.isTransparent()&&y.drawTransparent(x),s=0;s<m;++s)(o=j[s]).isTransparent&&o.isTransparent()&&o.drawTransparent(x);t.bindFramebuffer(t.FRAMEBUFFER,null),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.disable(t.DEPTH_TEST),L.bind(),D.color[0].bind(0),L.uniforms.accumBuffer=0,l(t),t.disable(t.BLEND)}for(O=!1,s=0;s<m;++s)j[s].dirty=!1}}}return n.enableMouseListeners(),function e(){n._stopped||n.contextLost||(P(),requestAnimationFrame(e))}(),n.redraw=function(){n._stopped||(O=!0,P())},n},createCamera:i}},6640:function(e,t,n){var s=n(3236);t.pointVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),t.pointFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),t.pickVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),t.pickFragment=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(e,t,n){"use strict";var s,o,i,l=n(9405),d=n(2762),a=n(1888),r=n(6640);function c(e,t,n,s,o){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.shader=s,this.pickShader=o,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}e.exports=function(e,t){var n=e.gl,s=new c(e,d(n),d(n),l(n,r.pointVertex,r.pointFragment),l(n,r.pickVertex,r.pickFragment));return s.update(t),e.addObject(s),s},s=c.prototype,s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},s.update=function(e){function t(t,n){return t in e?e[t]:n}e=e||{},this.sizeMin=t("sizeMin",.5),this.sizeMax=t("sizeMax",20),this.color=t("color",[1,0,0,1]).slice(),this.areaRatio=t("areaRatio",1),this.borderColor=t("borderColor",[0,0,0,1]).slice(),this.blend=t("blend",!1);var n,o=e.positions.length>>>1,r=e.positions instanceof Float32Array,c=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=o,s=e.positions,i=r?s:a.mallocFloat32(s.length),l=c?e.idToIndex:a.mallocInt32(o);if(r||i.set(s),!c)for(i.set(s),n=0;n<o;n++)l[n]=n;this.points=s,this.offsetBuffer.update(i),this.pickBuffer.update(l),r||a.free(i),c||a.free(l),this.pointCount=o,this.pickOffset=0},s.unifiedDraw=(i=[1,0,0,0,1,0,0,0,1],o=[0,0,0,0],function(e){var a,r,c=void 0!==e,n=c?this.pickShader:this.shader,t=this.plot.gl,s=this.plot.dataBox;if(0===this.pointCount)return e;var l=s[2]-s[0],d=s[3]-s[1],h=function(e,t){var n,s,o,i=0,a=e.length>>>1;for(n=0;n<a;n++)s=e[2*n],o=e[2*n+1],s>=t[0]&&s<=t[2]&&o>=t[1]&&o<=t[3]&&i++;return i}(this.points,s),u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));return i[0]=2/l,i[4]=2/d,i[6]=-2*s[0]/l-1,i[7]=-2*s[1]/d-1,this.offsetBuffer.bind(),n.bind(),n.attributes.position.pointer(),n.uniforms.matrix=i,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointCloud=u<5,n.uniforms.pointSize=u,n.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(o[0]=255&e,o[1]=e>>8&255,o[2]=e>>16&255,o[3]=e>>24&255,this.pickBuffer.bind(),n.attributes.pickId.pointer(t.UNSIGNED_BYTE),n.uniforms.pickOffset=o,this.pickOffset=e),a=t.getParameter(t.BLEND),r=t.getParameter(t.DITHER),a&&!this.blend&&t.disable(t.BLEND),r&&t.disable(t.DITHER),t.drawArrays(t.POINTS,0,this.pointCount),a&&!this.blend&&t.enable(t.BLEND),r&&t.enable(t.DITHER),e+this.pointCount}),s.draw=s.unifiedDraw,s.drawPick=s.unifiedDraw,s.pick=function(e,t,n){var s,i,o=this.pickOffset,a=this.pointCount;return n<o||n>=o+a?null:(s=n-o,i=this.points,{object:this,pointId:s,dataCoord:[i[2*s],i[2*s+1]]})}},783:function(e){e.exports=function(e,t,n,s){var o,i,a,d,h,p=t[0],g=t[1],f=t[2],m=t[3],r=n[0],l=n[1],c=n[2],u=n[3];return(a=p*r+g*l+f*c+m*u)<0&&(a=-a,r=-r,l=-l,c=-c,u=-u),1-a>1e-6?(d=Math.acos(a),h=Math.sin(d),o=Math.sin((1-s)*d)/h,i=Math.sin(s*d)/h):(o=1-s,i=s),e[0]=o*p+i*r,e[1]=o*g+i*l,e[2]=o*f+i*c,e[3]=o*m+i*u,e}},5964:function(e){"use strict";e.exports=function(e){return e||0===e?e.toString():""}},9366:function(e,t,n){"use strict";var s,o=n(4359);e.exports=function(e,t,n){var i,a,r,c,l,u,h,f,m=[t.style,t.weight,t.variant,t.family].join("_"),d=s[m];if(d||(d=s[m]={}),e in d)return d[e];if(u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t.family,fontStyle:t.style,fontWeight:t.weight,fontVariant:t.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},l=o(e,u),u.triangles=!1,r=o(e,u),n&&1!==n){for(a=0;a<l.positions.length;++a)for(i=0;i<l.positions[a].length;++i)l.positions[a][i]/=n;for(a=0;a<r.positions.length;++a)for(i=0;i<r.positions[a].length;++i)r.positions[a][i]/=n}c=[[1/0,1/0],[-1/0,-1/0]],f=r.positions.length;for(a=0;a<f;++a){h=r.positions[a];for(i=0;i<2;++i)c[0][i]=Math.min(c[0][i],h[i]),c[1][i]=Math.max(c[1][i],h[i])}return d[e]=[l,r,c]},s={}},1283:function(e,t,n){var v=n(9405),i=n(3236),c=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),d=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),r=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),s=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],u={vertex:c,fragment:a,attributes:s},h={vertex:l,fragment:a,attributes:s},m={vertex:d,fragment:a,attributes:s},f={vertex:c,fragment:r,attributes:s},p={vertex:l,fragment:r,attributes:s},g={vertex:d,fragment:r,attributes:s};function o(e,t){var s=v(e,t),n=s.attributes;return n.position.location=0,n.color.location=1,n.glyph.location=2,n.id.location=3,s}t.createPerspective=function(e){return o(e,u)},t.createOrtho=function(e){return o(e,h)},t.createProject=function(e){return o(e,m)},t.createPickPerspective=function(e){return o(e,f)},t.createPickOrtho=function(e){return o(e,p)},t.createPickProject=function(e){return o(e,g)}},8418:function(e,t,n){"use strict";var s,b,F=n(5219),c=n(2762),M=n(8116),o=n(1888),S=n(6760),r=n(1283),v=n(9366),A=n(5964),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(e,t){var n=e[0],s=e[1],o=e[2],i=e[3];return e[0]=t[0]*n+t[4]*s+t[8]*o+t[12]*i,e[1]=t[1]*n+t[5]*s+t[9]*o+t[13]*i,e[2]=t[2]*n+t[6]*s+t[10]*o+t[14]*i,e[3]=t[3]*n+t[7]*s+t[11]*o+t[15]*i,e}function m(e,t,n,s){return d(s,s),d(s,s),d(s,s)}function k(e,t){this.index=e,this.dataCoordinate=this.position=t}function p(e){return!0===e||e>1?1:e}function g(e,t,n,s,o,i,a,r,c,l,d,u){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=s,this.pointBuffer=o,this.colorBuffer=i,this.glyphBuffer=a,this.idBuffer=r,this.vao=c,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=l,this.pickOrthoShader=d,this.pickProjectShader=u,this.points=[],this._selectResult=new k(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}e.exports=function(e){var t=e.gl,d=r.createPerspective(t),u=r.createOrtho(t),h=r.createProject(t),m=r.createPickPerspective(t),f=r.createPickOrtho(t),l=r.createPickProject(t),n=c(t),s=c(t),o=c(t),i=c(t),a=new g(t,d,u,h,n,s,o,i,M(t,[{buffer:n,size:3,type:t.FLOAT},{buffer:s,size:4,type:t.FLOAT},{buffer:o,size:2,type:t.FLOAT},{buffer:i,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),m,f,l);return a.update(e),a},s=g.prototype,s.pickSlots=1,s.setPickBase=function(e){this.pickId=e},s.isTransparent=function(){if(this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectHasAlpha)return!0;return!1},s.isOpaque=function(){if(!this.hasAlpha)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&!this.projectHasAlpha)return!0;return!1};var a=[0,0],E=[0,0,0],x=[0,0,0],_=[0,0,0,1],w=[0,0,0,1],O=i.slice(),u=[0,0,0],C=[[0,0,0],[0,0,0]];function j(e){return e[0]=e[1]=e[2]=0,e}function f(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function h(e,t,n,s){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=s,e}b=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function l(e,t,n,s,o,r,c){var l,d=n.gl;((r===n.projectHasAlpha||c)&&function(e,t,n,s){var o,c,l,b,k,A,F,z,N,P=t.axesProject,y=t.gl,r=e.uniforms,M=n.model||i,R=n.view||i,L=n.projection||i,D=t.axesBounds,T=function(e){for(var t,s=C,n=0;n<2;++n)for(t=0;t<3;++t)s[n][t]=Math.max(Math.min(e[n][t],1e8),-1e8);return s}(t.clipBounds),H=t.axes&&t.axes.lastCubeProps?t.axes.lastCubeProps.axis:[1,1,1];a[0]=2/y.drawingBufferWidth,a[1]=2/y.drawingBufferHeight,e.bind(),r.view=R,r.projection=L,r.screenSize=a,r.highlightId=t.highlightId,r.highlightScale=t.highlightScale,r.clipBounds=T,r.pickGroup=t.pickId/255,r.pixelRatio=s;for(o=0;o<3;++o)if(P[o]){r.scale=t.projectScale[o],r.opacity=t.projectOpacity[o];for(l=O,c=0;c<16;++c)l[c]=0;for(c=0;c<4;++c)l[5*c]=1;l[5*o]=0,H[o]<0?l[12+o]=D[0][o]:l[12+o]=D[1][o],S(l,M,l),r.model=l;var g=(o+1)%3,v=(o+2)%3,p=j(E),d=j(x);p[g]=1,d[v]=1,b=m(0,0,0,f(_,p)),k=m(0,0,0,f(w,d)),Math.abs(b[1])>Math.abs(k[1])&&(A=b,b=k,k=A,A=p,p=d,d=A,N=g,g=v,v=N),b[0]<0&&(p[g]=-1),k[1]>0&&(d[v]=-1),F=0,z=0;for(c=0;c<4;++c)F+=Math.pow(M[4*g+c],2),z+=Math.pow(M[4*v+c],2);p[g]/=Math.sqrt(F),d[v]/=Math.sqrt(z),r.axes[0]=p,r.axes[1]=d,r.fragClipBounds[0]=h(u,T[0],o,-1e8),r.fragClipBounds[1]=h(u,T[1],o,1e8),t.vao.bind(),t.vao.draw(y.TRIANGLES,t.vertexCount),t.lineWidth>0&&(y.lineWidth(t.lineWidth*s),t.vao.draw(y.LINES,t.lineVertexCount,t.vertexCount)),t.vao.unbind()}}(t,n,s,o),r===n.hasAlpha||c)&&(e.bind(),l=e.uniforms,l.model=s.model||i,l.view=s.view||i,l.projection=s.projection||i,a[0]=2/d.drawingBufferWidth,a[1]=2/d.drawingBufferHeight,l.screenSize=a,l.highlightId=n.highlightId,l.highlightScale=n.highlightScale,l.fragClipBounds=b,l.clipBounds=n.axes.bounds,l.opacity=n.opacity,l.pickGroup=n.pickId/255,l.pixelRatio=o,n.vao.bind(),n.vao.draw(d.TRIANGLES,n.vertexCount),n.lineWidth>0&&(d.lineWidth(n.lineWidth*o),n.vao.draw(d.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind())}function y(e,t,n,s){var o,i,a,r,l,c=Array.isArray(e)?t<e.length?e[t]:void 0:e,c=A(c),d=!0;return F(c)&&(c="▼",d=!1),n||(n={}),o=n.family,Array.isArray(o)&&(o=o[t]),o||(o="normal"),i=n.weight,Array.isArray(i)&&(i=i[t]),i||(i="normal"),a=n.style,Array.isArray(a)&&(a=a[t]),a||(a="normal"),r=n.variant,Array.isArray(r)&&(r=r[t]),r||(r="normal"),l=v(c,{family:o,weight:i,style:a,variant:r},s),{mesh:(l=v(c,n,s))[0],lines:l[1],bounds:l[2],visible:d}}s.draw=function(e){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!1,!1)},s.drawTransparent=function(e){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,this.pixelRatio,!0,!1)},s.drawPick=function(e){l(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,e,1,!0,!0)},s.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;if(n=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16),n>=this.pointCount||n<0)return null;var t,n,o=this.points[n],s=this._selectResult;s.index=n;for(t=0;t<3;++t)s.position[t]=s.dataCoordinate[t]=o[t];return s},s.highlight=function(e){if(e){var t=e.index,n=255&t,s=t>>8&255,o=t>>16&255;this.highlightId=[n/255,s/255,o/255,0]}else this.highlightId=[1,1,1,1]},s.update=function(e){if(("perspective"in(e=e||{})&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)&&(Array.isArray(e.project)?this.axesProject=e.project:(K=!!e.project,this.axesProject=[K,K,K])),"projectScale"in e&&(Array.isArray(e.projectScale)?this.projectScale=e.projectScale.slice():(m=+e.projectScale,this.projectScale=[m,m,m])),this.projectHasAlpha=!1,"projectOpacity"in e){Array.isArray(e.projectOpacity)?this.projectOpacity=e.projectOpacity.slice():(m=+e.projectOpacity,this.projectOpacity=[m,m,m]);for(n=0;n<3;++n)this.projectOpacity[n]=p(this.projectOpacity[n]),this.projectOpacity[n]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in e&&(this.opacity=p(e.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var c,u,v=e.position,Q={family:e.font||"normal",style:e.fontStyle||"normal",weight:e.fontWeight||"normal",variant:e.fontVariant||"normal"},C=e.alignment||[0,0];if(2===C.length)u=C[0],c=C[1];else for(u=[],c=[],n=0;n<C.length;++n)u[n]=C[n][0],c[n]=C[n][1];var t,n,s,i,a,r,h,m,f,g,b,j,M,z,L,I,B,K,N=[1/0,1/0,1/0],k=[-1/0,-1/0,-1/0],Z=e.glyph,E=e.color,T=e.size,D=e.angle,x=e.lineColor,X=-1,$=0,G=0,q=0;if(v.length){q=v.length;t:for(n=0;n<q;++n){for(i=v[n],t=0;t<3;++t)if(isNaN(i[t])||!isFinite(i[t]))continue t;var H=(g=y(Z,n,Q,this.pixelRatio)).mesh,P=g.lines,A=g.bounds;$+=3*H.cells.length,G+=2*P.edges.length}}var S=$+G,U=o.mallocFloat(3*S),W=o.mallocFloat(4*S),w=o.mallocFloat(2*S),R=o.mallocUint32(S);if(S>0){var _=0,O=$,d=[0,0,0,1],l=[0,0,0,1],J=Array.isArray(E)&&Array.isArray(E[0]),ee=Array.isArray(x)&&Array.isArray(x[0]);t:for(n=0;n<q;++n){for(X+=1,i=v[n],t=0;t<3;++t){if(isNaN(i[t])||!isFinite(i[t]))continue t;k[t]=Math.max(k[t],i[t]),N[t]=Math.min(N[t],i[t])}if(H=(g=y(Z,n,Q,this.pixelRatio)).mesh,P=g.lines,A=g.bounds,I=g.visible,I)if(Array.isArray(E)){if(3===(r=J?n<E.length?E[n]:[0,0,0,0]:E).length){for(t=0;t<3;++t)d[t]=r[t];d[3]=1}else if(4===r.length){for(t=0;t<4;++t)d[t]=r[t];!this.hasAlpha&&r[3]<1&&(this.hasAlpha=!0)}}else d[0]=d[1]=d[2]=0,d[3]=1;else d=[1,1,1,0];if(I)if(Array.isArray(x)){if(3===(r=ee?n<x.length?x[n]:[0,0,0,0]:x).length){for(t=0;t<3;++t)l[t]=r[t];l[t]=1}else if(4===r.length){for(t=0;t<4;++t)l[t]=r[t];!this.hasAlpha&&r[3]<1&&(this.hasAlpha=!0)}}else l[0]=l[1]=l[2]=0,l[3]=1;else l=[1,1,1,0];h=.5,I?Array.isArray(T)?h=n<T.length?+T[n]:12:T?h=+T:this.useOrtho&&(h=12):h=0,z=0,Array.isArray(D)?z=n<D.length?+D[n]:0:D&&(z=+D),L=Math.cos(z),M=Math.sin(z);for(i=v[n],t=0;t<3;++t)k[t]=Math.max(k[t],i[t]),N[t]=Math.min(N[t],i[t]);b=u,j=c,b=0,Array.isArray(u)?b=n<u.length?u[n]:0:u&&(b=u),j=0,Array.isArray(c)?j=n<c.length?c[n]:0:c&&(j=c);var V=[b*=b>0?1-A[0][0]:b<0?1+A[1][0]:1,j*=j>0?1-A[0][1]:j<0?1+A[1][1]:1],F=H.cells||[],Y=H.positions||[];for(t=0;t<F.length;++t)for(B=F[t],f=0;f<3;++f){for(s=0;s<3;++s)U[3*_+s]=i[s];for(s=0;s<4;++s)W[4*_+s]=d[s];R[_]=X,a=Y[B[f]],w[2*_]=h*(L*a[0]-M*a[1]+V[0]),w[2*_+1]=h*(M*a[0]+L*a[1]+V[1]),_+=1}for(F=P.edges,Y=P.positions,t=0;t<F.length;++t)for(B=F[t],f=0;f<2;++f){for(s=0;s<3;++s)U[3*O+s]=i[s];for(s=0;s<4;++s)W[4*O+s]=l[s];R[O]=X,a=Y[B[f]],w[2*O]=h*(L*a[0]-M*a[1]+V[0]),w[2*O+1]=h*(M*a[0]+L*a[1]+V[1]),O+=1}}}this.bounds=[N,k],this.points=v,this.pointCount=v.length,this.vertexCount=$,this.lineVertexCount=G,this.pointBuffer.update(U),this.colorBuffer.update(W),this.glyphBuffer.update(w),this.idBuffer.update(R),o.free(U),o.free(W),o.free(w),o.free(R)},s.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(e,t,n){"use strict";var s=n(3236);t.boxVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),t.boxFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(e,t,n){"use strict";var s,a=n(9405),r=n(2762),o=n(4298);function i(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}e.exports=function(e,t){var s=e.gl,n=new i(e,r(s,[0,0,0,1,1,0,1,1]),a(s,o.boxVertex,o.boxFragment));return n.update(t),e.addOverlay(n),n},s=i.prototype,s.draw=function(){if(this.enabled){var e,l,p,c=this.plot,d=this.selectBox,f=this.borderWidth,g=(this.innerFill,this.innerColor),u=(this.outerFill,this.outerColor),h=this.borderColor,i=c.box,m=c.screenBox,n=c.dataBox,t=c.viewBox,v=c.pixelRatio,a=(d[0]-n[0])*(t[2]-t[0])/(n[2]-n[0])+t[0],s=(d[1]-n[1])*(t[3]-t[1])/(n[3]-n[1])+t[1],r=(d[2]-n[0])*(t[2]-t[0])/(n[2]-n[0])+t[0],o=(d[3]-n[1])*(t[3]-t[1])/(n[3]-n[1])+t[1];a=Math.max(a,t[0]),s=Math.max(s,t[1]),r=Math.min(r,t[2]),o=Math.min(o,t[3]),!(r<a||o<s)&&(i.bind(),l=m[2]-m[0],p=m[3]-m[1],(this.outerFill&&(i.drawBox(0,0,l,s,u),i.drawBox(0,s,a,o,u),i.drawBox(0,o,l,p,u),i.drawBox(r,s,l,o,u)),this.innerFill&&i.drawBox(a,s,r,o,g),f>0)&&(e=f*v,i.drawBox(a-e,s-e,r+e,s+e,h),i.drawBox(a-e,o-e,r+e,o+e,h),i.drawBox(a-e,s-e,a+e,o+e,h),i.drawBox(r-e,s-e,r+e,o+e,h)))}},s.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(e,t,n){"use strict";e.exports=function(e,t){var n=t[0],s=t[1];return new i(e,l(e,n,s,{}),o.mallocUint8(n*s*4))};var s,l=n(2260),o=n(1888),a=n(9618),r=n(8828).nextPow2;function c(e,t,n,s,o){this.coord=[e,t],this.id=n,this.value=s,this.distance=o}function i(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var s=this;this._readCallback=function(){s.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,s.buffer),s._readTimeout=null)}}s=i.prototype,Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t,i,n=this.fbo.shape[0],s=this.fbo.shape[1];if(s*n*4>this.buffer.length){o.free(this.buffer);for(i=this.buffer=o.mallocUint8(r(s*n*4)),t=0;t<s*n*4;++t)i[t]=255}return e}}}),s.begin=function(){var e=this.gl;this.shape,e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},s.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(e,t,n){if(!this.gl)return null;s=this.fbo.shape.slice(),e|=0,t|=0,"number"!=typeof n&&(n=1);var l=0|Math.min(Math.max(e-n,0),s[0]),f=0|Math.min(Math.max(e+n,0),s[0]),h=0|Math.min(Math.max(t-n,0),s[1]),m=0|Math.min(Math.max(t+n,0),s[1]);if(f<=l||m<=h)return null;var s,d=[f-l,m-h],r=a(this.buffer,[d[0],d[1],4],[4,4*s[0],1],4*(l+s[0]*h)),u=function(e,t,n){for(var s,i=1e8,a=-1,r=-1,p=e.shape[0],f=e.shape[1],o=0;o<p;o++)for(s=0;s<f;s++){var g=e.get(o,s,0),u=e.get(o,s,1),h=e.get(o,s,2),m=e.get(o,s,3);if(g<255||u<255||h<255||m<255){var l=t-o,c=n-s,d=l*l+c*c;d<i&&(i=d,a=o,r=s)}}return[a,r,i]}(r.hi(d[0],d[1],1),n,n),o=u[0],i=u[1];return o<0||Math.pow(this.radius,2)<u[2]?null:new c(o+l|0,i+h|0,r.get(o,i,0),[r.get(o,i,1),r.get(o,i,2),r.get(o,i,3)],Math.sqrt(u[2]))},s.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(e,t,n){"use strict";var s,l=n(3327),d=n(8731),a=n(216),o=n(5091),r=n(2145),c=n(8866);function i(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}s=i.prototype;function u(e,t){return e.name<t.name?-1:1}s.bind=function(){this.program||this._relink();var e,t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(t>n)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(n>t)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},s.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},s.update=function(e,t,n,s){(!t||1===arguments.length)&&(b=e,e=b.vertex,t=b.fragment,n=b.uniforms,s=b.attributes);var h,p,b,j,w,x,C,i=this,m=i.gl,k=i._vref;if(i._vref=o.shader(m,m.VERTEX_SHADER,e),k&&k.dispose(),i.vertShader=i._vref.shader,x=this._fref,i._fref=o.shader(m,m.FRAGMENT_SHADER,t),x&&x.dispose(),i.fragShader=i._fref.shader,!n||!s){if(p=m.createProgram(),m.attachShader(p,i.fragShader),m.attachShader(p,i.vertShader),m.linkProgram(p),!m.getProgramParameter(p,m.LINK_STATUS))throw w=m.getProgramInfoLog(p),new c(w,"Error linking program:"+w);n=n||r.uniforms(m,p),s=s||r.attributes(m,p),m.deleteProgram(p)}(s=s.slice()).sort(u);var g,_=[],y=[],f=[];for(g=0;g<s.length;++g)if(h=s[g],h.type.indexOf("mat")>=0){for(var O=0|h.type.charAt(h.type.length-1),E=new Array(O),v=0;v<O;++v)E[v]=f.length,y.push(h.name+"["+v+"]"),"number"==typeof h.location?f.push(h.location+v):Array.isArray(h.location)&&h.location.length===O&&"number"==typeof h.location[v]?f.push(0|h.location[v]):f.push(-1);_.push({name:h.name,type:h.type,locations:E})}else _.push({name:h.name,type:h.type,locations:[f.length]}),y.push(h.name),"number"==typeof h.location?f.push(0|h.location):f.push(-1);j=0;for(g=0;g<f.length;++g)if(f[g]<0){for(;f.indexOf(j)>=0;)j+=1;f[g]=j}C=new Array(n.length);function A(){i.program=o.program(m,i._vref,i._fref,y,f);for(var e=0;e<n.length;++e)C[e]=m.getUniformLocation(i.program,n[e].name)}A(),i._relink=A,i.types={uniforms:a(n),attributes:a(s)},i.attributes=d(m,i,_,f),Object.defineProperty(i,"uniforms",l(m,i,n,C))},e.exports=function(e,t,n,s,o){var a=new i(e);return a.update(t,n,s,o),a}},8866:function(e){function t(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?`
`+n:""),this.stack=(new Error).stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,e.exports=t},8731:function(e,t,n){"use strict";e.exports=function(e,t,n,s){for(var d={},m=0,f=n.length;m<f;++m){var r,u=n[m],l=u.name,a=u.type,h=u.locations;switch(a){case"bool":case"int":case"float":i(e,t,h[0],s,1,d,l);break;default:if(a.indexOf("vec")>=0){if((r=a.charCodeAt(a.length-1)-48)<2||r>4)throw new o("","Invalid data type for attribute "+l+": "+a);i(e,t,h[0],s,r,d,l)}else{if(!(a.indexOf("mat")>=0))throw new o("","Unknown data type for attribute "+l+": "+a);if((r=a.charCodeAt(a.length-1)-48)<2||r>4)throw new o("","Invalid data type for attribute "+l+": "+a);c(e,t,h,s,r,d,l)}}}return d};var s,r,o=n(8866);function a(e,t,n,s,o,i){this._gl=e,this._wrapper=t,this._index=n,this._locations=s,this._dimension=o,this._constFunc=i}s=a.prototype,s.pointer=function(e,t,n,s){var o=this,i=o._gl,a=o._locations[o._index];i.vertexAttribPointer(a,o._dimension,e||i.FLOAT,!!t,n||0,s||0),i.enableVertexAttribArray(a)},s.set=function(e,t,n,s){return this._constFunc(this._locations[this._index],e,t,n,s)},Object.defineProperty(s,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}}),r=[function(e,t,n){return void 0===n.length?e.vertexAttrib1f(t,n):e.vertexAttrib1fv(t,n)},function(e,t,n,s){return void 0===n.length?e.vertexAttrib2f(t,n,s):e.vertexAttrib2fv(t,n)},function(e,t,n,s,o){return void 0===n.length?e.vertexAttrib3f(t,n,s,o):e.vertexAttrib3fv(t,n)},function(e,t,n,s,o,i){return void 0===n.length?e.vertexAttrib4f(t,n,s,o,i):e.vertexAttrib4fv(t,n)}];function i(e,t,n,s,o,i,c){var l=r[o],d=new a(e,t,n,s,o,l);Object.defineProperty(i,c,{set:function(t){return e.disableVertexAttribArray(s[n]),l(e,s[n],t),t},get:function(){return d},enumerable:!0})}function c(e,t,n,s,o,a,r){for(var u,h,l=new Array(o),d=new Array(o),c=0;c<o;++c)i(e,t,n[c],s,o,l,c),d[c]=l[c];Object.defineProperty(l,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<o;++t)d[t].location=e[t];else for(t=0;t<o;++t)d[t].location=e+t;return e},get:function(){for(var t=new Array(o),e=0;e<o;++e)t[e]=s[n[e]];return t},enumerable:!0}),l.pointer=function(t,i,a,r){t=t||e.FLOAT,i=!!i,a=a||o*o,r=r||0;for(var l,c=0;c<o;++c)l=s[n[c]],e.vertexAttribPointer(l,o,t,i,a,r+c*o),e.enableVertexAttribArray(l)},u=new Array(o),h=e["vertexAttrib"+o+"fv"],Object.defineProperty(a,r,{set:function(t){for(var a,r,i=0;i<o;++i)if(r=s[n[i]],e.disableVertexAttribArray(r),Array.isArray(t[0]))h.call(e,r,t[i]);else{for(a=0;a<o;++a)u[a]=t[o*i+a];h.call(e,r,u)}return t},get:function(){return l},enumerable:!0})}},3327:function(e,t,n){"use strict";var a=n(216),s=n(8866);function i(e){return function(){return e}}function o(e,t){for(var s=new Array(e),n=0;n<e;++n)s[n]=t;return s}e.exports=function(e,t,n,r){function c(t){return function(o){for(p=l("",t),m=0;m<p.length;++m){var i,a,c,u,m,f,p,j=p[m],h=j[0],d=j[1];if(r[d]){if(c=o,"string"==typeof h&&(0===h.indexOf(".")||0===h.indexOf("[")))if(a=h,0===h.indexOf(".")&&(a=h.slice(1)),a.indexOf("]")===a.length-1){var b=a.indexOf("["),g=a.slice(0,b),v=a.slice(b+1,a.length-1);c=g?o[g][v]:o[v]}else c=o[a];switch(i=n[d].type,i){case"bool":case"int":case"sampler2D":case"samplerCube":e.uniform1i(r[d],c);break;case"float":e.uniform1f(r[d],c);break;default:if(f=i.indexOf("vec"),!(0<=f&&f<=1&&i.length===4+f)){if(0===i.indexOf("mat")&&4===i.length){if((u=i.charCodeAt(i.length-1)-48)<2||u>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+i);e["uniformMatrix"+u+"fv"](r[d],!1,c);break}throw new s("","Unknown uniform data type for "+name+": "+i)}if((u=i.charCodeAt(i.length-1)-48)<2||u>4)throw new s("","Invalid data type");switch(i.charAt(0)){case"b":case"i":e["uniform"+u+"iv"](r[d],c);break;case"v":e["uniform"+u+"fv"](r[d],c);break;default:throw new s("","Unrecognized data type for vector "+name+": "+i)}}}}}}function l(e,t){if("object"!=typeof t)return[[e,t]];n=[];for(s in t){var n,s,i=t[s],o=e;parseInt(s)+""===s?o+="["+s+"]":o+="."+s,"object"==typeof i?n.push.apply(n,l(o,i)):n.push([o,i])}return n}function d(e,t,a){if("object"==typeof a){var l,d=u(a);Object.defineProperty(e,t,{get:i(d),set:c(a),enumerable:!0,configurable:!1})}else r[a]?Object.defineProperty(e,t,{get:(l=a,function(e,t,n){return e.getUniform(t.program,n[l])}),set:c(a),enumerable:!0,configurable:!1}):e[t]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t,n=e.indexOf("vec");if(0<=n&&n<=1&&e.length===4+n){if((t=e.charCodeAt(e.length-1)-48)<2||t>4)throw new s("","Invalid data type");return"b"===e.charAt(0)?o(t,!1):o(t,0)}if(0===e.indexOf("mat")&&4===e.length){if((t=e.charCodeAt(e.length-1)-48)<2||t>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+e);return o(t*t,0)}throw new s("","Unknown uniform data type for "+name+": "+e)}}(n[a].type)}function u(e){if(Array.isArray(e)){t=new Array(e.length);for(var t,s,n=0;n<e.length;++n)d(t,n,e[n])}else for(s in t={},e)d(t,s,e[s]);return t}var h=a(n,!0);return{get:i(u(h)),set:c(h),enumerable:!0,configurable:!0}}},216:function(e){"use strict";e.exports=function(e,t){for(l={},o=0;o<e.length;++o)for(var s,o,i,a,l,c=e[o].name.split("."),n=l,r=0;r<c.length;++r)if(s=c[r].split("["),s.length>1){s[0]in n||(n[s[0]]=[]),n=n[s[0]];for(i=1;i<s.length;++i)a=parseInt(s[i]),i<s.length-1||r<c.length-1?(a in n||(i<s.length-1?n[a]=[]:n[a]={}),n=n[a]):n[a]=t?o:e[o].type}else r<c.length-1?(s[0]in n||(n[s[0]]={}),n=n[s[0]]):n[s[0]]=t?o:e[o].type;return l}},2145:function(e,t){"use strict";t.uniforms=function(e,t){for(var n,s,r,c=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=[],a=0;a<c;++a)if(n=e.getActiveUniform(t,a),n)if(r=o(e,n.type),n.size>1)for(s=0;s<n.size;++s)i.push({name:n.name.replace("[0]","["+s+"]"),type:r});else i.push({name:n.name,type:r});return i},t.attributes=function(e,t){for(var n,a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=[],s=0;s<a;++s)n=e.getActiveAttrib(t,s),n&&i.push({name:n.name,type:o(e,n.type)});return i};var s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function o(e,t){if(!n){var o,i,a=Object.keys(s);n={};for(o=0;o<a.length;++o)i=a[o],n[e[i]]=s[i]}return n[t]}},5091:function(e,t,n){"use strict";t.shader=function(e,t,n){return i(e).getShaderReference(t,n)},t.program=function(e,t,n,s,o){return i(e).getProgram(t,n,s,o)};var o,s=n(8866),d=n(2992),a=new("undefined"==typeof WeakMap?n(606):WeakMap),l=0;function r(e,t,n,s,o,i,a){this.id=e,this.src=t,this.type=n,this.shader=s,this.count=i,this.programs=[],this.cache=a}function c(e){this.gl=e,this.shaders=[{},{}],this.programs={}}r.prototype.dispose=function(){if(0==--this.count){for(var s,e=this.cache,n=e.gl,o=this.programs,t=0,i=o.length;t<i;++t)s=e.programs[o[t]],s&&(delete e.programs[t],n.deleteProgram(s));n.deleteShader(this.shader),delete e.shaders[this.type===n.FRAGMENT_SHADER|0][this.src]}},o=c.prototype;function i(e){var t=a.get(e);return t||(t=new c(e),a.set(e,t)),t}o.getShaderReference=function(e,t){var a,o=this.gl,i=this.shaders[e===o.FRAGMENT_SHADER|0],n=i[t];return n&&o.isShader(n.shader)?n.count+=1:(a=function(e,t,n){var i,a,o=e.createShader(t);if(e.shaderSource(o,n),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){i=e.getShaderInfoLog(o);try{a=d(i,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new s(i,`Error compiling shader:
`+i)}throw new s(i,a.short,a.long)}return o}(o,e,t),n=i[t]=new r(l++,t,e,a,[],1,this)),n},o.getProgram=function(e,t,n,o){var i=[e.id,t.id,n.join(":"),o.join(":")].join("@"),a=this.programs[i];return a&&this.gl.isProgram(a)||(this.programs[i]=a=function(e,t,n,o,i){var r,c,a=e.createProgram();e.attachShader(a,t),e.attachShader(a,n);for(r=0;r<o.length;++r)e.bindAttribLocation(a,i[r],o[r]);if(e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw c=e.getProgramInfoLog(a),new s(c,"Error linking program: "+c);return a}(this.gl,e.shader,t.shader,n,o),e.programs.push(i),t.programs.push(i)),a}},4098:function(e){"use strict";function n(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}e.exports=function(e,t){var s=new n(e);return s.update(t),e.addOverlay(s),s};var t=n.prototype;t.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()}),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var n,s,a=this.enable,r=this.width,c=this.color,o=this.center,l=this.plot,i=l.line,e=l.dataBox,t=l.viewBox;i.bind(),e[0]<=o[0]&&o[0]<=e[2]&&e[1]<=o[1]&&o[1]<=e[3]&&(n=t[0]+(o[0]-e[0])/(e[2]-e[0])*(t[2]-t[0]),s=t[1]+(o[1]-e[1])/(e[3]-e[1])*(t[3]-t[1]),a[0]&&i.drawLine(n,s,t[0],s,r[0],c[0]),a[1]&&i.drawLine(n,s,n,t[1],r[1],c[1]),a[2]&&i.drawLine(n,s,t[2],s,r[2],c[2]),a[3]&&i.drawLine(n,s,n,t[3],r[3],c[3]))},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(e,t,n){"use strict";var s=n(3236),o=n(9405),i=s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);e.exports=function(e){return o(e,i,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(e,t,n){"use strict";var r=n(2762),c=n(8116),u=n(1493);e.exports=function(e,t){n=[];function s(e,t,s,o,i,a){var r=[e,t,s,0,0,0,1];r[o+3]=1,r[o]=i,n.push.apply(n,r),r[6]=-1,n.push.apply(n,r),r[o]=a,n.push.apply(n,r),n.push.apply(n,r),r[6]=1,n.push.apply(n,r),r[o]=i,n.push.apply(n,r)}s(0,0,0,0,0,1),s(0,0,0,1,0,1),s(0,0,0,2,0,1),s(1,0,0,1,-1,1),s(1,0,0,2,-1,1),s(0,1,0,0,-1,1),s(0,1,0,2,-1,1),s(0,0,1,0,-1,1),s(0,0,1,1,-1,1);var n,l,o=r(e,n),d=c(e,[{type:e.FLOAT,buffer:o,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:o,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:o,size:1,offset:24,stride:28}]),i=u(e);return i.attributes.position.location=0,i.attributes.color.location=1,i.attributes.weight.location=2,l=new a(e,o,d,i),l.update(t),l},o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(e,t,n,s){this.gl=e,this.buffer=t,this.vao=n,this.shader=s,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var o,s=a.prototype,l=[0,0,0],d=[0,0,0],i=[0,0];s.isTransparent=function(){return!1},s.drawTransparent=function(){},s.draw=function(e){var s=this.gl,a=this.vao,n=this.shader;a.bind(),n.bind();var u,h=e.model||o,m=e.view||o,f=e.projection||o;this.axes&&(u=this.axes.lastCubeProps.axis);for(var r=l,c=d,t=0;t<3;++t)u&&u[t]<0?(r[t]=this.bounds[0][t],c[t]=this.bounds[1][t]):(r[t]=this.bounds[1][t],c[t]=this.bounds[0][t]);for(i[0]=s.drawingBufferWidth,i[1]=s.drawingBufferHeight,n.uniforms.model=h,n.uniforms.view=m,n.uniforms.projection=f,n.uniforms.coordinates=[this.position,r,c],n.uniforms.colors=this.colors,n.uniforms.screenShape=i,t=0;t<3;++t)n.uniforms.lineWidth=this.lineWidth[t]*this.pixelRatio,this.enabled[t]&&(a.draw(s.TRIANGLES,6,6*t),this.drawSides[t]&&a.draw(s.TRIANGLES,12,18+12*t));a.unbind()},s.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(e,t,n){var s=n(3236),o=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);t.meshShader={vertex:o,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},t.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(e,t,n){"use strict";var c,l,s=n(2931),i=n(9970),d=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(e,t){var n,s,o=e.length;for(n=0;n<o;n++){if(s=e[n],s===t)return n;if(s>t)return n-1}return n},o=function(e,t,n){return e<t?t:e>n?n:e},r=function(e){t=1/0,e.sort(function(e,t){return e-t});for(var t,s,o=e.length,n=1;n<o;n++)s=Math.abs(e[n]-e[n-1]),s<t&&(t=s);return t};e.exports=function(e,t){var A=e.startingPositions,C=e.maxLength||1e3,I=e.tubeSize||1,M=e.absoluteTubeSize,b=e.gridFill||"+x+y+z",m={};-1!==b.indexOf("-x")&&(m.reversedX=!0),-1!==b.indexOf("-y")&&(m.reversedY=!0),-1!==b.indexOf("-z")&&(m.reversedZ=!0),m.filled=d.indexOf(b.replace(/-/g,"").replace(/\+/g,""));var n,l,p,g,v,O,f=e.getVelocity||function(t){return function(e,t,n){var C,E,A,w=t.vectors,f=t.meshgrid,F=e[0],z=e[1],R=e[2],c=f[0].length,i=f[1].length,r=f[2].length,l=a(f[0],F),u=a(f[1],z),d=a(f[2],R),m=l+1,h=u+1,p=d+1;if(l=o(l,0,c-1),m=o(m,0,c-1),u=o(u,0,i-1),h=o(h,0,i-1),d=o(d,0,r-1),p=o(p,0,r-1),l<0||u<0||d<0||m>c-1||h>i-1||p>r-1)return s.create();var g,v,b,j,y,_,L=f[0][l],K=f[0][m],T=f[1][u],q=f[1][h],M=f[2][d],O=(F-L)/(K-L),x=(z-T)/(q-T),k=(R-M)/(f[2][p]-M);switch(isFinite(O)||(O=.5),isFinite(x)||(x=.5),isFinite(k)||(k=.5),n.reversedX&&(l=c-1-l,m=c-1-m),n.reversedY&&(u=i-1-u,h=i-1-h),n.reversedZ&&(d=r-1-d,p=r-1-p),n.filled){case 5:g=d,b=p,j=u*r,_=h*r,y=l*r*i,v=m*r*i;break;case 4:g=d,b=p,y=l*r,v=m*r,j=u*r*c,_=h*r*c;break;case 3:j=u,_=h,g=d*i,b=p*i,y=l*i*r,v=m*i*r;break;case 2:j=u,_=h,y=l*i,v=m*i,g=d*i*c,b=p*i*c;break;case 1:y=l,v=m,g=d*c,b=p*c,j=u*c*r,_=h*c*r;break;default:y=l,v=m,j=u*c,_=h*c,g=d*c*i,b=p*c*i}var U=w[y+j+g],W=w[y+j+b],$=w[y+_+g],Y=w[y+_+b],V=w[v+j+g],H=w[v+j+b],I=w[v+_+g],B=w[v+_+b],S=s.create(),P=s.create(),N=s.create(),D=s.create();return s.lerp(S,U,V,O),s.lerp(P,W,H,O),s.lerp(N,$,I,O),s.lerp(D,Y,B,O),A=s.create(),C=s.create(),s.lerp(A,S,N,x),s.lerp(C,P,D,x),E=s.create(),s.lerp(E,A,C,k),E}(t,e,m)},F=e.getDivergence||function(e,t){var i,a,r,n=s.create(),o=1e-4;return s.add(n,e,[o,0,0]),i=f(n),s.subtract(i,i,t),s.scale(i,i,1/o),s.add(n,e,[0,o,0]),a=f(n),s.subtract(a,a,t),s.scale(a,a,1/o),s.add(n,e,[0,0,o]),r=f(n),s.subtract(r,r,t),s.scale(r,r,1/o),s.add(n,i,a),s.add(n,n,r),n},T=[],L=t[0][0],B=t[0][1],D=t[0][2],N=t[1][0],R=t[1][1],P=t[1][2],H=function(e){var t=e[0],n=e[1],s=e[2];return!(t<L||t>N||n<B||n>R||s<D||s>P)},x=10*s.distance(t[0],t[1])/C,k=x*x,E=1,u=0,z=A.length;z>1&&(E=function(e){for(var h=[],l=[],d=[],u={},a={},c={},f=e.length,n=0;n<f;n++){var s=e[n],o=s[0],t=s[1],i=s[2];u[o]||(h.push(o),u[o]=!0),a[t]||(l.push(t),a[t]=!0),c[i]||(d.push(i),c[i]=!0)}var p=r(h),g=r(l),v=r(d),m=Math.min(p,g,v);return isFinite(m)?m:1}(A));for(g=0;g<z;g++){l=s.create(),s.copy(l,A[g]);var _=[l],y=[],h=f(l),S=l;y.push(h);var w=[],j=F(l,h),c=s.length(j);isFinite(c)&&c>u&&(u=c),w.push(c),T.push({points:_,velocities:y,divergences:w});for(O=0;O<100*C&&_.length<C&&H(l);){if(O++,n=s.clone(h),v=s.squaredLength(n),0===v)break;v>k&&s.scale(n,n,x/Math.sqrt(v)),s.add(n,n,l),h=f(n),s.squaredDistance(S,n)-k>-1e-4*k&&(_.push(n),S=n,y.push(h),j=F(n,h),c=s.length(j),isFinite(c)&&c>u&&(u=c),w.push(c)),l=n}}return p=function(e,t,n,o){for(d=0,a=0;a<e.length;a++)for(p=e[a].velocities,r=0;r<p.length;r++)d=Math.max(d,s.length(p[r]));var a,r,c,d,u,h,p,g,v,j=e.map(function(e){return function(e,t,n,o){for(var a,c,p,x,C,E,b=e.points,A=e.velocities,k=e.divergences,g=[],O=[],y=[],l=[],d=[],j=[],m=0,u=0,r=i.create(),f=i.create(),h=0;h<b.length;h++){var v=b[h],_=A[h],w=k[h];0===t&&(w=.05*n),u=s.length(_)/o,r=i.create(),s.copy(r,_),r[3]=w;for(a=0;a<8;a++)d[a]=[v[0],v[1],v[2],a];if(l.length>0)for(a=0;a<8;a++)p=(a+1)%8,g.push(l[a],d[a],d[p],d[p],l[p],l[a]),y.push(f,r,r,r,f,f),j.push(m,u,u,u,m,m),c=g.length,O.push([c-6,c-5,c-4],[c-3,c-2,c-1]);x=l,l=d,d=x,C=f,f=r,r=C,E=m,m=u,u=E}return{positions:g,cells:O,vectors:y,vertexIntensity:j}}(e,n,o,d)}),l=[],b=[],m=[],f=[];for(a=0;a<j.length;a++){c=j[a],v=l.length;for(l=l.concat(c.positions),m=m.concat(c.vectors),f=f.concat(c.vertexIntensity),r=0;r<c.cells.length;r++){g=c.cells[r],h=[],b.push(h);for(u=0;u<g.length;u++)h.push(g[u]+v)}}return{positions:l,cells:b,vectors:m,vertexIntensity:f,colormap:t}}(T,e.colormap,u,E),M?p.tubeScale=M:(0===u&&(u=1),p.tubeScale=.5*I*E/u),p},c=n(6740),l=n(6405).createMesh,e.exports.createTubeMesh=function(e,t){return l(e,t,{shaders:c,traceType:"streamtube"})}},990:function(e,t,n){var s=n(9405),o=n(3236),i=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color — in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),c=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);t.createShader=function(e){var t=s(e,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createPickShader=function(e){var t=s(e,i,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createContourShader=function(e){var t=s(e,r,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},t.createPickContourShader=function(e){var t=s(e,r,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},9499:function(e,t,n){"use strict";e.exports=function(e){var n,o,r,t=e.gl,b=T(t),f=M(t),h=F(t),d=D(t),s=v(t),l=m(t,[{buffer:s,size:4,stride:p,offset:0},{buffer:s,size:3,stride:p,offset:16},{buffer:s,size:3,stride:p,offset:28}]),a=v(t),j=m(t,[{buffer:a,size:4,stride:20,offset:0},{buffer:a,size:1,stride:20,offset:16}]),c=v(t),u=m(t,[{buffer:c,size:2,type:t.FLOAT}]),i=H(t,1,g,t.RGBA,t.UNSIGNED_BYTE);i.minFilter=t.LINEAR,i.magFilter=t.LINEAR,o=new E(t,[0,0],[[0,0,0],[0,0,0]],b,f,s,l,i,h,d,a,j,c,u,[0,0,0]),n={levels:[[],[],[]]};for(r in e)n[r]=e[r];return n.colormap=n.colormap||"jet",o.update(n),o};var i,d,g,y,C,k=n(8828),v=n(2762),m=n(8116),H=n(7766),o=n(1888),P=n(6729),l=n(5298),R=n(9994),a=n(9618),O=n(3711),f=n(6760),w=n(7608),L=n(2478),N=n(6199),h=n(990),T=h.createShader,F=h.createContourShader,M=h.createPickShader,D=h.createPickContourShader,p=40,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],c=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(e,t,n,s,o){this.position=e,this.index=t,this.uv=n,this.level=s,this.dataCoordinate=o}!function(){for(e=0;e<3;++e){var e,t=c[e],n=(e+2)%3;t[(e+1)%3+0]=1,t[n+3]=1,t[e+6]=1}}(),g=256;function E(e,t,n,s,i,r,c,l,d,u,h,m,f,p,g){this.gl=e,this.shape=t,this.bounds=n,this.objectOffset=g,this.intensityBounds=[],this._shader=s,this._pickShader=i,this._coordinateBuffer=r,this._vao=c,this._colorMap=l,this._contourShader=d,this._contourPickShader=u,this._contourBuffer=h,this._contourVAO=m,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=f,this._dynamicVAO=p,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[a(o.mallocFloat(1024),[0,0]),a(o.mallocFloat(1024),[0,0]),a(o.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}i=E.prototype,i.genColormap=function(e,t){var n=!1,s=R([P({colormap:e,nshades:g,format:"rgba"}).map(function(e,s){var o=t?function(e,t){if(!t)return 1;if(!t.length)return 1;for(var s,n=0;n<t.length;++n){if(t.length<2)return 1;if(t[n][0]===e)return t[n][1];if(t[n][0]>e&&n>0)return s=(t[n][0]-e)/(t[n][0]-t[n-1][0]),t[n][1]*(1-s)+s*t[n-1][1]}return 1}(s/255,t):e[3];return o<1&&(n=!0),[e[0],e[1],e[2],255*o]})]);return l.divseq(s,255),this.hasAlphaScale=n,s},i.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},i.isOpaque=function(){return!this.isTransparent()},i.pickSlots=1,i.setPickBase=function(e){this.pickId=e},y=[0,0,0],d={showSurface:!1,showContour:!1,projections:[s.slice(),s.slice(),s.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function j(e,t){var n,s,o,i,a,l=t.axes&&t.axes.lastCubeProps.axis||y,r=t.showSurface,c=t.showContour;for(s=0;s<3;++s)for(r=r||t.surfaceProject[s],n=0;n<3;++n)c=c||t.contourProject[s][n];for(s=0;s<3;++s){o=d.projections[s];for(n=0;n<16;++n)o[n]=0;for(n=0;n<4;++n)o[5*n]=1;o[5*s]=0,o[12+s]=t.axesBounds[+(l[s]>0)][s],f(o,e.model,o),a=d.clipBounds[s];for(i=0;i<2;++i)for(n=0;n<3;++n)a[i][n]=e.clipBounds[i][n];a[0][s]=-1e8,a[1][s]=1e8}return d.showSurface=r,d.showContour=c,d}var z={model:s,view:s,projection:s,inverseModel:s.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},S=s.slice(),_=[1,0,0,0,1,0,0,0,1];function b(e){e=e||{},r=this.gl,r.disable(r.CULL_FACE),this._colorMap.bind(0),i=z,i.model=e.model||s,i.view=e.view||s,i.projection=e.projection||s,i.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],i.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],i.objectOffset=this.objectOffset,i.contourColor=this.contourColor[0],i.inverseModel=w(i.inverseModel,i.model);for(n=0;n<2;++n)for(var n,i,a,r,l,d,u,h,m,p,g=i.clipBounds[n],o=0;o<3;++o)g[o]=Math.min(Math.max(this.clipBounds[n][o],-1e8),1e8);i.kambient=this.ambientLight,i.kdiffuse=this.diffuseLight,i.kspecular=this.specularLight,i.roughness=this.roughness,i.fresnel=this.fresnel,i.opacity=this.opacity,i.height=0,i.permutation=_,i.vertexColor=this.vertexColor,l=S;for(f(l,i.view,i.model),f(l,i.projection,l),w(l,l),n=0;n<3;++n)i.eyePosition[n]=l[12+n]/l[15];m=l[15];for(n=0;n<3;++n)m+=this.lightPosition[n]*l[4*n+3];for(n=0;n<3;++n){p=l[12+n];for(o=0;o<3;++o)p+=l[4*o+n]*this.lightPosition[o];i.lightPosition[n]=p/m}if(u=j(i,this),u.showSurface){for(this._shader.bind(),this._shader.uniforms=i,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[n],this._shader.uniforms.clipBounds=u.clipBounds[n],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){a=this._contourShader,i.kambient=1,i.kdiffuse=0,i.kspecular=0,i.opacity=1,a.bind(),a.uniforms=i,h=this._contourVAO;for(h.bind(),n=0;n<3;++n)for(a.uniforms.permutation=c[n],r.lineWidth(this.contourWidth[n]*this.pixelRatio),o=0;o<this.contourLevels[n].length;++o)o===this.highlightLevel[n]?(a.uniforms.contourColor=this.highlightColor[n],a.uniforms.contourTint=this.highlightTint[n]):0!==o&&o-1!==this.highlightLevel[n]||(a.uniforms.contourColor=this.contourColor[n],a.uniforms.contourTint=this.contourTint[n]),this._contourCounts[n][o]&&(a.uniforms.height=this.contourLevels[n][o],h.draw(r.LINES,this._contourCounts[n][o],this._contourOffsets[n][o]));for(n=0;n<3;++n)for(a.uniforms.model=u.projections[n],a.uniforms.clipBounds=u.clipBounds[n],o=0;o<3;++o)if(this.contourProject[n][o]){a.uniforms.permutation=c[o],r.lineWidth(this.contourWidth[o]*this.pixelRatio);for(d=0;d<this.contourLevels[o].length;++d)d===this.highlightLevel[o]?(a.uniforms.contourColor=this.highlightColor[o],a.uniforms.contourTint=this.highlightTint[o]):0!==d&&d-1!==this.highlightLevel[o]||(a.uniforms.contourColor=this.contourColor[o],a.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][d]&&(a.uniforms.height=this.contourLevels[o][d],h.draw(r.LINES,this._contourCounts[o][d],this._contourOffsets[o][d]))}for(h.unbind(),(h=this._dynamicVAO).bind(),n=0;n<3;++n)if(0!==this._dynamicCounts[n])for(a.uniforms.model=i.model,a.uniforms.clipBounds=i.clipBounds,a.uniforms.permutation=c[n],r.lineWidth(this.dynamicWidth[n]*this.pixelRatio),a.uniforms.contourColor=this.dynamicColor[n],a.uniforms.contourTint=this.dynamicTint[n],a.uniforms.height=this.dynamicLevel[n],h.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]),o=0;o<3;++o)this.contourProject[o][n]&&(a.uniforms.model=u.projections[o],a.uniforms.clipBounds=u.clipBounds[o],h.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]));h.unbind()}}i.draw=function(e){return b.call(this,e,!1)},i.drawTransparent=function(e){return b.call(this,e,!0)},C={model:s,view:s,projection:s,inverseModel:s,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function r(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function u(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function A(e){if(Array.isArray(e)){if(Array.isArray(e))return[u(e[0]),u(e[1]),u(e[2])];var t=u(e);return[t.slice(),t.slice(),t.slice()]}}i.drawPick=function(e){e=e||{},i=this.gl,i.disable(i.CULL_FACE),o=C,o.model=e.model||s,o.view=e.view||s,o.projection=e.projection||s,o.shape=this._field[2].shape,o.pickId=this.pickId/255,o.lowerBound=this.bounds[0],o.upperBound=this.bounds[1],o.objectOffset=this.objectOffset,o.permutation=_;for(n=0;n<2;++n)for(var n,o,i,a,r,l,d,u=o.clipBounds[n],t=0;t<3;++t)u[t]=Math.min(Math.max(this.clipBounds[n][t],-1e8),1e8);if(r=j(o,this),r.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=o,this._vao.bind(),this._vao.draw(i.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&(this._pickShader.uniforms.model=r.projections[n],this._pickShader.uniforms.clipBounds=r.clipBounds[n],this._vao.draw(i.TRIANGLES,this._vertexCount));this._vao.unbind()}if(r.showContour){a=this._contourPickShader,a.bind(),a.uniforms=o,d=this._contourVAO;for(d.bind(),t=0;t<3;++t)for(i.lineWidth(this.contourWidth[t]*this.pixelRatio),a.uniforms.permutation=c[t],n=0;n<this.contourLevels[t].length;++n)this._contourCounts[t][n]&&(a.uniforms.height=this.contourLevels[t][n],d.draw(i.LINES,this._contourCounts[t][n],this._contourOffsets[t][n]));for(n=0;n<3;++n)for(a.uniforms.model=r.projections[n],a.uniforms.clipBounds=r.clipBounds[n],t=0;t<3;++t)if(this.contourProject[n][t]){a.uniforms.permutation=c[t],i.lineWidth(this.contourWidth[t]*this.pixelRatio);for(l=0;l<this.contourLevels[t].length;++l)this._contourCounts[t][l]&&(a.uniforms.height=this.contourLevels[t][l],d.draw(i.LINES,this._contourCounts[t][l],this._contourOffsets[t][l]))}d.unbind()}},i.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t,o,i,a,l,p,g,v,d=this._field[2].shape,n=this._pickResult,m=d[0]*(e.value[0]+(e.value[2]>>4)/16)/255,c=Math.floor(m),u=m-c,h=d[1]*(e.value[1]+(15&e.value[2])/16)/255,r=Math.floor(h),f=h-r;c+=1,r+=1,o=n.position,o[0]=o[1]=o[2]=0;for(l=0;l<2;++l)for(p=l?u:1-u,a=0;a<2;++a)for(var y=c+l,j=r+a,b=p*(a?f:1-f),s=0;s<3;++s)o[s]+=this._field[s].get(y,j)*b;for(i=this._pickResult.level,t=0;t<3;++t)i[t]=L.le(this.contourLevels[t],o[t]),i[t]<0?this.contourLevels[t].length>0&&(i[t]=0):i[t]<this.contourLevels[t].length-1&&(g=this.contourLevels[t][i[t]],v=this.contourLevels[t][i[t]+1],Math.abs(g-o[t])>Math.abs(v-o[t])&&(i[t]+=1));for(n.index[0]=u<.5?c:c+1,n.index[1]=f<.5?r:r+1,n.uv[0]=m/d[0],n.uv[1]=h/d[1],s=0;s<3;++s)n.dataCoordinate[s]=this._field[s].get(n.index[0],n.index[1]);return n},i.padField=function(e,t){var n=t.shape.slice(),s=e.shape.slice();l.assign(e.lo(1,1).hi(n[0],n[1]),t),l.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),l.assign(e.lo(1,s[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),l.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),l.assign(e.lo(s[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,s[1]-1,t.get(0,n[1]-1)),e.set(s[0]-1,0,t.get(n[0]-1,0)),e.set(s[0]-1,s[1]-1,t.get(n[0]-1,n[1]-1))},i.update=function(e){if(e=e||{},this.objectOffset=e.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in e&&(this.contourWidth=r(e.contourWidth,Number)),"showContour"in e&&(this.showContour=r(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=r(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=A(e.contourColor)),"contourProject"in e&&(this.contourProject=r(e.contourProject,function(e){return r(e,Boolean)})),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=A(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=r(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=r(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"opacityscale"in e&&(this.opacityscale=e.opacityscale),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0),"colormap"in e&&this._colorMap.setPixels(this.genColormap(e.colormap,this.opacityscale)),g=e.field||e.coords&&e.coords[2]||null,R=!1,g||(g=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){Z=(g.shape[0]+2)*(g.shape[1]+2),Z>this._field[2].data.length&&(o.freeFloat(this._field[2].data),this._field[2].data=o.mallocFloat(k.nextPow2(Z))),this._field[2]=a(this._field[2].data,[g.shape[0]+2,g.shape[1]+2]),this.padField(this._field[2],g),this.shape=g.shape.slice();for(s=this.shape,t=0;t<2;++t)this._field[2].size>this._field[t].data.length&&(o.freeFloat(this._field[t].data),this._field[t].data=o.mallocFloat(this._field[2].size)),this._field[t]=a(this._field[t].data,[s[0]+2,s[1]+2]);if(e.coords){if(K=e.coords,!Array.isArray(K)||3!==K.length)throw new Error("gl-surface: invalid coordinates for x/y");for(t=0;t<2;++t){Q=K[t];for(n=0;n<2;++n)if(Q.shape[n]!==s[n])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[t],Q)}}else if(e.ticks){if(U=e.ticks,!Array.isArray(U)||2!==U.length)throw new Error("gl-surface: invalid ticks");for(t=0;t<2;++t){if(y=U[t],(Array.isArray(y)||y.length)&&(y=a(y)),y.shape[0]!==s[t])throw new Error("gl-surface: invalid tick length");$=a(y.data,s),$.stride[t]=y.stride[0],$.stride[1^t]=0,this.padField(this._field[t],$)}}else{for(t=0;t<2;++t)q=[0,0],q[t]=1,this._field[t]=a(this._field[t].data,[s[0]+2,s[1]+2],q,0);this._field[0].set(0,0,0);for(n=0;n<s[0];++n)this._field[0].set(n+1,0,n);for(this._field[0].set(s[0]+1,0,s[0]-1),this._field[1].set(0,0,0),n=0;n<s[1];++n)this._field[1].set(0,n+1,n);this._field[1].set(0,s[1]+1,s[1]-1)}I=this._field,v=a(o.mallocFloat(3*I[2].size*2),[3,s[0]+2,s[1]+2,2]);for(t=0;t<3;++t)N(v.pick(t),I[t],"mirror");j=a(o.mallocFloat(3*I[2].size),[s[0]+2,s[1]+2,3]);for(t=0;t<s[0]+2;++t)for(n=0;n<s[1]+2;++n){var t,n,s,i,l,d,p,g,v,b,j,y,_,w,T,R,P,I,B,$,W,U,K,q,X,Q,Z,te=v.get(0,t,n,0),se=v.get(0,t,n,1),ae=v.get(1,t,n,0),he=v.get(1,t,n,1),fe=v.get(2,t,n,0),je=v.get(2,t,n,1),S=ae*je-he*fe,M=fe*se-je*te,F=te*he-se*ae,f=Math.sqrt(S*S+M*M+F*F),ie,pe,ge,ve,be;f<1e-8?(f=Math.max(Math.abs(S),Math.abs(M),Math.abs(F)))<1e-8?(F=1,M=S=0,f=1):f=1/f:f=1/Math.sqrt(f),j.set(t,n,0,S*f),j.set(t,n,1,M*f),j.set(t,n,2,F*f)}o.free(v.data);var z=[1/0,1/0,1/0],E=[-1/0,-1/0,-1/0],C=1/0,L=-1/0,ye=(s[0]-1)*(s[1]-1)*6,c=o.mallocFloat(k.nextPow2(10*ye)),h=0,D=0;for(t=0;t<s[0]-1;++t)t:for(n=0;n<s[1]-1;++n){for(b=0;b<2;++b)for(p=0;p<2;++p)for(l=0;l<3;++l)if(d=this._field[l].get(1+t+b,1+n+p),isNaN(d)||!isFinite(d))continue t;for(l=0;l<6;++l){var m=t+x[l][0],u=n+x[l][1],Y=this._field[0].get(m+1,u+1),G=this._field[1].get(m+1,u+1);d=this._field[2].get(m+1,u+1),S=j.get(m+1,u+1,0),M=j.get(m+1,u+1,1),F=j.get(m+1,u+1,2),e.intensity&&(P=e.intensity.get(m,u)),P=e.intensity?e.intensity.get(m,u):d+this.objectOffset[2],c[h++]=m,c[h++]=u,c[h++]=Y,c[h++]=G,c[h++]=d,c[h++]=0,c[h++]=P,c[h++]=S,c[h++]=M,c[h++]=F,z[0]=Math.min(z[0],Y+this.objectOffset[0]),z[1]=Math.min(z[1],G+this.objectOffset[1]),z[2]=Math.min(z[2],d+this.objectOffset[2]),C=Math.min(C,P),E[0]=Math.max(E[0],Y+this.objectOffset[0]),E[1]=Math.max(E[1],G+this.objectOffset[1]),E[2]=Math.max(E[2],d+this.objectOffset[2]),L=Math.max(L,P),D+=1}}for(e.intensityBounds&&(C=+e.intensityBounds[0],L=+e.intensityBounds[1]),t=6;t<h;t+=10)c[t]=(c[t]-C)/(L-C);this._vertexCount=D,this._coordinateBuffer.update(c.subarray(0,h)),o.freeFloat(c),o.free(j.data),this.bounds=[z,E],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===C&&this.intensityBounds[1]===L||(R=!0),this.intensityBounds=[C,L]}if("levels"in e){i=e.levels;for(i=Array.isArray(i[0])?i.slice():[[],[],i],t=0;t<3;++t)i[t]=i[t].slice(),i[t].sort(function(e,t){return e-t});for(t=0;t<3;++t)for(n=0;n<i[t].length;++n)i[t][n]-=this.objectOffset[t];t:for(t=0;t<3;++t){if(i[t].length!==this.contourLevels[t].length){R=!0;break}for(n=0;n<i[t].length;++n)if(i[t][n]!==this.contourLevels[t][n]){R=!0;break t}}this.contourLevels=i}if(R){I=this._field,s=this.shape;for(w=[],_=0;_<3;++_){var ee=this.contourLevels[_],J=[],ne=[],H=[0,0,0];for(t=0;t<ee.length;++t){W=O(this._field[_],ee[t]),J.push(w.length/5|0),D=0;t:for(n=0;n<W.cells.length;++n){ie=W.cells[n];for(l=0;l<2;++l){var V=W.positions[ie[l]],re=V[0],ce=0|Math.floor(re),le=re-ce,de=V[1],ue=0|Math.floor(de),oe=de-ue,me=!1;e:for(T=0;T<3;++T){H[T]=0,pe=(_+T+1)%3;for(b=0;b<2;++b){ge=b?le:1-le;for(m=0|Math.min(Math.max(ce+b,0),s[0]),p=0;p<2;++p){if(ve=p?oe:1-oe,u=0|Math.min(Math.max(ue+p,0),s[1]),d=T<2?this._field[pe].get(m,u):(this.intensity.get(m,u)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(d)||isNaN(d)){me=!0;break e}be=ge*ve,H[T]+=be*d}}}if(me){if(l>0){for(X=0;X<5;++X)w.pop();D-=1}continue t}w.push(H[0],H[1],V[0],V[1],H[2]),D+=1}}ne.push(D)}this._contourOffsets[_]=J,this._contourCounts[_]=ne}B=o.mallocFloat(w.length);for(t=0;t<w.length;++t)B[t]=w[t];this._contourBuffer.update(B),o.freeFloat(B)}},i.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)o.freeFloat(this._field[e].data)},i.highlight=function(e){if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;for(s=this.snapToData?e.dataCoordinate:e.position,t=0;t<3;++t)s[t]-=this.objectOffset[t];if(this.enableDynamic[0]&&s[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&s[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&s[2]!==this.dynamicLevel[2]){for(var i=0,l=this.shape,d=o.mallocFloat(12*l[0]*l[1]),n=0;n<3;++n)if(this.enableDynamic[n]){this.dynamicLevel[n]=s[n];var D=(n+1)%3,z=(n+2)%3,T=this._field[n],u=this._field[D],h=this._field[z],w=O(T,s[n]),_=w.cells,N=w.positions;for(this._dynamicOffsets[n]=i,t=0;t<_.length;++t)for(b=_[t],c=0;c<2;++c){var t,s,c,b,v=N[b[c]],j=+v[0],a=0|j,m=0|Math.min(a+1,l[0]),p=j-a,x=1-p,C=+v[1],r=0|C,f=0|Math.min(r+1,l[1]),g=C-r,S=1-g,M=x*S,y=x*g,E=p*S,k=p*g,A=M*u.get(a,r)+y*u.get(a,f)+E*u.get(m,r)+k*u.get(m,f),F=M*h.get(a,r)+y*h.get(a,f)+E*h.get(m,r)+k*h.get(m,f);if(isNaN(A)||isNaN(F)){c&&(i-=1);break}d[2*i+0]=A,d[2*i+1]=F,i+=1}this._dynamicCounts[n]=i-this._dynamicOffsets[n]}else this.dynamicLevel[n]=NaN,this._dynamicCounts[n]=0;this._dynamicBuffer.update(d.subarray(0,2*i)),o.freeFloat(d)}}},7766:function(e,t,n){"use strict";var s,l,i=n(9618),m=n(5298),o=n(1888);e.exports=function(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function(e){a=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],h=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],c=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}(e),"number"==typeof arguments[1])return g(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1],n=p(t)?t:t.raw;if(n)return function(e,t,n,s,o,i){var a=d(e);return e.texImage2D(e.TEXTURE_2D,0,o,o,i,t),new r(e,a,n,s,o,i)}(e,n,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return function(e,t){var s,a,u,h,p,g,v,j,y,c=t.dtype,n=t.shape.slice(),b=e.getParameter(e.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>b||n[1]<0||n[1]>b)throw new Error("gl-texture2d: Invalid texture size");if(u=f(n,t.stride.slice()),s=0,"float32"===c?s=e.FLOAT:"float64"===c?(s=e.FLOAT,u=!1,c="float32"):"uint8"===c?s=e.UNSIGNED_BYTE:(s=e.UNSIGNED_BYTE,u=!1,c="uint8"),a=0,2===n.length)a=e.LUMINANCE,n=[n[0],n[1],1],t=i(t.data,n,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])a=e.ALPHA;else if(2===n[2])a=e.LUMINANCE_ALPHA;else if(3===n[2])a=e.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");a=e.RGBA}}return s!==e.FLOAT||e.getExtension("OES_texture_float")||(s=e.UNSIGNED_BYTE,u=!1),h=t.size,u?g=0===t.offset&&t.data.length===h?t.data:t.data.subarray(t.offset,t.offset+h):(j=[n[2],n[2]*n[0],1],p=o.malloc(h,c),v=i(p,n,j,0),"float32"!==c&&"float64"!==c||s!==e.UNSIGNED_BYTE?m.assign(v,t):l(v,t),g=p.subarray(0,h)),y=d(e),e.texImage2D(e.TEXTURE_2D,0,a,n[0],n[1],0,a,s,g),u||o.free(p),new r(e,y,n[0],n[1],a,s)}(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,h=null,c=null;function p(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}l=function(e,t){m.muls(e,t,255)};function u(e,t,n){var s=e.gl,o=s.getParameter(s.MAX_TEXTURE_SIZE);if(t<0||t>o||n<0||n>o)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),s.texImage2D(s.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function r(e,t,n,s,o,i){this.gl=e,this.handle=t,this.format=o,this.type=i,this._shape=[n,s],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var r,a=this,c=[this._wrapS,this._wrapT];Object.defineProperties(c,[{get:function(){return a._wrapS},set:function(e){return a.wrapS=e}},{get:function(){return a._wrapT},set:function(e){return a.wrapT=e}}]),this._wrapVector=c,r=[this._shape[0],this._shape[1]],Object.defineProperties(r,[{get:function(){return a._shape[0]},set:function(e){return a.width=e}},{get:function(){return a._shape[1]},set:function(e){return a.height=e}}]),this._shapeVector=r}s=r.prototype;function f(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function d(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function g(e,t,n,s,o){var a,i=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-texture2d: Invalid texture shape");if(o===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");return a=d(e),e.texImage2D(e.TEXTURE_2D,0,s,t,n,0,s,o,null),new r(e,a,t,n,s,o)}Object.defineProperties(s,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&a.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),h.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&a.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),h.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t,n=this._anisoSamples;return(this._anisoSamples=0|Math.max(e,1),n!==this._anisoSamples)&&(t=this.gl.getExtension("EXT_texture_filter_anisotropic"),t&&this.gl.texParameterf(this.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)),this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),c.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),c.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t,n=0;n<2;++n)if(c.indexOf(e[n])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this._wrapS=e[0],this._wrapT=e[1],t=this.gl,this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this._wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return u(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return u(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,u(this,this._shape[0],e),e}}}),s.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},s.dispose=function(){this.gl.deleteTexture(this.handle)},s.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},s.setPixels=function(e,t,n,s){var r,a=this.gl;if(this.bind(),Array.isArray(t)?(s=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),s=s||0,r=p(e)?e:e.raw,r)this._mipLevels.indexOf(s)<0?(a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,r),this._mipLevels.push(s)):a.texSubImage2D(a.TEXTURE_2D,s,t,n,this.format,this.type,r);else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>s||n+e.shape[0]>this._shape[0]>>>s||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(e,t,n,s,a,r,c,d){if(g=d.dtype,u=d.shape.slice(),u.length<2||u.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var u,p,g,b,j,_,v=0,h=0,y=f(u,d.stride.slice());if("float32"===g?v=e.FLOAT:"float64"===g?(v=e.FLOAT,y=!1,g="float32"):"uint8"===g?v=e.UNSIGNED_BYTE:(v=e.UNSIGNED_BYTE,y=!1,g="uint8"),2===u.length)h=e.LUMINANCE,u=[u[0],u[1],1],d=i(d.data,u,[d.stride[0],d.stride[1],1],d.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])h=e.ALPHA;else if(2===u[2])h=e.LUMINANCE_ALPHA;else if(3===u[2])h=e.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=e.RGBA}u[2]}if(h!==e.LUMINANCE&&h!==e.ALPHA||a!==e.LUMINANCE&&a!==e.ALPHA||(h=a),h!==a)throw new Error("gl-texture2d: Incompatible texture format for setPixels");p=d.size,j=c.indexOf(s)<0,j&&c.push(s),v===r&&y?0===d.offset&&d.data.length===p?j?e.texImage2D(e.TEXTURE_2D,s,a,u[0],u[1],0,a,r,d.data):e.texSubImage2D(e.TEXTURE_2D,s,t,n,u[0],u[1],a,r,d.data):j?e.texImage2D(e.TEXTURE_2D,s,a,u[0],u[1],0,a,r,d.data.subarray(d.offset,d.offset+p)):e.texSubImage2D(e.TEXTURE_2D,s,t,n,u[0],u[1],a,r,d.data.subarray(d.offset,d.offset+p)):(b=r===e.FLOAT?o.mallocFloat32(p):o.mallocUint8(p),_=i(b,u,[u[2],u[2]*u[0],1]),v===e.FLOAT&&r===e.UNSIGNED_BYTE?l(_,d):m.assign(_,d),j?e.texImage2D(e.TEXTURE_2D,s,a,u[0],u[1],0,a,r,b.subarray(0,p)):e.texSubImage2D(e.TEXTURE_2D,s,t,n,u[0],u[1],a,r,b.subarray(0,p)),r===e.FLOAT?o.freeFloat32(b):o.freeUint8(b))}(a,t,n,s,this.format,this.type,this._mipLevels,e)}}},1433:function(e){"use strict";e.exports=function(e,t,n){if(t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),i=0|e.getParameter(e.MAX_VERTEX_ATTRIBS),n){if(n.length>i)throw new Error("gl-vao: Too many vertex attributes");for(o=0;o<n.length;++o)if(s=n[o],s.buffer){var s,o,i,a=s.buffer,r=s.size||4,c=s.type||e.FLOAT,l=!!s.normalized,d=s.stride||0,u=s.offset||0;a.bind(),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,r,c,l,d,u)}else{if("number"==typeof s)e.vertexAttrib1f(o,s);else if(1===s.length)e.vertexAttrib1f(o,s[0]);else if(2===s.length)e.vertexAttrib2f(o,s[0],s[1]);else if(3===s.length)e.vertexAttrib3f(o,s[0],s[1],s[2]);else{if(4!==s.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(o,s[0],s[1],s[2],s[3])}e.disableVertexAttribArray(o)}for(;o<i;++o)e.disableVertexAttribArray(o)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),o=0;o<i;++o)e.disableVertexAttribArray(o)}},870:function(e,t,n){"use strict";var o=n(1433);function s(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}s.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},s.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},s.prototype.dispose=function(){},s.prototype.unbind=function(){},s.prototype.draw=function(e,t,n){n=n||0;var s=this.gl;this._elements?s.drawElements(e,t,this._elementsType,n):s.drawArrays(e,n,t)},e.exports=function(e){return new s(e)}},7518:function(e,t,n){"use strict";var i=n(1433);function o(e,t,n,s,o,i){this.location=e,this.dimension=t,this.a=n,this.b=s,this.c=o,this.d=i}function s(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}o.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},s.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},s.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},s.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},s.prototype.update=function(e,t,n){if(this.bind(),i(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var s,a=0;a<e.length;++a)s=e[a],"number"==typeof s?this._attribs.push(new o(a,1,s)):Array.isArray(s)&&this._attribs.push(new o(a,s.length,s[0],s[1],s[2],s[3]));this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},s.prototype.draw=function(e,t,n){n=n||0;var s=this.gl;this._useElements?s.drawElements(e,t,this._elementsType,n):s.drawArrays(e,n,t)},e.exports=function(e,t){return new s(e,t,t.createVertexArrayOES())}},8116:function(e,t,n){"use strict";var s=n(7518),o=n(870);function i(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}e.exports=function(e,t,n,a){var r,c=e.createVertexArray?new i(e):e.getExtension("OES_vertex_array_object");return(r=c?s(e,c):o(e)).update(t,n,a),r}},5632:function(e){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},8192:function(e,t,n){e.exports=function(e,t){var r,n=s(e[0],e[1],e[2]),a=s(t[0],t[1],t[2]);return o(n,n),o(a,a),r=i(n,a),r>1?0:Math.acos(r)};var s=n(2825),o=n(3536),i=n(244)},9226:function(e){e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},3126:function(e){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},3990:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},1091:function(e){e.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},5911:function(e){e.exports=function(e,t,n){var s=t[0],o=t[1],i=t[2],a=n[0],r=n[1],c=n[2];return e[0]=o*c-i*r,e[1]=i*a-s*c,e[2]=s*r-o*a,e}},5455:function(e,t,n){e.exports=n(7056)},7056:function(e){e.exports=function(e,t){var n=t[0]-e[0],s=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+s*s+o*o)}},4008:function(e,t,n){e.exports=n(6690)},6690:function(e){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},244:function(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},2613:function(e){e.exports=1e-6},9922:function(e,t,n){e.exports=function(e,t){var n=e[0],o=e[1],i=e[2],a=t[0],r=t[1],c=t[2];return Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-r)<=s*Math.max(1,Math.abs(o),Math.abs(r))&&Math.abs(i-c)<=s*Math.max(1,Math.abs(i),Math.abs(c))};var s=n(2613)},9265:function(e){e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},2681:function(e){e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},5137:function(e,t,n){e.exports=function(e,t,n,o,i,a){var r,c;for(t||(t=3),n||(n=0),c=o?Math.min(o*t+n,e.length):e.length,r=n;r<c;r+=t)s[0]=e[r],s[1]=e[r+1],s[2]=e[r+2],i(s,s,a),e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2];return e};var s=n(1091)()},2825:function(e){e.exports=function(e,t,n){var s=new Float32Array(3);return s[0]=e,s[1]=t,s[2]=n,s}},2931:function(e,t,n){e.exports={EPSILON:n(2613),create:n(1091),clone:n(3126),angle:n(8192),fromValues:n(2825),copy:n(3990),set:n(1463),equals:n(9922),exactEquals:n(9265),add:n(5632),subtract:n(6843),sub:n(2229),multiply:n(5847),mul:n(4505),divide:n(6690),div:n(4008),min:n(8107),max:n(7417),floor:n(2681),ceil:n(9226),round:n(2447),scale:n(6621),scaleAndAdd:n(8489),distance:n(7056),dist:n(5455),squaredDistance:n(2953),sqrDist:n(6141),length:n(1387),len:n(868),squaredLength:n(3066),sqrLen:n(5486),negate:n(5093),inverse:n(811),normalize:n(3536),dot:n(244),cross:n(5911),lerp:n(6658),random:n(7636),transformMat4:n(5673),transformMat3:n(492),transformQuat:n(264),rotateX:n(6894),rotateY:n(109),rotateZ:n(8692),forEach:n(5137)}},811:function(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},868:function(e,t,n){e.exports=n(1387)},1387:function(e){e.exports=function(e){var t=e[0],n=e[1],s=e[2];return Math.sqrt(t*t+n*n+s*s)}},6658:function(e){e.exports=function(e,t,n,s){var o=t[0],i=t[1],a=t[2];return e[0]=o+s*(n[0]-o),e[1]=i+s*(n[1]-i),e[2]=a+s*(n[2]-a),e}},7417:function(e){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},8107:function(e){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},4505:function(e,t,n){e.exports=n(5847)},5847:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},5093:function(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},3536:function(e){e.exports=function(e,t){var s=t[0],o=t[1],i=t[2],n=s*s+o*o+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}},7636:function(e){e.exports=function(e,t){t=t||1;var s=2*Math.random()*Math.PI,n=2*Math.random()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(s)*o,e[1]=Math.sin(s)*o,e[2]=n*t,e}},6894:function(e){e.exports=function(e,t,n,s){var o=n[1],i=n[2],a=t[1]-o,r=t[2]-i,c=Math.sin(s),l=Math.cos(s);return e[0]=t[0],e[1]=o+a*l-r*c,e[2]=i+a*c+r*l,e}},109:function(e){e.exports=function(e,t,n,s){var o=n[0],i=n[2],a=t[0]-o,r=t[2]-i,c=Math.sin(s),l=Math.cos(s);return e[0]=o+r*c+a*l,e[1]=t[1],e[2]=i+r*l-a*c,e}},8692:function(e){e.exports=function(e,t,n,s){var o=n[0],i=n[1],a=t[0]-o,r=t[1]-i,c=Math.sin(s),l=Math.cos(s);return e[0]=o+a*l-r*c,e[1]=i+a*c+r*l,e[2]=t[2],e}},2447:function(e){e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},6621:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},8489:function(e){e.exports=function(e,t,n,s){return e[0]=t[0]+n[0]*s,e[1]=t[1]+n[1]*s,e[2]=t[2]+n[2]*s,e}},1463:function(e){e.exports=function(e,t,n,s){return e[0]=t,e[1]=n,e[2]=s,e}},6141:function(e,t,n){e.exports=n(2953)},5486:function(e,t,n){e.exports=n(3066)},2953:function(e){e.exports=function(e,t){var n=t[0]-e[0],s=t[1]-e[1],o=t[2]-e[2];return n*n+s*s+o*o}},3066:function(e){e.exports=function(e){var t=e[0],n=e[1],s=e[2];return t*t+n*n+s*s}},2229:function(e,t,n){e.exports=n(6843)},6843:function(e){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},492:function(e){e.exports=function(e,t,n){var s=t[0],o=t[1],i=t[2];return e[0]=s*n[0]+o*n[3]+i*n[6],e[1]=s*n[1]+o*n[4]+i*n[7],e[2]=s*n[2]+o*n[5]+i*n[8],e}},5673:function(e){e.exports=function(e,t,n){var o=t[0],i=t[1],a=t[2],s=n[3]*o+n[7]*i+n[11]*a+n[15];return s=s||1,e[0]=(n[0]*o+n[4]*i+n[8]*a+n[12])/s,e[1]=(n[1]*o+n[5]*i+n[9]*a+n[13])/s,e[2]=(n[2]*o+n[6]*i+n[10]*a+n[14])/s,e}},264:function(e){e.exports=function(e,t,n){var l=t[0],r=t[1],c=t[2],o=n[0],i=n[1],a=n[2],s=n[3],d=s*l+i*c-a*r,u=s*r+a*l-o*c,h=s*c+o*r-i*l,m=-o*l-i*r-a*c;return e[0]=d*s+m*-o+u*-a-h*-i,e[1]=u*s+m*-i+h*-o-d*-a,e[2]=h*s+m*-a+d*-i-u*-o,e}},4361:function(e){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}},2335:function(e){e.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},2933:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},7536:function(e){e.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},4691:function(e){e.exports=function(e,t){var n=t[0]-e[0],s=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+s*s+o*o+i*i)}},1373:function(e){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}},3750:function(e){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},3390:function(e){e.exports=function(e,t,n,s){var o=new Float32Array(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=s,o}},9970:function(e,t,n){e.exports={create:n(7536),clone:n(2335),fromValues:n(3390),copy:n(2933),set:n(4578),add:n(4361),subtract:n(6860),multiply:n(3576),divide:n(1373),min:n(2334),max:n(160),scale:n(9288),scaleAndAdd:n(4844),distance:n(4691),squaredDistance:n(7960),length:n(6808),squaredLength:n(483),negate:n(1498),inverse:n(4494),normalize:n(5177),dot:n(3750),lerp:n(2573),random:n(9131),transformMat4:n(5352),transformQuat:n(4041)}},4494:function(e){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},6808:function(e){e.exports=function(e){var t=e[0],n=e[1],s=e[2],o=e[3];return Math.sqrt(t*t+n*n+s*s+o*o)}},2573:function(e){e.exports=function(e,t,n,s){var o=t[0],i=t[1],a=t[2],r=t[3];return e[0]=o+s*(n[0]-o),e[1]=i+s*(n[1]-i),e[2]=a+s*(n[2]-a),e[3]=r+s*(n[3]-r),e}},160:function(e){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}},2334:function(e){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}},3576:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}},1498:function(e){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},5177:function(e){e.exports=function(e,t){var s=t[0],o=t[1],i=t[2],a=t[3],n=s*s+o*o+i*i+a*a;return n>0&&(n=1/Math.sqrt(n),e[0]=s*n,e[1]=o*n,e[2]=i*n,e[3]=a*n),e}},9131:function(e,t,n){var s=n(5177),o=n(9288);e.exports=function(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),s(e,e),o(e,e,t),e}},9288:function(e){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}},4844:function(e){e.exports=function(e,t,n,s){return e[0]=t[0]+n[0]*s,e[1]=t[1]+n[1]*s,e[2]=t[2]+n[2]*s,e[3]=t[3]+n[3]*s,e}},4578:function(e){e.exports=function(e,t,n,s,o){return e[0]=t,e[1]=n,e[2]=s,e[3]=o,e}},7960:function(e){e.exports=function(e,t){var n=t[0]-e[0],s=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+s*s+o*o+i*i}},483:function(e){e.exports=function(e){var t=e[0],n=e[1],s=e[2],o=e[3];return t*t+n*n+s*s+o*o}},6860:function(e){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}},5352:function(e){e.exports=function(e,t,n){var s=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*s+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*s+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*s+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*s+n[7]*o+n[11]*i+n[15]*a,e}},4041:function(e){e.exports=function(e,t,n){var l=t[0],r=t[1],c=t[2],o=n[0],i=n[1],a=n[2],s=n[3],d=s*l+i*c-a*r,u=s*r+a*l-o*c,h=s*c+o*r-i*l,m=-o*l-i*r-a*c;return e[0]=d*s+m*-o+u*-a-h*-i,e[1]=u*s+m*-i+h*-o-d*-a,e[2]=h*s+m*-a+d*-i-u*-o,e[3]=t[3],e}},1848:function(e,t,n){var s=n(4905),o=n(6468);e.exports=function(e){for(var t,i,a,c,r=Array.isArray(e)?e:s(e),n=0;n<r.length;n++)if(i=r[n],"preprocessor"===i.type&&(t=i.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/),t&&t[2]))return c=t[1],a=t[2],(c?o(a):a).trim()}},5874:function(e,t,n){e.exports=function(e){var t,C,T,z,I,n=0,A=0,x=s,O=[],M=[],H=1,F=0,k=0,P=!1,R=!1,S="",L=_,N=f;"300 es"===(e=e||{}).version&&(L=p,N=j),z={},T={};for(n=0;n<L.length;n++)z[L[n]]=!0;for(n=0;n<N.length;n++)T[N[n]]=!0;return function(e){return M=[],null!==e?function(e){var d;for(n=0,e.toString&&(e=e.toString()),S+=e.replace(/\r\n/g,`
`),I=S.length;t=S[n],n<I;){switch(d=n,x){case i:n=B();break;case a:case h:n=V();break;case m:n=W();break;case r:n=q();break;case u:n=K();break;case o:n=Y();break;case l:n=G();break;case c:n=$();break;case s:n=U()}d!==n&&(`
`===S[d]?(F=0,++H):++F)}return A+=n,S=S.slice(n),M}(e):(O.length&&E(O.join("")),x=y,E("(eof)"),M)};function E(e){e.length&&M.push({type:w[x],data:e,position:k,line:H,column:F})}function U(){return O=O.length?[]:O,"/"===C&&"*"===t?(k=A+n-1,x=i,C=t,n+1):"/"===C&&"/"===t?(k=A+n-1,x=a,C=t,n+1):"#"===t?(x=h,k=A+n,n):/\s/.test(t)?(x=c,k=A+n,n):(P=/\d/.test(t),R=/[^\w_]/.test(t),k=A+n,x=P?r:R?m:l,n)}function $(){return/[^\s]/g.test(t)?(E(O.join("")),x=s,n):(O.push(t),C=t,n+1)}function V(){return``!==t&&`
`!==t||"\\"===C?(O.push(t),C=t,n+1):(E(O.join("")),x=s,n)}function B(){return"/"===t&&"*"===C?(O.push(t),E(O.join("")),x=s,n+1):(O.push(t),C=t,n+1)}function W(){if("."===C&&/\d/.test(t))return x=o,n;if("/"===C&&"*"===t)return x=i,n;if("/"===C&&"/"===t)return x=a,n;if("."===t&&O.length){for(;D(O););return x=o,n}if(";"===t||")"===t||"("===t){if(O.length)for(;D(O););return E(t),x=s,n+1}var e=2===O.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;D(O););return x=s,n}return O.push(t),C=t,n+1}function D(e){for(var t,n,s=0;;){if(n=d.indexOf(e.slice(0,e.length+s).join("")),t=d[n],-1===n){if(s--+e.length>0)continue;t=e.slice(0,1).join("")}return E(t),k+=t.length,(O=O.slice(t.length)).length}}function K(){return/[^a-fA-F0-9]/.test(t)?(E(O.join("")),x=s,n):(O.push(t),C=t,n+1)}function q(){return"."===t||/[eE]/.test(t)?(O.push(t),x=o,C=t,n+1):"x"===t&&1===O.length&&"0"===O[0]?(x=u,O.push(t),C=t,n+1):/[^\d]/.test(t)?(E(O.join("")),x=s,n):(O.push(t),C=t,n+1)}function Y(){return"f"===t&&(O.push(t),C=t,n+=1),/[eE]/.test(t)?(O.push(t),C=t,n+1):("-"!==t&&"+"!==t||!/[eE]/.test(C))&&/[^\d]/.test(t)?(E(O.join("")),x=s,n):(O.push(t),C=t,n+1)}function G(){if(/[^\d\w_]/.test(t)){var e=O.join("");return x=T[e]?b:z[e]?v:g,E(O.join("")),x=s,n}return O.push(t),C=t,n+1}};var f=n(620),d=n(7827),_=n(6852),j=n(7932),p=n(3508),s=999,l=9999,i=0,a=1,h=2,m=3,r=4,o=5,g=6,v=7,b=8,c=9,y=10,u=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(e,t,n){var s=n(6852),s=s.slice().filter(function(e){return!/^(gl_|texture)/.test(e)});e.exports=s.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(e){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(e,t,n){var s=n(620);e.exports=s.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(e){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(e){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(e,t,n){var s=n(5874);e.exports=function(e,t){var n=s(t),o=[];return(o=o.concat(n(e))).concat(n(null))}},3236:function(e){e.exports=function(e){"string"==typeof e&&(e=[e]);for(var s=[].slice.call(arguments,1),n=[],t=0;t<e.length-1;t++)n.push(e[t],s[t]||"");return n.push(e[t]),n.join("")}},7520:function(e,t,n){"use strict";var s=n(9507);e.exports=s&&function(){var t,e=!1;try{t=Object.defineProperty({},"passive",{get:function(){e=!0}}),window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{e=!1}return e}()},3778:function(e,t){t.read=function(e,t,n,s,o){var i,r,m=8*o-s-1,u=(1<<m)-1,h=u>>1,a=-7,c=n?o-1:0,d=n?-1:1,l=e[t+c];for(c+=d,i=l&(1<<-a)-1,l>>=-a,a+=m;a>0;i=256*i+e[t+c],c+=d,a-=8);for(r=i&(1<<-a)-1,i>>=-a,a+=s;a>0;r=256*r+e[t+c],c+=d,a-=8);if(0===i)i=1-h;else{if(i===u)return r?NaN:1/0*(l?-1:1);r+=Math.pow(2,s),i-=h}return(l?-1:1)*r*Math.pow(2,i-s)},t.write=function(e,t,n,s,o,i){var a,r,c,u=8*i-o-1,h=(1<<u)-1,l=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=s?0:i-1,m=s?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=h?(r=0,a=h):a+l>=1?(r=(t*c-1)*Math.pow(2,o),a+=l):(r=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[n+d]=255&r,d+=m,r/=256,o-=8);for(a=a<<o|r,u+=o;u>0;e[n+d]=255&a,d+=m,a/=256,u-=8);e[n+d-m]|=128*p}},8954:function(e,t,n){"use strict";e.exports=function(e,t){if(h=e.length,0===h)throw new Error("Must have at least d+1 points");if(s=e[0].length,h<=s)throw new Error("Must input at least d+1 points");if(j=e.slice(0,s+1),p=i.apply(void 0,j),0===p)throw new Error("Input not in general position");for(l=new Array(s+1),n=0;n<=s;++n)l[n]=n;p<0&&(l[0]=1,l[1]=0);var n,s,a,c,l,d,h,p,g,v,b,j,y,_,w,f=new o(l,new Array(s+1),!1),u=f.adjacent,m=new Array(s+2);for(n=0;n<=s;++n){for(c=l.slice(),a=0;a<=s;++a)a===n&&(c[a]=-1);_=c[0],c[0]=c[1],c[1]=_,g=new o(c,new Array(s+1),!0),u[n]=g,m[n]=g}for(m[s+1]=f,n=0;n<=s;++n){c=u[n].vertices,v=u[n].adjacent;for(a=0;a<=s;++a)if(b=c[a],b<0)v[a]=f;else for(d=0;d<=s;++d)u[d].vertices.indexOf(b)<0&&(v[a]=u[d])}y=new r(s,j,m),w=!!t;for(n=s+1;n<h;++n)y.insert(e[n],w);return y.boundary()};var s,a,i=n(3250),d=n(6803).Fw;function o(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function c(e,t,n){this.vertices=e,this.cell=t,this.index=n}function l(e,t){return d(e.vertices,t.vertices)}o.prototype.flip=function(){var e,t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t,e=this.adjacent[0],this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e},a=[];function r(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var o,r,s=0;s<=e;++s)this.tuple[s]=this.vertices[s];o=a[e],o||(o=a[e]=((r=i[e+1])||(r=i),function(e){return function(){var t=this.tuple;return e.apply(this,t)}}(r))),this.orient=o}s=r.prototype,s.handleBoundaryDegeneracy=function(e,t){var n,s,o,a,c,l,u,d=this.dimension,r=this.vertices.length-1,h=this.tuple,m=this.vertices,i=[e];for(e.lastVisited=-r;i.length>0;)for(u=(e=i.pop()).adjacent,o=0;o<=d;++o)if(n=u[o],n.boundary&&!(n.lastVisited<=-r)){for(l=n.vertices,s=0;s<=d;++s)c=l[s],h[s]=c<0?t:m[c];if(a=this.orient(),a>0)return n;n.lastVisited=-r,0===a&&i.push(n)}return null},s.walk=function(e,t){var s,c,l,i=this.vertices.length-1,r=this.dimension,h=this.vertices,a=this.tuple,m=t?this.interior.length*Math.random()|0:this.interior.length-1,o=this.interior[m];t:for(;!o.boundary;){for(var d=o.vertices,u=o.adjacent,n=0;n<=r;++n)a[n]=h[d[n]];for(o.lastVisited=i,n=0;n<=r;++n)if(s=u[n],!(s.lastVisited>=i)){if(c=a[n],a[n]=e,l=this.orient(),a[n]=c,l<0){o=s;continue t}s.boundary?s.lastVisited=-i:s.lastVisited=i}return}return o},s.addPeaks=function(e,t){var n,s,i,r,p,v,y,O,x,a=this.vertices.length-1,u=this.dimension,F=this.vertices,E=this.tuple,S=this.interior,T=this.simplices,_=[t];t.lastVisited=a,t.vertices[t.vertices.indexOf(-1)]=a,t.boundary=!1,S.push(t);for(r=[];_.length>0;){var k=(t=_.pop()).vertices,j=t.adjacent,b=k.indexOf(a);if(!(b<0))for(s=0;s<=u;++s)if(s!==b&&(i=j[s],i.boundary&&!(i.lastVisited>=a))){if(p=i.vertices,i.lastVisited!==-a){for(O=0,n=0;n<=u;++n)p[n]<0?(O=n,E[n]=e):E[n]=F[p[n]];if(this.orient()>0){p[O]=a,i.boundary=!1,S.push(i),_.push(i),i.lastVisited=a;continue}i.lastVisited=-a}var C=i.adjacent,g=k.slice(),w=j.slice(),d=new o(g,w,!0);if(T.push(d),v=C.indexOf(t),!(v<0))for(C[v]=d,w[b]=i,g[s]=-1,w[s]=t,j[s]=d,d.flip(),n=0;n<=u;++n)if(y=g[n],!(y<0||y===a)){for(var A=new Array(u-1),M=0,f=0;f<=u;++f)x=g[f],x<0||f===n||(A[M++]=x);r.push(new c(A,d,n))}}}for(r.sort(l),s=0;s+1<r.length;s+=2){var h=r[s],m=r[s+1],z=h.index,D=m.index;z<0||D<0||(h.cell.adjacent[h.index]=m.cell,m.cell.adjacent[m.index]=h.cell)}},s.insert=function(e,t){if(o=this.vertices,o.push(e),n=this.walk(e,t),n){for(var n,o,i,a,c=this.dimension,r=this.tuple,s=0;s<=c;++s)i=n.vertices[s],r[s]=i<0?e:o[i];a=this.orient(r),a<0||(0!==a||(n=this.handleBoundaryDegeneracy(n,e)))&&this.addPeaks(e,n)}},s.boundary=function(){for(var n,l,s=this.dimension,i=[],a=this.simplices,u=a.length,o=0;o<u;++o)if(n=a[o],n.boundary){for(var e=new Array(s),c=n.vertices,d=0,r=0,t=0;t<=s;++t)c[t]>=0?e[d++]=c[t]:r=1&t;r===(1&s)&&(l=e[0],e[0]=e[1],e[1]=l),i.push(e)}return i}},3352:function(e,t,n){"use strict";var s,i,a=n(2478);function l(e,t,n,s,o){this.mid=e,this.left=t,this.right=n,this.leftPoints=s,this.rightPoints=o,this.count=(t?t.count:0)+(n?n.count:0)+s.length}e.exports=function(e){return e&&0!==e.length?new u(o(e)):new u(null)},i=l.prototype;function d(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function h(e,t){var n=o(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function f(e,t){var n=e.intervals([]);n.push(t),h(e,n)}function p(e,t){var n=e.intervals([]),s=n.indexOf(t);return s<0?0:(n.splice(s,1),h(e,n),1)}function g(e,t,n){for(var o,s=0;s<e.length&&e[s][0]<=t;++s)if(o=n(e[s]),o)return o}function v(e,t,n){for(var o,s=e.length-1;s>=0&&e[s][1]>=t;--s)if(o=n(e[s]),o)return o}function m(e,t){for(var s,n=0;n<e.length;++n)if(s=t(e[n]),s)return s}function b(e,t){return e-t}function r(e,t){return e[0]-t[0]||e[1]-t[1]}function c(e,t){return e[1]-t[1]||e[0]-t[0]}function o(e){if(0===e.length)return null;for(s=[],t=0;t<e.length;++t)s.push(e[t][0],e[t][1]);s.sort(b);var t,n,s,d,u,i=s[s.length>>1],h=[],m=[],a=[];for(t=0;t<e.length;++t)n=e[t],n[1]<i?h.push(n):i<n[0]?m.push(n):a.push(n);return d=a,u=a.slice(),d.sort(r),u.sort(c),new l(i,o(h),o(m),d,u)}function u(e){this.root=e}i.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},i.insert=function(e){if(t=this.count-this.leftPoints.length,this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?f(this,e):this.left.insert(e):this.left=o([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?f(this,e):this.right.insert(e):this.right=o([e]);else{var t,n=a.ge(this.leftPoints,e,r),s=a.ge(this.rightPoints,e,c);this.leftPoints.splice(n,0,e),this.rightPoints.splice(s,0,e)}},i.remove=function(e){if(i=this.count-this.leftPoints,e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(i-1)?p(this,e):2===(t=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===t&&(this.count-=1),t):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(i-1)?p(this,e):2===(t=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===t&&(this.count-=1),t):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var t,s,i,o=this,n=this.left;n.right;)o=n,n=n.right;o===this?n.right=this.right:(s=this.left,t=this.right,o.count-=n.count,o.right=n.left,n.left=s,n.right=t),d(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?d(this,this.left):d(this,this.right);return 1}for(s=a.ge(this.leftPoints,e,r);s<this.leftPoints.length&&this.leftPoints[s][0]===e[0];++s)if(this.leftPoints[s]===e)for(this.count-=1,this.leftPoints.splice(s,1),t=a.ge(this.rightPoints,e,c);t<this.rightPoints.length&&this.rightPoints[t][1]===e[1];++t)if(this.rightPoints[t]===e)return this.rightPoints.splice(t,1),1;return 0},i.queryPoint=function(e,t){return e<this.mid?this.left&&(n=this.left.queryPoint(e,t))?n:g(this.leftPoints,e,t):e>this.mid?this.right&&(n=this.right.queryPoint(e,t))?n:v(this.rightPoints,e,t):m(this.leftPoints,t);var n},i.queryInterval=function(e,t,n){var s;return e<this.mid&&this.left&&(s=this.left.queryInterval(e,t,n))||t>this.mid&&this.right&&(s=this.right.queryInterval(e,t,n))?s:t<this.mid?g(this.leftPoints,t,n):e>this.mid?v(this.rightPoints,e,n):m(this.leftPoints,n)},s=u.prototype,s.insert=function(e){this.root?this.root.insert(e):this.root=new l(e[0],null,null,[e],[e])},s.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},s.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},s.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(s,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(s,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(e){"use strict";e.exports=function(e){for(var n=new Array(e),t=0;t<e;++t)n[t]=t;return n}},9507:function(e){e.exports=!0},7163:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return e!=null&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},5219:function(e){"use strict";e.exports=function(e){for(var t,s=e.length,n=0;n<s;n++)if(((t=e.charCodeAt(n))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},395:function(e){e.exports=function(e,t,n){return e*(1-n)+t*n}},2652:function(e,t,n){var p=n(4335),l=n(6864),f=n(1903),m=n(9921),h=n(7608),u=n(5665),o={length:n(1387),normalize:n(3536),dot:n(244),cross:n(5911)},a=l(),i=l(),r=[0,0,0,0],s=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];function c(e,t,n,s,o){e[0]=t[0]*s+n[0]*o,e[1]=t[1]*s+n[1]*o,e[2]=t[2]*s+n[2]*o}e.exports=function(e,t,n,l,g,v){if(t||(t=[0,0,0]),n||(n=[0,0,0]),l||(l=[0,0,0]),g||(g=[0,0,0,1]),v||(v=[0,0,0,1]),!p(a,e))return!1;if(f(i,a),i[3]=0,i[7]=0,i[11]=0,i[15]=1,Math.abs(m(i)<1e-8))return!1;var b,j,y,_,w,O,x,C,A=a[3],E=a[7],k=a[11],S=a[12],M=a[13],F=a[14],T=a[15];if(0!==A||0!==E||0!==k){if(r[0]=A,r[1]=E,r[2]=k,r[3]=T,!h(i,i))return!1;u(i,i),x=g,b=i,_=(C=r)[0],w=C[1],O=C[2],y=C[3],x[0]=b[0]*_+b[4]*w+b[8]*O+b[12]*y,x[1]=b[1]*_+b[5]*w+b[9]*O+b[13]*y,x[2]=b[2]*_+b[6]*w+b[10]*O+b[14]*y,x[3]=b[3]*_+b[7]*w+b[11]*O+b[15]*y}else g[0]=g[1]=g[2]=0,g[3]=1;if(t[0]=S,t[1]=M,t[2]=F,function(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}(s,a),n[0]=o.length(s[0]),o.normalize(s[0],s[0]),l[0]=o.dot(s[0],s[1]),c(s[1],s[1],s[0],1,-l[0]),n[1]=o.length(s[1]),o.normalize(s[1],s[1]),l[0]/=n[1],l[1]=o.dot(s[0],s[2]),c(s[2],s[2],s[0],1,-l[1]),l[2]=o.dot(s[1],s[2]),c(s[2],s[2],s[1],1,-l[2]),n[2]=o.length(s[2]),o.normalize(s[2],s[2]),l[1]/=n[2],l[2]/=n[2],o.cross(d,s[1],s[2]),o.dot(s[0],d)<0)for(j=0;j<3;j++)n[j]*=-1,s[j][0]*=-1,s[j][1]*=-1,s[j][2]*=-1;return v[0]=.5*Math.sqrt(Math.max(1+s[0][0]-s[1][1]-s[2][2],0)),v[1]=.5*Math.sqrt(Math.max(1-s[0][0]+s[1][1]-s[2][2],0)),v[2]=.5*Math.sqrt(Math.max(1-s[0][0]-s[1][1]+s[2][2],0)),v[3]=.5*Math.sqrt(Math.max(1+s[0][0]+s[1][1]+s[2][2],0)),s[2][1]>s[1][2]&&(v[0]=-v[0]),s[0][2]>s[2][0]&&(v[1]=-v[1]),s[1][0]>s[0][1]&&(v[2]=-v[2]),!0}},4335:function(e){e.exports=function(e,t){if(s=t[15],0===s)return!1;for(var s,o=1/s,n=0;n<16;n++)e[n]=t[n]*o;return!0}},7442:function(e,t,n){var a=n(6658),h=n(7182),l=n(2652),d=n(9921),u=n(8648),i=r(),s=r(),o=r();function r(){return{translate:c(),scale:c(1),skew:c(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function c(e){return[e||0,e||0,e||0]}e.exports=function(e,t,n,r){if(0===d(t)||0===d(n))return!1;var c=l(t,i.translate,i.scale,i.skew,i.perspective,i.quaternion),m=l(n,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!c||!m||(a(o.translate,i.translate,s.translate,r),a(o.skew,i.skew,s.skew,r),a(o.scale,i.scale,s.scale,r),a(o.perspective,i.perspective,s.perspective,r),u(o.quaternion,i.quaternion,s.quaternion,r),h(e,o.translate,o.scale,o.skew,o.perspective,o.quaternion),0))}},7182:function(e,t,n){var s={identity:n(7894),translate:n(7656),multiply:n(6760),create:n(6864),scale:n(2504),fromRotationTranslation:n(6743)},o=(s.create(),s.create());e.exports=function(e,t,n,i,a,r){return s.identity(e),s.fromRotationTranslation(e,r,t),e[3]=a[0],e[7]=a[1],e[11]=a[2],e[15]=a[3],s.identity(o),0!==i[2]&&(o[9]=i[2],s.multiply(e,e,o)),0!==i[1]&&(o[9]=0,o[8]=i[1],s.multiply(e,e,o)),0!==i[0]&&(o[8]=0,o[4]=i[0],s.multiply(e,e,o)),s.scale(e,e,n),e}},4192:function(e,t,n){"use strict";var s,o,c=n(2478),f=n(7442),i=n(7608),m=n(5567),d=n(2408),l=n(7089),p=n(6582),r=n(7656),u=(n(2504),n(3536)),h=[0,0,0];function a(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=function(e){return new a((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},s=a.prototype,s.recalcMatrix=function(e){var t,o,a,r,d,h,m,g,j,y,l=this._time,s=c.le(l,e),n=this.computedMatrix;if(!(s<0)){if(h=this._components,s===l.length-1)for(d=16*s,t=0;t<16;++t)n[t]=h[d++];else{var b=l[s+1]-l[s],p=(d=16*s,this.prevMatrix),v=!0;for(t=0;t<16;++t)p[t]=h[d++];g=this.nextMatrix;for(t=0;t<16;++t)g[t]=h[d++],v=v&&p[t]===g[t];if(b<1e-6||v)for(t=0;t<16;++t)n[t]=p[t];else f(n,p,g,(e-l[s])/b)}o=this.computedUp,o[0]=n[1],o[1]=n[5],o[2]=n[9],u(o,o),a=this.computedInverse,i(a,n),r=this.computedEye,m=a[15],r[0]=a[12]/m,r[1]=a[13]/m,r[2]=a[14]/m,j=this.computedCenter,y=Math.exp(this.computedRadius[0]);for(t=0;t<3;++t)j[t]=r[t]-n[2+4*t]*y}},s.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,s=t.length-16,n=0;n<16;++n)t.push(t[s++]);this._time.push(e)}},s.flush=function(e){var t=c.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},s.lastT=function(){return this._time[this._time.length-1]},s.lookAt=function(e,t,n,s){this.recalcMatrix(e),t=t||this.computedEye,n=n||h,s=s||this.computedUp,this.setMatrix(e,p(this.computedMatrix,t,n,s));for(var o=0,i=0;i<3;++i)o+=Math.pow(n[i]-t[i],2);o=Math.log(Math.sqrt(o)),this.computedRadius[0]=o},s.rotate=function(e,t,n,s){this.recalcMatrix(e);var o=this.computedInverse;t&&d(o,o,t),n&&m(o,o,n),s&&l(o,o,s),this.setMatrix(e,i(this.computedMatrix,o))},o=[0,0,0],s.pan=function(e,t,n,s){o[0]=-(t||0),o[1]=-(n||0),o[2]=-(s||0),this.recalcMatrix(e);var a=this.computedInverse;r(a,a,o),this.setMatrix(e,i(a,a))},s.translate=function(e,t,n,s){o[0]=t||0,o[1]=n||0,o[2]=s||0,this.recalcMatrix(e);var i=this.computedMatrix;r(i,i,o),this.setMatrix(e,i)},s.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},s.setDistance=function(e,t){this.computedRadius[0]=t},s.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},s.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},3090:function(e,t,n){"use strict";e.exports=function(e){if(a=e.length,a<3){for(c=new Array(a),t=0;t<a;++t)c[t]=t;return 2===a&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:c}r=new Array(a);for(t=0;t<a;++t)r[t]=t;r.sort(function(t,n){return e[t][0]-e[n][0]||e[t][1]-e[n][1]}),n=[r[0],r[1]],o=[r[0],r[1]];for(t=2;t<a;++t){for(var t,n,o,a,r,c,l,u,m,d=r[t],h=e[d],i=n.length;i>1&&s(e[n[i-2]],e[n[i-1]],h)<=0;)i-=1,n.pop();for(n.push(d),i=o.length;i>1&&s(e[o[i-2]],e[o[i-1]],h)>=0;)i-=1,o.pop();o.push(d)}c=new Array(o.length+n.length-2);for(u=0,m=(t=0,n.length);t<m;++t)c[u++]=n[t];for(l=o.length-2;l>0;--l)c[u++]=o[l];return c};var s=n(3250)[3]},351:function(e,t,n){"use strict";e.exports=function(e,t){t||(t=e,e=window);var h,i=0,c=0,r=0,n={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function m(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==n.alt,n.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==n.shift,n.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==n.control,n.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==n.meta,n.meta=!!e.metaKey),t}function d(e,o){var a=s.x(o),l=s.y(o);"buttons"in o&&(e=0|o.buttons),(e!==i||a!==c||l!==r||m(o))&&(i=0|e,c=a||0,r=l||0,t&&t(i,c,r,n))}function a(e){d(0,e)}function u(){(i||c||r||n.shift||n.alt||n.meta||n.control)&&(c=r=0,i=0,n.shift=n.alt=n.control=n.meta=!1,t&&t(0,0,0,n))}function o(e){m(e)&&t&&t(i,c,r,n)}function f(e){0===s.buttons(e)?d(0,e):d(i,e)}function p(e){d(i|s.buttons(e),e)}function g(e){d(i&~s.buttons(e),e)}function v(){l||(l=!0,e.addEventListener("mousemove",f),e.addEventListener("mousedown",p),e.addEventListener("mouseup",g),e.addEventListener("mouseleave",a),e.addEventListener("mouseenter",a),e.addEventListener("mouseout",a),e.addEventListener("mouseover",a),e.addEventListener("blur",u),e.addEventListener("keyup",o),e.addEventListener("keydown",o),e.addEventListener("keypress",o),e!==window&&(window.addEventListener("blur",u),window.addEventListener("keyup",o),window.addEventListener("keydown",o),window.addEventListener("keypress",o)))}return v(),h={element:e},Object.defineProperties(h,{enabled:{get:function(){return l},set:function(t){t?v():l&&(l=!1,e.removeEventListener("mousemove",f),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",g),e.removeEventListener("mouseleave",a),e.removeEventListener("mouseenter",a),e.removeEventListener("mouseout",a),e.removeEventListener("mouseover",a),e.removeEventListener("blur",u),e.removeEventListener("keyup",o),e.removeEventListener("keydown",o),e.removeEventListener("keypress",o),e!==window&&(window.removeEventListener("blur",u),window.removeEventListener("keyup",o),window.removeEventListener("keydown",o),window.removeEventListener("keypress",o)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return c},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),h};var s=n(4687)},24:function(e){var t={left:0,top:0};e.exports=function(e,n,s){n=n||e.currentTarget||e.srcElement,Array.isArray(s)||(s=[0,0]);var o,a=e.clientX||0,r=e.clientY||0,i=(o=n)===window||o===document||o===document.body?t:o.getBoundingClientRect();return s[0]=a-i.left,s[1]=r-i.top,s}},4687:function(e,t){"use strict";function n(e){return e.target||e.srcElement||window}t.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){{if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},t.element=n,t.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=n(e).getBoundingClientRect();return e.clientX-t.left}return 0},t.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=n(e).getBoundingClientRect();return e.clientY-t.top}return 0}},8512:function(e,t,n){"use strict";var s=n(665);e.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var i=s("ex",e),o=function(e){n&&e.preventDefault();var r=e.deltaX||0,o=e.deltaY||0,a=e.deltaZ||0,s=1;switch(e.deltaMode){case 1:s=i;break;case 2:s=window.innerHeight}if(o*=s,a*=s,(r*=s)||o||a)return t(r,o,a,e)};return e.addEventListener("wheel",o),o}},2640:function(e,t,n){"use strict";var o,s=n(1888);e.exports=function(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments"),a=e.order,Array.isArray(a)||t("Must specify order"),i=e.arrayArguments||1,i<1&&t("Must have at least one array argument"),(e.scalarArguments||0)<0&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var i,a,c=e.getters||[],r=new Array(i),n=0;n<i;++n)c.indexOf(n)>=0?r[n]=!0:r[n]=!1;return function(e,t,n,i,a,r){var c=[r,a].join(",");return(0,o[c])(e,t,n,s.mallocUint32,s.freeUint32)}(e.vertex,e.cell,e.phase,0,a,r)},o={"false,0,1":function(e,t,n,s,o){return function(i,a,r,c){var j,_=0|i.shape[0],B=0|i.shape[1],f=i.data,$=0|i.offset,R=0|i.stride[0],H=0|i.stride[1],d=$,F=0|-R,x=0,N=0|-H,C=0,P=-R-H|0,b=0,M=0|R,I=H-R*_|0,v=0,k=0,z=0,V=2*_|0,u=s(V),E=s(V),l=0,h=0,w=-1,D=-1,p=0,O=0|-_,L=0|_,g=0,A=-_-1|0,T=_-1|0,m=0,S=0,y=0;for(v=0;v<_;++v)u[l++]=n(f[d],a,r,c),d+=M;if(d+=I,B>0){if(k=1,u[l++]=n(f[d],a,r,c),d+=M,_>0)for(v=1,j=f[d],h=u[l]=n(j,a,r,c),p=u[l+w],g=u[l+O],m=u[l+A],h===p&&h===g&&h===m||(x=f[d+F],C=f[d+N],b=f[d+P],e(v,k,j,x,C,b,h,p,g,m,a,r,c),S=E[l]=z++),l+=1,d+=M,v=2;v<_;++v)j=f[d],h=u[l]=n(j,a,r,c),p=u[l+w],g=u[l+O],m=u[l+A],h===p&&h===g&&h===m||(x=f[d+F],C=f[d+N],b=f[d+P],e(v,k,j,x,C,b,h,p,g,m,a,r,c),S=E[l]=z++,m!==p&&t(E[l+w],S,b,x,m,p,a,r,c)),l+=1,d+=M;for(d+=I,l=0,y=w,w=D,D=y,y=O,O=L,L=y,y=A,A=T,T=y,k=2;k<B;++k){if(u[l++]=n(f[d],a,r,c),d+=M,_>0)for(v=1,j=f[d],h=u[l]=n(j,a,r,c),p=u[l+w],g=u[l+O],m=u[l+A],h===p&&h===g&&h===m||(x=f[d+F],C=f[d+N],b=f[d+P],e(v,k,j,x,C,b,h,p,g,m,a,r,c),S=E[l]=z++,m!==g&&t(E[l+O],S,C,b,g,m,a,r,c)),l+=1,d+=M,v=2;v<_;++v)j=f[d],h=u[l]=n(j,a,r,c),p=u[l+w],g=u[l+O],m=u[l+A],h===p&&h===g&&h===m||(x=f[d+F],C=f[d+N],b=f[d+P],e(v,k,j,x,C,b,h,p,g,m,a,r,c),S=E[l]=z++,m!==g&&t(E[l+O],S,C,b,g,m,a,r,c),m!==p&&t(E[l+w],S,b,x,m,p,a,r,c)),l+=1,d+=M;1&k&&(l=0),y=w,w=D,D=y,y=O,O=L,L=y,y=A,A=T,T=y,d+=I}}o(E),o(u)}},"false,1,0":function(e,t,n,s,o){return function(i,a,r,c){var j,B=0|i.shape[0],_=0|i.shape[1],f=i.data,$=0|i.offset,H=0|i.stride[0],T=0|i.stride[1],d=$,z=0|-H,w=0,L=0|-T,C=0,P=-H-T|0,b=0,M=0|T,I=H-T*_|0,E=0,v=0,N=0,V=2*_|0,u=s(V),k=s(V),l=0,h=0,x=-1,D=-1,p=0,O=0|-_,R=0|_,g=0,A=-_-1|0,F=_-1|0,m=0,S=0,y=0;for(v=0;v<_;++v)u[l++]=n(f[d],a,r,c),d+=M;if(d+=I,B>0){if(E=1,u[l++]=n(f[d],a,r,c),d+=M,_>0)for(v=1,j=f[d],h=u[l]=n(j,a,r,c),g=u[l+O],p=u[l+x],m=u[l+A],h===g&&h===p&&h===m||(w=f[d+z],C=f[d+L],b=f[d+P],e(E,v,j,w,C,b,h,g,p,m,a,r,c),S=k[l]=N++),l+=1,d+=M,v=2;v<_;++v)j=f[d],h=u[l]=n(j,a,r,c),g=u[l+O],p=u[l+x],m=u[l+A],h===g&&h===p&&h===m||(w=f[d+z],C=f[d+L],b=f[d+P],e(E,v,j,w,C,b,h,g,p,m,a,r,c),S=k[l]=N++,m!==p&&t(k[l+x],S,C,b,p,m,a,r,c)),l+=1,d+=M;for(d+=I,l=0,y=O,O=R,R=y,y=x,x=D,D=y,y=A,A=F,F=y,E=2;E<B;++E){if(u[l++]=n(f[d],a,r,c),d+=M,_>0)for(v=1,j=f[d],h=u[l]=n(j,a,r,c),g=u[l+O],p=u[l+x],m=u[l+A],h===g&&h===p&&h===m||(w=f[d+z],C=f[d+L],b=f[d+P],e(E,v,j,w,C,b,h,g,p,m,a,r,c),S=k[l]=N++,m!==g&&t(k[l+O],S,b,w,m,g,a,r,c)),l+=1,d+=M,v=2;v<_;++v)j=f[d],h=u[l]=n(j,a,r,c),g=u[l+O],p=u[l+x],m=u[l+A],h===g&&h===p&&h===m||(w=f[d+z],C=f[d+L],b=f[d+P],e(E,v,j,w,C,b,h,g,p,m,a,r,c),S=k[l]=N++,m!==p&&t(k[l+x],S,C,b,p,m,a,r,c),m!==g&&t(k[l+O],S,b,w,m,g,a,r,c)),l+=1,d+=M;1&E&&(l=0),y=O,O=R,R=y,y=x,x=D,D=y,y=A,A=F,F=y,d+=I}}o(k),o(u)}}}},6199:function(e,t,n){"use strict";var l=n(1338),d={zero:function(e,t,n,s){i=e[0],s|=0;var i,o=0,a=n[0];for(o=0;o<i;++o)t[s]=0,s+=a},fdTemplate1:function(e,t,n,s,o,i,a){var l=e[0],r=n[0],d=-1*r,u=r;s|=0,a|=0;var c=0,h=r,m=i[0];for(c=0;c<l;++c)o[a]=.5*(t[s+d]-t[s+u]),s+=h,a+=m},fdTemplate2:function(e,t,n,s,o,i,a,r,c,l){var v=e[0],d=e[1],m=n[0],u=n[1],O=i[0],p=i[1],w=c[0],g=c[1],b=-1*m,j=m,y=-1*u,_=u;s|=0,a|=0,l|=0;var h=0,f=0,x=u,C=m-d*u,E=p,k=O-d*p,A=g,S=w-d*g;for(f=0;f<v;++f){for(h=0;h<d;++h)o[a]=.5*(t[s+b]-t[s+j]),r[l]=.5*(t[s+y]-t[s+_]),s+=x,a+=E,l+=A;s+=C,a+=k,l+=S}}},a={cdiff:function(e){var t={};return function(n,s,o){var a=n.dtype,h=n.order,r=s.dtype,c=s.order,l=o.dtype,d=o.order,u=[a,h.join(),r,c.join(),l,d.join()].join(),i=t[u];return i||(t[u]=i=e([a,h,r,c,l,d])),i(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset,o.data,o.stride,0|o.offset)}},zero:function(e){var t={};return function(n){var o=n.dtype,i=n.order,a=[o,i.join()].join(),s=t[a];return s||(t[a]=s=e([o,i])),s(n.shape.slice(0),n.data,n.stride,0|n.offset)}},fdTemplate1:function(e){var t={};return function(n,s){var i=n.dtype,a=n.order,r=s.dtype,c=s.order,l=[i,a.join(),r,c.join()].join(),o=t[l];return o||(t[l]=o=e([i,a,r,c])),o(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset)}},fdTemplate2:function(e){var t={};return function(n,s,o){var a=n.dtype,h=n.order,r=s.dtype,c=s.order,l=o.dtype,d=o.order,u=[a,h.join(),r,c.join(),l,d.join()].join(),i=t[u];return i||(t[u]=i=e([a,h,r,c,l,d])),i(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset,o.data,o.stride,0|o.offset)}}};function r(e){return(0,a[e.funcName])(c.bind(void 0,e))}function c(e){return d[e.funcName]}function o(e){return r({funcName:e.funcName})}var s={},i={},u=o({funcName:"cdiff"}),h=o({funcName:"zero"});function m(e){return e in s?s[e]:s[e]=o({funcName:"fdTemplate"+e})}function f(e,t,n,s){return function(e,o){var i=o.shape.slice();return i[0]>2&&i[1]>2&&s(o.pick(-1,-1).lo(1,1).hi(i[0]-2,i[1]-2),e.pick(-1,-1,0).lo(1,1).hi(i[0]-2,i[1]-2),e.pick(-1,-1,1).lo(1,1).hi(i[0]-2,i[1]-2)),i[1]>2&&(n(o.pick(0,-1).lo(1).hi(i[1]-2),e.pick(0,-1,1).lo(1).hi(i[1]-2)),t(e.pick(0,-1,0).lo(1).hi(i[1]-2))),i[1]>2&&(n(o.pick(i[0]-1,-1).lo(1).hi(i[1]-2),e.pick(i[0]-1,-1,1).lo(1).hi(i[1]-2)),t(e.pick(i[0]-1,-1,0).lo(1).hi(i[1]-2))),i[0]>2&&(n(o.pick(-1,0).lo(1).hi(i[0]-2),e.pick(-1,0,0).lo(1).hi(i[0]-2)),t(e.pick(-1,0,1).lo(1).hi(i[0]-2))),i[0]>2&&(n(o.pick(-1,i[1]-1).lo(1).hi(i[0]-2),e.pick(-1,i[1]-1,0).lo(1).hi(i[0]-2)),t(e.pick(-1,i[1]-1,1).lo(1).hi(i[0]-2))),e.set(0,0,0,0),e.set(0,0,1,0),e.set(i[0]-1,0,0,0),e.set(i[0]-1,0,1,0),e.set(0,i[1]-1,0,0),e.set(0,i[1]-1,1,0),e.set(i[0]-1,i[1]-1,0,0),e.set(i[0]-1,i[1]-1,1,0),e}}e.exports=function(e,t,n){return Array.isArray(n)||(n=l(t.dimension,"string"==typeof n?n:"clamp")),0===t.size?e:0===t.dimension?(e.set(0),e):function(e){if(n=e.join(),t=i[n])return t;for(var t,n,a=e.length,o=[u,h],s=1;s<=a;++s)o.push(m(s));return t=f.apply(void 0,o),i[n]=t,t}(n)(e,t)}},4317:function(e){"use strict";function t(e,t){var n=Math.floor(t),s=t-n,o=0<=n&&n<e.shape[0],i=0<=n+1&&n+1<e.shape[0];return(1-s)*(o?+e.get(n):0)+s*(i?+e.get(n+1):0)}function n(e,t,n){var s=Math.floor(t),i=t-s,a=0<=s&&s<e.shape[0],r=0<=s+1&&s+1<e.shape[0],o=Math.floor(n),c=n-o,l=0<=o&&o<e.shape[1],d=0<=o+1&&o+1<e.shape[1],u=a&&l?e.get(s,o):0,h=a&&d?e.get(s,o+1):0;return(1-c)*((1-i)*u+i*(r&&l?e.get(s+1,o):0))+c*((1-i)*h+i*(r&&d?e.get(s+1,o+1):0))}function s(e,t,n,s){var i=Math.floor(t),r=t-i,h=0<=i&&i<e.shape[0],m=0<=i+1&&i+1<e.shape[0],a=Math.floor(n),l=n-a,d=0<=a&&a<e.shape[1],u=0<=a+1&&a+1<e.shape[1],o=Math.floor(s),p=s-o,f=0<=o&&o<e.shape[2],c=0<=o+1&&o+1<e.shape[2],g=h&&d&&f?e.get(i,a,o):0,v=h&&u&&f?e.get(i,a+1,o):0,b=m&&d&&f?e.get(i+1,a,o):0,j=m&&u&&f?e.get(i+1,a+1,o):0,y=h&&d&&c?e.get(i,a,o+1):0,_=h&&u&&c?e.get(i,a+1,o+1):0;return(1-p)*((1-l)*((1-r)*g+r*b)+l*((1-r)*v+r*j))+p*((1-l)*((1-r)*y+r*(m&&d&&c?e.get(i+1,a,o+1):0))+l*((1-r)*_+r*(m&&u&&c?e.get(i+1,a+1,o+1):0)))}function o(e){var t,n,i,a,c,l,o=0|e.shape.length,s=new Array(o),r=new Array(o),d=new Array(o),u=new Array(o);for(t=0;t<o;++t)c=+arguments[t+1],s[t]=Math.floor(c),r[t]=c-s[t],d[t]=0<=s[t]&&s[t]<e.shape[t],u[t]=0<=s[t]+1&&s[t]+1<e.shape[t];l=0;t:for(t=0;t<1<<o;++t){for(i=1,a=e.offset,n=0;n<o;++n)if(t&1<<n){if(!u[n])continue t;i*=r[n],a+=e.stride[n]*(s[n]+1)}else{if(!d[n])continue t;i*=1-r[n],a+=e.stride[n]*s[n]}l+=i*e.data[a]}return l}e.exports=function(e,i,a,r){switch(e.shape.length){case 0:return 0;case 1:return t(e,i);case 2:return n(e,i,a);case 3:return s(e,i,a,r);default:return o.apply(void 0,arguments)}},e.exports.d1=t,e.exports.d2=n,e.exports.d3=s},5298:function(e,t){"use strict";var s,o={"float64,2,1,0":function(){return function(e,t,n,s,o){var m=e[0],d=e[1],u=e[2],h=n[0],c=n[1],l=n[2];s|=0;var i=0,a=0,r=0,f=l,p=c-u*l,g=h-d*c;for(r=0;r<m;++r){for(a=0;a<d;++a){for(i=0;i<u;++i)t[s]/=o,s+=f;s+=p}s+=g}}},"uint8,2,0,1,float64,2,1,0":function(){return function(e,t,n,s,o,i,a,r){for(var c,d=e[0],g=e[1],u=e[2],v=n[0],_=n[1],y=n[2],f=i[0],j=i[1],b=i[2],O=s|=0,w=a|=0,l=0|e[0];l>0;){l<64?(d=l,l=0):(d=64,l-=64);for(c=0|e[1];c>0;){c<64?(g=c,c=0):(g=64,c-=64),s=O+l*v+c*_,a=w+l*f+c*j;var p=0,m=0,h=0,x=y,C=v-u*y,E=_-d*v,k=b,A=f-u*b,S=j-d*f;for(h=0;h<g;++h){for(m=0;m<d;++m){for(p=0;p<u;++p)t[s]=o[a]*r,s+=x,a+=k;s+=C,a+=A}s+=E,a+=S}}}}},"float32,1,0,float32,1,0":function(){return function(e,t,n,s,o,i,a){var f=e[0],c=e[1],h=n[0],d=n[1],m=i[0],u=i[1];s|=0,a|=0;var r=0,l=0,p=d,g=h-c*d,v=u,b=m-c*u;for(l=0;l<f;++l){for(r=0;r<c;++r)t[s]=o[a],s+=p,a+=v;s+=g,a+=b}}},"float32,1,0,float32,0,1":function(){return function(e,t,n,s,o,i,a){for(var r,f=e[0],l=e[1],g=n[0],u=n[1],p=i[0],m=i[1],b=s|=0,v=a|=0,c=0|e[1];c>0;){c<64?(l=c,c=0):(l=64,c-=64);for(r=0|e[0];r>0;){r<64?(f=r,r=0):(f=64,r-=64),s=b+c*u+r*g,a=v+c*m+r*p;var h=0,d=0,j=u,y=g-l*u,_=m,w=p-l*m;for(d=0;d<f;++d){for(h=0;h<l;++h)t[s]=o[a],s+=j,a+=_;s+=y,a+=w}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(e,t,n,s,o,i,a){for(var r,c,u=e[0],b=e[1],d=e[2],h=n[0],y=n[1],j=n[2],m=i[0],_=i[1],p=i[2],O=s|=0,w=a|=0,l=0|e[2];l>0;){l<64?(d=l,l=0):(d=64,l-=64);for(c=0|e[0];c>0;){c<64?(u=c,c=0):(u=64,c-=64);for(r=0|e[1];r>0;){r<64?(b=r,r=0):(b=64,r-=64),s=O+l*j+c*h+r*y,a=w+l*p+c*m+r*_;var v=0,g=0,f=0,x=j,C=h-d*j,E=y-u*h,k=p,A=m-d*p,S=_-u*m;for(f=0;f<b;++f){for(g=0;g<u;++g){for(v=0;v<d;++v)t[s]=o[a],s+=x,a+=k;s+=C,a+=A}s+=E,a+=S}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(e,t,n,s,o,i,a){var u=e[0],g=e[1],l=e[2],h=n[0],v=n[1],f=n[2],m=i[0],b=i[1],p=i[2];s|=0,a|=0;var r=0,d=0,c=0,j=f,y=h-l*f,_=v-u*h,w=p,O=m-l*p,x=b-u*m;for(c=0;c<g;++c){for(d=0;d<u;++d){for(r=0;r<l;++r)t[s]=o[a],s+=j,a+=w;s+=y,a+=O}s+=_,a+=x}}}},i=function(e,t){var n=t.join(",");return(0,o[n])()},a={mul:function(e){var t={};return function(n,s,o){var a=n.dtype,h=n.order,r=s.dtype,c=s.order,l=o.dtype,d=o.order,u=[a,h.join(),r,c.join(),l,d.join()].join(),i=t[u];return i||(t[u]=i=e([a,h,r,c,l,d])),i(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset,o.data,o.stride,0|o.offset)}},muls:function(e){var t={};return function(n,s,o){var a=n.dtype,r=n.order,c=s.dtype,l=s.order,d=[a,r.join(),c,l.join()].join(),i=t[d];return i||(t[d]=i=e([a,r,c,l])),i(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset,o)}},mulseq:function(e){var t={};return function(n,s){var i=n.dtype,a=n.order,r=[i,a.join()].join(),o=t[r];return o||(t[r]=o=e([i,a])),o(n.shape.slice(0),n.data,n.stride,0|n.offset,s)}},div:function(e){var t={};return function(n,s,o){var a=n.dtype,h=n.order,r=s.dtype,c=s.order,l=o.dtype,d=o.order,u=[a,h.join(),r,c.join(),l,d.join()].join(),i=t[u];return i||(t[u]=i=e([a,h,r,c,l,d])),i(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset,o.data,o.stride,0|o.offset)}},divs:function(e){var t={};return function(n,s,o){var a=n.dtype,r=n.order,c=s.dtype,l=s.order,d=[a,r.join(),c,l.join()].join(),i=t[d];return i||(t[d]=i=e([a,r,c,l])),i(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset,o)}},divseq:function(e){var t={};return function(n,s){var i=n.dtype,a=n.order,r=[i,a.join()].join(),o=t[r];return o||(t[r]=o=e([i,a])),o(n.shape.slice(0),n.data,n.stride,0|n.offset,s)}},assign:function(e){var t={};return function(n,s){var i=n.dtype,a=n.order,r=s.dtype,c=s.order,l=[i,a.join(),r,c.join()].join(),o=t[l];return o||(t[l]=o=e([i,a,r,c])),o(n.shape.slice(0),n.data,n.stride,0|n.offset,s.data,s.stride,0|s.offset)}}};function n(e){return t={funcName:e.funcName},(0,a[t.funcName])(i.bind(void 0,t));var t}s={mul:"*",div:"/"},!function(){for(var e in s)t[e]=n({funcName:e}),t[e+"s"]=n({funcName:e+"s"}),t[e+"seq"]=n({funcName:e+"seq"})}(),t.assign=n({funcName:"assign"})},9994:function(e,t,n){"use strict";var s=n(9618),o=n(8277);e.exports=function(e,t){for(var i=[],n=e,a=1;Array.isArray(n);)i.push(n.length),a*=n.length,n=n[0];return 0===i.length?s():(t||(t=s(new Float64Array(a),i)),o(t,e),t)}},8277:function(e){"use strict";e.exports=function(e){var t={};return function(n,s){var i=n.dtype,a=n.order,r=[i,a.join()].join(),o=t[r];return o||(t[r]=o=e([i,a])),o(n.shape.slice(0),n.data,n.stride,0|n.offset,s)}}(function(){return function(e,t,n,s,o){var a,r,j=e[0],c=e[1],l=e[2],b=n[0],f=n[1],m=n[2],i=[0,0,0];s|=0;var h=0,u=0,d=0,p=m,g=f-l*m,v=b-c*f;for(d=0;d<j;++d){for(u=0;u<c;++u){for(h=0;h<l;++h){r=o;for(a=0;a<i.length-1;++a)r=r[i[a]];t[s]=r[i[i.length-1]],s+=p,++i[2]}s+=g,i[2]-=l,++i[1]}s+=v,i[1]-=c,++i[0]}}}.bind(void 0,{funcName:"convert"}))},7640:function(e,t,n){"use strict";s=n(1888);function o(e){return"uint32"===e?[s.mallocUint32,s.freeUint32]:null}var s,i={"uint32,1,0":function(e,t){return function(n,s,o,i,a,r,c,l,d,u,h){var m,f,p,g,v,j,y,_,w=n*a+i,b=e(l);for(v=n+1;v<=s;++v){for(j=v,g=w+=a,f=0,p=w,m=0;m<l;++m)b[f++]=o[p],p+=d;t:for(;j-- >n;){f=0,p=g-a;e:for(m=0;m<l;++m){if((y=o[p])<(_=b[f]))break t;if(y>_)break e;p+=u,f+=h}for(f=g,p=g-a,m=0;m<l;++m)o[f]=o[p],f+=d,p+=d;g-=a}for(f=g,p=0,m=0;m<l;++m)o[f]=b[p++],f+=d}t(b)}}},a={"uint32,1,0":function(e,t,n){return function s(o,i,a,r,c,l,d,u,h,m,f){var p,v,b,j,C,E,k,T,L,W,q,Y,G,X,Q,Z,J,oe,ne,ee,ie,te,I=(i-o+1)/6|0,V=o+I,$=i-I,B=o+i>>1,K=B-I,U=B+I,D=V,S=K,A=B,M=U,z=$,x=o+1,w=i-1,H=!0,R=0,P=0,O=0,se=u,F=t(se),N=t(se),_=c*D,y=c*S,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=D,D=S,S=E;break t}if(O<0)break t;g+=m}_=c*M,y=c*z,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=M,M=z,z=E;break t}if(O<0)break t;g+=m}_=c*D,y=c*A,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=D,D=A,A=E;break t}if(O<0)break t;g+=m}_=c*S,y=c*A,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=S,S=A,A=E;break t}if(O<0)break t;g+=m}_=c*D,y=c*M,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=D,D=M,M=E;break t}if(O<0)break t;g+=m}_=c*A,y=c*M,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=A,A=M,M=E;break t}if(O<0)break t;g+=m}_=c*S,y=c*z,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=S,S=z,z=E;break t}if(O<0)break t;g+=m}_=c*S,y=c*A,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=S,S=A,A=E;break t}if(O<0)break t;g+=m}_=c*M,y=c*z,g=r;t:for(p=0;p<u;++p){if(b=y+g,(O=a[v=_+g]-a[b])>0){E=M,M=z,z=E;break t}if(O<0)break t;g+=m}for(_=c*D,y=c*S,L=c*A,Q=c*M,X=c*z,Y=c*V,q=c*B,ie=c*$,j=0,g=r,p=0;p<u;++p)v=_+g,b=y+g,T=L+g,Z=Q+g,J=X+g,te=Y+g,W=q+g,G=ie+g,F[j]=a[b],N[j]=a[Z],H=H&&F[j]===N[j],oe=a[v],ne=a[T],ee=a[J],a[te]=oe,a[W]=ne,a[G]=ee,++j,g+=h;for(_=c*K,y=c*o,g=r,p=0;p<u;++p)b=y+g,a[v=_+g]=a[b],g+=h;for(_=c*U,y=c*i,g=r,p=0;p<u;++p)b=y+g,a[v=_+g]=a[b],g+=h;if(H){for(C=x;C<=w;++C){for(v=r+C*c,j=0,p=0;p<u&&0==(O=a[v]-F[j]);++p)j+=f,v+=m;if(0!==O)if(O<0){if(C!==x)for(_=c*C,y=c*x,g=r,p=0;p<u;++p)b=y+g,k=a[v=_+g],a[v]=a[b],a[b]=k,g+=h;++x}else for(;;){for(v=r+w*c,j=0,p=0;p<u&&0==(O=a[v]-F[j]);++p)j+=f,v+=m;if(!(O>0)){if(O<0){for(_=c*C,y=c*x,L=c*w,g=r,p=0;p<u;++p)b=y+g,T=L+g,k=a[v=_+g],a[v]=a[b],a[b]=a[T],a[T]=k,g+=h;++x,--w;break}for(_=c*C,y=c*w,g=r,p=0;p<u;++p)b=y+g,k=a[v=_+g],a[v]=a[b],a[b]=k,g+=h;--w;break}w--}}}else for(C=x;C<=w;++C){for(v=r+C*c,j=0,p=0;p<u&&0==(R=a[v]-F[j]);++p)j+=f,v+=m;if(R<0){if(C!==x)for(_=c*C,y=c*x,g=r,p=0;p<u;++p)b=y+g,k=a[v=_+g],a[v]=a[b],a[b]=k,g+=h;++x}else{for(v=r+C*c,j=0,p=0;p<u&&0==(P=a[v]-N[j]);++p)j+=f,v+=m;if(P>0)for(;;){for(v=r+w*c,j=0,p=0;p<u&&0==(O=a[v]-N[j]);++p)j+=f,v+=m;if(!(O>0)){for(v=r+w*c,j=0,p=0;p<u&&0==(O=a[v]-F[j]);++p)j+=f,v+=m;if(O<0){for(_=c*C,y=c*x,L=c*w,g=r,p=0;p<u;++p)b=y+g,T=L+g,k=a[v=_+g],a[v]=a[b],a[b]=a[T],a[T]=k,g+=h;++x,--w}else{for(_=c*C,y=c*w,g=r,p=0;p<u;++p)b=y+g,k=a[v=_+g],a[v]=a[b],a[b]=k,g+=h;--w}break}if(--w<C)break}}}for(_=c*o,y=c*(x-1),j=0,g=r,p=0;p<u;++p)b=y+g,a[v=_+g]=a[b],a[b]=F[j],++j,g+=h;for(_=c*i,y=c*(w+1),j=0,g=r,p=0;p<u;++p)b=y+g,a[v=_+g]=a[b],a[b]=N[j],++j,g+=h;if(x-2-o<=32?e(o,x-2,a,r,c,l,d,u,h,m,f):s(o,x-2,a,r,c,l,d,u,h,m,f),i-(w+2)<=32?e(w+2,i,a,r,c,l,d,u,h,m,f):s(w+2,i,a,r,c,l,d,u,h,m,f),H)return n(F),void n(N);if(x<V&&w>$){t:for(;;){for(v=r+x*c,j=0,g=r,p=0;p<u;++p){if(a[v]!==F[j])break t;++j,v+=h}++x}t:for(;;){for(v=r+w*c,j=0,g=r,p=0;p<u;++p){if(a[v]!==N[j])break t;++j,v+=h}--w}for(C=x;C<=w;++C){for(v=r+C*c,j=0,p=0;p<u&&0==(R=a[v]-F[j]);++p)j+=f,v+=m;if(0===R){if(C!==x)for(_=c*C,y=c*x,g=r,p=0;p<u;++p)b=y+g,k=a[v=_+g],a[v]=a[b],a[b]=k,g+=h;++x}else{for(v=r+C*c,j=0,p=0;p<u&&0==(P=a[v]-N[j]);++p)j+=f,v+=m;if(0===P)for(;;){for(v=r+w*c,j=0,p=0;p<u&&0==(O=a[v]-N[j]);++p)j+=f,v+=m;if(0!==O){for(v=r+w*c,j=0,p=0;p<u&&0==(O=a[v]-F[j]);++p)j+=f,v+=m;if(O<0){for(_=c*C,y=c*x,L=c*w,g=r,p=0;p<u;++p)b=y+g,T=L+g,k=a[v=_+g],a[v]=a[b],a[b]=a[T],a[T]=k,g+=h;++x,--w}else{for(_=c*C,y=c*w,g=r,p=0;p<u;++p)b=y+g,k=a[v=_+g],a[v]=a[b],a[b]=k,g+=h;--w}break}if(--w<C)break}}}}n(F),n(N),w-x<=32?e(x,w,a,r,c,l,d,u,h,m,f):s(x,w,a,r,c,l,d,u,h,m,f)}}},r={"uint32,1,0":function(e,t){return function(n){var l=n.data,i=0|n.offset,a=n.shape,r=n.stride,c=0|r[0],s=0|a[0],o=0|r[1],d=0|a[1],u=o,h=o;s<=32?e(0,s-1,l,i,c,o,s,d,u,h,1):t(0,s-1,l,i,c,o,s,d,u,h,1)}}};e.exports=function(e,t){var s=[t,e].join(","),c=r[s],n=function(e,t){var n=o(t),a=[t,e].join(","),s=i[a];return n?s(n[0],n[1]):s()}(e,t),l=function(e,t,n){var s=o(t),r=[t,e].join(","),i=a[r];return e.length>1&&s?i(n,s[0],s[1]):i(n)}(e,t,n);return c(n,l)}},446:function(e,t,n){"use strict";var o=n(7640),s={};e.exports=function(e){var n=e.order,i=e.dtype,a=[n,i].join(":"),t=s[a];return t||(s[a]=t=o(n,i)),t(e),e}},9618:function(e,t,n){var s,o,l=n(7163),i="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function r(){var e,n,s=this.stride,t=new Array(s.length);for(e=0;e<t.length;++e)t[e]=[Math.abs(s[e]),e];t.sort(a),n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=t[e][1];return n}o={T:function(e){function n(e){this.data=e}var t=n.prototype;return t.dtype=e,t.index=function(){return-1},t.size=0,t.dimension=-1,t.shape=t.stride=t.order=[],t.lo=t.hi=t.transpose=t.step=function(){return new n(this.data)},t.get=t.set=function(){},t.pick=function(){return null},function(e){return new n(e)}},0:function(e,t){function s(e,t){this.data=e,this.offset=t}var n=s.prototype;return n.dtype=e,n.index=function(){return this.offset},n.dimension=0,n.size=1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new s(this.data,this.offset)},n.pick=function(){return t(this.data)},n.valueOf=n.get=function(){return"generic"===e?this.data.get(this.offset):this.data[this.offset]},n.set=function(t){return"generic"===e?this.data.set(this.offset,t):this.data[this.offset]=t},function(e,t,n,o){return new s(e,o)}},1:function(e,t){function o(e,t,n,s){this.data=e,this.shape=[t],this.stride=[n],this.offset=0|s}var s=o.prototype;return s.dtype=e,s.dimension=1,Object.defineProperty(s,"size",{get:function(){return this.shape[0]}}),s.order=[0],s.set=function(t,n){return"generic"===e?this.data.set(this.offset+this.stride[0]*t,n):this.data[this.offset+this.stride[0]*t]=n},s.get=function(t){return"generic"===e?this.data.get(this.offset+this.stride[0]*t):this.data[this.offset+this.stride[0]*t]},s.index=function(e){return this.offset+this.stride[0]*e},s.hi=function(e){return new o(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,this.stride[0],this.offset)},s.lo=function(e){var t=this.offset,n=0,s=this.shape[0],i=this.stride[0];return"number"==typeof e&&e>=0&&(t+=i*(n=0|e),s-=n),new o(this.data,s,i,t)},s.step=function(e){var t=this.shape[0],s=this.stride[0],i=this.offset,n=0,a=Math.ceil;return"number"==typeof e&&((n=0|e)<0?(i+=s*(t-1),t=a(-t/n)):t=a(t/n),s*=n),new o(this.data,t,s,i)},s.transpose=function(e){e=void 0===e?0:0|e;var t=this.shape,n=this.stride;return new o(this.data,t[e],n[e],this.offset)},s.pick=function(e){var n=[],o=[],s=this.offset;return"number"==typeof e&&e>=0?s=s+this.stride[0]*e|0:(n.push(this.shape[0]),o.push(this.stride[0])),(0,t[n.length+1])(this.data,n,o,s)},function(e,t,n,s){return new o(e,t[0],n[0],s)}},2:function(e,t){function o(e,t,n,s,o,i){this.data=e,this.shape=[t,n],this.stride=[s,o],this.offset=0|i}var s=o.prototype;return s.dtype=e,s.dimension=2,Object.defineProperty(s,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(s,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),s.set=function(t,n,s){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n,s):this.data[this.offset+this.stride[0]*t+this.stride[1]*n]=s},s.get=function(t,n){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n):this.data[this.offset+this.stride[0]*t+this.stride[1]*n]},s.index=function(e,t){return this.offset+this.stride[0]*e+this.stride[1]*t},s.hi=function(e,t){return new o(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,this.stride[0],this.stride[1],this.offset)},s.lo=function(e,t){var s=this.offset,n=0,i=this.shape[0],a=this.shape[1],r=this.stride[0],c=this.stride[1];return"number"==typeof e&&e>=0&&(s+=r*(n=0|e),i-=n),"number"==typeof t&&t>=0&&(s+=c*(n=0|t),a-=n),new o(this.data,i,a,r,c,s)},s.step=function(e,t){var s=this.shape[0],i=this.shape[1],r=this.stride[0],c=this.stride[1],l=this.offset,n=0,a=Math.ceil;return"number"==typeof e&&((n=0|e)<0?(l+=r*(s-1),s=a(-s/n)):s=a(s/n),r*=n),"number"==typeof t&&((n=0|t)<0?(l+=c*(i-1),i=a(-i/n)):i=a(i/n),c*=n),new o(this.data,s,i,r,c,l)},s.transpose=function(e,t){e=void 0===e?0:0|e,t=void 0===t?1:0|t;var n=this.shape,s=this.stride;return new o(this.data,n[e],n[t],s[e],s[t],this.offset)},s.pick=function(e,n){var o=[],i=[],s=this.offset;return"number"==typeof e&&e>=0?s=s+this.stride[0]*e|0:(o.push(this.shape[0]),i.push(this.stride[0])),"number"==typeof n&&n>=0?s=s+this.stride[1]*n|0:(o.push(this.shape[1]),i.push(this.stride[1])),(0,t[o.length+1])(this.data,o,i,s)},function(e,t,n,s){return new o(e,t[0],t[1],n[0],n[1],s)}},3:function(e,t){function o(e,t,n,s,o,i,a,r){this.data=e,this.shape=[t,n,s],this.stride=[o,i,a],this.offset=0|r}var s=o.prototype;return s.dtype=e,s.dimension=3,Object.defineProperty(s,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(s,"order",{get:function(){var t=Math.abs(this.stride[0]),n=Math.abs(this.stride[1]),e=Math.abs(this.stride[2]);return t>n?n>e?[2,1,0]:t>e?[1,2,0]:[1,0,2]:t>e?[2,0,1]:e>n?[0,1,2]:[0,2,1]}}),s.set=function(t,n,s,o){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s,o):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s]=o},s.get=function(t,n,s){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s]},s.index=function(e,t,n){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n},s.hi=function(e,t,n){return new o(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,this.stride[0],this.stride[1],this.stride[2],this.offset)},s.lo=function(e,t,n){var i=this.offset,s=0,a=this.shape[0],r=this.shape[1],c=this.shape[2],l=this.stride[0],d=this.stride[1],u=this.stride[2];return"number"==typeof e&&e>=0&&(i+=l*(s=0|e),a-=s),"number"==typeof t&&t>=0&&(i+=d*(s=0|t),r-=s),"number"==typeof n&&n>=0&&(i+=u*(s=0|n),c-=s),new o(this.data,a,r,c,l,d,u,i)},s.step=function(e,t,n){var i=this.shape[0],r=this.shape[1],a=this.shape[2],d=this.stride[0],u=this.stride[1],h=this.stride[2],l=this.offset,s=0,c=Math.ceil;return"number"==typeof e&&((s=0|e)<0?(l+=d*(i-1),i=c(-i/s)):i=c(i/s),d*=s),"number"==typeof t&&((s=0|t)<0?(l+=u*(r-1),r=c(-r/s)):r=c(r/s),u*=s),"number"==typeof n&&((s=0|n)<0?(l+=h*(a-1),a=c(-a/s)):a=c(a/s),h*=s),new o(this.data,i,r,a,d,u,h,l)},s.transpose=function(e,t,n){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n;var s=this.shape,i=this.stride;return new o(this.data,s[e],s[t],s[n],i[e],i[t],i[n],this.offset)},s.pick=function(e,n,s){var i=[],a=[],o=this.offset;return"number"==typeof e&&e>=0?o=o+this.stride[0]*e|0:(i.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof n&&n>=0?o=o+this.stride[1]*n|0:(i.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof s&&s>=0?o=o+this.stride[2]*s|0:(i.push(this.shape[2]),a.push(this.stride[2])),(0,t[i.length+1])(this.data,i,a,o)},function(e,t,n,s){return new o(e,t[0],t[1],t[2],n[0],n[1],n[2],s)}},4:function(e,t,n){function o(e,t,n,s,o,i,a,r,c,l){this.data=e,this.shape=[t,n,s,o],this.stride=[i,a,r,c],this.offset=0|l}var s=o.prototype;return s.dtype=e,s.dimension=4,Object.defineProperty(s,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(s,"order",{get:n}),s.set=function(t,n,s,o,i){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o,i):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o]=i},s.get=function(t,n,s,o){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o]},s.index=function(e,t,n,s){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*s},s.hi=function(e,t,n,s){return new o(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof s||s<0?this.shape[3]:0|s,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},s.lo=function(e,t,n,s){var a=this.offset,i=0,r=this.shape[0],c=this.shape[1],l=this.shape[2],d=this.shape[3],u=this.stride[0],h=this.stride[1],m=this.stride[2],f=this.stride[3];return"number"==typeof e&&e>=0&&(a+=u*(i=0|e),r-=i),"number"==typeof t&&t>=0&&(a+=h*(i=0|t),c-=i),"number"==typeof n&&n>=0&&(a+=m*(i=0|n),l-=i),"number"==typeof s&&s>=0&&(a+=f*(i=0|s),d-=i),new o(this.data,r,c,l,d,u,h,m,f,a)},s.step=function(e,t,n,s){var r=this.shape[0],c=this.shape[1],l=this.shape[2],d=this.shape[3],p=this.stride[0],h=this.stride[1],m=this.stride[2],f=this.stride[3],u=this.offset,i=0,a=Math.ceil;return"number"==typeof e&&((i=0|e)<0?(u+=p*(r-1),r=a(-r/i)):r=a(r/i),p*=i),"number"==typeof t&&((i=0|t)<0?(u+=h*(c-1),c=a(-c/i)):c=a(c/i),h*=i),"number"==typeof n&&((i=0|n)<0?(u+=m*(l-1),l=a(-l/i)):l=a(l/i),m*=i),"number"==typeof s&&((i=0|s)<0?(u+=f*(d-1),d=a(-d/i)):d=a(d/i),f*=i),new o(this.data,r,c,l,d,p,h,m,f,u)},s.transpose=function(e,t,n,s){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n,s=void 0===s?3:0|s;var i=this.shape,a=this.stride;return new o(this.data,i[e],i[t],i[n],i[s],a[e],a[t],a[n],a[s],this.offset)},s.pick=function(e,n,s,o){var a=[],r=[],i=this.offset;return"number"==typeof e&&e>=0?i=i+this.stride[0]*e|0:(a.push(this.shape[0]),r.push(this.stride[0])),"number"==typeof n&&n>=0?i=i+this.stride[1]*n|0:(a.push(this.shape[1]),r.push(this.stride[1])),"number"==typeof s&&s>=0?i=i+this.stride[2]*s|0:(a.push(this.shape[2]),r.push(this.stride[2])),"number"==typeof o&&o>=0?i=i+this.stride[3]*o|0:(a.push(this.shape[3]),r.push(this.stride[3])),(0,t[a.length+1])(this.data,a,r,i)},function(e,t,n,s){return new o(e,t[0],t[1],t[2],t[3],n[0],n[1],n[2],n[3],s)}},5:function(e,t,n){function o(e,t,n,s,o,i,a,r,c,l,d,u){this.data=e,this.shape=[t,n,s,o,i],this.stride=[a,r,c,l,d],this.offset=0|u}var s=o.prototype;return s.dtype=e,s.dimension=5,Object.defineProperty(s,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(s,"order",{get:n}),s.set=function(t,n,s,o,i,a){return"generic"===e?this.data.set(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o+this.stride[4]*i,a):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o+this.stride[4]*i]=a},s.get=function(t,n,s,o,i){return"generic"===e?this.data.get(this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o+this.stride[4]*i):this.data[this.offset+this.stride[0]*t+this.stride[1]*n+this.stride[2]*s+this.stride[3]*o+this.stride[4]*i]},s.index=function(e,t,n,s,o){return this.offset+this.stride[0]*e+this.stride[1]*t+this.stride[2]*n+this.stride[3]*s+this.stride[4]*o},s.hi=function(e,t,n,s,i){return new o(this.data,"number"!=typeof e||e<0?this.shape[0]:0|e,"number"!=typeof t||t<0?this.shape[1]:0|t,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof s||s<0?this.shape[3]:0|s,"number"!=typeof i||i<0?this.shape[4]:0|i,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},s.lo=function(e,t,n,s,i){var r=this.offset,a=0,c=this.shape[0],l=this.shape[1],d=this.shape[2],u=this.shape[3],h=this.shape[4],m=this.stride[0],f=this.stride[1],p=this.stride[2],g=this.stride[3],v=this.stride[4];return"number"==typeof e&&e>=0&&(r+=m*(a=0|e),c-=a),"number"==typeof t&&t>=0&&(r+=f*(a=0|t),l-=a),"number"==typeof n&&n>=0&&(r+=p*(a=0|n),d-=a),"number"==typeof s&&s>=0&&(r+=g*(a=0|s),u-=a),"number"==typeof i&&i>=0&&(r+=v*(a=0|i),h-=a),new o(this.data,c,l,d,u,h,m,f,p,g,v,r)},s.step=function(e,t,n,s,i){var m=this.shape[0],c=this.shape[1],l=this.shape[2],d=this.shape[3],u=this.shape[4],v=this.stride[0],b=this.stride[1],g=this.stride[2],f=this.stride[3],p=this.stride[4],h=this.offset,a=0,r=Math.ceil;return"number"==typeof e&&((a=0|e)<0?(h+=v*(m-1),m=r(-m/a)):m=r(m/a),v*=a),"number"==typeof t&&((a=0|t)<0?(h+=b*(c-1),c=r(-c/a)):c=r(c/a),b*=a),"number"==typeof n&&((a=0|n)<0?(h+=g*(l-1),l=r(-l/a)):l=r(l/a),g*=a),"number"==typeof s&&((a=0|s)<0?(h+=f*(d-1),d=r(-d/a)):d=r(d/a),f*=a),"number"==typeof i&&((a=0|i)<0?(h+=p*(u-1),u=r(-u/a)):u=r(u/a),p*=a),new o(this.data,m,c,l,d,u,v,b,g,f,p,h)},s.transpose=function(e,t,n,s,i){e=void 0===e?0:0|e,t=void 0===t?1:0|t,n=void 0===n?2:0|n,s=void 0===s?3:0|s,i=void 0===i?4:0|i;var a=this.shape,r=this.stride;return new o(this.data,a[e],a[t],a[n],a[s],a[i],r[e],r[t],r[n],r[s],r[i],this.offset)},s.pick=function(e,n,s,o,i){var r=[],c=[],a=this.offset;return"number"==typeof e&&e>=0?a=a+this.stride[0]*e|0:(r.push(this.shape[0]),c.push(this.stride[0])),"number"==typeof n&&n>=0?a=a+this.stride[1]*n|0:(r.push(this.shape[1]),c.push(this.stride[1])),"number"==typeof s&&s>=0?a=a+this.stride[2]*s|0:(r.push(this.shape[2]),c.push(this.stride[2])),"number"==typeof o&&o>=0?a=a+this.stride[3]*o|0:(r.push(this.shape[3]),c.push(this.stride[3])),"number"==typeof i&&i>=0?a=a+this.stride[4]*i|0:(r.push(this.shape[4]),c.push(this.stride[4])),(0,t[r.length+1])(this.data,r,c,a)},function(e,t,n,s){return new o(e,t[0],t[1],t[2],t[3],t[4],n[0],n[1],n[2],n[3],n[4],s)}}};function c(e,t){var i=-1===t?"T":String(t),n=o[i];return-1===t?n(e):0===t?n(e,s[e][0]):n(e,s[e],r)}s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]},e.exports=function(e,t,n,o){if(void 0===e)return(0,s.array[0])([]);if("number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]),r=t.length,void 0===n){n=new Array(r);for(var r,d,u,a=r-1,h=1;a>=0;--a)n[a]=h,h*=t[a]}if(void 0===o)for(o=0,a=0;a<r;++a)n[a]<0&&(o-=(t[a]-1)*n[a]);for(u=function(e){if(l(e))return"buffer";if(i)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),d=s[u];d.length<=r+1;)d.push(c(u,d.length-1));return(0,d[r+1])(e,t,n,o)}},1278:function(e,t,n){"use strict";var s=n(2361),o=Math.pow(2,-1074),i=-1>>>0;e.exports=function(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-o:o;var a=s.hi(e),n=s.lo(e);return t>e==e>0?n===i?(a+=1,n=0):n+=1:0===n?(n=i,a-=1):n-=1,s.pack(n,a)}},8406:function(e,t){t.vertexNormals=function(e,t,n){for(var j=t.length,l=new Array(j),w=void 0===n?1e-6:n,o=0;o<j;++o)l[o]=[0,0,0];for(o=0;o<e.length;++o)for(var a=e[o],_=0,d=a[a.length-1],f=a[0],m=0;m<a.length;++m){_=d,d=f,f=a[(m+1)%a.length];for(var i,u,h,p,v,O=t[_],y=t[d],x=t[f],r=new Array(3),g=0,c=new Array(3),b=0,s=0;s<3;++s)r[s]=O[s]-y[s],g+=r[s]*r[s],c[s]=x[s]-y[s],b+=c[s]*c[s];if(g*b>w){i=l[d],h=1/Math.sqrt(g*b);for(s=0;s<3;++s)p=(s+1)%3,v=(s+2)%3,i[s]+=h*(c[p]*r[v]-c[v]*r[p])}}for(o=0;o<j;++o){i=l[o],u=0;for(s=0;s<3;++s)u+=i[s]*i[s];if(u>w)for(h=1/Math.sqrt(u),s=0;s<3;++s)i[s]*=h;else for(s=0;s<3;++s)i[s]=0}return l},t.faceNormals=function(e,t,n){for(var o,i,r,l,d,u,m=e.length,h=new Array(m),p=void 0===n?1e-6:n,c=0;c<m;++c){for(var f=e[c],a=new Array(3),s=0;s<3;++s)a[s]=t[f[s]];l=new Array(3),r=new Array(3);for(s=0;s<3;++s)l[s]=a[1][s]-a[0][s],r[s]=a[2][s]-a[0][s];i=new Array(3),o=0;for(s=0;s<3;++s)u=(s+1)%3,d=(s+2)%3,i[s]=l[u]*r[d]-l[d]*r[u],o+=i[s]*i[s];for(o=o>p?1/Math.sqrt(o):0,s=0;s<3;++s)i[s]*=o;h[c]=i}return h}},4081:function(e){"use strict";e.exports=function(e,t,n,s,o,i,a,r,c,l){var d,u,h=t+i+l;return d>0?(d=Math.sqrt(h+1),e[0]=.5*(a-c)/d,e[1]=.5*(r-s)/d,e[2]=.5*(n-i)/d,e[3]=.5*d):(u=Math.max(t,i,l),d=Math.sqrt(2*u-h+1),t>=u?(e[0]=.5*d,e[1]=.5*(o+n)/d,e[2]=.5*(r+s)/d,e[3]=.5*(a-c)/d):i>=u?(e[0]=.5*(n+o)/d,e[1]=.5*d,e[2]=.5*(c+a)/d,e[3]=.5*(r-s)/d):(e[0]=.5*(s+r)/d,e[1]=.5*(a+c)/d,e[2]=.5*d,e[3]=.5*(n-o)/d)),e}},9977:function(e,t,n){"use strict";e.exports=function(e){var n,s=(e=e||{}).center||[0,0,0],t=e.rotation||[0,0,0,1],i=e.radius||1,s=[].slice.call(s,0,3);return o(t=[].slice.call(t,0,4),t),n=new c(t,s,Math.log(i)),n.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&n.lookAt(0,e.eye,e.center,e.up),n};var s,a=n(9215),d=n(6582),u=n(7399),h=n(7608),l=n(4081);function i(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function r(e,t,n,s){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(s,2))}function o(e,t){var s=t[0],o=t[1],i=t[2],a=t[3],n=r(s,o,i,a);n>1e-6?(e[0]=s/n,e[1]=o/n,e[2]=i/n,e[3]=a/n):(e[0]=e[1]=e[2]=0,e[3]=1)}function c(e,t,n){this.radius=a([n]),this.center=a(t),this.rotation=a(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}s=c.prototype,s.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},s.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e),a=this.computedRotation,o(a,a),t=this.computedMatrix,u(t,a);var t,n,s,a,l,d=this.computedCenter,i=this.computedEye,r=this.computedUp,c=Math.exp(this.computedRadius[0]);i[0]=d[0]+c*t[2],i[1]=d[1]+c*t[6],i[2]=d[2]+c*t[10],r[0]=t[1],r[1]=t[5],r[2]=t[9];for(n=0;n<3;++n){for(l=0,s=0;s<3;++s)l+=t[n+4*s]*i[s];t[12+n]=-l}},s.getMatrix=function(e,t){this.recalcMatrix(e);var n,s=this.computedMatrix;if(t){for(n=0;n<16;++n)t[n]=s[n];return t}return s},s.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},s.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},s.pan=function(e,t,n,s){t=t||0,n=n||0,s=s||0,this.recalcMatrix(e);var o=this.computedMatrix,a=o[1],r=o[5],c=o[9],b=i(a,r,c);a/=b,r/=b,c/=b;var l=o[0],d=o[4],u=o[8],v=l*a+d*r+u*c,g=i(l-=a*v,d-=r*v,u-=c*v);l/=g,d/=g,u/=g;var p,f=o[2],m=o[6],h=o[10],_=f*a+m*r+h*c,j=f*l+m*d+h*u,y=i(f-=_*a+j*l,m-=_*r+j*d,h-=_*c+j*u);f/=y,m/=y,h/=y;var w=l*t+a*n,O=d*t+r*n,x=u*t+c*n;this.center.move(e,w,O,x),p=Math.exp(this.computedRadius[0]),p=Math.max(1e-4,p+s),this.radius.set(e,Math.log(p))},s.rotate=function(e,t,n,s){this.recalcMatrix(e),t=t||0,n=n||0;var p,j,u=this.computedMatrix,T=u[0],S=u[4],M=u[8],F=u[1],z=u[5],D=u[9],x=u[2],C=u[6],O=u[10],E=t*T+n*F,A=t*S+n*z,k=t*M+n*D,o=-(C*k-O*A),c=-(O*E-x*k),a=-(x*A-C*E),l=Math.sqrt(Math.max(0,1-Math.pow(o,2)-Math.pow(c,2)-Math.pow(a,2))),g=r(o,c,a,l);g>1e-6?(o/=g,c/=g,a/=g,l/=g):(o=c=a=0,l=1);var b=this.computedRotation,w=b[0],y=b[1],_=b[2],v=b[3],f=w*l+v*o+y*a-_*c,m=y*l+v*c+_*o-w*a,h=_*l+v*a+w*c-y*o,d=v*l-w*o-y*c-_*a;s&&(o=x,c=C,a=O,j=Math.sin(s)/i(o,c,a),o*=j,c*=j,a*=j,d=d*(l=Math.cos(t))-(f=f*l+d*o+m*a-h*c)*o-(m=m*l+d*c+h*o-f*a)*c-(h=h*l+d*a+f*c-m*o)*a),p=r(f,m,h,d),p>1e-6?(f/=p,m/=p,h/=p,d/=p):(f=m=h=0,d=1),this.rotation.set(e,f,m,h,d)},s.lookAt=function(e,t,n,s){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,s=s||this.computedUp,i=this.computedMatrix,d(i,t,n,s),a=this.computedRotation,l(a,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),o(a,a),this.rotation.set(e,a[0],a[1],a[2],a[3]);for(var i,a,c=0,r=0;r<3;++r)c+=Math.pow(n[r]-t[r],2);this.radius.set(e,.5*Math.log(Math.max(c,1e-6))),this.center.set(e,n[0],n[1],n[2])},s.translate=function(e,t,n,s){this.center.move(e,t||0,n||0,s||0)},s.setMatrix=function(e,t){if(s=this.computedRotation,l(s,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),o(s,s),this.rotation.set(e,s[0],s[1],s[2],s[3]),n=this.computedMatrix,h(n,t),i=n[15],Math.abs(i)>1e-6){var n,s,i,a,r=n[12]/i,c=n[13]/i,d=n[14]/i;this.recalcMatrix(e),a=Math.exp(this.computedRadius[0]),this.center.set(e,r-n[2]*a,c-n[6]*a,d-n[10]*a),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},s.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},s.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},s.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},s.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},s.fromJSON=function(e){var t,s,o=this.lastT(),n=e.center;n&&this.center.set(o,n[0],n[1],n[2]),t=e.rotation,t&&this.rotation.set(o,t[0],t[1],t[2],t[3]),s=e.distance,s&&s>0&&this.radius.set(o,Math.log(s)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},1371:function(e,t,n){"use strict";var s=n(3233);e.exports=function(e,t,n){return s(n=void 0!==n?n+"":" ",t)+e}},3202:function(e){e.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-+]*\s*(.*)/)[1]||"",t}},3088:function(e,t,n){"use strict";e.exports=function(e,t){for(var i,a,r,c,d,l=0|t.length,p=e.length,o=[new Array(l),new Array(l)],n=0;n<l;++n)o[0][n]=[],o[1][n]=[];for(n=0;n<p;++n)r=e[n],o[0][r[0]].push(r),o[1][r[1]].push(r);c=[];for(n=0;n<l;++n)o[0][n].length+o[1][n].length===0&&c.push([n]);function h(e,t){var n=o[t][e[t]];n.splice(n.indexOf(e),1)}function u(e,n,i){for(a=0;a<2;++a)if(o[a][n].length>0){c=o[a][n][0],d=a;break}l=c[1^d];for(r=0;r<2;++r)for(var a,r,c,l,d,m,f,p=o[r][n],u=0;u<p.length;++u)m=p[u],f=m[1^r],s(t[e],t[n],t[l],t[f])>0&&(c=m,l=f,d=r);return i||c&&h(c,d),l}function m(e,n){r=o[n][e][0],i=[e],h(r,n);for(a=r[1^n];;){for(;a!==e;)i.push(a),a=u(i[i.length-2],a,!1);if(o[0][e].length+o[1][e].length===0)break;var i,a,r,c=i[i.length-1],l=e,d=i[1],m=u(c,l,!0);if(s(t[c],t[l],t[d],t[m])<0)break;i.push(e),a=u(c,l)}return i}function f(e,t){return t[1]===t[t.length-1]}for(n=0;n<l;++n)for(a=0;a<2;++a){for(i=[];o[a][n].length>0;)o[0][n].length,d=m(n,a),f(0,d)?i.push.apply(i,d):(i.length>0&&c.push(i),i=d);i.length>0&&c.push(i)}return c};var s=n(3140)},5609:function(e,t,n){"use strict";e.exports=function(e,t){for(var o,a,r,l,d,u,h,m,p=s(e,t.length),i=new Array(t.length),f=new Array(t.length),c=[],n=0;n<t.length;++n)h=p[n].length,f[n]=h,i[n]=!0,h<=1&&c.push(n);for(;c.length>0;){i[r=c.pop()]=!1,d=p[r];for(n=0;n<d.length;++n)u=d[n],0==--f[u]&&c.push(u)}o=new Array(t.length),l=[];for(n=0;n<t.length;++n)i[n]?(r=l.length,o[n]=r,l.push(t[n])):o[n]=-1;m=[];for(n=0;n<e.length;++n)a=e[n],i[a[0]]&&i[a[1]]&&m.push([o[a[0]],o[a[1]]]);return[m,l]};var s=n(3134)},2095:function(e,t,n){"use strict";e.exports=function(e,t){p=l(e,t),e=p[0];for(var R=(t=p[1]).length,$=(e.length,a(e,t.length)),n=0;n<R;++n)if($[n].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var u,m,p,g,v,y,_,w,O,x,C,E,k,A,S,M,L,H,I,B,f=d(e,t),h=(f=f.filter(function(e){for(var c=e.length,n=[0],i=0;i<c;++i)var a=t[e[i]],r=t[e[(i+1)%c]],l=s(-a[0],a[1]),d=s(-a[0],r[1]),u=s(r[0],a[1]),h=s(r[0],r[1]),n=o(n,o(o(l,d),o(u,h)));return n[n.length-1]>0})).length,j=new Array(h),T=new Array(h);for(n=0;n<h;++n){j[n]=n;var b=new Array(h),W=f[n].map(function(e){return t[e]}),V=r([W]),F=0;t:for(u=0;u<h;++u)if(b[u]=0,n!==u){for(w=(m=f[u]).length,k=0;k<w;++k)if(S=V(t[m[k]]),0!==S){S<0&&(b[u]=1,F+=1);continue t}b[u]=1,F+=1}T[n]=[F,n,b]}for(T.sort(function(e,t){return t[0]-e[0]}),n=0;n<h;++n){H=(b=T[n])[1],B=b[2];for(u=0;u<h;++u)B[u]&&(j[u]=H)}g=function(e){for(var n=new Array(e),t=0;t<e;++t)n[t]=[];return n}(h);for(n=0;n<h;++n)g[n].push(j[n]),g[j[n]].push(n);E={},x=i(R,!1);for(n=0;n<h;++n)for(w=(m=f[n]).length,u=0;u<w;++u){var z=m[u],D=m[(u+1)%w],N=Math.min(z,D)+":"+Math.max(z,D);N in E?(L=E[N],g[L].push(n),g[n].push(L),x[z]=x[D]=!0):E[N]=n}function P(e){for(var n=e.length,t=0;t<n;++t)if(!x[e[t]])return!1;return!0}y=[],v=i(h,-1);for(n=0;n<h;++n)j[n]!==n||P(f[n])?v[n]=-1:(y.push(n),v[n]=0);for(p=[];y.length>0;){A=y.pop(),C=g[A],c(C,function(e,t){return e-t}),I=C.length,_=v[A];for(0===_&&(M=[m=f[A]]),n=0;n<I;++n)O=C[n],v[O]>=0||(v[O]=1^_,y.push(O),0===_&&(P(m=f[O])||(m.reverse(),M.push(m))));0===_&&p.push(M)}return p};var a=n(3134),d=n(3088),r=n(5085),s=n(5250),o=n(8210),c=n(1682),l=n(5609);function i(e,t){for(var s=new Array(e),n=0;n<e;++n)s[n]=t;return s}},5085:function(e,t,n){e.exports=function(e){for(var n,a,h,m,g,b=e.length,c=[],t=[],d=0;d<b;++d)for(var u=e[d],v=u.length,p=v-1,f=0;f<v;p=f++)a=u[p],n=u[f],a[0]===n[0]?t.push([a,n]):c.push([a,n]);return 0===c.length?0===t.length?l:(g=s(t),function(e){return g(e[0],e[1])?0:1}):(h=i(c),m=function(e,t){return function(n){if(i=r.le(t,n[0]),i<0)return 1;if(s=e[i],!s){if(!(i>0&&t[i]===n[0]))return 1;s=e[i-1]}for(a=1;s;){var s,i,a,c=s.key,l=o(n,c[0],c[1]);if(c[0][0]<c[1][0])if(l<0)s=s.left;else{if(!(l>0))return 0;a=-1,s=s.right}else if(l>0)s=s.left;else{if(!(l<0))return 0;a=1,s=s.right}}return a}}(h.slabs,h.coordinates),0===t.length?m:function(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}(s(t),m))};var o=n(3250)[3],i=n(4209),a=n(3352),r=n(2478);function c(){return!0}function s(e){for(n={},t=0;t<e.length;++t){var t,n,s,i,h,r=e[t],o=r[0][0],l=r[0][1],d=r[1][1],u=[Math.min(l,d),Math.max(l,d)];o in n?n[o].push(u):n[o]=[u]}i={},s=Object.keys(n);for(t=0;t<s.length;++t)h=n[s[t]],i[s[t]]=a(h);return function(e){return function(t,n){var s=e[t];return!!s&&!!s.queryPoint(n,c)}}(i)}function l(){return 1}},9346:function(e){"use strict";var t=new Float64Array(4),n=new Float64Array(4),s=new Float64Array(4);e.exports=function(e,o,i,a,r){t.length<a.length&&(t=new Float64Array(a.length),n=new Float64Array(a.length),s=new Float64Array(a.length));for(u=0;u<a.length;++u)t[u]=e[u]-a[u],n[u]=o[u]-e[u],s[u]=i[u]-e[u];var u,C,k,p=0,g=0,v=0,d=0,f=0,m=0;for(u=0;u<a.length;++u){var x=n[u],O=s[u],w=t[u];p+=x*x,g+=x*O,v+=O*O,d+=w*x,f+=w*O,m+=w*w}var h,b,j,y,_,E=Math.abs(p*v-g*g),c=g*f-v*d,l=g*d-p*f;c+l<=E?c<0?l<0&&d<0?(l=0,-d>=p?(c=1,h=p+2*d+m):h=d*(c=-d/p)+m):(c=0,f>=0?(l=0,h=m):-f>=v?(l=1,h=v+2*f+m):h=f*(l=-f/v)+m):l<0?(l=0,d>=0?(c=0,h=m):-d>=p?(c=1,h=p+2*d+m):h=d*(c=-d/p)+m):(C=1/E,h=(c*=C)*(p*c+g*(l*=C)+2*d)+l*(g*c+v*l+2*f)+m):c<0?(y=v+f)>(_=g+d)?(b=y-_)>=(j=p-2*g+v)?(c=1,l=0,h=p+2*d+m):h=(c=b/j)*(p*c+g*(l=1-c)+2*d)+l*(g*c+v*l+2*f)+m:(c=0,y<=0?(l=1,h=v+2*f+m):f>=0?(l=0,h=m):h=f*(l=-f/v)+m):l<0?(y=p+d)>(_=g+f)?(b=y-_)>=(j=p-2*g+v)?(l=1,c=0,h=v+2*f+m):h=(c=1-(l=b/j))*(p*c+g*l+2*d)+l*(g*c+v*l+2*f)+m:(l=0,y<=0?(c=1,h=p+2*d+m):d>=0?(c=0,h=m):h=d*(c=-d/p)+m):(b=v+f-g-d)<=0?(c=0,l=1,h=v+2*f+m):b>=(j=p-2*g+v)?(c=1,l=0,h=p+2*d+m):h=(c=b/j)*(p*c+g*(l=1-c)+2*d)+l*(g*c+v*l+2*f)+m,k=1-c-l;for(u=0;u<a.length;++u)r[u]=k*e[u]+c*o[u]+l*i[u];return h<0?0:h}},8648:function(e,t,n){e.exports=n(783)},2653:function(e,t,n){"use strict";var s=n(3865);e.exports=function(e,t){for(var o=e.length,i=new Array(o),n=0;n<o;++n)i[n]=s(e[n],t[n]);return i}},5838:function(e,t,n){"use strict";e.exports=function(e){for(var n=new Array(e.length),t=0;t<e.length;++t)n[t]=s(e[t]);return n};var s=n(7842)},8987:function(e,t,n){"use strict";var s=n(7842),o=n(6504);e.exports=function(e,t){for(var r=s(t),i=e.length,a=new Array(i),n=0;n<i;++n)a[n]=o(e[n],r);return a}},544:function(e,t,n){"use strict";var s=n(5572);e.exports=function(e,t){for(var o=e.length,i=new Array(o),n=0;n<o;++n)i[n]=s(e[n],t[n]);return i}},5771:function(e,t,n){"use strict";var o=n(8507),i=n(3788),s=n(2419);e.exports=function(e){e.sort(i);for(var n,r,c,l=e.length,t=0,a=0;a<l;++a)if(n=e[a],r=s(n),0!==r){if(t>0&&(c=e[t-1],0===o(n,c)&&s(c)!==r)){t-=1;continue}e[t++]=n}return e.length=t,e}},3233:function(e){"use strict";var n,t="";e.exports=function(e,s){if("string"!=typeof e)throw new TypeError("expected a string");if(1===s)return e;if(2===s)return e+e;var o=e.length*s;if(n!==e||void 0===n)n=e,t="";else if(t.length>=o)return t.substr(0,o);for(;o>t.length&&s>1;)1&s&&(t+=e),s>>=1,e+=e;return t=(t+=e).substr(0,o)}},3025:function(e,t,n){e.exports=n.g.performance&&n.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(e){"use strict";e.exports=function(e){for(var s,o,i,a,r=e.length,t=e[e.length-1],c=r,n=r-2;n>=0;--n)s=t,(a=(o=e[n])-((t=s+o)-s))&&(e[--c]=t,t=a);i=0;for(n=c;n<r;++n)(a=(o=t)-((t=(s=e[n])+o)-s))&&(e[i++]=a);return e[i++]=t,e.length=i,e}},2962:function(e,t,n){"use strict";var s,i=n(5250),a=n(8210),u=n(3012),h=n(7004);function r(e,t,n,s){return function(t){return s(e(n(t[0][0],t[1][1]),n(-t[0][1],t[1][0])))}}function c(e,t,n,s){return function(o){return s(e(t(e(n(o[1][1],o[2][2]),n(-o[1][2],o[2][1])),o[0][0]),e(t(e(n(o[1][0],o[2][2]),n(-o[1][2],o[2][0])),-o[0][1]),t(e(n(o[1][0],o[2][1]),n(-o[1][1],o[2][0])),o[0][2]))))}}function l(e,t,n,s){return function(o){return s(e(e(t(e(t(e(n(o[2][2],o[3][3]),n(-o[2][3],o[3][2])),o[1][1]),e(t(e(n(o[2][1],o[3][3]),n(-o[2][3],o[3][1])),-o[1][2]),t(e(n(o[2][1],o[3][2]),n(-o[2][2],o[3][1])),o[1][3]))),o[0][0]),t(e(t(e(n(o[2][2],o[3][3]),n(-o[2][3],o[3][2])),o[1][0]),e(t(e(n(o[2][0],o[3][3]),n(-o[2][3],o[3][0])),-o[1][2]),t(e(n(o[2][0],o[3][2]),n(-o[2][2],o[3][0])),o[1][3]))),-o[0][1])),e(t(e(t(e(n(o[2][1],o[3][3]),n(-o[2][3],o[3][1])),o[1][0]),e(t(e(n(o[2][0],o[3][3]),n(-o[2][3],o[3][0])),-o[1][1]),t(e(n(o[2][0],o[3][1]),n(-o[2][1],o[3][0])),o[1][3]))),o[0][2]),t(e(t(e(n(o[2][1],o[3][2]),n(-o[2][2],o[3][1])),o[1][0]),e(t(e(n(o[2][0],o[3][2]),n(-o[2][2],o[3][0])),-o[1][1]),t(e(n(o[2][0],o[3][1]),n(-o[2][1],o[3][0])),o[1][2]))),-o[0][3]))))}}function d(e,t,n,s){return function(o){return s(e(e(t(e(e(t(e(t(e(n(o[3][3],o[4][4]),n(-o[3][4],o[4][3])),o[2][2]),e(t(e(n(o[3][2],o[4][4]),n(-o[3][4],o[4][2])),-o[2][3]),t(e(n(o[3][2],o[4][3]),n(-o[3][3],o[4][2])),o[2][4]))),o[1][1]),t(e(t(e(n(o[3][3],o[4][4]),n(-o[3][4],o[4][3])),o[2][1]),e(t(e(n(o[3][1],o[4][4]),n(-o[3][4],o[4][1])),-o[2][3]),t(e(n(o[3][1],o[4][3]),n(-o[3][3],o[4][1])),o[2][4]))),-o[1][2])),e(t(e(t(e(n(o[3][2],o[4][4]),n(-o[3][4],o[4][2])),o[2][1]),e(t(e(n(o[3][1],o[4][4]),n(-o[3][4],o[4][1])),-o[2][2]),t(e(n(o[3][1],o[4][2]),n(-o[3][2],o[4][1])),o[2][4]))),o[1][3]),t(e(t(e(n(o[3][2],o[4][3]),n(-o[3][3],o[4][2])),o[2][1]),e(t(e(n(o[3][1],o[4][3]),n(-o[3][3],o[4][1])),-o[2][2]),t(e(n(o[3][1],o[4][2]),n(-o[3][2],o[4][1])),o[2][3]))),-o[1][4]))),o[0][0]),t(e(e(t(e(t(e(n(o[3][3],o[4][4]),n(-o[3][4],o[4][3])),o[2][2]),e(t(e(n(o[3][2],o[4][4]),n(-o[3][4],o[4][2])),-o[2][3]),t(e(n(o[3][2],o[4][3]),n(-o[3][3],o[4][2])),o[2][4]))),o[1][0]),t(e(t(e(n(o[3][3],o[4][4]),n(-o[3][4],o[4][3])),o[2][0]),e(t(e(n(o[3][0],o[4][4]),n(-o[3][4],o[4][0])),-o[2][3]),t(e(n(o[3][0],o[4][3]),n(-o[3][3],o[4][0])),o[2][4]))),-o[1][2])),e(t(e(t(e(n(o[3][2],o[4][4]),n(-o[3][4],o[4][2])),o[2][0]),e(t(e(n(o[3][0],o[4][4]),n(-o[3][4],o[4][0])),-o[2][2]),t(e(n(o[3][0],o[4][2]),n(-o[3][2],o[4][0])),o[2][4]))),o[1][3]),t(e(t(e(n(o[3][2],o[4][3]),n(-o[3][3],o[4][2])),o[2][0]),e(t(e(n(o[3][0],o[4][3]),n(-o[3][3],o[4][0])),-o[2][2]),t(e(n(o[3][0],o[4][2]),n(-o[3][2],o[4][0])),o[2][3]))),-o[1][4]))),-o[0][1])),e(t(e(e(t(e(t(e(n(o[3][3],o[4][4]),n(-o[3][4],o[4][3])),o[2][1]),e(t(e(n(o[3][1],o[4][4]),n(-o[3][4],o[4][1])),-o[2][3]),t(e(n(o[3][1],o[4][3]),n(-o[3][3],o[4][1])),o[2][4]))),o[1][0]),t(e(t(e(n(o[3][3],o[4][4]),n(-o[3][4],o[4][3])),o[2][0]),e(t(e(n(o[3][0],o[4][4]),n(-o[3][4],o[4][0])),-o[2][3]),t(e(n(o[3][0],o[4][3]),n(-o[3][3],o[4][0])),o[2][4]))),-o[1][1])),e(t(e(t(e(n(o[3][1],o[4][4]),n(-o[3][4],o[4][1])),o[2][0]),e(t(e(n(o[3][0],o[4][4]),n(-o[3][4],o[4][0])),-o[2][1]),t(e(n(o[3][0],o[4][1]),n(-o[3][1],o[4][0])),o[2][4]))),o[1][3]),t(e(t(e(n(o[3][1],o[4][3]),n(-o[3][3],o[4][1])),o[2][0]),e(t(e(n(o[3][0],o[4][3]),n(-o[3][3],o[4][0])),-o[2][1]),t(e(n(o[3][0],o[4][1]),n(-o[3][1],o[4][0])),o[2][3]))),-o[1][4]))),o[0][2]),e(t(e(e(t(e(t(e(n(o[3][2],o[4][4]),n(-o[3][4],o[4][2])),o[2][1]),e(t(e(n(o[3][1],o[4][4]),n(-o[3][4],o[4][1])),-o[2][2]),t(e(n(o[3][1],o[4][2]),n(-o[3][2],o[4][1])),o[2][4]))),o[1][0]),t(e(t(e(n(o[3][2],o[4][4]),n(-o[3][4],o[4][2])),o[2][0]),e(t(e(n(o[3][0],o[4][4]),n(-o[3][4],o[4][0])),-o[2][2]),t(e(n(o[3][0],o[4][2]),n(-o[3][2],o[4][0])),o[2][4]))),-o[1][1])),e(t(e(t(e(n(o[3][1],o[4][4]),n(-o[3][4],o[4][1])),o[2][0]),e(t(e(n(o[3][0],o[4][4]),n(-o[3][4],o[4][0])),-o[2][1]),t(e(n(o[3][0],o[4][1]),n(-o[3][1],o[4][0])),o[2][4]))),o[1][2]),t(e(t(e(n(o[3][1],o[4][2]),n(-o[3][2],o[4][1])),o[2][0]),e(t(e(n(o[3][0],o[4][2]),n(-o[3][2],o[4][0])),-o[2][1]),t(e(n(o[3][0],o[4][1]),n(-o[3][1],o[4][0])),o[2][2]))),-o[1][4]))),-o[0][3]),t(e(e(t(e(t(e(n(o[3][2],o[4][3]),n(-o[3][3],o[4][2])),o[2][1]),e(t(e(n(o[3][1],o[4][3]),n(-o[3][3],o[4][1])),-o[2][2]),t(e(n(o[3][1],o[4][2]),n(-o[3][2],o[4][1])),o[2][3]))),o[1][0]),t(e(t(e(n(o[3][2],o[4][3]),n(-o[3][3],o[4][2])),o[2][0]),e(t(e(n(o[3][0],o[4][3]),n(-o[3][3],o[4][0])),-o[2][2]),t(e(n(o[3][0],o[4][2]),n(-o[3][2],o[4][0])),o[2][3]))),-o[1][1])),e(t(e(t(e(n(o[3][1],o[4][3]),n(-o[3][3],o[4][1])),o[2][0]),e(t(e(n(o[3][0],o[4][3]),n(-o[3][3],o[4][0])),-o[2][1]),t(e(n(o[3][0],o[4][1]),n(-o[3][1],o[4][0])),o[2][3]))),o[1][2]),t(e(t(e(n(o[3][1],o[4][2]),n(-o[3][2],o[4][1])),o[2][0]),e(t(e(n(o[3][0],o[4][2]),n(-o[3][2],o[4][0])),-o[2][1]),t(e(n(o[3][0],o[4][1]),n(-o[3][1],o[4][0])),o[2][2]))),-o[1][3]))),o[0][4])))))}}function o(e){return(2===e?r:3===e?c:4===e?l:5===e?d:void 0)(a,u,i,h)}s=[function(){return[0]},function(e){return[e[0][0]]}];function m(e,t,n,s,o,i,a,r){return function(c){switch(c.length){case 0:return e(c);case 1:return t(c);case 2:return n(c);case 3:return s(c);case 4:return o(c);case 5:return i(c)}var l=a[c.length];return l||(l=a[c.length]=r(c.length)),l(c)}}!function(){for(;s.length<6;)s.push(o(s.length));e.exports=m.apply(void 0,s.concat([s,o]));for(var t=0;t<s.length;++t)e.exports[t]=s[t]}()},1944:function(e,t,n){"use strict";var s=n(5250),o=n(8210);e.exports=function(e,t){for(var i=s(e[0],t[0]),n=1;n<e.length;++n)i=o(i,s(e[n],t[n]));return i}},2646:function(e,t,n){"use strict";var s,i=n(5250),a=n(8210),r=n(8545),h=n(3012);function o(e){return(3===e?c:4===e?l:5===e?d:u)(a,r,i,h)}function c(e,t,n,s){return function(o,i,a){var r=n(o[0],o[0]),u=s(r,i[0]),h=s(r,a[0]),c=n(i[0],i[0]),m=s(c,o[0]),b=s(c,a[0]),d=n(a[0],a[0]),f=s(d,o[0]),p=s(d,i[0]),g=e(t(p,b),t(m,u)),v=t(f,h),l=t(g,v);return l[l.length-1]}}function l(e,t,n,s){return function(o,i,a,r){var d=e(n(o[0],o[0]),n(o[1],o[1])),y=s(d,i[0]),v=s(d,a[0]),g=s(d,r[0]),c=e(n(i[0],i[0]),n(i[1],i[1])),m=s(c,o[0]),f=s(c,a[0]),p=s(c,r[0]),u=e(n(a[0],a[0]),n(a[1],a[1])),h=s(u,o[0]),b=s(u,i[0]),j=s(u,r[0]),l=e(n(r[0],r[0]),n(r[1],r[1])),_=s(l,o[0]),w=s(l,i[0]),O=s(l,a[0]),C=e(e(s(t(O,j),i[1]),e(s(t(w,p),-a[1]),s(t(b,f),r[1]))),e(s(t(w,p),o[1]),e(s(t(_,g),-i[1]),s(t(m,y),r[1])))),E=e(e(s(t(O,j),o[1]),e(s(t(_,g),-a[1]),s(t(h,v),r[1]))),e(s(t(b,f),o[1]),e(s(t(h,v),-i[1]),s(t(m,y),a[1])))),x=t(C,E);return x[x.length-1]}}function d(e,t,n,s){return function(o,i,a,r,c){var S=e(n(o[0],o[0]),e(n(o[1],o[1]),n(o[2],o[2]))),d=s(S,i[0]),u=s(S,a[0]),h=s(S,r[0]),m=s(S,c[0]),z=e(n(i[0],i[0]),e(n(i[1],i[1]),n(i[2],i[2]))),p=s(z,o[0]),g=s(z,a[0]),v=s(z,r[0]),b=s(z,c[0]),T=e(n(a[0],a[0]),e(n(a[1],a[1]),n(a[2],a[2]))),y=s(T,o[0]),_=s(T,i[0]),w=s(T,r[0]),O=s(T,c[0]),F=e(n(r[0],r[0]),e(n(r[1],r[1]),n(r[2],r[2]))),C=s(F,o[0]),E=s(F,i[0]),k=s(F,a[0]),A=s(F,c[0]),M=e(n(c[0],c[0]),e(n(c[1],c[1]),n(c[2],c[2]))),l=s(M,o[0]),x=s(M,i[0]),j=s(M,a[0]),f=s(M,r[0]),N=e(e(e(s(e(s(t(f,A),a[1]),e(s(t(j,O),-r[1]),s(t(k,w),c[1]))),i[2]),e(s(e(s(t(f,A),i[1]),e(s(t(x,b),-r[1]),s(t(E,v),c[1]))),-a[2]),s(e(s(t(j,O),i[1]),e(s(t(x,b),-a[1]),s(t(_,g),c[1]))),r[2]))),e(s(e(s(t(k,w),i[1]),e(s(t(E,v),-a[1]),s(t(_,g),r[1]))),-c[2]),e(s(e(s(t(f,A),i[1]),e(s(t(x,b),-r[1]),s(t(E,v),c[1]))),o[2]),s(e(s(t(f,A),o[1]),e(s(t(l,m),-r[1]),s(t(C,h),c[1]))),-i[2])))),e(e(s(e(s(t(x,b),o[1]),e(s(t(l,m),-i[1]),s(t(p,d),c[1]))),r[2]),e(s(e(s(t(E,v),o[1]),e(s(t(C,h),-i[1]),s(t(p,d),r[1]))),-c[2]),s(e(s(t(k,w),i[1]),e(s(t(E,v),-a[1]),s(t(_,g),r[1]))),o[2]))),e(s(e(s(t(k,w),o[1]),e(s(t(C,h),-a[1]),s(t(y,u),r[1]))),-i[2]),e(s(e(s(t(E,v),o[1]),e(s(t(C,h),-i[1]),s(t(p,d),r[1]))),a[2]),s(e(s(t(_,g),o[1]),e(s(t(y,u),-i[1]),s(t(p,d),a[1]))),-r[2]))))),L=e(e(e(s(e(s(t(f,A),a[1]),e(s(t(j,O),-r[1]),s(t(k,w),c[1]))),o[2]),s(e(s(t(f,A),o[1]),e(s(t(l,m),-r[1]),s(t(C,h),c[1]))),-a[2])),e(s(e(s(t(j,O),o[1]),e(s(t(l,m),-a[1]),s(t(y,u),c[1]))),r[2]),s(e(s(t(k,w),o[1]),e(s(t(C,h),-a[1]),s(t(y,u),r[1]))),-c[2]))),e(e(s(e(s(t(j,O),i[1]),e(s(t(x,b),-a[1]),s(t(_,g),c[1]))),o[2]),s(e(s(t(j,O),o[1]),e(s(t(l,m),-a[1]),s(t(y,u),c[1]))),-i[2])),e(s(e(s(t(x,b),o[1]),e(s(t(l,m),-i[1]),s(t(p,d),c[1]))),a[2]),s(e(s(t(_,g),o[1]),e(s(t(y,u),-i[1]),s(t(p,d),a[1]))),-c[2])))),D=t(N,L);return D[D.length-1]}}function u(e,t,n,s){return function(o,i,a,r,c,l){var I=e(e(n(o[0],o[0]),n(o[1],o[1])),e(n(o[2],o[2]),n(o[3],o[3]))),u=s(I,i[0]),h=s(I,a[0]),m=s(I,r[0]),f=s(I,c[0]),p=s(I,l[0]),U=e(e(n(i[0],i[0]),n(i[1],i[1])),e(n(i[2],i[2]),n(i[3],i[3]))),v=s(U,o[0]),b=s(U,a[0]),j=s(U,r[0]),y=s(U,c[0]),_=s(U,l[0]),W=e(e(n(a[0],a[0]),n(a[1],a[1])),e(n(a[2],a[2]),n(a[3],a[3]))),O=s(W,o[0]),x=s(W,i[0]),C=s(W,r[0]),E=s(W,c[0]),k=s(W,l[0]),$=e(e(n(r[0],r[0]),n(r[1],r[1])),e(n(r[2],r[2]),n(r[3],r[3]))),S=s($,o[0]),M=s($,i[0]),F=s($,a[0]),T=s($,c[0]),z=s($,l[0]),V=e(e(n(c[0],c[0]),n(c[1],c[1])),e(n(c[2],c[2]),n(c[3],c[3]))),N=s(V,o[0]),L=s(V,i[0]),R=s(V,a[0]),P=s(V,r[0]),H=s(V,l[0]),B=e(e(n(l[0],l[0]),n(l[1],l[1])),e(n(l[2],l[2]),n(l[3],l[3]))),d=s(B,o[0]),D=s(B,i[0]),A=s(B,a[0]),w=s(B,r[0]),g=s(B,c[0]),q=e(e(e(s(e(e(s(e(s(t(g,H),r[1]),e(s(t(w,z),-c[1]),s(t(P,T),l[1]))),a[2]),s(e(s(t(g,H),a[1]),e(s(t(A,k),-c[1]),s(t(R,E),l[1]))),-r[2])),e(s(e(s(t(w,z),a[1]),e(s(t(A,k),-r[1]),s(t(F,C),l[1]))),c[2]),s(e(s(t(P,T),a[1]),e(s(t(R,E),-r[1]),s(t(F,C),c[1]))),-l[2]))),i[3]),e(s(e(e(s(e(s(t(g,H),r[1]),e(s(t(w,z),-c[1]),s(t(P,T),l[1]))),i[2]),s(e(s(t(g,H),i[1]),e(s(t(D,_),-c[1]),s(t(L,y),l[1]))),-r[2])),e(s(e(s(t(w,z),i[1]),e(s(t(D,_),-r[1]),s(t(M,j),l[1]))),c[2]),s(e(s(t(P,T),i[1]),e(s(t(L,y),-r[1]),s(t(M,j),c[1]))),-l[2]))),-a[3]),s(e(e(s(e(s(t(g,H),a[1]),e(s(t(A,k),-c[1]),s(t(R,E),l[1]))),i[2]),s(e(s(t(g,H),i[1]),e(s(t(D,_),-c[1]),s(t(L,y),l[1]))),-a[2])),e(s(e(s(t(A,k),i[1]),e(s(t(D,_),-a[1]),s(t(x,b),l[1]))),c[2]),s(e(s(t(R,E),i[1]),e(s(t(L,y),-a[1]),s(t(x,b),c[1]))),-l[2]))),r[3]))),e(e(s(e(e(s(e(s(t(w,z),a[1]),e(s(t(A,k),-r[1]),s(t(F,C),l[1]))),i[2]),s(e(s(t(w,z),i[1]),e(s(t(D,_),-r[1]),s(t(M,j),l[1]))),-a[2])),e(s(e(s(t(A,k),i[1]),e(s(t(D,_),-a[1]),s(t(x,b),l[1]))),r[2]),s(e(s(t(F,C),i[1]),e(s(t(M,j),-a[1]),s(t(x,b),r[1]))),-l[2]))),-c[3]),s(e(e(s(e(s(t(P,T),a[1]),e(s(t(R,E),-r[1]),s(t(F,C),c[1]))),i[2]),s(e(s(t(P,T),i[1]),e(s(t(L,y),-r[1]),s(t(M,j),c[1]))),-a[2])),e(s(e(s(t(R,E),i[1]),e(s(t(L,y),-a[1]),s(t(x,b),c[1]))),r[2]),s(e(s(t(F,C),i[1]),e(s(t(M,j),-a[1]),s(t(x,b),r[1]))),-c[2]))),l[3])),e(s(e(e(s(e(s(t(g,H),r[1]),e(s(t(w,z),-c[1]),s(t(P,T),l[1]))),i[2]),s(e(s(t(g,H),i[1]),e(s(t(D,_),-c[1]),s(t(L,y),l[1]))),-r[2])),e(s(e(s(t(w,z),i[1]),e(s(t(D,_),-r[1]),s(t(M,j),l[1]))),c[2]),s(e(s(t(P,T),i[1]),e(s(t(L,y),-r[1]),s(t(M,j),c[1]))),-l[2]))),o[3]),s(e(e(s(e(s(t(g,H),r[1]),e(s(t(w,z),-c[1]),s(t(P,T),l[1]))),o[2]),s(e(s(t(g,H),o[1]),e(s(t(d,p),-c[1]),s(t(N,f),l[1]))),-r[2])),e(s(e(s(t(w,z),o[1]),e(s(t(d,p),-r[1]),s(t(S,m),l[1]))),c[2]),s(e(s(t(P,T),o[1]),e(s(t(N,f),-r[1]),s(t(S,m),c[1]))),-l[2]))),-i[3])))),e(e(e(s(e(e(s(e(s(t(g,H),i[1]),e(s(t(D,_),-c[1]),s(t(L,y),l[1]))),o[2]),s(e(s(t(g,H),o[1]),e(s(t(d,p),-c[1]),s(t(N,f),l[1]))),-i[2])),e(s(e(s(t(D,_),o[1]),e(s(t(d,p),-i[1]),s(t(v,u),l[1]))),c[2]),s(e(s(t(L,y),o[1]),e(s(t(N,f),-i[1]),s(t(v,u),c[1]))),-l[2]))),r[3]),s(e(e(s(e(s(t(w,z),i[1]),e(s(t(D,_),-r[1]),s(t(M,j),l[1]))),o[2]),s(e(s(t(w,z),o[1]),e(s(t(d,p),-r[1]),s(t(S,m),l[1]))),-i[2])),e(s(e(s(t(D,_),o[1]),e(s(t(d,p),-i[1]),s(t(v,u),l[1]))),r[2]),s(e(s(t(M,j),o[1]),e(s(t(S,m),-i[1]),s(t(v,u),r[1]))),-l[2]))),-c[3])),e(s(e(e(s(e(s(t(P,T),i[1]),e(s(t(L,y),-r[1]),s(t(M,j),c[1]))),o[2]),s(e(s(t(P,T),o[1]),e(s(t(N,f),-r[1]),s(t(S,m),c[1]))),-i[2])),e(s(e(s(t(L,y),o[1]),e(s(t(N,f),-i[1]),s(t(v,u),c[1]))),r[2]),s(e(s(t(M,j),o[1]),e(s(t(S,m),-i[1]),s(t(v,u),r[1]))),-c[2]))),l[3]),s(e(e(s(e(s(t(w,z),a[1]),e(s(t(A,k),-r[1]),s(t(F,C),l[1]))),i[2]),s(e(s(t(w,z),i[1]),e(s(t(D,_),-r[1]),s(t(M,j),l[1]))),-a[2])),e(s(e(s(t(A,k),i[1]),e(s(t(D,_),-a[1]),s(t(x,b),l[1]))),r[2]),s(e(s(t(F,C),i[1]),e(s(t(M,j),-a[1]),s(t(x,b),r[1]))),-l[2]))),o[3]))),e(e(s(e(e(s(e(s(t(w,z),a[1]),e(s(t(A,k),-r[1]),s(t(F,C),l[1]))),o[2]),s(e(s(t(w,z),o[1]),e(s(t(d,p),-r[1]),s(t(S,m),l[1]))),-a[2])),e(s(e(s(t(A,k),o[1]),e(s(t(d,p),-a[1]),s(t(O,h),l[1]))),r[2]),s(e(s(t(F,C),o[1]),e(s(t(S,m),-a[1]),s(t(O,h),r[1]))),-l[2]))),-i[3]),s(e(e(s(e(s(t(w,z),i[1]),e(s(t(D,_),-r[1]),s(t(M,j),l[1]))),o[2]),s(e(s(t(w,z),o[1]),e(s(t(d,p),-r[1]),s(t(S,m),l[1]))),-i[2])),e(s(e(s(t(D,_),o[1]),e(s(t(d,p),-i[1]),s(t(v,u),l[1]))),r[2]),s(e(s(t(M,j),o[1]),e(s(t(S,m),-i[1]),s(t(v,u),r[1]))),-l[2]))),a[3])),e(s(e(e(s(e(s(t(A,k),i[1]),e(s(t(D,_),-a[1]),s(t(x,b),l[1]))),o[2]),s(e(s(t(A,k),o[1]),e(s(t(d,p),-a[1]),s(t(O,h),l[1]))),-i[2])),e(s(e(s(t(D,_),o[1]),e(s(t(d,p),-i[1]),s(t(v,u),l[1]))),a[2]),s(e(s(t(x,b),o[1]),e(s(t(O,h),-i[1]),s(t(v,u),a[1]))),-l[2]))),-r[3]),s(e(e(s(e(s(t(F,C),i[1]),e(s(t(M,j),-a[1]),s(t(x,b),r[1]))),o[2]),s(e(s(t(F,C),o[1]),e(s(t(S,m),-a[1]),s(t(O,h),r[1]))),-i[2])),e(s(e(s(t(M,j),o[1]),e(s(t(S,m),-i[1]),s(t(v,u),r[1]))),a[2]),s(e(s(t(x,b),o[1]),e(s(t(O,h),-i[1]),s(t(v,u),a[1]))),-r[2]))),l[3]))))),Y=e(e(e(s(e(e(s(e(s(t(g,H),r[1]),e(s(t(w,z),-c[1]),s(t(P,T),l[1]))),a[2]),s(e(s(t(g,H),a[1]),e(s(t(A,k),-c[1]),s(t(R,E),l[1]))),-r[2])),e(s(e(s(t(w,z),a[1]),e(s(t(A,k),-r[1]),s(t(F,C),l[1]))),c[2]),s(e(s(t(P,T),a[1]),e(s(t(R,E),-r[1]),s(t(F,C),c[1]))),-l[2]))),o[3]),e(s(e(e(s(e(s(t(g,H),r[1]),e(s(t(w,z),-c[1]),s(t(P,T),l[1]))),o[2]),s(e(s(t(g,H),o[1]),e(s(t(d,p),-c[1]),s(t(N,f),l[1]))),-r[2])),e(s(e(s(t(w,z),o[1]),e(s(t(d,p),-r[1]),s(t(S,m),l[1]))),c[2]),s(e(s(t(P,T),o[1]),e(s(t(N,f),-r[1]),s(t(S,m),c[1]))),-l[2]))),-a[3]),s(e(e(s(e(s(t(g,H),a[1]),e(s(t(A,k),-c[1]),s(t(R,E),l[1]))),o[2]),s(e(s(t(g,H),o[1]),e(s(t(d,p),-c[1]),s(t(N,f),l[1]))),-a[2])),e(s(e(s(t(A,k),o[1]),e(s(t(d,p),-a[1]),s(t(O,h),l[1]))),c[2]),s(e(s(t(R,E),o[1]),e(s(t(N,f),-a[1]),s(t(O,h),c[1]))),-l[2]))),r[3]))),e(e(s(e(e(s(e(s(t(w,z),a[1]),e(s(t(A,k),-r[1]),s(t(F,C),l[1]))),o[2]),s(e(s(t(w,z),o[1]),e(s(t(d,p),-r[1]),s(t(S,m),l[1]))),-a[2])),e(s(e(s(t(A,k),o[1]),e(s(t(d,p),-a[1]),s(t(O,h),l[1]))),r[2]),s(e(s(t(F,C),o[1]),e(s(t(S,m),-a[1]),s(t(O,h),r[1]))),-l[2]))),-c[3]),s(e(e(s(e(s(t(P,T),a[1]),e(s(t(R,E),-r[1]),s(t(F,C),c[1]))),o[2]),s(e(s(t(P,T),o[1]),e(s(t(N,f),-r[1]),s(t(S,m),c[1]))),-a[2])),e(s(e(s(t(R,E),o[1]),e(s(t(N,f),-a[1]),s(t(O,h),c[1]))),r[2]),s(e(s(t(F,C),o[1]),e(s(t(S,m),-a[1]),s(t(O,h),r[1]))),-c[2]))),l[3])),e(s(e(e(s(e(s(t(g,H),a[1]),e(s(t(A,k),-c[1]),s(t(R,E),l[1]))),i[2]),s(e(s(t(g,H),i[1]),e(s(t(D,_),-c[1]),s(t(L,y),l[1]))),-a[2])),e(s(e(s(t(A,k),i[1]),e(s(t(D,_),-a[1]),s(t(x,b),l[1]))),c[2]),s(e(s(t(R,E),i[1]),e(s(t(L,y),-a[1]),s(t(x,b),c[1]))),-l[2]))),o[3]),s(e(e(s(e(s(t(g,H),a[1]),e(s(t(A,k),-c[1]),s(t(R,E),l[1]))),o[2]),s(e(s(t(g,H),o[1]),e(s(t(d,p),-c[1]),s(t(N,f),l[1]))),-a[2])),e(s(e(s(t(A,k),o[1]),e(s(t(d,p),-a[1]),s(t(O,h),l[1]))),c[2]),s(e(s(t(R,E),o[1]),e(s(t(N,f),-a[1]),s(t(O,h),c[1]))),-l[2]))),-i[3])))),e(e(e(s(e(e(s(e(s(t(g,H),i[1]),e(s(t(D,_),-c[1]),s(t(L,y),l[1]))),o[2]),s(e(s(t(g,H),o[1]),e(s(t(d,p),-c[1]),s(t(N,f),l[1]))),-i[2])),e(s(e(s(t(D,_),o[1]),e(s(t(d,p),-i[1]),s(t(v,u),l[1]))),c[2]),s(e(s(t(L,y),o[1]),e(s(t(N,f),-i[1]),s(t(v,u),c[1]))),-l[2]))),a[3]),s(e(e(s(e(s(t(A,k),i[1]),e(s(t(D,_),-a[1]),s(t(x,b),l[1]))),o[2]),s(e(s(t(A,k),o[1]),e(s(t(d,p),-a[1]),s(t(O,h),l[1]))),-i[2])),e(s(e(s(t(D,_),o[1]),e(s(t(d,p),-i[1]),s(t(v,u),l[1]))),a[2]),s(e(s(t(x,b),o[1]),e(s(t(O,h),-i[1]),s(t(v,u),a[1]))),-l[2]))),-c[3])),e(s(e(e(s(e(s(t(R,E),i[1]),e(s(t(L,y),-a[1]),s(t(x,b),c[1]))),o[2]),s(e(s(t(R,E),o[1]),e(s(t(N,f),-a[1]),s(t(O,h),c[1]))),-i[2])),e(s(e(s(t(L,y),o[1]),e(s(t(N,f),-i[1]),s(t(v,u),c[1]))),a[2]),s(e(s(t(x,b),o[1]),e(s(t(O,h),-i[1]),s(t(v,u),a[1]))),-c[2]))),l[3]),s(e(e(s(e(s(t(P,T),a[1]),e(s(t(R,E),-r[1]),s(t(F,C),c[1]))),i[2]),s(e(s(t(P,T),i[1]),e(s(t(L,y),-r[1]),s(t(M,j),c[1]))),-a[2])),e(s(e(s(t(R,E),i[1]),e(s(t(L,y),-a[1]),s(t(x,b),c[1]))),r[2]),s(e(s(t(F,C),i[1]),e(s(t(M,j),-a[1]),s(t(x,b),r[1]))),-c[2]))),o[3]))),e(e(s(e(e(s(e(s(t(P,T),a[1]),e(s(t(R,E),-r[1]),s(t(F,C),c[1]))),o[2]),s(e(s(t(P,T),o[1]),e(s(t(N,f),-r[1]),s(t(S,m),c[1]))),-a[2])),e(s(e(s(t(R,E),o[1]),e(s(t(N,f),-a[1]),s(t(O,h),c[1]))),r[2]),s(e(s(t(F,C),o[1]),e(s(t(S,m),-a[1]),s(t(O,h),r[1]))),-c[2]))),-i[3]),s(e(e(s(e(s(t(P,T),i[1]),e(s(t(L,y),-r[1]),s(t(M,j),c[1]))),o[2]),s(e(s(t(P,T),o[1]),e(s(t(N,f),-r[1]),s(t(S,m),c[1]))),-i[2])),e(s(e(s(t(L,y),o[1]),e(s(t(N,f),-i[1]),s(t(v,u),c[1]))),r[2]),s(e(s(t(M,j),o[1]),e(s(t(S,m),-i[1]),s(t(v,u),r[1]))),-c[2]))),a[3])),e(s(e(e(s(e(s(t(R,E),i[1]),e(s(t(L,y),-a[1]),s(t(x,b),c[1]))),o[2]),s(e(s(t(R,E),o[1]),e(s(t(N,f),-a[1]),s(t(O,h),c[1]))),-i[2])),e(s(e(s(t(L,y),o[1]),e(s(t(N,f),-i[1]),s(t(v,u),c[1]))),a[2]),s(e(s(t(x,b),o[1]),e(s(t(O,h),-i[1]),s(t(v,u),a[1]))),-c[2]))),-r[3]),s(e(e(s(e(s(t(F,C),i[1]),e(s(t(M,j),-a[1]),s(t(x,b),r[1]))),o[2]),s(e(s(t(F,C),o[1]),e(s(t(S,m),-a[1]),s(t(O,h),r[1]))),-i[2])),e(s(e(s(t(M,j),o[1]),e(s(t(S,m),-i[1]),s(t(v,u),r[1]))),a[2]),s(e(s(t(x,b),o[1]),e(s(t(O,h),-i[1]),s(t(v,u),a[1]))),-r[2]))),c[3]))))),K=t(q,Y);return K[K.length-1]}}s=[function(){return 0},function(){return 0},function(){return 0}];function m(e){var t=s[e.length];return t||(t=s[e.length]=o(e.length)),t.apply(void 0,e)}function f(e,t,n,s,o,i,a,r){return function(t,n,c,l,d,u){switch(arguments.length){case 0:case 1:return 0;case 2:return s(t,n);case 3:return o(t,n,c);case 4:return i(t,n,c,l);case 5:return a(t,n,c,l,d);case 6:return r(t,n,c,l,d,u)}for(var m=new Array(arguments.length),h=0;h<arguments.length;++h)m[h]=arguments[h];return e(m)}}!function(){for(;s.length<=6;)s.push(o(s.length));e.exports=f.apply(void 0,[m].concat(s));for(var t=0;t<=6;++t)e.exports[t]=s[t]}()},727:function(e,t,n){"use strict";var s,o=n(2962);function i(e){return(2===e?a:3===e?r:4===e?c:5===e?l:d)(e<6?o[e]:o)}function a(e){return function(t,n){return[e([[+n[0],+t[0][1]],[+n[1],+t[1][1]]]),e([[+t[0][0],+n[0]],[+t[1][0],+n[1]]]),e(t)]}}function r(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2]],[+n[1],+t[1][1],+t[1][2]],[+n[2],+t[2][1],+t[2][2]]]),e([[+t[0][0],+n[0],+t[0][2]],[+t[1][0],+n[1],+t[1][2]],[+t[2][0],+n[2],+t[2][2]]]),e([[+t[0][0],+t[0][1],+n[0]],[+t[1][0],+t[1][1],+n[1]],[+t[2][0],+t[2][1],+n[2]]]),e(t)]}}function c(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2],+t[0][3]],[+n[1],+t[1][1],+t[1][2],+t[1][3]],[+n[2],+t[2][1],+t[2][2],+t[2][3]],[+n[3],+t[3][1],+t[3][2],+t[3][3]]]),e([[+t[0][0],+n[0],+t[0][2],+t[0][3]],[+t[1][0],+n[1],+t[1][2],+t[1][3]],[+t[2][0],+n[2],+t[2][2],+t[2][3]],[+t[3][0],+n[3],+t[3][2],+t[3][3]]]),e([[+t[0][0],+t[0][1],+n[0],+t[0][3]],[+t[1][0],+t[1][1],+n[1],+t[1][3]],[+t[2][0],+t[2][1],+n[2],+t[2][3]],[+t[3][0],+t[3][1],+n[3],+t[3][3]]]),e([[+t[0][0],+t[0][1],+t[0][2],+n[0]],[+t[1][0],+t[1][1],+t[1][2],+n[1]],[+t[2][0],+t[2][1],+t[2][2],+n[2]],[+t[3][0],+t[3][1],+t[3][2],+n[3]]]),e(t)]}}function l(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2],+t[0][3],+t[0][4]],[+n[1],+t[1][1],+t[1][2],+t[1][3],+t[1][4]],[+n[2],+t[2][1],+t[2][2],+t[2][3],+t[2][4]],[+n[3],+t[3][1],+t[3][2],+t[3][3],+t[3][4]],[+n[4],+t[4][1],+t[4][2],+t[4][3],+t[4][4]]]),e([[+t[0][0],+n[0],+t[0][2],+t[0][3],+t[0][4]],[+t[1][0],+n[1],+t[1][2],+t[1][3],+t[1][4]],[+t[2][0],+n[2],+t[2][2],+t[2][3],+t[2][4]],[+t[3][0],+n[3],+t[3][2],+t[3][3],+t[3][4]],[+t[4][0],+n[4],+t[4][2],+t[4][3],+t[4][4]]]),e([[+t[0][0],+t[0][1],+n[0],+t[0][3],+t[0][4]],[+t[1][0],+t[1][1],+n[1],+t[1][3],+t[1][4]],[+t[2][0],+t[2][1],+n[2],+t[2][3],+t[2][4]],[+t[3][0],+t[3][1],+n[3],+t[3][3],+t[3][4]],[+t[4][0],+t[4][1],+n[4],+t[4][3],+t[4][4]]]),e([[+t[0][0],+t[0][1],+t[0][2],+n[0],+t[0][4]],[+t[1][0],+t[1][1],+t[1][2],+n[1],+t[1][4]],[+t[2][0],+t[2][1],+t[2][2],+n[2],+t[2][4]],[+t[3][0],+t[3][1],+t[3][2],+n[3],+t[3][4]],[+t[4][0],+t[4][1],+t[4][2],+n[4],+t[4][4]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+n[0]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+n[1]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+n[2]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+n[3]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+n[4]]]),e(t)]}}function d(e){return function(t,n){return[e([[+n[0],+t[0][1],+t[0][2],+t[0][3],+t[0][4],+t[0][5]],[+n[1],+t[1][1],+t[1][2],+t[1][3],+t[1][4],+t[1][5]],[+n[2],+t[2][1],+t[2][2],+t[2][3],+t[2][4],+t[2][5]],[+n[3],+t[3][1],+t[3][2],+t[3][3],+t[3][4],+t[3][5]],[+n[4],+t[4][1],+t[4][2],+t[4][3],+t[4][4],+t[4][5]],[+n[5],+t[5][1],+t[5][2],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+n[0],+t[0][2],+t[0][3],+t[0][4],+t[0][5]],[+t[1][0],+n[1],+t[1][2],+t[1][3],+t[1][4],+t[1][5]],[+t[2][0],+n[2],+t[2][2],+t[2][3],+t[2][4],+t[2][5]],[+t[3][0],+n[3],+t[3][2],+t[3][3],+t[3][4],+t[3][5]],[+t[4][0],+n[4],+t[4][2],+t[4][3],+t[4][4],+t[4][5]],[+t[5][0],+n[5],+t[5][2],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+n[0],+t[0][3],+t[0][4],+t[0][5]],[+t[1][0],+t[1][1],+n[1],+t[1][3],+t[1][4],+t[1][5]],[+t[2][0],+t[2][1],+n[2],+t[2][3],+t[2][4],+t[2][5]],[+t[3][0],+t[3][1],+n[3],+t[3][3],+t[3][4],+t[3][5]],[+t[4][0],+t[4][1],+n[4],+t[4][3],+t[4][4],+t[4][5]],[+t[5][0],+t[5][1],+n[5],+t[5][3],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+n[0],+t[0][4],+t[0][5]],[+t[1][0],+t[1][1],+t[1][2],+n[1],+t[1][4],+t[1][5]],[+t[2][0],+t[2][1],+t[2][2],+n[2],+t[2][4],+t[2][5]],[+t[3][0],+t[3][1],+t[3][2],+n[3],+t[3][4],+t[3][5]],[+t[4][0],+t[4][1],+t[4][2],+n[4],+t[4][4],+t[4][5]],[+t[5][0],+t[5][1],+t[5][2],+n[5],+t[5][4],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+n[0],+t[0][5]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+n[1],+t[1][5]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+n[2],+t[2][5]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+n[3],+t[3][5]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+n[4],+t[4][5]],[+t[5][0],+t[5][1],+t[5][2],+t[5][3],+n[5],+t[5][5]]]),e([[+t[0][0],+t[0][1],+t[0][2],+t[0][3],+t[0][4],+n[0]],[+t[1][0],+t[1][1],+t[1][2],+t[1][3],+t[1][4],+n[1]],[+t[2][0],+t[2][1],+t[2][2],+t[2][3],+t[2][4],+n[2]],[+t[3][0],+t[3][1],+t[3][2],+t[3][3],+t[3][4],+n[3]],[+t[4][0],+t[4][1],+t[4][2],+t[4][3],+t[4][4],+n[4]],[+t[5][0],+t[5][1],+t[5][2],+t[5][3],+t[5][4],+n[5]]]),e(t)]}}s=[function(){return[[0]]},function(e,t){return[[t[0]],[e[0][0]]]}];function u(e,t,n,s,o,i,a,r){return function(c,l){switch(c.length){case 0:return e(c,l);case 1:return t(c,l);case 2:return n(c,l);case 3:return s(c,l);case 4:return o(c,l);case 5:return i(c,l)}var d=a[c.length];return d||(d=a[c.length]=r(c.length)),d(c,l)}}!function(){for(;s.length<6;)s.push(i(s.length));e.exports=u.apply(void 0,s.concat([s,i]));for(var t=0;t<6;++t)e.exports[t]=s[t]}()},3250:function(e,t,n){"use strict";var i=n(5250),m=n(8210),d=n(3012),a=n(8545);function r(e,t,n,s){return function(n,o,i){var r=e(e(t(o[1],i[0]),t(-i[1],o[0])),e(t(n[1],o[0]),t(-o[1],n[0]))),c=e(t(n[1],i[0]),t(-i[1],n[0])),a=s(r,c);return a[a.length-1]}}function c(e,t,n,s){return function(o,i,a,r){var l=e(e(n(e(t(a[1],r[0]),t(-r[1],a[0])),i[2]),e(n(e(t(i[1],r[0]),t(-r[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),r[2]))),e(n(e(t(i[1],r[0]),t(-r[1],i[0])),o[2]),e(n(e(t(o[1],r[0]),t(-r[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),r[2])))),d=e(e(n(e(t(a[1],r[0]),t(-r[1],a[0])),o[2]),e(n(e(t(o[1],r[0]),t(-r[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),r[2]))),e(n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]),e(n(e(t(o[1],a[0]),t(-a[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),a[2])))),c=s(l,d);return c[c.length-1]}}function l(e,t,n,s){return function(o,i,a,r,c){var d=e(e(e(n(e(n(e(t(r[1],c[0]),t(-c[1],r[0])),a[2]),e(n(e(t(a[1],c[0]),t(-c[1],a[0])),-r[2]),n(e(t(a[1],r[0]),t(-r[1],a[0])),c[2]))),i[3]),e(n(e(n(e(t(r[1],c[0]),t(-c[1],r[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-r[2]),n(e(t(i[1],r[0]),t(-r[1],i[0])),c[2]))),-a[3]),n(e(n(e(t(a[1],c[0]),t(-c[1],a[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),c[2]))),r[3]))),e(n(e(n(e(t(a[1],r[0]),t(-r[1],a[0])),i[2]),e(n(e(t(i[1],r[0]),t(-r[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),r[2]))),-c[3]),e(n(e(n(e(t(r[1],c[0]),t(-c[1],r[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-r[2]),n(e(t(i[1],r[0]),t(-r[1],i[0])),c[2]))),o[3]),n(e(n(e(t(r[1],c[0]),t(-c[1],r[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-r[2]),n(e(t(o[1],r[0]),t(-r[1],o[0])),c[2]))),-i[3])))),e(e(n(e(n(e(t(i[1],c[0]),t(-c[1],i[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),c[2]))),r[3]),e(n(e(n(e(t(i[1],r[0]),t(-r[1],i[0])),o[2]),e(n(e(t(o[1],r[0]),t(-r[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),r[2]))),-c[3]),n(e(n(e(t(a[1],r[0]),t(-r[1],a[0])),i[2]),e(n(e(t(i[1],r[0]),t(-r[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),r[2]))),o[3]))),e(n(e(n(e(t(a[1],r[0]),t(-r[1],a[0])),o[2]),e(n(e(t(o[1],r[0]),t(-r[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),r[2]))),-i[3]),e(n(e(n(e(t(i[1],r[0]),t(-r[1],i[0])),o[2]),e(n(e(t(o[1],r[0]),t(-r[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),r[2]))),a[3]),n(e(n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]),e(n(e(t(o[1],a[0]),t(-a[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),a[2]))),-r[3]))))),u=e(e(e(n(e(n(e(t(r[1],c[0]),t(-c[1],r[0])),a[2]),e(n(e(t(a[1],c[0]),t(-c[1],a[0])),-r[2]),n(e(t(a[1],r[0]),t(-r[1],a[0])),c[2]))),o[3]),n(e(n(e(t(r[1],c[0]),t(-c[1],r[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-r[2]),n(e(t(o[1],r[0]),t(-r[1],o[0])),c[2]))),-a[3])),e(n(e(n(e(t(a[1],c[0]),t(-c[1],a[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),c[2]))),r[3]),n(e(n(e(t(a[1],r[0]),t(-r[1],a[0])),o[2]),e(n(e(t(o[1],r[0]),t(-r[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),r[2]))),-c[3]))),e(e(n(e(n(e(t(a[1],c[0]),t(-c[1],a[0])),i[2]),e(n(e(t(i[1],c[0]),t(-c[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),c[2]))),o[3]),n(e(n(e(t(a[1],c[0]),t(-c[1],a[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),c[2]))),-i[3])),e(n(e(n(e(t(i[1],c[0]),t(-c[1],i[0])),o[2]),e(n(e(t(o[1],c[0]),t(-c[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),c[2]))),a[3]),n(e(n(e(t(i[1],a[0]),t(-a[1],i[0])),o[2]),e(n(e(t(o[1],a[0]),t(-a[1],o[0])),-i[2]),n(e(t(o[1],i[0]),t(-i[1],o[0])),a[2]))),-c[3])))),l=s(d,u);return l[l.length-1]}}function o(e){return(3===e?r:4===e?c:l)(m,i,d,a)}var u=o(3),h=o(4),s=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var a,r,o=(e[1]-n[1])*(t[0]-n[0]),i=(e[0]-n[0])*(t[1]-n[1]),s=o-i;if(o>0){if(i<=0)return s;a=o+i}else{if(!(o<0))return s;if(i>=0)return s;a=-(o+i)}return r=33306690738754716e-32*a,s>=r||s<=-r?s:u(e,t,n)},function(e,t,n,s){var i=e[0]-s[0],y=t[0]-s[0],a=n[0]-s[0],r=e[1]-s[1],c=t[1]-s[1],l=n[1]-s[1],d=e[2]-s[2],u=t[2]-s[2],m=n[2]-s[2],f=y*l,p=a*c,g=a*r,v=i*l,b=i*c,j=y*r,o=d*(f-p)+u*(g-v)+m*(b-j),_=7771561172376103e-31*((Math.abs(f)+Math.abs(p))*Math.abs(d)+(Math.abs(g)+Math.abs(v))*Math.abs(u)+(Math.abs(b)+Math.abs(j))*Math.abs(m));return o>_||-o>_?o:h(e,t,n,s)}];function f(e){var t=s[e.length];return t||(t=s[e.length]=o(e.length)),t.apply(void 0,e)}function p(e,t,n,s,o,i,a){return function(t,n,r,c,l){switch(arguments.length){case 0:case 1:return 0;case 2:return s(t,n);case 3:return o(t,n,r);case 4:return i(t,n,r,c);case 5:return a(t,n,r,c,l)}for(var u=new Array(arguments.length),d=0;d<arguments.length;++d)u[d]=arguments[d];return e(u)}}!function(){for(;s.length<=5;)s.push(o(s.length));e.exports=p.apply(void 0,[f].concat(s));for(var t=0;t<=5;++t)e.exports[t]=s[t]}()},5382:function(e,t,n){"use strict";var o=n(8210),s=n(3012);e.exports=function(e,t){if(1===e.length)return s(t,e[0]);if(1===t.length)return s(e,t[0]);if(0===e.length||0===t.length)return[0];var n,i=[0];if(e.length<t.length)for(n=0;n<e.length;++n)i=o(i,s(t,e[n]));else for(n=0;n<t.length;++n)i=o(i,s(e,t[n]));return i}},3012:function(e,t,n){"use strict";var s=n(5250),o=n(9362);e.exports=function(e,t){if(r=e.length,1===r)return c=s(e[0],t),c[0]?c:[c[1]];var r,c,l,u,i=new Array(2*r),n=[.1,.1],d=[.1,.1],a=0;s(e[0],t,n),n[0]&&(i[a++]=n[0]);for(l=1;l<r;++l){s(e[l],t,d),u=n[1],o(u,d[0],n),n[0]&&(i[a++]=n[0]);var h=d[1],m=n[1],f=h+m,p=m-(f-h);n[1]=f,p&&(i[a++]=p)}return n[1]&&(i[a++]=n[1]),0===a&&(i[a++]=0),i.length=a,i}},1125:function(e,t,n){"use strict";e.exports=function(e,t,n,o){var i,a,r=s(e,n,o),c=s(t,n,o);return!(r>0&&c>0||r<0&&c<0)&&(i=s(n,e,t),a=s(o,e,t),!(i>0&&a>0||i<0&&a<0)&&(0!==r||0!==c||0!==i||0!==a||function(e,t,n,s){for(o=0;o<2;++o){var o,i=e[o],a=t[o],l=Math.min(i,a),d=Math.max(i,a),r=n[o],c=s[o],u=Math.min(r,c);if(Math.max(r,c)<l||d<u)return!1}return!0}(e,t,n,o)))};var s=n(3250)[3]},8545:function(e){"use strict";e.exports=function(e,t){if(l=0|e.length,r=0|t.length,1===l&&1===r)return function(e,t){var n=e+t,s=n-e,o=e-(n-s)+(t-s);return o?[o,n]:[n]}(e[0],-t[0]);var o,r,c,l,g=new Array(l+r),f=0,i=0,s=0,m=Math.abs,d=e[i],y=m(d),u=-t[s],j=m(u);y<j?(c=d,(i+=1)<l&&(y=m(d=e[i]))):(c=u,(s+=1)<r&&(j=m(u=-t[s]))),i<l&&y<j||s>=r?(o=d,(i+=1)<l&&(y=m(d=e[i]))):(o=u,(s+=1)<r&&(j=m(u=-t[s])));for(var h,b,a=o+c,_=a-o,v=c-_,p=v,n=a;i<l&&s<r;)y<j?(o=d,(i+=1)<l&&(y=m(d=e[i]))):(o=u,(s+=1)<r&&(j=m(u=-t[s]))),(v=(c=p)-(_=(a=o+c)-o))&&(g[f++]=v),p=n-((h=n+a)-(b=h-n))+(a-b),n=h;for(;i<l;)(v=(c=p)-(_=(a=(o=d)+c)-o))&&(g[f++]=v),p=n-((h=n+a)-(b=h-n))+(a-b),n=h,(i+=1)<l&&(d=e[i]);for(;s<r;)(v=(c=p)-(_=(a=(o=u)+c)-o))&&(g[f++]=v),p=n-((h=n+a)-(b=h-n))+(a-b),n=h,(s+=1)<r&&(u=-t[s]);return p&&(g[f++]=p),n&&(g[f++]=n),f||(g[f++]=0),g.length=f,g}},8210:function(e){"use strict";e.exports=function(e,t){if(l=0|e.length,r=0|t.length,1===l&&1===r)return function(e,t){var n=e+t,s=n-e,o=e-(n-s)+(t-s);return o?[o,n]:[n]}(e[0],t[0]);var o,r,c,l,g=new Array(l+r),f=0,i=0,s=0,m=Math.abs,d=e[i],y=m(d),u=t[s],j=m(u);y<j?(c=d,(i+=1)<l&&(y=m(d=e[i]))):(c=u,(s+=1)<r&&(j=m(u=t[s]))),i<l&&y<j||s>=r?(o=d,(i+=1)<l&&(y=m(d=e[i]))):(o=u,(s+=1)<r&&(j=m(u=t[s])));for(var h,b,a=o+c,_=a-o,v=c-_,p=v,n=a;i<l&&s<r;)y<j?(o=d,(i+=1)<l&&(y=m(d=e[i]))):(o=u,(s+=1)<r&&(j=m(u=t[s]))),(v=(c=p)-(_=(a=o+c)-o))&&(g[f++]=v),p=n-((h=n+a)-(b=h-n))+(a-b),n=h;for(;i<l;)(v=(c=p)-(_=(a=(o=d)+c)-o))&&(g[f++]=v),p=n-((h=n+a)-(b=h-n))+(a-b),n=h,(i+=1)<l&&(d=e[i]);for(;s<r;)(v=(c=p)-(_=(a=(o=u)+c)-o))&&(g[f++]=v),p=n-((h=n+a)-(b=h-n))+(a-b),n=h,(s+=1)<r&&(u=t[s]);return p&&(g[f++]=p),n&&(g[f++]=n),f||(g[f++]=0),g.length=f,g}},9127:function(e,t,n){"use strict";e.exports=function(e){return o(s(e))};var s=n(6204),o=n(5771)},7765:function(e,t,n){"use strict";e.exports=function(e,t,n,r){if(n=n||0,void 0===r&&(r=function(e){for(var s=e.length,t=0,n=0;n<s;++n)t=0|Math.max(t,e[n].length);return t-1}(e)),0===e.length||r<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(e,t){for(var o=e.length,i=s.mallocUint8(o),n=0;n<o;++n)i[n]=e[n]<t|0;return i}(t,+n),c=function(e,t){for(var r,c,d,u,h,m,f=e.length,p=t*(t+1)/2*f|0,n=s.mallocUint32(2*p),l=0,a=0;a<f;++a)for(d=e[a],r=(t=d.length,0);r<t;++r)for(c=0;c<r;++c)h=d[c],m=d[r],n[l++]=0|Math.min(h,m),n[l++]=0|Math.max(h,m);i(o(n,[l/2|0,2])),u=2;for(a=2;a<l;a+=2)n[a-2]===n[a]&&n[a-1]===n[a+1]||(n[u++]=n[a],n[u++]=n[a+1]);return o(n,[u/2|0,2])}(e,r),d=function(e,t,n,i){for(var l,d,u,m,r=e.data,h=e.shape[0],f=s.mallocDouble(h),a=0,c=0;c<h;++c)l=r[2*c],d=r[2*c+1],n[l]!==n[d]&&(m=t[l],u=t[d],r[2*a]=l,r[2*a+1]=d,f[a++]=(u-i)/(u-m));return e.shape[0]=a,o(f,[a])}(c,t,l,+n),u=function(e,t){var n,i,r,o=s.mallocInt32(2*t),a=e.shape[0],c=e.data;o[0]=0;for(n=0,i=0;i<a;++i)if(r=c[2*i],r!==n){for(o[2*n+1]=i;++n<r;)o[2*n]=i,o[2*n+1]=i;o[2*n]=i}for(o[2*n+1]=a;++n<t;)o[2*n]=o[2*n+1]=a;return o}(c,0|t.length),h=a(r)(e,c.data,u,l),m=function(e){for(var n=0|e.shape[0],s=e.data,o=new Array(n),t=0;t<n;++t)o[t]=[s[2*t],s[2*t+1]];return o}(c),f=[].slice.call(d.data,0,d.shape[0]);return s.free(l),s.free(c.data),s.free(d.data),s.free(u),{cells:h,vertexIds:m,vertexWeights:f}};var o=n(9618),s=n(1888),i=n(446),a=n(1570)},1570:function(e){"use strict";e.exports=function(e){return t[e]()};var t=[function(){return function(e){for(var i=e.length,o=0;o<i;++o)e[o].length;return[]}},function(){function e(e,t,n,s){for(var o,r,c=0|Math.min(n,s),l=0|Math.max(n,s),i=e[2*c],a=e[2*c+1];i<a;){if(o=i+a>>1,r=t[2*o+1],r===l)return o;l<r?a=o:i=o+1}return i}return function(t,n,s,o){for(var i,a,l=t.length,r=[],c=0;c<l;++c)if(i=t[c],2===i.length){if(a=(o[i[0]]<<0)+(o[i[1]]<<1),0===a||3===a)continue;switch(a){case 0:case 3:break;case 1:r.push([e(s,n,i[0],i[1])]);break;case 2:r.push([e(s,n,i[1],i[0])])}}return r}},function(){function e(e,t,n,s){for(var o,r,c=0|Math.min(n,s),l=0|Math.max(n,s),i=e[2*c],a=e[2*c+1];i<a;){if(o=i+a>>1,r=t[2*o+1],r===l)return o;l<r?a=o:i=o+1}return i}return function(t,n,s,o){for(var i,r,l,d=t.length,a=[],c=0;c<d;++c)if(i=t[c],l=i.length,3===l){if(0==(r=(o[i[0]]<<0)+(o[i[1]]<<1)+(o[i[2]]<<2))||7===r)continue;switch(r){case 0:case 7:break;case 1:a.push([e(s,n,i[0],i[2]),e(s,n,i[0],i[1])]);break;case 2:a.push([e(s,n,i[1],i[0]),e(s,n,i[1],i[2])]);break;case 3:a.push([e(s,n,i[0],i[2]),e(s,n,i[1],i[2])]);break;case 4:a.push([e(s,n,i[2],i[1]),e(s,n,i[2],i[0])]);break;case 5:a.push([e(s,n,i[2],i[1]),e(s,n,i[0],i[1])]);break;case 6:a.push([e(s,n,i[1],i[0]),e(s,n,i[2],i[0])])}}else if(2===l){if(0==(r=(o[i[0]]<<0)+(o[i[1]]<<1))||3===r)continue;switch(r){case 0:case 3:break;case 1:a.push([e(s,n,i[0],i[1])]);break;case 2:a.push([e(s,n,i[1],i[0])])}}return a}},function(){function e(e,t,n,s){for(var o,r,c=0|Math.min(n,s),l=0|Math.max(n,s),i=e[2*c],a=e[2*c+1];i<a;){if(o=i+a>>1,r=t[2*o+1],r===l)return o;l<r?a=o:i=o+1}return i}return function(t,n,s,o){for(var i,r,c,d=t.length,a=[],l=0;l<d;++l)if(i=t[l],c=i.length,4===c){if(0==(r=(o[i[0]]<<0)+(o[i[1]]<<1)+(o[i[2]]<<2)+(o[i[3]]<<3))||15===r)continue;switch(r){case 0:case 15:break;case 1:a.push([e(s,n,i[0],i[1]),e(s,n,i[0],i[2]),e(s,n,i[0],i[3])]);break;case 2:a.push([e(s,n,i[1],i[2]),e(s,n,i[1],i[0]),e(s,n,i[1],i[3])]);break;case 3:a.push([e(s,n,i[1],i[2]),e(s,n,i[0],i[2]),e(s,n,i[0],i[3])],[e(s,n,i[1],i[3]),e(s,n,i[1],i[2]),e(s,n,i[0],i[3])]);break;case 4:a.push([e(s,n,i[2],i[0]),e(s,n,i[2],i[1]),e(s,n,i[2],i[3])]);break;case 5:a.push([e(s,n,i[0],i[1]),e(s,n,i[2],i[1]),e(s,n,i[0],i[3])],[e(s,n,i[2],i[1]),e(s,n,i[2],i[3]),e(s,n,i[0],i[3])]);break;case 6:a.push([e(s,n,i[2],i[0]),e(s,n,i[1],i[0]),e(s,n,i[1],i[3])],[e(s,n,i[2],i[3]),e(s,n,i[2],i[0]),e(s,n,i[1],i[3])]);break;case 7:a.push([e(s,n,i[0],i[3]),e(s,n,i[1],i[3]),e(s,n,i[2],i[3])]);break;case 8:a.push([e(s,n,i[3],i[1]),e(s,n,i[3],i[0]),e(s,n,i[3],i[2])]);break;case 9:a.push([e(s,n,i[3],i[1]),e(s,n,i[0],i[1]),e(s,n,i[0],i[2])],[e(s,n,i[3],i[2]),e(s,n,i[3],i[1]),e(s,n,i[0],i[2])]);break;case 10:a.push([e(s,n,i[1],i[0]),e(s,n,i[3],i[0]),e(s,n,i[1],i[2])],[e(s,n,i[3],i[0]),e(s,n,i[3],i[2]),e(s,n,i[1],i[2])]);break;case 11:a.push([e(s,n,i[1],i[2]),e(s,n,i[0],i[2]),e(s,n,i[3],i[2])]);break;case 12:a.push([e(s,n,i[3],i[0]),e(s,n,i[2],i[0]),e(s,n,i[2],i[1])],[e(s,n,i[3],i[1]),e(s,n,i[3],i[0]),e(s,n,i[2],i[1])]);break;case 13:a.push([e(s,n,i[0],i[1]),e(s,n,i[2],i[1]),e(s,n,i[3],i[1])]);break;case 14:a.push([e(s,n,i[2],i[0]),e(s,n,i[1],i[0]),e(s,n,i[3],i[0])])}}else if(3===c){if(0==(r=(o[i[0]]<<0)+(o[i[1]]<<1)+(o[i[2]]<<2))||7===r)continue;switch(r){case 0:case 7:break;case 1:a.push([e(s,n,i[0],i[2]),e(s,n,i[0],i[1])]);break;case 2:a.push([e(s,n,i[1],i[0]),e(s,n,i[1],i[2])]);break;case 3:a.push([e(s,n,i[0],i[2]),e(s,n,i[1],i[2])]);break;case 4:a.push([e(s,n,i[2],i[1]),e(s,n,i[2],i[0])]);break;case 5:a.push([e(s,n,i[2],i[1]),e(s,n,i[0],i[1])]);break;case 6:a.push([e(s,n,i[1],i[0]),e(s,n,i[2],i[0])])}}else if(2===c){if(0==(r=(o[i[0]]<<0)+(o[i[1]]<<1))||3===r)continue;switch(r){case 0:case 3:break;case 1:a.push([e(s,n,i[0],i[1])]);break;case 2:a.push([e(s,n,i[1],i[0])])}}return a}}]},6803:function(e,t,n){"use strict";n(8828),n(1755);function s(e,t){var s,i,a,r,c,l,d,u,h=e.length,o=e.length-t.length,n=Math.min;if(o)return o;switch(h){case 0:return 0;case 1:return e[0]-t[0];case 2:return(i=e[0]+e[1]-t[0]-t[1])||n(e[0],e[1])-n(t[0],t[1]);case 3:return r=e[0]+e[1],u=t[0]+t[1],(i=r+e[2]-(u+t[2]))||(a=n(e[0],e[1]),c=n(t[0],t[1]),(i=n(a,e[2])-n(c,t[2]))||n(a+e[2],r)-n(c+t[2],u));default:l=e.slice(0),l.sort(),d=t.slice(0),d.sort();for(s=0;s<h;++s)if(o=l[s]-d[s])return o;return 0}}t.Fw=s},3105:function(e,t){"use strict";function s(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return n=(e>65535)<<4,n|=t=((e>>>=n)>255)<<3,n|=t=((e>>>=t)>15)<<2,(n|=t=((e>>>=t)>3)<<1)|(e>>>=t)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=s,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var n=new Array(256);!function(e){for(t=0;t<256;++t){var t,n=t,s=t,o=7;for(n>>>=1;n;n>>>=1)s<<=1,s|=1&n,--o;e[t]=s<<o&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>s(e)+1}},2014:function(e,t,n){"use strict";var l=n(3105),c=n(4623);function s(e,t){var s,i,a,r,c,l,d,u,h=e.length,o=e.length-t.length,n=Math.min;if(o)return o;switch(h){case 0:return 0;case 1:return e[0]-t[0];case 2:return(i=e[0]+e[1]-t[0]-t[1])||n(e[0],e[1])-n(t[0],t[1]);case 3:return r=e[0]+e[1],u=t[0]+t[1],(i=r+e[2]-(u+t[2]))||(a=n(e[0],e[1]),c=n(t[0],t[1]),(i=n(a,e[2])-n(c,t[2]))||n(a+e[2],r)-n(c+t[2],u));default:l=e.slice(0),l.sort(),d=t.slice(0),d.sort();for(s=0;s<h;++s)if(o=l[s]-d[s])return o;return 0}}function u(e,t){return s(e[0],t[0])}function i(e,t){if(t){for(var i=e.length,o=new Array(i),n=0;n<i;++n)o[n]=[e[n],t[n]];for(o.sort(u),n=0;n<i;++n)e[n]=o[n][0],t[n]=o[n][1];return e}return e.sort(s),e}function a(e){if(0===e.length)return[];for(var o,n=1,i=e.length,t=1;t<i;++t)if(o=e[t],s(o,e[t-1])){if(t===n){n++;continue}e[n++]=o}return e.length=n,e}function o(e,t){for(var n,o,i=0,a=e.length-1,r=-1;i<=a;)n=i+a>>1,o=s(e[n],t),o<=0?(0===o&&(r=n),i=n+1):o>0&&(a=n-1);return r}function d(e,t){for(var c=new Array(e.length),n=0,p=c.length;n<p;++n)c[n]=[];for(i=[],m=(n=0,t.length);n<m;++n)for(var i,a,r,h,m,f=t[n],u=f.length,d=1,g=1<<u;d<g;++d){i.length=l.popCount(d);for(h=0,a=0;a<u;++a)d&1<<a&&(i[h++]=f[a]);if(r=o(e,i),!(r<0))for(;c[r++].push(n),!(r>=e.length||0!==s(e[r],i)););}return c}function r(e,t){if(t<0)return[];for(var n,o,r=[],u=(1<<t+1)-1,a=0;a<e.length;++a)for(o=e[a],n=u;n<1<<o.length;n=l.nextCombination(n)){for(var c=new Array(t+1),d=0,s=0;s<o.length;++s)n&1<<s&&(c[d++]=o[s]);r.push(c)}return i(r)}t.dimension=function(e){for(var t=0,s=Math.max,n=0,o=e.length;n<o;++n)t=s(t,e[n].length);return t-1},t.countVertices=function(e){for(var t=-1,i=Math.max,n=0,a=e.length;n<a;++n)for(var o=e[n],s=0,r=o.length;s<r;++s)t=i(t,o[s]);return t+1},t.cloneCells=function(e){for(var n=new Array(e.length),t=0,s=e.length;t<s;++t)n[t]=e[t].slice(0);return n},t.compareCells=s,t.normalize=i,t.unique=a,t.findCell=o,t.incidence=d,t.dual=function(e,t){if(!t)return d(a(r(e,0)),e);for(s=new Array(t),n=0;n<t;++n)s[n]=[];n=0;for(i=e.length;n<i;++n)for(var n,s,i,c=e[n],o=0,l=c.length;o<l;++o)s[c[o]].push(n);return s},t.explode=function(e){for(var a=[],n=0,d=e.length;n<d;++n)for(var t,o,r=e[n],c=0|r.length,s=1,l=1<<c;s<l;++s){for(o=[],t=0;t<c;++t)s>>>t&1&&o.push(r[t]);a.push(o)}return i(a)},t.skeleton=r,t.boundary=function(e){for(var a=[],o=0,l=e.length;o<l;++o)for(var n=e[o],s=0,r=n.length;s<r;++s){for(var c=new Array(n.length-1),t=0,d=0;t<r;++t)t!==s&&(c[d++]=n[t]);a.push(c)}return i(a)},t.connectedComponents=function(e,t){return t?function(e,t){for(var s,o,i,a,r,l,d=new c(t),n=0;n<e.length;++n)for(o=e[n],i=0;i<o.length;++i)for(r=i+1;r<o.length;++r)d.link(o[i],o[r]);a=[],s=d.ranks;for(n=0;n<s.length;++n)s[n]=-1;for(n=0;n<e.length;++n)l=d.find(e[n][0]),s[l]<0?(s[l]=a.length,a.push([e[n].slice(0)])):a[s[l]].push(e[n].slice(0));return a}(e,t):function(e){for(var n,s,l,d,h,m,p,u=a(i(r(e,0))),f=new c(u.length),t=0;t<e.length;++t)for(l=e[t],d=0;d<l.length;++d)for(p=o(u,[l[d]]),h=d+1;h<l.length;++h)f.link(p,o(u,[l[h]]));s=[],n=f.ranks;for(t=0;t<n.length;++t)n[t]=-1;for(t=0;t<e.length;++t)m=f.find(o(u,[e[t][0]])),n[m]<0?(n[m]=s.length,s.push([e[t].slice(0)])):s[n[m]].push(e[t].slice(0));return s}(e)}},4623:function(e){"use strict";function t(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}e.exports=t,t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},t.prototype.find=function(e){for(var n,t=this.roots;t[e]!==e;)n=t[e],t[e]=t[n],e=n;return e},t.prototype.link=function(e,t){if(n=this.find(e),s=this.find(t),n!==s){var n,s,o=this.ranks,i=this.roots,a=o[n],r=o[s];a<r?i[n]=s:r<a?i[s]=n:(i[s]=n,++o[n])}}},5878:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var a,r,d,f,p,v,b,j,y,u=t.length,A=e.length,l=new Array(u),c=new Array(u),h=new Array(u),m=new Array(u),i=0;i<u;++i)l[i]=c[i]=-1,h[i]=1/0,m[i]=!1;for(i=0;i<A;++i){if(j=e[i],2!==j.length)throw new Error("Input must be a graph");f=j[1],p=j[0],-1!==c[p]?c[p]=-2:c[p]=f,-1!==l[f]?l[f]=-2:l[f]=p}function _(e){if(m[e])return 1/0;var n,s,i,a=l[e],r=c[e];return a<0||r<0?1/0:(i=t[e],n=t[a],s=t[r],Math.abs(o(i,n,s))/Math.sqrt(Math.pow(n[0]-s[0],2)+Math.pow(n[1]-s[1],2)))}function w(e,t){var n=r[e],s=r[t];r[e]=s,r[t]=n,a[n]=t,a[s]=e}function g(e){return h[r[e]]}function M(e){return 1&e?e-1>>1:(e>>1)-1}function E(e){for(a=g(e);;){var i,a,n=a,s=2*e+1,o=2*(e+1),t=e;if(s<d&&(i=g(s),i<n&&(t=s,n=i)),o<d&&g(o)<n&&(t=o),t===e)return e;w(e,t),e=t}}function C(e){for(var t,n=g(e);e>0;){if(t=M(e),!(t>=0&&n<g(t)))return e;w(e,t),e=t}}function k(){if(d>0){var e=r[0];return w(0,d-1),d-=1,E(0),e}return-1}function O(e,t){var n=r[e];return h[n]===t?e:(h[n]=-1/0,C(e),k(),h[n]=t,C((d+=1)-1))}function S(e){if(!m[e]){m[e]=!0;var t=l[e],n=c[e];l[n]>=0&&(l[n]=t),c[t]>=0&&(c[t]=n),a[t]>=0&&O(a[t],_(t)),a[n]>=0&&O(a[n],_(n))}}r=[],a=new Array(u);for(i=0;i<u;++i)(h[i]=_(i))<1/0?(a[i]=r.length,r.push(i)):a[i]=-1;d=r.length;for(i=d>>1;i>=0;--i)E(i);for(;;){if(b=k(),b<0||h[b]>n)break;S(b)}v=[];for(i=0;i<u;++i)m[i]||(a[i]=v.length,v.push(t[i].slice()));function x(e,t){if(e[t]<0)return t;var s,o,i=t,n=t;do{if(s=e[n],!m[n]||s<0||s===n)break;if(s=e[n=s],!m[n]||s<0||s===n)break;n=s,i=e[i]}while(i!==n)for(o=t;o!==n;o=e[o])e[o]=n;return n}return v.length,y=[],e.forEach(function(e){var s,o,t=x(l,e[0]),n=x(c,e[1]);t>=0&&n>=0&&t!==n&&(s=a[t],o=a[n],s!==o&&y.push([s,o]))}),s.unique(s.normalize(y)),{positions:v,edges:y}};var o=n(3250),s=n(2014)},1303:function(e,t,n){"use strict";e.exports=function(e,t){if(t[0][0]<t[1][0])c=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return o(t,e);c=t[1],a=t[0]}if(e[0][0]<e[1][0])l=e[0],r=e[1];else{if(!(e[0][0]>e[1][0]))return-o(e,t);l=e[1],r=e[0]}var a,r,c,l,n=s(c,a,r),i=s(c,a,l);if(n<0){if(i<=0)return n}else if(n>0){if(i>=0)return n}else if(i)return i;if(n=s(r,l,a),i=s(r,l,c),n<0){if(i<=0)return n}else if(n>0){if(i>=0)return n}else if(i)return i;return a[0]-r[0]};var s=n(3250);function o(e,t){if(t[0][0]<t[1][0])o=t[0],n=t[1];else{if(!(t[0][0]>t[1][0])){var n,o,i,a,l,d=Math.min(e[0][1],e[1][1]),r=Math.max(e[0][1],e[1][1]),u=Math.min(t[0][1],t[1][1]),c=Math.max(t[0][1],t[1][1]);return r<u?r-u:d>c?d-c:r-c}o=t[1],n=t[0]}return e[0][1]<e[1][1]?(a=e[0],i=e[1]):(a=e[1],i=e[0]),l=s(n,o,a),l||(l=s(n,o,i))||i-n}},4209:function(e,t,n){"use strict";e.exports=function(e){for(var t,s,i,h,m,b=e.length,f=2*b,c=new Array(f),n=0;n<b;++n)s=e[n],h=s[0][0]<s[1][0],c[2*n]=new l(s[0][0],s,h,n),c[2*n+1]=new l(s[1][0],s,!h,n);c.sort(function(e,t){var n=e.x-t.x;return n||(n=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])});var d=u(a),p=[],g=[],v=[];for(n=0;n<f;){for(m=c[n].x,i=[];n<f;){if(t=c[n],t.x!==m)break;n+=1,t.segment[0][0]===t.x&&t.segment[1][0]===t.x?t.create&&(t.segment[0][1]<t.segment[1][1]?(i.push(new o(t.segment[0][1],t.index,!0,!0)),i.push(new o(t.segment[1][1],t.index,!1,!1))):(i.push(new o(t.segment[1][1],t.index,!0,!1)),i.push(new o(t.segment[0][1],t.index,!1,!0)))):d=t.create?d.insert(t.segment,t.index):d.remove(t.segment)}p.push(d.root),g.push(m),v.push(i)}return new r(p,g,v)};var c=n(2478),u=n(3840),i=n(3250),a=n(1303);function r(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function d(e,t){return e.y-t}function s(e,t){for(var n,o,a,r,c,l=null;e;)if(n=e.key,n[0][0]<n[1][0]?(a=n[0],r=n[1]):(a=n[1],r=n[0]),c=i(a,r,t),c<0)e=e.left;else if(c>0)if(t[0]!==n[1][0])l=e,e=e.right;else{if(o=s(e.right,t))return o;e=e.left}else{if(t[0]!==n[1][0])return e;if(o=s(e.right,t))return o;e=e.left}return l}function o(e,t,n,s){this.y=e,this.index=t,this.start=n,this.closed=s}function l(e,t,n,s){this.x=e,this.segment=t,this.create=n,this.index=s}r.prototype.castUp=function(e){if(r=c.le(this.coordinates,e[0]),r<0)return-1;this.slabs[r];var t,n,o,r,u,h,f,m=s(this.slabs[r],e),l=-1;if(m&&(l=m.value),this.coordinates[r]===e[0]&&(n=null,(m&&(n=m.key),r>0)&&(h=s(this.slabs[r-1],e),h&&(n?a(h.key,n)>0&&(n=h.key,l=h.value):(l=h.value,n=h.key))),o=this.horizontal[r],o.length>0&&(u=c.ge(o,e[1],d),u<o.length))){if(t=o[u],e[1]===t.y){if(t.closed)return t.index;for(;u<o.length-1&&o[u+1].y===e[1];)if((t=o[u+=1]).closed)return t.index;if(t.y===e[1]&&!t.start){if((u+=1)>=o.length)return l;t=o[u]}}t.start?n?(f=i(n[0],n[1],[e[0],t.y]),n[0][0]>n[1][0]&&(f=-f),f>0&&(l=t.index)):l=t.index:t.y!==e[1]&&(l=t.index)}return l}},5202:function(e,t,n){"use strict";var i=n(1944),a=n(8210);function s(e,t){var n=a(i(e,t),[t[t.length-1]]);return n[n.length-1]}function o(e,t,n,s){o=-t/(s-t),o<0?o=0:o>1&&(o=1);for(var o,c=1-o,a=e.length,r=new Array(a),i=0;i<a;++i)r[i]=o*e[i]+c*n[i];return r}e.exports=function(e,t){for(var n,d,c=[],a=[],r=s(e[e.length-1],t),u=e[e.length-1],i=e[0],l=0;l<e.length;++l,u=i)n=s(i=e[l],t),(r<0&&n>0||r>0&&n<0)&&(d=o(u,n,i,r),c.push(d),a.push(d.slice())),n<0?a.push(i.slice()):n>0?c.push(i.slice()):(c.push(i.slice()),a.push(i.slice())),r=n;return{positive:c,negative:a}},e.exports.positive=function(e,t){for(var n,r=[],i=s(e[e.length-1],t),l=e[e.length-1],a=e[0],c=0;c<e.length;++c,l=a)n=s(a=e[c],t),(i<0&&n>0||i>0&&n<0)&&r.push(o(l,n,a,i)),n>=0&&r.push(a.slice()),i=n;return r},e.exports.negative=function(e,t){for(var n,r=[],i=s(e[e.length-1],t),l=e[e.length-1],a=e[0],c=0;c<e.length;++c,l=a)n=s(a=e[c],t),(i<0&&n>0||i>0&&n<0)&&r.push(o(l,n,a,i)),n<=0&&r.push(a.slice()),i=n;return r}},3387:function(e,t,n){var s;!function(){"use strict";var a,o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return function(e,t){var n,s,a,r,c,l,u,h,m,f=1,p=e.length,d="";for(a=0;a<p;a++)if("string"==typeof e[a])d+=e[a];else if("object"==typeof e[a]){if((s=e[a]).keys)for(n=t[f],r=0;r<s.keys.length;r++){if(n==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[r],s.keys[r-1]));n=n[s.keys[r]]}else n=s.param_no?t[s.param_no]:t[f++];if(o.not_type.test(s.type)&&o.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),o.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(o.number.test(s.type)&&(h=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}o.json.test(s.type)?d+=n:(!o.number.test(s.type)||h&&!s.sign?c="":(c=h?"+":"-",n=n.toString().replace(o.sign,"")),m=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(c+n).length,l=s.width&&u>0?m.repeat(u):"",d+=s.align?c+n+l:"0"===m?c+l+n:l+c+n)}return d}(function(e){if(a[e])return a[e];for(var t,s=e,r=[],l=0;s;){if(null!==(t=o.text.exec(s)))r.push(t[0]);else if(null!==(t=o.modulo.exec(s)))r.push("%");else{if(null===(t=o.placeholder.exec(s)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){l|=1;var c=[],i=t[2],n=[];if(null===(n=o.key.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(c.push(n[1]);""!==(i=i.substring(n[0].length));)if(null!==(n=o.key_access.exec(i)))c.push(n[1]);else{if(null===(n=o.index_access.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");c.push(n[1])}t[2]=c}else l|=2;if(3===l)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}s=s.substring(t[0].length)}return a[e]=r}(e),arguments)}function r(e,t){return i.apply(null,[e].concat(t||[]))}a=Object.create(null),t.sprintf=i,t.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=r,void 0===(s=function(){return{sprintf:i,vsprintf:r}}.call(t,n,t,e))||(e.exports=s))}()},3711:function(e,t,n){"use strict";e.exports=function(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return function(e,t){for(var o=i(e,t),s=o.length,a=new Array(s),r=new Array(s),n=0;n<s;++n)a[n]=[o[n]],r[n]=[n];return{positions:a,cells:r}}(e,t);var r=e.order.join()+"-"+e.dtype,n=s[r];return t=+t||0,n||(n=s[r]=function(e,t){var s=e.length+"d",n=a[s];if(n)return n(o,e,t)}(e.order,e.dtype)),n(e,t)};var o=n(2640),i=n(781),a={"2d":function(e,t,n){var s=e({order:t,scalarArguments:3,getters:"generic"===n?[0]:void 0,phase:function(e,t,n,s){return e>s|0},vertex:function(e,t,n,s,o,i,a,r,c,l,d,u,h){var m=(a<<0)+(r<<1)+(c<<2)+(l<<3)|0;if(0!==m&&15!==m)switch(m){case 0:case 15:d.push([e-.5,t-.5]);break;case 1:d.push([e-.25-.25*(s+n-2*h)/(n-s),t-.25-.25*(o+n-2*h)/(n-o)]);break;case 2:d.push([e-.75-.25*(-s-n+2*h)/(s-n),t-.25-.25*(i+s-2*h)/(s-i)]);break;case 3:d.push([e-.5,t-.5-.5*(o+n+i+s-4*h)/(n-o+s-i)]);break;case 4:d.push([e-.25-.25*(i+o-2*h)/(o-i),t-.75-.25*(-o-n+2*h)/(o-n)]);break;case 5:d.push([e-.5-.5*(s+n+i+o-4*h)/(n-s+o-i),t-.5]);break;case 6:d.push([e-.5-.25*(-s-n+i+o)/(s-n+o-i),t-.5-.25*(-o-n+i+s)/(o-n+s-i)]);break;case 7:d.push([e-.75-.25*(i+o-2*h)/(o-i),t-.75-.25*(i+s-2*h)/(s-i)]);break;case 8:d.push([e-.75-.25*(-i-o+2*h)/(i-o),t-.75-.25*(-i-s+2*h)/(i-s)]);break;case 9:d.push([e-.5-.25*(s+n+-i-o)/(n-s+i-o),t-.5-.25*(o+n+-i-s)/(n-o+i-s)]);break;case 10:d.push([e-.5-.5*(-s-n-i-o+4*h)/(s-n+i-o),t-.5]);break;case 11:d.push([e-.25-.25*(-i-o+2*h)/(i-o),t-.75-.25*(o+n-2*h)/(n-o)]);break;case 12:d.push([e-.5,t-.5-.5*(-o-n-i-s+4*h)/(o-n+i-s)]);break;case 13:d.push([e-.75-.25*(s+n-2*h)/(n-s),t-.25-.25*(-i-s+2*h)/(i-s)]);break;case 14:d.push([e-.25-.25*(-s-n+2*h)/(s-n),t-.25-.25*(-o-n+2*h)/(o-n)])}},cell:function(e,t,n,s,o,i,a,r){o?r.push([e,t]):r.push([t,e])}});return function(e,t){var n=[],o=[];return s(e,n,o,t),{positions:n,cells:o}}}},s={}},529:function(e,t,n){"use strict";e.exports=function e(t,n,s){var c,d,h,_=(s=s||{}).fontStyle||"normal",y=s.fontWeight||"normal",v=s.fontVariant||"normal",g=[_,y,v,t].join("_"),l=i[g];if(l||(l=i[g]={" ":{data:new Float32Array(0),shape:.2}}),d=l[n],!d)if(n.length<=1||!/\d/.test(n))d=l[n]=function(e){for(var t,n,c,s=e.cells,l=e.positions,a=new Float32Array(6*s.length),r=0,o=0,i=0;i<s.length;++i)for(c=s[i],t=0;t<3;++t)n=l[c[t]],a[r++]=n[0],a[r++]=n[1]+1.4,o=Math.max(n[0],o);return{data:a,shape:o}}(a(n,{triangles:!0,font:t,fontStyle:_,fontWeight:y,fontVariant:v,textAlign:s.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=n.split(/(\d|\s)/),r=new Array(m.length),p=0,u=0,o=0;o<m.length;++o)r[o]=e(t,m[o]),p+=r[o].data.length,u+=r[o].shape,o>0&&(u+=.02);var f=new Float32Array(p),b=0,j=-.5*u;for(o=0;o<r.length;++o){for(h=r[o].data,c=0;c<h.length;c+=2)f[b++]=h[c]+j,f[b++]=h[c+1];j+=r[o].shape+.02}d=l[n]={data:f,shape:u}}return d};var a=n(4359),o=window||s.global||{},i=o.__TEXT_CACHE||{};o.__TEXT_CACHE={}},665:function(e,t,n){"use strict";var s,a=n(3202);e.exports=i,s=96;function o(e,t){var n=a(getComputedStyle(e).getPropertyValue(t));return n[0]*i(n[1],e)}function i(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var s,n=document.createElement("div");return n.style["font-size"]="128"+e,t.appendChild(n),s=o(n,"font-size")/128,t.removeChild(n),s}(e,t);case"em":return o(t,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return s;case"cm":return s/2.54;case"mm":return s/25.4;case"pt":return s/72;case"pc":return s/6}return 1}},7261:function(e,t,n){"use strict";e.exports=function(e){var s,c,p,g,i=(e=e||{}).center||[0,0,0],n=e.up||[0,1,0],t=e.right||l(n),a=e.radius||1,m=e.theta||0,f=e.phi||0;return(i=[].slice.call(i,0,3),n=[].slice.call(n,0,3),r(n,n),t=[].slice.call(t,0,3),r(t,t),"eye"in e)&&(c=e.eye,s=[c[0]-i[0],c[1]-i[1],c[2]-i[2]],d(t,s,n),o(t[0],t[1],t[2])<1e-6?t=l(n):r(t,t),a=o(s[0],s[1],s[2]),p=h(n,s)/a,g=h(t,s)/a,f=Math.acos(p),m=Math.acos(g)),a=Math.log(a),new u(e.zoomMin,e.zoomMax,i,n,t,a,m,f)};var s,i,a=n(9215),m=n(7608),f=n(6079),d=n(5911),r=n(3536),h=n(244);function o(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function c(e){return Math.min(1,Math.max(-1,e))}function l(e){var c=Math.abs(e[0]),s=Math.abs(e[1]),o=Math.abs(e[2]),n=[0,0,0];c>Math.max(s,o)?n[2]=1:s>Math.max(c,o)?n[0]=1:n[1]=1;for(var i=0,a=0,t=0;t<3;++t)i+=e[t]*e[t],a+=n[t]*e[t];for(t=0;t<3;++t)n[t]-=a/i*e[t];return r(n,n),n}function u(e,t,n,s,o,i,r,c){this.center=a(n),this.up=a(s),this.right=a(o),this.radius=a([i]),this.angle=a([r,c]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}s=u.prototype,s.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},s.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},s.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var i=this.computedUp,s=this.computedRight,h=0,w=0,t=0;t<3;++t)w+=i[t]*s[t],h+=i[t]*i[t];A=Math.sqrt(h),a=0;for(t=0;t<3;++t)s[t]-=i[t]*w/h,a+=s[t]*s[t],i[t]/=A;E=Math.sqrt(a);for(t=0;t<3;++t)s[t]/=E;c=this.computedToward,d(c,i,s),r(c,c);var a,c,l,E,A,S,H=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],_=this.computedAngle[1],y=Math.cos(O),j=Math.sin(O),u=Math.cos(_),v=Math.sin(_),P=this.computedCenter,R=y*u,I=j*u,L=v,N=-y*v,D=-j*v,z=u,k=this.computedEye,n=this.computedMatrix;for(t=0;t<3;++t)S=R*s[t]+I*c[t]+L*i[t],n[4*t+1]=N*s[t]+D*c[t]+z*i[t],n[4*t+2]=S,n[4*t+3]=0;var M=n[1],F=n[5],T=n[9],b=n[2],C=n[6],x=n[10],f=F*x-T*C,p=T*b-M*x,g=M*C-F*b,m=o(f,p,g);for(f/=m,p/=m,g/=m,n[0]=f,n[4]=p,n[8]=g,t=0;t<3;++t)k[t]=P[t]+n[2+4*t]*H;for(t=0;t<3;++t){a=0;for(l=0;l<3;++l)a+=n[t+4*l]*k[l];n[12+t]=-a}n[15]=1},s.getMatrix=function(e,t){this.recalcMatrix(e);var n,s=this.computedMatrix;if(t){for(n=0;n<16;++n)t[n]=s[n];return t}return s},i=[0,0,0],s.rotate=function(e,t,n,s){if(this.angle.move(e,t,n),s){this.recalcMatrix(e),a=this.computedMatrix,i[0]=a[2],i[1]=a[6],i[2]=a[10];for(var a,r=this.computedUp,c=this.computedRight,l=this.computedToward,o=0;o<3;++o)a[4*o]=r[o],a[4*o+1]=c[o],a[4*o+2]=l[o];for(f(a,a,s,i),o=0;o<3;++o)r[o]=a[4*o],c[o]=a[4*o+1];this.up.set(e,r[0],r[1],r[2]),this.right.set(e,c[0],c[1],c[2])}},s.pan=function(e,t,n,s){t=t||0,n=n||0,s=s||0,this.recalcMatrix(e);var i=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),i[1]),r=i[5],c=i[9],h=o(a,r,c);a/=h,r/=h,c/=h;var l,d=i[0],u=i[4],p=i[8],m=d*a+u*r+p*c,f=o(d-=a*m,u-=r*m,p-=c*m),g=(d/=f)*t+a*n,v=(u/=f)*t+r*n,b=(p/=f)*t+c*n;this.center.move(e,g,v,b),l=Math.exp(this.computedRadius[0]),l=Math.max(1e-4,l+s),this.radius.set(e,Math.log(l))},s.translate=function(e,t,n,s){this.center.move(e,t||0,n||0,s||0)},s.setMatrix=function(e,t,n,s){l=1,"number"==typeof n&&(l=0|n),(l<0||l>3)&&(l=1),b=(l+2)%3,t||(this.recalcMatrix(e),t=this.computedMatrix);var i=t[l],a=t[l+4],r=t[l+8];if(s){var D=Math.abs(i),$=Math.abs(a),M=Math.abs(r),N=Math.max(D,$,M);D===N?(i=i<0?-1:1,a=r=0):M===N?(r=r<0?-1:1,i=a=0):(a=a<0?-1:1,i=r=0)}else g=o(i,a,r),i/=g,a/=g,r/=g;var l,g,b,_,A,h=t[b],d=t[b+4],u=t[b+8],w=h*i+d*a+u*r,O=o(h-=i*w,d-=a*w,u-=r*w),v=a*(u/=O)-r*(d/=O),p=r*(h/=O)-i*u,j=i*d-a*h,k=o(v,p,j);if(v/=k,p/=k,j/=k,this.center.jump(e,R,P,T),this.radius.idle(e),this.up.jump(e,i,a,r),this.right.jump(e,h,d,u),2===l){var z=t[1],H=t[5],F=t[9],K=z*h+H*d+F*u,U=z*v+H*p+F*j;A=L<0?-Math.PI/2:Math.PI/2,_=Math.atan2(U,K)}else{var y=t[2],x=t[6],C=t[10],L=y*i+x*a+C*r,W=y*h+x*d+C*u,q=y*v+x*p+C*j;A=Math.asin(c(L)),_=Math.atan2(q,W)}this.angle.jump(e,_,A),this.recalcMatrix(e);var V=t[2],I=t[6],B=t[10],f=this.computedMatrix;m(f,t);var E=f[15],R=f[12]/E,P=f[13]/E,T=f[14]/E,S=Math.exp(this.computedRadius[0]);this.center.jump(e,R-V*S,P-I*S,T-B*S)},s.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},s.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},s.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},s.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},s.lookAt=function(e,t,n,s){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter;var i=(s=s||this.computedUp)[0],a=s[1],r=s[2],b=o(i,a,r);if(!(b<1e-6)){i/=b,a/=b,r/=b;var p=t[0]-n[0],m=t[1]-n[1],h=t[2]-n[2],g=o(p,m,h);if(!(g<1e-6)){p/=g,m/=g,h/=g;var w=this.computedRight,d=w[0],u=w[1],l=w[2],O=i*d+a*u+r*l,v=o(d-=O*i,u-=O*a,l-=O*r);if(!(v<.01&&(v=o(d=a*h-r*m,u=r*p-i*h,l=i*m-a*p))<1e-6)){d/=v,u/=v,l/=v,this.up.set(e,i,a,r),this.right.set(e,d,u,l),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(g));var k=a*l-r*u,x=r*d-i*l,C=i*u-a*d,_=o(k,x,C),z=i*p+a*m+r*h,M=d*p+u*m+l*h,S=(k/=_)*p+(x/=_)*m+(C/=_)*h,A=Math.asin(c(z)),j=Math.atan2(S,M),y=this.angle._state,f=y[y.length-1],F=y[y.length-2];f%=2*Math.PI;var T=Math.abs(f+2*Math.PI-j),E=Math.abs(f-j),D=Math.abs(f-2*Math.PI-j);T<E&&(f+=2*Math.PI),D<E&&(f-=2*Math.PI),this.angle.jump(this.angle.lastT(),f,F),this.angle.set(e,j,A)}}}}},5250:function(e){"use strict";e.exports=function(e,n,s){var o=e*n,r=t*e,i=r-(r-e),c=e-i,l=t*n,a=l-(l-n),d=n-a,u=c*d-(o-i*a-c*a-i*d);return s?(s[0]=u,s[1]=o,s):[u,o]};var t=+(Math.pow(2,27)+1)},9362:function(e){"use strict";e.exports=function(e,t,n){var s=e+t,o=s-e,i=t-o,a=e-(s-o);return n?(n[0]=a+i,n[1]=s,n):[a+i,s]}},1888:function(e,t,n){"use strict";var a=n(8828),o=n(1338),p=n(4793).hp;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var r,c,E="undefined"!=typeof Uint8ClampedArray,C="undefined"!=typeof BigUint64Array,x="undefined"!=typeof BigInt64Array,s=n.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=o([32,0])),s.BIGUINT64||(s.BIGUINT64=o([32,0])),s.BIGINT64||(s.BIGINT64=o([32,0])),s.BUFFER||(s.BUFFER=o([32,0])),c=s.DATA,r=s.BUFFER;function h(e){if(e){var t=e.length||e.byteLength,n=a.log2(t);c[n].push(e)}}function i(e){e=a.nextPow2(e);var n=a.log2(e),t=c[n];return t.length>0?t.pop():new ArrayBuffer(e)}function l(e){return new Uint8Array(i(e),0,e)}function d(e){return new Uint16Array(i(2*e),0,e)}function g(e){return new Uint32Array(i(4*e),0,e)}function v(e){return new Int8Array(i(e),0,e)}function b(e){return new Int16Array(i(2*e),0,e)}function j(e){return new Int32Array(i(4*e),0,e)}function y(e){return new Float32Array(i(4*e),0,e)}function _(e){return new Float64Array(i(8*e),0,e)}function w(e){return E?new Uint8ClampedArray(i(e),0,e):l(e)}function u(e){return C?new BigUint64Array(i(8*e),0,e):null}function m(e){return x?new BigInt64Array(i(8*e),0,e):null}function f(e){return new DataView(i(e),0,e)}function O(e){e=a.nextPow2(e);var n=a.log2(e),t=r[n];return t.length>0?t.pop():new p(e)}t.free=function(e){if(p.isBuffer(e))r[a.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|a.log2(t);c[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){h(e.buffer)},t.freeArrayBuffer=h,t.freeBuffer=function(e){r[a.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return i(e);switch(t){case"uint8":return l(e);case"uint16":return d(e);case"uint32":return g(e);case"int8":return v(e);case"int16":return b(e);case"int32":return j(e);case"float":case"float32":return y(e);case"double":case"float64":return _(e);case"uint8_clamped":return w(e);case"bigint64":return m(e);case"biguint64":return u(e);case"buffer":return O(e);case"data":case"dataview":return f(e);default:return null}return null},t.mallocArrayBuffer=i,t.mallocUint8=l,t.mallocUint16=d,t.mallocUint32=g,t.mallocInt8=v,t.mallocInt16=b,t.mallocInt32=j,t.mallocFloat32=t.mallocFloat=y,t.mallocFloat64=t.mallocDouble=_,t.mallocUint8Clamped=w,t.mallocBigUint64=u,t.mallocBigInt64=m,t.mallocDataView=f,t.mallocBuffer=O,t.clearCache=function(){for(var e=0;e<32;++e)s.UINT8[e].length=0,s.UINT16[e].length=0,s.UINT32[e].length=0,s.INT8[e].length=0,s.INT16[e].length=0,s.INT32[e].length=0,s.FLOAT[e].length=0,s.DOUBLE[e].length=0,s.BIGUINT64[e].length=0,s.BIGINT64[e].length=0,s.UINT8C[e].length=0,c[e].length=0,r[e].length=0}},1755:function(e){"use strict";function n(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}e.exports=n;var t=n.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},t.find=function(e){for(var s,n=e,t=this.roots;t[e]!==e;)e=t[e];for(;t[n]!==e;)s=t[n],t[n]=e,n=s;return e},t.link=function(e,t){if(n=this.find(e),s=this.find(t),n!==s){var n,s,o=this.ranks,i=this.roots,a=o[n],r=o[s];a<r?i[n]=s:r<a?i[s]=n:(i[s]=n,++o[n])}}},1682:function(e){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,a=e.length,o=e[0],i=e[0],s=1;s<a;++s)if(i=o,t(o=e[s],i)){if(s===n){n++;continue}e[n++]=o}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,i=e.length,n=e[0],o=e[0],s=1;s<i;++s,o=n)if(o=n,(n=e[s])!==o){if(s===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},4359:function(e,t,n){"use strict";e.exports=function(e,t){return"object"==typeof t&&null!==t||(t={}),i(e,t.canvas||s,t.context||o,t)};var i=n(7718),s=null,o=null;"undefined"!=typeof document&&((s=document.createElement("canvas")).width=8192,s.height=1024,o=s.getContext("2d"))},7718:function(e,t,n){e.exports=function(e,t,n,c){var f=64,v=1.25,m={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return c&&(c.size&&c.size>0&&(f=c.size),c.lineSpacing&&c.lineSpacing>0&&(v=c.lineSpacing),c.styletags&&c.styletags.breaklines&&(m.breaklines=!!c.styletags.breaklines),c.styletags&&c.styletags.bolds&&(m.bolds=!!c.styletags.bolds),c.styletags&&c.styletags.italics&&(m.italics=!!c.styletags.italics),c.styletags&&c.styletags.subscripts&&(m.subscripts=!!c.styletags.subscripts),c.styletags&&c.styletags.superscripts&&(m.superscripts=!!c.styletags.superscripts)),n.font=[c.fontStyle,c.fontVariant,c.fontWeight,f+"px",c.font].filter(function(e){return e}).join(" "),n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",l(function(e,t,n,c,l,m){n=n.replace(/\n/g,""),n=!0===m.breaklines?n.replace(/<br>/g,`
`):n.replace(/<br>/g," "),x="",v=[];for(f=0;f<n.length;++f)v[f]=x;!0===m.bolds&&(v=s(h,o,n,v)),!0===m.italics&&(v=s(u,r,n,v)),!0===m.superscripts&&(v=s(d,p,n,v)),!0===m.subscripts&&(v=s(g,b,n,v)),y=[],N="";for(f=0;f<n.length;++f)null!==v[f]&&(N+=n[f],y.push(v[f]));var f,v,j,y,w,O,x,E,k,A,S,M,z,N,L,P,V=N.split(`
`),D=V.length,C=Math.round(l*c),B=c,R=2*c,T=0,I=D*C+R;e.height<I&&(e.height=I),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",A=0,j="";function H(){if(""!==j){var e=t.measureText(j).width;t.fillText(j,B+M,R+S),M+=e}}function F(){return Math.round(k)+"px "}function $(e,n){if(s=""+t.font,!0===m.subscripts){var s,c,l,h,f,j=e.indexOf(i),b=n.indexOf(i),d=j>-1?parseInt(e[1+j]):0,u=b>-1?parseInt(n[1+b]):0;d!==u&&(s=s.replace(F(),"?px "),k*=Math.pow(.75,u-d),s=s.replace("?px ",F())),S+=.25*C*(u-d)}if(!0===m.superscripts){var v=e.indexOf(a),y=n.indexOf(a),p=v>-1?parseInt(e[1+v]):0,g=y>-1?parseInt(n[1+y]):0;p!==g&&(s=s.replace(F(),"?px "),k*=Math.pow(.75,g-p),s=s.replace("?px ",F())),S-=.25*C*(g-p)}!0===m.bolds&&(h=e.indexOf(o)>-1,f=n.indexOf(o)>-1,!h&&f&&(s=c?s.replace("italic ","italic bold "):"bold "+s),h&&!f&&(s=s.replace("bold ",""))),!0===m.italics&&(c=e.indexOf(r)>-1,l=n.indexOf(r)>-1,!c&&l&&(s="italic "+s),c&&!l&&(s=s.replace("italic ",""))),t.font=s}for(O=0;O<D;++O){E=V[O]+`
`;for(M=0,S=O*C,k=c,j="",f=0;f<E.length;++f)w=f+A<y.length?y[f+A]:y[y.length-1],x===w?j+=E[f]:(H(),j=E[f],void 0!==w&&($(x,w),x=w));H(),A+=E.length,z=0|Math.round(M+2*B),T<z&&(T=z)}return L=T,P=R+C*D,_(t.getImageData(0,0,L,P).data,[P,L,4]).pick(-1,-1,0).transpose(1,0)}(t,n,e,f,v,m),c,f)},e.exports.processPixels=l;var w=n(3711),_=n(9618),j=n(5878),v=n(332),f=n(2538),m=n(2095),h="b",o="b|",u="i",r="i|",d="sup",a="+",p="+1",g="sub",i="-",b="-1";function s(e,t,n,s){for(var o,l,u,f,h="<"+e+">",p="</"+e+">",m=h.length,d=p.length,g=t[0]===a||t[0]===i,r=0,c=-d;r>-1&&-1!==(r=n.indexOf(h,r))&&-1!==(c=n.indexOf(p,r+m))&&!(c<=r);){for(o=r;o<c+d;++o)o<r+m||o>=c?(s[o]=null,n=n.substr(0,o)+" "+n.substr(o+1)):null!==s[o]&&(l=s[o].indexOf(t[0]),-1===l?s[o]+=t:g&&(s[o]=s[o].substr(0,l+1)+(1+parseInt(s[o][l+1]))+s[o].substr(l+2)));f=r+m,u=n.substr(f,c-f).indexOf(h),r=-1!==u?u:c+d}return s}function y(e,t){var n=w(e,128);return t?j(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function c(e,t,n,s){var b=y(e,s),o=function(e,t,n){for(var s,a,r,c,l,u=t.textAlign||"start",h=t.textBaseline||"alphabetic",o=[1<<30,1<<30],i=[0,0],m=e.length,d=0;d<m;++d)for(l=e[d],s=0;s<2;++s)o[s]=0|Math.min(o[s],l[s]),i[s]=0|Math.max(i[s],l[s]);switch(c=0,u){case"center":c=-.5*(o[0]+i[0]);break;case"right":case"end":c=-i[0];break;case"left":case"start":c=-o[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+u+"'")}switch(r=0,h){case"hanging":case"top":r=-o[1];break;case"middle":r=-.5*(o[1]+i[1]);break;case"alphabetic":case"ideographic":r=-3*n;break;case"bottom":r=-i[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+h+"'")}return a=1/n,"lineHeight"in t?a*=+t.lineHeight:"width"in t?a=t.width/(i[0]-o[0]):"height"in t&&(a=t.height/(i[1]-o[1])),e.map(function(e){return[a*(e[0]+c),a*(e[1]+r)]})}(b.positions,t,n),a=b.edges,j="ccw"===t.orientation;if(v(o,a),t.polygons||t.polygon||t.polyline){for(var d=m(a,o),g=new Array(d.length),i=0;i<d.length;++i){for(var u=d[i],p=new Array(u.length),r=0;r<u.length;++r){for(var h=u[r],l=new Array(h.length),c=0;c<h.length;++c)l[c]=o[h[c]].slice();j&&l.reverse(),p[r]=l}g[i]=p}return g}return t.triangles||t.triangulate||t.triangle?{cells:f(o,a,{delaunay:!1,exterior:!1,interior:!0}),positions:o}:{edges:a,positions:o}}function l(e,t,n){try{return c(e,t,n,!0)}catch{}try{return c(e,t,n,!1)}catch{}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(e){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){if("undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=u),a=!1,"function"==typeof WeakMap)if(i=WeakMap,"undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{if(r=new i,c=Object.freeze({}),r.set(c,1),1===r.get(c))return void(e.exports=WeakMap);a=!0}Object.prototype.hasOwnProperty;var i,a,r,c,h,p,g,j=Object.getOwnPropertyNames,o=Object.defineProperty,b=Object.isExtensible,l="weakmap:",d=l+"ident:"+Math.random()+"___";"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array&&(g=new ArrayBuffer(25),h=new Uint8Array(g),crypto.getRandomValues(h),d=l+"rand:"+Array.prototype.map.call(h,function(e){return(e%36).toString(36)}).join("")+"___"),(o(Object,"getOwnPropertyNames",{value:function(e){return j(e).filter(v)}}),"getPropertyNames"in Object)&&(p=Object.getPropertyNames,o(Object,"getPropertyNames",{value:function(e){return p(e).filter(v)}})),!function(){var e,t,n=Object.freeze;o(Object,"freeze",{value:function(e){return s(e),n(e)}}),e=Object.seal,o(Object,"seal",{value:function(t){return s(t),e(t)}}),t=Object.preventExtensions,o(Object,"preventExtensions",{value:function(e){return s(e),t(e)}})}();var m=!1,y=0,t=function(){this instanceof t||f();var e=[],o=[],i=y++;return Object.create(t.prototype,{get___:{value:n(function(t,n){var r,a=s(t);return a?i in a?a[i]:n:(r=e.indexOf(t))>=0?o[r]:n})},has___:{value:n(function(t){var n=s(t);return n?i in n:e.indexOf(t)>=0})},set___:{value:n(function(t,n){var a,r=s(t);return r?r[i]=n:(a=e.indexOf(t))>=0?o[a]=n:(a=e.length,o[a]=n,e[a]=t),this})},delete___:{value:n(function(t){var n,a,r=s(t);return r?i in r&&delete r[i]:!((a=e.indexOf(t))<0||(n=e.length-1,e[a]=void 0,o[a]=o[n],e[a]=e[n],e.length=n,o.length=n,0))})}})};t.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof i?function(){function s(){this instanceof t||f();var o,s=new i,e=void 0,r=!1;return o=a?function(n,o){return s.set(n,o),s.has(n)||(e||(e=new t),e.set(n,o)),this}:function(n,o){if(r)try{s.set(n,o)}catch{e||(e=new t),e.set___(n,o)}else s.set(n,o);return this},Object.create(t.prototype,{get___:{value:n(function(t,n){return e?s.has(t)?s.get(t):e.get___(t,n):s.get(t,n)})},has___:{value:n(function(t){return s.has(t)||!!e&&e.has___(t)})},set___:{value:n(o)},delete___:{value:n(function(t){var n=!!s.delete(t);return e&&e.delete___(t)||n})},permitHostObjects___:{value:n(function(e){if(e!==u)throw new Error("bogus call to permitHostObjects___");r=!0})}})}a&&"undefined"!=typeof Proxy&&(Proxy=void 0),s.prototype=t.prototype,e.exports=s,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=t)}function u(e){e.permitHostObjects___&&e.permitHostObjects___(u)}function v(e){return e.substr(0,8)!=l||"___"!==e.substr(e.length-3)}function s(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[d];if(t&&t.key===e)return t;if(b(e)){t={key:e};try{return o(e,d,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch{return}}}function n(e){return e.prototype=null,Object.freeze(e)}function f(){m||"undefined"==typeof console||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(e,t,n){var s=n(8284);e.exports=function(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:s(t,e)}}},8284:function(e){e.exports=function(e,t){var n={identity:t},s=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?s.apply(this,arguments):n},writable:!0}),n}},606:function(e,t,n){var s=n(236);e.exports=function(){var e=s();return{get:function(t,n){var s=e(t);return s.hasOwnProperty("value")?s.value:n},set:function(t,n){return e(t).value=n,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},3349:function(e){"use strict";e.exports=function(e){var t={};return function(n,s,o){var a=n.dtype,r=n.order,c=[a,r.join()].join(),i=t[c];return i||(t[c]=i=e([a,r])),i(n.shape.slice(0),n.data,n.stride,0|n.offset,s,o)}}(function(){return function(e,t,n,s,o,i){var a,r,c,d,m=e[0],u=n[0],l=[0],h=u;s|=0,c=0,d=u;for(c=0;c<m;++c)a=t[s]-i,r=t[s+h]-i,a>=0!=r>=0&&o.push(l[0]+.5+.5*(a+r)/(a-r)),s+=d,++l[0]}}.bind(void 0,{funcName:"zeroCrossings"}))},781:function(e,t,n){"use strict";e.exports=function(e,t){var n=[];return t=+t||0,s(e.hi(e.shape[0]-1),n,t),n};var s=n(3349)},7790:function(){}},n={};function t(e){var s,o=n[e];return void 0!==o?o.exports:(s=n[e]={id:e,loaded:!1,exports:{}},i[e].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports)}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},o=t(1964),e.exports=o}()},33576:function(e,t,n){"use strict";function se(e,t){for(var n,s,o=0;o<t.length;o++)n=t[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,s=function(e){if("object"!==a(e)||null===e)return e;var n,s=e[Symbol.toPrimitive];if(void 0!==s){if(n=s.call(e,"string"),"object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(s)?s:String(s)),n)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var d,p,_,M,T,O=n(59968),m=n(35984),U="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,p=2147483647;function c(e){if(e>p)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return b(e)}return P(e,t,n)}function P(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var o=0|D(e,t),n=c(o),i=n.write(e,t);return i!==o&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(r(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return x(e)}(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(e));if(r(e,ArrayBuffer)||e&&r(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(r(e,SharedArrayBuffer)||e&&r(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i,o=e.valueOf&&e.valueOf();if(o!=null&&o!==e)return s.from(o,t,n);if(i=function(e){if(s.isBuffer(e)){var n=0|j(e.length),t=c(n);return 0===t.length||e.copy(t,0,0,n),t}return void 0!==e.length?"number"!=typeof e.length||C(e.length)?c(0):x(e):"Buffer"===e.type&&Array.isArray(e.data)?x(e.data):void 0}(e),i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(e))}function R(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function b(e){return R(e),c(e<0?0:0|j(e))}function x(e){for(var n=e.length<0?0:0|j(e.length),s=c(n),t=0;t<n;t+=1)s[t]=255&e[t];return s}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(o,s.prototype),o}function j(e){if(e>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|e}function D(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||r(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+a(e));var o,n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(o)return i?-1:A(e).length;t=(""+t).toLowerCase(),o=!0}}function ne(e,t,n){var s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return q(this,t,n);case"utf8":case"utf-8":return $(this,t,n);case"ascii":return G(this,t,n);case"latin1":case"binary":return Y(this,t,n);case"base64":return X(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function u(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function S(e,t,n,o,i){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),C(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,o)),s.isBuffer(t))return 0===t.length?-1:W(e,t,n,o,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):W(e,[t],n,o,i);throw new TypeError("val must be string, number or Buffer")}function W(e,t,n,s,o){var i,a,r,h,u=1,l=e.length,c=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;u=2,l/=2,c/=2,n/=2}function d(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(o){a=-1;for(i=n;i<l;i++)if(d(e,i)===d(t,-1===a?0:i-a)){if(-1===a&&(a=i),i-a+1===c)return a*u}else-1!==a&&(i-=i-a),a=-1}else for(n+c>l&&(n=l-c),i=n;i>=0;i--){for(h=!0,r=0;r<c;r++)if(d(e,i+r)!==d(t,r)){h=!1;break}if(h)return i}return-1}function te(e,t,n,s){n=Number(n)||0;var o,a,r,i=e.length-n;s?(s=Number(s))>i&&(s=i):s=i,a=t.length;for(s>a/2&&(s=a/2),o=0;o<s;++o){if(r=parseInt(t.substr(2*o,2),16),C(r))return o;e[n+o]=r}return o}function ee(e,t,n,s){return g(A(t,e.length-n),e,n,s)}function J(e,t,n,s){return g(function(e){for(var n=[],t=0;t<e.length;++t)n.push(255&e.charCodeAt(t));return n}(t),e,n,s)}function K(e,t,n,s){return g(F(t),e,n,s)}function Q(e,t,n,s){return g(function(e,t){for(var o,i,a,n=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(o=e.charCodeAt(s))>>8,a=o%256,n.push(a),n.push(i);return n}(t,e.length-n),e,n,s)}function X(e,t,n){return 0===t&&n===e.length?O.fromByteArray(e):O.fromByteArray(e.slice(t,n))}function $(e,t,n){n=Math.min(e.length,n);for(d=[],o=t;o<n;){var r=e[o],s=null,l=r>239?4:r>223?3:r>191?2:1;if(o+l<=n){var o,d,a=void 0,c=void 0,u=void 0,i=void 0;switch(l){case 1:r<128&&(s=r);break;case 2:128==(192&(a=e[o+1]))&&(i=(31&r)<<6|63&a)>127&&(s=i);break;case 3:a=e[o+1],c=e[o+2],128==(192&a)&&128==(192&c)&&(i=(15&r)<<12|(63&a)<<6|63&c)>2047&&(i<55296||i>57343)&&(s=i);break;case 4:a=e[o+1],c=e[o+2],u=e[o+3],128==(192&a)&&128==(192&c)&&128==(192&u)&&(i=(15&r)<<18|(63&a)<<12|(63&c)<<6|63&u)>65535&&i<1114112&&(s=i)}}null===s?(s=65533,l=1):s>65535&&(s-=65536,d.push(s>>>10&1023|55296),s=56320|1023&s),d.push(s),o+=l}return function(e){if(t=e.length,t<=_)return String.fromCharCode.apply(String,e);for(var t,s="",n=0;n<t;)s+=String.fromCharCode.apply(String,e.slice(n,n+=_));return s}(d)}t.kMaxLength=p,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return P(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return function(e,t,n){return R(e),e<=0?c(e):void 0!==t?"string"==typeof n?c(e).fill(t,n):c(e).fill(t):c(e)}(e,t,n)},s.allocUnsafe=function(e){return b(e)},s.allocUnsafeSlow=function(e){return b(e)},s.isBuffer=function(e){return e!=null&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(r(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),r(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var o=e.length,i=t.length,n=0,a=Math.min(o,i);n<a;++n)if(e[n]!==t[n]){o=e[n],i=t[n];break}return o<i?-1:i<o?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(t=0,o=0;o<e.length;++o)t+=e[o].length;var n,o,i=s.allocUnsafe(t),a=0;for(o=0;o<e.length;++o){if(n=e[o],r(n,Uint8Array))a+n.length>i.length?(s.isBuffer(n)||(n=s.from(n)),n.copy(i,a)):Uint8Array.prototype.set.call(i,n,a);else{if(!s.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(i,a)}a+=n.length}return i},s.byteLength=D,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e,t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(e=0;e<t;e+=2)u(this,e,e+1);return this},s.prototype.swap32=function(){var e,t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(e=0;e<t;e+=4)u(this,e,e+3),u(this,e+1,e+2);return this},s.prototype.swap64=function(){var e,t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(e=0;e<t;e+=8)u(this,e,e+7),u(this,e+1,e+6),u(this,e+2,e+5),u(this,e+3,e+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?$(this,0,e):ne.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},U&&(s.prototype[U]=s.prototype.inspect),s.prototype.compare=function(e,t,n,o,i){if(r(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+a(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=n)return 0;if(o>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var l=(i>>>=0)-(o>>>=0),d=(n>>>=0)-(t>>>=0),m=Math.min(l,d),u=this.slice(o,i),h=e.slice(t,n),c=0;c<m;++c)if(u[c]!==h[c]){l=u[c],d=h[c];break}return l<d?-1:d<l?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},s.prototype.write=function(e,t,n,s){if(void 0===t)s="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)s=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===s&&(s="utf8")):(s=n,n=void 0)}var o,i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(o=!1;;)switch(s){case"hex":return te(this,e,t,n);case"utf8":case"utf-8":return ee(this,e,t,n);case"ascii":case"latin1":case"binary":return J(this,e,t,n);case"base64":return K(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},_=4096;function G(e,t,n){var s,o="";n=Math.min(e.length,n);for(s=t;s<n;++s)o+=String.fromCharCode(127&e[s]);return o}function Y(e,t,n){var s,o="";n=Math.min(e.length,n);for(s=t;s<n;++s)o+=String.fromCharCode(e[s]);return o}function q(e,t,n){s=e.length,(!t||t<0)&&(t=0),(!n||n<0||n>s)&&(n=s);for(var s,i="",o=t;o<n;++o)i+=T[e[o]];return i}function Z(e,t,n){for(var o=e.slice(t,n),i="",s=0;s<o.length-1;s+=2)i+=String.fromCharCode(o[s]+256*o[s+1]);return i}function o(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function i(e,t,n,o,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function H(e,t,n,s,o){N(t,s,o,e,n,7);var i,a=Number(t&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,i=Number(t>>BigInt(32)&BigInt(4294967295)),e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function I(e,t,n,s,o){N(t,s,o,e,n,7);var i,a=Number(t&BigInt(4294967295));return e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a,i=Number(t>>BigInt(32)&BigInt(4294967295)),e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function B(e,t,n,s){if(n+s>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,s,o){return t=+t,n>>>=0,o||B(e,0,n,4),m.write(e,t,n,s,23,4),n+4}function z(e,t,n,s,o){return t=+t,n>>>=0,o||B(e,0,n,8),m.write(e,t,n,s,52,8),n+8}s.prototype.slice=function(e,t){var o,n=this.length;return(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),o=this.subarray(e,t),Object.setPrototypeOf(o,s.prototype),o},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var s=this[e],i=1,a=0;++a<t&&(i*=256);)s+=this[e+a]*i;return s},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var s=this[e+--t],i=1;t>0&&(i*=256);)s+=this[e+--t]*i;return s},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||o(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||o(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||o(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||o(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||o(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=l(function(e){h(e>>>=0,"offset");var s,o,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),o=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24),BigInt(s)+(BigInt(o)<<BigInt(32))}),s.prototype.readBigUInt64BE=l(function(e){h(e>>>=0,"offset");var s,o,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],o=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n,(BigInt(s)<<BigInt(32))+BigInt(o)}),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var s=this[e],i=1,a=0;++a<t&&(i*=256);)s+=this[e+a]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||o(e,t,this.length);for(var i=t,a=1,s=this[e+--i];i>0&&(a*=256);)s+=this[e+--i]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||o(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||o(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||o(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||o(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||o(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=l(function(e){h(e>>>=0,"offset");var s,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24),(BigInt(s)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))}),s.prototype.readBigInt64BE=l(function(e){h(e>>>=0,"offset");var s,t=this[e],n=this[e+7];return void 0!==t&&void 0!==n||f(e,this.length-8),s=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],(BigInt(s)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||o(e,4,this.length),m.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||o(e,4,this.length),m.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||o(e,8,this.length),m.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||o(e,8,this.length),m.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,s){e=+e,t>>>=0,n>>>=0,s||i(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,s){e=+e,t>>>=0,n>>>=0,s||i(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=l(function(e){return H(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=l(function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,n,s){e=+e,t>>>=0,!s&&(o=Math.pow(2,8*n-1),i(this,e,t,n,o-1,-o));var o,a=0,c=1,r=0;for(this[t]=255&e;++a<n&&(c*=256);)e<0&&0===r&&0!==this[t+a-1]&&(r=1),this[t+a]=(e/c>>0)-r&255;return t+n},s.prototype.writeIntBE=function(e,t,n,s){e=+e,t>>>=0,!s&&(a=Math.pow(2,8*n-1),i(this,e,t,n,a-1,-a));var a,o=n-1,c=1,r=0;for(this[t+o]=255&e;--o>=0&&(c*=256);)e<0&&0===r&&0!==this[t+o+1]&&(r=1),this[t+o]=(e/c>>0)-r&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||i(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=l(function(e){return H(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=l(function(e){return I(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,o){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var i=o-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),t),i},s.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!s.isEncoding(o))throw new TypeError("Unknown encoding: "+o);1===e.length&&(a=e.charCodeAt(0),("utf8"===o&&a<128||"latin1"===o)&&(e=a))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var i,a,r=s.isBuffer(e)?e:s.from(e,o),c=r.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=r[i%c]}return this},d={};function w(e,t,n){d[e]=function(n){function s(){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=function(e,t,n){return t=v(t),function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(e,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}(this,s),Object.defineProperty(k(n),"message",{value:t.apply(k(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}var o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(s,n),o=s,(i=[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}])&&se(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),s}(n)}function L(e){for(var n="",t=e.length,s="-"===e[0]?1:0;t>=s+4;t-=3)n="_".concat(e.slice(t-3,t)).concat(n);return"".concat(e.slice(0,t)).concat(n)}function N(e,t,n,s,o,i){if(e>n||e<t){var r,a="bigint"==typeof t?"n":"";throw r=i>3?0===t||t===BigInt(0)?">= 0".concat(a," and < 2").concat(a," ** ").concat(8*(i+1)).concat(a):">= -(2".concat(a," ** ").concat(8*(i+1)-1).concat(a,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(a):">= ".concat(t).concat(a," and <= ").concat(n).concat(a),new d.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){h(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||f(t,e.length-(n+1))}(s,o,i)}function h(e,t){if("number"!=typeof e)throw new d.ERR_INVALID_ARG_TYPE(t,"number",e)}function f(e,t,n){throw Math.floor(e)!==e?(h(e,n),new d.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new d.ERR_BUFFER_OUT_OF_BOUNDS:new d.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}w("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),w("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(a(t))},TypeError),w("ERR_OUT_OF_RANGE",function(e,t,n){var o='The value of "'.concat(e,'" is out of range.'),s=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?s=L(String(n)):"bigint"==typeof n&&(s=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(s=L(s)),s+="n"),o+" It must be ".concat(t,". Received ").concat(s)},RangeError),M=/[^+/0-9A-Za-z-_]/g;function A(e,t){t=t||1/0;for(var n,a=e.length,o=null,s=[],i=0;i<a;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===a){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function F(e){return O.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function g(e,t,n,s){var o;for(o=0;o<s&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function r(e,t){return e instanceof t||e!=null&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function C(e){return e!=e}T=function(){for(var e,o,n="0123456789abcdef",s=new Array(256),t=0;t<16;++t)for(o=16*t,e=0;e<16;++e)s[o+e]=n[t]+n[e];return s}();function l(e){return"undefined"==typeof BigInt?oe:e}function oe(){throw new Error("BigInt not supported")}},25928:function(e){"use strict";e.exports=t,e.exports.isMobile=t,e.exports.default=t;var n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/CrOS/,o=/android|ipad|playbook|silk/i;function t(e){e||(e={});var i,t=e.ua;return t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"==typeof t&&(i=n.test(t)&&!s.test(t)||!!e.tablet&&o.test(t),!i&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(i=!0),i)}},48932:function(e,t,n){"use strict";n.r(t),n.d(t,{sankeyCenter:function(){return K},sankeyCircular:function(){return N},sankeyJustify:function(){return w},sankeyLeft:function(){return z},sankeyRight:function(){return q}});var f,o=n(84706),k=n(34712),Q=n(10132),X=n(6688),G=n.n(X);function Y(e){return e.target.depth}function z(e){return e.depth}function q(e,t){return t-1-e.height}function w(e,t){return e.sourceLinks.length?e.depth:t-1}function K(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?(0,o.SY)(e.sourceLinks,Y)-1:0}function l(e){return function(){return e}}f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function U(e,t){return v(e.source,t.source)||e.index-t.index}function W(e,t){return v(e.target,t.target)||e.index-t.index}function v(e,t){return e.partOfCycle===t.partOfCycle?e.y0-t.y0:"top"===e.circularLinkType||"bottom"===t.circularLinkType?-1:1}function h(e){return e.value}function g(e){return(e.y0+e.y1)/2}function $(e){return g(e.source)}function V(e){return g(e.target)}function D(e){return e.index}function H(e){return e.nodes}function P(e){return e.links}function C(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function s(e,t){return t(e)}var a=25,i=10,L=.3;function N(){var d,y,r=0,s=0,c=1,t=1,j=24,n=D,_=w,A=H,x=P,O=32,u=2,E=null;function e(){var l,e={nodes:A.apply(null,arguments),links:x.apply(null,arguments)};!function(e){e.nodes.forEach(function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]});var t=(0,k.kH)(e.nodes,n);e.links.forEach(function(e,n){e.index=n;var s=e.source,o=e.target;"object"!==(void 0===s?"undefined":f(s))&&(s=e.source=C(t,s)),"object"!==(void 0===o?"undefined":f(o))&&(o=e.target=C(t,o)),s.sourceLinks.push(e),o.targetLinks.push(e)})}(e),function(e,t,n){if(a=0,null===n){for(s=[],o=0;o<e.links.length;o++){var s,o,i,a,r,d,u=e.links[o],c=u.source.index,l=u.target.index;s[c]||(s[c]=[]),s[l]||(s[l]=[]),-1===s[c].indexOf(l)&&s[c].push(l)}d=G()(s),d.sort(function(e,t){return e.length-t.length}),i={};for(o=0;o<d.length;o++)r=d[o].slice(-2),i[r[0]]||(i[r[0]]={}),i[r[0]][r[1]]=!0;e.links.forEach(function(e){var n=e.target.index,t=e.source.index;n===t||i[t]&&i[t][n]?(e.circular=!0,e.circularLinkID=a,a+=1):e.circular=!1})}else e.links.forEach(function(e){e.source[n]<e.target[n]?e.circular=!1:(e.circular=!0,e.circularLinkID=a,a+=1)})}(e,0,E),function(e){e.nodes.forEach(function(e){e.partOfCycle=!1,e.value=Math.max((0,o.oh)(e.sourceLinks,h),(0,o.oh)(e.targetLinks,h)),e.sourceLinks.forEach(function(t){t.circular&&(e.partOfCycle=!0,e.circularLinkType=t.circularLinkType)}),e.targetLinks.forEach(function(t){t.circular&&(e.partOfCycle=!0,e.circularLinkType=t.circularLinkType)})})}(e),function(e){var t,n,s;for(n=e.nodes,t=[],s=0;n.length;++s,n=t,t=[])n.forEach(function(e){e.depth=s,e.sourceLinks.forEach(function(e){t.indexOf(e.target)<0&&!e.circular&&t.push(e.target)})});for(n=e.nodes,t=[],s=0;n.length;++s,n=t,t=[])n.forEach(function(e){e.height=s,e.targetLinks.forEach(function(e){t.indexOf(e.source)<0&&!e.circular&&t.push(e.source)})});e.nodes.forEach(function(e){e.column=Math.floor(_.call(null,e,s))})}(e),F(e,n),function(e,n,l){u=(0,k.UJ)().key(function(e){return e.column}).sortKeys(o.XE).entries(e.nodes).map(function(e){return e.values}),function(n){y&&(m=1/0,u.forEach(function(e){var n=t*y/(e.length+1);m=n<m?n:m}),d=m),l=(0,o.SY)(u,function(e){return(t-s-(e.length-1)*d)/(0,o.oh)(e,h)}),l*=L,e.links.forEach(function(e){e.width=e.value*l});var l,m,f=function(e){var t=0,n=0,s=0,r=0,c=(0,o.kv)(e.nodes,function(e){return e.column});return e.links.forEach(function(e){e.circular&&("top"==e.circularLinkType?t+=e.width:n+=e.width,0==e.target.column&&(r+=e.width),e.source.column==c&&(s+=e.width))}),{top:t=t>0?t+a+i:t,bottom:n=n>0?n+a+i:n,left:r=r>0?r+a+i:r,right:s=s>0?s+a+i:s}}(e),p=function(e,n){var u=(0,o.kv)(e.nodes,function(e){return e.column}),a=c-r,l=t-s,d=a/(a+n.right+n.left),i=l/(l+n.top+n.bottom);return r=r*d+n.left,c=0==n.right?c:c*d,s=s*i+n.top,t*=i,e.nodes.forEach(function(e){e.x0=r+e.column*((c-r-j)/u),e.x1=e.x0+j}),i}(e,f);l*=p,e.links.forEach(function(e){e.width=e.value*l}),u.forEach(function(e){var o=e.length;e.forEach(function(e,i){e.depth==u.length-1&&1==o||0==e.depth&&1==o?(e.y0=t/2-e.value*l,e.y1=e.y0+e.value*l):e.partOfCycle?0==b(e,n)?(e.y0=t/2+i,e.y1=e.y0+e.value*l):"top"==e.circularLinkType?(e.y0=s+i,e.y1=e.y0+e.value*l):(e.y0=t-e.value*l-i,e.y1=e.y0+e.value*l):0==f.top||0==f.bottom?(e.y0=(t-s)/o*i,e.y1=e.y0+e.value*l):(e.y0=(t-s)/2-o/2+i,e.y1=e.y0+e.value*l)})})}(l),f();for(var u,p=1,m=n;m>0;--m)_(p*=.99,l),f();function _(e,n){var s=u.length;u.forEach(function(i){var a=i.length,r=i[0].depth;i.forEach(function(i){if(i.sourceLinks.length||i.targetLinks.length)if(i.partOfCycle&&b(i,n)>0);else if(0==r&&1==a)c=i.y1-i.y0,i.y0=t/2-c/2,i.y1=t/2+c/2;else if(r==s-1&&1==a)c=i.y1-i.y0,i.y0=t/2-c/2,i.y1=t/2+c/2;else{var c,l=(0,o.mo)(i.sourceLinks,V),d=(0,o.mo)(i.targetLinks,$),u=((l&&d?(l+d)/2:l||d)-g(i))*e;i.y0+=u,i.y1+=u}})})}function f(){u.forEach(function(e){var n,o,i,a=s,r=e.length;for(e.sort(v),i=0;i<r;++i)(o=a-(n=e[i]).y0)>0&&(n.y0+=o,n.y1+=o),a=n.y1+d;if((o=a-d-t)>0)for(a=n.y0-=o,n.y1-=o,i=r-2;i>=0;--i)(o=(n=e[i]).y1+d-a)>0&&(n.y0-=o,n.y1-=o),a=n.y0})}}(e,O,n),M(e);for(l=0;l<4;l++)m(e,t,n),p(e,0,n),Z(e,s,t,n),m(e,t,n),p(e,0,n);return function(e,t,n){var s,i,a=e.nodes,r=e.links,c=!1,l=!1;(r.forEach(function(e){"top"==e.circularLinkType?c=!0:"bottom"==e.circularLinkType&&(l=!0)}),0==c||0==l)&&(i=(0,o.SY)(a,function(e){return e.y0}),s=(n-t)/((0,o.kv)(a,function(e){return e.y1})-i),a.forEach(function(e){var t=(e.y1-e.y0)*s;e.y0=(e.y0-i)*s,e.y1=e.y0+t}),r.forEach(function(e){e.y0=(e.y0-i)*s,e.y1=(e.y1-i)*s,e.width=e.width*s}))}(e,s,t),S(e,u,t,n),e}function M(e){e.nodes.forEach(function(e){e.sourceLinks.sort(W),e.targetLinks.sort(U)}),e.nodes.forEach(function(e){var t=e.y0,s=t,n=e.y1,o=n;e.sourceLinks.forEach(function(e){e.circular?(e.y0=n-e.width/2,n-=e.width):(e.y0=t+e.width/2,t+=e.width)}),e.targetLinks.forEach(function(e){e.circular?(e.y1=o-e.width/2,o-=e.width):(e.y1=s+e.width/2,s+=e.width)})})}return e.nodeId=function(t){return arguments.length?(n="function"==typeof t?t:l(t),e):n},e.nodeAlign=function(t){return arguments.length?(_="function"==typeof t?t:l(t),e):_},e.nodeWidth=function(t){return arguments.length?(j=+t,e):j},e.nodePadding=function(t){return arguments.length?(d=+t,e):d},e.nodes=function(t){return arguments.length?(A="function"==typeof t?t:l(t),e):A},e.links=function(t){return arguments.length?(x="function"==typeof t?t:l(t),e):x},e.size=function(n){return arguments.length?(r=s=0,c=+n[0],t=+n[1],e):[c-r,t-s]},e.extent=function(n){return arguments.length?(r=+n[0][0],c=+n[1][0],s=+n[0][1],t=+n[1][1],e):[[r,s],[c,t]]},e.iterations=function(t){return arguments.length?(O=+t,e):O},e.circularLinkGap=function(t){return arguments.length?(u=+t,e):u},e.nodePaddingRatio=function(t){return arguments.length?(y=+t,e):y},e.sortNodes=function(t){return arguments.length?(E=t,e):E},e.update=function(e){return F(e,n),M(e),e.links.forEach(function(e){e.circular&&(e.circularLinkType=e.y0+e.y1<t?"top":"bottom",e.source.circularLinkType=e.circularLinkType,e.target.circularLinkType=e.circularLinkType)}),m(e,t,n,!1),p(e,0,n),S(e,u,t,n),e},e}function F(e,t){var n=0,o=0;e.links.forEach(function(i){i.circular&&(i.source.circularLinkType||i.target.circularLinkType?i.circularLinkType=i.source.circularLinkType?i.source.circularLinkType:i.target.circularLinkType:i.circularLinkType=n<o?"top":"bottom","top"==i.circularLinkType?n+=1:o+=1,e.nodes.forEach(function(e){s(e,t)!=s(i.source,t)&&s(e,t)!=s(i.target,t)||(e.circularLinkType=i.circularLinkType)}))}),e.links.forEach(function(e){e.circular&&(e.source.circularLinkType==e.target.circularLinkType&&(e.circularLinkType=e.source.circularLinkType),r(e,t)&&(e.circularLinkType=e.source.circularLinkType))})}function T(e){var t=Math.abs(e.y1-e.y0),n=Math.abs(e.target.x0-e.source.x1);return Math.atan(n/t)}function b(e,t){var n,s=0;return e.sourceLinks.forEach(function(e){s=e.circular&&!r(e,t)?s+1:s}),n=0,e.targetLinks.forEach(function(e){n=e.circular&&!r(e,t)?n+1:n}),s+n}function A(e){var t,s,o=e.source.sourceLinks,n=0;return o.forEach(function(e){n=e.circular?n+1:n}),s=e.target.targetLinks,t=0,s.forEach(function(e){t=e.circular?t+1:t}),!(n>1||t>1)}function M(e,t,n){return e.sort(R),e.forEach(function(s,o){var i,c,l,d,a=0;if(r(s,n)&&A(s))s.circularPathData.verticalBuffer=a+s.width/2;else{for(i=0;i<o;i++)c=e[o],l=e[i],!(c.source.column<l.target.column||c.target.column>l.source.column)&&(d=e[i].circularPathData.verticalBuffer+e[i].width/2+t,a=d>a?d:a);s.circularPathData.verticalBuffer=a+s.width/2}}),e}function S(e,t,n,s){var c=(0,o.SY)(e.links,function(e){return e.source.y0});e.links.forEach(function(e){e.circular&&(e.circularPathData={})}),M(e.links.filter(function(e){return"top"==e.circularLinkType}),t,s),M(e.links.filter(function(e){return"bottom"==e.circularLinkType}),t,s),e.links.forEach(function(o){if(o.circular){if(o.circularPathData.arcRadius=o.width+i,o.circularPathData.leftNodeBuffer=5,o.circularPathData.rightNodeBuffer=5,o.circularPathData.sourceWidth=o.source.x1-o.source.x0,o.circularPathData.sourceX=o.source.x0+o.circularPathData.sourceWidth,o.circularPathData.targetX=o.target.x0,o.circularPathData.sourceY=o.y0,o.circularPathData.targetY=o.y1,r(o,s)&&A(o))o.circularPathData.leftSmallArcRadius=i+o.width/2,o.circularPathData.leftLargeArcRadius=i+o.width/2,o.circularPathData.rightSmallArcRadius=i+o.width/2,o.circularPathData.rightLargeArcRadius=i+o.width/2,"bottom"==o.circularLinkType?(o.circularPathData.verticalFullExtent=o.source.y1+a+o.circularPathData.verticalBuffer,o.circularPathData.verticalLeftInnerExtent=o.circularPathData.verticalFullExtent-o.circularPathData.leftLargeArcRadius,o.circularPathData.verticalRightInnerExtent=o.circularPathData.verticalFullExtent-o.circularPathData.rightLargeArcRadius):(o.circularPathData.verticalFullExtent=o.source.y0-a-o.circularPathData.verticalBuffer,o.circularPathData.verticalLeftInnerExtent=o.circularPathData.verticalFullExtent+o.circularPathData.leftLargeArcRadius,o.circularPathData.verticalRightInnerExtent=o.circularPathData.verticalFullExtent+o.circularPathData.rightLargeArcRadius);else{var l,m,u=o.source.column,h=o.circularLinkType,d=e.links.filter(function(e){return e.source.column==u&&e.circularLinkType==h});"bottom"==o.circularLinkType?d.sort(O):d.sort(x),l=0,d.forEach(function(e,n){e.circularLinkID==o.circularLinkID&&(o.circularPathData.leftSmallArcRadius=i+o.width/2+l,o.circularPathData.leftLargeArcRadius=i+o.width/2+n*t+l),l+=e.width}),u=o.target.column,d=e.links.filter(function(e){return e.target.column==u&&e.circularLinkType==h}),"bottom"==o.circularLinkType?d.sort(B):d.sort(I),l=0,d.forEach(function(e,n){e.circularLinkID==o.circularLinkID&&(o.circularPathData.rightSmallArcRadius=i+o.width/2+l,o.circularPathData.rightLargeArcRadius=i+o.width/2+n*t+l),l+=e.width}),"bottom"==o.circularLinkType?(o.circularPathData.verticalFullExtent=Math.max(n,o.source.y1,o.target.y1)+a+o.circularPathData.verticalBuffer,o.circularPathData.verticalLeftInnerExtent=o.circularPathData.verticalFullExtent-o.circularPathData.leftLargeArcRadius,o.circularPathData.verticalRightInnerExtent=o.circularPathData.verticalFullExtent-o.circularPathData.rightLargeArcRadius):(o.circularPathData.verticalFullExtent=c-a-o.circularPathData.verticalBuffer,o.circularPathData.verticalLeftInnerExtent=o.circularPathData.verticalFullExtent+o.circularPathData.leftLargeArcRadius,o.circularPathData.verticalRightInnerExtent=o.circularPathData.verticalFullExtent+o.circularPathData.rightLargeArcRadius)}o.circularPathData.leftInnerExtent=o.circularPathData.sourceX+o.circularPathData.leftNodeBuffer,o.circularPathData.rightInnerExtent=o.circularPathData.targetX-o.circularPathData.rightNodeBuffer,o.circularPathData.leftFullExtent=o.circularPathData.sourceX+o.circularPathData.leftLargeArcRadius+o.circularPathData.leftNodeBuffer,o.circularPathData.rightFullExtent=o.circularPathData.targetX-o.circularPathData.rightLargeArcRadius-o.circularPathData.rightNodeBuffer}o.circular?o.path=function(e){return"top"==e.circularLinkType?"M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 0 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY-e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 0 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 0 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY-e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 0 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY:"M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 1 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY+e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 1 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 1 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY+e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 1 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY}(o):(m=(0,Q.ak)().source(function(e){return[e.source.x0+(e.source.x1-e.source.x0),e.y0]}).target(function(e){return[e.target.x0,e.y1]}),o.path=m(o))})}function R(e,t){return c(e)==c(t)?"bottom"==e.circularLinkType?O(e,t):x(e,t):c(t)-c(e)}function x(e,t){return e.y0-t.y0}function O(e,t){return t.y0-e.y0}function I(e,t){return e.y1-t.y1}function B(e,t){return t.y1-e.y1}function c(e){return e.target.column-e.source.column}function y(e){return e.target.x0-e.source.x1}function j(e,t){var s=T(e),n=y(t)/Math.tan(s);return"up"==u(e)?e.y1+n:e.y1-n}function _(e,t){var s=T(e),n=y(t)/Math.tan(s);return"up"==u(e)?e.y1-n:e.y1+n}function Z(e,t,n,o){e.links.forEach(function(i){if(!i.circular&&i.target.column-i.source.column>1){var a=i.source.column+1,c=i.target.column-1,r=1,l=c-a+1;for(r=1;a<=c;a++,r++)e.nodes.forEach(function(c){if(c.column==a){var u,h=r/(l+1),j=Math.pow(1-h,3),g=3*h*Math.pow(1-h,2),v=3*Math.pow(h,2)*(1-h),b=Math.pow(h,3),p=j*i.y0+g*i.y0+v*i.y1+b*i.y1,f=p-i.width/2,m=p+i.width/2;f>c.y0&&f<c.y1?(u=c.y1-f+10,u="bottom"==c.circularLinkType?u:-u,c=d(c,u,t,n),e.nodes.forEach(function(e){var i,a;s(e,o)!=s(c,o)&&e.column==c.column&&(i=e,(a=c).y0>i.y0&&a.y0<i.y1||a.y1>i.y0&&a.y1<i.y1||a.y0<i.y0&&a.y1>i.y1)&&d(e,u,t,n)})):(m>c.y0&&m<c.y1||f<c.y0&&m>c.y1)&&(u=m-c.y0+10,c=d(c,u,t,n),e.nodes.forEach(function(e){s(e,o)!=s(c,o)&&e.column==c.column&&e.y0<c.y1&&e.y1>c.y1&&d(e,u,t,n)}))}})}})}function d(e,t,n,s){return e.y0+t>=n&&e.y1+t<=s&&(e.y0=e.y0+t,e.y1=e.y1+t,e.targetLinks.forEach(function(e){e.y1=e.y1+t}),e.sourceLinks.forEach(function(e){e.y0=e.y0+t})),e}function m(e,t,n,o){e.nodes.forEach(function(i){o&&i.y+(i.y1-i.y0)>t&&(i.y=i.y-(i.y+(i.y1-i.y0)-t));var r,a=e.links.filter(function(e){return s(e.source,n)==s(i,n)}),c=a.length;c>1&&a.sort(function(e,t){if(!e.circular&&!t.circular){if(e.target.column==t.target.column)return e.y1-t.y1;if(!E(e,t))return e.y1-t.y1;if(e.target.column>t.target.column){var n=_(t,e);return e.y1-n}if(t.target.column>e.target.column)return _(e,t)-t.y1}return e.circular&&!t.circular?"top"==e.circularLinkType?-1:1:t.circular&&!e.circular?"top"==t.circularLinkType?1:-1:e.circular&&t.circular?e.circularLinkType===t.circularLinkType&&"top"==e.circularLinkType?e.target.column===t.target.column?e.target.y1-t.target.y1:t.target.column-e.target.column:e.circularLinkType===t.circularLinkType&&"bottom"==e.circularLinkType?e.target.column===t.target.column?t.target.y1-e.target.y1:e.target.column-t.target.column:"top"==e.circularLinkType?-1:1:void 0}),r=i.y0,a.forEach(function(e){e.y0=r+e.width/2,r+=e.width}),a.forEach(function(e,t){if("bottom"==e.circularLinkType){for(var n=t+1,s=0;n<c;n++)s+=a[n].width;e.y0=i.y1-s-e.width/2}})})}function p(e,t,n){e.nodes.forEach(function(t){var i,o=e.links.filter(function(e){return s(e.target,n)==s(t,n)}),a=o.length;a>1&&o.sort(function(e,t){if(!e.circular&&!t.circular){if(e.source.column==t.source.column)return e.y0-t.y0;if(!E(e,t))return e.y0-t.y0;if(t.source.column<e.source.column){var n=j(t,e);return e.y0-n}if(e.source.column<t.source.column)return j(e,t)-t.y0}return e.circular&&!t.circular?"top"==e.circularLinkType?-1:1:t.circular&&!e.circular?"top"==t.circularLinkType?1:-1:e.circular&&t.circular?e.circularLinkType===t.circularLinkType&&"top"==e.circularLinkType?e.source.column===t.source.column?e.source.y1-t.source.y1:e.source.column-t.source.column:e.circularLinkType===t.circularLinkType&&"bottom"==e.circularLinkType?e.source.column===t.source.column?e.source.y1-t.source.y1:t.source.column-e.source.column:"top"==e.circularLinkType?-1:1:void 0}),i=t.y0,o.forEach(function(e){e.y1=i+e.width/2,i+=e.width}),o.forEach(function(e,n){if("bottom"==e.circularLinkType){for(var s=n+1,i=0;s<a;s++)i+=o[s].width;e.y1=t.y1-i-e.width/2}})})}function E(e,t){return u(e)==u(t)}function u(e){return e.y0-e.y1>0?"up":"down"}function r(e,t){return s(e.source,t)==s(e.target,t)}},26800:function(e,t,n){"use strict";n.r(t),n.d(t,{sankey:function(){return w},sankeyCenter:function(){return O},sankeyJustify:function(){return c},sankeyLeft:function(){return _},sankeyLinkHorizontal:function(){return E},sankeyRight:function(){return h}});var l,s=n(84706),u=n(34712);function f(e){return e.target.depth}function _(e){return e.depth}function h(e,t){return t-1-e.height}function c(e,t){return e.sourceLinks.length?e.depth:t-1}function O(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?(0,s.SY)(e.sourceLinks,f)-1:0}function i(e){return function(){return e}}function p(e,t){return r(e.source,t.source)||e.index-t.index}function m(e,t){return r(e.target,t.target)||e.index-t.index}function r(e,t){return e.y0-t.y0}function o(e){return e.value}function a(e){return(e.y0+e.y1)/2}function g(e){return a(e.source)*e.value}function v(e){return a(e.target)*e.value}function b(e){return e.index}function j(e){return e.nodes}function y(e){return e.links}function d(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function w(){var h=0,n=0,f=1,l=1,_=24,t=8,w=b,E=c,O=j,x=y,C=32;function e(){var e={nodes:O.apply(null,arguments),links:x.apply(null,arguments)};return function(e){e.nodes.forEach(function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]});var t=(0,u.kH)(e.nodes,w);e.links.forEach(function(e,n){e.index=n;var s=e.source,o=e.target;"object"!=typeof s&&(s=e.source=d(t,s)),"object"!=typeof o&&(o=e.target=d(t,o)),s.sourceLinks.push(e),o.targetLinks.push(e)})}(e),function(e){e.nodes.forEach(function(e){e.value=Math.max((0,s.oh)(e.sourceLinks,o),(0,s.oh)(e.targetLinks,o))})}(e),function(e){for(s=e.nodes,t=[],n=0;s.length;++n,s=t,t=[])s.forEach(function(e){e.depth=n,e.sourceLinks.forEach(function(e){t.indexOf(e.target)<0&&t.push(e.target)})});for(s=e.nodes,t=[],n=0;s.length;++n,s=t,t=[])s.forEach(function(e){e.height=n,e.targetLinks.forEach(function(e){t.indexOf(e.source)<0&&t.push(e.source)})});var t,n,s,o=(f-h-_)/(n-1);e.nodes.forEach(function(e){e.x1=(e.x0=h+Math.max(0,Math.min(n-1,Math.floor(E.call(null,e,n))))*o)+_})}(e),function(e){i=(0,u.UJ)().key(function(e){return e.x0}).sortKeys(s.XE).entries(e.nodes).map(function(e){return e.values}),function(){var a,c=(0,s.kv)(i,function(e){return e.length}),r=.6666666666666666*(l-n)/(c-1);t>r&&(t=r),a=(0,s.SY)(i,function(e){return(l-n-(e.length-1)*t)/(0,s.oh)(e,o)}),i.forEach(function(e){e.forEach(function(e,t){e.y1=(e.y0=t)+e.value*a})}),e.links.forEach(function(e){e.width=e.value*a})}(),c();for(var i,d=1,h=C;h>0;--h)f(d*=.99),c(),m(d),c();function m(e){i.forEach(function(t){t.forEach(function(t){if(t.targetLinks.length){var n=((0,s.oh)(t.targetLinks,g)/(0,s.oh)(t.targetLinks,o)-a(t))*e;t.y0+=n,t.y1+=n}})})}function f(e){i.slice().reverse().forEach(function(t){t.forEach(function(t){if(t.sourceLinks.length){var n=((0,s.oh)(t.sourceLinks,v)/(0,s.oh)(t.sourceLinks,o)-a(t))*e;t.y0+=n,t.y1+=n}})})}function c(){i.forEach(function(e){var s,o,i,a=n,c=e.length;for(e.sort(r),i=0;i<c;++i)(o=a-(s=e[i]).y0)>0&&(s.y0+=o,s.y1+=o),a=s.y1+t;if((o=a-t-l)>0)for(a=s.y0-=o,s.y1-=o,i=c-2;i>=0;--i)(o=(s=e[i]).y1+t-a)>0&&(s.y0-=o,s.y1-=o),a=s.y0})}}(e),k(e),e}function k(e){e.nodes.forEach(function(e){e.sourceLinks.sort(m),e.targetLinks.sort(p)}),e.nodes.forEach(function(e){var t=e.y0,n=t;e.sourceLinks.forEach(function(e){e.y0=t+e.width/2,t+=e.width}),e.targetLinks.forEach(function(e){e.y1=n+e.width/2,n+=e.width})})}return e.update=function(e){return k(e),e},e.nodeId=function(t){return arguments.length?(w="function"==typeof t?t:i(t),e):w},e.nodeAlign=function(t){return arguments.length?(E="function"==typeof t?t:i(t),e):E},e.nodeWidth=function(t){return arguments.length?(_=+t,e):_},e.nodePadding=function(n){return arguments.length?(t=+n,e):t},e.nodes=function(t){return arguments.length?(O="function"==typeof t?t:i(t),e):O},e.links=function(t){return arguments.length?(x="function"==typeof t?t:i(t),e):x},e.size=function(t){return arguments.length?(h=n=0,f=+t[0],l=+t[1],e):[f-h,l-n]},e.extent=function(t){return arguments.length?(h=+t[0][0],f=+t[1][0],n=+t[0][1],l=+t[1][1],e):[[h,n],[f,l]]},e.iterations=function(t){return arguments.length?(C=+t,e):C},e}l=n(10132);function x(e){return[e.source.x1,e.y0]}function C(e){return[e.target.x0,e.y1]}function E(){return(0,l.ak)().source(x).target(C)}},33428:function(e,t,n){var s,o;(function(){var i={version:"3.8.0"},Zt=[].slice,_=function(e){return Zt.call(e)},u=self.document;function mn(e){return e&&(e.ownerDocument||e.document||e).documentElement}function A(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u)try{_(u.documentElement.childNodes)[0].nodeType}catch{_=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch{var Ve=this.Element.prototype,si=Ve.setAttribute,ni=Ve.setAttributeNS,bn=this.CSSStyleDeclaration.prototype,ei=bn.setProperty;Ve.setAttribute=function(e,t){si.call(this,e,t+"")},Ve.setAttributeNS=function(e,t,n){ni.call(this,e,t,n+"")},bn.setProperty=function(e,t,n){ei.call(this,e,t+"",n)}}function U(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function L(e){return null===e?NaN:+e}function O(e){return!isNaN(e)}function Cn(e){return{left:function(t,n,s,o){for(arguments.length<3&&(s=0),arguments.length<4&&(o=t.length);s<o;){var i=s+o>>>1;e(t[i],n)<0?s=i+1:o=i}return s},right:function(t,n,s,o){for(arguments.length<3&&(s=0),arguments.length<4&&(o=t.length);s<o;){var i=s+o>>>1;e(t[i],n)>0?o=i:s=i+1}return s}}}i.ascending=U,i.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},i.min=function(e,t){var n,o,s=-1,i=e.length;if(1===arguments.length){for(;++s<i;)if(null!=(n=e[s])&&n>=n){o=n;break}for(;++s<i;)null!=(n=e[s])&&o>n&&(o=n)}else{for(;++s<i;)if(null!=(n=t.call(e,e[s],s))&&n>=n){o=n;break}for(;++s<i;)null!=(n=t.call(e,e[s],s))&&o>n&&(o=n)}return o},i.max=function(e,t){var n,o,s=-1,i=e.length;if(1===arguments.length){for(;++s<i;)if(null!=(n=e[s])&&n>=n){o=n;break}for(;++s<i;)null!=(n=e[s])&&n>o&&(o=n)}else{for(;++s<i;)if(null!=(n=t.call(e,e[s],s))&&n>=n){o=n;break}for(;++s<i;)null!=(n=t.call(e,e[s],s))&&n>o&&(o=n)}return o},i.extent=function(e,t){var n,o,i,s=-1,a=e.length;if(1===arguments.length){for(;++s<a;)if(null!=(n=e[s])&&n>=n){o=i=n;break}for(;++s<a;)null!=(n=e[s])&&(o>n&&(o=n),i<n&&(i=n))}else{for(;++s<a;)if(null!=(n=t.call(e,e[s],s))&&n>=n){o=i=n;break}for(;++s<a;)null!=(n=t.call(e,e[s],s))&&(o>n&&(o=n),i<n&&(i=n))}return[o,i]},i.sum=function(e,t){var s,o=0,i=e.length,n=-1;if(1===arguments.length)for(;++n<i;)O(s=+e[n])&&(o+=s);else for(;++n<i;)O(s=+t.call(e,e[n],n))&&(o+=s);return o},i.mean=function(e,t){var s,i=0,a=e.length,n=-1,o=a;if(1===arguments.length)for(;++n<a;)O(s=L(e[n]))?i+=s:--o;else for(;++n<a;)O(s=L(t.call(e,e[n],n)))?i+=s:--o;if(o)return i/o},i.quantile=function(e,t){var o=(e.length-1)*t+1,n=Math.floor(o),s=+e[n-1],i=o-n;return i?s+i*(e[n]-s):s},i.median=function(e,t){var s,o=[],a=e.length,n=-1;if(1===arguments.length)for(;++n<a;)O(s=L(e[n]))&&o.push(s);else for(;++n<a;)O(s=L(t.call(e,e[n],n)))&&o.push(s);if(o.length)return i.quantile(o.sort(U),.5)},i.variance=function(e,t){var n,o,c=e.length,i=0,r=0,s=-1,a=0;if(1===arguments.length)for(;++s<c;)O(n=L(e[s]))&&(r+=(o=n-i)*(n-(i+=o/++a)));else for(;++s<c;)O(n=L(t.call(e,e[s],s)))&&(r+=(o=n-i)*(n-(i+=o/++a)));if(a>1)return r/(a-1)},i.deviation=function(){var e=i.variance.apply(this,arguments);return e&&Math.sqrt(e)},rt=Cn(U);function Ro(e){return e.length}i.bisectLeft=rt.left,i.bisect=i.bisectRight=rt.right,i.bisector=function(e){return Cn(1===e.length?function(t,n){return U(e(t),n)}:e)},i.shuffle=function(e,t,n){(s=arguments.length)<3&&(n=e.length,s<2&&(t=0));for(var o,i,s=n-t;s;)o=Math.random()*s--|0,i=e[s+t],e[s+t]=e[o+t],e[o+t]=i;return e},i.permute=function(e,t){for(var n=t.length,s=new Array(n);n--;)s[n]=e[t[n]];return s},i.pairs=function(e){for(var t=0,n=e.length-1,s=e[0],o=new Array(n<0?0:n);t<n;)o[t]=[s,s=e[++t]];return o},i.transpose=function(e){if(!(s=e.length))return[];for(var t,s,r,n=-1,o=i.min(e,Ro),a=new Array(o);++n<o;)for(t=-1,r=a[n]=new Array(s);++t<s;)r[t]=e[t][n];return a},i.zip=function(){return i.transpose(arguments)},i.keys=function(e){var n,t=[];for(n in e)t.push(n);return t},i.values=function(e){var n,t=[];for(n in e)t.push(e[n]);return t},i.entries=function(e){var n,t=[];for(n in e)t.push({key:n,value:e[n]});return t},i.merge=function(e){for(var t,n,i,s=e.length,a=-1,o=0;++a<s;)o+=e[a].length;for(n=new Array(o);--s>=0;)for(t=(i=e[s]).length;--t>=0;)n[--o]=i[t];return n},d=Math.abs;function Xn(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function k(){this._=Object.create(null)}i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var o,i=[],s=function(e){for(var t=1;e*t%1;)t*=10;return t}(d(n)),a=-1;if(e*=s,t*=s,(n*=s)<0)for(;(o=e+n*++a)>t;)i.push(o/s);else for(;(o=e+n*++a)<t;)i.push(o/s);return i},i.map=function(e,t){if(n=new k,e instanceof k)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var n,o,a,s=-1,i=e.length;if(1===arguments.length)for(;++s<i;)n.set(s,e[s]);else for(;++s<i;)n.set(t.call(e,o=e[s],s),o)}else for(a in e)n.set(a,e[a]);return n},es="__proto__",we="\0";function ae(e){return(e+="")===es||e[0]===we?we+e:e}function pe(e){return(e+="")[0]===we?e.slice(1):e}function is(e){return ae(e)in this._}function rs(e){return(e=ae(e))in this._&&delete this._[e]}function ds(){var t,e=[];for(t in this._)e.push(pe(t));return e}function us(){var t,e=0;for(t in this._)++e;return e}function js(){for(var e in this._)return!1;return!0}function jt(){this._=Object.create(null)}function m(e){return e}function Xs(e,t,n){return function(){var s=n.apply(t,arguments);return s===t?e:s}}function Et(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var s,n=0,o=Lt.length;n<o;++n)if(s=Lt[n]+t,s in e)return s}Xn(k,{has:is,get:function(e){return this._[ae(e)]},set:function(e,t){return this._[ae(e)]=t},remove:rs,keys:ds,values:function(){var t,e=[];for(t in this._)e.push(this._[t]);return e},entries:function(){var t,e=[];for(t in this._)e.push({key:pe(t),value:this._[t]});return e},size:us,empty:js,forEach:function(e){for(var t in this._)e.call(this,pe(t),this._[t])}}),i.nest=function(){var s,o,e={},t=[],a=[];function n(i,a,r){if(r>=t.length)return o?o.call(e,a):s?a.sort(s):a;for(var c,l,u,h,m=-1,f=a.length,p=t[r++],d=new k;++m<f;)(h=d.get(u=p(c=a[m])))?h.push(c):d.set(u,[c]);return i?(c=i(),l=function(e,t){c.set(e,n(i,t,r))}):(c={},l=function(e,t){c[e]=n(i,t,r)}),d.forEach(l),c}function r(e,n){if(n>=t.length)return e;var s=[],o=a[n++];return e.forEach(function(e,t){s.push({key:e,values:r(t,n)})}),o?s.sort(function(e,t){return o(e.key,t.key)}):s}return e.map=function(e,t){return n(t,e,0)},e.entries=function(e){return r(n(i.map,e,0),0)},e.key=function(n){return t.push(n),e},e.sortKeys=function(n){return a[t.length-1]=n,e},e.sortValues=function(t){return s=t,e},e.rollup=function(t){return o=t,e},e},i.set=function(e){if(t=new jt,e)for(var t,n=0,s=e.length;n<s;++n)t.add(e[n]);return t},Xn(jt,{has:is,add:function(e){return this._[ae(e+="")]=!0,e},remove:rs,values:ds,size:us,empty:js,forEach:function(e){for(var t in this._)e.call(this,pe(t))}}),i.behavior={},i.rebind=function(e,t){for(var n,s=1,o=arguments.length;++s<o;)e[n=arguments[s]]=Xs(e,t,t[n]);return e},Lt=["webkit","ms","moz","Moz","o","O"];function os(){}function Nt(){}function $n(e){var t=[],n=new k;function s(){for(var n,s=t,o=-1,i=s.length;++o<i;)(n=s[o].on)&&n.apply(this,arguments);return e}return s.on=function(s,o){var a,i=n.get(s);return arguments.length<2?i&&i.on:(i&&(i.on=null,t=t.slice(0,a=t.indexOf(i)).concat(t.slice(a+1)),n.remove(s)),o&&t.push(n.set(s,{on:o})),e)},s}function F(){i.event.preventDefault()}function Pt(){for(var t,e=i.event;t=e.sourceEvent;)e=t;return e}function It(e){for(var t=new Nt,n=0,s=arguments.length;++n<s;)t[arguments[n]]=$n(t);return t.of=function(n,s){return function(o){try{var a=o.sourceEvent=i.event;o.target=e,i.event=o,t[o.type].apply(n,s)}finally{i.event=a}}},t}i.dispatch=function(){for(var e=new Nt,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=$n(e);return e},Nt.prototype.on=function(e,t){var s=e.indexOf("."),n="";if(s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(2===arguments.length){if(t==null)for(e in this)this.hasOwnProperty(e)&&this[e].on(n,null);return this}},i.event=null,i.requote=function(e){return e.replace(On,"\\$&")},On=/[\\^$*+?|[\]().{}]/g,G={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function S(e){return G(e,a),e}var $t=function(e,t){return t.querySelector(e)},Wt=function(e,t){return t.querySelectorAll(e)},Fe=function(e,t){var n=e.matches||e[Et(e,"matchesSelector")];return Fe=function(e,t){return n.call(e,t)},Fe(e,t)};"function"==typeof Sizzle&&($t=function(e,t){return Sizzle(e,t)[0]||null},Wt=Sizzle,Fe=Sizzle.matchesSelector),i.selection=function(){return i.select(u.documentElement)},a=i.selection.prototype=[];function qt(e){return"function"==typeof e?e:function(){return $t(e,this)}}function fn(e){return"function"==typeof e?e:function(){return Wt(e,this)}}a.select=function(e){i=[],e=qt(e);for(var t,n,s,o,i,r,c,a=-1,l=this.length;++a<l;){i.push(n=[]),n.parentNode=(o=this[a]).parentNode;for(s=-1,c=o.length;++s<c;)(t=o[s])?(n.push(r=e.call(t,t.__data__,s,a)),r&&"__data__"in t&&(r.__data__=t.__data__)):n.push(null)}return S(i)},a.selectAll=function(e){o=[],e=fn(e);for(n=-1,i=this.length;++n<i;)for(var t,n,o,i,r,a=this[n],s=-1,c=a.length;++s<c;)(t=a[s])&&(o.push(r=_(e.call(t,t.__data__,s,n))),r.parentNode=t);return S(o)},be="http://www.w3.org/1999/xhtml",ge={svg:"http://www.w3.org/2000/svg",xhtml:be,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dn(e,t){return e=i.ns.qualify(e),t==null?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function ln(e){return e.trim().replace(/\s+/g," ")}function cn(e){return new RegExp("(?:^|\\s+)"+i.requote(e)+"(?:\\s+|$)","g")}function an(e){return(e+"").trim().split(/^|\s+/)}function on(e,t){var n=(e=an(e).map(di)).length;return"function"==typeof t?function(){for(var s=-1,o=t.apply(this,arguments);++s<n;)e[s](this,o)}:function(){for(var s=-1;++s<n;)e[s](this,t)}}function di(e){var t=cn(e);return function(n,s){if(o=n.classList)return s?o.add(e):o.remove(e);var o=n.getAttribute("class")||"";s?(t.lastIndex=0,t.test(o)||n.setAttribute("class",ln(o+" "+e))):n.setAttribute("class",ln(o.replace(t," ")))}}function en(e,t,n){return t==null?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}:function(){this.style.setProperty(e,t,n)}}function Jt(e,t){return t==null?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}:function(){this[e]=t}}function xn(e){return"function"==typeof e?e:(e=i.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===be&&t.documentElement.namespaceURI===be?t.createElement(e):t.createElementNS(n,e)}}function Zo(){var e=this.parentNode;e&&e.removeChild(this)}function Rt(e){return{__data__:e}}function Mn(e){return function(){return Fe(this,e)}}function ko(e){return arguments.length||(e=U),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function x(e,t){for(n=0,o=e.length;n<o;n++)for(var n,o,i,a=e[n],s=0,r=a.length;s<r;s++)(i=a[s])&&t(i,s,n);return e}function bs(e){return G(e,b),e}i.ns={prefix:ge,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),ge.hasOwnProperty(n)?{space:ge[n],local:e}:e}},a.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=i.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(dn(t,e[t]));return this}return this.each(dn(e,t))},a.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var s=this.node(),o=(e=an(e)).length,n=-1;if(t=s.classList){for(;++n<o;)if(!t.contains(e[n]))return!1}else for(t=s.getAttribute("class");++n<o;)if(!cn(e[n]).test(t))return!1;return!0}for(t in e)this.each(on(t,e[t]));return this}return this.each(on(e,t))},a.style=function(e,t,n){var o,s=arguments.length;if(s<3){if("string"!=typeof e){for(n in s<2&&(t=""),e)this.each(en(n,e[n],t));return this}if(s<2)return o=this.node(),A(o).getComputedStyle(o,null).getPropertyValue(e);n=""}return this.each(en(e,t,n))},a.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(Jt(t,e[t]));return this}return this.each(Jt(e,t))},a.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=t??""}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},a.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=t??""}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},a.append=function(e){return e=xn(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},a.insert=function(e,t){return e=xn(e),t=qt(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},a.remove=function(){return this.each(Zo)},a.data=function(e,t){if(n=-1,o=this.length,!arguments.length){for(e=new Array(o=(s=this[0]).length);++n<o;)(a=s[n])&&(e[n]=a.__data__);return e}function r(e,n){var s,o,a,d,f,g,r=e.length,p=n.length,v=Math.min(r,p),h=new Array(p),u=new Array(p),m=new Array(r);if(t){d=new k,g=new Array(r);for(s=-1;++s<r;)(o=e[s])&&(d.has(f=t.call(o,o.__data__,s))?m[s]=o:d.set(f,o),g[s]=f);for(s=-1;++s<p;)(o=d.get(f=t.call(n,a=n[s],s)))?!0!==o&&(h[s]=o,o.__data__=a):u[s]=Rt(a),d.set(f,!0);for(s=-1;++s<r;)s in g&&!0!==d.get(g[s])&&(m[s]=e[s])}else{for(s=-1;++s<v;)o=e[s],a=n[s],o?(o.__data__=a,h[s]=o):u[s]=Rt(a);for(;s<p;++s)u[s]=Rt(n[s]);for(;s<r;++s)m[s]=e[s]}u.update=h,u.parentNode=h.parentNode=m.parentNode=e.parentNode,c.push(u),i.push(h),l.push(m)}var n,s,o,a,c=bs([]),i=S([]),l=S([]);if("function"==typeof e)for(;++n<o;)r(s=this[n],e.call(s,s.parentNode.__data__,n));else for(;++n<o;)r(s=this[n],e);return i.enter=function(){return c},i.exit=function(){return l},i},a.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},a.filter=function(e){i=[],"function"!=typeof e&&(e=Mn(e));for(var t,n,o,i,a,r,s=0,c=this.length;s<c;s++){i.push(a=[]),a.parentNode=(o=this[s]).parentNode;for(t=0,r=o.length;t<r;t++)(n=o[t])&&e.call(n,n.__data__,t,s)&&a.push(n)}return S(i)},a.order=function(){for(n=-1,i=this.length;++n<i;)for(var t,n,i,s=this[n],o=s.length-1,e=s[o];--o>=0;)(t=s[o])&&(e&&e!==t.nextSibling&&e.parentNode.insertBefore(t,e),e=t);return this},a.sort=function(e){e=ko.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},a.each=function(e){return x(this,function(t,n,s){e.call(t,t.__data__,n,s)})},a.call=function(e){var t=_(arguments);return e.apply(t[0]=this,t),this},a.empty=function(){return!this.node()},a.node=function(){for(e=0,s=this.length;e<s;e++)for(var e,n,s,o=this[e],t=0,i=o.length;t<i;t++)if(n=o[t],n)return n;return null},a.size=function(){var e=0;return x(this,function(){++e}),e},b=[];function Es(e,t,n){var a,s="__on"+e,o=e.indexOf("."),r=Ks;o>0&&(e=e.slice(0,o)),a=je.get(e);function c(){var t=this[s];t&&(this.removeEventListener(e,t,t.$),delete this[s])}return a&&(e=a,r=Js),o?t?function(){var o=r(t,_(arguments));c.call(this),this.addEventListener(e,this[s]=o,o.$=n),o._=t}:c:t?os:function(){var t,n,s,o=new RegExp("^__on([^.]+)"+i.requote(e)+"$");for(t in this)(s=t.match(o))&&(n=this[t],this.removeEventListener(s[1],n,n.$),delete this[t])}}i.selection.enter=bs,i.selection.enter.prototype=b,b.append=a.append,b.empty=a.empty,b.node=a.node,b.call=a.call,b.size=a.size,b.select=function(e){for(var t,n,s,o,a,c,l,r=[],i=-1,d=this.length;++i<d;){c=(n=this[i]).update,r.push(s=[]),s.parentNode=n.parentNode;for(t=-1,l=n.length;++t<l;)(o=n[t])?(s.push(c[t]=a=e.call(n.parentNode,o.__data__,t,i)),a.__data__=o.__data__):s.push(null)}return S(r)},b.insert=function(e,t){var n,s,o;return arguments.length<2&&(s=this,t=function(e,t,i){var a,r=s[i].update,c=r.length;for(i!=o&&(o=i,n=0),t>=n&&(n=t+1);!(a=r[n])&&++n<c;);return a}),a.insert.call(this,e,t)},i.select=function(e){var t;return"string"==typeof e?(t=[$t(e,u)]).parentNode=u.documentElement:(t=[e]).parentNode=mn(e),S([t])},i.selectAll=function(e){var t;return"string"==typeof e?(t=_(Wt(e,u))).parentNode=u.documentElement:(t=_(e)).parentNode=null,S([t])},a.on=function(e,t,n){var s=arguments.length;if(s<3){if("string"!=typeof e){for(n in s<2&&(t=!1),e)this.each(Es(n,e[n],t));return this}if(s<2)return(s=this.node()["__on"+e])&&s._;n=!1}return this.each(Es(e,t,n))},je=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ks(e,t){return function(n){var s=i.event;i.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{i.event=s}}}function Js(e,t){var n=Ks(e,t);return function(e){var t=this,s=e.relatedTarget;s&&(s===t||8&s.compareDocumentPosition(t))||n.call(t,e)}}u&&je.forEach(function(e){"on"+e in u&&je.remove(e)}),Rs=0;function xe(e){var n,a,t=".dragsuppress-"+ ++Rs,o="click"+t,s=i.select(A(e)).on("touchmove"+t,F).on("dragstart"+t,F).on("selectstart"+t,F);return(R==null&&(R=!("onselectstart"in e)&&Et(e.style,"userSelect")),R)&&(n=mn(e).style,a=n[R],n[R]="none"),function(e){if(s.on(t,null),R&&(n[R]=a),e){var i=function(){s.on(o,null)};s.on(o,function(){F(),i()},!0),setTimeout(i,0)}}}i.mouse=function(e){return yt(e,Pt())},Ce=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function yt(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n,o,a,r,s=e.ownerSVGElement||e;return s.createSVGPoint?(n=s.createSVGPoint(),Ce<0&&(o=A(e),(o.scrollX||o.scrollY)&&(a=(s=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),Ce=!a.f&&!a.e,s.remove())),Ce?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]):(r=e.getBoundingClientRect(),[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop])}function oo(){return i.event.changedTouches[0].identifier}i.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=Pt().changedTouches),t)for(var o,s=0,i=t.length;s<i;++s)if((o=t[s]).identifier===n)return yt(e,o)},i.behavior.drag=function(){var n=It(t,"drag","dragstart","dragend"),e=null,o=s(os,i.mouse,A,"mousemove","mouseup"),a=s(oo,i.touch,m,"touchmove","touchend");function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function s(t,s,o,a,r){return function(){var m=this,p=i.event.target.correspondingElement||i.event.target,h=m.parentNode,f=n.of(m,arguments),g=0,c=t(),d=".drag"+(c==null?"":"-"+c),v=i.select(o(p)).on(a+d,function(){var t,n,e=s(h,c);e&&(t=e[0]-l[0],n=e[1]-l[1],g|=t|n,l=e,f({type:"drag",x:e[0]+u[0],y:e[1]+u[1],dx:t,dy:n}))}).on(r+d,function(){s(h,c)&&(v.on(a+d,null).on(r+d,null),b(g),f({type:"dragend"}))}),b=xe(p),l=s(h,c),u=e?[(u=e.apply(m,arguments)).x-l[0],u.y-l[1]]:[0,0];f({type:"dragstart"})}}return t.origin=function(n){return arguments.length?(e=n,t):e},i.rebind(t,n,"on")},i.touches=function(e,t){return arguments.length<2&&(t=Pt().touches),t?_(t).map(function(t){var n=yt(e,t);return n.identifier=t.identifier,n}):[]};var a,l,d,b,T,z,R,V,$,W,q,G,Q,Z,rt,es,we,Lt,On,be,ge,je,Rs,Ce,r=1e-6,ts=r*r,C=Math.PI,X=2*C,Mo=X-r,w=C/2,Zn=C/180,lt=180/C,Te,it,Xe,We,_e,ie,ue,ke,Ee,Oe,qe,Ot,oe,Ht,de,Bt,Vt,De,Ke,Vn,Ft,ps,gs,Us,Ds,ee,Me,ct,at,Ie,tt,Qe,sn,tn,Ue;function Fn(e){return e>1?w:e<-1?-w:Math.asin(e)}function An(e){return((e=Math.exp(e))+1/e)/2}$=Math.SQRT2,i.interpolateZoom=function(e,t){var o,l,d=e[0],u=e[1],n=e[2],p=t[0],g=t[1],s=t[2],c=p-d,r=g-u,a=c*c+r*r;if(a<ts)o=Math.log(s/n)/$,l=function(e){return[d+e*c,u+e*r,n*Math.exp($*e*o)]};else{var h=Math.sqrt(a),m=(s*s-n*n+4*a)/(2*n*2*h),f=(s*s-n*n-4*a)/(2*s*2*h),i=Math.log(Math.sqrt(m*m+1)-m),v=Math.log(Math.sqrt(f*f+1)-f);o=(v-i)/$,l=function(e){var t,s=e*o,a=An(i),l=n/(2*h)*(a*(t=$*s+i,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(i));return[d+l*c,u+l*r,n*a/An($*s+i)]}}return l.duration=1e3*o,l},i.behavior.zoom=function(){var n,c,d,g,y,_,w,O,C,e={x:0,y:0,k:1},h=[960,500],m=Xe,f=250,M=0,b="mousedown.zoom",S="mousemove.zoom",k="mouseup.zoom",j="touchstart.zoom",o=It(t,"zoomstart","zoom","zoomend");function t(e){e.on(b,T).on(it+".zoom",N).on("dblclick.zoom",L).on(j,D)}function l(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function p(t){e.k=Math.max(m[0],Math.min(m[1],t))}function v(t,n){n=function(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}(n),e.x+=t[0]-n[0],e.y+=t[1]-n[1]}function E(s,o,a,r){s.__chart__={x:e.x,y:e.y,k:e.k},p(Math.pow(2,r)),v(n=o,a),s=i.select(s),f>0&&(s=s.transition().duration(f)),s.call(t.event)}function x(){c&&c.domain(_.range().map(function(t){return(t-e.x)/e.k}).map(_.invert)),g&&g.domain(y.range().map(function(t){return(t-e.y)/e.k}).map(y.invert))}function r(e){M++||e({type:"zoomstart"})}function a(t){x(),t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function s(e){--M||(e({type:"zoomend"}),n=null)}function T(){var e=this,t=o.of(e,arguments),n=0,c=i.select(A(e)).on(S,function(){n=1,v(i.mouse(e),d),a(t)}).on(k,function(){c.on(S,null).on(k,null),u(n),s(t)}),d=l(i.mouse(e)),u=xe(e);Q.call(e),r(t)}function D(){var f,t=this,c=o.of(t,arguments),n={},d=0,u=".zoom-"+i.event.changedTouches[0].identifier,x="touchmove"+u,_="touchend"+u,g=[],y=i.select(t),O=xe(t);function h(){var s=i.touches(t);return f=e.k,s.forEach(function(e){e.identifier in n&&(n[e.identifier]=l(e))}),s}function m(){c=i.event.target,i.select(c).on(x,C).on(_,k),g.push(c);for(var s,o,r,c,l=i.event.changedTouches,a=0,p=l.length;a<p;++a)n[l[a].identifier]=null;if(o=h(),r=Date.now(),1===o.length)r-w<500&&(s=o[0],E(t,s,n[s.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1),F()),w=r;else if(o.length>1){s=o[0];var m=o[1],f=s[0]-m[0],u=s[1]-m[1];d=f*f+u*u}}function C(){u=i.touches(t),Q.call(t);for(var e,s,o,r,l,u,m,h=0,g=u.length;h<g;++h,r=null)if(s=u[h],r=n[s.identifier]){if(o)break;e=s,o=r}r&&(l=(l=s[0]-e[0])*l+(l=s[1]-e[1])*l,m=d&&Math.sqrt(l/d),e=[(e[0]+s[0])/2,(e[1]+s[1])/2],o=[(o[0]+r[0])/2,(o[1]+r[1])/2],p(m*f)),w=null,v(e,o),a(c)}function k(){if(i.event.touches.length){for(var a,t=i.event.changedTouches,e=0,o=t.length;e<o;++e)delete n[t[e].identifier];for(a in n)return void h()}i.selectAll(g).on(u,null),y.on(b,T).on(j,D),O(),s(c)}m(),r(c),y.on(b,null).on(j,m)}function N(){var t=o.of(this,arguments);d?clearTimeout(d):(Q.call(this),C=l(n=O||i.mouse(this)),r(t)),d=setTimeout(function(){d=null,s(t)},50),F(),p(Math.pow(2,.002*Te())*e.k),v(n,C),a(t)}function L(){var t=i.mouse(this),n=Math.log(e.k)/Math.LN2;E(this,t,l(t),i.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return it||(it="onwheel"in u?(Te=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(Te=function(){return i.event.wheelDelta},"mousewheel"):(Te=function(){return-i.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=o.of(this,arguments),c=e;z?i.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1},r(t)}).tween("zoom:zoom",function(){var s=h[0],l=h[1],o=n?n[0]:s/2,r=n?n[1]:l/2,d=i.interpolateZoom([(o-e.x)/e.k,(r-e.y)/e.k,s/e.k],[(o-c.x)/c.k,(r-c.y)/c.k,s/c.k]);return function(n){var i=d(n),c=s/i[2];this.__chart__=e={x:o-i[0]*c,y:r-i[1]*c,k:c},a(t)}}).each("interrupt.zoom",function(){s(t)}).each("end.zoom",function(){s(t)}):(this.__chart__=e,r(t),a(t),s(t))})},t.translate=function(n){return arguments.length?(e={x:+n[0],y:+n[1],k:e.k},x(),t):[e.x,e.y]},t.scale=function(n){return arguments.length?(e={x:e.x,y:e.y,k:null},p(+n),x(),t):e.k},t.scaleExtent=function(e){return arguments.length?(m=e==null?Xe:[+e[0],+e[1]],t):m},t.center=function(e){return arguments.length?(O=e&&[+e[0],+e[1]],t):O},t.size=function(e){return arguments.length?(h=e&&[+e[0],+e[1]],t):h},t.duration=function(e){return arguments.length?(f=+e,t):f},t.x=function(n){return arguments.length?(c=n,_=n.copy(),e={x:0,y:0,k:1},t):c},t.y=function(n){return arguments.length?(g=n,y=n.copy(),e={x:0,y:0,k:1},t):g},i.rebind(t,o,"on")},Xe=[0,1/0];function N(){}function y(e,t,n){return this instanceof y?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof y?new y(e.h,e.s,e.l):Ln(""+e,Un,y):new y(e,t,n)}i.color=N,N.prototype.toString=function(){return this.rgb()+""},i.hsl=y,We=y.prototype=new N;function Ge(e,t,n){var s,o;function i(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?s+(o-s)*e/60:e<180?o:e<240?s+(o-s)*(240-e)/60:s}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,s=2*(n=n<0?0:n>1?1:n)-(o=n<=.5?n*(1+t):n+t-n*t),new h(i(e+120),i(e),i(e-120))}function g(e,t,n){return this instanceof g?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof g?new g(e.h,e.c,e.l):function(e,t,n){return e>0?new g(Math.atan2(n,t)*lt,Math.sqrt(t*t+n*n),e):new g(NaN,NaN,e)}(e instanceof p?e.l:(e=Kn((e=i.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new g(e,t,n)}We.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new y(this.h,this.s,this.l/e)},We.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new y(this.h,this.s,e*this.l)},We.rgb=function(){return Ge(this.h,this.s,this.l)},i.hcl=g,_e=g.prototype=new N;function Gt(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new p(n,Math.cos(e*=Zn)*t,Math.sin(e)*t)}function p(e,t,n){return this instanceof p?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof p?new p(e.l,e.a,e.b):e instanceof g?Gt(e.h,e.c,e.l):Kn((e=h(e)).r,e.g,e.b):new p(e,t,n)}_e.brighter=function(e){return new g(this.h,this.c,Math.min(100,this.l+Be*(arguments.length?e:1)))},_e.darker=function(e){return new g(this.h,this.c,Math.max(0,this.l-Be*(arguments.length?e:1)))},_e.rgb=function(){return Gt(this.h,this.c,this.l).rgb()},i.lab=p;var Be=18,rn=.95047,pn=1,gn=1.08883,et=p.prototype=new N;function vn(e,t,n){var s=(e+16)/116,o=s+t/500,i=s-n/200;return new h(ot(3.2404542*(o=nt(o)*rn)-1.5371385*(s=nt(s)*pn)-.4985314*(i=nt(i)*gn)),ot(-.969266*o+1.8760108*s+.041556*i),ot(.0556434*o-.2040259*s+1.0572252*i))}function nt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function st(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ot(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function h(e,t,n){return this instanceof h?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof h?new h(e.r,e.g,e.b):Ln(""+e,h,Ge):new h(e,t,n)}function kn(e){return new h(e>>16,e>>8&255,255&e)}function Re(e){return kn(e)+""}et.brighter=function(e){return new p(Math.min(100,this.l+Be*(arguments.length?e:1)),this.a,this.b)},et.darker=function(e){return new p(Math.max(0,this.l-Be*(arguments.length?e:1)),this.a,this.b)},et.rgb=function(){return vn(this.l,this.a,this.b)},i.rgb=h,ie=h.prototype=new N;function P(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Ln(e,t,n){var s,o,c,i=0,a=0,r=0;if(c=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(o=c[2].split(","),c[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return t(ft(o[0]),ft(o[1]),ft(o[2]))}return(s=ue.get(e))?t(s.r,s.g,s.b):(e==null||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(i=(3840&s)>>4,i|=i>>4,a=240&s,a|=a>>4,r=15&s,r|=r<<4):7===e.length&&(i=(16711680&s)>>16,a=(65280&s)>>8,r=255&s)),t(i,a,r))}function Un(e,t,n){var i,c,a=Math.min(e/=255,t/=255,n/=255),s=Math.max(e,t,n),o=s-a,r=(s+a)/2;return o?(c=r<.5?o/(s+a):o/(2-s-a),i=e==s?(t-n)/o+(t<n?6:0):t==s?(n-e)/o+2:(e-t)/o+4,i*=60):(i=NaN,c=r>0&&r<1?0:i),new y(i,c,r)}function Kn(e,t,n){var o=st((.4124564*(e=mt(e))+.3575761*(t=mt(t))+.1804375*(n=mt(n)))/rn),s=st((.2126729*e+.7151522*t+.072175*n)/pn);return p(116*s-16,500*(o-s),200*(s-st((.0193339*e+.119192*t+.9503041*n)/gn)))}function mt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ft(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}ie.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var n=this.r,s=this.g,o=this.b,t=30;return n||s||o?(n&&n<t&&(n=t),s&&s<t&&(s=t),o&&o<t&&(o=t),new h(Math.min(255,n/e),Math.min(255,s/e),Math.min(255,o/e))):new h(t,t,t)},ie.darker=function(e){return new h((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},ie.hsl=function(){return Un(this.r,this.g,this.b)},ie.toString=function(){return"#"+P(this.r)+P(this.g)+P(this.b)},ue=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function c(e){return"function"==typeof e?e:function(){return e}}function vt(e){return function(t,n,s){return 2===arguments.length&&"function"==typeof n&&(s=n,n=null),Se(t,n,e,s)}}function Se(e,t,n,s){var o={},c=i.dispatch("beforesend","progress","load","error"),r={},a=new XMLHttpRequest,l=null;function d(){var t,e=a.status;if(!e&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(a)||e>=200&&e<300||304===e){try{t=n.call(o,a)}catch(e){return void c.error.call(o,e)}c.load.call(o,t)}else c.error.call(o,a)}return self.XDomainRequest&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(e)&&(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=d:a.onreadystatechange=function(){a.readyState>3&&d()},a.onprogress=function(e){var t=i.event;i.event=e;try{c.progress.call(o,a)}finally{i.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?r[e]:(t==null?delete r[e]:r[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=e==null?null:e+"",o):t},o.responseType=function(e){return arguments.length?(l=e,o):l},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(_(arguments)))}}),o.send=function(n,s,i){if(2===arguments.length&&"function"==typeof s&&(i=s,s=null),a.open(n,e,!0),t==null||"accept"in r||(r.accept=t+",*/*"),a.setRequestHeader)for(var d in r)a.setRequestHeader(d,r[d]);return t!=null&&a.overrideMimeType&&a.overrideMimeType(t),l!=null&&(a.responseType=l),i!=null&&o.on("error",i).on("load",function(e){i(null,e)}),c.beforesend.call(o,a),a.send(s??null),o},o.abort=function(){return a.abort(),o},i.rebind(o,c,"on"),s==null?o:o.get(function(e){return 1===e.length?function(t,n){e(t==null?n:null)}:e}(s))}ue.forEach(function(e,t){ue.set(e,kn(t))}),i.functor=c,i.xhr=vt(m),i.dsv=function(e,t){var c=new RegExp('["'+e+`
]`),a=e.charCodeAt(0);function n(e,n,s){arguments.length<3&&(s=n,n=null);var a=Se(e,t,n==null?o:i(n),s);return a.row=function(e){return arguments.length?a.response(null==(n=e)?o:i(e)):n},a}function o(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function r(t){return t.map(s).join(e)}function s(e){return c.test(e)?'"'+e.replace(/"/g,'""')+'"':e}return n.parse=function(e,t){var s;return n.parseRows(e,function(e,n){if(s)return s(e,n-1);var o=function(t){for(var s={},o=e.length,n=0;n<o;++n)s[e[n]]=t[n];return s};s=t?function(e,n){return t(o(e),n)}:o})},n.parseRows=function(e,t){var s,o,i,l={},c={},d=[],r=e.length,n=0,h=0;function u(){if(n>=r)return c;if(s)return s=!1,l;var t,i,d,o=n;if(34===e.charCodeAt(o)){for(t=o;t++<r;)if(34===e.charCodeAt(t)){if(34!==e.charCodeAt(t+1))break;++t}return n=t+2,13===(i=e.charCodeAt(t+1))?(s=!0,10===e.charCodeAt(t+2)&&++n):10===i&&(s=!0),e.slice(o+1,t).replace(/""/g,'"')}for(;n<r;){if(d=1,10===(i=e.charCodeAt(n++)))s=!0;else if(13===i)s=!0,10===e.charCodeAt(n)&&(++n,++d);else if(i!==a)continue;return e.slice(o,n-d)}return e.slice(o)}for(;(i=u())!==c;){for(o=[];i!==l&&i!==c;)o.push(i),i=u();t&&null==(o=t(o,h++))||d.push(o)}return d},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new jt,o=[];return t.forEach(function(e){for(var t in e)i.has(t)||o.push(i.add(t))}),[o.map(s).join(e)].concat(t.map(function(t){return o.map(function(e){return s(t[e])}).join(e)})).join(`
`)},n.formatRows=function(e){return e.map(r).join(`
`)},n},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("	","text/tab-separated-values"),Ot=this[Et(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function ye(e,t,n){var s,o=arguments.length;return o<2&&(t=0),o<3&&(n=Date.now()),s={c:e,t:n+t,n:null},Ee?Ee.n=s:ke=s,Ee=s,Oe||(qe=clearTimeout(qe),Oe=1,Ot(Ct)),s}function Ct(){var t=$s(),e=Ls()-t;e>24?(isFinite(e)&&(clearTimeout(qe),qe=setTimeout(Ct,e)),Oe=0):(Oe=1,Ot(Ct))}function $s(){for(var t=Date.now(),e=ke;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ls(){for(var t,e=ke,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ke=e.n;return Ee=t,n}function K(e){return e[0]}function te(e){return e[1]}function vs(e){for(var n,i,a,r=e.length,s=[0,1],t=2,o=2;o<r;o++){for(;t>1&&(n=e[s[t-2]],i=e[s[t-1]],a=e[o],(i[0]-n[0])*(a[1]-n[1])-(i[1]-n[1])*(a[0]-n[0])<=0);)--t;s[t++]=o}return s.slice(0,t)}function wo(e,t){return e[0]-t[0]||e[1]-t[1]}i.timer=function(){ye.apply(this,arguments)},i.timer.flush=function(){$s(),Ls()},i.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},i.geom={},i.geom.hull=function(e){var n=K,s=te;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t,h=c(n),u=c(s),l=e.length,o=[],d=[];for(t=0;t<l;t++)o.push([+h.call(this,e[t],t),+u.call(this,e[t],t),t]);for(o.sort(wo),t=0;t<l;t++)d.push([o[t][0],-o[t][1]]);var a=vs(o),i=vs(d),m=i[0]===a[0],f=i[i.length-1]===a[a.length-1],r=[];for(t=a.length-1;t>=0;--t)r.push(e[o[a[t]][2]]);for(t=+m;t<i.length-f;++t)r.push(e[o[i[t]][2]]);return r}return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(s=e,t):s},t},i.geom.polygon=function(e){return G(e,oe),e},oe=i.geom.polygon.prototype=[];function zt(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Dt(e,t,n,s){var o=e[0],a=n[0],r=t[0]-o,c=s[0]-a,i=e[1],l=n[1],d=t[1]-i,u=s[1]-l,h=(c*(i-l)-u*(o-a))/(u*r-c*d);return[o+h*r,i+h*d]}function ss(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}oe.area=function(){for(var t,n=-1,s=this.length,e=this[s-1],o=0;++n<s;)t=e,e=this[n],o+=t[1]*e[0]-t[0]*e[1];return.5*o},oe.centroid=function(e){var n,s,o=-1,i=this.length,a=0,r=0,t=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++o<i;)n=t,t=this[o],s=n[0]*t[1]-t[0]*n[1],a+=(n[0]+t[0])*s,r+=(n[1]+t[1])*s;return[a*e,r*e]},oe.clip=function(e){for(var t,n,o,i,a,r,c=ss(e),l=-1,d=this.length-ss(this),s=this[d-1];++l<d;){for(i=e.slice(),e.length=0,t=this[l],n=i[(r=i.length-c)-1],a=-1;++a<r;)zt(o=i[a],s,t)?(zt(n,s,t)||e.push(Dt(n,o,s,t)),e.push(o)):zt(n,s,t)&&e.push(Dt(n,o,s,t)),n=o;c&&e.push(e[0]),s=t}return e},Bt=[],Vt=[];function Jo(){fe(this),this.edge=this.site=this.circle=null}function yn(e){var t=Bt.pop()||new Jo;return t.site=e,t}function Ut(e){I(e),V.remove(e),Bt.push(e),fe(e)}function ti(e){var t,n,o,u,h=e.circle,c=h.x,l=h.cy,m={x:c,y:l},i=e.P,a=e.N,s=[e];Ut(e);for(n=i;n.circle&&d(c-n.circle.x)<r&&d(l-n.circle.cy)<r;)i=n.P,s.unshift(n),Ut(n),n=i;s.unshift(n),I(n);for(t=a;t.circle&&d(c-t.circle.x)<r&&d(l-t.circle.cy)<r;)a=t.N,s.push(t),Ut(t),t=a;s.push(t),I(t),u=s.length;for(o=1;o<u;++o)t=s[o],n=s[o-1],he(t.edge,n.site,t.site,m);n=s[0],(t=s[u-1]).edge=re(n.site,t.site,null,m),H(n),H(t)}function oi(e){for(var t,n,g,v,_=e.x,p=e.y,s=V._;s;)if((v=hn(s,p)-_)>r)s=s.L;else{if(!((g=_-li(s,p))>r)){v>-r?(n=s.P,t=s):g>-r?(n=s,t=s.N):n=t=s;break}if(!s.R){n=s;break}s=s.R}if(o=yn(e),V.insert(n,o),n||t){if(n===t)return I(n),t=yn(n.site),V.insert(o,t),o.edge=t.edge=re(n.site,o.site),H(n),void H(t);if(t){I(n),I(t);var o,d=n.site,h=d.x,m=d.y,l=e.x-h,c=e.y-m,u=t.site,a=u.x-h,i=u.y-m,b=2*(l*i-c*a),j=l*l+c*c,y=a*a+i*i,f={x:(i*j-c*y)/b+h,y:(l*y-a*j)/b+m};he(t.edge,d,u,f),o.edge=re(d,e,null,f),t.edge=re(e,u,null,f),H(n),H(t)}else o.edge=re(n.site,o.site)}}function hn(e,t){var r,s=e.site,o=s.x,h=s.y,a=h-t;if(!a)return o;if(r=e.P,!r)return-1/0;var c=(s=r.site).x,u=s.y,n=u-t;if(!n)return c;var i=c-o,l=1/a-1/n,d=i/n;return l?(-d+Math.sqrt(d*d-2*l*(i*i/(-2*n)-u+n/2+h-a/2)))/l+o:(o+c)/2}function li(e,t){var n,s=e.N;return s?hn(s,t):(n=e.site,n.y===t?n.x:1/0)}function qs(e){this.site=e,this.edges=[]}function Qt(e,t){return t.angle-e.angle}function fi(){fe(this),this.x=this.y=this.arc=this.site=this.cy=null}function H(e){if(m=e.P,h=e.N,m&&h){var v=m.site,g=e.site,d=h.site;if(v!==d){var t,o,h,m,l=g.x,c=g.y,i=v.x-l,a=v.y-c,r=d.x-l,u=2*(i*(s=d.y-c)-a*r);if(!(u>=-ts)){var b=i*i+a*a,j=r*r+s*s,f=(s*b-a*j)/u,p=(i*j-r*b)/u,s=p+c,n=Vt.pop()||new fi;n.arc=e,n.site=g,n.x=f+l,n.y=s+Math.sqrt(f*f+p*p),n.cy=s,e.circle=n;for(o=null,t=de._;t;)if(n.y<t.y||n.y===t.y&&n.x<=t.x){if(!t.L){o=t.P;break}t=t.L}else{if(!t.R){o=t;break}t=t.R}de.insert(o,n),o||(Ht=n)}}}}function I(e){var t=e.circle;t&&(t.P||(Ht=t.N),de.remove(t),Vt.push(t),fe(t),e.circle=null)}function mi(e,t){if(i=e.b,i)return!0;var s,o,i,n=e.a,l=t[0][0],d=t[1][0],a=t[0][1],r=t[1][1],p=e.l,g=e.r,h=p.x,m=p.y,f=g.x,u=g.y,c=(h+f)/2,v=(m+u)/2;if(u===m){if(c<l||c>=d)return;if(h>f){if(n){if(n.y>=r)return}else n={x:c,y:a};i={x:c,y:r}}else{if(n){if(n.y<a)return}else n={x:c,y:r};i={x:c,y:a}}}else if(o=v-(s=(h-f)/(u-m))*c,s<-1||s>1)if(h>f){if(n){if(n.y>=r)return}else n={x:(a-o)/s,y:a};i={x:(r-o)/s,y:r}}else{if(n){if(n.y<a)return}else n={x:(r-o)/s,y:r};i={x:(a-o)/s,y:a}}else if(m<u){if(n){if(n.x>=d)return}else n={x:l,y:s*l+o};i={x:d,y:s*d+o}}else{if(n){if(n.x<l)return}else n={x:d,y:s*d+o};i={x:l,y:s*l+o}}return e.a=n,e.b=i,!0}function nn(e,t){this.l=e,this.r=t,this.a=this.b=null}function re(e,t,n,s){var o=new nn(e,t);return W.push(o),n&&he(o,e,t,n),s&&he(o,t,e,s),T[e.i].edges.push(new me(o,e,t)),T[t.i].edges.push(new me(o,t,e)),o}function he(e,t,n,s){e.a||e.b?e.l===n?e.b=s:e.a=s:(e.a=s,e.l=t,e.r=n)}function me(e,t,n){var s=e.a,o=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(o.x-s.x,s.y-o.y):Math.atan2(s.x-o.x,o.y-s.y)}function Ye(){this._=null}function fe(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function se(e,t){var n=t,s=t.R,o=n.U;o?o.L===n?o.L=s:o.R=s:e._=s,s.U=o,n.U=s,n.R=s.L,n.R&&(n.R.U=n),s.L=n}function J(e,t){var n=t,s=t.L,o=n.U;o?o.L===n?o.L=s:o.R=s:e._=s,s.U=o,n.U=s,n.L=s.R,n.L&&(n.L.U=n),s.R=n}function un(e){for(;e.L;)e=e.L;return e}function Yt(e,t){var s,o,i,a,n=e.sort(ci).pop();for(W=[],T=new Array(e.length),V=new Ye,de=new Ye;;)if(s=Ht,n&&(!s||n.y<s.y||n.y===s.y&&n.x<s.x))n.x===o&&n.y===i||(T[n.i]=new qs(n),oi(n),o=n.x,i=n.y),n=e.pop();else{if(!s)break;ti(s.arc)}return t&&(function(e){for(var t,o,i,a,c,s=W,l=(c=e[0][0],o=e[0][1],i=e[1][0],a=e[1][1],function(e){var t,h=e.a,m=e.b,d=h.x,u=h.y,n=0,s=1,r=m.x-d,l=m.y-u;if(t=c-d,r||!(t>0)){if(t/=r,r<0){if(t<n)return;t<s&&(s=t)}else if(r>0){if(t>s)return;t>n&&(n=t)}if(t=i-d,r||!(t<0)){if(t/=r,r<0){if(t>s)return;t>n&&(n=t)}else if(r>0){if(t<n)return;t<s&&(s=t)}if(t=o-u,l||!(t>0)){if(t/=l,l<0){if(t<n)return;t<s&&(s=t)}else if(l>0){if(t>s)return;t>n&&(n=t)}if(t=a-u,l||!(t<0)){if(t/=l,l<0){if(t>s)return;t>n&&(n=t)}else if(l>0){if(t<n)return;t<s&&(s=t)}return n>0&&(e.a={x:d+n*r,y:u+n*l}),s<1&&(e.b={x:d+s*r,y:u+s*l}),e}}}}}),n=s.length;n--;)(!mi(t=s[n],e)||!l(t)||d(t.a.x-t.b.x)<r&&d(t.a.y-t.b.y)<r)&&(t.a=t.b=null,s.splice(n,1))}(t),function(e){for(var t,n,s,o,i,a,m,f,p,g,v,y,_,w,h=e[0][0],u=e[1][0],l=e[0][1],c=e[1][1],b=T,j=b.length;j--;)if((i=b[j])&&i.prepare())for(f=(p=i.edges).length,a=0;a<f;)s=(g=p[a].end()).x,o=g.y,t=(v=p[++a%f].start()).x,n=v.y,(d(s-t)>r||d(o-n)>r)&&(p.splice(a,0,new me((y=i.site,_=g,w=d(s-h)<r&&c-o>r?{x:h,y:d(t-h)<r?n:c}:d(o-c)<r&&u-s>r?{x:d(n-c)<r?t:u,y:c}:d(s-u)<r&&o-l>r?{x:u,y:d(t-u)<r?n:l}:d(o-l)<r&&s-h>r?{x:d(n-l)<r?t:h,y:l}:null,m=void 0,(m=new nn(y,null)).a=_,m.b=w,W.push(m),m),i.site,null)),++f)}(t)),a={cells:T,edges:W},V=de=W=T=null,a}function ci(e,t){return t.y-e.y||t.x-e.x}qs.prototype.prepare=function(){for(var n,e=this.edges,t=e.length;t--;)(n=e[t].edge).b&&n.a||e.splice(t,1);return e.sort(Qt),e.length},me.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ye.prototype={insert:function(e,t){var n,s,o;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=un(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(s=n.U).L?(o=s.R)&&o.C?(n.C=o.C=!1,s.C=!0,e=s):(e===n.R&&(se(this,n),n=(e=n).U),n.C=!1,s.C=!0,J(this,s)):(o=s.L)&&o.C?(n.C=o.C=!1,s.C=!0,e=s):(e===n.L&&(J(this,n),n=(e=n).U),n.C=!1,s.C=!0,se(this,s)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,s,a,n=e.U,i=e.L,o=e.R;if(s=i?o?un(o):i:o,n?n.L===e?n.L=s:n.R=s:this._=s,i&&o?(a=s.C,s.C=e.C,s.L=i,i.U=s,s!==o?(n=s.U,s.U=e.U,e=s.R,n.L=e,s.R=o,o.U=s):(s.U=n,n=s,e=s.R)):(a=e.C,e=s),e&&(e.U=n),!a)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===n.L){if((t=n.R).C&&(t.C=!1,n.C=!0,se(this,n),t=n.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,J(this,t),t=n.R),t.C=n.C,n.C=t.R.C=!1,se(this,n),e=this._;break}}else if((t=n.L).C&&(t.C=!1,n.C=!0,J(this,n),t=n.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,se(this,t),t=n.L),t.C=n.C,n.C=t.L.C=!1,J(this,n),e=this._;break}t.C=!0,e=n,n=n.U}while(!e.C)e&&(e.C=!1)}}},i.geom.voronoi=function(e){var s=K,o=te,a=s,l=o,n=q;if(e)return t(e);function t(e){var r=new Array(e.length),t=n[0][0],s=n[0][1],o=n[1][0],a=n[1][1];return Yt(i(e),n).cells.forEach(function(n,i){var l=n.edges,c=n.site;(r[i]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=t&&c.x<=o&&c.y>=s&&c.y<=a?[[t,a],[o,a],[o,s],[t,s]]:[]).point=e[i]}),r}function i(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/r)*r,y:Math.round(l(e,t)/r)*r,i:t}})}return t.links=function(e){return Yt(i(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return Yt(i(e)).cells.forEach(function(n,s){for(var a,r,d,u,c=n.site,l=n.edges.sort(Qt),h=-1,m=l.length,o=l[m-1].edge,i=o.l===c?o.r:o.l;++h<m;)a=i,i=(o=l[h].edge).l===c?o.r:o.l,s<a.i&&s<i.i&&(d=a,u=i,((r=c).x-u.x)*(d.y-r.y)-(r.x-d.x)*(u.y-r.y)<0)&&t.push([e[s],e[a.i],e[i.i]])}),t},t.x=function(e){return arguments.length?(a=c(s=e),t):s},t.y=function(e){return arguments.length?(l=c(o=e),t):o},t.clipExtent=function(e){return arguments.length?(n=e??q,t):n===q?null:n},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):n===q?null:n&&n[1]},t},q=[[-1e6,-1e6],[1e6,1e6]];function gi(e){return e.x}function ii(e){return e.y}function ne(e,t,n,s,o,i){if(!e(t,n,s,o,i)){var r=.5*(n+o),c=.5*(s+i),a=t.nodes;a[0]&&ne(e,a[0],n,s,r,c),a[1]&&ne(e,a[1],r,s,o,c),a[2]&&ne(e,a[2],n,c,r,i),a[3]&&ne(e,a[3],r,c,o,i)}}function Kt(e,t){e=i.rgb(e),t=i.rgb(t);var n=e.r,s=e.g,o=e.b,a=t.r-n,r=t.g-s,c=t.b-o;return function(e){return"#"+P(Math.round(n+a*e))+P(Math.round(s+r*e))+P(Math.round(o+c*e))}}function jn(e,t){var n,o={},s={};for(n in e)n in t?o[n]=D(e[n],t[n]):s[n]=e[n];for(n in t)n in e||(s[n]=t[n]);return function(e){for(n in o)s[n]=o[n](e);return s}}function E(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _n(e,t){var o,i,c,r=De.lastIndex=Ke.lastIndex=0,s=-1,n=[],a=[];for(e+="",t+="";(c=De.exec(e))&&(i=Ke.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),n[s]?n[s]+=o:n[++s]=o),(c=c[0])===(i=i[0])?n[s]?n[s]+=i:n[++s]=i:(n[++s]=null,a.push({i:s,x:E(c,i)})),r=Ke.lastIndex;return r<t.length&&(o=t.slice(r),n[s]?n[s]+=o:n[++s]=o),n.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var o,s=0;s<t;++s)n[(o=a[s]).i]=o.x(e);return n.join("")})}i.geom.delaunay=function(e){return i.geom.voronoi().triangles(e)},i.geom.quadtree=function(e,t,n,s,o){var l,a=K,r=te;if(l=arguments.length)return a=gi,r=ii,3===l&&(o=n,s=t,n=t=0),i(e);function i(e){var i,u,h,m,f,p,g,v,b,j,y,_,O,x,k=c(a),E=c(r);if(t!=null)p=t,h=n,f=s,m=o;else if(f=m=-(p=h=1/0),y=[],j=[],_=e.length,l)for(i=0;i<_;++i)(u=e[i]).x<p&&(p=u.x),u.y<h&&(h=u.y),u.x>f&&(f=u.x),u.y>m&&(m=u.y),y.push(u.x),j.push(u.y);else for(i=0;i<_;++i)v=+k(u=e[i],i),b=+E(u,i),v<p&&(p=v),b<h&&(h=b),v>f&&(f=v),b>m&&(m=b),y.push(v),j.push(b);O=f-p,x=m-h;function C(e,t,n,s,o,i,a,r){if(!isNaN(n)&&!isNaN(s))if(e.leaf){var u,c=e.x,l=e.y;c!=null?d(c-n)+d(l-s)<.01?w(e,t,n,s,o,i,a,r):(u=e.point,e.x=e.y=e.point=null,w(e,u,c,l,o,i,a,r),w(e,t,n,s,o,i,a,r)):(e.x=n,e.y=s,e.point=t)}else w(e,t,n,s,o,i,a,r)}function w(e,t,n,s,o,i,a,r){var c=.5*(o+a),l=.5*(i+r),d=n>=c,u=s>=l,h=u<<1|d;e.leaf=!1,d?o=c:a=c,u?i=l:r=l,C(e=e.nodes[h]||(e.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,s,o,i,a,r)}if(O>x?m=h+O:f=p+x,g={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){C(g,e,+k(e,++i),+E(e,i),p,h,f,m)}},g.visit=function(e){ne(e,g,p,h,f,m)},g.find=function(e){return function(e,t,n,s,o,i,a){var r,c=1/0;return function e(l,d,u,h,m){if(!(d>i||u>a||h<s||m<o)){if(j=l.point){var j,y=t-l.x,_=n-l.y,b=y*y+_*_;b<c&&(v=Math.sqrt(c=b),s=t-v,o=n-v,i=t+v,a=n+v,r=j)}for(var v,w=l.nodes,f=.5*(d+h),p=.5*(u+m),g=(n>=p)<<1|t>=f,O=g+4;g<O;++g)if(l=w[3&g])switch(3&g){case 0:e(l,d,u,f,p);break;case 1:e(l,f,u,h,p);break;case 2:e(l,d,p,f,m);break;case 3:e(l,f,p,h,m)}}}(e,s,o,i,a),r}(g,e[0],e[1],p,h,f,m)},i=-1,t==null){for(;++i<_;)C(g,e[i],y[i],j[i],p,h,f,m);--i}else e.forEach(g.add);return y=j=e=u=null,g}return i.x=function(e){return arguments.length?(a=e,i):a},i.y=function(e){return arguments.length?(r=e,i):r},i.extent=function(e){return arguments.length?(e==null?t=n=s=o=null:(t=+e[0][0],n=+e[0][1],s=+e[1][0],o=+e[1][1]),i):t==null?null:[[t,n],[s,o]]},i.size=function(e){return arguments.length?(e==null?t=n=s=o=null:(t=n=0,s=+e[0],o=+e[1]),i):t==null?null:[s-t,o-n]},i},i.interpolateRgb=Kt,i.interpolateObject=jn,i.interpolateNumber=E,i.interpolateString=_n,De=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ke=new RegExp(De.source,"g");function D(e,t){for(var n,s=i.interpolators.length;--s>=0&&!(n=i.interpolators[s](e,t)););return n}function Pe(e,t){var n,o=[],s=[],a=e.length,r=t.length,i=Math.min(e.length,t.length);for(n=0;n<i;++n)o.push(D(e[n],t[n]));for(;n<a;++n)s[n]=e[n];for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=o[n](e);return s}}i.interpolate=D,i.interpolators=[function(e,t){var n=typeof t;return("string"===n?ue.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Kt:_n:t instanceof N?Kt:Array.isArray(t)?Pe:"object"===n&&isNaN(t)?jn:E)(e,t)}],i.interpolateArray=Pe;var En=function(){return m},Qo=i.map({linear:En,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Go},cubic:function(){return Yo},sin:function(){return $o},exp:function(){return Vo},circle:function(){return Bo},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/X*Math.asin(1/e):(e=1,n=t/4),function(s){return 1+e*Math.pow(2,-10*s)*Math.sin((s-n)*X/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Io}}),Xo=i.map({in:m,out:Sn,"in-out":Ns,"out-in":function(e){return Ns(Sn(e))}});function Sn(e){return function(t){return 1-e(1-t)}}function Ns(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Go(e){return e*e}function Yo(e){return e*e*e}function Uo(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function $o(e){return 1-Math.cos(e*w)}function Vo(e){return Math.pow(2,10*(e-1))}function Bo(e){return 1-Math.sqrt(1-e*e)}function Io(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Pn(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Hn(e){var s,r,c,t=[e.a,e.b],n=[e.c,e.d],i=Bn(t),a=In(t,n),o=Bn(((s=n)[0]+=(r=-a)*(c=t)[0],s[1]+=r*c[1],s))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,a*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*lt,this.translate=[e.e,e.f],this.scale=[i,o],this.skew=o?Math.atan2(a,o)*lt:0}function In(e,t){return e[0]*t[0]+e[1]*t[1]}function Bn(e){var t=Math.sqrt(In(e,e));return t&&(e[0]/=t,e[1]/=t),t}i.ease=function(e){var o,t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,s=t>=0?e.slice(t+1):"in";return n=Qo.get(n)||En,s=Xo.get(s)||m,o=s(n.apply(null,Zt.call(arguments,1))),function(e){return e<=0?0:e>=1?1:o(e)}},i.interpolateHcl=function(e,t){e=i.hcl(e),t=i.hcl(t);var s=e.h,o=e.c,r=e.l,n=t.h-s,a=t.c-o,c=t.l-r;return isNaN(a)&&(a=0,o=isNaN(o)?t.c:o),isNaN(n)?(n=0,s=isNaN(s)?t.h:s):n>180?n-=360:n<-180&&(n+=360),function(e){return Gt(s+n*e,o+a*e,r+c*e)+""}},i.interpolateHsl=function(e,t){e=i.hsl(e),t=i.hsl(t);var s=e.h,o=e.s,r=e.l,n=t.h-s,a=t.s-o,c=t.l-r;return isNaN(a)&&(a=0,o=isNaN(o)?t.s:o),isNaN(n)?(n=0,s=isNaN(s)?t.h:s):n>180?n-=360:n<-180&&(n+=360),function(e){return Ge(s+n*e,o+a*e,r+c*e)+""}},i.interpolateLab=function(e,t){e=i.lab(e),t=i.lab(t);var n=e.l,s=e.a,o=e.b,a=t.l-n,r=t.a-s,c=t.b-o;return function(e){return vn(n+a*e,s+r*e,o+c*e)+""}},i.interpolateRound=Pn,i.transform=function(e){var t=u.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(e){if(e!=null){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Hn(n?n.matrix:Vn)})(e)},Hn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"},Vn={a:1,b:0,c:0,d:1,e:0,f:0};function B(e){return e.length?e.pop()+",":""}function Wn(e,t){var n=[],s=[];return e=i.transform(e),t=i.transform(t),function(e,t,n,s){if(e[0]!==t[0]||e[1]!==t[1]){var o=n.push("translate(",null,",",null,")");s.push({i:o-4,x:E(e[0],t[0])},{i:o-2,x:E(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,s),function(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(B(n)+"rotate(",null,")")-2,x:E(e,t)})):t&&n.push(B(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,s),function(e,t,n,s){e!==t?s.push({i:n.push(B(n)+"skewX(",null,")")-2,x:E(e,t)}):t&&n.push(B(n)+"skewX("+t+")")}(e.skew,t.skew,n,s),function(e,t,n,s){if(e[0]!==t[0]||e[1]!==t[1]){var o=n.push(B(n)+"scale(",null,",",null,")");s.push({i:o-4,x:E(e[0],t[0])},{i:o-2,x:E(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(B(n)+"scale("+t+")")}(e.scale,t.scale,n,s),e=t=null,function(e){for(var t,o=-1,i=s.length;++o<i;)n[(t=s[o]).i]=t.x(e);return n.join("")}}function Ho(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Po(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Lo(e){for(var i,t=e.source,n=e.target,o=function(e,t){if(e===t)return e;for(var s=Yn(e),o=Yn(t),n=s.pop(),i=o.pop(),a=null;n===i;)a=n,n=s.pop(),i=o.pop();return a}(t,n),s=[t];t!==o;)t=t.parent,s.push(t);for(i=s.length;n!==o;)s.splice(i,0,n),n=n.parent;return s}function Yn(e){for(var n=[],t=e.parent;t!=null;)n.push(e),e=t,t=t.parent;return n.push(e),n}function No(e){e.fixed|=2}function Do(e){e.fixed&=-7}function zo(e){e.fixed|=4,e.px=e.x,e.py=e.y}function To(e){e.fixed&=-5}function Jn(e,t,n){if(o=0,i=0,e.charge=0,!e.leaf)for(var s,o,i,a,r=e.nodes,l=r.length,c=-1;++c<l;)null!=(s=r[c])&&(Jn(s,t,n),e.charge+=s.charge,o+=s.charge*s.cx,i+=s.charge*s.cy);e.point&&(e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5),a=t*n[e.point.index],e.charge+=e.pointCharge=a,o+=a*e.point.x,i+=a*e.point.y),e.cx=o/e.charge,e.cy=i/e.charge}i.interpolateTransform=Wn,i.layout={},i.layout.bundle=function(){return function(e){for(var t=[],n=-1,s=e.length;++n<s;)t.push(Lo(e[n]));return t}},i.layout.chord=function(){var t,n,s,o,a,r,c,e={},l=0;function d(){var e,d,h,f,O,b={},v=[],_=i.range(n),y=[];for(t=[],o=[],f=0,e=-1;++e<n;){for(d=0,h=-1;++h<n;)d+=s[e][h];v.push(d),y.push(i.range(n)),f+=d}for(a&&_.sort(function(e,t){return a(v[e],v[t])}),r&&y.forEach(function(e,t){e.sort(function(e,n){return r(s[t][e],s[t][n])})}),f=(X-l*n)/f,d=0,e=-1;++e<n;){for(O=d,h=-1;++h<n;){var p,g,m=_[e],j=y[m][h],w=s[m][j],x=d,C=d+=w*f;b[m+"-"+j]={index:m,subindex:j,startAngle:x,endAngle:C,value:w}}o[m]={index:m,startAngle:O,endAngle:d,value:v[m]},d+=l}for(e=-1;++e<n;)for(h=e-1;++h<n;)p=b[e+"-"+h],g=b[h+"-"+e],(p.value||g.value)&&t.push(p.value<g.value?{source:g,target:p}:{source:p,target:g});c&&u()}function u(){t.sort(function(e,t){return c((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return e.matrix=function(i){return arguments.length?(n=(s=i)&&s.length,t=o=null,e):s},e.padding=function(n){return arguments.length?(l=n,t=o=null,e):l},e.sortGroups=function(n){return arguments.length?(a=n,t=o=null,e):a},e.sortSubgroups=function(n){return arguments.length?(r=n,t=null,e):r},e.sortChords=function(n){return arguments.length?(c=n,t&&u(),e):c},e.chords=function(){return t||d(),t},e.groups=function(){return o||d(),o},e},i.layout.force=function(){var n,d,h,f,g,v,e={},l=i.dispatch("start","tick","end"),a=[1,1],u=.9,c=Fo,r=So,o=-30,p=Ao,b=.1,j=.64,t=[],s=[];function y(e){return function(t,n,s,o){if(t.point!==e){var a,r=t.cx-e.x,c=t.cy-e.y,l=o-n,i=r*r+c*c;if(l*l/j<i)return i<p&&(a=t.charge/i,e.px-=r*a,e.py-=c*a),!0;t.point&&i&&i<p&&(a=t.pointCharge/i,e.px-=r*a,e.py-=c*a)}return!t.charge}}function _(t){t.px=i.event.x,t.py=i.event.y,e.resume()}return e.tick=function(){if((n*=.99)<.005)return d=null,l.end({type:"end",alpha:n=0}),!0;var e,r,c,m,p,v,j,_,O,w=t.length,x=s.length;for(r=0;r<x;++r)m=(e=s[r]).source,(_=(p=(j=e.target).x-m.x)*p+(v=j.y-m.y)*v)&&(p*=_=n*f[r]*((_=Math.sqrt(_))-g[r])/_,v*=_,j.x-=p*(c=m.weight+j.weight?m.weight/(m.weight+j.weight):.5),j.y-=v*c,m.x+=p*(c=1-c),m.y+=v*c);if((c=n*b)&&(p=a[0]/2,v=a[1]/2,r=-1,c))for(;++r<w;)(e=t[r]).x+=(p-e.x)*c,e.y+=(v-e.y)*c;if(o)for(Jn(O=i.geom.quadtree(t),n,h),r=-1;++r<w;)(e=t[r]).fixed||O.visit(y(e));for(r=-1;++r<w;)(e=t[r]).fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*u,e.y-=(e.py-(e.py=e.y))*u);l.tick({type:"tick",alpha:n})},e.nodes=function(n){return arguments.length?(t=n,e):t},e.links=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(a=t,e):a},e.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,e):c},e.distance=e.linkDistance,e.linkStrength=function(t){return arguments.length?(r="function"==typeof t?t:+t,e):r},e.friction=function(t){return arguments.length?(u=+t,e):u},e.charge=function(t){return arguments.length?(o="function"==typeof t?t:+t,e):o},e.chargeDistance=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e.gravity=function(t){return arguments.length?(b=+t,e):b},e.theta=function(t){return arguments.length?(j=t*t,e):Math.sqrt(j)},e.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(d.c=null,d.t=NaN,d=null,l.end({type:"end",alpha:n=0})):t>0&&(l.start({type:"start",alpha:n=t}),d=ye(e.tick)),e):n},e.start=function(){var n,i,l,d=t.length,u=s.length,p=a[0],v=a[1];for(n=0;n<d;++n)(i=t[n]).index=n,i.weight=0;for(n=0;n<u;++n)"number"==typeof(i=s[n]).source&&(i.source=t[i.source]),"number"==typeof i.target&&(i.target=t[i.target]),++i.source.weight,++i.target.weight;for(n=0;n<d;++n)i=t[n],isNaN(i.x)&&(i.x=m("x",p)),isNaN(i.y)&&(i.y=m("y",v)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(g=[],"function"==typeof c)for(n=0;n<u;++n)g[n]=+c.call(this,s[n],n);else for(n=0;n<u;++n)g[n]=c;if(f=[],"function"==typeof r)for(n=0;n<u;++n)f[n]=+r.call(this,s[n],n);else for(n=0;n<u;++n)f[n]=r;if(h=[],"function"==typeof o)for(n=0;n<d;++n)h[n]=+o.call(this,t[n],n);else for(n=0;n<d;++n)h[n]=o;function m(e,t){if(!l){for(l=new Array(d),o=0;o<d;++o)l[o]=[];for(o=0;o<u;++o)i=s[o],l[i.source.index].push(i.target),l[i.target.index].push(i.source)}for(var i,a,r=l[n],o=-1,c=r.length;++o<c;)if(!isNaN(a=r[o][e]))return a;return Math.random()*t}return e.resume()},e.resume=function(){return e.alpha(.1)},e.stop=function(){return e.alpha(0)},e.drag=function(){if(v||(v=i.behavior.drag().origin(m).on("dragstart.force",No).on("drag.force",_).on("dragend.force",Do)),!arguments.length)return v;this.on("mouseover.force",zo).on("mouseout.force",To).call(v)},i.rebind(e,l,"on")};var Fo=20,So=1,Ao=1/0;function ce(e,t){return i.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Oo,e}function le(e,t){for(var n,s,o=[e];null!=(e=o.pop());)if(t(e),(s=e.children)&&(n=s.length))for(;--n>=0;)o.push(s[n])}function j(e,t){for(var n,s,a,o=[e],i=[];null!=(e=o.pop());)if(i.push(e),(n=e.children)&&(a=n.length))for(s=-1;++s<a;)o.push(n[s]);for(;null!=(e=i.pop());)t(e)}function Eo(e){return e.children}function Co(e){return e.value}function xo(e,t){return t.value-e.value}function Oo(e){return i.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}i.layout.hierarchy=function(){var n=xo,s=Eo,t=Co;function e(o){var i,a,r,c,l=[o],d=[];for(o.depth=0;null!=(i=l.pop());)if(d.push(i),(a=s.call(e,i,i.depth))&&(r=a.length)){for(;--r>=0;)l.push(c=a[r]),c.parent=i,c.depth=i.depth+1;t&&(i.value=0),i.children=a}else t&&(i.value=+t.call(e,i,i.depth)||0),delete i.children;return j(o,function(e){var s,o;n&&(s=e.children)&&s.sort(n),t&&(o=e.parent)&&(o.value+=e.value)}),d}return e.sort=function(t){return arguments.length?(n=t,e):n},e.children=function(t){return arguments.length?(s=t,e):s},e.value=function(n){return arguments.length?(t=n,e):t},e.revalue=function(n){return t&&(le(n,function(e){e.children&&(e.value=0)}),j(n,function(n){var s;n.children||(n.value=+t.call(e,n,n.depth)||0),(s=n.parent)&&(s.value+=n.value)})),n},e},i.layout.partition=function(){var n=i.layout.hierarchy(),e=[1,1];function s(e,t,n,o){var a,r,c,l,i=e.children;if(e.x=t,e.y=e.depth*o,e.dx=n,e.dy=o,i&&(r=i.length)){a=-1;for(n=e.value?n/e.value:0;++a<r;)s(c=i[a],t,l=c.value*n,o),t+=l}}function o(e){var s,i,t=e.children,n=0;if(t&&(i=t.length))for(s=-1;++s<i;)n=Math.max(n,o(t[s]));return 1+n}function t(t,i){var a=n.call(this,t,i);return s(a[0],0,e[0],e[1]/o(a[0])),a}return t.size=function(n){return arguments.length?(e=n,t):e},ce(t,n)},i.layout.pie=function(){var a=Number,t=Ft,n=0,s=X,o=0;function e(r){var h,l=r.length,c=r.map(function(t,n){return+a.call(e,t,n)}),d=+("function"==typeof n?n.apply(this,arguments):n),u=("function"==typeof s?s.apply(this,arguments):s)-d,m=Math.min(Math.abs(u)/l,+("function"==typeof o?o.apply(this,arguments):o)),f=m*(u<0?-1:1),p=i.sum(c),b=p?(u-l*f)/p:0,g=i.range(l),v=[];return t!=null&&g.sort(t===Ft?function(e,t){return c[t]-c[e]}:function(e,n){return t(r[e],r[n])}),g.forEach(function(e){v[e]={data:r[e],value:h=c[e],startAngle:d,endAngle:d+=h*b+f,padAngle:m}}),v}return e.value=function(t){return arguments.length?(a=t,e):a},e.sort=function(n){return arguments.length?(t=n,e):t},e.startAngle=function(t){return arguments.length?(n=t,e):n},e.endAngle=function(t){return arguments.length?(s=t,e):s},e.padAngle=function(t){return arguments.length?(o=t,e):o},e},Ft={};function no(e){return e.x}function yo(e){return e.y}function jo(e,t,n){e.y0=t,e.y=n}i.layout.stack=function(){var r=m,n=Mt,s=St,t=jo,o=no,a=yo;function e(c,l){if(!(p=c.length))return c;var d,m,p,g,h=c.map(function(t,n){return r.call(e,t,n)}),u=h.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),f=n.call(e,u,l),h=i.permute(h,f),u=i.permute(u,f),v=s.call(e,u,l),b=h[0].length;for(d=0;d<b;++d)for(t.call(e,h[0][d],g=v[d],u[0][d][1]),m=1;m<p;++m)t.call(e,h[m][d],g+=u[m-1][d][1],u[m][d][1]);return c}return e.values=function(t){return arguments.length?(r=t,e):r},e.order=function(t){return arguments.length?(n="function"==typeof t?t:ps.get(t)||Mt,e):n},e.offset=function(t){return arguments.length?(s="function"==typeof t?t:gs.get(t)||St,e):s},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(n){return arguments.length?(t=n,e):t},e},ps=i.map({"inside-out":function(e){var t,n,s=e.length,o=e.map(go),a=e.map(fo),u=i.range(s).sort(function(e,t){return o[e]-o[t]}),r=0,c=0,l=[],d=[];for(n=0;n<s;++n)t=u[n],r<c?(r+=a[t],l.push(t)):(c+=a[t],d.push(t));return d.reverse().concat(l)},reverse:function(e){return i.range(e.length).reverse()},default:Mt}),gs=i.map({silhouette:function(e){var t,n,s,c=e.length,i=e[0].length,a=[],o=0,r=[];for(t=0;t<i;++t){for(s=0,n=0;s<c;s++)n+=e[s][t][1];n>o&&(o=n),a.push(n)}for(t=0;t<i;++t)r[t]=(o-a[t])/2;return r},wiggle:function(e){var t,n,s,o,i,a,r,l,d,h=e.length,u=e[0],m=u.length,c=[];for(c[0]=a=i=0,t=1;t<m;++t){for(n=0,o=0;n<h;++n)o+=e[n][t][1];for(n=0,d=0,r=u[t][0]-u[t-1][0];n<h;++n){for(s=0,l=(e[n][t][1]-e[n][t-1][1])/(2*r);s<n;++s)l+=(e[s][t][1]-e[s][t-1][1])/r;d+=l*e[n][t][1]}c[t]=a-=o?d/o*r:0,a<i&&(i=a)}for(t=0;t<m;++t)c[t]-=i;return c},expand:function(e){var t,n,s,o=e.length,i=e[0].length,r=1/o,a=[];for(n=0;n<i;++n){for(t=0,s=0;t<o;t++)s+=e[t][n][1];if(s)for(t=0;t<o;t++)e[t][n][1]/=s;else for(t=0;t<o;t++)e[t][n][1]=r}for(n=0;n<i;++n)a[n]=0;return a},zero:St});function Mt(e){return i.range(e.length)}function St(e){for(var t=-1,s=e[0].length,n=[];++t<s;)n[t]=0;return n}function go(e){for(var n,t=1,s=0,o=e[0][1],i=e.length;t<i;++t)(n=e[t][1])>o&&(s=t,o=n);return s}function fo(e){return e.reduce(mo,0)}function mo(e,t){return e+t[1]}function ho(e,t){return Os(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Os(e,t){for(var n=-1,s=+e[0],i=(e[1]-s)/t,o=[];++n<=t;)o[n]=i*n+s;return o}function uo(e){return[i.min(e),i.max(e)]}function io(e,t){return e.value-t.value}function At(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ks(e,t){e._pack_next=t,t._pack_prev=e}function As(e,t){var n=t.x-e.x,s=t.y-e.y,o=e.r+t.r;return.999*o*o>n*n+s*s}function Ss(e){if((o=e.children)&&(c=o.length)){var t,n,s,o,i,a,r,c,d=1/0,v=-1/0,u=1/0,h=-1/0;if(o.forEach(so),(n=o[0]).x=-n.r,n.y=0,l(n),c>1&&((s=o[1]).x=s.r,s.y=0,l(s),c>2))for(zs(n,s,t=o[2]),l(t),At(n,t),n._pack_prev=t,At(t,s),s=n._pack_next,i=3;i<c;i++){zs(n,s,t=o[i]);var m=0,f=1,p=1;for(a=s._pack_next;a!==s;a=a._pack_next,f++)if(As(a,t)){m=1;break}if(1==m)for(r=n._pack_prev;r!==a._pack_prev&&!As(r,t);r=r._pack_prev,p++);m?(f<p||f==p&&s.r<n.r?ks(n,s=a):ks(n=r,s),i--):(At(n,t),s=t,l(t))}var b=(d+v)/2,j=(u+h)/2,g=0;for(i=0;i<c;i++)(t=o[i]).x-=b,t.y-=j,g=Math.max(g,t.r+Math.sqrt(t.x*t.x+t.y*t.y));e.r=g,o.forEach(to)}function l(e){d=Math.min(e.x-e.r,d),v=Math.max(e.x+e.r,v),u=Math.min(e.y-e.r,u),h=Math.max(e.y+e.r,h)}}function so(e){e._pack_next=e._pack_prev=e}function to(e){delete e._pack_next,delete e._pack_prev}function Ts(e,t,n,s){if(o=e.children,e.x=t+=s*e.x,e.y=n+=s*e.y,e.r*=s,o)for(var o,i=-1,a=o.length;++i<a;)Ts(o[i],t,n,s)}function zs(e,t,n){var s=e.r+n.r,o=t.x-e.x,i=t.y-e.y;if(s&&(o||i)){var a=t.r+n.r,r=o*o+i*i,c=.5+((s*=s)-(a*=a))/(2*r),l=Math.sqrt(Math.max(0,2*a*(s+r)-(s-=r)*s-a*a))/(2*r);n.x=e.x+c*o+l*i,n.y=e.y+c*i-l*o}else n.x=e.x+s,n.y=e.y}function hs(e,t){return e.parent==t.parent?1:2}function Tt(e){var t=e.children;return t.length?t[0]:e.t}function kt(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function eo(e,t,n){var s=n/(t.i-e.i);t.c-=s,t.s+=n,e.c+=s,t.z+=n,t.m+=n}function Zs(e,t,n){return e.a.parent===t.parent?e.a:n}function Hs(e){var t=e.children;return t&&t.length?Hs(t[0]):e}function Is(e){var n,t=e.children;return t&&(n=t.length)?Is(t[n-1]):e}function dt(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Vs(e,t){var o=e.x+t[3],i=e.y+t[0],n=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return n<0&&(o+=n/2,n=0),s<0&&(i+=s/2,s=0),{x:o,y:i,dx:n,dy:s}}function Ae(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function He(e){return e.rangeExtent?e.rangeExtent():Ae(e.range())}function Gs(e,t,n,s){var o=n(e[0],e[1]),i=s(t[0],t[1]);return function(e){return i(o(e))}}function xt(e,t){var n,s=0,o=e.length-1,i=e[s],a=e[o];return a<i&&(n=s,s=o,o=n,n=i,i=a,a=n),e[s]=t.floor(i),e[o]=t.ceil(a),e}function Xt(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Us}i.layout.histogram=function(){var t=!0,n=Number,s=uo,o=ho;function e(e,a){for(var r,d,u=[],c=e.map(n,this),h=s.call(this,c,a),l=o.call(this,h,c,a),f=(a=-1,c.length),m=l.length-1,p=t?1:1/f;++a<m;)(r=u[a]=[]).dx=l[a+1]-(r.x=l[a]),r.y=0;if(m>0)for(a=-1;++a<f;)(d=c[a])>=h[0]&&d<=h[1]&&((r=u[i.bisect(l,d,1,m)-1]).y+=p,r.push(e[a]));return u}return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(s=c(t),e):s},e.bins=function(t){return arguments.length?(o="number"==typeof t?function(e){return Os(e,t)}:c(t),e):o},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},i.layout.pack=function(){var e,o=i.layout.hierarchy().sort(io),n=0,s=[1,1];function t(t,i){var l,d=o.call(this,t,i),a=d[0],r=s[0],c=s[1],u=e==null?Math.sqrt:"function"==typeof e?e:function(){return e};return(a.x=a.y=0,j(a,function(e){e.r=+u(e.value)}),j(a,Ss),n)&&(l=n*(e?1:Math.max(2*a.r/r,2*a.r/c))/2,j(a,function(e){e.r+=l}),j(a,Ss),j(a,function(e){e.r-=l})),Ts(a,r/2,c/2,e?1:1/Math.max(2*a.r/r,2*a.r/c)),d}return t.size=function(e){return arguments.length?(s=e,t):s},t.radius=function(n){return arguments.length?(e=n==null||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(n=+e,t):n},ce(t,o)},i.layout.tree=function(){var a=i.layout.hierarchy().sort(null).value(null),t=hs,e=[1,1],s=null;function n(n,i){var f=a.call(this,n,i),l=f[0],h=function(e){for(i={A:null,children:[e]},a=[i];null!=(o=a.pop());)for(var n,o,i,a,s=o.children,t=0,r=s.length;t<r;++t)a.push((s[t]=n={_:s[t],parent:o,children:(n=s[t].children)&&n.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:t}).a=n);return i.children[0]}(l);if(j(h,r),h.parent.m=-h.z,le(h,c),s)le(l,o);else{var d=l,u=l,m=l;le(l,function(e){e.x<d.x&&(d=e),e.x>u.x&&(u=e),e.depth>m.depth&&(m=e)});var p=t(d,u)/2-d.x,g=e[0]/(u.x+t(u,d)/2+p),v=e[1]/(m.depth||1);le(l,function(e){e.x=(e.x+p)*g,e.y=e.depth*v})}return f}function r(e){var o,s=e.children,i=e.parent.children,n=e.i?i[e.i-1]:null;s.length?(!function(e){for(var t,n=0,i=0,s=e.children,o=s.length;--o>=0;)(t=s[o]).z+=n,t.m+=n,n+=t.s+(i+=t.c)}(e),o=(s[0].z+s[s.length-1].z)/2,n?(e.z=n.z+t(e._,n._),e.m=e.z-o):e.z=o):n&&(e.z=n.z+t(e._,n._)),e.parent.A=function(e,n,s){if(n){for(var c,o=e,a=e,i=n,r=o.parent.children[0],l=o.m,d=a.m,u=i.m,h=r.m;i=kt(i),o=Tt(o),i&&o;)r=Tt(r),(a=kt(a)).a=e,(c=i.z+u-o.z-l+t(i._,o._))>0&&(eo(Zs(i,e,s),e,c),l+=c,d+=c),u+=i.m,l+=o.m,h+=r.m,d+=a.m;i&&!kt(a)&&(a.t=i,a.m+=u-d),o&&!Tt(r)&&(r.t=o,r.m+=l-h,s=e)}return s}(e,n,e.parent.A||i[0])}function c(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function o(t){t.x*=e[0],t.y=t.depth*e[1]}return n.separation=function(e){return arguments.length?(t=e,n):t},n.size=function(t){return arguments.length?(s=null==(e=t)?o:null,n):s?null:e},n.nodeSize=function(t){return arguments.length?(s=null==(e=t)?null:o,n):s?e:null},ce(n,a)},i.layout.cluster=function(){var o=i.layout.hierarchy().sort(null).value(null),n=hs,e=[1,1],s=!1;function t(t,a){var c,u=o.call(this,t,a),r=u[0],m=0;j(r,function(e){var t=e.children;t&&t.length?(e.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(t),e.y=function(e){return 1+i.max(e,function(e){return e.y})}(t)):(e.x=c?m+=n(e,c):0,e.y=0,c=e)});var l=Hs(r),d=Is(r),h=l.x-n(l,d)/2,f=d.x+n(d,l)/2;return j(r,s?function(t){t.x=(t.x-r.x)*e[0],t.y=(r.y-t.y)*e[1]}:function(t){t.x=(t.x-h)/(f-h)*e[0],t.y=(1-(r.y?t.y/r.y:1))*e[1]}),u}return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(n){return arguments.length?(s=null==(e=n),t):s?null:e},t.nodeSize=function(n){return arguments.length?(s=null!=(e=n),t):s?e:null},ce(t,o)},i.layout.treemap=function(){var s,l=i.layout.hierarchy(),n=Math.round,o=[1,1],h=null,r=dt,c=!1,t="squarify",a=.5*(1+Math.sqrt(5));function d(e,t){for(var n,s,o=-1,i=e.length;++o<i;)n=(s=e[o]).value*(t<0?0:t),s.area=isNaN(n)||n<=0?0:n}function m(e){if(o=e.children,o&&o.length){var o,l,h,f,s=r(e),n=[],a=o.slice(),c=1/0,i="slice"===t?s.dx:"dice"===t?s.dy:"slice-dice"===t?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(d(a,s.dx*s.dy/e.value),n.area=0;(l=a.length)>0;)n.push(h=a[l-1]),n.area+=h.area,"squarify"!==t||(f=p(n,i))<=c?(a.pop(),c=f):(n.area-=n.pop().area,u(n,i,s,!1),i=Math.min(s.dx,s.dy),n.length=n.area=0,c=1/0);n.length&&(u(n,i,s,!0),n.length=n.area=0),o.forEach(m)}}function f(e){if(n=e.children,n&&n.length){var n,s,o=r(e),i=n.slice(),t=[];for(d(i,o.dx*o.dy/e.value),t.area=0;s=i.pop();)t.push(s),t.area+=s.area,null!=s.z&&(u(t,s.z?o.dx:o.dy,o,!i.length),t.length=t.area=0);n.forEach(f)}}function p(e,t){for(var n,s=e.area,o=0,i=1/0,r=-1,c=e.length;++r<c;)(n=e[r].area)&&(n<i&&(i=n),n>o&&(o=n));return t*=t,(s*=s)?Math.max(t*o*a/s,s/(t*i*a)):1/0}function u(e,t,s,o){var i,l=-1,d=e.length,r=s.x,c=s.y,a=t?n(e.area/t):0;if(t==s.dx){for((o||a>s.dy)&&(a=s.dy);++l<d;)(i=e[l]).x=r,i.y=c,i.dy=a,r+=i.dx=Math.min(s.x+s.dx-r,a?n(i.area/a):0);i.z=!0,i.dx+=s.x+s.dx-r,s.y+=a,s.dy-=a}else{for((o||a>s.dx)&&(a=s.dx);++l<d;)(i=e[l]).x=r,i.y=c,i.dx=a,c+=i.dy=Math.min(s.y+s.dy-c,a?n(i.area/a):0);i.z=!1,i.dy+=s.y+s.dy-c,s.x+=a,s.dx-=a}}function e(e){var n=s||l(e),t=n[0];return t.x=t.y=0,t.value?(t.dx=o[0],t.dy=o[1]):t.dx=t.dy=0,s&&l.revalue(t),d([t],t.dx*t.dy/t.value),(s?f:m)(t),c&&(s=n),n}return e.size=function(t){return arguments.length?(o=t,e):o},e.padding=function(t){if(!arguments.length)return h;function n(e){return Vs(e,t)}var s;return r=null==(h=t)?dt:"function"==(s=typeof t)?function(n){var s=t.call(e,n,n.depth);return s==null?dt(n):Vs(n,"number"==typeof s?[s,s,s,s]:s)}:"number"===s?(t=[t,t,t,t],n):n,e},e.round=function(t){return arguments.length?(n=t?Math.round:Number,e):n!=Number},e.sticky=function(t){return arguments.length?(c=t,s=null,e):c},e.ratio=function(t){return arguments.length?(a=t,e):a},e.mode=function(n){return arguments.length?(t=n+"",e):t},ce(e,l)},i.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,s,o;do n=(s=2*Math.random()-1)*s+(o=2*Math.random()-1)*o;while(!n||n>1)return e+t*s*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=i.random.normal.apply(i,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=i.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},i.scale={},Us={floor:m,ceil:m};function ri(e,t,n,s){var r=[],c=[],o=0,a=Math.min(e.length,t.length)-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=a;)r.push(n(e[o-1],e[o])),c.push(s(t[o-1],t[o]));return function(t){var n=i.bisect(e,t,1,a)-1;return c[n](r[n](t))}}function Ws(e,t,n,s){var a,r;function i(){var i=Math.min(e.length,t.length)>2?ri:Gs,c=s?Po:Ho;return a=i(e,t,c,n),r=i(t,e,c,D),o}function o(e){return a(e)}return o.invert=function(e){return r(e)},o.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},o.range=function(e){return arguments.length?(t=e,i()):t},o.rangeRound=function(e){return o.range(e).interpolate(Pn)},o.clamp=function(e){return arguments.length?(s=e,i()):s},o.interpolate=function(e){return arguments.length?(n=e,i()):n},o.ticks=function(t){return _t(e,t)},o.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},o.nice=function(t){return Ps(e,t),i()},o.copy=function(){return Ws(e,t,n,s)},i()}function Bs(e,t){return i.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Ps(e,t){return xt(e,Xt(wt(e,t)[2])),xt(e,Xt(wt(e,t)[2])),e}function wt(e,t){t==null&&(t=10);var s=Ae(e),i=s[1]-s[0],n=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=t/i*n;return o<=.15?n*=10:o<=.35?n*=5:o<=.75&&(n*=2),s[0]=Math.ceil(s[0]/n)*n,s[1]=Math.floor(s[1]/n)*n+.5*n,s[2]=n,s}function _t(e,t){return i.range.apply(i,wt(e,t))}function Fs(e,t,n,s){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((s=t.map(Number)).map(i)),o):s},o.base=function(n){return arguments.length?(t=+n,e.domain(s.map(i)),o):t},o.nice=function(){var t=xt(s.map(i),n?Math:Ds);return e.domain(t),s=t.map(a),o},o.ticks=function(){var r,l=Ae(s),o=[],d=l[0],u=l[1],e=Math.floor(i(d)),c=Math.ceil(i(u)),h=t%1?2:t;if(isFinite(c-e)){if(n){for(;e<c;e++)for(r=1;r<h;r++)o.push(a(e)*r);o.push(a(e))}else for(o.push(a(e));e++<c;)for(r=h-1;r>0;r--)o.push(a(e)*r);for(e=0;o[e]<d;e++);for(c=o.length;o[c-1]>u;c--);o=o.slice(e,c)}return o},o.copy=function(){return Fs(e.copy(),t,n,s)},Bs(o,e)}i.scale.linear=function(){return Ws([0,1],[0,1],D,!1)},i.scale.log=function(){return Fs(i.scale.linear().domain([0,1]),10,!0,[1,10])},Ds={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Ms(e,t,n){var o=Le(t),i=Le(1/t);function s(t){return e(o(t))}return s.invert=function(t){return i(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(o)),s):n},s.ticks=function(e){return _t(n,e)},s.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)},s.nice=function(e){return s.domain(Ps(n,e))},s.exponent=function(a){return arguments.length?(o=Le(t=a),i=Le(1/t),e.domain(n.map(o)),s):t},s.copy=function(){return Ms(e.copy(),t,n)},Bs(s,e)}function Le(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Cs(e,t){var s,o,a;function n(n){return s[((a.get(n)||("range"===t.t?a.set(n,e.push(n)):NaN))-1)%s.length]}function r(t,n){return i.range(e.length).map(function(e){return t+n*e})}return n.domain=function(s){if(!arguments.length)return e;e=[],a=new k;for(var o,i=-1,r=s.length;++i<r;)a.has(o=s[i])||a.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,o=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,a){arguments.length<2&&(a=0);var c=i[0],l=i[1],d=e.length<2?(c=(c+l)/2,0):(l-c)/(e.length-1+a);return s=r(c+d*a/2,d),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,a){arguments.length<2&&(a=0);var c=i[0],l=i[1],d=e.length<2?(c=l=Math.round((c+l)/2),0):(l-c)/(e.length-1+a)|0;return s=r(c+Math.round(d*a/2+(l-c-(e.length-1+a)*d)/2),d),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=i[1]<i[0],u=i[l-0],d=(i[1-l]-u)/(e.length-a+2*c);return s=r(u+d*c,d),l&&s.reverse(),o=d*(1-a),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=i[1]<i[0],d=i[l-0],h=i[1-l],u=Math.floor((h-d)/(e.length-a+2*c));return s=r(d+Math.round((h-d-(e.length-a)*u)/2),u),l&&s.reverse(),o=Math.round(u*(1-a)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Ae(t.a[0])},n.copy=function(){return Cs(e,t)},n.domain(e)}i.scale.pow=function(){return Ms(i.scale.linear(),1,[0,1])},i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return Cs([],{t:"range",a:[[]]})},i.scale.category10=function(){return i.scale.ordinal().range(ao)},i.scale.category20=function(){return i.scale.ordinal().range(ro)},i.scale.category20b=function(){return i.scale.ordinal().range(co)},i.scale.category20c=function(){return i.scale.ordinal().range(lo)};var ao=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Re),ro=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Re),co=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Re),lo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Re);function xs(e,t){var n;function o(){var o=0,a=t.length;for(n=[];++o<a;)n[o-1]=i.quantile(e,o/a);return s}function s(e){if(!isNaN(e=+e))return t[i.bisect(n,e)]}return s.domain=function(t){return arguments.length?(e=t.map(L).filter(O).sort(U),o()):e},s.range=function(e){return arguments.length?(t=e,o()):t},s.quantiles=function(){return n},s.invertExtent=function(s){return(s=t.indexOf(s))<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},s.copy=function(){return xs(e,t)},o()}function ws(e,t,n){var o,a;function s(t){return n[Math.max(0,Math.min(a,Math.floor(o*(t-e))))]}function i(){return o=n.length/(t-e),a=n.length-1,s}return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},s.range=function(e){return arguments.length?(n=e,i()):n},s.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/o+e,t+1/o]},s.copy=function(){return ws(e,t,n)},i()}function _s(e,t){function n(n){if(n<=n)return t[i.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return _s(e,t)},n}function ys(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return _t(e,t)},t.tickFormat=function(t,n){return d3_scale_linearTickFormat(e,t,n)},t.copy=function(){return ys(e)},t}function po(){return 0}i.scale.quantile=function(){return xs([],[])},i.scale.quantize=function(){return ws(0,1,[0,1])},i.scale.threshold=function(){return _s([.5],[0,1])},i.scale.identity=function(){return ys([0,1])},i.svg={},i.svg.arc=function(){var t=vo,i=bo,a=po,n=ee,s=fs,o=ms,l=_o;function e(){var e=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+i.apply(this,arguments)),O=s.apply(this,arguments)-w,_=o.apply(this,arguments)-w,P=Math.abs(_-O),u=O>_?0:1;if(c<e&&(x=c,c=e,e=x),P>=Mo)return d(c,u)+(e?d(e,1-u):"")+"Z";var h,f,p,v,b,y,x,k,S,M,L,$,F=0,A=0,m=[];if(($=(+l.apply(this,arguments)||0)/2)&&(L=n===ee?Math.sqrt(e*e+c*c):+n.apply(this,arguments),u||(A*=-1),c&&(A=Fn(L/c*Math.sin($))),e&&(F=Fn(L/e*Math.sin($)))),c?(h=c*Math.cos(O+A),p=c*Math.sin(O+A),f=c*Math.cos(_-A),k=c*Math.sin(_-A),W=Math.abs(_-O-2*A)<=C?0:1,A&&Ne(h,p,f,k)===u^W&&(U=(O+_)/2,h=c*Math.cos(U),p=c*Math.sin(U),f=k=null)):h=p=0,e?(b=e*Math.cos(_-F),v=e*Math.sin(_-F),y=e*Math.cos(O+F),M=e*Math.sin(O+F),H=Math.abs(O-_+2*F)<=C?0:1,F&&Ne(b,v,y,M)===1-u^H&&(R=(O+_)/2,b=e*Math.cos(R),v=e*Math.sin(R),y=M=null)):b=v=0,P>r&&(x=Math.min(Math.abs(c-e)/2,+a.apply(this,arguments)))>.001){if(S=e<c^u?0:1,j=x,g=x,P<C){var g,j,T,z,D,N,R,H,W,U,E=y==null?[b,v]:f==null?[h,p]:Dt([h,p],[y,M],[f,k],[b,v]),K=h-E[0],I=p-E[1],B=f-E[0],V=k-E[1],Y=1/Math.sin(Math.acos((K*B+I*V)/(Math.sqrt(K*K+I*I)*Math.sqrt(B*B+V*V)))/2),q=Math.sqrt(E[0]*E[0]+E[1]*E[1]);g=Math.min(x,(e-q)/(Y-1)),j=Math.min(x,(c-q)/(Y+1))}f!=null?(D=ze(y==null?[b,v]:[y,M],[h,p],c,j,u),z=ze([f,k],[b,v],c,j,u),x===j?m.push("M",D[0],"A",j,",",j," 0 0,",S," ",D[1],"A",c,",",c," 0 ",1-u^Ne(D[1][0],D[1][1],z[1][0],z[1][1]),",",u," ",z[1],"A",j,",",j," 0 0,",S," ",z[0]):m.push("M",D[0],"A",j,",",j," 0 1,",S," ",z[0])):m.push("M",h,",",p),y!=null?(T=ze([h,p],[y,M],e,-g,u),N=ze([b,v],f==null?[h,p]:[f,k],e,-g,u),x===g?m.push("L",N[0],"A",g,",",g," 0 0,",S," ",N[1],"A",e,",",e," 0 ",u^Ne(N[1][0],N[1][1],T[1][0],T[1][1]),",",1-u," ",T[1],"A",g,",",g," 0 0,",S," ",T[0]):m.push("L",N[0],"A",g,",",g," 0 0,",S," ",T[0])):m.push("L",b,",",v)}else m.push("M",h,",",p),f!=null&&m.push("A",c,",",c," 0 ",W,",",u," ",f,",",k),m.push("L",b,",",v),y!=null&&m.push("A",e,",",e," 0 ",H,",",1-u," ",y,",",M);return m.push("Z"),m.join("")}function d(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return e.innerRadius=function(n){return arguments.length?(t=c(n),e):t},e.outerRadius=function(t){return arguments.length?(i=c(t),e):i},e.cornerRadius=function(t){return arguments.length?(a=c(t),e):a},e.padRadius=function(t){return arguments.length?(n=t==ee?ee:c(t),e):n},e.startAngle=function(t){return arguments.length?(s=c(t),e):s},e.endAngle=function(t){return arguments.length?(o=c(t),e):o},e.padAngle=function(t){return arguments.length?(l=c(t),e):l},e.centroid=function(){var e=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,n=(+s.apply(this,arguments)+ +o.apply(this,arguments))/2-w;return[Math.cos(n)*e,Math.sin(n)*e]},e},ee="auto";function vo(e){return e.innerRadius}function bo(e){return e.outerRadius}function fs(e){return e.startAngle}function ms(e){return e.endAngle}function _o(e){return e&&e.padAngle}function Ne(e,t,n,s){return(e-n)*t-(t-s)*e>0?0:1}function ze(e,t,n,s,o){var y=e[0]-t[0],b=e[1]-t[1],O=(o?s:-s)/Math.sqrt(y*y+b*b),v=O*b,g=-O*y,p=e[0]+v,f=e[1]+g,j=t[0]+v,m=t[1]+g,w=(p+j)/2,_=(f+m)/2,r=j-p,i=m-f,c=r*r+i*i,h=n-s,a=p*m-j*f,d=(i<0?-1:1)*Math.sqrt(Math.max(0,h*h*c-a*a)),u=(a*i-r*d)/c,l=(-a*r-i*d)/c,x=(a*i+r*d)/c,C=(-a*r+i*d)/c,E=u-w,k=l-_,A=x-w,S=C-_;return E*E+k*k>A*A+S*S&&(u=x,l=C),[[u-v,l-g],[u*n/h,l*n/h]]}function ls(){return!0}function cs(e){var a=K,s=te,o=ls,n=v,r=n.key,i=.7;function t(t){var d,u=[],r=[],l=-1,m=t.length,f=c(a),p=c(s);function h(){u.push("M",n(e(r),i))}for(;++l<m;)o.call(this,d=t[l],l)?r.push([+f.call(this,d,l),+p.call(this,d,l)]):r.length&&(h(),r=[]);return r.length&&h(),u.length?u.join(""):null}return t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(r="function"==typeof e?n=e:(n=Me.get(e)||v).key,t):r},t.tension=function(e){return arguments.length?(i=e,t):i},t}i.svg.line=function(){return cs(m)},Me=i.map({linear:v,"linear-closed":ns,step:function(e){for(var s=0,o=e.length,t=e[0],n=[t[0],",",t[1]];++s<o;)n.push("H",(t[0]+(t=e[s])[0])/2,"V",t[1]);return o>1&&n.push("H",t[0]),n.join("")},"step-before":bt,"step-after":gt,basis:Qn,"basis-open":function(e){if(e.length<4)return v(e);for(var t,i=[],n=-1,a=e.length,s=[0],o=[0];++n<3;)t=e[n],s.push(t[0]),o.push(t[1]);for(i.push(f(M,s)+","+f(M,o)),--n;++n<a;)t=e[n],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),ht(i,s,o);return i.join("")},"basis-closed":function(e){for(var t,a,s=-1,i=e.length,r=i+4,o=[],n=[];++s<4;)t=e[s%i],o.push(t[0]),n.push(t[1]);for(a=[f(M,o),",",f(M,n)],--s;++s<r;)t=e[s%i],o.shift(),o.push(t[0]),n.shift(),n.push(t[1]),ht(a,o,n);return a.join("")},bundle:function(e,t){if(n=e.length-1,n)for(var n,s,o,a=e[0][0],r=e[0][1],c=e[n][0]-a,l=e[n][1]-r,i=-1;++i<=n;)o=i/n,(s=e[i])[0]=t*s[0]+(1-t)*(a+o*c),s[1]=t*s[1]+(1-t)*(r+o*l);return Qn(e)},cardinal:function(e,t){return e.length<3?v(e):e[0]+ve(e,pt(e,t))},"cardinal-open":function(e,t){return e.length<4?v(e):e[1]+ve(e.slice(1,-1),pt(e,t))},"cardinal-closed":function(e,t){return e.length<3?ns(e):e[0]+ve((e.push(e[0]),e),pt([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?v(e):e[0]+ve(e,function(e){for(var s,o,i,a,l=[],n=function(e){for(var t=0,a=e.length-1,n=[],i=e[0],s=e[1],o=n[0]=ut(i,s);++t<a;)n[t]=(o+(o=ut(i=s,s=e[t+1])))/2;return n[t]=o,n}(e),t=-1,c=e.length-1;++t<c;)o=ut(e[t],e[t+1]),d(o)<r?n[t]=n[t+1]=0:(s=(i=n[t]/o)*i+(a=n[t+1]/o)*a)>9&&(s=3*o/Math.sqrt(s),n[t]=s*i,n[t+1]=s*a);for(t=-1;++t<=c;)s=(e[Math.min(c,t+1)][0]-e[Math.max(0,t-1)][0])/(6*(1+n[t]*n[t])),l.push([s||0,n[t]*s||0]);return l}(e))}});function v(e){return e.length>1?e.join("L"):e+"Z"}function ns(e){return e.join("L")+"Z"}function bt(e){for(var n=0,o=e.length,t=e[0],s=[t[0],",",t[1]];++n<o;)s.push("V",(t=e[n])[1],"H",t[0]);return s.join("")}function gt(e){for(var n=0,o=e.length,t=e[0],s=[t[0],",",t[1]];++n<o;)s.push("H",(t=e[n])[0],"V",t[1]);return s.join("")}function ve(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return v(e);var r,l,d=e.length!=t.length,i="",c=e[0],n=e[1],a=t[0],s=a,o=1;if(d&&(i+="Q"+(n[0]-2*a[0]/3)+","+(n[1]-2*a[1]/3)+","+n[0]+","+n[1],c=e[1],o=2),t.length>1){s=t[1],n=e[o],o++,i+="C"+(c[0]+a[0])+","+(c[1]+a[1])+","+(n[0]-s[0])+","+(n[1]-s[1])+","+n[0]+","+n[1];for(r=2;r<t.length;r++,o++)n=e[o],s=t[r],i+="S"+(n[0]-s[0])+","+(n[1]-s[1])+","+n[0]+","+n[1]}return d&&(l=e[o],i+="Q"+(n[0]+2*s[0]/3)+","+(n[1]+2*s[1]/3)+","+l[0]+","+l[1]),i}function pt(e,t){for(var s,o=[],i=(1-t)/2,a=e[0],n=e[1],r=1,c=e.length;++r<c;)s=a,a=n,n=e[r],o.push([i*(n[0]-s[0]),i*(n[1]-s[1])]);return o}function Qn(e){if(e.length<3)return v(e);var r=1,c=e.length,t=e[0],s=t[0],o=t[1],i=[s,s,s,(t=e[1])[0]],n=[o,o,o,t[1]],a=[s,",",o,"L",f(M,i),",",f(M,n)];for(e.push(e[c-1]);++r<=c;)t=e[r],i.shift(),i.push(t[0]),n.shift(),n.push(t[1]),ht(a,i,n);return e.pop(),a.push("L",t),a.join("")}function f(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}Me.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Gn=[0,2/3,1/3,0],qn=[0,1/3,2/3,0],M=[0,1/6,2/3,1/6];function ht(e,t,n){e.push("C",f(Gn,t),",",f(Gn,n),",",f(qn,t),",",f(qn,n),",",f(M,t),",",f(M,n))}function ut(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Rn(e){for(var t,n,s,o=-1,i=e.length;++o<i;)n=(t=e[o])[0],s=t[1]-w,t[0]=n*Math.cos(s),t[1]=n*Math.sin(s);return e}function Ys(e){var i=K,s=K,a=0,o=te,l=ls,n=v,d=n.key,u=n,h="L",r=.7;function t(t){var f,v,b,p=[],m=[],g=[],d=-1,y=t.length,_=c(i),w=c(a),O=i===s?function(){return b}:c(s),x=a===o?function(){return v}:c(o);function j(){p.push("M",n(e(g),r),h,u(e(m.reverse()),r),"Z")}for(;++d<y;)l.call(this,f=t[d],d)?(m.push([b=+_.call(this,f,d),v=+w.call(this,f,d)]),g.push([+O.call(this,f,d),+x.call(this,f,d)])):m.length&&(j(),m=[],g=[]);return m.length&&j(),p.length?p.join(""):null}return t.x=function(e){return arguments.length?(i=s=e,t):s},t.x0=function(e){return arguments.length?(i=e,t):i},t.x1=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(a=o=e,t):o},t.y0=function(e){return arguments.length?(a=e,t):a},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(l=e,t):l},t.interpolate=function(e){return arguments.length?(d="function"==typeof e?n=e:(n=Me.get(e)||v).key,u=n.reverse||n,h=n.closed?"M":"L",t):d},t.tension=function(e){return arguments.length?(r=e,t):r},t}function Nn(e){return e.source}function Dn(e){return e.target}function Wo(e){return e.radius}function zn(e){return[e.x,e.y]}function Ko(){return 64}function qo(){return"circle"}function Tn(e){var t=Math.sqrt(e/C);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}i.svg.line.radial=function(){var e=cs(Rn);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},bt.reverse=gt,gt.reverse=bt,i.svg.area=function(){return Ys(m)},i.svg.area.radial=function(){var e=Ys(Rn);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},i.svg.chord=function(){var t=Nn,n=Dn,s=Wo,o=fs,i=ms;function e(e,s){var c,d,o=r(this,t,e,s),i=r(this,n,e,s);return"M"+o.p0+l(o.r,o.p1,o.a1-o.a0)+(c=i,((d=o).a0==c.a0&&d.a1==c.a1?a(o.r,o.p1,o.r,o.p0):a(o.r,o.p1,i.r,i.p0)+l(i.r,i.p1,i.a1-i.a0)+a(i.r,i.p1,o.r,o.p0))+"Z")}function r(e,t,n,a){var c=t.call(e,n,a),r=s.call(e,c,a),l=o.call(e,c,a)-w,d=i.call(e,c,a)-w;return{r,a0:l,a1:d,p0:[r*Math.cos(l),r*Math.sin(l)],p1:[r*Math.cos(d),r*Math.sin(d)]}}function l(e,t,n){return"A"+e+","+e+" 0 "+ +(n>C)+",1 "+t}function a(e,t,n,s){return"Q 0,0 "+s}return e.radius=function(t){return arguments.length?(s=c(t),e):s},e.source=function(n){return arguments.length?(t=c(n),e):t},e.target=function(t){return arguments.length?(n=c(t),e):n},e.startAngle=function(t){return arguments.length?(o=c(t),e):o},e.endAngle=function(t){return arguments.length?(i=c(t),e):i},e},i.svg.diagonal=function(){var t=Nn,n=Dn,s=zn;function e(e,o){var a=t.call(this,e,o),r=n.call(this,e,o),c=(a.y+r.y)/2,i=[a,{x:a.x,y:c},{x:r.x,y:c},r];return"M"+(i=i.map(s))[0]+"C"+i[1]+" "+i[2]+" "+i[3]}return e.source=function(n){return arguments.length?(t=c(n),e):t},e.target=function(t){return arguments.length?(n=c(t),e):n},e.projection=function(t){return arguments.length?(s=t,e):s},e},i.svg.diagonal.radial=function(){var e=i.svg.diagonal(),t=zn,n=e.projection;return e.projection=function(e){return arguments.length?n(function(e){return function(){var t=e.apply(this,arguments),n=t[0],s=t[1]-w;return[n*Math.cos(s),n*Math.sin(s)]}}(t=e)):t},e},i.svg.symbol=function(){var t=qo,n=Ko;function e(e,s){return(ct.get(t.call(this,e,s))||Tn)(n.call(this,e,s))}return e.type=function(n){return arguments.length?(t=c(n),e):t},e.size=function(t){return arguments.length?(n=c(t),e):n},e},ct=i.map({circle:Tn,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*at)),n=t*at;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Z),n=t*Z/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Z),n=t*Z/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}}),i.svg.symbolTypes=ct.keys(),Z=Math.sqrt(3),at=Math.tan(30*Zn),a.transition=function(e){for(var t,s,o=z||++tt,c=Ze(e),i=[],l=Ie||{time:Date.now(),ease:Uo,delay:0,duration:250},a=-1,d=this.length;++a<d;){i.push(s=[]);for(var r=this[a],n=-1,u=r.length;++n<u;)(t=r[n])&&$e(t,n,c,o,l),s.push(t)}return Y(i,c,o)},a.interrupt=function(e){return this.each(e==null?Q:wn(Ze(e)))},Q=wn(Ze());function wn(e){return function(){var t,n,s;(t=this[e])&&(n=t[s=t.active])&&(n.timer.c=null,n.timer.t=NaN,--t.count?delete t[s]:delete this[e],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Y(e,t,n){return G(e,l),e.namespace=t,e.id=n,e}l=[],tt=0;function Je(e,t,n,s){var o=e.id,i=e.namespace;return x(e,"function"==typeof n?function(e,a,r){e[i][o].tween.set(t,s(n.call(e,e.__data__,a,r)))}:(n=s(n),function(e){e[i][o].tween.set(t,n)}))}function ai(e){return e==null&&(e=""),function(){this.textContent=e}}function Ze(e){return e==null?"__transition__":"__transition_"+e+"__"}function $e(e,t,n,s,o){var r,c,l,d,u,i=e[n]||(e[n]={active:0,count:0}),a=i[s];function h(n){var h,f,p=i.active,o=i[p];for(h in o&&(o.timer.c=null,o.timer.t=NaN,--i.count,delete i[p],o.event&&o.event.interrupt.call(e,e.__data__,o.index)),i)+h<s&&(f=i[h],f.timer.c=null,f.timer.t=NaN,--i.count,delete i[h]);r.c=m,ye(function(){return r.c&&m(n||1)&&(r.c=null,r.t=NaN),1},0,c),i.active=s,a.event&&a.event.start.call(e,e.__data__,t),l=[],a.tween.forEach(function(n,s){(s=s.call(e,e.__data__,t))&&l.push(s)}),u=a.ease,d=a.duration}function m(o){for(var r=o/d,h=u(r),c=l.length;c>0;)l[--c].call(e,h);if(r>=1)return a.event&&a.event.end.call(e,e.__data__,t),--i.count?delete i[s]:delete e[n],1}a||(c=o.time,r=ye(function(e){var t=a.delay;if(r.t=t+c,t<=e)return h(e-t);r.c=h},0,c),a=i[s]={tween:new k,time:c,timer:r,delay:o.delay,duration:o.duration,ease:o.ease,index:t},o=null,++i.count)}l.call=a.call,l.empty=a.empty,l.node=a.node,l.size=a.size,i.transition=function(e,t){return e&&e.transition?z?e.transition(t):e:i.selection().transition(e)},i.transition.prototype=l,l.select=function(e){var t,n,s,a,l,r=this.id,i=this.namespace,c=[];e=qt(e);for(n=-1,l=this.length;++n<l;){c.push(a=[]);for(var d=this[n],o=-1,u=d.length;++o<u;)(t=d[o])&&(s=e.call(t,t.__data__,o,n))?("__data__"in t&&(s.__data__=t.__data__),$e(s,o,i,r,t[i][r]),a.push(s)):a.push(null)}return Y(c,i,r)},l.selectAll=function(e){var t,n,s,o,i,l,d,m,f,a=this.id,r=this.namespace,h=[];e=fn(e);for(t=-1,d=this.length;++t<d;)for(var u=this[t],c=-1,p=u.length;++c<p;)if(n=u[c]){m=n[r][a],o=e.call(n,n.__data__,c,t),h.push(l=[]);for(s=-1,f=o.length;++s<f;)(i=o[s])&&$e(i,s,r,a,m),l.push(i)}return Y(h,r,a)},l.filter=function(e){o=[],"function"!=typeof e&&(e=Mn(e));for(var t,n,o,i,a,r,s=0,c=this.length;s<c;s++){o.push(a=[]);for(t=0,r=(i=this[s]).length;t<r;t++)(n=i[t])&&e.call(n,n.__data__,t,s)&&a.push(n)}return Y(o,this.namespace,this.id)},l.tween=function(e,t){var n=this.id,s=this.namespace;return arguments.length<2?this.node()[s][n].tween.get(e):x(this,t==null?function(t){t[s][n].tween.remove(e)}:function(o){o[s][n].tween.set(e,t)})},l.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var s="transform"==e?Wn:D,n=i.ns.qualify(e);function o(){this.removeAttribute(n)}function a(){this.removeAttributeNS(n.space,n.local)}return Je(this,"attr."+e,t,n.local?function(e){return e==null?a:(e+="",function(){var t,o=this.getAttributeNS(n.space,n.local);return o!==e&&(t=s(o,e),function(e){this.setAttributeNS(n.space,n.local,t(e))})})}:function(e){return e==null?o:(e+="",function(){var t,o=this.getAttribute(n);return o!==e&&(t=s(o,e),function(e){this.setAttribute(n,t(e))})})})},l.attrTween=function(e,t){var n=i.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,s){var o=t.call(this,e,s,this.getAttributeNS(n.space,n.local));return o&&function(e){this.setAttributeNS(n.space,n.local,o(e))}}:function(e,s){var o=t.call(this,e,s,this.getAttribute(n));return o&&function(e){this.setAttribute(n,o(e))}})},l.style=function(e,t,n){var s=arguments.length;if(s<3){if("string"!=typeof e){for(n in s<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function o(){this.style.removeProperty(e)}return Je(this,"style."+e,t,function(t){return t==null?o:(t+="",function(){var s,o=A(this).getComputedStyle(this,null).getPropertyValue(e);return o!==t&&(s=D(o,t),function(t){this.style.setProperty(e,s(t),n)})})})},l.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(s,o){var i=t.call(this,s,o,A(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),n)}})},l.text=function(e){return Je(this,"text",e,ai)},l.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},l.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=i.ease.apply(i,arguments)),x(this,function(s){s[n][t].ease=e}))},l.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:x(this,"function"==typeof e?function(s,o,i){s[n][t].delay=+e.call(s,s.__data__,o,i)}:(e=+e,function(s){s[n][t].delay=e}))},l.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:x(this,"function"==typeof e?function(s,o,i){s[n][t].duration=Math.max(1,e.call(s,s.__data__,o,i))}:(e=Math.max(1,e),function(s){s[n][t].duration=e}))},l.each=function(e,t){var o,a,n=this.id,s=this.namespace;if(arguments.length<2){o=Ie,a=z;try{z=n,x(this,function(t,o,i){Ie=t[s][n],e.call(t,t.__data__,o,i)})}finally{Ie=o,z=a}}else x(this,function(o){var a=o[s][n];(a.event||(a.event=i.dispatch("start","end","interrupt"))).on(e,t)});return this},l.transition=function(){for(var e,t,n,i,a,l,u=this.id,c=++tt,s=this.namespace,r=[],o=0,d=this.length;o<d;o++){r.push(i=[]);for(t=0,l=(a=this[o]).length;t<l;t++)(n=a[t])&&$e(n,t,s,c,{time:(e=n[s][u]).time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration}),i.push(n)}return Y(r,s,c)},i.svg.axis=function(){var o,a=i.scale.linear(),s=Qe,t=6,n=6,d=3,c=[10],l=null;function e(e){e.each(function(){var h,_,S,E=i.select(this),f=this.__chart__||a,e=this.__chart__=a.copy(),N=l??(e.ticks?e.ticks.apply(e,c):e.domain()),D=o??(e.tickFormat?e.tickFormat.apply(e,c):m),b=E.selectAll(".tick").data(N,e),p=b.enter().insert("g",".domain").attr("class","tick").style("opacity",r),F=i.transition(b.exit()).style("opacity",r).remove(),y=i.transition(b.order()).style("opacity",1),x=Math.max(t,0)+d,v=He(e),C=E.selectAll(".domain").data([0]),A=(C.enter().append("path").attr("class","domain"),i.transition(C));p.append("line"),p.append("text");var g,j,w,O,M=p.select("line"),L=y.select("line"),k=b.select("text").text(D),T=p.select("text"),z=y.select("text"),u="top"===s||"left"===s?-1:1;"bottom"===s||"top"===s?(h=ui,w="x",j="y",O="x2",g="y2",k.attr("dy",u<0?"0em":".71em").style("text-anchor","middle"),A.attr("d","M"+v[0]+","+u*n+"V0H"+v[1]+"V"+u*n)):(h=hi,w="y",j="x",O="y2",g="x2",k.attr("dy",".32em").style("text-anchor",u<0?"end":"start"),A.attr("d","M"+u*n+","+v[0]+"H0V"+v[1]+"H"+u*n)),M.attr(g,u*t),T.attr(j,u*x),L.attr(O,0).attr(g,u*t),z.attr(w,0).attr(j,u*x),e.rangeBand?(_=e,S=_.rangeBand()/2,f=e=function(e){return _(e)+S}):f.rangeBand?f=e:F.call(h,e,f),p.call(h,f,e),y.call(h,e,e)})}return e.scale=function(t){return arguments.length?(a=t,e):a},e.orient=function(t){return arguments.length?(s=t in sn?t+"":Qe,e):s},e.ticks=function(){return arguments.length?(c=_(arguments),e):c},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(t){return arguments.length?(o=t,e):o},e.tickSize=function(s){var o=arguments.length;return o?(t=+s,n=+arguments[o-1],e):t},e.innerTickSize=function(n){return arguments.length?(t=+n,e):t},e.outerTickSize=function(t){return arguments.length?(n=+t,e):n},e.tickPadding=function(t){return arguments.length?(d=+t,e):d},e.tickSubdivide=function(){return arguments.length&&e},e},Qe="bottom",sn={top:1,right:1,bottom:1,left:1};function ui(e,t,n){e.attr("transform",function(e){var s=t(e);return"translate("+(isFinite(s)?s:n(e))+",0)"})}function hi(e,t,n){e.attr("transform",function(e){var s=t(e);return"translate(0,"+(isFinite(s)?s:n(e))+")"})}i.svg.brush=function(){var a,r,u=It(o,"brushstart","brush","brushend"),n=null,s=null,t=[0,0],e=[0,0],l=!0,c=!0,d=Ue[0];function o(e){e.each(function(){var e,a,r,c,t=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),l=t.selectAll(".background").data([0]);l.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move"),a=t.selectAll(".resize").data(d,m),a.exit().remove(),a.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return tn[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",o.empty()?"none":null),r=i.transition(t),c=i.transition(l),n&&(e=He(n),c.attr("x",e[0]).attr("width",e[1]-e[0]),f(r)),s&&(e=He(s),c.attr("y",e[0]).attr("height",e[1]-e[0]),p(r)),h(r)})}function h(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+t[+/e$/.test(n)]+","+e[+/^s/.test(n)]+")"})}function f(e){e.select(".extent").attr("x",t[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1]-t[0])}function p(t){t.select(".extent").attr("y",e[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",e[1]-e[0])}function g(){var g,_,O,x,v=this,C=i.select(i.event.target),w=u.of(v,arguments),b=i.select(v),j=C.datum(),T=!/^(n|s)$/.test(j)&&n,M=!/^(e|w)$/.test(j)&&s,m=C.classed("extent"),z=xe(v),d=i.mouse(v),E=i.select(A(v)).on("keydown.brush",function(){32==i.event.keyCode&&(m||(g=null,d[0]-=t[1],d[1]-=e[1],m=2),F())}).on("keyup.brush",function(){32==i.event.keyCode&&2==m&&(d[0]+=t[1],d[1]+=e[1],m=0,F())});i.event.changedTouches?E.on("touchmove.brush",y).on("touchend.brush",k):E.on("mousemove.brush",y).on("mouseup.brush",k),b.interrupt().selectAll("*").interrupt(),m?(d[0]=t[0]-d[0],d[1]=e[0]-d[1]):j?(x=+/w$/.test(j),O=+/^n/.test(j),_=[t[1-x]-d[0],e[1-O]-d[1]],d[0]=t[x],d[1]=e[O]):i.event.altKey&&(g=d.slice());function y(){var o=i.mouse(v),a=!1;_&&(o[0]+=_[0],o[1]+=_[1]),m||(i.event.altKey?(g||(g=[(t[0]+t[1])/2,(e[0]+e[1])/2]),d[0]=t[+(o[0]<g[0])],d[1]=e[+(o[1]<g[1])]):g=null),T&&S(o,n,0)&&(f(b),a=!0),M&&S(o,s,1)&&(p(b),a=!0),a&&(h(b),w({type:"brush",mode:m?"move":"resize"}))}function S(n,s,o){var i,f,b=He(s),p=b[0],v=b[1],u=d[o],h=o?e:t,j=h[1]-h[0];if(m&&(p-=u,v-=j+u),i=(o?c:l)?Math.max(p,Math.min(v,n[o])):n[o],m?f=(i+=u)+j:(g&&(u=Math.max(p,Math.min(v,2*g[o]-i))),u<i?(f=i,i=u):f=u),h[0]!=i||h[1]!=f)return o?a=null:r=null,h[0]=i,h[1]=f,!0}function k(){y(),b.style("pointer-events","all").selectAll(".resize").style("display",o.empty()?"none":null),i.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}b.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",C.style("cursor")),w({type:"brushstart"}),y()}return o.event=function(n){n.each(function(){var s=u.of(this,arguments),n={x:t,y:e,i:r,j:a},o=this.__chart__||n;this.__chart__=n,z?i.select(this).transition().each("start.brush",function(){r=o.i,a=o.j,t=o.x,e=o.y,s({type:"brushstart"})}).tween("brush:brush",function(){var o=Pe(t,n.x),i=Pe(e,n.y);return r=a=null,function(a){t=n.x=o(a),e=n.y=i(a),s({type:"brush",mode:"resize"})}}).each("end.brush",function(){r=n.i,a=n.j,s({type:"brush",mode:"resize"}),s({type:"brushend"})}):(s({type:"brushstart"}),s({type:"brush",mode:"resize"}),s({type:"brushend"}))})},o.x=function(e){return arguments.length?(d=Ue[!(n=e)<<1|!s],o):n},o.y=function(e){return arguments.length?(d=Ue[!n<<1|!(s=e)],o):s},o.clamp=function(e){return arguments.length?(n&&s?(l=!!e[0],c=!!e[1]):n?l=!!e:s&&(c=!!e),o):n&&s?[l,c]:n?l:s?c:null},o.extent=function(i){var c,l,d,u,h;return arguments.length?(n&&(c=i[0],l=i[1],s&&(c=c[0],l=l[0]),r=[c,l],n.invert&&(c=n(c),l=n(l)),l<c&&(h=c,c=l,l=h),c==t[0]&&l==t[1]||(t=[c,l])),s&&(d=i[0],u=i[1],n&&(d=d[1],u=u[1]),a=[d,u],s.invert&&(d=s(d),u=s(u)),u<d&&(h=d,d=u,u=h),d==e[0]&&u==e[1]||(e=[d,u])),o):(n&&(r?(c=r[0],l=r[1]):(c=t[0],l=t[1],n.invert&&(c=n.invert(c),l=n.invert(l)),l<c&&(h=c,c=l,l=h))),s&&(a?(d=a[0],u=a[1]):(d=e[0],u=e[1],s.invert&&(d=s.invert(d),u=s.invert(u)),u<d&&(h=d,d=u,u=h))),n&&s?[[c,d],[l,u]]:n?[c,l]:s&&[d,u])},o.clear=function(){return o.empty()||(t=[0,0],e=[0,0],r=a=null),o},o.empty=function(){return!!n&&t[0]==t[1]||!!s&&e[0]==e[1]},i.rebind(o,u,"on")},tn={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ue=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function pi(e){return JSON.parse(e.responseText)}function Qs(e){var t=u.createRange();return t.selectNode(u.body),t.createContextualFragment(e.responseText)}i.text=vt(function(e){return e.responseText}),i.json=function(e,t){return Se(e,"application/json",pi,t)},i.html=function(e,t){return Se(e,"text/html",Qs,t)},i.xml=vt(function(e){return e.responseXML}),void 0===(o="function"==typeof(s=i)?s.call(t,n,t,e):s)||(e.exports=o)}).apply(self)},3480:function(e){e.exports=function(){"use strict";var e,t,n;function s(s,o){if(e)if(t){var a="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",i={};e(i),n=o(i),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=o;else e=o}return s(0,function(e){function ho(e,t){return e(t={exports:{}},t.exports),t.exports}jo="1.13.4",_o=At;function At(e,t,n,s){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(s-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=s,this.p2x=n,this.p2y=s}At.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},At.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},At.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},At.prototype.solveCurveX=function(e,t){for(void 0===t&&(t=1e-6),n=e,a=0;a<8;a++){if(o=this.sampleCurveX(n)-e,Math.abs(o)<t)return n;var n,s,o,i,a,r=this.sampleCurveDerivativeX(n);if(Math.abs(r)<1e-6)break;n-=o/r}if((n=e)<(s=0))return s;if(n>(i=1))return i;for(;s<i;){if(o=this.sampleCurveX(n),Math.abs(o-e)<t)return n;e>o?s=n:i=n,n=.5*(i-s)+s}return n},At.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))},l=Mt;function Mt(e,t){this.x=e,this.y=t}Mt.prototype={clone:function(){return new Mt(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),s=t*this.x-n*this.y,o=n*this.x+t*this.y;return this.x=s,this.y=o,this},_rotateAround:function(e,t){var n=Math.cos(e),s=Math.sin(e),o=t.x+n*(this.x-t.x)-s*(this.y-t.y),i=t.y+s*(this.x-t.x)+n*(this.y-t.y);return this.x=o,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Mt.convert=function(e){return e instanceof Mt?e:Array.isArray(e)?new Mt(e[0],e[1]):e},a="undefined"!=typeof self?self:{},ic=Math.pow(2,53)-1;function sc(e,t,n,s){var o=new _o(e,t,n,s);return function(e){return o.solve(e)}}Qr=sc(.25,.1,.25,1);function gt(e,t,n){return Math.min(n,Math.max(t,e))}function Gr(e,t,n){var s=n-t,o=((e-t)%s+s)%s+t;return o===t?n:o}function G(e){for(var t,s,o,a,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];for(t=0,s=i;t<s.length;t+=1){o=s[t];for(a in o)e[a]=o[a]}return e}pr=1;function ar(){return pr++}function Na(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ta(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Aa(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})}function wi(e,t){return-1!==e.indexOf(t,e.length-t.length)}function $i(e,t,n){var s,o={};for(s in e)o[s]=t.call(n||this,e[s],s,e);return o}function Ea(e,t,n){var s,o={};for(s in e)t.call(n||this,e[s],s,e)&&(o[s]=e[s]);return o}function ke(e){return Array.isArray(e)?e.map(ke):"object"==typeof e&&e?$i(e,ke):e}Hi={};function W(e){Hi[e]||("undefined"!=typeof console&&console.warn(e),Hi[e]=!0)}function et(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Md(e){for(var s=0,t=0,o=e.length,i=o-1,n=void 0,a=void 0;t<o;i=t++)n=e[t],s+=((a=e[i]).x-n.x)*(n.y+a.y);return s}function ao(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Pi(e){var n,t={};return(e.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20()<>@,;:\\"/[\]?={}\x7F]+)(?:=(?:([^\x00-\x20()<>@,;:\\"/[\]?={}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(e,n,s,o){var i=s||o;return t[n]=!i||i.toLowerCase(),""}),t["max-age"])&&(n=parseInt(t["max-age"],10),isNaN(n)?delete t["max-age"]:t["max-age"]=n),t}io=null;function sa(e){if(io==null){var t=e.navigator?e.navigator.userAgent:null;io=!!e.safari||!!t&&!!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome"))}return io}function pa(e){try{var t=a[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var so,ji,Fn,Hn,yl=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),ud=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,cd=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,$t={now:yl,frame:function(e){var t=ud(e);return{cancel:function(){return cd(t)}}},getImageData:function(e,t){void 0===t&&(t=0);var n=a.document.createElement("canvas"),s=n.getContext("2d");if(!s)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,s.drawImage(e,0,0,e.width,e.height),s.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return so||(so=a.document.createElement("a")),so.href=e,so.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(ji==null&&(ji=a.matchMedia("(prefers-reduced-motion: reduce)")),ji.matches)}},z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},to={supported:!1,testSupport:function(e){!si&&Hn&&(ir?ur(e):Fn=e)}},si=!1,ir=!1;function ur(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Hn),e.isContextLost())return;to.supported=!0}catch{}e.deleteTexture(t),si=!0}a.document&&((Hn=a.document.createElement("img")).onload=function(){Fn&&ur(Fn),Fn=null,ir=!0},Hn.onerror=function(){si=!0,Fn=null},Hn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),ei="01",oe=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function ze(e){return 0===e.indexOf("mapbox:")}oe.prototype._createSkuToken=function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ei,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},oe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},oe.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},oe.prototype.normalizeStyleURL=function(e,t){if(!ze(e))return e;var n=Ge(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},oe.prototype.normalizeGlyphsURL=function(e,t){if(!ze(e))return e;var n=Ge(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},oe.prototype.normalizeSourceURL=function(e,t){if(!ze(e))return e;var n=Ge(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},oe.prototype.normalizeSpriteURL=function(e,t,n,s){var o=Ge(e);return ze(e)?(o.path="/styles/v1"+o.path+"/sprite"+t+n,this._makeAPIURL(o,this._customAccessToken||s)):(o.path+=""+t+n,Js(o))},oe.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ze(e))return e;var s,n=Ge(e),o=$t.devicePixelRatio>=2||512===t?"@2x":"",i=to.supported?".webp":"$1";return n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+o+i),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path,s=this._customAccessToken||function(e){for(var n,t=0,s=e;t<s.length;t+=1)if(n=s[t].match(/^access_token=(.*)$/),n)return n[1];return null}(n.params)||z.ACCESS_TOKEN,z.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,s)},oe.prototype.canonicalizeTileURL=function(e,t){var n,o,s=Ge(e);return!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/)?e:(o="mapbox://tiles/",o+=s.path.replace("/v4/",""),n=s.params,t&&(n=n.filter(function(e){return!e.match(/^access_token=/)})),n.length&&(o+="?"+n.join("&")),o)},oe.prototype.canonicalizeTileset=function(e,t){for(var n,a=!!t&&ze(t),s=[],o=0,i=e.tiles||[];o<i.length;o+=1)n=i[o],En(n)?s.push(this.canonicalizeTileURL(n,a)):s.push(n);return s},oe.prototype._makeAPIURL=function(e,t){var s,o="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=Ge(z.API_URL);if((e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol)&&(s=e.params.indexOf("secure"),s>=0&&e.params.splice(s,1)),"/"!==n.path&&(e.path=""+n.path+e.path),!z.REQUIRE_ACCESS_TOKEN)return Js(e);if(!(t=t||z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+o);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+o);return e.params=e.params.filter(function(e){return-1===e.indexOf("access_token")}),e.params.push("access_token="+t),Js(e)},mr=/^((https?:)?\/\/)?([^/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function En(e){return mr.test(e)}fr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ge(e){var t=e.match(fr);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Js(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}Jo="mapbox.eventData";function gr(e){if(!e)return null;var n,t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse((n=t[1],decodeURIComponent(a.atob(n).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}He=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null},He.prototype.getStorageKey=function(e){var t,s,n=gr(z.ACCESS_TOKEN);return t=n&&n.u?(s=n.u,a.btoa(encodeURIComponent(s).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(Number("0x"+t))}))):z.ACCESS_TOKEN||"",e?Jo+"."+e+":"+t:Jo+":"+t},He.prototype.fetchEventData=function(){var e,t,n=pa("localStorage"),s=this.getStorageKey(),o=this.getStorageKey("uuid");if(n)try{e=a.localStorage.getItem(s),e&&(this.eventData=JSON.parse(e)),t=a.localStorage.getItem(o),t&&(this.anonId=t)}catch{W("Unable to read from LocalStorage")}},He.prototype.saveEventData=function(){var e=pa("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{W("Unable to write to LocalStorage")}},He.prototype.processRequests=function(){},He.prototype.postEvent=function(e,t,n,s){if(o=this,z.EVENTS_URL){i=Ge(z.EVENTS_URL),i.params.push("access_token="+(s||z.ACCESS_TOKEN||""));var o,i,a={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:jo,skuId:ei,userId:this.anonId},r=t?G(a,t):a,c={url:Js(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([r])};this.pendingRequest=Bc(c,function(e){o.pendingRequest=null,n(e),o.saveEventData(),o.processRequests(s)})}},He.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var t,s,o,a,r,c,l,m,g,_,w,C,E,F,T,N,L,P,H,B,V,$,K,q,Y,X,Q,J,jo,_o,ic,Qr,pr,Hi,io,ei,oe,mr,fr,Jo,He,Ne,Qs,$l=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postMapLoadEvent=function(e,t,n,s){this.skuToken=n,(z.EVENTS_URL&&s||z.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return ze(e)||En(e)}))&&this.queueRequest({id:t,timestamp:Date.now()},s)},t.prototype.processRequests=function(e){if(n=this,!this.pendingRequest&&0!==this.queue.length){var n,s=this.queue.shift(),t=s.id,o=s.timestamp;t&&this.success[t]||(this.anonId||this.fetchEventData(),Ta(this.anonId)||(this.anonId=Na()),this.postEvent(o,{skuToken:this.skuToken},function(e){e||t&&(n.success[t]=!0)},e))}},t}(He),Bl=function(e){function t(t){e.call(this,"appUserTurnstile"),this._customAccessToken=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postTurnstileEvent=function(e,t){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return ze(e)||En(e)})&&this.queueRequest(Date.now(),t)},t.prototype.processRequests=function(e){if(s=this,!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n,s,o=gr(z.ACCESS_TOKEN),i=o?o.u:z.ACCESS_TOKEN,t=i!==this.eventData.tokenU;if(Ta(this.anonId)||(this.anonId=Na(),t=!0),n=this.queue.shift(),this.eventData.lastSuccess){var r=new Date(this.eventData.lastSuccess),c=new Date(n),a=(n-this.eventData.lastSuccess)/864e5;t=t||a>=1||a<-1||r.getDate()!==c.getDate()}else t=!0;if(!t)return this.processRequests();this.postEvent(n,{"enabled.telemetry":!1},function(e){e||(s.eventData.lastSuccess=n,s.eventData.tokenU=i)},e)}},t}(He),yr=new Bl,Fl=yr.postTurnstileEvent.bind(yr),Ur=new $l,Cl=Ur.postMapLoadEvent.bind(Ur),nc="mapbox-tiles",ac=500,uc=50,hl=42e4,Do,Mo,So,Eo,$s,ui,Is,ue,Qt,lc,Dt,Rs,le,Ns,_e,Ee,Lr,ne,Fr,Ie,Fe,Re,ae,xe,We,ye,Ae,De,Xe,tt,Ce,Ke,Ye,Pe,nt,Et,Xt,an,wt,Jt,Ja,Wo,Bo,it,Ve,po,lo,ft,Yt,we,Ks,vn,rn,on,Pn,pt,St,Nt,xs,_s,ys,Gt,Se,ls,cs,rs,is,wn,ns,Jn,Te,Gn,qn,Cn,Kn,Yn,Ft,Xn,Qn,Ei,Zn,Ai,Si,Mi,Fi,Ti,zi,Di,Ni,ra,Ue,Ki,Ze,ge,te,me,Ba,Cs,$a,Ua,Ka,ci,st,er,re,Po,ie,rc,Pc,_c,Ws,Ao,kt,sn,ht,pn,_t,ce,Rr,yt,xn,lt,at,eo,ln,Be,Ra,La,dt,Vt,ro,ct,Wi,Bi,Je,qe,mi,be,Rn,Bn,co,ut,je,$e,vi;function qs(){a.caches&&!Ne&&(Ne=a.caches.open(nc))}function ul(e,t,n){if(qs(),Ne){var o,s={status:t.status,statusText:t.statusText,headers:new a.Headers};t.headers.forEach(function(e,t){return s.headers.set(t,e)}),o=Pi(t.headers.get("Cache-Control")||""),o["no-store"]||(o["max-age"]&&s.headers.set("Expires",new Date(n+1e3*o["max-age"]).toUTCString()),new Date(s.headers.get("Expires")).getTime()-n<hl||function(e,t){if(void 0===Qs)try{new Response(new ReadableStream),Qs=!0}catch{Qs=!1}Qs?t(e.body):e.blob().then(t)}(t,function(t){var n=new a.Response(t,s);qs(),Ne&&Ne.then(function(t){return t.put(hc(e.url),n)}).catch(function(e){return W(e.message)})}))}}function hc(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function ll(e,t){if(qs(),!Ne)return t(null);var n=hc(e.url);Ne.then(function(e){e.match(n).then(function(s){var o=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=Pi(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(s);e.delete(n),o&&e.put(n,s.clone()),t(null,s,o)}).catch(t)}).catch(t)}Mo=1/0;function vc(){return Do==null&&(Do=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),Do}So={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"},"function"==typeof Object.freeze&&Object.freeze(So),Eo=function(e){function t(t,n,s){401===n&&En(s)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,t),this.status=n,this.url=s,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),$s=ao()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href};function Qc(e,t){var o,i,l,d=new a.AbortController,n=new a.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:$s(),signal:d.signal}),r=!1,s=!1,c=(l=n.url).indexOf("sku=")>0&&En(l);return"json"===e.type&&n.headers.set("Accept","application/json"),o=function(o,r,l){if(!s){if(o&&"SecurityError"!==o.message&&W(o),r&&l)return i(r);var d=Date.now();a.fetch(n).then(function(n){if(n.ok){var s=c?n.clone():null;return i(n,s,d)}return t(new Eo(n.statusText,n.status,e.url))}).catch(function(e){20!==e.code&&t(new Error(e.message))})}},i=function(o,i,a){("arrayBuffer"===e.type?o.arrayBuffer():"json"===e.type?o.json():o.text()).then(function(e){s||(i&&a&&ul(n,i,a),r=!0,t(null,e,o.headers.get("Cache-Control"),o.headers.get("Expires")))}).catch(function(e){s||t(new Error(e.message))})},c?ll(n,o):o(null,null),{cancel:function(){s=!0,r||d.abort()}}}var Vs=function(e,t){if(n=e.url,!(/^file:/.test(n)||/^file:/.test($s())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return Qc(e,t);if(ao()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var s,n=new a.XMLHttpRequest;for(s in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(s,e.headers[s]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var s=n.response;if("json"===e.type)try{s=JSON.parse(n.response)}catch(e){return t(e)}t(null,s,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new Eo(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},wo=function(e,t){return Vs(G(e,{type:"arrayBuffer"}),t)},Bc=function(e,t){return Vs(G(e,{method:"POST"}),t)},Tr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",ui=[],Is=0,Dc=function(e,t){if(to.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Is>=z.MAX_PARALLEL_IMAGE_REQUESTS)return n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}},ui.push(n),n;Is++;var n,s=!1,o=function(){if(!s)for(s=!0,Is--;ui.length&&Is<z.MAX_PARALLEL_IMAGE_REQUESTS;){var e=ui.shift(),t=e.requestParameters,n=e.callback;e.cancelled||(e.cancel=Dc(t,n).cancel)}},i=wo(e,function(e,n,s,i){o(),e?t(e):n&&(vc()?function(e,t){var n=new a.Blob([new Uint8Array(e)],{type:"image/png"});a.createImageBitmap(n).then(function(e){t(null,e)}).catch(function(e){t(new Error("Could not load image because of "+e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(n,t):function(e,t,n,s){var r,o=new a.Image,i=a.URL;o.onload=function(){t(null,o),i.revokeObjectURL(o.src),o.onload=null,a.requestAnimationFrame(function(){o.src=Tr})},o.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},r=new a.Blob([new Uint8Array(e)],{type:"image/png"}),o.cacheControl=n,o.expires=s,o.src=e.byteLength?i.createObjectURL(r):Tr}(n,t,s,i))});return{cancel:function(){i.cancel(),o()}}};function zc(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function bo(e,t,n){if(n&&n[e]){var s=n[e].indexOf(t);-1!==s&&n[e].splice(s,1)}}var Ps=function(e,t){void 0===t&&(t={}),G(this,t),this.type=e},yo=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"error",G({error:t},n))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ps),Le=function(){};Le.prototype.on=function(e,t){return this._listeners=this._listeners||{},zc(e,t,this._listeners),this},Le.prototype.off=function(e,t){return bo(e,t,this._listeners),bo(e,t,this._oneTimeListeners),this},Le.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},zc(e,t,this._oneTimeListeners),this},Le.prototype.fire=function(e,t){if("string"==typeof e&&(e=new Ps(e,t||{})),n=e.type,this.listens(n)){e.target=this;for(var n,s,i,a,r,o=0,c=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];o<c.length;o+=1)c[o].call(this,e);for(s=0,i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];s<i.length;s+=1)a=i[s],bo(n,a,this._oneTimeListeners),a.call(this,e);r=this._eventedParent,r&&(G(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(e))}else e instanceof yo&&console.error(e.error);return this},Le.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Le.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},o=function(e,t,n,s){this.message=(e?e+": ":"")+n,s&&(this.identifier=s),t!=null&&t.__line__&&(this.line=t.__line__)};function gc(e){var n=e.key,t=e.value;return t?[new o(n,t,"constants have been deprecated as of v8")]:[]}function Zt(e){for(var t,s,o,a,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];for(t=0,s=i;t<s.length;t+=1){o=s[t];for(a in o)e[a]=o[a]}return e}function k(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function mt(e){if(Array.isArray(e))return e.map(mt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var n,t={};for(n in e)t[n]=mt(e[n]);return t}return k(e)}ue=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Qt=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(n=0,s=t;n<s.length;n+=1){var n,s,o=s[n],i=o[0],a=o[1];this.bindings[i]=a}},Qt.prototype.concat=function(e){return new Qt(this,e)},Qt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Qt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var mn={kind:"null"},n={kind:"number"},h={kind:"string"},d={kind:"boolean"},Oe={kind:"color"},Kt={kind:"object"},u={kind:"value"},uo={kind:"collator"},kn={kind:"formatted"},Sn={kind:"resolvedImage"};function de(e,t){return{kind:"array",itemType:e,N:t}}function y(e){if("array"===e.kind){var t=y(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}lc=[mn,n,h,d,Oe,kn,Kt,de(u),Sn];function Tn(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Tn(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,s=lc;n<s.length;n+=1)if(!Tn(s[n],t))return null}return"Expected "+y(e)+" but found "+y(t)+" instead."}function Lo(e,t){return t.some(function(t){return t.kind===e.kind})}function Nn(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e})}var gl=ho(function(e,t){var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){return(e=Math.round(e))<0?0:e>255?255:e}function r(e){return e<0?0:e>1?1:e}function o(e){return n("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function s(e){return r("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function i(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){if(r=e.replace(/ /g,"").toLowerCase(),r in a)return a[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;if(l=r.indexOf("("),p=r.indexOf(")"),-1!==l&&p+1===r.length){var v=r.substr(0,l),c=r.substr(l+1,p-(l+1)).split(","),h=1;switch(v){case"rgba":if(4!==c.length)return null;h=s(c.pop());case"rgb":return 3!==c.length?null:[o(c[0]),o(c[1]),o(c[2]),h];case"hsla":if(4!==c.length)return null;h=s(c.pop());case"hsl":if(3!==c.length)return null;var t,r,l,p,m=(parseFloat(c[0])%360+360)%360/360,f=s(c[1]),d=s(c[2]),u=d<=.5?d*(f+1):d+f-d*f,g=2*d-u;return[n(255*i(g,u,m+1/3)),n(255*i(g,u,m)),n(255*i(g,u,m-1/3)),h];default:return null}}return null}}catch{}}),Yr=gl.parseCSSColor,f=function(e,t,n,s){void 0===s&&(s=1),this.r=e,this.g=t,this.b=n,this.a=s};f.parse=function(e){if(e){if(e instanceof f)return e;if("string"==typeof e){var t=Yr(e);if(t)return new f(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},f.prototype.toString=function(){var e=this.toArray(),t=e[0],n=e[1],s=e[2],o=e[3];return"rgba("+Math.round(t)+","+Math.round(n)+","+Math.round(s)+","+o+")"},f.prototype.toArray=function(){var t=this,n=t.r,s=t.g,o=t.b,e=t.a;return 0===e?[0,0,0,0]:[255*n/e,255*s/e,255*o/e,e]},f.black=new f(0,0,0,1),f.white=new f(1,1,1,1),f.transparent=new f(0,0,0,0),f.red=new f(1,0,0,1),Dt=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})},Dt.prototype.compare=function(e,t){return this.collator.compare(e,t)},Dt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale},Rs=function(e,t,n,s,o){this.text=e,this.image=t,this.scale=n,this.fontStack=s,this.textColor=o},F=function(e){this.sections=e},F.fromString=function(e){return new F([new Rs(e,null,null,null,null)])},F.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},F.factory=function(e){return e instanceof F?e:F.fromString(e)},F.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")},F.prototype.serialize=function(){for(var e,t,n=["format"],s=0,o=this.sections;s<o.length;s+=1)e=o[s],e.image?n.push(["image",e.image.name]):(n.push(e.text),t={},e.fontStack&&(t["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(t["font-scale"]=e.scale),e.textColor&&(t["text-color"]=["rgba"].concat(e.textColor.toArray())),n.push(t));return n},K=function(e){this.name=e.name,this.available=e.available};function Vr(e,t,n,s){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===s||"number"==typeof s&&s>=0&&s<=1?null:"Invalid rgba value ["+[e,t,n,s].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof s?[e,t,n,s]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ls(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof f)return!0;if(e instanceof Dt)return!0;if(e instanceof F)return!0;if(e instanceof K)return!0;if(Array.isArray(e)){for(var s,t=0,n=e;t<n.length;t+=1)if(!Ls(n[t]))return!1;return!0}if("object"==typeof e){for(s in e)if(!Ls(e[s]))return!1;return!0}return!1}function S(e){if(null===e)return mn;if("string"==typeof e)return h;if("boolean"==typeof e)return d;if("number"==typeof e)return n;if(e instanceof f)return Oe;if(e instanceof Dt)return uo;if(e instanceof F)return kn;if(e instanceof K)return Sn;if(Array.isArray(e)){for(var t,o,a=e.length,s=0,i=e;s<i.length;s+=1){if(o=S(i[s]),t){if(t===o)continue;t=u;break}t=o}return de(t||u,a)}return Kt}function Vn(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof f||e instanceof F||e instanceof K?e.toString():JSON.stringify(e)}K.prototype.toString=function(){return this.name},K.fromString=function(e){return e?new K({name:e,available:!1}):null},K.prototype.serialize=function(){return["image",this.name]},le=function(e,t){this.type=e,this.value=t},le.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Ls(e[1]))return t.error("invalid value");var o=e[1],s=S(o),n=t.expectedType;return"array"!==s.kind||0!==s.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(s=n),new le(s,o)},le.prototype.evaluate=function(){return this.value},le.prototype.eachChild=function(){},le.prototype.outputDefined=function(){return!0},le.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof f?["rgba"].concat(this.value.toArray()):this.value instanceof F?this.value.serialize():this.value},L=function(e){this.name="ExpressionEvaluationError",this.message=e},L.prototype.toJSON=function(){return this.message},Ns={string:h,number:n,boolean:d,object:Kt},B=function(e,t){this.type=e,this.args=t},B.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var s,o,i,a,r,l,n=1,c=e[0];if("array"===c){if(e.length>2){if(s=e[1],"string"!=typeof s||!(s in Ns)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ns[s],n++}else i=u;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);l=e[2],n++}o=de(i,l)}else o=Ns[c];for(a=[];n<e.length;n++){if(r=t.parse(e[n],n,u),!r)return null;a.push(r)}return new B(o,a)},B.prototype.evaluate=function(e){for(var n,t=0;t<this.args.length;t++){if(n=this.args[t].evaluate(e),!Tn(this.type,S(n)))return n;if(t===this.args.length-1)throw new L("Expected value to be of type "+y(this.type)+", but found "+y(S(n))+" instead.")}return null},B.prototype.eachChild=function(e){this.args.forEach(e)},B.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},B.prototype.serialize=function(){var e,s,t=this.type,n=[t.kind];return"array"===t.kind&&(e=t.itemType,("string"===e.kind||"number"===e.kind||"boolean"===e.kind)&&(n.push(e.kind),s=t.N,("number"==typeof s||this.args.length>1)&&n.push(s))),n.concat(this.args.map(function(e){return e.serialize()}))},_e=function(e){this.type=kn,this.sections=e},_e.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");if(l=e[1],!Array.isArray(l)&&"object"==typeof l)return t.error("First argument must be an image or text section.");for(var s,o,a,c,l,d,m,f,i=[],p=!1,r=1;r<=e.length-1;++r)if(s=e[r],p&&"object"==typeof s&&!Array.isArray(s)){if(p=!1,d=null,s["font-scale"]&&!(d=t.parse(s["font-scale"],1,n)))return null;if(m=null,s["text-font"]&&!(m=t.parse(s["text-font"],1,de(h))))return null;if(f=null,s["text-color"]&&!(f=t.parse(s["text-color"],1,Oe)))return null;a=i[i.length-1],a.scale=d,a.font=m,a.textColor=f}else{if(c=t.parse(e[r],1,u),!c)return null;if(o=c.type.kind,"string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,i.push({content:c,scale:null,font:null,textColor:null})}return new _e(i)},_e.prototype.evaluate=function(e){return new F(this.sections.map(function(t){var n=t.content.evaluate(e);return S(n)===Sn?new Rs("",n,null,null,null):new Rs(Vn(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},_e.prototype.eachChild=function(e){for(var t,n=0,s=this.sections;n<s.length;n+=1)t=s[n],e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)},_e.prototype.outputDefined=function(){return!1},_e.prototype.serialize=function(){for(var e,t,n=["format"],s=0,o=this.sections;s<o.length;s+=1)e=o[s],n.push(e.content.serialize()),t={},e.scale&&(t["font-scale"]=e.scale.serialize()),e.font&&(t["text-font"]=e.font.serialize()),e.textColor&&(t["text-color"]=e.textColor.serialize()),n.push(t);return n},Ee=function(e){this.type=Sn,this.input=e},Ee.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,h);return n?new Ee(n):t.error("No image name provided.")},Ee.prototype.evaluate=function(e){var n=this.input.evaluate(e),t=K.fromString(n);return t&&e.availableImages&&(t.available=e.availableImages.indexOf(n)>-1),t},Ee.prototype.eachChild=function(e){e(this.input)},Ee.prototype.outputDefined=function(){return!1},Ee.prototype.serialize=function(){return["image",this.input.serialize()]},Lr={"to-boolean":d,"to-color":Oe,"to-number":n,"to-string":h},ne=function(e,t){this.type=e,this.args=t},ne.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");if(n=e[0],("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var n,o,a=Lr[n],i=[],s=1;s<e.length;s++){if(o=t.parse(e[s],s,u),!o)return null;i.push(o)}return new ne(a,i)},ne.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(n=0,o=this.args;n<o.length;n+=1){if(s=null,(t=o[n].evaluate(e))instanceof f)return t;if("string"==typeof t){if(i=e.parseColor(t),i)return i}else if(Array.isArray(t)&&!(s=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Vr(t[0],t[1],t[2],t[3])))return new f(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new L(s||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var t,n,s,o,i,c,a=null,r=0,l=this.args;r<l.length;r+=1){if(null===(a=l[r].evaluate(e)))return 0;if(c=Number(a),!isNaN(c))return c}throw new L("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?F.fromString(Vn(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?K.fromString(Vn(this.args[0].evaluate(e))):Vn(this.args[0].evaluate(e))},ne.prototype.eachChild=function(e){this.args.forEach(e)},ne.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ne.prototype.serialize=function(){if("formatted"===this.type.kind)return new _e([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ee(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e},Fr=["Unknown","Point","LineString","Polygon"],Ie=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null},Ie.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ie.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Fr[this.feature.type]:this.feature.type:null},Ie.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ie.prototype.canonicalID=function(){return this.canonical},Ie.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ie.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=f.parse(e)),t},P=function(e,t,n,s){this.name=e,this.type=t,this._evaluate=n,this.args=s},P.prototype.evaluate=function(e){return this._evaluate(e,this.args)},P.prototype.eachChild=function(e){this.args.forEach(e)},P.prototype.outputDefined=function(){return!1},P.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},P.parse=function(e,t){if(r=e[0],n=P.definitions[r],!n)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var n,a,r,m,f,b,w,E=Array.isArray(n)?n[0]:n.type,v=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,l=v.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),i=null,d=0,_=l;d<_.length;d+=1){for(var g=_[d],s=g[0],k=g[1],i=new We(t.registry,t.path,null,t.scope),o=[],p=!1,c=1;c<e.length;c++){var C=e[c],O=Array.isArray(s)?s[c-1]:s.type,j=i.parse(C,1+o.length,O);if(!j){p=!0;break}o.push(j)}if(!p)if(Array.isArray(s)&&s.length!==o.length)i.error("Expected "+s.length+" arguments, but found "+o.length+" instead.");else{for(a=0;a<o.length;a++)f=Array.isArray(s)?s[a]:s.type,b=o[a],i.concat(a+1).checkSubtype(f,b.type);if(0===i.errors.length)return new P(r,E,k,o)}}if(1===l.length)(w=t.errors).push.apply(w,i.errors);else{for(var x=(l.length?l:v).map(function(e){return t=e[0],Array.isArray(t)?"("+t.map(y).join(", ")+")":"("+y(t.type)+"...)";var t}).join(" | "),h=[],u=1;u<e.length;u++){if(m=t.parse(e[u],1+h.length),!m)return null;h.push(y(m.type))}t.error("Expected arguments of type "+x+", but found ("+h.join(", ")+") instead.")}return null},P.register=function(e,t){for(var n in P.definitions=t,t)e[n]=P},Fe=function(e,t,n){this.type=uo,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t},Fe.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var s,o,i,n=e[1];return"object"!=typeof n||Array.isArray(n)?t.error("Collator options argument must be an object."):(s=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,d),s?(o=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,d),o?(i=null,n.locale&&!(i=t.parse(n.locale,1,h))?null:new Fe(s,o,i)):null):null)},Fe.prototype.evaluate=function(e){return new Dt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Fe.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Fe.prototype.outputDefined=function(){return!1},Fe.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]},Re=8192;function Go(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ds(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function zl(e,t){var n,o=(180+e[0])/360,i=(n=e[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360),s=Math.pow(2,t.z);return[Math.round(o*s*Re),Math.round(i*s*Re)]}function Dl(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function Qo(e,t){for(var s,i,a,r,c,l,d,h=!1,u=0,f=t.length;u<f;u++)for(var o=t[u],n=0,m=o.length;n<m-1;n++){if(s=e,l=o[n],d=o[n+1],r=void 0,a=void 0,i=void 0,c=void 0,r=s[0]-l[0],a=s[1]-l[1],i=s[0]-d[0],c=s[1]-d[1],r*c-i*a==0&&r*i<=0&&a*c<=0)return!1;Dl(e,o[n],o[n+1])&&(h=!h)}return h}function Rl(e,t){for(var n=0;n<t.length;n++)if(Qo(e,t[n]))return!0;return!1}function _r(e,t,n,s){var d=e[0]-n[0],u=e[1]-n[1],c=t[0]-n[0],l=t[1]-n[1],a=s[0]-n[0],r=s[1]-n[1],o=d*r-a*u,i=c*r-a*l;return o>0&&i<0||o<0&&i>0}function Zl(e,t,n){for(var s,o,i,a,r,c,l,d,h,u=0,m=n;u<m.length;u+=1)for(c=m[u],i=0;i<c.length-1;++i)if(a=e,r=t,s=c[i],o=c[i+1],l=void 0,d=void 0,h=void 0,h=[r[0]-a[0],r[1]-a[1]],0!=(l=[o[0]-s[0],o[1]-s[1]],d=h,l[0]*d[1]-l[1]*d[0])&&_r(a,r,s,o)&&_r(s,o,a,r))return!0;return!1}function dr(e,t){for(var n,s=0;s<e.length;++s)if(!Qo(e[s],t))return!1;for(n=0;n<e.length-1;++n)if(Zl(e[n],e[n+1],t))return!1;return!0}function Jl(e,t){for(var n=0;n<t.length;n++)if(dr(e,t[n]))return!0;return!1}function oi(e,t,n){for(var o,i,a,r=[],s=0;s<e.length;s++){for(i=[],o=0;o<e[s].length;o++)a=zl(e[s][o],n),Go(t,a),i.push(a);r.push(i)}return r}function Za(e,t,n){for(var i,o=[],s=0;s<e.length;s++)i=oi(e[s],t,n),o.push(i);return o}function Wa(e,t,n,s){if(e[0]<n[0]||e[0]>n[2]){var o=.5*s,i=e[0]-n[0]>o?-s:n[0]-e[0]>o?s:0;0===i&&(i=e[0]-n[2]>o?-s:n[2]-e[0]>o?s:0),e[0]+=i}Go(t,e)}function Va(e,t,n,s){for(var o,i,a,r,h=Math.pow(2,s.z)*Re,d=[s.x*Re,s.y*Re],u=[],c=0,l=e;c<l.length;c+=1)for(o=0,i=l[c];o<i.length;o+=1)a=i[o],r=[a.x+d[0],a.y+d[1]],Wa(r,t,n,h),u.push(r);return u}function Pa(e,t,n,s){for(var o,i,a,l,u,h,m,b=Math.pow(2,s.z)*Re,v=[s.x*Re,s.y*Re],r=[],c=0,g=e;c<g.length;c+=1){for(var p=[],d=0,f=g[c];d<f.length;d+=1)h=f[d],m=[h.x+v[0],h.y+v[1]],Go(t,m),p.push(m);r.push(p)}if(t[2]-t[0]<=b/2){(i=t)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(o=0,l=r;o<l.length;o+=1)for(a=0,u=l[o];a<u.length;a+=1)Wa(u[a],t,n,b)}return r}ae=function(e,t){this.type=d,this.geojson=e,this.geometries=t};function ws(e){if(e instanceof P){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof ae)return!1;var t=!0;return e.eachChild(function(e){t&&!ws(e)&&(t=!1)}),t}function On(e){if(e instanceof P&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!On(e)&&(t=!1)}),t}function js(e,t){if(e instanceof P&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!js(e,t)&&(n=!1)}),n}ae.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Ls(e[1])){var s,o,i,n=e[1];if("FeatureCollection"===n.type){for(s=0;s<n.features.length;++s)if(o=n.features[s].geometry.type,"Polygon"===o||"MultiPolygon"===o)return new ae(n,n.features[s].geometry)}else if("Feature"===n.type){if(i=n.geometry.type,"Polygon"===i||"MultiPolygon"===i)return new ae(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new ae(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ae.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var i,a,r,c,l,d,u,h,s=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if("Polygon"===t.type){if(u=oi(t.coordinates,n,o),h=Va(e.geometry(),s,n,o),!ds(s,n))return!1;for(a=0,c=h;a<c.length;a+=1)if(!Qo(c[a],u))return!1}if("MultiPolygon"===t.type){if(l=Za(t.coordinates,n,o),d=Va(e.geometry(),s,n,o),!ds(s,n))return!1;for(i=0,r=d;i<r.length;i+=1)if(!Rl(r[i],l))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var i,a,r,c,l,d,u,h,s=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if("Polygon"===t.type){if(u=oi(t.coordinates,n,o),h=Pa(e.geometry(),s,n,o),!ds(s,n))return!1;for(a=0,c=h;a<c.length;a+=1)if(!dr(c[a],u))return!1}if("MultiPolygon"===t.type){if(l=Za(t.coordinates,n,o),d=Pa(e.geometry(),s,n,o),!ds(s,n))return!1;for(i=0,r=d;i<r.length;i+=1)if(!Jl(r[i],l))return!1}return!0}(e,this.geometries)}return!1},ae.prototype.eachChild=function(){},ae.prototype.outputDefined=function(){return!0},ae.prototype.serialize=function(){return["within",this.geojson]},xe=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t},xe.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new xe(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},xe.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},xe.prototype.eachChild=function(){},xe.prototype.outputDefined=function(){return!1},xe.prototype.serialize=function(){return["var",this.name]},We=function(e,t,n,s,o){void 0===t&&(t=[]),void 0===s&&(s=new Qt),void 0===o&&(o=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=s,this.errors=o,this.expectedType=n};function di(e){if(e instanceof xe)return di(e.boundExpression);if(e instanceof P&&"error"===e.name)return!1;if(e instanceof Fe)return!1;if(e instanceof ae)return!1;var n=e instanceof ne||e instanceof B,t=!0;return e.eachChild(function(e){t=n?t&&di(e):t&&e instanceof le}),!!t&&ws(e)&&js(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gs(e,t){for(var s,a,r=e.length-1,o=0,i=r,n=0;o<=i;)if(s=e[n=Math.floor((o+i)/2)],a=e[n+1],s<=t){if(n===r||t<a)return n;o=n+1}else{if(!(s>t))throw new L("Input is not a number.");i=n-1}return 0}We.prototype.parse=function(e,t,n,s,o){return void 0===o&&(o={}),t?this.concat(t,n,s)._parse(e,o):this._parse(e,o)},We.prototype._parse=function(e,t){function r(e,t,n){return"assert"===n?new B(t,[e]):"coerce"===n?new ne(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');if(o=e[0],"string"!=typeof o)return this.error("Expression name must be a string, but found "+typeof o+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;if(a=this.registry[o],a){if(n=a.parse(e,this),!n)return null;if(this.expectedType){var n,o,a,c,s=this.expectedType,i=n.type;if("string"!==s.kind&&"number"!==s.kind&&"boolean"!==s.kind&&"object"!==s.kind&&"array"!==s.kind||"value"!==i.kind)if("color"!==s.kind&&"formatted"!==s.kind&&"resolvedImage"!==s.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(s,i))return null}else n=r(n,s,t.typeAnnotation||"coerce");else n=r(n,s,t.typeAnnotation||"assert")}if(!(n instanceof le)&&"resolvedImage"!==n.type.kind&&di(n)){c=new Ie;try{n=new le(n.type,n.evaluate(c))}catch(e){return this.error(e.message),null}}return n}return this.error('Unknown expression "'+o+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},We.prototype.concat=function(e,t,n){var s="number"==typeof e?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new We(this.registry,s,t||null,o,this.errors)},We.prototype.error=function(e){for(var s,n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];s=""+this.key+n.map(function(e){return"["+e+"]"}).join(""),this.errors.push(new ue(s,e))},We.prototype.checkSubtype=function(e,t){var n=Tn(e,t);return n&&this.error(n),n},ye=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(s=0,o=n;s<o.length;s+=1){var s,o,i=o[s],a=i[0],r=i[1];this.labels.push(a),this.outputs.push(r)}};function A(e,t,n){return e*(1-n)+t*n}ye.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(r=t.parse(e[1],1,n),!r)return null;o=[],i=null,t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(s=1;s<e.length;s+=2){var s,o,i,a,r,c=1===s?-1/0:e[s],d=e[s+1],l=s,u=s+1;if("number"!=typeof c)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(o.length&&o[o.length-1][0]>=c)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);if(a=t.parse(d,u,i),!a)return null;i=i||a.type,o.push([c,a])}return new ye(i,r,o)},ye.prototype.evaluate=function(e){var s,o,t=this.labels,n=this.outputs;return 1===t.length?n[0].evaluate(e):(s=this.input.evaluate(e),s<=t[0]?n[0].evaluate(e):(o=t.length,s>=t[o-1]?n[o-1].evaluate(e):n[gs(t,s)].evaluate(e)))},ye.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},ye.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},ye.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var fs=Object.freeze({__proto__:null,number:A,color:function(e,t,n){return new f(A(e.r,t.r,n),A(e.g,t.g,n),A(e.b,t.b,n),A(e.a,t.a,n))},array:function(e,t,n){return e.map(function(e,s){return A(e,t[s],n)})}}),za=.95047,_a=1,ya=1.08883,ja=4/29,cn=6/29,ba=3*cn*cn,gd=cn*cn*cn,Cd=Math.PI/180,Ed=180/Math.PI;function xi(e){return e>gd?Math.pow(e,1/3):e/ba+ja}function Ci(e){return e>cn?e*e*e:ba*(e-ja)}function ki(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Li(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function aa(e){var t=Li(e.r),n=Li(e.g),s=Li(e.b),i=xi((.4124564*t+.3575761*n+.1804375*s)/za),o=xi((.2126729*t+.7151522*n+.072175*s)/_a);return{l:116*o-16,a:500*(i-o),b:200*(o-xi((.0193339*t+.119192*n+.9503041*s)/ya)),alpha:e.a}}function Zi(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,s=isNaN(e.b)?t:t-e.b/200;return t=_a*Ci(t),n=za*Ci(n),s=ya*Ci(s),new f(ki(3.2404542*n-1.5371385*t-.4985314*s),ki(-.969266*n+1.8760108*t+.041556*s),ki(.0556434*n-.2040259*t+1.0572252*s),e.alpha)}function zd(e,t,n){var s=t-e;return e+n*(s>180||s<-180?s-360*Math.round(s/360):s)}var yn={forward:aa,reverse:Zi,interpolate:function(e,t,n){return{l:A(e.l,t.l,n),a:A(e.a,t.a,n),b:A(e.b,t.b,n),alpha:A(e.alpha,t.alpha,n)}}},_n={forward:function(e){var t=aa(e),i=t.l,n=t.a,s=t.b,o=Math.atan2(s,n)*Ed;return{h:o<0?o+360:o,c:Math.sqrt(n*n+s*s),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Cd,n=e.c;return Zi({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:zd(e.h,t.h,n),c:A(e.c,t.c,n),l:A(e.l,t.l,n),alpha:A(e.alpha,t.alpha,n)}}},Gi=Object.freeze({__proto__:null,lab:yn,hcl:_n}),R=function(e,t,n,s,o){this.type=e,this.operator=t,this.interpolation=n,this.input=s,this.labels=[],this.outputs=[];for(i=0,a=o;i<a.length;i+=1){var i,a,r=a[i],c=r[0],l=r[1];this.labels.push(c),this.outputs.push(l)}};function mo(e,t,n,s){var o=s-n,i=e-n;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}R.interpolationFactor=function(e,t,n,s){var o,i=0;return"exponential"===e.name?i=mo(t,e.base,n,s):"linear"===e.name?i=mo(t,1,n,s):"cubic-bezier"===e.name&&(o=e.controlPoints,i=new _o(o[0],o[1],o[2],o[3]).solve(mo(t,1,n,s))),i},R.parse=function(e,t){var s,i,a,r,c,l,m=e[0],o=e[1],u=e[2],d=e.slice(3);if(!Array.isArray(o)||0===o.length)return t.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){if(l=o[1],"number"!=typeof l)return t.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:l}}else{if("cubic-bezier"!==o[0])return t.error("Unknown interpolation type "+String(o[0]),1,0);if(r=o.slice(1),4!==r.length||r.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:r}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(u=t.parse(u,2,n)))return null;a=[],s=null,"interpolate-hcl"===m||"interpolate-lab"===m?s=Oe:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(i=0;i<d.length;i+=2){var h=d[i],p=d[i+1],f=i+3,g=i+4;if("number"!=typeof h)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(a.length&&a[a.length-1][0]>=h)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);if(c=t.parse(p,g,s),!c)return null;s=s||c.type,a.push([h,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new R(s,m,o,u,a):t.error("Type "+y(s)+" is not interpolatable.")},R.prototype.evaluate=function(e){if(t=this.labels,n=this.outputs,1===t.length)return n[0].evaluate(e);if(s=this.input.evaluate(e),s<=t[0])return n[0].evaluate(e);if(i=t.length,s>=t[i-1])return n[i-1].evaluate(e);var t,n,s,i,o=gs(t,s),l=t[o],d=t[o+1],a=R.interpolationFactor(this.interpolation,s,l,d),r=n[o].evaluate(e),c=n[o+1].evaluate(e);return"interpolate"===this.operator?fs[this.type.kind.toLowerCase()](r,c,a):"interpolate-hcl"===this.operator?_n.reverse(_n.interpolate(_n.forward(r),_n.forward(c),a)):yn.reverse(yn.interpolate(yn.forward(r),yn.forward(c),a))},R.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},R.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},R.prototype.serialize=function(){t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t,n=[this.operator,t,this.input.serialize()],e=0;e<this.labels.length;e++)n.push(this.labels[e],this.outputs[e].serialize());return n},Ae=function(e,t){this.type=e,this.args=t},Ae.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");n=null,s=t.expectedType,s&&"value"!==s.kind&&(n=s);for(var n,s,i,c,l,o=[],a=0,r=e.slice(1);a<r.length;a+=1){if(c=r[a],i=t.parse(c,1+o.length,n,void 0,{typeAnnotation:"omit"}),!i)return null;n=n||i.type,o.push(i)}return l=s&&o.some(function(e){return Tn(s,e.type)}),new Ae(l?u:n,o)},Ae.prototype.evaluate=function(e){for(var n,t=null,o=0,s=0,i=this.args;s<i.length&&(o++,(t=i[s].evaluate(e))&&t instanceof K&&!t.available&&(n||(n=t.name),t=null,o===this.args.length&&(t=n)),null===t);s+=1);return t},Ae.prototype.eachChild=function(e){this.args.forEach(e)},Ae.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ae.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e},De=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t},De.prototype.evaluate=function(e){return this.result.evaluate(e)},De.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},De.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var s,i,a,o=[],n=1;n<e.length-1;n+=2){if(s=e[n],"string"!=typeof s)return t.error("Expected string, but found "+typeof s+" instead.",n);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);if(i=t.parse(e[n+1],n+1),!i)return null;o.push([s,i])}return a=t.parse(e[e.length-1],e.length-1,t.expectedType,o),a?new De(o,a):null},De.prototype.outputDefined=function(){return this.result.outputDefined()},De.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var s=n[t],o=s[0],i=s[1];e.push(o,i.serialize())}return e.push(this.result.serialize()),e},Xe=function(e,t,n){this.type=e,this.index=t,this.input=n},Xe.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i,o=t.parse(e[1],1,n),s=t.parse(e[2],2,de(t.expectedType||u));return!o||!s?null:(i=s.type,new Xe(i.itemType,o,s))},Xe.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new L("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new L("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new L("Array index must be an integer, but found "+t+" instead.");return n[t]},Xe.prototype.eachChild=function(e){e(this.index),e(this.input)},Xe.prototype.outputDefined=function(){return!1},Xe.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]},tt=function(e,t){this.type=d,this.needle=e,this.haystack=t},tt.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var s=t.parse(e[1],1,u),o=t.parse(e[2],2,u);return s&&o?Lo(s.type,[d,h,n,mn,u])?new tt(s,o):t.error("Expected first argument to be of type boolean, string, number or null, but found "+y(s.type)+" instead"):null},tt.prototype.evaluate=function(e){var n=this.needle.evaluate(e),t=this.haystack.evaluate(e);if(!t)return!1;if(!Nn(n,["boolean","string","number","null"]))throw new L("Expected first argument to be of type boolean, string, number or null, but found "+y(S(n))+" instead.");if(!Nn(t,["string","array"]))throw new L("Expected second argument to be of type array or string, but found "+y(S(t))+" instead.");return t.indexOf(n)>=0},tt.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},tt.prototype.outputDefined=function(){return!0},tt.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]},Ce=function(e,t,s){this.type=n,this.needle=e,this.haystack=t,this.fromIndex=s},Ce.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i,s=t.parse(e[1],1,u),o=t.parse(e[2],2,u);return!s||!o?null:Lo(s.type,[d,h,n,mn,u])?4===e.length?(i=t.parse(e[3],3,n),i?new Ce(s,o,i):null):new Ce(s,o):t.error("Expected first argument to be of type boolean, string, number or null, but found "+y(s.type)+" instead")},Ce.prototype.evaluate=function(e){var s,t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Nn(t,["boolean","string","number","null"]))throw new L("Expected first argument to be of type boolean, string, number or null, but found "+y(S(t))+" instead.");if(!Nn(n,["string","array"]))throw new L("Expected second argument to be of type array or string, but found "+y(S(n))+" instead.");return this.fromIndex?(s=this.fromIndex.evaluate(e),n.indexOf(t,s)):n.indexOf(t)},Ce.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Ce.prototype.outputDefined=function(){return!1},Ce.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]},Ke=function(e,t,n,s,o,i){this.inputType=e,this.type=t,this.input=n,this.cases=s,this.outputs=o,this.otherwise=i},Ke.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);for(var n,s,o,a,r,c,l,d,h,m,g,p={},f=[],i=2;i<e.length-1;i+=2){if(a=e[i],g=e[i+1],Array.isArray(a)||(a=[a]),s=t.concat(i),0===a.length)return s.error("Expected at least one branch label.");for(l=0,m=a;l<m.length;l+=1){if(n=m[l],"number"!=typeof n&&"string"!=typeof n)return s.error("Branch labels must be numbers or strings.");if("number"==typeof n&&Math.abs(n)>Number.MAX_SAFE_INTEGER)return s.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof n&&Math.floor(n)!==n)return s.error("Numeric branch labels must be integer values.");if(c){if(s.checkSubtype(c,S(n)))return null}else c=S(n);if(void 0!==p[String(n)])return s.error("Branch labels must be unique.");p[String(n)]=f.length}if(d=t.parse(g,i,o),!d)return null;o=o||d.type,f.push(d)}return r=t.parse(e[1],1,u),r?(h=t.parse(e[e.length-1],e.length-1,o),h?"value"!==r.type.kind&&t.concat(1).checkSubtype(c,r.type)?null:new Ke(c,o,r,p,f,h):null):null},Ke.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(S(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Ke.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ke.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Ke.prototype.serialize=function(){for(var e,h=this,t=["match",this.input.serialize()],n=[],c={},o=0,a=Object.keys(this.cases).sort();o<a.length;o+=1)e=a[o],void 0===(u=c[this.cases[e]])?(c[this.cases[e]]=n.length,n.push([this.cases[e],[e]])):n[u][1].push(e);for(var r=function(e){return"number"===h.inputType.kind?Number(e):e},s=0,l=n;s<l.length;s+=1){var d=l[s],u=d[0],i=d[1];1===i.length?t.push(r(i[0])):t.push(i.map(r)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t},Ye=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n},Ye.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var n,o,i,a,r=[],s=1;s<e.length-1;s+=2){if(i=t.parse(e[s],s,d),!i)return null;if(o=t.parse(e[s+1],s+1,n),!o)return null;r.push([i,o]),n=n||o.type}return a=t.parse(e[e.length-1],e.length-1,n),a?new Ye(n,r,a):null},Ye.prototype.evaluate=function(e){for(t=0,n=this.branches;t<n.length;t+=1){var t,n,s=n[t],o=s[0],i=s[1];if(o.evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},Ye.prototype.eachChild=function(e){for(t=0,n=this.branches;t<n.length;t+=1){var t,n,s=n[t],o=s[0],i=s[1];e(o),e(i)}e(this.otherwise)},Ye.prototype.outputDefined=function(){return this.branches.every(function(e){return e[0],e[1].outputDefined()})&&this.otherwise.outputDefined()},Ye.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e},Pe=function(e,t,n,s){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=s};function Yi(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Ji(e,t,n,s){return 0===s.compare(t,n)}function It(e,t,n){var s="=="!==e&&"!="!==e;return function(){function o(e,t,n){this.type=d,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return o.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n,r,a=e[0],i=t.parse(e[1],1,u);if(!i)return null;if(!Yi(a,i.type))return t.concat(1).error('"'+a+`" comparisons are not supported for type '`+y(i.type)+"'.");if(n=t.parse(e[2],2,u),!n)return null;if(!Yi(a,n.type))return t.concat(2).error('"'+a+`" comparisons are not supported for type '`+y(n.type)+"'.");if(i.type.kind!==n.type.kind&&"value"!==i.type.kind&&"value"!==n.type.kind)return t.error("Cannot compare types '"+y(i.type)+"' and '"+y(n.type)+"'.");if(s&&("value"===i.type.kind&&"value"!==n.type.kind?i=new B(n.type,[i]):"value"!==i.type.kind&&"value"===n.type.kind&&(n=new B(i.type,[n]))),r=null,4===e.length){if("string"!==i.type.kind&&"string"!==n.type.kind&&"value"!==i.type.kind&&"value"!==n.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(r=t.parse(e[3],3,uo)))return null}return new o(i,n,r)},o.prototype.evaluate=function(o){var r,c,l,d,i=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(s&&this.hasUntypedArgument&&(r=S(i),c=S(a),r.kind!==c.kind||"string"!==r.kind&&"number"!==r.kind))throw new L('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+r.kind+", "+c.kind+") instead.");return this.collator&&!s&&this.hasUntypedArgument&&(l=S(i),d=S(a),"string"!==l.kind||"string"!==d.kind)?t(o,i,a):this.collator?n(o,i,a,this.collator.evaluate(o)):t(o,i,a)},o.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},o.prototype.outputDefined=function(){return!0},o.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},o}()}Pe.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i,s=t.parse(e[1],1,u),o=t.parse(e[2],2,n);return!s||!o?null:Lo(s.type,[de(u),h,u])?4===e.length?(i=t.parse(e[3],3,n),i?new Pe(s.type,s,o,i):null):new Pe(s.type,s,o):t.error("Expected first argument to be of type array or string, but found "+y(s.type)+" instead")},Pe.prototype.evaluate=function(e){var s,t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Nn(t,["string","array"]))throw new L("Expected first argument to be of type array or string, but found "+y(S(t))+" instead.");return this.endIndex?(s=this.endIndex.evaluate(e),t.slice(n,s)):t.slice(n)},Pe.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Pe.prototype.outputDefined=function(){return!1},Pe.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Rd=It("==",function(e,t,n){return t===n},Ji),Pd=It("!=",function(e,t,n){return t!==n},function(e,t,n,s){return!Ji(0,t,n,s)}),Hd=It("<",function(e,t,n){return t<n},function(e,t,n,s){return s.compare(t,n)<0}),Id=It(">",function(e,t,n){return t>n},function(e,t,n,s){return s.compare(t,n)>0}),Bd=It("<=",function(e,t,n){return t<=n},function(e,t,n,s){return s.compare(t,n)<=0}),Vd=It(">=",function(e,t,n){return t>=n},function(e,t,n,s){return s.compare(t,n)>=0}),rt=function(e,t,n,s,o){this.type=h,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=s,this.maxFractionDigits=o};rt.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var s,o,i,a,r,c=t.parse(e[1],1,n);return c?(s=e[2],"object"!=typeof s||Array.isArray(s)?t.error("NumberFormat options argument must be an object."):(o=null,s.locale&&!(o=t.parse(s.locale,1,h))?null:(i=null,s.currency&&!(i=t.parse(s.currency,1,h))?null:(a=null,s["min-fraction-digits"]&&!(a=t.parse(s["min-fraction-digits"],1,n))?null:(r=null,s["max-fraction-digits"]&&!(r=t.parse(s["max-fraction-digits"],1,n))?null:new rt(c,o,i,a,r)))))):null},rt.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},rt.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},rt.prototype.outputDefined=function(){return!1},rt.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]},nt=function(e){this.type=n,this.input=e},nt.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+y(n.type)+" instead."):new nt(n):null},nt.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new L("Expected value to be of type string or array, but found "+y(S(t))+" instead.")},nt.prototype.eachChild=function(e){e(this.input)},nt.prototype.outputDefined=function(){return!1},nt.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e},Et={"==":Rd,"!=":Pd,">":Id,"<":Hd,">=":Vd,"<=":Bd,array:B,at:Xe,boolean:B,case:Ye,coalesce:Ae,collator:Fe,format:_e,image:Ee,in:tt,"index-of":Ce,interpolate:R,"interpolate-hcl":R,"interpolate-lab":R,length:nt,let:De,literal:le,match:Ke,number:B,"number-format":rt,object:B,slice:Pe,step:ye,string:B,"to-boolean":ne,"to-color":ne,"to-number":ne,"to-string":ne,var:xe,within:ae};function ga(e,t){var s=t[0],o=t[1],i=t[2],a=t[3],s=s.evaluate(e),o=o.evaluate(e),i=i.evaluate(e),n=a?a.evaluate(e):1,r=Vr(s,o,i,n);if(r)throw new L(r);return new f(s/255*n,o/255*n,i/255*n,n)}function Oa(e,t){return e in t}function $o(e,t){var n=t[e];return void 0===n?null:n}function vt(e){return{type:e}}function bi(e){return{result:"success",value:e}}function Tt(e){return{result:"error",value:e}}function zt(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function ka(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function gi(e){return!!e.expression&&e.expression.interpolated}function j(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ts(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function ou(e){return e}function Fa(e,t){var s,o,a,r,c,l,d,h,m,p,j,w="color"===t.type,b=e.stops&&"object"==typeof e.stops[0][0],x=b||void 0!==e.property,O=b||!x,n=e.type||(gi(t)?"exponential":"interval");if(w&&((e=Zt({},e)).stops&&(e.stops=e.stops.map(function(e){return[e[0],f.parse(e[1])]})),e.default?e.default=f.parse(e.default):e.default=f.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Gi[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===n)o=Da;else if("interval"===n)o=Ud;else if("categorical"===n){o=Wd,a=Object.create(null);for(r=0,h=e.stops;r<h.length;r+=1)m=h[r],a[m[0]]=m[1];p=typeof e.stops[0][0]}else{if("identity"!==n)throw new Error('Unknown function type "'+n+'"');o=Kd}if(b){for(var i={},y=[],v=0;v<e.stops.length;v++)c=e.stops[v],s=c[0].zoom,void 0===i[s]&&(i[s]={zoom:s,type:e.type,property:e.property,default:e.default,stops:[]},y.push(s)),i[s].stops.push([c[0].value,c[1]]);for(var g=[],u=0,_=y;u<_.length;u+=1)d=_[u],g.push([i[d].zoom,Fa(i[d],t)]);return l={name:"linear"},{kind:"composite",interpolationType:l,interpolationFactor:R.interpolationFactor.bind(void 0,l),zoomStops:g.map(function(e){return e[0]}),evaluate:function(n,s){var o=n.zoom;return Da({stops:g,base:e.base},t,o).evaluate(o,s)}}}return O?(j="exponential"===n?{name:"exponential",base:void 0!==e.base?e.base:1}:null,{kind:"camera",interpolationType:j,interpolationFactor:R.interpolationFactor.bind(void 0,j),zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(n){var s=n.zoom;return o(e,t,s,a,p)}}):{kind:"source",evaluate:function(n,s){var i=s&&s.properties?s.properties[e.property]:void 0;return void 0===i?bn(e.default,t.default):o(e,t,i,a,p)}}}function bn(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Wd(e,t,n,s,o){return bn(typeof n===o?s[n]:void 0,e.default,t.default)}function Ud(e,t,n){if("number"!==j(n))return bn(e.default,t.default);var o,s=e.stops.length;return 1===s?e.stops[0][1]:n<=e.stops[0][0]?e.stops[0][1]:n>=e.stops[s-1][0]?e.stops[s-1][1]:(o=gs(e.stops.map(function(e){return e[0]}),n),e.stops[o][1])}function Da(e,t,n){if(d=void 0!==e.base?e.base:1,"number"!==j(n))return bn(e.default,t.default);if(i=e.stops.length,1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var s,i,d,o=gs(e.stops.map(function(e){return e[0]}),n),r=function(e,t,n,s){var o=s-n,i=e-n;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}(n,d,e.stops[o][0],e.stops[o+1][0]),c=e.stops[o][1],l=e.stops[o+1][1],a=fs[t.type]||ou;return e.colorSpace&&"rgb"!==e.colorSpace&&(s=Gi[e.colorSpace],a=function(e,t){return s.reverse(s.interpolate(s.forward(e),s.forward(t),r))}),"function"==typeof c.evaluate?{evaluate:function(){for(var n,s,e=[],t=arguments.length;t--;)e[t]=arguments[t];if(n=c.evaluate.apply(void 0,e),s=l.evaluate.apply(void 0,e),void 0!==n&&void 0!==s)return a(n,s,r)}}:a(c,l,r)}function Kd(e,t,n){return"color"===t.type?n=f.parse(n):"formatted"===t.type?n=F.fromString(n.toString()):"resolvedImage"===t.type?n=K.fromString(n.toString()):j(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),bn(n,e.default,t.default)}P.register(Et,{error:[{kind:"error"},[h],function(e,t){var n=t[0];throw new L(n.evaluate(e))}],typeof:[h,[u],function(e,t){return y(S(t[0].evaluate(e)))}],"to-rgba":[de(n,4),[Oe],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Oe,[n,n,n],ga],rgba:[Oe,[n,n,n,n],ga],has:{type:d,overloads:[[[h],function(e,t){return Oa(t[0].evaluate(e),e.properties())}],[[h,Kt],function(e,t){var n=t[0],s=t[1];return Oa(n.evaluate(e),s.evaluate(e))}]]},get:{type:u,overloads:[[[h],function(e,t){return $o(t[0].evaluate(e),e.properties())}],[[h,Kt],function(e,t){var n=t[0],s=t[1];return $o(n.evaluate(e),s.evaluate(e))}]]},"feature-state":[u,[h],function(e,t){return $o(t[0].evaluate(e),e.featureState||{})}],properties:[Kt,[],function(e){return e.properties()}],"geometry-type":[h,[],function(e){return e.geometryType()}],id:[u,[],function(e){return e.id()}],zoom:[n,[],function(e){return e.globals.zoom}],"heatmap-density":[n,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[n,[],function(e){return e.globals.lineProgress||0}],accumulated:[u,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[n,vt(n),function(e,t){for(var s=0,n=0,o=t;n<o.length;n+=1)s+=o[n].evaluate(e);return s}],"*":[n,vt(n),function(e,t){for(var s=1,n=0,o=t;n<o.length;n+=1)s*=o[n].evaluate(e);return s}],"-":{type:n,overloads:[[[n,n],function(e,t){var n=t[0],s=t[1];return n.evaluate(e)-s.evaluate(e)}],[[n],function(e,t){return-t[0].evaluate(e)}]]},"/":[n,[n,n],function(e,t){var n=t[0],s=t[1];return n.evaluate(e)/s.evaluate(e)}],"%":[n,[n,n],function(e,t){var n=t[0],s=t[1];return n.evaluate(e)%s.evaluate(e)}],ln2:[n,[],function(){return Math.LN2}],pi:[n,[],function(){return Math.PI}],e:[n,[],function(){return Math.E}],"^":[n,[n,n],function(e,t){var n=t[0],s=t[1];return Math.pow(n.evaluate(e),s.evaluate(e))}],sqrt:[n,[n],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[n,[n],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[n,[n],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[n,[n],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[n,[n],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[n,[n],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[n,[n],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[n,[n],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[n,[n],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[n,[n],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[n,vt(n),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[n,vt(n),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[n,[n],function(e,t){var n=t[0];return Math.abs(n.evaluate(e))}],round:[n,[n],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[n,[n],function(e,t){var n=t[0];return Math.floor(n.evaluate(e))}],ceil:[n,[n],function(e,t){var n=t[0];return Math.ceil(n.evaluate(e))}],"filter-==":[d,[h,u],function(e,t){var n=t[0],s=t[1];return e.properties()[n.value]===s.value}],"filter-id-==":[d,[u],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[d,[h],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[d,[h,u],function(e,t){var o=t[0],i=t[1],n=e.properties()[o.value],s=i.value;return typeof n==typeof s&&n<s}],"filter-id-<":[d,[u],function(e,t){var o=t[0],n=e.id(),s=o.value;return typeof n==typeof s&&n<s}],"filter->":[d,[h,u],function(e,t){var o=t[0],i=t[1],n=e.properties()[o.value],s=i.value;return typeof n==typeof s&&n>s}],"filter-id->":[d,[u],function(e,t){var o=t[0],n=e.id(),s=o.value;return typeof n==typeof s&&n>s}],"filter-<=":[d,[h,u],function(e,t){var o=t[0],i=t[1],n=e.properties()[o.value],s=i.value;return typeof n==typeof s&&n<=s}],"filter-id-<=":[d,[u],function(e,t){var o=t[0],n=e.id(),s=o.value;return typeof n==typeof s&&n<=s}],"filter->=":[d,[h,u],function(e,t){var o=t[0],i=t[1],n=e.properties()[o.value],s=i.value;return typeof n==typeof s&&n>=s}],"filter-id->=":[d,[u],function(e,t){var o=t[0],n=e.id(),s=o.value;return typeof n==typeof s&&n>=s}],"filter-has":[d,[u],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[d,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[d,[de(h)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[d,[de(u)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[d,[h,de(u)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[d,[h,de(u)],function(e,t){var s=t[0],n=t[1];return function(e,t,n,s){for(;n<=s;){var o=n+s>>1;if(t[o]===e)return!0;t[o]>e?s=o-1:n=o+1}return!1}(e.properties()[s.value],n.value,0,n.value.length-1)}],all:{type:d,overloads:[[[d,d],function(e,t){var n=t[0],s=t[1];return n.evaluate(e)&&s.evaluate(e)}],[vt(d),function(e,t){for(var n=0,s=t;n<s.length;n+=1)if(!s[n].evaluate(e))return!1;return!0}]]},any:{type:d,overloads:[[[d,d],function(e,t){var n=t[0],s=t[1];return n.evaluate(e)||s.evaluate(e)}],[vt(d),function(e,t){for(var n=0,s=t;n<s.length;n+=1)if(s[n].evaluate(e))return!0;return!1}]]},"!":[d,[d],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[d,[h],function(e,t){var s=t[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(s.evaluate(e))}],upcase:[h,[h],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[h,[h],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[h,vt(u),function(e,t){return t.map(function(t){return Vn(t.evaluate(e))}).join("")}],"resolved-locale":[h,[uo],function(e,t){return t[0].evaluate(e).resolvedLocale()}]}),Xt=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ie,this._defaultValue=t?function(e){return"color"===e.type&&ts(e.default)?new f(0,0,0,0):"color"===e.type?f.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function us(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Et}function hs(e,t){var s=new We(Et,[],t?function(e){var t={color:Oe,string:h,number:n,enum:h,boolean:d,formatted:kn,resolvedImage:Sn};return"array"===e.type?de(t[e.value]||u,e.length):t[e.type]}(t):void 0),o=s.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return o?bi(new Xt(o,t)):Tt(s.errors)}Xt.prototype.evaluateWithoutErrorHandling=function(e,t,n,s,o,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=s,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)},Xt.prototype.evaluate=function(e,t,n,s,o,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=s,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i||null;try{var a=this.expression.evaluate(this._evaluator);if(a==null||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new L("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}},an=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!On(t.expression)},an.prototype.evaluateWithoutErrorHandling=function(e,t,n,s,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,s,o,i)},an.prototype.evaluate=function(e,t,n,s,o,i){return this._styleExpression.evaluate(e,t,n,s,o,i)},wt=function(e,t,n,s){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!On(t.expression),this.interpolationType=s};function Ha(e,t){if("error"===(e=hs(e,t)).result)return e;var n,i,a,s=e.value.expression,o=ws(s);return!o&&!zt(t)?Tt([new ue("","data expressions not supported")]):(i=js(s,["zoom"]),!i&&!ka(t)?Tt([new ue("","zoom expressions not supported")]):(n=vs(s),!n&&!i?Tt([new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):n instanceof ue?Tt([n]):n instanceof R&&!gi(t)?Tt([new ue("",'"interpolate" expressions cannot be used with this property')]):n?(a=n instanceof R?n.interpolation:void 0,bi(new wt(o?"camera":"composite",e.value,n.labels,a))):bi(new an(o?"constant":"source",e.value))))}wt.prototype.evaluateWithoutErrorHandling=function(e,t,n,s,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,s,o,i)},wt.prototype.evaluate=function(e,t,n,s,o,i){return this._styleExpression.evaluate(e,t,n,s,o,i)},wt.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?R.interpolationFactor(this.interpolationType,e,t,n):0},Jt=function(e,t){this._parameters=e,this._specification=t,Zt(this,Fa(this._parameters,this._specification))};function vs(e){if(t=null,e instanceof De)t=vs(e.result);else if(e instanceof Ae){for(var t,o,n=0,s=e.args;n<s.length;n+=1)if(o=s[n],t=vs(o))break}else(e instanceof ye||e instanceof R)&&e.input instanceof P&&"zoom"===e.input.name&&(t=e);return t instanceof ue||e.eachChild(function(e){var n=vs(e);n instanceof ue?t=n:!t&&n?t=new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function fe(e){var i,l,s=e.key,t=e.value,n=e.valueSpec||{},a=e.objectElementValidators||{},f=e.style,h=e.styleSpec,c=[],u=j(t);if("object"!==u)return[new o(s,t,"object expected, "+u+" found")];for(i in t){var d=i.split(".")[0],m=n[d]||n["*"],r=void 0;if(a[d])r=a[d];else if(n[d])r=he;else if(a["*"])r=a["*"];else{if(!n["*"]){c.push(new o(s,t[i],'unknown property "'+i+'"'));continue}r=he}c=c.concat(r({key:(s&&s+".")+i,value:t[i],valueSpec:m,style:f,styleSpec:h,object:t,objectKey:i},t))}for(l in n)a[l]||n[l].required&&void 0===n[l].default&&void 0===t[l]&&c.push(new o(s,t,'missing required property "'+l+'"'));return c}function Ya(e){var s,a,r,t=e.value,n=e.valueSpec,d=e.style,c=e.styleSpec,i=e.key,l=e.arrayElementValidator||he;if("array"!==j(t))return[new o(i,t,"array expected, "+j(t)+" found")];if(n.length&&t.length!==n.length)return[new o(i,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new o(i,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];a={type:n.value,values:n.values},c.$version<7&&(a.function=n.function),"object"===j(n.value)&&(a=n.value);for(r=[],s=0;s<t.length;s++)r=r.concat(l({array:t,arrayIndex:s,value:t[s],valueSpec:a,style:d,styleSpec:c,key:i+"["+s+"]"}));return r}function Ga(e){var i=e.key,t=e.value,n=e.valueSpec,s=j(t);return"number"===s&&t!=t&&(s="NaN"),"number"!==s?[new o(i,t,"number expected, "+s+" found")]:"minimum"in n&&t<n.minimum?[new o(i,t,t+" is less than the minimum value "+n.minimum)]:"maximum"in n&&t>n.maximum?[new o(i,t,t+" is greater than the maximum value "+n.maximum)]:[]}function Qa(e){var s,i,a,l=e.valueSpec,t=k(e.value.type),r={},c="categorical"!==t&&void 0===e.value.property,h=!c,d="array"===j(e.value.stops)&&"array"===j(e.value.stops[0])&&"object"===j(e.value.stops[0][0]),n=fe({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===t)return[new o(e.key,e.value,'identity function may not have a "stops" property')];var n=[],s=e.value;return n=n.concat(Ya({key:e.key,value:s,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:m})),"array"===j(s)&&0===s.length&&n.push(new o(e.key,s,"array must have at least one stop")),n},default:function(e){return he({key:e.key,value:e.value,valueSpec:l,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===t&&c&&n.push(new o(e.key,e.value,'missing required property "property"')),"identity"===t||e.value.stops||n.push(new o(e.key,e.value,'missing required property "stops"')),"exponential"===t&&e.valueSpec.expression&&!gi(e.valueSpec)&&n.push(new o(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(h&&!zt(e.valueSpec)?n.push(new o(e.key,e.value,"property functions not supported")):c&&!ka(e.valueSpec)&&n.push(new o(e.key,e.value,"zoom functions not supported"))),"categorical"!==t&&!d||void 0!==e.value.property||n.push(new o(e.key,e.value,'"property" property is required')),n;function m(e){var s=[],t=e.value,n=e.key;if("array"!==j(t))return[new o(n,t,"array expected, "+j(t)+" found")];if(2!==t.length)return[new o(n,t,"array length 2 expected, length "+t.length+" found")];if(d){if("object"!==j(t[0]))return[new o(n,t,"object expected, "+j(t[0])+" found")];if(void 0===t[0].zoom)return[new o(n,t,"object stop key must have zoom")];if(void 0===t[0].value)return[new o(n,t,"object stop key must have value")];if(a&&a>k(t[0].zoom))return[new o(n,t[0].zoom,"stop zoom values must appear in ascending order")];k(t[0].zoom)!==a&&(a=k(t[0].zoom),i=void 0,r={}),s=s.concat(fe({key:n+"[0]",value:t[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Ga,value:u}}))}else s=s.concat(u({key:n+"[0]",value:t[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},t));return us(mt(t[1]))?s.concat([new o(n+"[1]",t[1],"expressions are not allowed in function stops.")]):s.concat(he({key:n+"[1]",value:t[1],valueSpec:l,style:e.style,styleSpec:e.styleSpec}))}function u(e,n){var u,a=j(e.value),c=k(e.value),d=null!==e.value?e.value:n;if(s){if(a!==s)return[new o(e.key,d,a+" stop domain type must match previous stop domain type "+s)]}else s=a;return"number"!==a&&"string"!==a&&"boolean"!==a?[new o(e.key,d,"stop domain value must be a number, string, or boolean")]:"number"!==a&&"categorical"!==t?(u="number expected, "+a+" found",zt(l)&&void 0===t&&(u+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new o(e.key,d,u)]):"categorical"!==t||"number"!==a||isFinite(c)&&Math.floor(c)===c?"categorical"!==t&&"number"===a&&void 0!==i&&c<i?[new o(e.key,d,"stop domain values must appear in ascending order")]:(i=c,"categorical"===t&&c in r?[new o(e.key,d,"stop domain values must be unique")]:(r[c]=!0,[])):[new o(e.key,d,"integer expected, found "+c)]}}function qt(e){var t,n=("property"===e.expressionContext?Ha:hs)(mt(e.value),e.valueSpec);if("error"===n.result)return n.value.map(function(t){return new o(""+e.key+t.key,e.value,t.message)});if(t=n.value.expression||n.value._styleExpression.expression,"property"===e.expressionContext&&"text-font"===e.propertyKey&&!t.outputDefined())return[new o(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!On(t))return[new o(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!On(t))return[new o(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!js(t,["zoom","feature-state"]))return[new o(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!ws(t))return[new o(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Os(e){var i=e.key,t=e.value,n=e.valueSpec,s=[];return Array.isArray(n.values)?-1===n.values.indexOf(k(t))&&s.push(new o(i,t,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(t)+" found")):-1===Object.keys(n.values).indexOf(k(t))&&s.push(new o(i,t,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(t)+" found")),s}function ii(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var n,t=0,s=e.slice(1);t<s.length;t+=1)if(n=s[t],!ii(n)&&"boolean"!=typeof n)return!1;return!0;default:return!0}}Jt.deserialize=function(e){return new Jt(e._parameters,e._specification)},Jt.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}},Ja={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Es(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};ii(e)||(e=Ss(e));var t=hs(e,Ja);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return{filter:function(e,n,s){return t.value.evaluate(e,n,{},s)},needGeometry:rr(e)}}function qd(e,t){return e<t?-1:e>t?1:0}function rr(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(rr(e[t]))return!0;return!1}function Ss(e){if(!e)return!0;var n,t=e[0];return e.length<=1?"any"!==t:"=="===t?fi(e[1],e[2],"=="):"!="===t?zs(fi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?fi(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(Ss))):"all"===t?["all"].concat(e.slice(1).map(Ss)):"none"===t?["all"].concat(e.slice(1).map(Ss).map(zs)):"in"===t?hr(e[1],e.slice(2)):"!in"===t?zs(hr(e[1],e.slice(2))):"has"===t?jr(e[1]):"!has"===t?zs(jr(e[1])):"within"!==t||e}function fi(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function hr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(qd)]]:["filter-in-small",e,["literal",t]]}}function jr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function zs(e){return["!",e]}function Xo(e){return ii(mt(e.value))?qt(Zt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ar(e)}function Ar(e){var n,i,a,r,c,t=e.value,s=e.key;if("array"!==j(t))return[new o(s,t,"array expected, "+j(t)+" found")];if(c=e.styleSpec,n=[],t.length<1)return[new o(s,t,"filter array must have at least 1 element")];switch(n=n.concat(Os({key:s+"[0]",value:t[0],valueSpec:c.filter_operator,style:e.style,styleSpec:e.styleSpec})),k(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===k(t[1])&&n.push(new o(s,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&n.push(new o(s,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":t.length>=2&&"string"!==(i=j(t[1]))&&n.push(new o(s+"[1]",t[1],"string expected, "+i+" found"));for(a=2;a<t.length;a++)i=j(t[a]),"$type"===k(t[1])?n=n.concat(Os({key:s+"["+a+"]",value:t[a],valueSpec:c.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&n.push(new o(s+"["+a+"]",t[a],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(r=1;r<t.length;r++)n=n.concat(Ar({key:s+"["+r+"]",value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=j(t[1]),2!==t.length?n.push(new o(s,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==i&&n.push(new o(s+"[1]",t[1],"string expected, "+i+" found"));break;case"within":i=j(t[1]),2!==t.length?n.push(new o(s,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"object"!==i&&n.push(new o(s+"[1]",t[1],"object expected, "+i+" found"))}return n}function zr(e,t){var a,l,u,h,i=e.key,r=e.style,d=e.styleSpec,n=e.value,s=e.objectKey,c=d[t+"_"+e.layerType];return c?(l=s.match(/^(.*)-transition$/),"paint"===t&&l&&c[l[1]]&&c[l[1]].transition?he({key:i,value:n,valueSpec:d.transition,style:r,styleSpec:d}):(a=e.valueSpec||c[s],a?"string"===j(n)&&zt(a)&&!a.tokens&&(h=/^{([^}]+)}$/.exec(n))?[new o(i,n,'"'+s+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(h[1])+" }`.")]:(u=[],"symbol"===e.layerType&&("text-field"===s&&r&&!r.glyphs&&u.push(new o(i,n,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&ts(mt(n))&&"identity"===k(n.type)&&u.push(new o(i,n,'"text-font" does not support identity functions'))),u.concat(he({key:e.key,value:n,valueSpec:a,style:r,styleSpec:d,expressionContext:"property",propertyType:t,propertyKey:s}))):[new o(i,n,'unknown property "'+s+'"')])):[]}function Pr(e){return zr(e,"paint")}function Ir(e){return zr(e,"layout")}function Br(e){var i,a,r,c,l,u,h,m,n=[],t=e.value,s=e.key,d=e.style,f=e.styleSpec;if(t.type||t.ref||n.push(new o(s,t,'either "type" or "ref" is required')),i=k(t.type),h=k(t.ref),t.id)for(m=k(t.id),c=0;c<e.arrayIndex;c++)u=d.layers[c],k(u.id)===m&&n.push(new o(s,t.id,'duplicate layer id "'+t.id+'", previously used at line '+u.id.__line__));return"ref"in t?(["type","source","source-layer","filter","layout"].forEach(function(e){e in t&&n.push(new o(s,t[e],'"'+e+'" is prohibited for ref layers'))}),d.layers.forEach(function(e){k(e.id)===h&&(l=e)}),l?l.ref?n.push(new o(s,t.ref,"ref cannot reference another ref layer")):i=k(l.type):n.push(new o(s,t.ref,'ref layer "'+h+'" not found'))):"background"!==i&&(t.source?(r=d.sources&&d.sources[t.source],a=r&&k(r.type),r?"vector"===a&&"raster"===i?n.push(new o(s,t.source,'layer "'+t.id+'" requires a raster source')):"raster"===a&&"raster"!==i?n.push(new o(s,t.source,'layer "'+t.id+'" requires a vector source')):"vector"!==a||t["source-layer"]?"raster-dem"===a&&"hillshade"!==i?n.push(new o(s,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==i||!t.paint||!t.paint["line-gradient"]||"geojson"===a&&r.lineMetrics||n.push(new o(s,t,'layer "'+t.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):n.push(new o(s,t,'layer "'+t.id+'" must specify a "source-layer"')):n.push(new o(s,t.source,'source "'+t.source+'" not found'))):n.push(new o(s,t,'missing required property "source"'))),n=n.concat(fe({key:s,value:t,valueSpec:f.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return he({key:s+".type",value:t.type,valueSpec:f.layer.type,style:e.style,styleSpec:e.styleSpec,object:t,objectKey:"type"})},filter:Xo,layout:function(e){return fe({layer:t,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Ir(Zt({layerType:i},e))}}})},paint:function(e){return fe({layer:t,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Pr(Zt({layerType:i},e))}}})}}})),n}function tn(e){var t=e.value,s=e.key,n=j(t);return"string"!==n?[new o(s,t,"string expected, "+n+" found")]:[]}Wo={promoteId:function(e){var n,o,s=e.key,t=e.value;if("string"===j(t))return tn({key:s,value:t});n=[];for(o in t)n.push.apply(n,tn({key:s+"."+o,value:t[o]}));return n}};function Ui(e){var i,r,c,t=e.value,n=e.key,s=e.styleSpec,a=e.style;if(!t.type)return[new o(n,t,'"type" is required')];switch(c=k(t.type),c){case"vector":case"raster":case"raster-dem":return fe({key:n,value:t,valueSpec:s["source_"+c.replace("-","_")],style:e.style,styleSpec:s,objectElementValidators:Wo});case"geojson":if(i=fe({key:n,value:t,valueSpec:s.source_geojson,style:a,styleSpec:s,objectElementValidators:Wo}),t.cluster)for(r in t.clusterProperties){var d=t.clusterProperties[r],l=d[0],u=d[1],h="string"==typeof l?[l,["accumulated"],["get",r]]:l;i.push.apply(i,qt({key:n+"."+r+".map",value:u,expressionContext:"cluster-map"})),i.push.apply(i,qt({key:n+"."+r+".reduce",value:h,expressionContext:"cluster-reduce"}))}return i;case"video":return fe({key:n,value:t,valueSpec:s.source_video,style:a,styleSpec:s});case"image":return fe({key:n,value:t,valueSpec:s.source_image,style:a,styleSpec:s});case"canvas":return[new o(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Os({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:s})}}function Wr(e){var t,r,s=e.value,i=e.styleSpec,a=i.light,c=e.style,n=[],l=j(s);if(void 0===s)return n;if("object"!==l)return n.concat([new o("light",s,"object expected, "+l+" found")]);for(t in s)r=t.match(/^(.*)-transition$/),n=r&&a[r[1]]&&a[r[1]].transition?n.concat(he({key:t,value:s[t],valueSpec:i.transition,style:c,styleSpec:i})):a[t]?n.concat(he({key:t,value:s[t],valueSpec:a[t],style:c,styleSpec:i})):n.concat([new o(t,s[t],'unknown property "'+t+'"')]);return n}Bo={"*":function(){return[]},array:Ya,boolean:function(e){var t=e.value,s=e.key,n=j(t);return"boolean"!==n?[new o(s,t,"boolean expected, "+n+" found")]:[]},number:Ga,color:function(e){var n=e.key,t=e.value,s=j(t);return"string"!==s?[new o(n,t,"color expected, "+s+" found")]:null===Yr(t)?[new o(n,t,'color expected, "'+t+'" found')]:[]},constants:gc,enum:Os,filter:Xo,function:Qa,layer:Br,object:fe,source:Ui,light:Wr,string:tn,formatted:function(e){return 0===tn(e).length?[]:qt(e)},resolvedImage:function(e){return 0===tn(e).length?[]:qt(e)}};function he(e){var n=e.value,t=e.valueSpec,s=e.styleSpec;return t.expression&&ts(k(n))?Qa(e):t.expression&&us(mt(n))?qt(e):t.type&&Bo[t.type]?Bo[t.type](e):fe(Zt({},e,{valueSpec:t.type?s[t.type]:t}))}function Gd(e){var t=e.value,s=e.key,n=tn(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new o(s,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new o(s,t,'"glyphs" url must include a "{range}" token'))),n}function Ot(e,n){void 0===n&&(n=t);var s=[];return s=s.concat(he({key:"",value:e,valueSpec:n.$root,styleSpec:n,style:e,objectElementValidators:{glyphs:Gd,"*":function(){return[]}}})),e.constants&&(s=s.concat(gc({key:"constants",value:e.constants,style:e,styleSpec:n}))),Xr(s)}function Xr(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function en(e){return function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return Xr(e.apply(this,n))}}Ot.source=en(Ui),Ot.light=en(Wr),Ot.layer=en(Br),Ot.filter=en(Xo),Ot.paintProperty=en(Pr),Ot.layoutProperty=en(Ir);var jn=Ot,Xd=jn.light,Qd=jn.paintProperty,Zd=jn.layoutProperty;function cc(e,t){if(n=!1,t&&t.length)for(var n,i,s=0,o=t;s<o.length;s+=1)i=o[s],e.fire(new yo(new Error(i.message))),n=!0;return n}it=ve,Ve=3;function ve(e,t,n){if(o=this.cells=[],e instanceof ArrayBuffer){this.arrayBuffer=e,s=new Int32Array(this.arrayBuffer),e=s[0],t=s[1],n=s[2],this.d=t+2*n;for(i=0;i<this.d*this.d;i++){var s,o,i,a,r,c,u,l=s[Ve+i],d=s[Ve+i+1];o.push(l===d?null:s.subarray(l,d))}u=s[Ve+o.length],a=s[Ve+o.length+1],this.keys=s.subarray(u,a),this.bboxes=s.subarray(a),this.insert=this._insertReadonly}else{this.d=t+2*n;for(r=0;r<this.d*this.d;r++)o.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0,c=n/t*e,this.min=-c,this.max=e+c}ve.prototype.insert=function(e,t,n,s,o){this._forEachCell(t,n,s,o,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(o)},ve.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ve.prototype._insertCell=function(e,t,n,s,o,i){this.cells[o].push(i)},ve.prototype.query=function(e,t,n,s,o){var i,a=this.min,r=this.max;return e<=a&&t<=a&&r<=n&&r<=s&&!o?Array.prototype.slice.call(this.keys):(i=[],this._forEachCell(e,t,n,s,this._queryCell,i,{},o),i)},ve.prototype._queryCell=function(e,t,n,s,o,i,a,r){if(u=this.cells[o],null!==u)for(var c,d,u,m=this.keys,l=this.bboxes,h=0;h<u.length;h++)d=u[h],void 0===a[d]&&(c=4*d,(r?r(l[c+0],l[c+1],l[c+2],l[c+3]):e<=l[c+2]&&t<=l[c+3]&&n>=l[c+0]&&s>=l[c+1])?(a[d]=!0,i.push(m[d])):a[d]=!1)},ve.prototype._forEachCell=function(e,t,n,s,o,i,a,r){for(var c,d,f=this._convertToCellCoord(e),u=this._convertToCellCoord(t),h=this._convertToCellCoord(n),m=this._convertToCellCoord(s),l=f;l<=h;l++)for(c=u;c<=m;c++)if(d=this.d*c+l,(!r||r(this._convertFromCellCoord(l),this._convertFromCellCoord(c),this._convertFromCellCoord(l+1),this._convertFromCellCoord(c+1)))&&o.call(this,e,t,n,s,d,i,a,r))return},ve.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ve.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ve.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e,t,n,o,s=this.cells,r=Ve+this.cells.length+1+1,a=0,i=0;i<this.cells.length;i++)a+=this.cells[i].length;e=new Int32Array(r+a+this.keys.length+this.bboxes.length),e[0]=this.extent,e[1]=this.n,e[2]=this.padding;for(t=r,n=0;n<s.length;n++)o=s[n],e[Ve+n]=t,e.set(o,t),t+=o.length;return e[Ve+s.length]=t,e.set(this.keys,t),t+=this.keys.length,e[Ve+s.length+1]=t,e.set(this.bboxes,t),t+=this.bboxes.length,e.buffer};var jc=a.ImageData,xc=a.ImageBitmap,Dn={};function i(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Dn[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(po in i("Object",Object),it.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},it.deserialize=function(e){return new it(e.buffer)},i("Grid",it),i("Color",f),i("Error",Error),i("ResolvedImage",K),i("StylePropertyFunction",Jt),i("StyleExpression",Xt,{omit:["_evaluator"]}),i("ZoomDependentExpression",wt),i("ZoomConstantExpression",an),i("CompoundExpression",P,{omit:["_evaluate"]}),Et)Et[po]._classRegistryKey||i("Expression_"+po,Et[po]);function Nc(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Hc(e){return xc&&e instanceof xc}function fn(e,t){if(e==null||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Nc(e)||Hc(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e))return r=e,t&&t.push(r.buffer),r;if(e instanceof jc)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var n,s,o,i,a,r,l,d=[],c=0,u=e;c<u.length;c+=1)l=u[c],d.push(fn(l,t));return d}if("object"==typeof e){if(i=e.constructor,n=i._classRegistryKey,!n)throw new Error("can't serialize object of unregistered class");if(s=i.serialize?i.serialize(e,t):{},!i.serialize){for(o in e)e.hasOwnProperty(o)&&!(Dn[n].omit.indexOf(o)>=0)&&(a=e[o],s[o]=Dn[n].shallow.indexOf(o)>=0?a:fn(a,t));e instanceof Error&&(s.message=e.message)}if(s.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(s.$name=n),s}throw new Error("can't serialize object of type "+typeof e)}function Un(e){if(e==null||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Nc(e)||Hc(e)||ArrayBuffer.isView(e)||e instanceof jc)return e;if(Array.isArray(e))return e.map(Un);if("object"==typeof e){if(s=e.$name||"Object",t=Dn[s].klass,!t)throw new Error("can't deserialize unregistered class "+s);if(t.deserialize)return t.deserialize(e);for(var t,n,s,i,a=Object.create(t.prototype),o=0,r=Object.keys(e);o<r.length;o+=1)n=r[o],"$name"!==n&&(i=e[n],a[n]=Dn[s].shallow.indexOf(n)>=0?i:Un(i));return a}throw new Error("can't deserialize object of type "+typeof e)}lo=function(){this.first=!0},lo.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))},s={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function go(e){for(var t=0,n=e;t<n.length;t+=1)if(vo(n[t].charCodeAt(0)))return!0;return!1}function vo(e){return!(746!==e&&747!==e&&(e<4352||!(s["Bopomofo Extended"](e)||s.Bopomofo(e)||s["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||s["CJK Compatibility Ideographs"](e)||s["CJK Compatibility"](e)||s["CJK Radicals Supplement"](e)||s["CJK Strokes"](e)||!(!s["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||s["CJK Unified Ideographs Extension A"](e)||s["CJK Unified Ideographs"](e)||s["Enclosed CJK Letters and Months"](e)||s["Hangul Compatibility Jamo"](e)||s["Hangul Jamo Extended-A"](e)||s["Hangul Jamo Extended-B"](e)||s["Hangul Jamo"](e)||s["Hangul Syllables"](e)||s.Hiragana(e)||s["Ideographic Description Characters"](e)||s.Kanbun(e)||s["Kangxi Radicals"](e)||s["Katakana Phonetic Extensions"](e)||s.Katakana(e)&&12540!==e||!(!s["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!s["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||s["Unified Canadian Aboriginal Syllabics"](e)||s["Unified Canadian Aboriginal Syllabics Extended"](e)||s["Vertical Forms"](e)||s["Yijing Hexagram Symbols"](e)||s["Yi Syllables"](e)||s["Yi Radicals"](e))))}function Mc(e){return!vo(e)&&!function(e){return!!(s["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||s["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||s["Letterlike Symbols"](e)||s["Number Forms"](e)||s["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||s["Control Pictures"](e)&&9251!==e||s["Optical Character Recognition"](e)||s["Enclosed Alphanumerics"](e)||s["Geometric Shapes"](e)||s["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||s["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||s["CJK Symbols and Punctuation"](e)||s.Katakana(e)||s["Private Use Area"](e)||s["CJK Compatibility Forms"](e)||s["Small Form Variants"](e)||s["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e)}function su(e){return s.Arabic(e)||s["Arabic Supplement"](e)||s["Arabic Extended-A"](e)||s["Arabic Presentation Forms-A"](e)||s["Arabic Presentation Forms-B"](e)}function Sc(e){return e>=1424&&e<=2303||s["Arabic Presentation Forms-A"](e)||s["Arabic Presentation Forms-B"](e)}function nu(e,t){return!(!t&&Sc(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||s.Khmer(e))}function eu(e){for(var t=0,n=e;t<n.length;t+=1)if(Sc(n[t].charCodeAt(0)))return!0;return!1}var Oo="deferred",xo="loading",Co="loaded",Jd="error",ko=null,ee="unavailable",ot=null,fc=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(ee=Jd),ko&&ko(e)};function Fo(){To.fire(new Ps("pluginStateChange",{pluginStatus:ee,pluginURL:ot}))}var To=new Le,zo=function(){return ee},mc=function(){if(ee!==Oo||!ot)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ee=xo,Fo(),ot&&wo({url:ot},function(e){e?fc(e):(ee=Co,Fo())})},se={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ee===Co||null!=se.applyArabicShaping},isLoading:function(){return ee===xo},setState:function(e){ee=e.pluginStatus,ot=e.pluginURL},isParsed:function(){return null!=se.applyArabicShaping&&null!=se.processBidirectionalText&&null!=se.processStyledBidirectionalText},getPluginURL:function(){return ot}},v=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new lo,this.transition={})};v.prototype.isSupportedScript=function(e){return function(e,t){for(var n=0,s=e;n<s.length;n+=1)if(!nu(s[n].charCodeAt(0),t))return!1;return!0}(e,se.isLoaded())},v.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},v.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}},ft=function(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(ts(e))return new Jt(e,t);if(us(e)){var s,n=Ha(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}return s=e,"string"==typeof e&&"color"===t.type&&(s=f.parse(e)),{kind:"constant",evaluate:function(){return s}}}(void 0===t?e.specification.default:t,e.specification)},ft.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ft.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)},Yt=function(e){this.property=e,this.value=new ft(e,void 0)},Yt.prototype.transitioned=function(e,t){return new Ks(this.property,this.value,t,G({},e.transition,this.transition),e.now)},Yt.prototype.untransitioned=function(){return new Ks(this.property,this.value,null,{},0)},we=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)},we.prototype.getValue=function(e){return ke(this._values[e].value.value)},we.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Yt(this._values[e].property)),this._values[e].value=new ft(this._values[e].property,null===t?void 0:ke(t))},we.prototype.getTransition=function(e){return ke(this._values[e].transition)},we.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Yt(this._values[e].property)),this._values[e].transition=ke(t)||void 0},we.prototype.serialize=function(){for(var e,s,o,t={},n=0,i=Object.keys(this._values);n<i.length;n+=1)e=i[n],s=this.getValue(e),void 0!==s&&(t[e]=s),o=this.getTransition(e),void 0!==o&&(t[e+"-transition"]=o);return t},we.prototype.transitioned=function(e,t){for(var n,o=new vn(this._properties),s=0,i=Object.keys(this._values);s<i.length;s+=1)n=i[s],o._values[n]=this._values[n].transitioned(e,t._values[n]);return o},we.prototype.untransitioned=function(){for(var t,n=new vn(this._properties),e=0,s=Object.keys(this._values);e<s.length;e+=1)t=s[e],n._values[t]=this._values[t].untransitioned();return n},Ks=function(e,t,n,s,o){this.property=e,this.value=t,this.begin=o+s.delay||0,this.end=this.begin+s.duration||0,e.specification.transition&&(s.delay||s.duration)&&(this.prior=n)},Ks.prototype.possiblyEvaluate=function(e,t,n){var a,o=e.now||0,s=this.value.possiblyEvaluate(e,t,n),i=this.prior;return i?o>this.end?(this.prior=null,s):this.value.isDataDriven()?(this.prior=null,s):o<this.begin?i.possiblyEvaluate(e,t,n):(a=(o-this.begin)/(this.end-this.begin),this.property.interpolate(i.possiblyEvaluate(e,t,n),s,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(a))):s},vn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)},vn.prototype.possiblyEvaluate=function(e,t,n){for(var o,i=new on(this._properties),s=0,a=Object.keys(this._values);s<a.length;s+=1)o=a[s],i._values[o]=this._values[o].possiblyEvaluate(e,t,n);return i},vn.prototype.hasTransition=function(){for(var n,e=0,t=Object.keys(this._values);e<t.length;e+=1)if(n=t[e],this._values[n].prior)return!0;return!1},rn=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)},rn.prototype.getValue=function(e){return ke(this._values[e].value)},rn.prototype.setValue=function(e,t){this._values[e]=new ft(this._values[e].property,null===t?void 0:ke(t))},rn.prototype.serialize=function(){for(var t,n,s={},e=0,o=Object.keys(this._values);e<o.length;e+=1)t=o[e],n=this.getValue(t),void 0!==n&&(s[t]=n);return s},rn.prototype.possiblyEvaluate=function(e,t,n){for(var o,i=new on(this._properties),s=0,a=Object.keys(this._values);s<a.length;s+=1)o=a[s],i._values[o]=this._values[o].possiblyEvaluate(e,t,n);return i},q=function(e,t,n){this.property=e,this.value=t,this.parameters=n},q.prototype.isConstant=function(){return"constant"===this.value.kind},q.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},q.prototype.evaluate=function(e,t,n,s){return this.property.evaluate(this.value,this.parameters,e,t,n,s)},on=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)},on.prototype.get=function(e){return this._values[e]},r=function(e){this.specification=e},r.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},r.prototype.interpolate=function(e,t,n){var s=fs[this.specification.type];return s?s(e,t,n):e},c=function(e,t){this.specification=e,this.overrides=t},c.prototype.possiblyEvaluate=function(e,t,n,s){return"constant"===e.expression.kind||"camera"===e.expression.kind?new q(this,{kind:"constant",value:e.expression.evaluate(t,null,{},n,s)},t):new q(this,e.expression,t)},c.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new q(this,{kind:"constant",value:void 0},e.parameters);var s=fs[this.specification.type];return s?new q(this,{kind:"constant",value:s(e.value.value,t.value.value,n)},e.parameters):e},c.prototype.evaluate=function(e,t,n,s,o,i){return"constant"===e.kind?e.value:e.evaluate(t,n,s,o,i)},Pn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(e,t,n,s){if(void 0===e.value)return new q(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var a,o=e.expression.evaluate(t,null,{},n,s),i="resolvedImage"===e.property.specification.type&&"string"!=typeof o?o.name:o,r=this._calculate(i,i,i,t);return new q(this,{kind:"constant",value:r},t)}return"camera"===e.expression.kind?(a=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t),new q(this,{kind:"constant",value:a},t)):new q(this,e.expression,t)},t.prototype.evaluate=function(e,t,n,s,o,i){if("source"===e.kind){var a=e.evaluate(t,n,s,o,i);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,s),e.evaluate({zoom:Math.floor(t.zoom)},n,s),e.evaluate({zoom:Math.floor(t.zoom)+1},n,s),t):e.value},t.prototype._calculate=function(e,t,n,s){return s.zoom>s.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},t.prototype.interpolate=function(e){return e},t}(c),pt=function(e){this.specification=e},pt.prototype.possiblyEvaluate=function(e,t,n,s){if(void 0!==e.value){if("constant"===e.expression.kind){var o=e.expression.evaluate(t,null,{},n,s);return this._calculate(o,o,o,t)}return this._calculate(e.expression.evaluate(new v(Math.floor(t.zoom-1),t)),e.expression.evaluate(new v(Math.floor(t.zoom),t)),e.expression.evaluate(new v(Math.floor(t.zoom+1),t)),t)}},pt.prototype._calculate=function(e,t,n,s){return s.zoom>s.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},pt.prototype.interpolate=function(e){return e},St=function(e){this.specification=e},St.prototype.possiblyEvaluate=function(e,t,n,s){return!!e.expression.evaluate(t,null,{},n,s)},St.prototype.interpolate=function(){return!1},X=function(e){for(t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){n=e[t],n.specification.overridable&&this.overridableProperties.push(t);var t,n,s=this.defaultPropertyValues[t]=new ft(n,void 0),o=this.defaultTransitionablePropertyValues[t]=new Yt(n);this.defaultTransitioningPropertyValues[t]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=s.possiblyEvaluate({})}},i("DataDrivenProperty",c),i("DataConstantProperty",r),i("CrossFadedDataDrivenProperty",Pn),i("CrossFadedProperty",pt),i("ColorRampProperty",St);var xr="-transition",pe=function(e){function n(t,n){if(e.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new rn(n.layout)),n.paint)){for(var s in this._transitionablePaint=new we(n.paint),t.paint)this.setPaintProperty(s,t.paint[s],{validate:!1});for(var o in t.layout)this.setLayoutProperty(o,t.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new on(n.paint)}}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},n.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},n.prototype.setLayoutProperty=function(e,t,n){if(void 0===n&&(n={}),t!=null){var s="layers."+this.id+".layout."+e;if(this._validate(Zd,s,e,t,n))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t},n.prototype.getPaintProperty=function(e){return wi(e,xr)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)},n.prototype.setPaintProperty=function(e,t,n){if(void 0===n&&(n={}),t!=null&&(i="layers."+this.id+".paint."+e,this._validate(Qd,i,e,t,n)))return!1;if(wi(e,xr))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;var o,i,s=this._transitionablePaint._values[e],a="cross-faded-data-driven"===s.property.specification["property-type"],r=s.value.isDataDriven(),c=s.value;return this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e),o=this._transitionablePaint._values[e].value,o.isDataDriven()||r||a||this._handleOverridablePaintPropertyUpdate(e,c,o)},n.prototype._handleSpecialPaintPropertyUpdate=function(){},n.prototype._handleOverridablePaintPropertyUpdate=function(){return!1},n.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},n.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},n.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},n.prototype.recalculate=function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)},n.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ea(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},n.prototype._validate=function(e,n,s,o,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&cc(this,e.call(jn,{key:n,layerType:this.type,objectKey:s,value:o,styleSpec:t,style:{glyphs:!0,sprite:!0}}))},n.prototype.is3D=function(){return!1},n.prototype.isTileClipped=function(){return!1},n.prototype.hasOffscreenPass=function(){return!1},n.prototype.resize=function(){},n.prototype.isStateDependent=function(){for(t in this.paint._values){var t,e=this.paint.get(t);if(e instanceof q&&zt(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},n}(Le),Yd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Fs=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},b=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function D(e,t){void 0===t&&(t=1);var n=0,s=0;return{members:e.map(function(e){var i,o=(i=e.type,Yd[i].BYTES_PER_ELEMENT),r=n=or(n,Math.max(t,o)),a=e.components||1;return s=Math.max(s,o),n+=o*a,{name:e.name,type:e.type,components:a,offset:r}}),size:or(n,Math.max(s,t)),alignment:t}}function or(e,t){return Math.ceil(e/t)*t}b.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},b.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},b.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},b.prototype.clear=function(){this.length=0},b.prototype.resize=function(e){this.reserve(e),this.length=e},b.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},b.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},Nt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var s=2*e;return this.int16[s+0]=t,this.int16[s+1]=n,e},t}(b),Nt.prototype.bytesPerElement=4,i("StructArrayLayout2i4",Nt),xs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,s)},t.prototype.emplace=function(e,t,n,s,o){var i=4*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=s,this.int16[i+3]=o,e},t}(b),xs.prototype.bytesPerElement=8,i("StructArrayLayout4i8",xs),_s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,s,o,i)},t.prototype.emplace=function(e,t,n,s,o,i,a){var r=6*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=s,this.int16[r+3]=o,this.int16[r+4]=i,this.int16[r+5]=a,e},t}(b),_s.prototype.bytesPerElement=12,i("StructArrayLayout2i4i12",_s),ys=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,s,o,i)},t.prototype.emplace=function(e,t,n,s,o,i,a){var c=4*e,r=8*e;return this.int16[c+0]=t,this.int16[c+1]=n,this.uint8[r+4]=s,this.uint8[r+5]=o,this.uint8[r+6]=i,this.uint8[r+7]=a,e},t}(b),ys.prototype.bytesPerElement=8,i("StructArrayLayout2i4ub8",ys),Gt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var s=2*e;return this.float32[s+0]=t,this.float32[s+1]=n,e},t}(b),Gt.prototype.bytesPerElement=8,i("StructArrayLayout2f8",Gt),Se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i,a,r,c,l){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,s,o,i,a,r,c,l)},t.prototype.emplace=function(e,t,n,s,o,i,a,r,c,l,d){var u=10*e;return this.uint16[u+0]=t,this.uint16[u+1]=n,this.uint16[u+2]=s,this.uint16[u+3]=o,this.uint16[u+4]=i,this.uint16[u+5]=a,this.uint16[u+6]=r,this.uint16[u+7]=c,this.uint16[u+8]=l,this.uint16[u+9]=d,e},t}(b),Se.prototype.bytesPerElement=20,i("StructArrayLayout10ui20",Se),ls=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i,a,r,c,l,d,u){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,s,o,i,a,r,c,l,d,u)},t.prototype.emplace=function(e,t,n,s,o,i,a,r,c,l,d,u,h){var m=12*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.int16[m+2]=s,this.int16[m+3]=o,this.uint16[m+4]=i,this.uint16[m+5]=a,this.uint16[m+6]=r,this.uint16[m+7]=c,this.int16[m+8]=l,this.int16[m+9]=d,this.int16[m+10]=u,this.int16[m+11]=h,e},t}(b),ls.prototype.bytesPerElement=24,i("StructArrayLayout4i4ui4i24",ls),cs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n)},t.prototype.emplace=function(e,t,n,s){var o=3*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=s,e},t}(b),cs.prototype.bytesPerElement=12,i("StructArrayLayout3f12",cs),rs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.uint32[n+0]=t,e},t}(b),rs.prototype.bytesPerElement=4,i("StructArrayLayout1ul4",rs),is=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i,a,r,c){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,s,o,i,a,r,c)},t.prototype.emplace=function(e,t,n,s,o,i,a,r,c,l){var d=10*e,u=5*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=s,this.int16[d+3]=o,this.int16[d+4]=i,this.int16[d+5]=a,this.uint32[u+3]=r,this.uint16[d+8]=c,this.uint16[d+9]=l,e},t}(b),is.prototype.bytesPerElement=20,i("StructArrayLayout6i1ul2ui20",is),wn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,s,o,i)},t.prototype.emplace=function(e,t,n,s,o,i,a){var r=6*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=s,this.int16[r+3]=o,this.int16[r+4]=i,this.int16[r+5]=a,e},t}(b),wn.prototype.bytesPerElement=12,i("StructArrayLayout2i2i2i12",wn),ns=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,s,o)},t.prototype.emplace=function(e,t,n,s,o,i){var a=4*e,r=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=s,this.int16[r+6]=o,this.int16[r+7]=i,e},t}(b),ns.prototype.bytesPerElement=16,i("StructArrayLayout2f1f2i16",ns),Jn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,s)},t.prototype.emplace=function(e,t,n,s,o){var i=12*e,a=3*e;return this.uint8[i+0]=t,this.uint8[i+1]=n,this.float32[a+1]=s,this.float32[a+2]=o,e},t}(b),Jn.prototype.bytesPerElement=12,i("StructArrayLayout2ub2f12",Jn),Te=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n)},t.prototype.emplace=function(e,t,n,s){var o=3*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=s,e},t}(b),Te.prototype.bytesPerElement=6,i("StructArrayLayout3ui6",Te),Gn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,g){var v=this.length;return this.resize(v+1),this.emplace(v,e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,g)},t.prototype.emplace=function(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v){var b=24*e,j=12*e,y=48*e;return this.int16[b+0]=t,this.int16[b+1]=n,this.uint16[b+2]=s,this.uint16[b+3]=o,this.uint32[j+2]=i,this.uint32[j+3]=a,this.uint32[j+4]=r,this.uint16[b+10]=c,this.uint16[b+11]=l,this.uint16[b+12]=d,this.float32[j+7]=u,this.float32[j+8]=h,this.uint8[y+36]=m,this.uint8[y+37]=f,this.uint8[y+38]=p,this.uint32[j+10]=g,this.int16[b+22]=v,e},t}(b),Gn.prototype.bytesPerElement=48,i("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Gn),qn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k){var A=this.length;return this.resize(A+1),this.emplace(A,e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k)},t.prototype.emplace=function(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A){var S=34*e,M=17*e;return this.int16[S+0]=t,this.int16[S+1]=n,this.int16[S+2]=s,this.int16[S+3]=o,this.int16[S+4]=i,this.int16[S+5]=a,this.int16[S+6]=r,this.int16[S+7]=c,this.uint16[S+8]=l,this.uint16[S+9]=d,this.uint16[S+10]=u,this.uint16[S+11]=h,this.uint16[S+12]=m,this.uint16[S+13]=f,this.uint16[S+14]=p,this.uint16[S+15]=g,this.uint16[S+16]=v,this.uint16[S+17]=b,this.uint16[S+18]=j,this.uint16[S+19]=y,this.uint16[S+20]=_,this.uint16[S+21]=w,this.uint16[S+22]=O,this.uint32[M+12]=x,this.float32[M+13]=C,this.float32[M+14]=E,this.float32[M+15]=k,this.float32[M+16]=A,e},t}(b),qn.prototype.bytesPerElement=68,i("StructArrayLayout8i15ui1ul4f68",qn),Cn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.float32[n+0]=t,e},t}(b),Cn.prototype.bytesPerElement=4,i("StructArrayLayout1f4",Cn),Kn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n)},t.prototype.emplace=function(e,t,n,s){var o=3*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=s,e},t}(b),Kn.prototype.bytesPerElement=6,i("StructArrayLayout3i6",Kn),Yn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n)},t.prototype.emplace=function(e,t,n,s){var i=2*e,o=4*e;return this.uint32[i+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=s,e},t}(b),Yn.prototype.bytesPerElement=8,i("StructArrayLayout1ul2ui8",Yn),Ft=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var s=2*e;return this.uint16[s+0]=t,this.uint16[s+1]=n,e},t}(b),Ft.prototype.bytesPerElement=4,i("StructArrayLayout2ui4",Ft),Xn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.uint16[n+0]=t,e},t}(b),Xn.prototype.bytesPerElement=2,i("StructArrayLayout1ui2",Xn),Qn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,s){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,s)},t.prototype.emplace=function(e,t,n,s,o){var i=4*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=s,this.float32[i+3]=o,e},t}(b),Qn.prototype.bytesPerElement=16,i("StructArrayLayout4f16",Qn),Ei=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var t={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return t.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},t.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},t.x1.get=function(){return this._structArray.int16[this._pos2+2]},t.y1.get=function(){return this._structArray.int16[this._pos2+3]},t.x2.get=function(){return this._structArray.int16[this._pos2+4]},t.y2.get=function(){return this._structArray.int16[this._pos2+5]},t.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},t.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},t.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},t.anchorPoint.get=function(){return new l(this.anchorPointX,this.anchorPointY)},Object.defineProperties(n.prototype,t),n}(Fs),Ei.prototype.size=20,Zn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new Ei(this,e)},t}(is),i("CollisionBoxArray",Zn),Ai=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var t={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return t.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},t.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},t.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},t.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},t.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},t.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},t.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},t.segment.get=function(){return this._structArray.uint16[this._pos2+10]},t.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},t.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},t.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},t.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},t.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},t.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},t.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e},t.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},t.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e},t.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},t.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},t.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(n.prototype,t),n}(Fs),Ai.prototype.size=48,Si=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new Ai(this,e)},t}(Gn),i("PlacedSymbolArray",Si),Mi=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var t={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return t.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},t.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},t.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},t.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},t.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},t.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},t.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},t.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},t.key.get=function(){return this._structArray.uint16[this._pos2+8]},t.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},t.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},t.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},t.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},t.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},t.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},t.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},t.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},t.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},t.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},t.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},t.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},t.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},t.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},t.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},t.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e},t.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},t.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},t.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},t.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(n.prototype,t),n}(Fs),Mi.prototype.size=68,Fi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new Mi(this,e)},t}(qn),i("SymbolInstanceArray",Fi),Ti=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t}(Cn),i("GlyphOffsetArray",Ti),zi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t}(Kn),i("SymbolLineVertexArray",zi),Di=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(Fs),Di.prototype.size=8,Ni=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new Di(this,e)},t}(Yn),i("FeatureIndexArray",Ni),ra=D([{name:"a_pos",components:2,type:"Int16"}],4).members,E=function(e){void 0===e&&(e=[]),this.segments=e};function ea(e,t){return 256*(e=gt(Math.floor(e),0,255))+gt(Math.floor(t),0,255)}E.prototype.prepareSegment=function(e,t,n,s){var o=this.segments[this.segments.length-1];return e>E.MAX_VERTEX_ARRAY_LENGTH&&W("Max vertices per segment is "+E.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!o||o.vertexLength+e>E.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==s)&&(o={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==s&&(o.sortKey=s),this.segments.push(o)),o},E.prototype.get=function(){return this.segments},E.prototype.destroy=function(){for(var t,s,e=0,n=this.segments;e<n.length;e+=1){t=n[e];for(s in t.vaos)t.vaos[s].destroy()}},E.simpleSegment=function(e,t,n,s){return new E([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:s,vaos:{},sortKey:0}])},E.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,i("SegmentVector",E);var es=D([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Xi=ho(function(e){e.exports=function(e,t){var n,s,o,i,a,r,c,l;for(r=3&e.length,l=e.length-r,s=t,i=3432918353,a=461845907,o=0;o<l;)n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24,++o,s=27492+(65535&(c=5*(65535&(s=(s^=n=(65535&(n=(n=(65535&n)*i+(((n>>>16)*i&65535)<<16)&4294967295)<<15|n>>>17))*a+(((n>>>16)*a&65535)<<16)&4294967295)<<13|s>>>19))+((5*(s>>>16)&65535)<<16)&4294967295))+((58964+(c>>>16)&65535)<<16);switch(n=0,r){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:s^=n=(65535&(n=(n=(65535&(n^=255&e.charCodeAt(o)))*i+(((n>>>16)*i&65535)<<16)&4294967295)<<15|n>>>17))*a+(((n>>>16)*a&65535)<<16)&4294967295}return s^=e.length,s=2246822507*(65535&(s^=s>>>16))+((2246822507*(s>>>16)&65535)<<16)&4294967295,s=3266489909*(65535&(s^=s>>>13))+((3266489909*(s>>>16)&65535)<<16)&4294967295,(s^=s>>>16)>>>0}}),Ld=ho(function(e){e.exports=function(e,t){for(var o,i=e.length,n=t^i,s=0;i>=4;)o=1540483477*(65535&(o=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24))+((1540483477*(o>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),i-=4,++s;switch(i){case 3:n^=(255&e.charCodeAt(s+2))<<16;case 2:n^=(255&e.charCodeAt(s+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(s)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}}),zn=Xi,Nd=Xi,Dd=Ld;zn.murmur3=Nd,zn.murmur2=Dd,Ue=function(){this.ids=[],this.positions=[],this.indexed=!1},Ue.prototype.add=function(e,t,n,s){this.ids.push(qi(e)),this.positions.push(t,n,s)},Ue.prototype.getPositions=function(e){for(var n,o,i=qi(e),t=0,s=this.ids.length-1;t<s;)n=t+s>>1,this.ids[n]>=i?s=n:t=n+1;for(o=[];this.ids[t]===i;){var a=this.positions[3*t],r=this.positions[3*t+1],c=this.positions[3*t+2];o.push({index:a,start:r,end:c}),t++}return o},Ue.serialize=function(e,t){var n=new Float64Array(e.ids),s=new Uint32Array(e.positions);return Vi(n,s,0,n.length-1),t&&t.push(n.buffer,s.buffer),{ids:n,positions:s}},Ue.deserialize=function(e){var t=new Ue;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},Ki=Math.pow(2,53)-1;function qi(e){var t=+e;return!isNaN(t)&&t<=Ki?t:zn(String(e))}function Vi(e,t,n,s){for(;n<s;){for(var a=e[n+s>>1],i=n-1,o=s+1;;){do i++;while(e[i]<a)do o--;while(e[o]>a)if(i>=o)break;ss(e,i,o),ss(t,3*i,3*o),ss(t,3*i+1,3*o+1),ss(t,3*i+2,3*o+2)}o-n<s-o?(Vi(e,t,n,o),n=o+1):(Vi(e,t,o+1,s),s=o)}}function ss(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}i("FeaturePositionMap",Ue);var bt=function(e,t){this.gl=e.gl,this.location=t},Td=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(bt),os=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(bt),Fd=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(bt),Sd=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(bt),ta=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(bt),na=function(e){function t(t,n){e.call(this,t,n),this.current=f.transparent}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(bt),Ad=new Float32Array(16),kd=function(e){function t(t,n){e.call(this,t,n),this.current=Ad}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},t}(bt);function Ri(e){return[ea(255*e.r,255*e.g),ea(255*e.b,255*e.a)]}Ze=function(e,t,n){this.value=e,this.uniformNames=t.map(function(e){return"u_"+e}),this.type=n},Ze.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},Ze.prototype.getBinding=function(e,t){return"color"===this.type?new na(e,t):new os(e,t)},ge=function(e,t){this.uniformNames=t.map(function(e){return"u_"+e}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1},ge.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},ge.prototype.setUniform=function(e,t,n,s){var o="u_pattern_to"===s?this.patternTo:"u_pattern_from"===s?this.patternFrom:"u_pixel_ratio_to"===s?this.pixelRatioTo:"u_pixel_ratio_from"===s?this.pixelRatioFrom:null;o&&e.set(o)},ge.prototype.getBinding=function(e,t,n){return"u_pattern"===n.substr(0,9)?new ta(e,t):new os(e,t)},Y=function(e,t,n,s){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new s},Y.prototype.populatePaintArray=function(e,t,n,s,o){var i=this.paintVertexArray.length,a=this.expression.evaluate(new v(0),t,{},s,[],o);this.paintVertexArray.resize(e),this._setPaintValue(i,e,a)},Y.prototype.updatePaintArray=function(e,t,n,s){var o=this.expression.evaluate({zoom:0},n,s);this._setPaintValue(e,t,o)},Y.prototype._setPaintValue=function(e,t,n){if("color"===this.type)for(var s,i=Ri(n),o=e;o<t;o++)this.paintVertexArray.emplace(o,i[0],i[1]);else{for(s=e;s<t;s++)this.paintVertexArray.emplace(s,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Y.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Y.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},N=function(e,t,n,s,o,i){this.expression=e,this.uniformNames=t.map(function(e){return"u_"+e+"_t"}),this.type=n,this.useIntegerZoom=s,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new i},N.prototype.populatePaintArray=function(e,t,n,s,o){var i=this.expression.evaluate(new v(this.zoom),t,{},s,[],o),a=this.expression.evaluate(new v(this.zoom+1),t,{},s,[],o),r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(r,e,i,a)},N.prototype.updatePaintArray=function(e,t,n,s){var o=this.expression.evaluate({zoom:this.zoom},n,s),i=this.expression.evaluate({zoom:this.zoom+1},n,s);this._setPaintValue(e,t,o,i)},N.prototype._setPaintValue=function(e,t,n,s){if("color"===this.type)for(var o,a=Ri(n),r=Ri(s),i=e;i<t;i++)this.paintVertexArray.emplace(i,a[0],a[1],r[0],r[1]);else{for(o=e;o<t;o++)this.paintVertexArray.emplace(o,n,s);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(s))}},N.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},N.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},N.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,s=gt(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(s)},N.prototype.getBinding=function(e,t){return new os(e,t)},J=function(e,t,n,s,o,i){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=s,this.layerId=i,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o},J.prototype.populatePaintArray=function(e,t,n){var s=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(s,e,t.patterns&&t.patterns[this.layerId],n)},J.prototype.updatePaintArray=function(e,t,n,s,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)},J.prototype._setPaintValues=function(e,t,n,s){if(s&&n){var r,d=n.min,c=n.mid,l=n.max,i=s[d],o=s[c],a=s[l];if(i&&o&&a)for(r=e;r<t;r++)this.zoomInPaintVertexArray.emplace(r,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(r,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},J.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,es.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,es.members,this.expression.isStateDependent))},J.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},$=function(e,t,n){this.binders={},this._buffers=[],r=[];for(s in e.paint._values)if(n(s)&&(o=e.paint.get(s),o instanceof q&&zt(o.property.specification))){var s,o,r,d,m,c=xd(s,e.type),i=o.value,a=o.property.specification.type,u=o.property.useIntegerZoom,h=o.property.specification["property-type"],l="cross-faded"===h||"cross-faded-data-driven"===h;"constant"===i.kind?(this.binders[s]=l?new ge(i.value,c):new Ze(i.value,c,a),r.push("/u_"+s)):"source"===i.kind||l?(d=fa(s,a,"source"),this.binders[s]=l?new J(i,a,u,t,d,e.id):new Y(i,c,a,d),r.push("/a_"+s)):(m=fa(s,a,"composite"),this.binders[s]=new N(i,c,a,u,t,m),r.push("/z_"+s))}this.cacheKey=r.sort().join("")},$.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Y||t instanceof N?t.maxValue:0},$.prototype.populatePaintArrays=function(e,t,n,s,o){for(a in this.binders){var a,i=this.binders[a];(i instanceof Y||i instanceof N||i instanceof J)&&i.populatePaintArray(e,t,n,s,o)}},$.prototype.setConstantPatternPositions=function(e,t){for(s in this.binders){var s,n=this.binders[s];n instanceof ge&&n.setConstantPatternPositions(e,t)}},$.prototype.updatePaintArrays=function(e,t,n,s,o){r=!1;for(h in e)for(var i,a,r,d,u,h,m,c=0,l=t.getPositions(h);c<l.length;c+=1){a=l[c],d=n.feature(a.index);for(u in this.binders)i=this.binders[u],(i instanceof Y||i instanceof N||i instanceof J)&&!0===i.expression.isStateDependent&&(m=s.paint.get(u),i.expression=m.value,i.updatePaintArray(a.start,a.end,d,e[h],o),r=!0)}return r},$.prototype.defines=function(){var e,n,t=[];for(n in this.binders)e=this.binders[n],(e instanceof Ze||e instanceof ge)&&t.push.apply(t,e.uniformNames.map(function(e){return"#define HAS_UNIFORM_"+e}));return t},$.prototype.getBinderAttributes=function(){var e,t,n,o,s=[];for(o in this.binders)if(e=this.binders[o],e instanceof Y||e instanceof N)for(t=0;t<e.paintVertexAttributes.length;t++)s.push(e.paintVertexAttributes[t].name);else if(e instanceof J)for(n=0;n<es.members.length;n++)s.push(es.members[n].name);return s},$.prototype.getBinderUniforms=function(){t=[];for(i in this.binders)if(e=this.binders[i],e instanceof Ze||e instanceof ge||e instanceof N)for(var e,t,o,i,n=0,s=e.uniformNames;n<s.length;n+=1)o=s[n],t.push(o);return t},$.prototype.getPaintVertexBuffers=function(){return this._buffers},$.prototype.getUniforms=function(e,t){o=[];for(a in this.binders)if(n=this.binders[a],n instanceof Ze||n instanceof ge||n instanceof N)for(var n,s,o,a,c,i=0,r=n.uniformNames;i<r.length;i+=1)s=r[i],t[s]&&(c=n.getBinding(e,t[s],s),o.push({name:s,property:a,binding:c}));return o},$.prototype.setUniforms=function(e,t,n,s){for(o=0,i=t;o<i.length;o+=1){var o,i,a=i[o],c=a.name,r=a.property,l=a.binding;this.binders[r].setUniform(l,s,n.get(r),c)}},$.prototype.updatePaintBuffers=function(e){for(s in this._buffers=[],this.binders){var n,s,t=this.binders[s];e&&t instanceof J?(n=2===e.fromScale?t.zoomInPaintVertexBuffer:t.zoomOutPaintVertexBuffer,n&&this._buffers.push(n)):(t instanceof Y||t instanceof N)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}},$.prototype.upload=function(e){for(n in this.binders){var n,t=this.binders[n];(t instanceof Y||t instanceof N||t instanceof J)&&t.upload(e)}this.updatePaintBuffers()},$.prototype.destroy=function(){for(t in this.binders){var t,e=this.binders[t];(e instanceof Y||e instanceof N||e instanceof J)&&e.destroy()}},te=function(e,t,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var o,s=0,i=e;s<i.length;s+=1)o=i[s],this.programConfigurations[o.id]=new $(o,t,n);this.needsUpload=!1,this._featureMap=new Ue,this._bufferOffset=0};function xd(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function fa(e,t,n){var o={color:{source:Gt,composite:Qn},number:{source:Cn,composite:Gt}},s=function(e){return{"line-pattern":{source:Se,composite:Se},"fill-pattern":{source:Se,composite:Se},"fill-extrusion-pattern":{source:Se,composite:Se}}[e]}(e);return s&&s[n]||o[t][n]}te.prototype.populatePaintArrays=function(e,t,n,s,o,i){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(e,t,s,o,i);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},te.prototype.updatePaintArrays=function(e,t,n,s){for(var i,o=0,a=n;o<a.length;o+=1)i=a[o],this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,s)||this.needsUpload},te.prototype.get=function(e){return this.programConfigurations[e]},te.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},te.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},i("ConstantBinder",Ze),i("CrossFadedConstantBinder",ge),i("SourceExpressionBinder",Y),i("CrossFadedCompositeBinder",J),i("CompositeExpressionBinder",N),i("ProgramConfiguration",$,{omit:["_buffers"]}),i("ProgramConfigurationSet",te);var x=8192,_i=Math.pow(2,14)-1,va=-_i-1;function xt(e){for(var n,a,c=x/e.extent,o=e.loadGeometry(),i=0;i<o.length;i++)for(a=o[i],n=0;n<a.length;n++){var t=a[n],s=Math.round(t.x*c),r=Math.round(t.y*c);t.x=gt(s,va,_i),t.y=gt(r,va,_i),(s<t.x||s>t.x+1||r<t.y||r>t.y+1)&&W("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return o}function Ct(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?xt(e):[]}}function ms(e,t,n,s,o){e.emplaceBack(2*t+(s+1)/2,2*n+(o+1)/2)}me=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Nt,this.indexArray=new Te,this.segments=new E,this.programConfigurations=new te(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function wa(e,t){for(var n,s=0;s<e.length;s++)if(Wt(t,e[s]))return!0;for(n=0;n<t.length;n++)if(Wt(e,t[n]))return!0;return!!Ii(e,t)}function pd(e,t,n){return!!Wt(e,t)||!!pi(t,e,n)}function xa(e,t){if(1===e.length)return Ma(t,e[0]);for(n=0;n<t.length;n++)for(var n,s,o,a=t[n],i=0;i<a.length;i++)if(Wt(e,a[i]))return!0;for(s=0;s<e.length;s++)if(Ma(t,e[s]))return!0;for(o=0;o<t.length;o++)if(Ii(e,t[o]))return!0;return!1}function md(e,t,n){if(e.length>1){if(Ii(e,t))return!0;for(var s,o=0;o<t.length;o++)if(pi(t[o],e,n))return!0}for(s=0;s<e.length;s++)if(pi(e[s],t,n))return!0;return!1}function Ii(e,t){if(0===e.length||0===t.length)return!1;for(n=0;n<e.length-1;n++)for(var n,o=e[n],i=e[n+1],s=0;s<t.length-1;s++)if(hd(o,i,t[s],t[s+1]))return!0;return!1}function hd(e,t,n,s){return et(e,n,s)!==et(t,n,s)&&et(e,t,n)!==et(e,t,s)}function pi(e,t,n){var s,o=n*n;if(1===t.length)return e.distSqr(t[0])<o;for(s=1;s<t.length;s++)if(Sa(e,t[s-1],t[s])<o)return!0;return!1}function Sa(e,t,n){var s,o=t.distSqr(n);return 0===o?e.distSqr(t):(s=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/o,s<0?e.distSqr(t):s>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(s)._add(t)))}function Ma(e,t){for(var n,s,o,i,c,a=!1,r=0;r<e.length;r++)for(i=0,c=(s=e[r]).length-1;i<s.length;c=i++)n=s[i],o=s[c],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(a=!a);return a}function Wt(e,t){for(var n,s,o=!1,i=0,a=e.length-1;i<e.length;a=i++)n=e[i],s=e[a],n.y>t.y!=s.y>t.y&&t.x<(s.x-n.x)*(t.y-n.y)/(s.y-n.y)+n.x&&(o=!o);return o}function ld(e,t,n){var i,s=n[0],o=n[2];return!(e.x<s.x&&t.x<s.x||e.x>o.x&&t.x>o.x||e.y<s.y&&t.y<s.y||e.y>o.y&&t.y>o.y)&&(i=et(e,t,n[0]),i!==et(e,t,n[1])||i!==et(e,t,n[2])||i!==et(e,t,n[3]))}function hn(e,t,n){var s=t.paint.get(e).value;return"constant"===s.kind?s.value:n.programConfigurations.get(t.id).getMaxValue(e)}function ps(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function bs(e,t,n,s,o){if(!t[0]&&!t[1])return e;i=l.convert(t)._mult(o),"viewport"===n&&i._rotate(-s);for(var i,c,r=[],a=0;a<e.length;a++)c=e[a],r.push(c.sub(i));return r}me.prototype.populate=function(e,t,n){var y=this.layers[0],c=[],o=null;"circle"===y.type&&(o=y.layout.get("circle-sort-key"));for(i=0,m=e;i<m.length;i+=1){var i,a,u,m,p,g,r=m[i],s=r.feature,O=r.id,w=r.index,_=r.sourceLayerIndex,b=this.layers[0]._featureFilter.needGeometry,l=Ct(s,b);this.layers[0]._featureFilter.filter(new v(this.zoom),l,n)&&(p=o?o.evaluate(l,{},n):void 0,g={id:O,properties:s.properties,type:s.type,sourceLayerIndex:_,index:w,geometry:b?l.geometry:xt(s),patterns:{},sortKey:p},c.push(g))}o&&c.sort(function(e,t){return e.sortKey-t.sortKey});for(a=0,u=c;a<u.length;a+=1){var j=u[a],h=j,f=h.geometry,d=h.index,x=h.sourceLayerIndex,C=e[d].feature;this.addFeature(j,f,d,n),t.featureIndex.insert(C,f,d,x,this.index)}},me.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},me.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},me.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},me.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ra),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},me.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},me.prototype.addFeature=function(e,t,n,s){for(c=0,u=t;c<u.length;c+=1)for(l=0,d=u[c];l<d.length;l+=1){var o,r,c,l,d,u,h=d[l],a=h.x,i=h.y;a<0||a>=x||i<0||i>=x||(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=r.vertexLength,ms(this.layoutVertexArray,a,i,-1,-1),ms(this.layoutVertexArray,a,i,1,-1),ms(this.layoutVertexArray,a,i,1,1),ms(this.layoutVertexArray,a,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},s)},i("CircleBucket",me,{omit:["layers"]});var rd=new X({"circle-sort-key":new c(t.layout_circle["circle-sort-key"])}),ad={paint:new X({"circle-radius":new c(t.paint_circle["circle-radius"]),"circle-color":new c(t.paint_circle["circle-color"]),"circle-blur":new c(t.paint_circle["circle-blur"]),"circle-opacity":new c(t.paint_circle["circle-opacity"]),"circle-translate":new r(t.paint_circle["circle-translate"]),"circle-translate-anchor":new r(t.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new r(t.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new r(t.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new c(t.paint_circle["circle-stroke-width"]),"circle-stroke-color":new c(t.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new c(t.paint_circle["circle-stroke-opacity"])}),layout:rd},Z="undefined"!=typeof Float32Array?Float32Array:Array;function li(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ia(e,t,n){var w=t[0],_=t[1],y=t[2],j=t[3],m=t[4],c=t[5],l=t[6],d=t[7],u=t[8],h=t[9],r=t[10],f=t[11],p=t[12],g=t[13],v=t[14],b=t[15],a=n[0],i=n[1],o=n[2],s=n[3];return e[0]=a*w+i*m+o*u+s*p,e[1]=a*_+i*c+o*h+s*g,e[2]=a*y+i*l+o*r+s*v,e[3]=a*j+i*d+o*f+s*b,a=n[4],i=n[5],o=n[6],s=n[7],e[4]=a*w+i*m+o*u+s*p,e[5]=a*_+i*c+o*h+s*g,e[6]=a*y+i*l+o*r+s*v,e[7]=a*j+i*d+o*f+s*b,a=n[8],i=n[9],o=n[10],s=n[11],e[8]=a*w+i*m+o*u+s*p,e[9]=a*_+i*c+o*h+s*g,e[10]=a*y+i*l+o*r+s*v,e[11]=a*j+i*d+o*f+s*b,a=n[12],i=n[13],o=n[14],s=n[15],e[12]=a*w+i*m+o*u+s*p,e[13]=a*_+i*c+o*h+s*g,e[14]=a*y+i*l+o*r+s*v,e[15]=a*j+i*d+o*f+s*b,e}Math.hypot||(Math.hypot=function(){for(var t=arguments,n=0,e=arguments.length;e--;)n+=t[e]*t[e];return Math.sqrt(n)}),Ba=Ia,$a=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};function ks(e,t,n){var s=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*s+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*s+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*s+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*s+n[7]*o+n[11]*i+n[15]*a,e}Cs=new Z(3),Z!=Float32Array&&(Cs[0]=0,Cs[1]=0,Cs[2]=0),function(){var e=new Z(4);Z!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}(),Ua=function(e){var t=e[0],n=e[1];return t*t+n*n},Ka=(function(){var e=new Z(2);Z!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(t){e.call(this,t,ad)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new me(e)},t.prototype.queryRadius=function(e){var t=e;return hn("circle-radius",this,t)+hn("circle-stroke-width",this,t)+ps(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,s,o,i,a,r){for(var c,d,f=bs(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,a),g=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),u="map"===this.paint.get("circle-pitch-alignment"),y=u?f:function(e,t){return e.map(function(e){return qa(e,t)})}(f,r),b=u?g*a:g,m=0,p=s;m<p.length;m+=1)for(c=0,d=p[m];c<d.length;c+=1){var l=d[c],j=u?l:qa(l,r),h=b,v=ks([],[l.x,l.y,0,1],r);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?h*=v[3]/i.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(h*=i.cameraToCenterDistance/v[3]),pd(y,j,h))return!0}return!1},t}(pe));function qa(e,t){var n=ks([],[e.x,e.y,0,1],t);return new l(n[0]/n[3],n[1]/n[3])}ci=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(me);function ri(e,t,n,s){var o=t.width,i=t.height;if(s){if(s instanceof Uint8ClampedArray)s=new Uint8Array(s.buffer);else if(s.length!==o*i*n)throw new RangeError("mismatched image size")}else s=new Uint8Array(o*i*n);return e.width=o,e.height=i,e.data=s,e}function Xa(e,t,n){var i,s=t.width,o=t.height;(s!==e.width||o!==e.height)&&(i=ri({},{width:s,height:o},n),ai(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,s),height:Math.min(e.height,o)},n),e.width=s,e.height=o,e.data=i.data)}function ai(e,t,n,s,o,i){if(0===o.width||0===o.height)return t;if(o.width>e.width||o.height>e.height||n.x>e.width-o.width||n.y>e.height-o.height)throw new RangeError("out of range source coordinates for image copy");if(o.width>t.width||o.height>t.height||s.x>t.width-o.width||s.y>t.height-o.height)throw new RangeError("out of range destination coordinates for image copy");for(var c=e.data,l=t.data,a=0;a<o.height;a++)for(var d=((n.y+a)*e.width+n.x)*i,u=((s.y+a)*t.width+s.x)*i,r=0;r<o.width*i;r++)l[u+r]=c[d+r];return t}i("HeatmapBucket",ci,{omit:["layers"]}),st=function(e,t){ri(this,e,1,t)},st.prototype.resize=function(e){Xa(this,e,1)},st.prototype.clone=function(){return new st({width:this.width,height:this.height},new Uint8Array(this.data))},st.copy=function(e,t,n,s,o){ai(e,t,n,s,o,1)},H=function(e,t){ri(this,e,4,t)},H.prototype.resize=function(e){Xa(this,e,4)},H.prototype.replace=function(e,t){t?this.data.set(e):e instanceof Uint8ClampedArray?this.data=new Uint8Array(e.buffer):this.data=e},H.prototype.clone=function(){return new H({width:this.width,height:this.height},new Uint8Array(this.data))},H.copy=function(e,t,n,s,o){ai(e,t,n,s,o,4)},i("AlphaImage",st),i("RGBAImage",H),er={paint:new X({"heatmap-radius":new c(t.paint_heatmap["heatmap-radius"]),"heatmap-weight":new c(t.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new r(t.paint_heatmap["heatmap-intensity"]),"heatmap-color":new St(t.paint_heatmap["heatmap-color"]),"heatmap-opacity":new r(t.paint_heatmap["heatmap-opacity"])})};function tr(e){var s,o,i,a,r,c,l,d,m={},t=e.resolution||256,h=e.clips?e.clips.length:1,n=e.image||new H({width:t,height:h}),u=function(t,s,o){m[e.evaluationKey]=o;var i=e.expression.evaluate(m);n.data[t+s+0]=Math.floor(255*i.r/i.a),n.data[t+s+1]=Math.floor(255*i.g/i.a),n.data[t+s+2]=Math.floor(255*i.b/i.a),n.data[t+s+3]=Math.floor(255*i.a)};if(e.clips)for(s=0,r=0;s<h;++s,r+=4*t)for(i=0,l=0;i<t;i++,l+=4)d=i/(t-1),c=e.clips[s],u(r,l,c.start*(1-d)+c.end*d);else for(o=0,a=0;o<t;o++,a+=4)u(0,a,o/(t-1));return n}var od=function(e){function t(t){e.call(this,t,er),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new ci(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=tr({expression:e,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(pe),sd={paint:new X({"hillshade-illumination-direction":new r(t.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new r(t.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new r(t.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new r(t.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new r(t.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new r(t.paint_hillshade["hillshade-accent-color"])})},nd=function(e){function t(t){e.call(this,t,sd)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(pe),td=D([{name:"a_pos",components:2,type:"Int16"}],4).members,ni=As,ed=As;function As(e,t,n){n=n||2;var o,i,a,r,c,l,d,u,m=t&&t.length,f=m?t[0]*n:e.length,s=lr(e,0,f,n,!0),h=[];if(!s||s.next===s.prev)return h;if(m&&(s=function(e,t,n,s){var o,i,r,a=[];for(o=0,r=t.length;o<r;o++)(i=lr(e,t[o]*s,o<r-1?t[o+1]*s:e.length,s,!1))===i.next&&(i.steiner=!0),a.push(Hl(i));for(a.sort(Wl),o=0;o<a.length;o++)Vl(a[o],n),n=Qe(n,n.next);return n}(e,t,s,n)),e.length>80*n){o=r=e[0],i=d=e[1];for(a=n;a<f;a+=n)(c=e[a])<o&&(o=c),(u=e[a+1])<i&&(i=u),c>r&&(r=c),u>d&&(d=u);l=0!==(l=Math.max(r-o,d-i))?1/l:0}return Ln(s,h,n,o,i,l),h}function lr(e,t,n,s,o){var i,a;if(o===Yo(e,t,n,s)>0)for(i=t;i<n;i+=s)a=Mr(i,e[i],e[i+1],a);else for(i=n-s;i>=t;i-=s)a=Mr(i,e[i],e[i+1],a);return a&&Ms(a,a.next)&&(Wn(a),a=a.next),a}function Qe(e,t){if(!e)return e;t||(t=e);var s,n=e;do if(s=!1,n.steiner||!Ms(n,n.next)&&0!==O(n.prev,n,n.next))n=n.next;else{if(Wn(n),(n=t=n.prev)===n.next)break;s=!0}while(s||n!==t)return t}function Ln(e,t,n,s,o,i,a){if(e){!a&&i&&function(e,t,n,s){var o=e;do null===o.z&&(o.z=Zo(o.x,o.y,t,n,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e)o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,s,o,i,a,r,c,l=1;do{for(n=e,e=null,o=null,r=0;n;){for(r++,t=n,i=0,c=0;c<l&&(i++,t=t.nextZ);c++);for(a=l;i>0||a>0&&t;)0!==i&&(0===a||!t||n.z<=t.z)?(s=n,n=n.nextZ,i--):(s=t,t=t.nextZ,a--),o?o.nextZ=s:e=s,s.prevZ=o,o=s;n=t}o.nextZ=null,l*=2}while(r>1)}(o)}(e,s,o,i);for(var r,c,l=e;e.prev!==e.next;)if(c=e.prev,r=e.next,i?Xl(e,s,o,i):Ql(e))t.push(c.i/n),t.push(e.i/n),t.push(r.i/n),Wn(e),e=r.next,l=r.next;else if((e=r)===l){a?1===a?Ln(e=Kl(Qe(e),t,n),t,n,s,o,i,2):2===a&&Ul(e,t,n,s,o,i):Ln(Qe(e),t,n,s,o,i,1);break}}}function Ql(e){var t,n=e.prev,s=e,o=e.next;if(O(n,s,o)>=0)return!1;for(t=e.next.next;t!==e.prev;){if(Rt(n.x,n.y,s.x,s.y,o.x,o.y,t.x,t.y)&&O(t.prev,t,t.next)>=0)return!1;t=t.next}return!0}function Xl(e,t,n,s){var r=e.prev,c=e,o=e.next;if(O(r,c,o)>=0)return!1;for(var m=r.x<c.x?r.x<o.x?r.x:o.x:c.x<o.x?c.x:o.x,f=r.y<c.y?r.y<o.y?r.y:o.y:c.y<o.y?c.y:o.y,u=r.x>c.x?r.x>o.x?r.x:o.x:c.x>o.x?c.x:o.x,h=r.y>c.y?r.y>o.y?r.y:o.y:c.y>o.y?c.y:o.y,l=Zo(m,f,t,n,s),d=Zo(u,h,t,n,s),i=e.prevZ,a=e.nextZ;i&&i.z>=l&&a&&a.z<=d;){if(i!==e.prev&&i!==e.next&&Rt(r.x,r.y,c.x,c.y,o.x,o.y,i.x,i.y)&&O(i.prev,i,i.next)>=0)return!1;if(i=i.prevZ,a!==e.prev&&a!==e.next&&Rt(r.x,r.y,c.x,c.y,o.x,o.y,a.x,a.y)&&O(a.prev,a,a.next)>=0)return!1;a=a.nextZ}for(;i&&i.z>=l;){if(i!==e.prev&&i!==e.next&&Rt(r.x,r.y,c.x,c.y,o.x,o.y,i.x,i.y)&&O(i.prev,i,i.next)>=0)return!1;i=i.prevZ}for(;a&&a.z<=d;){if(a!==e.prev&&a!==e.next&&Rt(r.x,r.y,c.x,c.y,o.x,o.y,a.x,a.y)&&O(a.prev,a,a.next)>=0)return!1;a=a.nextZ}return!0}function Kl(e,t,n){s=e;do{var s,i=s.prev,o=s.next.next;!Ms(i,o)&&Cr(i,s,s.next,o)&&In(i,o)&&In(o,i)&&(t.push(i.i/n),t.push(s.i/n),t.push(o.i/n),Wn(s),Wn(s.next),s=e=o),s=s.next}while(s!==e)return Qe(s)}function Ul(e,t,n,s,o,i){var r,c,a=e;do{for(r=a.next.next;r!==a.prev;){if(a.i!==r.i&&Pl(a,r))return c=Sr(a,r),a=Qe(a,a.next),c=Qe(c,c.next),Ln(a,t,n,s,o,i),void Ln(c,t,n,s,o,i);r=r.next}a=a.next}while(a!==e)}function Wl(e,t){return e.x-t.x}function Vl(e,t){if(t=function(e,t){var s,r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y&&(r=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y),r<=i&&r>a)){if(a=r,r===i){if(o===n.y)return n;if(o===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}n=n.next}while(n!==t)if(!s)return null;if(i===a)return s;var c,h=s,u=s.x,l=s.y,d=1/0,n=s;do i>=n.x&&n.x>=u&&i!==n.x&&Rt(o<l?i:a,o,u,l,o<l?a:i,o,n.x,n.y)&&(c=Math.abs(o-n.y)/(i-n.x),In(n,e)&&(c<d||c===d&&(n.x>s.x||n.x===s.x&&Il(s,n)))&&(s=n,d=c)),n=n.next;while(n!==h)return s}(e,t)){var n=Sr(t,e);Qe(t,t.next),Qe(n,n.next)}}function Il(e,t){return O(e.prev,e,t.prev)<0&&O(t.next,e,e.next)<0}function Zo(e,t,n,s,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*o)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Hl(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e)return n}function Rt(e,t,n,s,o,i,a,r){return(o-a)*(t-r)-(e-a)*(i-r)>=0&&(e-a)*(s-r)-(n-a)*(t-r)>=0&&(n-a)*(i-r)-(o-a)*(s-r)>=0}function Pl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Cr(n,n.next,e,t))return!0;n=n.next}while(n!==e)return!1}(e,t)&&(In(e,t)&&In(t,e)&&function(e,t){var n=e,s=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==e)return s}(e,t)&&(O(e.prev,e,t.prev)||O(e,t.prev,t))||Ms(e,t)&&O(e.prev,e,e.next)>0&&O(t.prev,t,t.next)>0)}function O(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ms(e,t){return e.x===t.x&&e.y===t.y}function Cr(e,t,n,s){var o=Ds(O(e,t,n)),i=Ds(O(e,t,s)),a=Ds(O(n,s,e)),r=Ds(O(n,s,t));return o!==i&&a!==r||0===o&&!!Ts(e,n,t)||0===i&&!!Ts(e,s,t)||0===a&&!!Ts(n,e,s)||0===r&&!!Ts(n,t,s)}function Ts(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ds(e){return e>0?1:e<0?-1:0}function In(e,t){return O(e.prev,e,e.next)<0?O(e,t,e.next)>=0&&O(e,e.prev,t)>=0:O(e,t,e.prev)<0||O(e,e.next,t)<0}function Sr(e,t){var s=new No(e.i,e.x,e.y),n=new No(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,s.next=o,o.prev=s,n.next=s,s.prev=n,i.next=n,n.prev=i,n}function Mr(e,t,n,s){var o=new No(e,t,n);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Wn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function No(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yo(e,t,n,s){for(var a=0,o=t,i=n-s;o<n;o+=s)a+=(e[i]-e[o])*(e[o+1]+e[i+1]),i=o;return a}function Tl(e,t,n,s,o){Nr(e,t,n||0,s||e.length-1,o||Ml)}function Nr(e,t,n,s,o){for(;s>n;){if(s-n>600){var a=s-n+1,d=t-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(d-a/2<0?-1:1);Nr(e,t,Math.max(n,Math.floor(t-d*c/a+h)),Math.min(s,Math.floor(t+(a-d)*c/a+h)),o)}var l=e[t],r=n,i=s;for($n(e,n,t),o(e[s],l)>0&&$n(e,n,s);r<i;){for($n(e,r,i),r++,i--;o(e[r],l)<0;)r++;for(;o(e[i],l)>0;)i--}0===o(e[n],l)?$n(e,n,i):$n(e,++i,s),i<=t&&(n=i+1),t<=i&&(s=i-1)}}function $n(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function Ml(e,t){return e<t?-1:e>t?1:0}function qo(e,t){if(c=e.length,c<=1)return[e];for(var s,o,a,r,c,n=[],i=0;i<c;i++)a=Md(e[i]),0!==a&&(e[i].area=Math.abs(a),void 0===r&&(r=a<0),r===a<0?(o&&n.push(o),o=[e[i]]):o.push(e[i]));if(o&&n.push(o),t>1)for(s=0;s<n.length;s++)n[s].length<=t||(Tl(n[s],t,1,n[s].length-1,Sl),n[s]=n[s].slice(0,t));return n}function Sl(e,t){return t.area-e.area}function Ko(e,t,n){for(var s,a,r=n.patternDependencies,o=!1,i=0,c=t;i<c.length;i+=1)a=c[i].paint.get(e+"-pattern"),a.isConstant()||(o=!0),s=a.constantOr(null),s&&(o=!0,r[s.to]=!0,r[s.from]=!0);return o}function Uo(e,t,n,s,o){for(var c,l,d=o.patternDependencies,u=0,h=t;u<h.length;u+=1)if(l=h[u],c=l.paint.get(e+"-pattern").value,"constant"!==c.kind){var r=c.evaluate({zoom:s-1},n,{},o.availableImages),i=c.evaluate({zoom:s},n,{},o.availableImages),a=c.evaluate({zoom:s+1},n,{},o.availableImages),r=r&&r.name?r.name:r,i=i&&i.name?i.name:i,a=a&&a.name?a.name:a;d[r]=!0,d[i]=!0,d[a]=!0,n.patterns[l.id]={min:r,mid:i,max:a}}return n}As.deviation=function(e,t,n,s){var o,i,c,d,u,l=t&&t.length,f=l?t[0]*n:e.length,a=Math.abs(Yo(e,0,f,n));if(l)for(o=0,c=t.length;o<c;o++)d=t[o]*n,u=o<c-1?t[o+1]*n:e.length,a-=Math.abs(Yo(e,d,u,n));i=0;for(o=0;o<s.length;o+=3){var r=s[o]*n,h=s[o+1]*n,m=s[o+2]*n;i+=Math.abs((e[r]-e[m])*(e[h+1]-e[r+1])-(e[r]-e[h])*(e[m+1]-e[r+1]))}return 0===a&&0===i?0:Math.abs((i-a)/a)},As.flatten=function(e){for(var n,s,i=e[0][0].length,o={vertices:[],holes:[],dimensions:i},a=0,t=0;t<e.length;t++){for(n=0;n<e[t].length;n++)for(s=0;s<i;s++)o.vertices.push(e[t][n][s]);t>0&&(a+=e[t-1].length,o.holes.push(a))}return o},ni.default=ed,re=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Nt,this.indexArray=new Te,this.indexArray2=new Ft,this.programConfigurations=new te(e.layers,e.zoom),this.segments=new E,this.segments2=new E,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})},re.prototype.populate=function(e,t,n){this.hasPattern=Ko("fill",this.layers,t);for(var h=this.layers[0].layout.get("fill-sort-key"),a=[],r=0,b=e;r<b.length;r+=1){var s,c,p,g,y,_,o=b[r],i=o.feature,C=o.id,O=o.index,w=o.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,l=Ct(i,f);this.layers[0]._featureFilter.filter(new v(this.zoom),l,n)&&(y=h?h.evaluate(l,{},n,t.availableImages):void 0,p={id:C,properties:i.properties,type:i.type,sourceLayerIndex:w,index:O,geometry:f?l.geometry:xt(i),patterns:{},sortKey:y},a.push(p))}h&&a.sort(function(e,t){return e.sortKey-t.sortKey});for(s=0,c=a;s<c.length;s+=1){var m=c[s],u=m,j=u.geometry,d=u.index,x=u.sourceLayerIndex;this.hasPattern?(g=Uo("fill",this.layers,m,this.zoom,t),this.patternFeatures.push(g)):this.addFeature(m,j,d,n,{}),_=e[d].feature,t.featureIndex.insert(_,j,d,x,this.index)}},re.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},re.prototype.addFeatures=function(e,t,n){for(var s,o=0,i=this.patternFeatures;o<i.length;o+=1)s=i[o],this.addFeature(s,s.geometry,s.index,t,n)},re.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},re.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},re.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,td),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},re.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},re.prototype.addFeature=function(e,t,n,s,o){for(h=0,j=qo(t,500);h<j.length;h+=1){for(var b=j[h],v=0,g=0,_=b;g<_.length;g+=1)v+=_[g].length;for(var i,a,c,l,d,u,h,j,f=this.segments.prepareSegment(v,this.layoutVertexArray,this.indexArray),m=f.vertexLength,r=[],w=[],p=0,y=b;p<y.length;p+=1)if(i=y[p],0!==i.length){i!==b[0]&&w.push(r.length/2),u=this.segments2.prepareSegment(i.length,this.layoutVertexArray,this.indexArray2),d=u.vertexLength,this.layoutVertexArray.emplaceBack(i[0].x,i[0].y),this.indexArray2.emplaceBack(d+i.length-1,d),r.push(i[0].x),r.push(i[0].y);for(a=1;a<i.length;a++)this.layoutVertexArray.emplaceBack(i[a].x,i[a].y),this.indexArray2.emplaceBack(d+a-1,d+a),r.push(i[a].x),r.push(i[a].y);u.vertexLength+=i.length,u.primitiveLength+=i.length}for(c=ni(r,w),l=0;l<c.length;l+=3)this.indexArray.emplaceBack(m+c[l],m+c[l+1],m+c[l+2]);f.vertexLength+=v,f.primitiveLength+=c.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,o,s)},i("FillBucket",re,{omit:["layers","patternFeatures"]});var Al=new X({"fill-sort-key":new c(t.layout_fill["fill-sort-key"])}),kl={paint:new X({"fill-antialias":new r(t.paint_fill["fill-antialias"]),"fill-opacity":new c(t.paint_fill["fill-opacity"]),"fill-color":new c(t.paint_fill["fill-color"]),"fill-outline-color":new c(t.paint_fill["fill-outline-color"]),"fill-translate":new r(t.paint_fill["fill-translate"]),"fill-translate-anchor":new r(t.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pn(t.paint_fill["fill-pattern"])}),layout:Al},El=function(e){function t(t){e.call(this,t,kl)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t,n){e.prototype.recalculate.call(this,t,n);var s=this.paint._values["fill-outline-color"];"constant"===s.value.kind&&void 0===s.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new re(e)},t.prototype.queryRadius=function(){return ps(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,s,o,i,a){return xa(bs(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,a),s)},t.prototype.isTileClipped=function(){return!0},t}(pe),xl=D([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qr=Lt;function Lt(e,t,n,s,o){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=s,this._values=o,e.readFields(wl,this,t)}function wl(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(n=e.readVarint()+e.pos;e.pos<n;){var n,s=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[s]=o}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function _l(e){for(var t,s,o=0,n=0,i=e.length,a=i-1;n<i;a=n++)t=e[n],o+=((s=e[a]).x-t.x)*(t.y+s.y);return o}Lt.types=["Unknown","Point","LineString","Polygon"],Lt.prototype.loadGeometry=function(){t=this._pbf,t.pos=this._geometry;for(var e,t,s,c=t.readVarint()+t.pos,n=1,o=0,a=0,r=0,i=[];t.pos<c;)if(o<=0&&(s=t.readVarint(),n=7&s,o=s>>3),o--,1===n||2===n)a+=t.readSVarint(),r+=t.readSVarint(),1===n&&(e&&i.push(e),e=[]),e.push(new l(a,r));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}return e&&i.push(e),i},Lt.prototype.bbox=function(){e=this._pbf,e.pos=this._geometry;for(var e,l,d=e.readVarint()+e.pos,t=1,i=0,n=0,s=0,a=1/0,o=-1/0,r=1/0,c=-1/0;e.pos<d;)if(i<=0&&(l=e.readVarint(),t=7&l,i=l>>3),i--,1===t||2===t)(n+=e.readSVarint())<a&&(a=n),n>o&&(o=n),(s+=e.readSVarint())<r&&(r=s),s>c&&(c=s);else if(7!==t)throw new Error("unknown command "+t);return[a,r,o,c]},Lt.prototype.toGeoJSON=function(e,t,n){var s,i,a,r,d=this.extent*Math.pow(2,n),h=this.extent*e,u=this.extent*t,o=this.loadGeometry(),c=Lt.types[this.type];function l(e){for(t=0;t<e.length;t++){var t,n=e[t],s=180-360*(n.y+u)/d;e[t]=[360*(n.x+h)/d-180,360/Math.PI*Math.atan(Math.exp(s*Math.PI/180))-90]}}switch(this.type){case 1:a=[];for(s=0;s<o.length;s++)a[s]=o[s][0];l(o=a);break;case 2:for(s=0;s<o.length;s++)l(o[s]);break;case 3:for(o=function(e){if(o=e.length,o<=1)return[e];for(var t,s,o,i,a=[],n=0;n<o;n++)s=_l(e[n]),0!==s&&(void 0===i&&(i=s<0),i===s<0?(t&&a.push(t),t=[e[n]]):t.push(e[n]));return t&&a.push(t),a}(o),s=0;s<o.length;s++)for(i=0;i<o[s].length;i++)l(o[s][i])}return 1===o.length?o=o[0]:c="Multi"+c,r={type:"Feature",geometry:{type:c,coordinates:o},properties:this.properties},"id"in this&&(r.id=this.id),r},Po=Zr;function Zr(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(jl,this,t),this.length=this._features.length}function jl(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t,n=null,s=e.readVarint()+e.pos;e.pos<s;)t=e.readVarint()>>3,n=1===t?e.readString():2===t?e.readFloat():3===t?e.readDouble():4===t?e.readVarint64():5===t?e.readVarint():6===t?e.readSVarint():7===t?e.readBoolean():null;return n}(n))}function vl(e,t,n){if(3===e){var s=new Po(n,n.readVarint()+n.pos);s.length&&(t[s.name]=s)}}Zr.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new qr(this._pbf,t,this.extent,this._keys,this._values)};var Ht={VectorTile:function(e,t){this.layers=e.readFields(vl,{},t)},VectorTileFeature:qr,VectorTileLayer:Po},pl=Ht.VectorTileFeature.types,Ro=Math.pow(2,13);function gn(e,t,n,s,o,i,a,r){e.emplaceBack(t,n,2*Math.floor(s*Ro)+a,o*Ro*2,i*Ro*2,Math.round(r))}ie=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new _s,this.indexArray=new Te,this.programConfigurations=new te(e.layers,e.zoom),this.segments=new E,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function fl(e,t){return e.x===t.x&&(e.x<0||e.x>x)||e.y===t.y&&(e.y<0||e.y>x)}ie.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=Ko("fill-extrusion",this.layers,t);for(i=0,r=e;i<r.length;i+=1){var o,i,r,a=r[i],s=a.feature,h=a.id,c=a.index,l=a.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,u=Ct(s,d);this.layers[0]._featureFilter.filter(new v(this.zoom),u,n)&&(o={id:h,sourceLayerIndex:l,index:c,geometry:d?u.geometry:xt(s),properties:s.properties,type:s.type,patterns:{}},this.hasPattern?this.features.push(Uo("fill-extrusion",this.layers,o,this.zoom,t)):this.addFeature(o,o.geometry,c,n,{}),t.featureIndex.insert(s,o.geometry,c,l,this.index,!0))}},ie.prototype.addFeatures=function(e,t,n){for(var s,a,o=0,i=this.features;o<i.length;o+=1)s=i[o],a=s.geometry,this.addFeature(s,a,s.index,t,n)},ie.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},ie.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ie.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ie.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ie.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ie.prototype.addFeature=function(e,t,n,s,o){for(_=0,M=qo(t,500);_<M.length;_+=1){for(var j=M[_],b=0,S=0,z=j;S<z.length;S+=1)b+=z[S].length;for(var i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),A=0,T=j;A<T.length;A+=1)if(f=T[A],0!==f.length&&!((w=f).every(function(e){return e.x<0})||w.every(function(e){return e.x>x})||w.every(function(e){return e.y<0})||w.every(function(e){return e.y>x})))for(l=0,h=0;h<f.length;h++)r=f[h],h>=1&&(c=f[h-1],fl(r,c)||(i.vertexLength+4>E.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)),a=r.sub(c)._perp()._unit(),O=c.dist(r),l+O>32768&&(l=0),gn(this.layoutVertexArray,r.x,r.y,a.x,a.y,0,0,l),gn(this.layoutVertexArray,r.x,r.y,a.x,a.y,0,1,l),l+=O,gn(this.layoutVertexArray,c.x,c.y,a.x,a.y,0,0,l),gn(this.layoutVertexArray,c.x,c.y,a.x,a.y,0,1,l),d=i.vertexLength,this.indexArray.emplaceBack(d,d+2,d+1),this.indexArray.emplaceBack(d+1,d+2,d+3),i.vertexLength+=4,i.primitiveLength+=2));if(i.vertexLength+b>E.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray)),"Polygon"===pl[e.type]){for(var a,r,c,l,d,u,h,m,f,p,g,v,_,w,O,M,y=[],F=[],C=i.vertexLength,k=0,D=j;k<D.length;k+=1)if(p=D[k],0!==p.length){p!==j[0]&&F.push(y.length/2);for(v=0;v<p.length;v++)g=p[v],gn(this.layoutVertexArray,g.x,g.y,0,0,1,1,0),y.push(g.x),y.push(g.y)}for(u=ni(y,F),m=0;m<u.length;m+=3)this.indexArray.emplaceBack(C+u[m],C+u[m+2],C+u[m+1]);i.primitiveLength+=u.length/3,i.vertexLength+=b}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,o,s)},i("FillExtrusionBucket",ie,{omit:["layers","features"]}),rc={paint:new X({"fill-extrusion-opacity":new r(t["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new c(t["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new r(t["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new r(t["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pn(t["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new c(t["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new c(t["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new r(t["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Pc=function(e){function t(t){e.call(this,t,rc)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new ie(e)},t.prototype.queryRadius=function(){return ps(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(e,t,n,s,o,i,a,r){var d=bs(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),m=function(e,t,n,s){for(var o,a,r=[],i=0,c=e;i<c.length;i+=1)a=c[i],o=[a.x,a.y,s,1],ks(o,o,t),r.push(new l(o[0]/o[3],o[1]/o[3]));return r}(d,r,0,0),c=function(e,t,n,s){for(var O=[],y=[],D=s[8]*t,z=s[9]*t,x=s[10]*t,k=s[11]*t,E=s[8]*n,C=s[9]*n,S=s[10]*n,N=s[11]*n,u=0,g=e;u<g.length;u+=1){for(var v=[],b=[],r=0,w=g[u];r<w.length;r+=1){var a,_=w[r],o=_.x,i=_.y,h=s[0]*o+s[4]*i+s[12],m=s[1]*o+s[5]*i+s[13],f=s[2]*o+s[6]*i+s[14],p=s[3]*o+s[7]*i+s[15],A=f+x,d=p+k,M=h+E,F=m+C,T=f+S,c=p+N,j=new l((h+D)/d,(m+z)/d);j.z=A/d,v.push(j),a=new l(M/c,F/c),a.z=T/c,b.push(a)}O.push(v),y.push(b)}return[O,y]}(s,h,u,r);return function(e,t,n){s=1/0,xa(n,t)&&(s=dc(n,t[0]));for(i=0;i<t.length;i++)for(var a=t[i],r=e[i],o=0;o<a.length-1;o++){var s,i,c=a[o],d=a[o+1],u=r[o],l=[c,d,r[o+1],u,c];wa(n,l)&&(s=Math.min(s,dc(n,l)))}return s!==1/0&&s}(c[0],c[1],m)},t}(pe);function Mn(e,t){return e.x*t.x+e.y*t.y}function dc(e,t){if(1===e.length){for(n=0,s=t[n++];!o||s.equals(o);)if(!(o=t[n++]))return 1/0;for(;n<t.length;n++){var n,s,o,_,y=t[n],O=e[0],a=o.sub(s),r=y.sub(s),m=O.sub(s),u=Mn(a,a),i=Mn(a,r),h=Mn(r,r),d=Mn(m,a),f=Mn(m,r),p=u*h-i*i,g=(h*d-i*f)/p,v=(u*f-i*d)/p,w=1-g-v,j=s.z*w+o.z*g+y.z*v;if(isFinite(j))return j}return 1/0}for(var c=1/0,l=0,b=t;l<b.length;l+=1)_=b[l],c=Math.min(c,_.z);return c}var ml=D([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,dl=D([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,cl=Ht.VectorTileFeature.types,rl=Math.cos(Math.PI/180*37.5),pc=Math.pow(2,14)/.5,I=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(e){t.gradients[e.id]={}}),this.layoutVertexArray=new ys,this.layoutVertexArray2=new Gt,this.indexArray=new Te,this.programConfigurations=new te(e.layers,e.zoom),this.segments=new E,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};I.prototype.populate=function(e,t,n){this.hasPattern=Ko("line",this.layers,t);for(var h=this.layers[0].layout.get("line-sort-key"),a=[],r=0,b=e;r<b.length;r+=1){var s,c,p,g,y,_,o=b[r],i=o.feature,C=o.id,O=o.index,w=o.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,l=Ct(i,f);this.layers[0]._featureFilter.filter(new v(this.zoom),l,n)&&(y=h?h.evaluate(l,{},n):void 0,p={id:C,properties:i.properties,type:i.type,sourceLayerIndex:w,index:O,geometry:f?l.geometry:xt(i),patterns:{},sortKey:y},a.push(p))}h&&a.sort(function(e,t){return e.sortKey-t.sortKey});for(s=0,c=a;s<c.length;s+=1){var m=c[s],u=m,j=u.geometry,d=u.index,x=u.sourceLayerIndex;this.hasPattern?(g=Uo("line",this.layers,m,this.zoom,t),this.patternFeatures.push(g)):this.addFeature(m,j,d,n,{}),_=e[d].feature,t.featureIndex.insert(_,j,d,x,this.index)}},I.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},I.prototype.addFeatures=function(e,t,n){for(var s,o=0,i=this.patternFeatures;o<i.length;o+=1)s=i[o],this.addFeature(s,s.geometry,s.index,t,n)},I.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},I.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},I.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,dl)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ml),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},I.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},I.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},I.prototype.addFeature=function(e,t,n,s,o){var a,r,c,i=this.layers[0].layout,h=i.get("line-join").evaluate(e,{}),l=i.get("line-cap"),d=i.get("line-miter-limit"),u=i.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(a=0,r=t;a<r.length;a+=1)c=r[a],this.addLine(c,e,h,l,d,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,o,s)},I.prototype.addLine=function(e,t,n,s,o,i){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(_=0;_<e.length-1;_++)this.totalDistance+=e[_].dist(e[_+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(y="Polygon"===cl[t.type],m=e.length;m>=2&&e[m-1].equals(e[m-2]);)m--;for(g=0;g<m-1&&e[g].equals(e[g+1]);)g++;if(!(m<(y?3:2))){"bevel"===n&&(o=1.05);var a,c,d,m,g,v,b,y,_,C,k,A,S,M,F,T,z,D,N,R,E=this.overscaling<=16?15*x/(512*this.overscaling):0,u=this.segments.prepareSegment(10*m,this.layoutVertexArray,this.indexArray),h=void 0,p=void 0,l=void 0,r=void 0;this.e1=this.e2=-1,y&&(a=e[m-2],r=e[g].sub(a)._unit()._perp());for(v=g;v<m;v++)if(!(p=v===m-1?y?e[g+1]:void 0:e[v+1])||!e[v].equals(p)){r&&(l=r),a&&(h=a),a=e[v],r=p?p.sub(a)._unit()._perp():l,d=(l=l||r).add(r),0===d.x&&0===d.y||d._unit();var w=l.x*r.x+l.y*r.y,O=d.x*r.x+d.y*r.y,f=0!==O?1/O:1/0,B=2*Math.sqrt(2-2*O),I=O<rl&&h&&p,j=l.x*r.y-l.y*r.x>0;if(I&&v>g&&(M=a.dist(h),M>2*E&&(k=a.sub(a.sub(h)._mult(E/M)._round()),this.updateDistance(h,k),this.addCurrentVertex(k,l,0,0,u),h=k)),D=h&&p,c=D?n:y?"butt":s,D&&"round"===c&&(f<i?c="miter":f<=2&&(c="fakeround")),"miter"===c&&f>o&&(c="bevel"),"bevel"===c&&(f>2&&(c="flipbevel"),f<o&&(c="miter")),h&&this.updateDistance(h,a),"miter"===c)d._mult(f),this.addCurrentVertex(a,d,0,0,u);else if("flipbevel"===c)f>100?d=r.mult(-1):(R=f*l.add(r).mag()/l.sub(r).mag(),d._perp()._mult(R*(j?-1:1))),this.addCurrentVertex(a,d,0,0,u),this.addCurrentVertex(a,d.mult(-1),0,0,u);else if("bevel"===c||"fakeround"===c){var L=-Math.sqrt(f*f-1),P=j?L:0,H=j?0:L;if(h&&this.addCurrentVertex(a,l,P,H,u),"fakeround"===c)for(z=Math.round(180*B/Math.PI/20),A=1;A<z;A++)b=A/z,.5!==b&&(C=b-.5,b+=b*C*(b-1)*((1.0904+w*(w*(3.55645-1.43519*w)-3.2452))*C*C+(.848013+w*(.215638*w-1.06021)))),F=r.sub(l)._mult(b)._add(l)._unit()._mult(j?-1:1),this.addHalfVertex(a,F.x,F.y,!1,j,0,u);p&&this.addCurrentVertex(a,r,-P,-H,u)}else"butt"===c?this.addCurrentVertex(a,d,0,0,u):"square"===c?(T=h?1:-1,this.addCurrentVertex(a,d,T,T,u)):"round"===c&&(h&&(this.addCurrentVertex(a,l,0,0,u),this.addCurrentVertex(a,l,1,1,u,!0)),p&&(this.addCurrentVertex(a,r,-1,-1,u,!0),this.addCurrentVertex(a,r,0,0,u)));I&&v<m-1&&(N=a.dist(p),N>2*E&&(S=a.add(p.sub(a)._mult(E/N)._round()),this.updateDistance(a,S),this.addCurrentVertex(S,r,0,0,u),a=S))}}},I.prototype.addCurrentVertex=function(e,t,n,s,o,i){void 0===i&&(i=!1);var a=t.x+t.y*n,r=t.y-t.x*n,c=-t.x+t.y*s,l=-t.y-t.x*s;this.addHalfVertex(e,a,r,i,!1,n,o),this.addHalfVertex(e,c,l,i,!0,-s,o),this.distance>pc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,n,s,o,i))},I.prototype.addHalfVertex=function(e,t,n,s,o,i,a){var r,l,d=e.x,u=e.y,c=.5*(this.lineClips?this.scaledDistance*(pc-1):this.scaledDistance);(this.layoutVertexArray.emplaceBack((d<<1)+(s?1:0),(u<<1)+(o?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===i?0:i<0?-1:1)|(63&c)<<2,c>>6),this.lineClips)&&(l=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.layoutVertexArray2.emplaceBack(l,this.lineClipsArray.length)),r=a.vertexLength++,this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,r),a.primitiveLength++),o?this.e2=r:this.e1=r},I.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},I.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},i("LineBucket",I,{omit:["layers","patternFeatures"]});var al=new X({"line-cap":new r(t.layout_line["line-cap"]),"line-join":new c(t.layout_line["line-join"]),"line-miter-limit":new r(t.layout_line["line-miter-limit"]),"line-round-limit":new r(t.layout_line["line-round-limit"]),"line-sort-key":new c(t.layout_line["line-sort-key"])}),bc={paint:new X({"line-opacity":new c(t.paint_line["line-opacity"]),"line-color":new c(t.paint_line["line-color"]),"line-translate":new r(t.paint_line["line-translate"]),"line-translate-anchor":new r(t.paint_line["line-translate-anchor"]),"line-width":new c(t.paint_line["line-width"]),"line-gap-width":new c(t.paint_line["line-gap-width"]),"line-offset":new c(t.paint_line["line-offset"]),"line-blur":new c(t.paint_line["line-blur"]),"line-dasharray":new pt(t.paint_line["line-dasharray"]),"line-pattern":new Pn(t.paint_line["line-pattern"]),"line-gradient":new St(t.paint_line["line-gradient"])}),layout:al},il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new v(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,s,o){return n=G({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,s,o)},t}(c),yc=new il(bc.paint.properties["line-width"].specification);yc.useIntegerZoom=!0,_c=function(e){function t(t){e.call(this,t,bc),this.gradientVersion=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression.expression instanceof ye,this.gradientVersion=(this.gradientVersion+1)%ic}},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(t,n){e.prototype.recalculate.call(this,t,n),this.paint._values["line-floorwidth"]=yc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new I(e)},t.prototype.queryRadius=function(e){var t=e,n=wc(hn("line-width",this,t),hn("line-gap-width",this,t)),s=hn("line-offset",this,t);return n/2+Math.abs(s)+ps(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,s,o,i,a){var c=bs(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),i.angle,a),d=a/2*wc(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),r=this.paint.get("line-offset").evaluate(t,n);return r&&(s=function(e,t){for(var d=[],u=new l(0,0),r=0;r<e.length;r++){for(var s=e[r],c=[],n=0;n<s.length;n++){var h=s[n-1],a=s[n],f=s[n+1],m=0===n?u:a.sub(h)._unit()._perp(),i=n===s.length-1?u:f.sub(a)._unit()._perp(),o=m._add(i)._unit(),p=o.x*i.x+o.y*i.y;o._mult(1/p),c.push(o._mult(t)._add(a))}d.push(c)}return d}(s,r*a)),function(e,t,n){for(var s,o,i=0;i<t.length;i++){if(s=t[i],e.length>=3)for(o=0;o<s.length;o++)if(Wt(e,s[o]))return!0;if(md(e,s,n))return!0}return!1}(c,s,d)},t.prototype.isTileClipped=function(){return!0},t}(pe);function wc(e,t){return t>0?t+2*e:e}var ol=D([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sl=D([{name:"a_projected_pos",components:3,type:"Float32"}],4),Jc=(D([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),D([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ec=(D([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),D([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Zc=D([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Xc(e,t,n){return e.sections.forEach(function(e){e.text=function(e,t,n){var s=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===s?e=e.toLocaleUpperCase():"lowercase"===s&&(e=e.toLocaleLowerCase()),se.applyArabicShaping&&(e=se.applyArabicShaping(e)),e}(e.text,t,n)}),e}D([{name:"triangle",components:3,type:"Uint16"}]),D([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),D([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),D([{type:"Float32",name:"offsetX"}]),D([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var dn={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},M=24,Fc=function(e,t,n,s,o){var i,r,m=8*o-s-1,u=(1<<m)-1,h=u>>1,a=-7,c=n?o-1:0,d=n?-1:1,l=e[t+c];for(c+=d,i=l&(1<<-a)-1,l>>=-a,a+=m;a>0;i=256*i+e[t+c],c+=d,a-=8);for(r=i&(1<<-a)-1,i>>=-a,a+=s;a>0;r=256*r+e[t+c],c+=d,a-=8);if(0===i)i=1-h;else{if(i===u)return r?NaN:1/0*(l?-1:1);r+=Math.pow(2,s),i-=h}return(l?-1:1)*r*Math.pow(2,i-s)},Tc=function(e,t,n,s,o,i){var a,r,c,u=8*i-o-1,h=(1<<u)-1,l=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=s?0:i-1,m=s?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=h?(r=0,a=h):a+l>=1?(r=(t*c-1)*Math.pow(2,o),a+=l):(r=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[n+d]=255&r,d+=m,r/=256,o-=8);for(a=a<<o|r,u+=o;u>0;e[n+d]=255&a,d+=m,a/=256,u-=8);e[n+d-m]|=128*p},Hs=p;function p(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}p.Varint=0,p.Fixed64=1,p.Bytes=2,p.Fixed32=5;var fo=4294967296,Lc=1/fo,Rc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Me(e){return e.type===p.Bytes?e.readVarint()+e.pos:e.pos+1}function nn(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Ca(e,t,n){var s,o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(o);for(s=n.pos-1;s>=e;s--)n.buf[s+o]=n.buf[s]}function $d(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Vc(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function $c(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Wc(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Uc(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Kc(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function qc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Yc(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Gc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Bs(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Pt(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function kc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}p.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var s=this.readVarint(),o=s>>3,i=this.pos;this.type=7&s,e(o,t,this),this.pos===i&&this.skip(s)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Bs(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=kc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Bs(this.buf,this.pos)+Bs(this.buf,this.pos+4)*fo;return this.pos+=8,e},readSFixed64:function(){var e=Bs(this.buf,this.pos)+kc(this.buf,this.pos+4)*fo;return this.pos+=8,e},readFloat:function(){var e=Fc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Fc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,s=this.buf;return t=127&(n=s[this.pos++]),n<128?t:(t|=(127&(n=s[this.pos++]))<<7,n<128?t:(t|=(127&(n=s[this.pos++]))<<14,n<128?t:(t|=(127&(n=s[this.pos++]))<<21,n<128?t:function(e,t,n){var s,o,i=n.buf;if(s=(112&(o=i[n.pos++]))>>4,o<128)return nn(e,s,t);if(s|=(127&(o=i[n.pos++]))<<3,o<128)return nn(e,s,t);if(s|=(127&(o=i[n.pos++]))<<10,o<128)return nn(e,s,t);if(s|=(127&(o=i[n.pos++]))<<17,o<128)return nn(e,s,t);if(s|=(127&(o=i[n.pos++]))<<24,o<128)return nn(e,s,t);if(s|=(1&(o=i[n.pos++]))<<31,o<128)return nn(e,s,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=s[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Rc?function(e,t,n){return Rc.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(l="",o=t;o<n;){var o,i,c,l,d,a=e[o],s=null,r=a>239?4:a>223?3:a>191?2:1;if(o+r>n)break;1===r?a<128&&(s=a):2===r?128==(192&(i=e[o+1]))&&(s=(31&a)<<6|63&i)<=127&&(s=null):3===r?(i=e[o+1],c=e[o+2],128==(192&i)&&128==(192&c)&&((s=(15&a)<<12|(63&i)<<6|63&c)<=2047||s>=55296&&s<=57343)&&(s=null)):4===r&&(i=e[o+1],c=e[o+2],d=e[o+3],128==(192&i)&&128==(192&c)&&128==(192&d)&&((s=(15&a)<<18|(63&i)<<12|(63&c)<<6|63&d)<=65535||s>=1114112)&&(s=null)),null===s?(s=65533,r=1):s>65535&&(s-=65536,l+=String.fromCharCode(s>>>10&1023|55296),s=56320|1023&s),l+=String.fromCharCode(s),o+=r}return l}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==p.Bytes)return e.push(this.readVarint(t));var n=Me(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==p.Bytes)return e.push(this.readSVarint());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==p.Bytes)return e.push(this.readBoolean());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==p.Bytes)return e.push(this.readFloat());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==p.Bytes)return e.push(this.readDouble());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==p.Bytes)return e.push(this.readFixed32());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==p.Bytes)return e.push(this.readSFixed32());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==p.Bytes)return e.push(this.readFixed64());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==p.Bytes)return e.push(this.readSFixed64());var t=Me(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===p.Varint)for(;this.buf[this.pos++]>127;);else if(t===p.Bytes)this.pos=this.readVarint()+this.pos;else if(t===p.Fixed32)this.pos+=4;else{if(t!==p.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var n,t=this.length||16;t<this.pos+e;)t*=2;t!==this.length&&(n=new Uint8Array(t),n.set(this.buf),this.buf=n,this.length=t)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Pt(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Pt(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Pt(this.buf,-1&e,this.pos),Pt(this.buf,Math.floor(e*Lc),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Pt(this.buf,-1&e,this.pos),Pt(this.buf,Math.floor(e*Lc),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,s;if(e>=0?(n=e%4294967296|0,s=e/4294967296|0):(s=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,s=s+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(s,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t,n=this.pos;this.pos=function(e,t,n){for(var s,o,i=0;i<t.length;i++){if((s=t.charCodeAt(i))>55295&&s<57344){if(!o){s>56319||i+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):o=s;continue}if(s<56320){e[n++]=239,e[n++]=191,e[n++]=189,o=s;continue}s=o-55296<<10|s-56320|65536,o=null}else o&&(e[n++]=239,e[n++]=191,e[n++]=189,o=null);s<128?e[n++]=s:(s<2048?e[n++]=s>>6|192:(s<65536?e[n++]=s>>12|224:(e[n++]=s>>18|240,e[n++]=s>>12&63|128),e[n++]=s>>6&63|128),e[n++]=63&s|128)}return n}(this.buf,e,this.pos),t=this.pos-n,t>=128&&Ca(n,t,this),this.pos=n-1,this.writeVarint(t),this.pos+=t},writeFloat:function(e){this.realloc(4),Tc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Tc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t,n=e.length;this.writeVarint(n),this.realloc(n);for(t=0;t<n;t++)this.buf[this.pos++]=e[t]},writeRawMessage:function(e,t){this.pos++;var n,s=this.pos;e(t,this),n=this.pos-s,n>=128&&Ca(s,n,this),this.pos=s-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,n){this.writeTag(e,p.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,$d,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Vc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Uc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,$c,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Wc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Kc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,qc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Yc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Gc,t)},writeBytesField:function(e,t){this.writeTag(e,p.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,p.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,p.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,p.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,p.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,p.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,p.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,p.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,p.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,p.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}},Ws=3;function el(e,t,n){1===e&&n.readMessage(tl,t)}function tl(e,t,n){if(3===e){var s=n.readMessage(nl,{}),a=s.id,r=s.bitmap,o=s.width,i=s.height,c=s.left,l=s.top,d=s.advance;t.push({id:a,bitmap:new st({width:o+2*Ws,height:i+2*Ws},r),metrics:{width:o,height:i,left:c,top:l,advance:d}})}}function nl(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}Ao=Ws;function Oc(e){for(var c=0,u=0,d=0,m=e;d<m.length;d+=1)a=m[d],c+=a.w*a.h,u=Math.max(u,a.w);e.sort(function(e,t){return t.h-e.h});for(var t,n,s,a,f,o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),u),h:1/0}],r=0,i=0,l=0,h=e;l<h.length;l+=1)for(t=h[l],s=o.length-1;s>=0;s--)if(n=o[s],!(t.w>n.w||t.h>n.h)){t.x=n.x,t.y=n.y,i=Math.max(i,t.y+t.h),r=Math.max(r,t.x+t.w),t.w===n.w&&t.h===n.h?(f=o.pop(),s<o.length&&(o[s]=f)):t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(o.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}return{w:r,h:i,fill:c/(r*i)||0}}var U=1,Us=function(e,t){var n=t.pixelRatio,s=t.version,o=t.stretchX,i=t.stretchY,a=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=o,this.stretchY=i,this.content=a,this.version=s},un={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};un.tl.get=function(){return[this.paddedRect.x+U,this.paddedRect.y+U]},un.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-U,this.paddedRect.y+this.paddedRect.h-U]},un.tlbr.get=function(){return this.tl.concat(this.br)},un.displaySize.get=function(){return[(this.paddedRect.w-2*U)/this.pixelRatio,(this.paddedRect.h-2*U)/this.pixelRatio]},Object.defineProperties(Us.prototype,un),kt=function(e,t){c={},l={},this.haveRenderCallbacks=[],a=[],this.addImages(e,c,a),this.addImages(t,l,a);var p=Oc(a),b=p.w,v=p.h,s=new H({width:b||1,height:v||1});for(m in e)h=e[m],u=c[m].paddedRect,H.copy(h.data,s,{x:0,y:0},{x:u.x+U,y:u.y+U},h.data);for(g in t){var a,c,l,u,h,m,g,n=t[g],f=l[g].paddedRect,i=f.x+U,o=f.y+U,r=n.data.width,d=n.data.height;H.copy(n.data,s,{x:0,y:0},{x:i,y:o},n.data),H.copy(n.data,s,{x:0,y:d-1},{x:i,y:o-1},{width:r,height:1}),H.copy(n.data,s,{x:0,y:0},{x:i,y:o+d},{width:r,height:1}),H.copy(n.data,s,{x:r-1,y:0},{x:i-1,y:o},{width:1,height:d}),H.copy(n.data,s,{x:0,y:0},{x:i+r,y:o},{width:1,height:d})}this.image=s,this.iconPositions=c,this.patternPositions=l},kt.prototype.addImages=function(e,t,n){for(o in e){var o,s=e[o],i={x:0,y:0,w:s.data.width+2*U,h:s.data.height+2*U};n.push(i),t[o]=new Us(i,s),s.hasRenderCallback&&this.haveRenderCallbacks.push(o)}},kt.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},kt.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var s=e.tl,o=s[0],i=s[1];n.update(t.data,void 0,{x:o,y:i})}},i("ImagePosition",Us),i("ImageAtlas",kt),Q={horizontal:1,vertical:2,horizontalOnly:3},sn=-17,ht=function(){this.scale=1,this.fontStack="",this.imageName=null},ht.forText=function(e,t){var n=new ht;return n.scale=e||1,n.fontStack=t,n},ht.forImage=function(e){var t=new ht;return t.imageName=e,t},T=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ys(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p){g=T.fromFeature(e,o),u===Q.vertical&&g.verticalizePunctuation();var g,v,b,j,y,_,w,O,x,C,E,k,A,S=se.processBidirectionalText,F=se.processStyledBidirectionalText;if(S&&1===g.sections.length){v=[];for(y=0,w=S(g.toString(),Ho(g,l,i,t,s,m,f));y<w.length;y+=1){O=w[y],j=new T,j.text=O,j.sections=g.sections;for(C=0;C<O.length;C++)j.sectionIndex.push(0);v.push(j)}}else if(F){v=[];for(_=0,E=F(g.text,g.sectionIndex,Ho(g,l,i,t,s,m,f));_<E.length;_+=1)k=E[_],b=new T,b.text=k[0],b.sectionIndex=k[1],b.sections=g.sections,v.push(b)}else v=function(e,t){for(var i,s=[],a=e.text,n=0,o=0,r=t;o<r.length;o+=1)i=r[o],s.push(e.substring(n,i)),n=i;return n<a.length&&s.push(e.substring(n,a.length)),s}(g,Ho(g,l,i,t,s,m,f));return x=[],A={positionedLines:x,text:g.toString(),top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:u,iconsInText:!1,verticalizable:!1},function(e,t,n,s,o,i,a,r,c,l,d,u){for(var y=0,C=sn,_=0,F=0,V="right"===r?1:"left"===r?0:.5,P=0,R=0,$=o;R<$.length;R+=1){f=$[R],f.trim();var w=f.getMaxScale(),q=(w-1)*M,T={positionedGlyphs:[],lineOffset:0};if(e.positionedLines[P]=T,v=T.positionedGlyphs,b=0,f.length()){for(j=0;j<f.length();j++){var m,f,v,b,j,x,E,k,N,L,H,I,W,h=f.getSection(j),B=f.getSectionIndex(j),g=f.getCharCode(j),S=0,p=null,A=null,D=null,K=M,O=!(c===Q.horizontal||!d&&!vo(g)||d&&(pn[g]||su(g)));if(h.imageName){if(k=s[h.imageName],!k)continue;D=h.imageName,e.iconsInText=e.iconsInText||!0,A=k.paddedRect,m=k.displaySize,h.scale=h.scale*M/u,p={width:m[0],height:m[1],left:U,top:-Ao,advance:O?m[1]:m[0]},S=q+(M-m[1]*h.scale),K=p.advance,E=O?m[0]*h.scale-M*w:m[1]*h.scale-M*w,E>0&&E>b&&(b=E)}else{if(I=n[h.fontStack],x=I&&I[g],x&&x.rect)A=x.rect,p=x.metrics;else{if(H=t[h.fontStack],L=H&&H[g],!L)continue;p=L.metrics}S=(w-h.scale)*M}O?(e.verticalizable=!0,v.push({glyph:g,imageName:D,x:y,y:C+S,vertical:O,scale:h.scale,fontStack:h.fontStack,sectionIndex:B,metrics:p,rect:A}),y+=K*h.scale+l):(v.push({glyph:g,imageName:D,x:y,y:C+S,vertical:O,scale:h.scale,fontStack:h.fontStack,sectionIndex:B,metrics:p,rect:A}),y+=p.advance*h.scale+l)}0!==v.length&&(W=y-l,_=Math.max(W,_),Ol(v,0,v.length-1,V,b)),y=0,N=i*w+b,T.lineOffset=Math.max(b,q),C+=N,F=Math.max(N,F),++P}else C+=i,++P}var z=C-sn,Y=Io(a),G=Y.horizontalAlign,X=Y.verticalAlign;(function(e,t,n,s,o,i,a,r,c){for(var l,d,h,p=(t-n)*o,m=0,m=i!==a?-r*s-sn:(-s*c+.5)*a,u=0,f=e;u<f.length;u+=1)for(l=0,h=f[u].positionedGlyphs;l<h.length;l+=1)d=h[l],d.x+=p,d.y+=m})(e.positionedLines,V,G,X,_,F,i,z,o.length),e.top+=-X*z,e.bottom=e.top+z,e.left+=-G*_,e.right=e.left+_}(A,t,n,s,v,a,r,c,u,l,h,p),!function(e){for(var t=0,n=e;t<n.length;t+=1)if(0!==n[t].positionedGlyphs.length)return!1;return!0}(x)&&A}T.fromFeature=function(e,t){for(var n,s=new T,o=0;o<e.sections.length;o++)n=e.sections[o],n.image?s.addImageSection(n):s.addTextSection(n,t);return s},T.prototype.length=function(){return this.text.length},T.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},T.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},T.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},T.prototype.verticalizePunctuation=function(){this.text=function(e){for(var s,o,n="",t=0;t<e.length;t++)s=e.charCodeAt(t+1)||null,o=e.charCodeAt(t-1)||null,s&&Mc(s)&&!dn[e[t+1]]||o&&Mc(o)&&!dn[e[t-1]]||!dn[e[t]]?n+=e[t]:n+=dn[e[t]];return n}(this.text)},T.prototype.trim=function(){for(var e,n,t=0,s=0;s<this.text.length&&pn[this.text.charCodeAt(s)];s++)t++;for(n=this.text.length,e=this.text.length-1;e>=0&&e>=t&&pn[this.text.charCodeAt(e)];e--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},T.prototype.substring=function(e,t){var n=new T;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},T.prototype.toString=function(){return this.text},T.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)},T.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(ht.forText(e.scale,e.fontStack||t));for(var s=this.sections.length-1,n=0;n<e.text.length;++n)this.sectionIndex.push(s)},T.prototype.addImageSection=function(e){var t,n=e.image?e.image.name:"";0!==n.length?(t=this.getNextImageSectionCharCode(),t?(this.text+=String.fromCharCode(t),this.sections.push(ht.forImage(n)),this.sectionIndex.push(this.sections.length-1)):W("Reached maximum number of images 6401")):W("Can't add FormattedSection with an empty image.")},T.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)},pn={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},V={};function tc(e,t,n,s,o,i){if(t.imageName)return a=s[t.imageName],a?a.displaySize[0]*t.scale*M/i+o:0;var a,r=n[t.fontStack],c=r&&r[e];return c?c.metrics.advance*t.scale+o:0}function ec(e,t,n,s){var o=Math.pow(e-t,2);return s?e<t?o/2:2*o:o+Math.abs(n)*n}function bl(e,t,n){var s=0;return 10===e&&(s-=1e4),n&&(s+=150),40!==e&&65288!==e||(s+=50),41!==t&&65289!==t||(s+=50),s}function Jr(e,t,n,s,o,i){for(var a,l,d=null,r=ec(t,n,o,i),c=0,u=s;c<u.length;c+=1)a=u[c],l=ec(t-a.x,n,o,i)+a.badness,l<=r&&(d=a,r=l);return{index:e,x:t,priorBreak:d,badness:r}}function Ic(e){return e?Ic(e.priorBreak).concat(e.index):[]}function Ho(e,t,n,o,i,a,r){if("point"!==a)return[];if(!e)return[];for(var c,d,u,m,f=[],p=function(e,t,n,s,o,i){for(var c,r=0,a=0;a<e.length();a++)c=e.getSection(a),r+=tc(e.getCharCode(a),c,s,o,t,i);return r/Math.max(1,Math.ceil(r/n))}(e,t,n,o,i,r),g=e.text.indexOf("​")>=0,h=0,l=0;l<e.length();l++)m=e.getSection(l),d=e.getCharCode(l),(pn[d]||(h+=tc(d,m,o,i,t,r)),l<e.length()-1)&&(u=!((c=d)<11904||!(s["Bopomofo Extended"](c)||s.Bopomofo(c)||s["CJK Compatibility Forms"](c)||s["CJK Compatibility Ideographs"](c)||s["CJK Compatibility"](c)||s["CJK Radicals Supplement"](c)||s["CJK Strokes"](c)||s["CJK Symbols and Punctuation"](c)||s["CJK Unified Ideographs Extension A"](c)||s["CJK Unified Ideographs"](c)||s["Enclosed CJK Letters and Months"](c)||s["Halfwidth and Fullwidth Forms"](c)||s.Hiragana(c)||s["Ideographic Description Characters"](c)||s["Kangxi Radicals"](c)||s["Katakana Phonetic Extensions"](c)||s.Katakana(c)||s["Vertical Forms"](c)||s["Yi Radicals"](c)||s["Yi Syllables"](c))),(V[d]||u||m.imageName)&&f.push(Jr(l+1,h,p,f,bl(d,e.getCharCode(l+1),u&&g),!1)));return Ic(Jr(e.length(),h,p,f,0,!0))}function Io(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Ol(e,t,n,s,o){if(s||o)for(var a=e[n],r=a.metrics.advance*a.scale,c=(e[n].x+r)*s,i=t;i<=n;i++)e[i].x-=c,e[i].y+=o}function Kr(e,t,n,s,o,i){if(a=e.image,a.content){var a,l,d,u,h,m,f,p,g,v,r=a.content,c=a.pixelRatio||1;v=[r[0]/c,r[1]/c,a.displaySize[0]-r[2]/c,a.displaySize[1]-r[3]/c]}return m=t.left*i,f=t.right*i,"width"===n||"both"===n?(h=o[0]+m-s[3],u=o[0]+f+s[1]):u=(h=o[0]+(m+f-a.displaySize[0])/2)+a.displaySize[0],p=t.top*i,g=t.bottom*i,"height"===n||"both"===n?(d=o[1]+p-s[0],l=o[1]+g+s[2]):l=(d=o[1]+(p+g-a.displaySize[1])/2)+a.displaySize[1],{image:a,top:d,right:u,bottom:l,left:h,collisionPadding:v}}V[10]=!0,V[32]=!0,V[38]=!0,V[40]=!0,V[41]=!0,V[43]=!0,V[45]=!0,V[47]=!0,V[173]=!0,V[183]=!0,V[8203]=!0,V[8208]=!0,V[8211]=!0,V[8231]=!0,_t=function(e){function t(t,n,s,o){e.call(this,t,n),this.angle=s,void 0!==o&&(this.segment=o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(l),i("Anchor",_t),ce=128;function Vo(e,t){if(n=t.expression,"constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new v(e+1))};if("source"===n.kind)return{kind:"source"};for(var n,o,a,r,s=n.zoomStops,c=n.interpolationType,i=0;i<s.length&&s[i]<=e;)i++;for(o=i=Math.max(0,i-1);o<s.length&&s[o]<e+1;)o++;return o=Math.min(s.length-1,o),a=s[i],r=s[o],"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:r,interpolationType:c}:{kind:"camera",minZoom:a,maxZoom:r,minSize:n.evaluate(new v(a)),maxSize:n.evaluate(new v(r)),interpolationType:c}}function $r(e,t,n){var o=t.uSize,i=t.uSizeT,s=n.lowerSize,a=n.upperSize;return"source"===e.kind?s/ce:"composite"===e.kind?A(s/ce,a/ce,i):o}function Hr(e,t){if(s=0,n=0,"constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){var n,s,o=e.interpolationType,a=e.minZoom,r=e.maxZoom,i=o?gt(R.interpolationFactor(o,t,a,r),0,1):0;"camera"===e.kind?n=A(e.minSize,e.maxSize,i):s=i}return{uSizeT:s,uSize:n}}Rr=Object.freeze({__proto__:null,getSizeData:Vo,evaluateSizeForFeature:$r,evaluateSizeForZoom:Hr,SIZE_PACK_FACTOR:ce});function oc(e,t,n,s,o){if(void 0===t.segment)return!0;for(var r,c,l,h=t,i=t.segment+1,a=0;a>-n/2;){if(--i<0)return!1;a-=e[i].dist(h),h=e[i]}a+=e[i].dist(e[i+1]),i++;for(c=[],l=0;a<n/2;){var m=e[i-1],d=e[i],u=e[i+1];if(!u)return!1;r=m.angleTo(d)-d.angleTo(u);for(r=Math.abs((r+3*Math.PI)%(2*Math.PI)-Math.PI),c.push({distance:a,angleDelta:r}),l+=r;a-c[0].distance>s;)l-=c.shift().angleDelta;if(l>o)return!1;i++,a+=d.dist(u)}return!0}function Dr(e){for(var n=0,t=0;t<e.length-1;t++)n+=e[t].dist(e[t+1]);return n}function kr(e,t,n){return e?.6*t*n:0}function Er(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Nl(e,t,n,s,o,i){for(var m=kr(n,o,i),p=Er(n,s)*i,d=0,h=Dr(e)/2,a=0;a<e.length-1;a++){var c=e[a],r=e[a+1],l=c.dist(r);if(d+l>h){var f=(h-d)/l,g=A(c.x,r.x,f),v=A(c.y,r.y,f),u=new _t(g,v,r.angleTo(c),a);return u._round(),!m||oc(e,u,p,m,t)?u:void 0}d+=l}}function Ll(e,t,n,s,o,i,a,r,c){var h=kr(s,i,a),d=Er(s,o),l=d*a,u=0===e[0].x||e[0].x===c||0===e[0].y||e[0].y===c;return t-l<t/4&&(t=l+t/4),Or(e,u?t/2*r%t:(d/2+2*i)*a*r%t,t,h,n,l,u,!1,c)}function Or(e,t,n,s,o,i,a,r,c){for(var p,j=i/2,w=Dr(e),h=0,m=t-n,f=[],l=0;l<e.length-1;l++){for(var d=e[l],u=e[l+1],g=d.dist(u),_=u.angleTo(d);m+n<h+g;){var y=((m+=n)-h)/g,v=A(d.x,u.x,y),b=A(d.y,u.y,y);v>=0&&v<c&&b>=0&&b<c&&m-j>=0&&m+j<=w&&(p=new _t(v,b,_,l),p._round(),s&&!oc(e,p,i,s,o)||f.push(p))}h+=g}return r||f.length||a||(f=Or(e,h/2,n,s,o,i,a,!0,c)),f}function wr(e,t,n,s,o){for(h=[],c=0;c<e.length;c++)for(var i,a,c,h,u=e[c],r=void 0,d=0;d<u.length-1;d++)i=u[d],a=u[d+1],i.x<t&&a.x<t||(i.x<t?i=new l(t,i.y+(a.y-i.y)*((t-i.x)/(a.x-i.x)))._round():a.x<t&&(a=new l(t,i.y+(a.y-i.y)*((t-i.x)/(a.x-i.x)))._round()),i.y<n&&a.y<n||(i.y<n?i=new l(i.x+(a.x-i.x)*((n-i.y)/(a.y-i.y)),n)._round():a.y<n&&(a=new l(i.x+(a.x-i.x)*((n-i.y)/(a.y-i.y)),n)._round()),i.x>=s&&a.x>=s||(i.x>=s?i=new l(s,i.y+(a.y-i.y)*((s-i.x)/(a.x-i.x)))._round():a.x>=s&&(a=new l(s,i.y+(a.y-i.y)*((s-i.x)/(a.x-i.x)))._round()),i.y>=o&&a.y>=o||(i.y>=o?i=new l(i.x+(a.x-i.x)*((o-i.y)/(a.y-i.y)),o)._round():a.y>=o&&(a=new l(i.x+(a.x-i.x)*((o-i.y)/(a.y-i.y)),o)._round()),r&&i.equals(r[r.length-1])||(r=[i],h.push(r)),r.push(a)))));return h}yt=U;function br(e,t,n,s){var o,k,z,D,A=[],i=e.image,a=i.pixelRatio,w=i.paddedRect.w-2*yt,x=i.paddedRect.h-2*yt,y=e.right-e.left,E=e.bottom-e.top,h=i.stretchX||[[0,w]],m=i.stretchY||[[0,x]],T=function(e,t){return e+t[1]-t[0]},r=h.reduce(T,0),c=m.reduce(T,0),F=w-r,M=x-c,j=0,d=r,b=0,g=c,O=0,p=F,C=0,u=M;if(i.content&&s&&(o=i.content,j=Gs(h,0,o[0]),b=Gs(m,0,o[1]),d=Gs(h,o[0],o[2]),g=Gs(m,o[1],o[3]),O=o[0]-j,C=o[1]-b,p=o[2]-o[0]-d,u=o[3]-o[1]-g),k=function(s,o,h,m){var N=Xs(s.stretch-j,d,y,e.left),V=Zs(s.fixed-O,p,s.stretch,r),k=Xs(o.stretch-b,g,E,e.top),I=Zs(o.fixed-C,u,o.stretch,c),x=Xs(h.stretch-j,d,y,e.left),H=Zs(h.fixed-O,p,h.stretch,r),_=Xs(m.stretch-b,g,E,e.top),P=Zs(m.fixed-C,u,m.stretch,c),M=new l(N,k),F=new l(x,k),T=new l(x,_),z=new l(N,_),R=new l(V/a,I/a),L=new l(H/a,P/a),v=t*Math.PI/180;if(v){var D=Math.sin(v),S=Math.cos(v),f=[S,-D,D,S];M._matMult(f),F._matMult(f),z._matMult(f),T._matMult(f)}var w=s.stretch+s.fixed,B=h.stretch+h.fixed,A=o.stretch+o.fixed,$=m.stretch+m.fixed;return{tl:M,tr:F,bl:z,br:T,tex:{x:i.paddedRect.x+yt+w,y:i.paddedRect.y+yt+A,w:B-w,h:$-A},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:L,minFontScaleX:p/a/y,minFontScaleY:u/a/E,isSDF:n}},s&&(i.stretchX||i.stretchY))for(var S=vr(h,F,r),_=vr(m,M,c),v=0;v<S.length-1;v++)for(var N=S[v],L=S[v+1],f=0;f<_.length-1;f++)z=_[f],D=_[f+1],A.push(k(N,z,L,D));else A.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:x+1}));return A}function Gs(e,t,n){for(var o,i=0,s=0,a=e;s<a.length;s+=1)o=a[s],i+=Math.max(t,Math.min(n,o[1]))-Math.max(t,Math.min(n,o[0]));return i}function vr(e,t,n){for(var s=[{fixed:-yt,stretch:0}],i=0,r=e;i<r.length;i+=1){var c=r[i],a=c[0],l=c[1],o=s[s.length-1];s.push({fixed:a-o.stretch,stretch:o.stretch}),s.push({fixed:a-o.stretch,stretch:o.stretch+(l-a)})}return s.push({fixed:t+yt,stretch:n}),s}function Xs(e,t,n,s){return e/t*n+s}function Zs(e,t,n,s){return e-t*n/s}xn=function(e,t,n,s,o,i,a,r,c,d){if(this.boxStartIndex=e.length,c){var x=i.top,O=i.bottom,w=i.collisionPadding;w&&(x-=w[1],O+=w[3]),f=O-x,f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var f,p=i.top*a-r,g=i.bottom*a+r,v=i.left*a-r,b=i.right*a+r,j=i.collisionPadding;if(j&&(v-=j[0]*a,p-=j[1]*a,b+=j[2]*a,g+=j[3]*a),d){var y=new l(v,p),u=new l(b,p),m=new l(v,g),h=new l(b,g),_=d*Math.PI/180;y._rotate(_),u._rotate(_),m._rotate(_),h._rotate(_),v=Math.min(y.x,u.x,m.x,h.x),b=Math.max(y.x,u.x,m.x,h.x),p=Math.min(y.y,u.y,m.y,h.y),g=Math.max(y.y,u.y,m.y,h.y)}e.emplaceBack(t.x,t.y,v,p,b,g,n,s,o)}this.boxEndIndex=e.length},lt=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=ql),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function ql(e,t){return e<t?-1:e>t?1:0}function Yl(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var o,i,r,p,g,v,u=1/0,d=1/0,h=-1/0,f=-1/0,b=e[0],c=0;c<b.length;c++)i=b[c],(!c||i.x<u)&&(u=i.x),(!c||i.y<d)&&(d=i.y),(!c||i.x>h)&&(h=i.x),(!c||i.y>f)&&(f=i.y);var j=h-u,y=f-d,m=Math.min(j,y),s=m/2,a=new lt([],Gl);if(0===m)return new l(u,d);for(p=u;p<h;p+=m)for(g=d;g<f;g+=m)a.push(new Ut(p+s,g+s,s,e));for(r=function(e){for(var s=0,l=0,d=0,o=e[0],i=0,r=o.length,c=r-1;i<r;c=i++){var t=o[i],n=o[c],a=t.x*n.y-n.x*t.y;l+=(t.x+n.x)*a,d+=(t.y+n.y)*a,s+=3*a}return new Ut(l/s,d/s,0,e)}(e),v=a.length;a.length;)o=a.pop(),(o.d>r.d||!r.d)&&(r=o,n&&console.log("found best %d after %d probes",Math.round(1e4*o.d)/1e4,v)),o.max-r.d<=t||(s=o.h/2,a.push(new Ut(o.p.x-s,o.p.y-s,s,e)),a.push(new Ut(o.p.x+s,o.p.y-s,s,e)),a.push(new Ut(o.p.x-s,o.p.y+s,s,e)),a.push(new Ut(o.p.x+s,o.p.y+s,s,e)),v+=4);return n&&(console.log("num probes: "+v),console.log("best distance: "+r.d)),r.p}function Gl(e,t){return t.max-e.max}function Ut(e,t,n,s){this.p=new l(e,t),this.h=n,this.d=function(e,t){for(var o=!1,r=1/0,c=0;c<t.length;c++)for(var n,s,i=t[c],a=0,l=i.length,d=l-1;a<l;d=a++)n=i[a],s=i[d],n.y>e.y!=s.y>e.y&&e.x<(s.x-n.x)*(e.y-n.y)/(s.y-n.y)+n.x&&(o=!o),r=Math.min(r,Sa(e,n,s));return(o?1:-1)*Math.sqrt(r)}(this.p,s),this.max=this.d+this.h*Math.SQRT2}lt.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},lt.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},lt.prototype.peek=function(){return this.data[0]},lt.prototype._up=function(e){for(var n,s,t=this.data,i=this.compare,o=t[e];e>0;){if(n=e-1>>1,s=t[n],i(o,s)>=0)break;t[e]=s,e=n}t[e]=o},lt.prototype._down=function(e){for(var t=this.data,i=this.compare,r=this.length>>1,a=t[e];e<r;){var n=1+(e<<1),s=t[n],o=n+1;if(o<this.length&&i(t[o],s)<0&&(n=o,s=t[o]),i(s,a)>=0)break;t[e]=s,e=n}t[e]=a},at=7,eo=Number.POSITIVE_INFINITY;function cr(e,t){return t[1]!==eo?function(e,t,n){var s=0,o=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":o=n-at;break;case"bottom-right":case"bottom-left":case"bottom":o=-n+at}switch(e){case"top-right":case"bottom-right":case"right":s=-t;break;case"top-left":case"bottom-left":case"left":s=t}return[s,o]}(e,t[0],t[1]):function(e,t){var o,n=0,s=0;switch(t<0&&(t=0),o=t/Math.sqrt(2),e){case"top-right":case"top-left":s=o-at;break;case"bottom-right":case"bottom-left":s=-o+at;break;case"bottom":s=-t+at;break;case"top":s=t-at}switch(e){case"top-right":case"bottom-right":n=-o;break;case"top-left":case"bottom-left":n=o;break;case"left":n=t;break;case"right":n=-t}return[n,s]}(e,t[0])}function ti(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}ln=255,Be=ln*ce;function sr(e,t,n,s,o,i,a,r,c,d,u,h,m,f,p){var v,b,j=function(e,t,n,s,o,i,a,r){for(var S=s.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,W=[],A=0,$=t.positionedLines;A<$.length;A+=1)for(var V=$[A],O=0,I=V.positionedGlyphs;O<I.length;O+=1)if(c=I[O],c.rect){var y=c.rect||{},j=Ao+1,H=!0,v=1,P=0,R=(o||r)&&c.vertical,d=c.metrics.advance*c.scale/2;r&&t.verticalizable&&(L=(c.scale-1)*M,N=(M-c.metrics.width*c.scale)/2,P=V.lineOffset/2-(c.imageName?-N:L)),c.imageName&&(E=a[c.imageName],H=E.sdf,v=E.pixelRatio,j=U/v);var X=o?[c.x+d,c.y]:[0,0],h=o?[0,0]:[c.x+d+n[0],c.y+n[1]-P],F=[0,0];R&&(F=h,h=[0,0]);var c,E,T,N,L,Y,b=(c.metrics.left-j)*c.scale-d+h[0],k=(-c.metrics.top-j)*c.scale+h[1],z=b+y.w*c.scale/v,D=k+y.h*c.scale/v,C=new l(b,k),x=new l(z,k),w=new l(b,D),_=new l(z,D);if(R){var u=new l(-d,d-sn),p=-Math.PI/2,B=M/2-d,G=c.imageName?B:0,m=new l(5-sn-B,-G),g=new(Function.prototype.bind.apply(l,[null].concat(F)));C._rotateAround(p,u)._add(m)._add(g),x._rotateAround(p,u)._add(m)._add(g),w._rotateAround(p,u)._add(m)._add(g),_._rotateAround(p,u)._add(m)._add(g)}if(S){var K=Math.sin(S),q=Math.cos(S),f=[q,-K,K,q];C._matMult(f),x._matMult(f),w._matMult(f),_._matMult(f)}T=new l(0,0),Y=new l(0,0),W.push({tl:C,tr:x,bl:w,br:_,tex:y,writingMode:t.writingMode,glyphOffset:X,sectionIndex:c.sectionIndex,isSDF:H,pixelOffsetTL:T,pixelOffsetBR:Y,minFontScaleX:0,minFontScaleY:0})}return W}(0,n,r,o,i,a,s,e.allowVerticalPlacement),y=e.textSizeData,g=null;"source"===y.kind?(g=[ce*o.layout.get("text-size").evaluate(a,{})])[0]>Be&&W(e.layerIds[0]+': Value for "text-size" is >= '+ln+'. Reduce your "text-size".'):"composite"===y.kind&&((g=[ce*f.compositeTextSizes[0].evaluate(a,{},p),ce*f.compositeTextSizes[1].evaluate(a,{},p)])[0]>Be||g[1]>Be)&&W(e.layerIds[0]+': Value for "text-size" is >= '+ln+'. Reduce your "text-size".'),e.addSymbols(e.text,j,g,r,i,a,d,t,c.lineStartIndex,c.lineLength,m,p);for(v=0,b=u;v<b.length;v+=1)h[b[v]]=e.text.placedSymbolArray.length-1;return 4*j.length}function nr(e){for(var t in e)return e[t];return null}function id(e,t,n,s){if(o=e.compareText,t in o){for(var o,a=o[t],i=a.length-1;i>=0;i--)if(s.dist(a[i])<n)return!0}else o[t]=[];return o[t].push(s),!1}Ra=Ht.VectorTileFeature.types,La=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function no(e,t,n,s,o,i,a,r,c,l,d,u,h){var m=r?Math.min(Be,Math.round(r[0])):0,f=r?Math.min(Be,Math.round(r[1])):0;e.emplaceBack(t,n,Math.round(32*s),Math.round(32*o),i,a,(m<<1)+(c?1:0),f,16*l,16*d,256*u,256*h)}function hi(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function dd(e){for(var t=0,n=e.sections;t<n.length;t+=1)if(eu(n[t].text))return!0;return!1}dt=function(e){this.layoutVertexArray=new ls,this.indexArray=new Te,this.programConfigurations=e,this.segments=new E,this.dynamicLayoutVertexArray=new cs,this.opacityVertexArray=new rs,this.placedSymbolArray=new Si},dt.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},dt.prototype.upload=function(e,t,n,s){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ol.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,sl.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,La,!0),this.opacityVertexBuffer.itemSize=1),(n||s)&&this.programConfigurations.upload(e))},dt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},i("SymbolBuffers",dt),Vt=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new E,this.collisionVertexArray=new Jn},Vt.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Jc.members,!0)},Vt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},i("CollisionBuffers",Vt),m=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=li([]),this.placementViewportMatrix=li([]),n=this.layers[0]._unevaluatedLayout._values,this.textSizeData=Vo(this.zoom,n["text-size"]),this.iconSizeData=Vo(this.zoom,n["icon-size"]);var n,o,t=this.layers[0].layout,i=t.get("symbol-sort-key"),s=t.get("symbol-z-order");this.canOverlap=t.get("text-allow-overlap")||t.get("icon-allow-overlap")||t.get("text-ignore-placement")||t.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==s&&void 0!==i.constantOr(1),o="viewport-y"===s||"auto"===s&&!this.sortFeaturesByKey,this.sortFeaturesByY=o&&this.canOverlap,"point"===t.get("symbol-placement")&&(this.writingModes=t.get("text-writing-mode").map(function(e){return Q[e]})),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id}),this.sourceID=e.sourceID},m.prototype.createArrays=function(){this.text=new dt(new te(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new dt(new te(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new Ti,this.lineVertexArray=new zi,this.symbolInstances=new Fi},m.prototype.calculateGlyphDependencies=function(e,t,n,s,o){for(var a,i=0;i<e.length;i++)t[e.charCodeAt(i)]=!0,(n||s)&&o&&(a=dn[e.charAt(i)],a&&(t[a.charCodeAt(0)]=!0))},m.prototype.populate=function(e,t,n){var i,r,c,l,d,f,j,y,E,M,T,z,a=this.layers[0],o=a.layout,b=o.get("text-font"),h=o.get("text-field"),g=o.get("icon-image"),S=("constant"!==h.value.kind||h.value.value instanceof F&&!h.value.value.isEmpty()||h.value.value.toString().length>0)&&("constant"!==b.value.kind||b.value.value.length>0),A="constant"!==g.value.kind||!!g.value.value||Object.keys(g.parameters).length>0,H=o.get("symbol-sort-key");if(this.features=[],S||A){for(var C=t.iconDependencies,x=t.glyphDependencies,w=t.availableImages,R=new v(this.zoom),p=0,_=e;p<_.length;p+=1){var u=_[p],m=u.feature,L=u.id,N=u.index,D=u.sourceLayerIndex,O=a._featureFilter.needGeometry,s=Ct(m,O);if(a._featureFilter.filter(R,s,n)&&(O||(s.geometry=xt(m)),i=void 0,S&&(E=a.getValueAndResolveTokens("text-field",s,n,w),f=F.factory(E),dd(f)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===zo()||this.hasRTLText&&se.isParsed())&&(i=Xc(f,a,s))),r=void 0,A&&(d=a.getValueAndResolveTokens("icon-image",s,n,w),r=d instanceof K?d:K.fromString(d)),(i||r)&&(M=this.sortFeaturesByKey?H.evaluate(s,{},n):void 0,T={id:L,text:i,icon:r,index:N,sourceLayerIndex:D,geometry:s.geometry,properties:m.properties,type:Ra[m.type],sortKey:M},this.features.push(T),r&&(C[r.name]=!0),i))){z=b.evaluate(s,{},n).join(","),y="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement"),this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Q.vertical)>=0;for(l=0,j=i.sections;l<j.length;l+=1)if(c=j[l],c.image)C[c.image.name]=!0;else{var P=go(i.toString()),k=c.fontStack||z,I=x[k]=x[k]||{};this.calculateGlyphDependencies(c.text,I,y,this.allowVerticalPlacement,P)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){var n,s,a,d,m,i={},o={},t=[],h=0;function p(n){t.push(e[n]),h++}function g(e,n,s){var i=o[e];return delete o[e],o[n]=i,t[i].geometry[0].pop(),t[i].geometry[0]=t[i].geometry[0].concat(s[0]),i}function f(e,n,s){var o=i[n];return delete i[n],i[e]=o,t[o].geometry[0].shift(),t[o].geometry[0]=s[0].concat(t[o].geometry[0]),o}function l(e,t,n){var s=n?t[0][t[0].length-1]:t[0][0];return e+":"+s.x+":"+s.y}for(a=0;a<e.length;a++){var u=e[a],r=u.geometry,c=u.text?u.text.toString():null;c?(s=l(c,r),n=l(c,r,!0),s in o&&n in i&&o[s]!==i[n]?(d=f(s,n,r),m=g(s,n,t[d].geometry),delete i[s],delete o[n],o[l(c,t[m].geometry,!0)]=m,t[d].geometry=null):s in o?g(s,n,r):n in i?f(s,n,r):(p(a),i[s]=h-1,o[n]=h-1)):p(a)}return t.filter(function(e){return e.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(e,t){return e.sortKey-t.sortKey})}},m.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},m.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},m.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},m.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},m.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},m.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},m.prototype.addToLineVertexArray=function(e,t){if(r=this.lineVertexArray.length,void 0!==e.segment){for(var n,o,i,r,l=e.dist(t[e.segment+1]),c=e.dist(t[e.segment]),a={},s=e.segment+1;s<t.length;s++)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:l},s<t.length-1&&(l+=t[s+1].dist(t[s]));for(n=e.segment||0;n>=0;n--)a[n]={x:t[n].x,y:t[n].y,tileUnitDistanceFromAnchor:c},n>0&&(c+=t[n-1].dist(t[n]));for(o=0;o<t.length;o++)i=a[o],this.lineVertexArray.emplaceBack(i.x,i.y,i.tileUnitDistanceFromAnchor)}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},m.prototype.addSymbols=function(e,t,n,s,o,i,a,r,c,l,d,u){for(var x=e.indexArray,f=e.layoutVertexArray,y=e.segments.prepareSegment(4*t.length,f,x,this.canOverlap?i.sortKey:void 0),F=this.glyphOffsetArray.length,D=y.vertexLength,z=this.allowVerticalPlacement&&a===Q.vertical?Math.PI/2:0,A=i.text&&i.text.sections,g=0;g<t.length;g++){var m=t[g],k=m.tl,E=m.tr,T=m.bl,C=m.br,h=m.tex,w=m.pixelOffsetTL,_=m.pixelOffsetBR,j=m.minFontScaleX,b=m.minFontScaleY,S=m.glyphOffset,v=m.isSDF,M=m.sectionIndex,p=y.vertexLength,O=S[1];no(f,r.x,r.y,k.x,O+k.y,h.x,h.y,n,v,w.x,w.y,j,b),no(f,r.x,r.y,E.x,O+E.y,h.x+h.w,h.y,n,v,_.x,w.y,j,b),no(f,r.x,r.y,T.x,O+T.y,h.x,h.y+h.h,n,v,w.x,_.y,j,b),no(f,r.x,r.y,C.x,O+C.y,h.x+h.w,h.y+h.h,n,v,_.x,_.y,j,b),hi(e.dynamicLayoutVertexArray,r,z),x.emplaceBack(p,p+1,p+2),x.emplaceBack(p+1,p+2,p+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),g!==t.length-1&&M===t[g+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,i,i.index,{},u,A&&A[M])}e.placedSymbolArray.emplaceBack(r.x,r.y,F,this.glyphOffsetArray.length-F,D,c,l,r.segment,n?n[0]:0,n?n[1]:0,s[0],s[1],a,0,!1,0,d)},m.prototype._addCollisionDebugVertex=function(e,t,n,s,o,i){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,s,o,Math.round(i.x),Math.round(i.y))},m.prototype.addCollisionDebugVertices=function(e,t,n,s,o,i,a){var c,f=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),r=f.vertexLength,d=o.layoutVertexArray,u=o.collisionVertexArray,h=a.anchorX,m=a.anchorY;this._addCollisionDebugVertex(d,u,i,h,m,new l(e,t)),this._addCollisionDebugVertex(d,u,i,h,m,new l(n,t)),this._addCollisionDebugVertex(d,u,i,h,m,new l(n,s)),this._addCollisionDebugVertex(d,u,i,h,m,new l(e,s)),f.vertexLength+=4,c=o.indexArray,c.emplaceBack(r,r+1),c.emplaceBack(r+1,r+2),c.emplaceBack(r+2,r+3),c.emplaceBack(r+3,r),f.primitiveLength+=4},m.prototype.addDebugCollisionBoxes=function(e,t,n,s){for(i=e;i<t;i++){var i,o=this.collisionBoxArray.get(i),a=o.x1,r=o.y1,c=o.x2,l=o.y2;this.addCollisionDebugVertices(a,r,c,l,s?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},m.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Vt(wn,Ec.members,Ft),this.iconCollisionBox=new Vt(wn,Ec.members,Ft);for(var e,t=0;t<this.symbolInstances.length;t++)e=this.symbolInstances.get(t),this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)},m.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,s,o,i,a,r,c){for(var d,u,h,m,f,p,g,l={},v=t;v<n;v++){d=e.get(v),l.textBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.textFeatureIndex=d.featureIndex;break}for(p=s;p<o;p++){u=e.get(p),l.verticalTextBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},l.verticalTextFeatureIndex=u.featureIndex;break}for(g=i;g<a;g++){h=e.get(g),l.iconBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.iconFeatureIndex=h.featureIndex;break}for(f=r;f<c;f++){m=e.get(f),l.verticalIconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.verticalIconFeatureIndex=m.featureIndex;break}return l},m.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t,n=0;n<this.symbolInstances.length;n++)t=this.symbolInstances.get(n),this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,t.textBoxStartIndex,t.textBoxEndIndex,t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t.iconBoxStartIndex,t.iconBoxEndIndex,t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex))},m.prototype.hasTextData=function(){return this.text.segments.get().length>0},m.prototype.hasIconData=function(){return this.icon.segments.get().length>0},m.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},m.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},m.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},m.prototype.addIndicesForPlacedSymbol=function(e,t){for(var s=e.placedSymbolArray.get(t),o=s.vertexStartIndex+4*s.numGlyphs,n=s.vertexStartIndex;n<o;n+=4)e.indexArray.emplaceBack(n,n+1,n+2),e.indexArray.emplaceBack(n+1,n+2,n+3)},m.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t,r=Math.sin(e),a=Math.cos(e),s=[],o=[],i=[],n=0;n<this.symbolInstances.length;++n)i.push(n),t=this.symbolInstances.get(n),s.push(0|Math.round(r*t.anchorX+a*t.anchorY)),o.push(t.featureIndex);return i.sort(function(e,t){return s[e]-s[t]||o[t]-o[e]}),i},m.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},m.prototype.sortFeatures=function(e){if(n=this,this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var t,n,i,s=0,o=this.symbolInstanceIndexes;s<o.length;s+=1)i=o[s],t=this.symbolInstances.get(i),this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(function(e,t,s){e>=0&&s.indexOf(e)===t&&n.addIndicesForPlacedSymbol(n.text,e)}),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex);this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},i("SymbolBucket",m,{omit:["layers","collisionBoxArray","features","compareText"]}),m.MAX_GLYPHS=65535,m.addDynamicAttributes=hi;var fd=new X({"symbol-placement":new r(t.layout_symbol["symbol-placement"]),"symbol-spacing":new r(t.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new r(t.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new c(t.layout_symbol["symbol-sort-key"]),"symbol-z-order":new r(t.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new r(t.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new r(t.layout_symbol["icon-ignore-placement"]),"icon-optional":new r(t.layout_symbol["icon-optional"]),"icon-rotation-alignment":new r(t.layout_symbol["icon-rotation-alignment"]),"icon-size":new c(t.layout_symbol["icon-size"]),"icon-text-fit":new r(t.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new r(t.layout_symbol["icon-text-fit-padding"]),"icon-image":new c(t.layout_symbol["icon-image"]),"icon-rotate":new c(t.layout_symbol["icon-rotate"]),"icon-padding":new r(t.layout_symbol["icon-padding"]),"icon-keep-upright":new r(t.layout_symbol["icon-keep-upright"]),"icon-offset":new c(t.layout_symbol["icon-offset"]),"icon-anchor":new c(t.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new r(t.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new r(t.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new r(t.layout_symbol["text-rotation-alignment"]),"text-field":new c(t.layout_symbol["text-field"]),"text-font":new c(t.layout_symbol["text-font"]),"text-size":new c(t.layout_symbol["text-size"]),"text-max-width":new c(t.layout_symbol["text-max-width"]),"text-line-height":new r(t.layout_symbol["text-line-height"]),"text-letter-spacing":new c(t.layout_symbol["text-letter-spacing"]),"text-justify":new c(t.layout_symbol["text-justify"]),"text-radial-offset":new c(t.layout_symbol["text-radial-offset"]),"text-variable-anchor":new r(t.layout_symbol["text-variable-anchor"]),"text-anchor":new c(t.layout_symbol["text-anchor"]),"text-max-angle":new r(t.layout_symbol["text-max-angle"]),"text-writing-mode":new r(t.layout_symbol["text-writing-mode"]),"text-rotate":new c(t.layout_symbol["text-rotate"]),"text-padding":new r(t.layout_symbol["text-padding"]),"text-keep-upright":new r(t.layout_symbol["text-keep-upright"]),"text-transform":new c(t.layout_symbol["text-transform"]),"text-offset":new c(t.layout_symbol["text-offset"]),"text-allow-overlap":new r(t.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new r(t.layout_symbol["text-ignore-placement"]),"text-optional":new r(t.layout_symbol["text-optional"])}),yi={paint:new X({"icon-opacity":new c(t.paint_symbol["icon-opacity"]),"icon-color":new c(t.paint_symbol["icon-color"]),"icon-halo-color":new c(t.paint_symbol["icon-halo-color"]),"icon-halo-width":new c(t.paint_symbol["icon-halo-width"]),"icon-halo-blur":new c(t.paint_symbol["icon-halo-blur"]),"icon-translate":new r(t.paint_symbol["icon-translate"]),"icon-translate-anchor":new r(t.paint_symbol["icon-translate-anchor"]),"text-opacity":new c(t.paint_symbol["text-opacity"]),"text-color":new c(t.paint_symbol["text-color"],{runtimeType:Oe,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new c(t.paint_symbol["text-halo-color"]),"text-halo-width":new c(t.paint_symbol["text-halo-width"]),"text-halo-blur":new c(t.paint_symbol["text-halo-blur"]),"text-translate":new r(t.paint_symbol["text-translate"]),"text-translate-anchor":new r(t.paint_symbol["text-translate-anchor"])}),layout:fd},Bt=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:mn,this.defaultValue=e};Bt.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Bt.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Bt.prototype.outputDefined=function(){return!1},Bt.prototype.serialize=function(){return null},i("FormatSectionOverride",Bt,{omit:["defaultValue"]});var vd=function(e){function t(t){e.call(this,t,yi)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t,n){if(e.prototype.recalculate.call(this,t,n),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(s=this.layout.get("text-writing-mode"),s){for(var s,a,o=[],i=0,r=s;i<r.length;i+=1)a=r[i],o.indexOf(a)<0&&o.push(a);this.layout._values["text-writing-mode"]=o}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(e,t,n,s){var o=this.layout.get(e).evaluate(t,{},n,s),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||us(i.value)||!o?o:function(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?String(e[n]):""})}(t.properties,o)},t.prototype.createBucket=function(e){return new m(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(n=0,o=yi.paint.overridableProperties;n<o.length;n+=1)if(s=o[n],t.hasPaintOverride(this.layout,s)){var n,s,o,e=this.paint.get(s),r=new Bt(e),a=new Xt(r,e.property.specification),i="constant"===e.value.kind||"source"===e.value.kind?new an("source",a):new wt("composite",a,e.value.zoomStops,e.value._interpolationType);this.paint._values[s]=new q(e.property,i,e.parameters)}},t.prototype._handleOverridablePaintPropertyUpdate=function(e,n,s){return!(!this.layout||n.isDataDriven()||s.isDataDriven())&&t.hasPaintOverride(this.layout,e)},t.hasPaintOverride=function(e,t){var i,a,n=e.get("text-field"),r=yi.paint.properties[t],s=!1,o=function(e){for(var o,t=0,n=e;t<n.length;t+=1)if(o=n[t],r.overrides&&r.overrides.hasOverride(o))return void(s=!0)};return"constant"===n.value.kind&&n.value.value instanceof F?o(n.value.value.sections):"source"===n.value.kind&&(i=function(e){if(!s)if(e instanceof le&&S(e.value)===kn){var t=e.value;o(t.sections)}else e instanceof _e?o(e.sections):e.eachChild(i)},a=n.value,a._styleExpression&&i(a._styleExpression.expression)),s},t}(pe),bd={paint:new X({"background-color":new r(t.paint_background["background-color"]),"background-pattern":new pt(t.paint_background["background-pattern"]),"background-opacity":new r(t.paint_background["background-opacity"])})},jd=function(e){function t(t){e.call(this,t,bd)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pe),yd={paint:new X({"raster-opacity":new r(t.paint_raster["raster-opacity"]),"raster-hue-rotate":new r(t.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new r(t.paint_raster["raster-brightness-min"]),"raster-brightness-max":new r(t.paint_raster["raster-brightness-max"]),"raster-saturation":new r(t.paint_raster["raster-saturation"]),"raster-contrast":new r(t.paint_raster["raster-contrast"]),"raster-resampling":new r(t.paint_raster["raster-resampling"]),"raster-fade-duration":new r(t.paint_raster["raster-fade-duration"])})},_d=function(e){function t(t){e.call(this,t,yd)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pe),wd=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},t}(pe),Od={circle:Ka,heatmap:od,hillshade:nd,fill:El,"fill-extrusion":Pc,line:_c,symbol:vd,background:jd,raster:_d},ma=a.HTMLImageElement,ha=a.HTMLCanvasElement,ua=a.HTMLVideoElement,oa=a.ImageData,oo=a.ImageBitmap,jt=function(e,t,n,s){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,s)};jt.prototype.update=function(e,t,n){var o=e.width,i=e.height,d=!(this.size&&this.size[0]===o&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),d)this.size=[o,i],e instanceof ma||e instanceof ha||e instanceof ua||e instanceof oa||oo&&e instanceof oo?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,o,i,0,this.format,s.UNSIGNED_BYTE,e.data);else{var r=n||{x:0,y:0},c=r.x,l=r.y;e instanceof ma||e instanceof ha||e instanceof ua||e instanceof oa||oo&&e instanceof oo?s.texSubImage2D(s.TEXTURE_2D,0,c,l,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,c,l,o,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},jt.prototype.bind=function(e,t,n){var s=this.context.gl;s.bindTexture(s.TEXTURE_2D,this.texture),n!==s.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=s.LINEAR),e!==this.filter&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,e),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,t),this.wrap=t)},jt.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},jt.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},ro=function(e){var t=this;this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})},ro.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},ro.prototype.remove=function(){delete this._channel,this._callback=function(){}},ct=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Aa(["receive","process"],this),this.invoker=new ro(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ao()?e:a};function Qi(e,t,n){var s=2*Math.PI*6378137/256/Math.pow(2,n);return[e*s-2*Math.PI*6378137/2,t*s-2*Math.PI*6378137/2]}ct.prototype.send=function(e,t,n,s,o){var i,r,a=this;return void 0===o&&(o=!1),i=Math.round(1e18*Math.random()).toString(36).substring(0,10),n&&(this.callbacks[i]=n),r=sa(this.globalScope)?void 0:[],this.target.postMessage({id:i,type:e,hasCallback:!!n,targetMapId:s,mustQueue:o,sourceMapId:this.mapId,data:fn(t,r)},r),{cancel:function(){n&&delete a.callbacks[i],a.target.postMessage({id:i,type:"<cancel>",targetMapId:s,sourceMapId:a.mapId})}}},ct.prototype.receive=function(e){var s,t=e.data,n=t.id;n&&(!t.targetMapId||this.mapId===t.targetMapId)&&("<cancel>"===t.type?(delete this.tasks[n],s=this.cancelCallbacks[n],delete this.cancelCallbacks[n],s&&s()):ao()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t))},ct.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},ct.prototype.processTask=function(e,t){if(s=this,"<response>"===t.type)o=this.callbacks[e],delete this.callbacks[e],o&&(t.error?o(Un(t.error)):o(null,Un(t.data)));else{var s,o,c,i=!1,l=sa(this.globalScope)?void 0:[],a=t.hasCallback?function(t,n){i=!0,delete s.cancelCallbacks[e],s.target.postMessage({id:e,type:"<response>",sourceMapId:s.mapId,error:t?fn(t):null,data:fn(n,l)},l)}:function(){i=!0},n=null,r=Un(t.data);this.parent[t.type]?n=this.parent[t.type](t.sourceMapId,r,a):this.parent.getWorkerSource?(c=t.type.split("."),n=this.parent.getWorkerSource(t.sourceMapId,c[0],r.source)[c[1]](r,a)):a(new Error("Could not find function "+t.type)),!i&&n&&n.cancel&&(this.cancelCallbacks[e]=n.cancel)}},ct.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)},_=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))},_.prototype.setNorthEast=function(e){return this._ne=e instanceof g?new g(e.lng,e.lat):g.convert(e),this},_.prototype.setSouthWest=function(e){return this._sw=e instanceof g?new g(e.lng,e.lat):g.convert(e),this},_.prototype.extend=function(e){var t,n,i,a,s=this._sw,o=this._ne;if(e instanceof g)t=e,n=e;else{if(!(e instanceof _))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?(i=e,this.extend(_.convert(i))):(a=e,this.extend(g.convert(a))):this;if(t=e._sw,n=e._ne,!t||!n)return this}return s||o?(s.lng=Math.min(t.lng,s.lng),s.lat=Math.min(t.lat,s.lat),o.lng=Math.max(n.lng,o.lng),o.lat=Math.max(n.lat,o.lat)):(this._sw=new g(t.lng,t.lat),this._ne=new g(n.lng,n.lat)),this},_.prototype.getCenter=function(){return new g((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},_.prototype.getSouthWest=function(){return this._sw},_.prototype.getNorthEast=function(){return this._ne},_.prototype.getNorthWest=function(){return new g(this.getWest(),this.getNorth())},_.prototype.getSouthEast=function(){return new g(this.getEast(),this.getSouth())},_.prototype.getWest=function(){return this._sw.lng},_.prototype.getSouth=function(){return this._sw.lat},_.prototype.getEast=function(){return this._ne.lng},_.prototype.getNorth=function(){return this._ne.lat},_.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},_.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},_.prototype.isEmpty=function(){return!this._sw||!this._ne},_.prototype.contains=function(e){var n=g.convert(e),t=n.lng,s=n.lat,i=this._sw.lat<=s&&s<=this._ne.lat,o=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=t&&t>=this._ne.lng),i&&o},_.convert=function(e){return!e||e instanceof _?e:new _(e)},Wi=6371008.8,g=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")},g.prototype.wrap=function(){return new g(Gr(this.lng,-180,180),this.lat)},g.prototype.toArray=function(){return[this.lng,this.lat]},g.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},g.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,s=e.lat*t,o=Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos((e.lng-this.lng)*t);return Wi*Math.acos(Math.min(o,1))},g.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new _(new g(this.lng-n,this.lat-t),new g(this.lng+n,this.lat+t))},g.convert=function(e){if(e instanceof g)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new g(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new g(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},Bi=2*Math.PI*Wi;function ia(e){return Bi*Math.cos(e*Math.PI/180)}function ca(e){return(180+e)/360}function la(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function da(e,t){return e/ia(t)}function Oi(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}Je=function(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n},Je.fromLngLat=function(e,t){void 0===t&&(t=0);var n=g.convert(e);return new Je(ca(n.lng),la(n.lat),da(t,n.lat))},Je.prototype.toLngLat=function(){return new g(360*this.x-180,Oi(this.y))},Je.prototype.toAltitude=function(){return e=this.z,t=this.y,e*ia(Oi(t));var e,t},Je.prototype.meterInMercatorCoordinateUnits=function(){return 1/Bi*(e=Oi(this.y),1/Math.cos(e*Math.PI/180));var e},qe=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=An(0,e,e,t,n)},qe.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},qe.prototype.url=function(e,t){var n,s,o,i,a,r=(o=this.x,n=this.y,s=this.z,i=Qi(256*o,256*(n=Math.pow(2,s)-n-1),s),a=Qi(256*(o+1),256*(n+1),s),i[0]+","+i[1]+","+a[0]+","+a[1]),c=function(e,t,n){for(var o,i="",s=e;s>0;s--)i+=(t&(o=1<<s-1)?1:0)+(n&o?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",c).replace("{bbox-epsg-3857}",r)},qe.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new l((e.x*t-this.x)*x,(e.y*t-this.y)*x)},qe.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},mi=function(e,t){this.wrap=e,this.canonical=t,this.key=An(e,t.z,t.z,t.x,t.y)},w=function(e,t,n,s,o){this.overscaledZ=e,this.wrap=t,this.canonical=new qe(n,+s,+o),this.key=An(t,e,n,s,o)};function An(e,t,n,s,o){(e*=2)<0&&(e=-1*e-1);var i=1<<n;return(i*i*e+i*o+s).toString(36)+n.toString(36)+t.toString(36)}w.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},w.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new w(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new w(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},w.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?An(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):An(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},w.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},w.prototype.children=function(e){if(this.overscaledZ>=e)return[new w(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,s=2*this.canonical.y;return[new w(t,this.wrap,t,n,s),new w(t,this.wrap,t,n+1,s),new w(t,this.wrap,t,n,s+1),new w(t,this.wrap,t,n+1,s+1)]},w.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},w.prototype.wrapped=function(){return new w(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},w.prototype.unwrapTo=function(e){return new w(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},w.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},w.prototype.toUnwrapped=function(){return new mi(this.wrap,this.canonical)},w.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},w.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Je(e.x-this.wrap,e.y))},i("CanonicalTileID",qe),i("OverscaledTileID",w,{omit:["posMatrix"]}),be=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return W('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var o,s=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(o=0;o<s;o++)this.data[this._idx(-1,o)]=this.data[this._idx(0,o)],this.data[this._idx(s,o)]=this.data[this._idx(s-1,o)],this.data[this._idx(o,-1)]=this.data[this._idx(o,0)],this.data[this._idx(o,s)]=this.data[this._idx(o,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)]},be.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),s=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[s],n[s+1],n[s+2])},be.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},be.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},be.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},be.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},be.prototype.getPixels=function(){return new H({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},be.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var s,r=t*this.dim,c=t*this.dim+this.dim,i=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=c-1;break;case 1:c=r+1}switch(n){case-1:i=a-1;break;case 1:a=i+1}for(var l=-t*this.dim,d=-n*this.dim,o=i;o<a;o++)for(s=r;s<c;s++)this.data[this._idx(s,o)]=e.data[this._idx(s+l,o+d)]},i("DEMData",be),Rn=function(e){this._stringToNumber={},this._numberToString=[];for(var n,t=0;t<e.length;t++)n=e[t],this._stringToNumber[n]=t,this._numberToString[t]=n},Rn.prototype.encode=function(e){return this._stringToNumber[e]},Rn.prototype.decode=function(e){return this._numberToString[e]},Bn=function(e,t,n,s,o){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=s,this.properties=e.properties,this.id=o},co={geometry:{configurable:!0}},co.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},co.geometry.set=function(e){this._geometry=e},Bn.prototype.toJSON=function(){var e,t={geometry:this.geometry};for(e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Bn.prototype,co),ut=function(){this.state={},this.stateChanges={},this.deletedStates={}},ut.prototype.updateState=function(e,t,n){var o,i,a,s=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][s]=this.stateChanges[e][s]||{},G(this.stateChanges[e][s],n),null===this.deletedStates[e])for(o in this.deletedStates[e]={},this.state[e])o!==s&&(this.deletedStates[e][o]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][s])for(i in this.deletedStates[e][s]={},this.state[e][s])n[i]||(this.deletedStates[e][s][i]=null);else for(a in n)this.deletedStates[e]&&this.deletedStates[e][s]&&null===this.deletedStates[e][s][a]&&delete this.deletedStates[e][s][a]},ut.prototype.removeFeatureState=function(e,t,n){if(null!==this.deletedStates[e]){var s=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][s]&&(this.deletedStates[e][s]=this.deletedStates[e][s]||{},this.deletedStates[e][s][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][s])for(n in this.deletedStates[e][s]={},this.stateChanges[e][s])this.deletedStates[e][s][n]=null;else this.deletedStates[e][s]=null;else this.deletedStates[e]=null}},ut.prototype.getState=function(e,t){var n,r,s=String(t),i=this.state[e]||{},a=this.stateChanges[e]||{},o=G({},i[s],a[s]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){if(n=this.deletedStates[e][t],null===n)return{};for(r in n)delete o[r]}return o},ut.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},ut.prototype.coalesceChanges=function(e,t){o={};for(s in this.stateChanges){this.state[s]=this.state[s]||{},c={};for(i in this.stateChanges[s])this.state[s][i]||(this.state[s][i]={}),G(this.state[s][i],this.stateChanges[s][i]),c[i]=this.state[s][i];o[s]=c}for(n in this.deletedStates){if(this.state[n]=this.state[n]||{},r={},null===this.deletedStates[n])for(d in this.state[n])r[d]={},this.state[n][d]={};else for(a in this.deletedStates[n]){if(null===this.deletedStates[n][a])this.state[n][a]={};else for(var n,s,o,i,a,r,c,d,h,m,l=0,u=Object.keys(this.deletedStates[n][a]);l<u.length;l+=1)h=u[l],delete this.state[n][a][h];r[a]=this.state[n][a]}o[n]=o[n]||{},G(o[n],r)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(o).length)for(m in e)e[m].setFeatureState(o,t)},je=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new it(x,16,0),this.grid3D=new it(x,16,0),this.featureIndexArray=new Ni,this.promoteId=t};function Cc(e,t,n,s,o){return $i(e,function(e,i){var a=t instanceof on?t.get(i):null;return a&&a.evaluate?a.evaluate(n,s,o):a})}function Ac(e){for(var t,a=1/0,n=1/0,s=-1/0,o=-1/0,i=0,r=e;i<r.length;i+=1)t=r[i],a=Math.min(a,t.x),n=Math.min(n,t.y),s=Math.max(s,t.x),o=Math.max(o,t.y);return{minX:a,minY:n,maxX:s,maxY:o}}function tu(e,t){return t-e}je.prototype.insert=function(e,t,n,s,o,i){h=this.featureIndexArray.length,this.featureIndexArray.emplaceBack(n,s,o);for(d=i?this.grid3D:this.grid,c=0;c<t.length;c++){for(var r,c,d,h,u=t[c],a=[1/0,1/0,-1/0,-1/0],l=0;l<u.length;l++)r=u[l],a[0]=Math.min(a[0],r.x),a[1]=Math.min(a[1],r.y),a[2]=Math.max(a[2],r.x),a[3]=Math.max(a[3],r.y);a[0]<x&&a[1]<x&&a[2]>=0&&a[3]>=0&&d.insert(h,a[0],a[1],a[2],a[3])}},je.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ht.VectorTile(new Hs(this.rawTileData)).layers,this.sourceLayerCoder=new Rn(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},je.prototype.query=function(e,t,n,s){c=this,this.loadVTLayers();for(var c,v,d=e.params||{},p=x/e.tileSize/e.scale,j=Es(d.filter),m=e.queryGeometry,o=e.queryPadding*p,r=Ac(m),a=this.grid.query(r.minX-o,r.minY-o,r.maxX+o,r.maxY+o),i=Ac(e.cameraQueryGeometry),u=0,g=this.grid3D.query(i.minX-o,i.minY-o,i.maxX+o,i.maxY+o,function(t,n,s,i){return function(e,t,n,s,o){for(var i,a,r,c,d,u=0,h=e;u<h.length;u+=1)if(a=h[u],t<=a.x&&n<=a.y&&s>=a.x&&o>=a.y)return!0;if(c=[new l(t,n),new l(t,o),new l(s,o),new l(s,n)],e.length>2)for(r=0,d=c;r<d.length;r+=1)if(Wt(e,d[r]))return!0;for(i=0;i<e.length-1;i++)if(ld(e[i],e[i+1],c))return!0;return!1}(e.cameraQueryGeometry,t-o,n-o,s+o,i+o)});u<g.length;u+=1)v=g[u],a.push(v);a.sort(tu);for(var f,b={},y=function(o){if(i=a[o],i!==f){f=i;var i,r=c.featureIndexArray.get(i),l=null;c.loadMatchingFeature(b,r.bucketIndex,r.sourceLayerIndex,r.featureIndex,j,d.layers,d.availableImages,t,n,s,function(t,n,s){return l||(l=xt(t)),n.queryIntersectsFeature(m,t,s,l,c.z,e.transform,p,e.pixelPosMatrix)})}},h=0;h<a.length;h++)y(h);return b},je.prototype.loadMatchingFeature=function(e,t,n,s,o,i,a,r,c,l,d){if(j=this.bucketLayerIDs[t],!i||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(i,j)){var h,m,f,p,g,b,j,y,_,w,O,x=this.sourceLayerCoder.decode(n),u=this.vtLayers[x].feature(s);if(o.needGeometry){if(O=Ct(u,!0),!o.filter(new v(this.tileID.overscaledZ),O,this.tileID.canonical))return}else if(!o.filter(new v(this.tileID.overscaledZ),u))return;for(g=this.getId(u,x),b=0;b<j.length;b++)f=j[b],i&&i.indexOf(f)<0||(h=r[f],h&&(p={},void 0!==g&&l&&(p=l.getState(h.sourceLayer||"_geojsonTileLayer",g)),m=G({},c[f]),m.paint=Cc(m.paint,h.paint,u,p,a),m.layout=Cc(m.layout,h.layout,u,p,a),_=!d||d(u,h,p),_&&(w=new Bn(u,this.z,this.x,this.y,g),w.layer=m,y=e[f],void 0===y&&(y=e[f]=[]),y.push({featureIndex:s,feature:w,intersectionZ:_}))))}},je.prototype.lookupSymbolFeatures=function(e,t,n,s,o,i,a,r){c={},this.loadVTLayers();for(var c,u,h=Es(o),l=0,d=e;l<d.length;l+=1)u=d[l],this.loadMatchingFeature(c,n,s,u,h,i,a,r,t);return c},je.prototype.hasLayer=function(e){for(var t,s,n=0,o=this.bucketLayerIDs;n<o.length;n+=1)for(t=0,s=o[n];t<s.length;t+=1)if(e===s[t])return!0;return!1},je.prototype.getId=function(e,t){var s,n=e.id;return this.promoteId&&(s="string"==typeof this.promoteId?this.promoteId:this.promoteId[t],"boolean"==typeof(n=e.properties[s])&&(n=Number(n))),n},i("FeatureIndex",je,{omit:["rawTileData","sourceLayerCoder"]}),C=function(e,t){this.tileID=e,this.uid=ar(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"},C.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<$t.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},C.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},C.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){if(n={},!t)return n;for(var n,i=function(){var a,r,c,e=o[s],i=e.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map(function(e){return i.filter(function(t){return t.id===e})[0]}));for(a=0,r=i;a<r.length;a+=1)c=r[a],n[c.id]=e}},s=0,o=e;s<o.length;s+=1)i();return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var s,i,a,r,c,o=this.buckets[r];if(o instanceof m){if(this.hasSymbolBuckets=!0,!n)break;o.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(c in this.buckets)if(s=this.buckets[c],s instanceof m&&s.hasRTLText){this.hasRTLText=!0,se.isLoading()||se.isLoaded()||"deferred"!==zo()||mc();break}for(i in this.queryPadding=0,this.buckets)a=this.buckets[i],this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(i).queryRadius(a));e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new Zn},C.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},C.prototype.getBucket=function(e){return this.buckets[e.id]},C.prototype.upload=function(e){for(s in this.buckets){var t,s,n=this.buckets[s];n.uploadPending()&&n.upload(e)}t=e.gl,this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new jt(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new jt(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)},C.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},C.prototype.queryRenderedFeatures=function(e,t,n,s,o,i,a,r,c,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:s,cameraQueryGeometry:o,scale:i,tileSize:this.tileSize,pixelPosMatrix:l,transform:r,params:a,queryPadding:this.queryPadding*c},e,t,n):{}},C.prototype.querySourceFeatures=function(e,t){if(n=this.latestFeatureIndex,n&&n.rawTileData){var h=n.loadVTLayers(),u=t?t.sourceLayer:"",i=h._geojsonTileLayer||h[u];if(i)for(var n,s,c,m,f,a=Es(t&&t.filter),r=this.tileID.canonical,l=r.z,p=r.x,d=r.y,g={z:l,x:p,y:d},o=0;o<i.length;o++){if(s=i.feature(o),a.needGeometry){if(m=Ct(s,!0),!a.filter(new v(this.tileID.overscaledZ),m,this.tileID.canonical))continue}else if(!a.filter(new v(this.tileID.overscaledZ),s))continue;f=n.getId(s,u),c=new Bn(s,l,p,d,f),c.tile=g,e.push(c)}}},C.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},C.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},C.prototype.setExpiryData=function(e){if(n=this.expirationTime,e.cacheControl?(s=Pi(e.cacheControl),s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])):e.expires&&(this.expirationTime=new Date(e.expires).getTime()),this.expirationTime){var n,s,o,i=Date.now(),t=!1;this.expirationTime>i?t=!1:n?this.expirationTime<n?t=!0:(o=this.expirationTime-n,o?this.expirationTime=i+Math.max(o,3e4):t=!0):t=!0,t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},C.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},C.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){c=this.latestFeatureIndex.loadVTLayers();for(s in this.buckets)if(t.style.hasLayer(s)){var n,s,c,o=this.buckets[s],a=o.layers[0].sourceLayer||"_geojsonTileLayer",r=c[a],i=e[a];r&&i&&0!==Object.keys(i).length&&(o.update(i,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),n=t&&t.style&&t.style.getLayer(s),n&&(this.queryPadding=Math.max(this.queryPadding,n.queryRadius(o))))}}},C.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},C.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$t.now()},C.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},C.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=$t.now()+e},C.prototype.setDependencies=function(e,t){for(var s={},n=0,o=t;n<o.length;n+=1)s[o[n]]=!0;this.dependencies[e]=s},C.prototype.hasDependency=function(e,t){for(var n,o,i,r,s=0,a=e;s<a.length;s+=1)if(r=a[s],o=this.dependencies[r],o)for(n=0,i=t;n<i.length;n+=1)if(o[i[n]])return!0;return!1},$e=a.performance,vi=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},$e.mark(this._marks.start)},vi.prototype.finish=function(){$e.mark(this._marks.end);var e=$e.getEntriesByName(this._marks.measure);return 0===e.length&&($e.measure(this._marks.measure,this._marks.start,this._marks.end),e=$e.getEntriesByName(this._marks.measure),$e.clearMarks(this._marks.start),$e.clearMarks(this._marks.end),$e.clearMeasures(this._marks.measure)),e},e.Actor=ct,e.AlphaImage=st,e.CanonicalTileID=qe,e.CollisionBoxArray=Zn,e.Color=f,e.DEMData=be,e.DataConstantProperty=r,e.DictionaryCoder=Rn,e.EXTENT=x,e.ErrorEvent=yo,e.EvaluationParameters=v,e.Event=Ps,e.Evented=Le,e.FeatureIndex=je,e.FillBucket=re,e.FillExtrusionBucket=ie,e.ImageAtlas=kt,e.ImagePosition=Us,e.LineBucket=I,e.LngLat=g,e.LngLatBounds=_,e.MercatorCoordinate=Je,e.ONE_EM=M,e.OverscaledTileID=w,e.Point=l,e.Point$1=l,e.Properties=X,e.Protobuf=Hs,e.RGBAImage=H,e.RequestManager=oe,e.RequestPerformance=vi,e.ResourceType=So,e.SegmentVector=E,e.SourceFeatureState=ut,e.StructArrayLayout1ui2=Xn,e.StructArrayLayout2f1f2i16=ns,e.StructArrayLayout2i4=Nt,e.StructArrayLayout3ui6=Te,e.StructArrayLayout4i8=xs,e.SymbolBucket=m,e.Texture=jt,e.Tile=C,e.Transitionable=we,e.Uniform1f=os,e.Uniform1i=Td,e.Uniform2f=Fd,e.Uniform3f=Sd,e.Uniform4f=ta,e.UniformColor=na,e.UniformMatrix4f=kd,e.UnwrappedTileID=mi,e.ValidationError=o,e.WritingMode=Q,e.ZoomHistory=lo,e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},e.addDynamicAttributes=hi,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var i=e.length,s=new Array(e.length),o=null;e.forEach(function(e,a){t(e,function(e,t){e&&(o=e),s[a]=t,0==--i&&n(o,s)})})},e.bezier=sc,e.bindAll=Aa,e.browser=$t,e.cacheEntryPossiblyAdded=function(e){++Mo>uc&&(e.getActor().send("enforceCacheSizeLimit",ac),Mo=0)},e.clamp=gt,e.clearTileCache=function(e){var t=a.caches.delete(nc);e&&t.catch(e).then(function(){return e()})},e.clipLine=wr,e.clone=function(e){var t=new Z(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=ke,e.clone$2=function(e){var t=new Z(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=Zc,e.config=z,e.create=function(){var e=new Z(16);return Z!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=function(){var e=new Z(9);return Z!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},e.create$2=function(){var e=new Z(4);return Z!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=ho,e.createExpression=hs,e.createLayout=D,e.createStyleLayer=function(e){return"custom"===e.type?new wd(e):new Od[e.type](e)},e.cross=function(e,t,n){var s=t[0],o=t[1],i=t[2],a=n[0],r=n[1],c=n[2];return e[0]=o*c-i*r,e[1]=i*a-s*c,e[2]=s*r-o*a,e},e.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var o,s=0;s<t.length;s++)if(!e(t[s],n[s]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(o in t)if(!e(t[o],n[o]))return!1;return!0}return t===n},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=Qr,e.emitValidationErrors=cc,e.endsWith=wi,e.enforceCacheSizeLimit=function(e){qs(),Ne&&Ne.then(function(t){t.keys().then(function(n){for(var s=0;s<n.length-e;s++)t.delete(n[s])})})},e.evaluateSizeForFeature=$r,e.evaluateSizeForZoom=Hr,e.evaluateVariableOffset=cr,e.evented=To,e.extend=G,e.featureFilter=Es,e.filterObject=Ea,e.fromRotation=function(e,t){var n=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=n,e[2]=0,e[3]=-n,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=Io,e.getAnchorJustification=ti,e.getArrayBuffer=wo,e.getImage=Dc,e.getJSON=function(e,t){return Vs(G(e,{type:"json"}),t)},e.getRTLTextPluginStatus=zo,e.getReferrer=$s,e.getVideo=function(e,t){var s,o,i,r,n=a.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(s=0;s<e.length;s++)i=a.document.createElement("source"),r=e[s],o=void 0,(o=a.document.createElement("a")).href=r,o.protocol===a.document.location.protocol&&o.host===a.document.location.host||(n.crossOrigin="Anonymous"),i.src=e[s],n.appendChild(i);return{cancel:function(){}}},e.identity=li,e.invert=function(e,t){var b=t[0],l=t[1],o=t[2],i=t[3],a=t[4],r=t[5],c=t[6],s=t[7],d=t[8],u=t[9],h=t[10],m=t[11],f=t[12],p=t[13],v=t[14],g=t[15],M=b*r-l*a,x=b*c-o*a,y=b*s-i*a,_=l*c-o*r,w=l*s-i*r,O=o*s-i*c,j=d*p-u*f,C=d*v-h*f,E=d*g-m*f,k=u*v-h*p,A=u*g-m*p,S=h*g-m*v,n=M*S-x*A+y*k+_*E-w*C+O*j;return n?(n=1/n,e[0]=(r*S-c*A+s*k)*n,e[1]=(o*A-l*S-i*k)*n,e[2]=(p*O-v*w+g*_)*n,e[3]=(h*w-u*O-m*_)*n,e[4]=(c*E-a*S-s*C)*n,e[5]=(b*S-o*E+i*C)*n,e[6]=(v*y-f*O-g*x)*n,e[7]=(d*O-h*y+m*x)*n,e[8]=(a*A-r*E+s*j)*n,e[9]=(l*E-b*A-i*j)*n,e[10]=(f*w-p*y+g*M)*n,e[11]=(u*y-d*w-m*M)*n,e[12]=(r*C-a*k-c*j)*n,e[13]=(b*k-l*C+o*j)*n,e[14]=(p*x-f*_-v*M)*n,e[15]=(d*_-u*x+h*M)*n,e):null},e.isChar=s,e.isMapboxURL=ze,e.keysDifference=function(e,t){var s,n=[];for(s in e)s in t||n.push(s);return n},e.makeRequest=Vs,e.mapObject=$i,e.mercatorXfromLng=ca,e.mercatorYfromLat=la,e.mercatorZfromAltitude=da,e.mul=Ba,e.multiply=Ia,e.mvt=Ht,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var s=t[0],o=t[1],i=t[2],n=s*s+o*o+i*i;return n>0&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},e.number=A,e.offscreenCanvasSupported=vc,e.ortho=function(e,t,n,s,o,i,a){var r=1/(t-n),c=1/(s-o),l=1/(i-a);return e[0]=-2*r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*r,e[13]=(o+s)*c,e[14]=(a+i)*l,e[15]=1,e},e.parseGlyphPBF=function(e){return new Hs(e).readFields(el,[])},e.pbf=Hs,e.performSymbolLayout=function(e,t,n,o,i,a,r){e.createArrays(),b=512*e.overscaling,e.tilePixelRatio=x/b,e.compareText={},e.iconsNeedLinear=!1;var c=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,l={};if("composite"===e.textSizeData.kind){var p=e.textSizeData,E=p.minZoom,_=p.maxZoom;l.compositeTextSizes=[d["text-size"].possiblyEvaluate(new v(E),r),d["text-size"].possiblyEvaluate(new v(_),r)]}if("composite"===e.iconSizeData.kind){var g=e.iconSizeData,k=g.minZoom,y=g.maxZoom;l.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new v(k),r),d["icon-size"].possiblyEvaluate(new v(y),r)]}l.layoutTextSize=d["text-size"].possiblyEvaluate(new v(e.zoom+1),r),l.layoutIconSize=d["icon-size"].possiblyEvaluate(new v(e.zoom+1),r),l.textMaxSize=d["text-size"].possiblyEvaluate(new v(18));for(var b,u=c.get("text-line-height")*M,f="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),w=c.get("text-keep-upright"),O=c.get("text-size"),C=function(){var g,_,A,S,D,N,P,I,a=j[h],T=c.get("text-font").evaluate(a,{},r).join(","),F=O.evaluate(a,{},r),E=l.layoutTextSize.evaluate(a,{},r),K=l.layoutIconSize.evaluate(a,{},r),d={horizontal:{},vertical:void 0},v=a.text,b=[0,0];if(v){var L=v.toString(),U=c.get("text-letter-spacing").evaluate(a,{},r)*M,z=function(e){for(var t,n=0,o=e;n<o.length;n+=1)if(t=o[n].charCodeAt(0),s.Arabic(t)||s["Arabic Supplement"](t)||s["Arabic Extended-A"](t)||s["Arabic Presentation Forms-A"](t)||s["Arabic Presentation Forms-B"](t))return!1;return!0}(L)?U:0,y=c.get("text-anchor").evaluate(a,{},r),H=c.get("text-variable-anchor");H||(P=c.get("text-radial-offset").evaluate(a,{},r),b=P?cr(y,[P*M,eo]):c.get("text-offset").evaluate(a,{},r).map(function(e){return e*M}));var p=f?"center":c.get("text-justify").evaluate(a,{},r),C=c.get("symbol-placement"),k="point"===C?c.get("text-max-width").evaluate(a,{},r)*M:0,V=function(){e.allowVerticalPlacement&&go(L)&&(d.vertical=Ys(v,t,n,i,T,k,u,y,"left",z,b,Q.vertical,!0,C,E,F))};if(!f&&H){for(var B="auto"===p?H.map(function(e){return ti(e)}):[p],$=!1,R=0;R<B.length;R++)_=B[R],d.horizontal[_]||($?d.horizontal[_]=d.horizontal[0]:(S=Ys(v,t,n,i,T,k,u,"center",_,z,b,Q.horizontal,!1,C,E,F),S&&(d.horizontal[_]=S,$=1===S.positionedLines.length)));V()}else"auto"===p&&(p=ti(y)),N=Ys(v,t,n,i,T,k,u,y,p,z,b,Q.horizontal,!1,C,E,F),N&&(d.horizontal[p]=N),V(),go(L)&&f&&w&&(d.vertical=Ys(v,t,n,i,T,k,u,y,p,z,b,Q.vertical,!1,C,E,F))}A=void 0,I=!1,a.icon&&a.icon.name&&(g=o[a.icon.name],g&&(A=function(e,t,n){var s=Io(n),d=s.horizontalAlign,a=s.verticalAlign,r=t[0],c=t[1],i=r-e.displaySize[0]*d,l=i+e.displaySize[0],o=c-e.displaySize[1]*a;return{image:e,top:o,bottom:o+e.displaySize[1],left:i,right:l}}(i[a.icon.name],c.get("icon-offset").evaluate(a,{},r),c.get("icon-anchor").evaluate(a,{},r)),I=g.sdf,void 0===e.sdfIcons?e.sdfIcons=g.sdf:e.sdfIcons!==g.sdf&&W("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(g.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))),D=nr(d.horizontal)||d.vertical,e.iconsInText=!!D&&D.iconsInText,(D||A)&&function(e,t,n,s,o,i,a,r,c,l,d){w=i.textMaxSize.evaluate(t,{}),void 0===w&&(w=a);var f,p,g,b,j,y,_,w,O,C,E,k,A,S,F,z,N,L,P,H,I,q,u=e.layers[0].layout,D=u.get("icon-offset").evaluate(t,{},d),h=nr(n.horizontal),v=24,B=a/v,Z=e.tilePixelRatio*B,U=e.tilePixelRatio*w/v,X=e.tilePixelRatio*r,K=e.tilePixelRatio*u.get("symbol-spacing"),J=u.get("text-padding")*e.tilePixelRatio,ee=u.get("icon-padding")*e.tilePixelRatio,Y=u.get("text-max-angle")/180*Math.PI,se="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),ne="map"===u.get("icon-rotation-alignment")&&"point"!==u.get("symbol-placement"),V=u.get("symbol-placement"),te=K/2,T=u.get("icon-text-fit");if(s&&"none"!==T&&(e.allowVerticalPlacement&&n.vertical&&(q=Kr(s,n.vertical,T,u.get("icon-text-fit-padding"),D,B)),h&&(s=Kr(s,h,T,u.get("icon-text-fit-padding"),D,B))),f=function(r,u){u.x<0||u.x>=x||u.y<0||u.y>=x||function(e,t,n,s,o,i,a,r,c,l,d,u,h,f,p,g,v,b,j,y,_,w,O,x,C){var A,S,F,z,D,N,H,I,$,q,J,oe,T=e.addToLineVertexArray(t,n),ee=0,Z=0,G=0,ne=0,U=-1,P=-1,k={},X=zn(""),K=0,V=0,te;if((void 0===r._unevaluatedLayout.getValue("text-radial-offset")?(K=(oe=r.layout.get("text-offset").evaluate(_,{},x).map(function(e){return e*M}))[0],V=oe[1]):(K=r.layout.get("text-radial-offset").evaluate(_,{},x)*M,V=eo),e.allowVerticalPlacement&&s.vertical)&&($=r.layout.get("text-rotate").evaluate(_,{},x)+90,q=s.vertical,S=new xn(c,t,l,d,u,q,h,f,p,$),a&&(F=new xn(c,t,l,d,u,a,v,b,p,$))),o){var R=r.layout.get("icon-rotate").evaluate(_,{}),se="none"!==r.layout.get("icon-text-fit"),Y=br(o,R,O,se),B=a?br(a,R,O,se):void 0;D=new xn(c,t,l,d,u,o,v,b,!1,R),ee=4*Y.length,I=e.iconSizeData,z=null,"source"===I.kind?(z=[ce*r.layout.get("icon-size").evaluate(_,{})])[0]>Be&&W(e.layerIds[0]+': Value for "icon-size" is >= '+ln+'. Reduce your "icon-size".'):"composite"===I.kind&&((z=[ce*w.compositeIconSizes[0].evaluate(_,{},x),ce*w.compositeIconSizes[1].evaluate(_,{},x)])[0]>Be||z[1]>Be)&&W(e.layerIds[0]+': Value for "icon-size" is >= '+ln+'. Reduce your "icon-size".'),e.addSymbols(e.icon,Y,z,y,j,_,!1,t,T.lineStartIndex,T.lineLength,-1,x),U=e.icon.placedSymbolArray.length-1,B&&(Z=4*B.length,e.addSymbols(e.icon,B,z,y,j,_,Q.vertical,t,T.lineStartIndex,T.lineLength,-1,x),P=e.icon.placedSymbolArray.length-1)}for(J in s.horizontal)if(N=s.horizontal[J],A||(X=zn(N.text),te=r.layout.get("text-rotate").evaluate(_,{},x),A=new xn(c,t,l,d,u,N,h,f,p,te)),H=1===N.positionedLines.length,G+=sr(e,t,N,i,r,p,_,g,T,s.vertical?Q.horizontal:Q.horizontalOnly,H?Object.keys(s.horizontal):[J],k,U,w,x),H)break;s.vertical&&(ne+=sr(e,t,s.vertical,i,r,p,_,g,T,Q.vertical,["vertical"],k,P,w,x));var me=A?A.boxStartIndex:e.collisionBoxArray.length,he=A?A.boxEndIndex:e.collisionBoxArray.length,ae=S?S.boxStartIndex:e.collisionBoxArray.length,re=S?S.boxEndIndex:e.collisionBoxArray.length,fe=D?D.boxStartIndex:e.collisionBoxArray.length,le=D?D.boxEndIndex:e.collisionBoxArray.length,de=F?F.boxStartIndex:e.collisionBoxArray.length,ue=F?F.boxEndIndex:e.collisionBoxArray.length,E=-1,L=function(e,t){return e&&e.circleDiameter?Math.max(e.circleDiameter,t):t},E=L(A,E),E=L(S,E),E=L(D,E),ie=(E=L(F,E))>-1?1:0;ie&&(E*=C/M),e.glyphOffsetArray.length>=m.MAX_GLYPHS&&W("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,_.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,k.right>=0?k.right:-1,k.center>=0?k.center:-1,k.left>=0?k.left:-1,k.vertical||-1,U,P,X,me,he,ae,re,fe,le,de,ue,l,G,ne,ee,Z,ie,0,h,K,V,E)}(e,u,r,n,s,o,q,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,Z,J,se,c,X,ee,ne,D,t,i,l,d,a)},"line"===V)for(O=0,I=wr(t.geometry,0,0,x,x);O<I.length;O+=1)for(var $=I[O],R=0,G=Ll($,K,Y,n.vertical||h,s,v,U,e.overscaling,x);R<G.length;R+=1)H=G[R],h&&id(e,h.text,te,H)||f($,H);else if("line-center"===V)for(C=0,k=t.geometry;C<k.length;C+=1)_=k[C],_.length>1&&(L=Nl(_,Y,n.vertical||h,s,v,U),L&&f(_,L));else if("Polygon"===t.type)for(y=0,N=qo(t.geometry,0);y<N.length;y+=1)F=N[y],S=Yl(F,16),f(F[0],new _t(S.x,S.y,0));else if("LineString"===t.type)for(j=0,P=t.geometry;j<P.length;j+=1)p=P[j],f(p,new _t(p[0].x,p[0].y,0));else if("Point"===t.type)for(g=0,z=t.geometry;g<z.length;g+=1)for(b=0,A=z[g];b<A.length;b+=1)E=A[b],f([E],new _t(E.x,E.y,0))}(e,a,d,A,o,l,E,K,b,I,r)},h=0,j=e.features;h<j.length;h+=1)C();a&&e.generateCollisionDebugBuffers()},e.perspective=function(e,t,n,s,o){var i,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,o!=null&&o!==1/0?(i=1/(s-o),e[10]=(o+s)*i,e[14]=2*o*s*i):(e[10]=-1,e[14]=-2*s),e},e.pick=function(e,t){for(var n,o={},s=0;s<t.length;s++)n=t[s],n in e&&(o[n]=e[n]);return o},e.plugin=se,e.polygonIntersectsPolygon=wa,e.postMapLoadEvent=Cl,e.postTurnstileEvent=Fl,e.potpack=Oc,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=i,e.registerForPluginStateChange=function(e){return e({pluginStatus:ee,pluginURL:ot}),To.on("pluginStateChange",e),e},e.renderColorRamp=tr,e.rotate=function(e,t,n){var i=t[0],a=t[1],r=t[2],c=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=i*o+r*s,e[1]=a*o+c*s,e[2]=i*-s+r*o,e[3]=a*-s+c*o,e},e.rotateX=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],r=t[6],c=t[7],l=t[8],d=t[9],u=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+l*s,e[5]=a*o+d*s,e[6]=r*o+u*s,e[7]=c*o+h*s,e[8]=l*o-i*s,e[9]=d*o-a*s,e[10]=u*o-r*s,e[11]=h*o-c*s,e},e.rotateZ=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],r=t[2],c=t[3],l=t[4],d=t[5],u=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+l*s,e[1]=a*o+d*s,e[2]=r*o+u*s,e[3]=c*o+h*s,e[4]=l*o-i*s,e[5]=d*o-a*s,e[6]=u*o-r*s,e[7]=h*o-c*s,e},e.scale=function(e,t,n){var s=n[0],o=n[1],i=n[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},e.setCacheLimits=function(e,t){ac=e,uc=t},e.setRTLTextPlugin=function(e,t,n){if(void 0===n&&(n=!1),ee===Oo||ee===xo||ee===Co)throw new Error("setRTLTextPlugin cannot be called multiple times.");ot=$t.resolveURL(e),ee=Oo,ko=t,Fo(),n||mc()},e.sphericalToCartesian=function(e){var s=e[0],t=e[1],n=e[2];return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:s*Math.cos(t)*Math.sin(n),y:s*Math.sin(t)*Math.sin(n),z:s*Math.cos(n)}},e.sqrLen=Ua,e.styleSpec=t,e.sub=$a,e.symbolSize=Rr,e.transformMat3=function(e,t,n){var s=t[0],o=t[1],i=t[2];return e[0]=s*n[0]+o*n[3]+i*n[6],e[1]=s*n[1]+o*n[4]+i*n[7],e[2]=s*n[2]+o*n[5]+i*n[8],e},e.transformMat4=ks,e.translate=function(e,t,n){var a,r,c,l,d,u,h,m,f,p,g,v,i=n[0],o=n[1],s=n[2];return t===e?(e[12]=t[0]*i+t[4]*o+t[8]*s+t[12],e[13]=t[1]*i+t[5]*o+t[9]*s+t[13],e[14]=t[2]*i+t[6]*o+t[10]*s+t[14],e[15]=t[3]*i+t[7]*o+t[11]*s+t[15]):(v=t[0],g=t[1],p=t[2],d=t[3],r=t[4],c=t[5],l=t[6],a=t[7],u=t[8],h=t[9],m=t[10],f=t[11],e[0]=v,e[1]=g,e[2]=p,e[3]=d,e[4]=r,e[5]=c,e[6]=l,e[7]=a,e[8]=u,e[9]=h,e[10]=m,e[11]=f,e[12]=v*i+r*o+u*s+t[12],e[13]=g*i+c*o+h*s+t[13],e[14]=p*i+l*o+m*s+t[14],e[15]=d*i+a*o+f*s+t[15]),e},e.triggerPluginCompletionEvent=fc,e.uniqueId=ar,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},e.validateLight=Xd,e.validateStyle=jn,e.values=function(e){var n,t=[];for(n in e)t.push(e[n]);return t},e.vectorTile=Ht,e.version=jo,e.warnOnce=W,e.webpSupported=to,e.window=a,e.wrap=Gr}),s(0,function(e){function D(e){if(t=typeof e,"number"===t||"boolean"===t||"string"===t||e==null)return JSON.stringify(e);if(Array.isArray(e)){for(var t,i="[",s=0,a=e;s<a.length;s+=1)i+=D(a[s])+",";return i+"]"}for(var o=Object.keys(e).sort(),r="{",n=0;n<o.length;n++)r+=JSON.stringify(o[n])+":"+D(e[o[n]])+",";return r+"}"}function xe(t){for(var s="",n=0,o=e.refProperties;n<o.length;n+=1)s+="/"+D(t[o[n]]);return s}l=function(e){this.keyCache={},e&&this.replace(e)},l.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},l.prototype.update=function(t,n){for(var s,o,i,a,r,c,l,d,u,h,m,f,g,b=this,p=0,v=t;p<v.length;p+=1)s=v[p],this._layerConfigs[s.id]=s,u=this._layers[s.id]=e.createStyleLayer(s),u._featureFilter=e.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id];for(c=0,d=n;c<d.length;c+=1)i=d[c],delete this.keyCache[i],delete this._layerConfigs[i],delete this._layers[i];this.familiesBySource={};for(r=0,h=function(e,t){for(var o,i,a,r,s={},n=0;n<e.length;n++)o=t&&t[e[n].id]||xe(e[n]),t&&(t[e[n].id]=o),i=s[o],i||(i=s[o]=[]),i.push(e[n]);a=[];for(r in s)a.push(s[r]);return a}(e.values(this._layerConfigs),this.keyCache);r<h.length;r+=1)m=h[r].map(function(e){return b._layers[e.id]}),a=m[0],"none"!==a.visibility&&(f=a.source||"",o=this.familiesBySource[f],o||(o=this.familiesBySource[f]={}),g=a.sourceLayer||"_geojsonTileLayer",l=o[g],l||(l=o[g]=[]),l.push(m))},T=function(t){o={},i=[];for(u in t){a=t[u],p=o[u]={};for(d in a)n=a[+d],n&&0!==n.bitmap.width&&0!==n.bitmap.height&&(c={x:0,y:0,w:n.bitmap.width+2,h:n.bitmap.height+2},i.push(c),p[d]={rect:c,metrics:n.metrics})}var n,s,o,i,a,r,c,l,d,u,f,p,g,h=e.potpack(i),v=h.w,b=h.h,m=new e.AlphaImage({width:v||1,height:b||1});for(f in t){r=t[f];for(g in r)s=r[+g],s&&0!==s.bitmap.width&&0!==s.bitmap.height&&(l=o[f][g].rect,e.AlphaImage.copy(s.bitmap,m,{x:0,y:0},{x:l.x+1,y:l.y+1},s.bitmap))}this.image=m,this.positions=o},e.register("GlyphAtlas",T),A=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId};function E(t,n,s){for(var a=new e.EvaluationParameters(n),o=0,i=t;o<i.length;o+=1)i[o].recalculate(a,s)}function Oe(t,n){var s=e.getArrayBuffer(t.request,function(t,s,o,i){t?n(t):s&&n(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(s)),rawData:s,cacheControl:o,expires:i})});return function(){s.cancel(),n()}}A.prototype.parse=function(t,n,s,o,i){b=this,this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray,A=new e.DictionaryCoder(Object.keys(t.layers).sort()),c=new e.FeatureIndex(this.tileID,this.promoteId),c.bucketLayerIDs=[];var a,r,c,l,d,u,h,m,v,b,j,_,w,O,x,C,A,S,g={},f={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:s},k=n.familiesBySource[this.source];for(m in k)if(h=t.layers[m],h){1===h.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+m+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var F=A.encode(m),M=[],p=0;p<h.length;p++)_=h.feature(p),S=c.getId(_,m),M.push({feature:_,id:S,index:p,sourceLayerIndex:F});for(j=0,x=k[m];j<x.length;j+=1)u=x[j],a=u[0],a.minzoom&&this.zoom<Math.floor(a.minzoom)||a.maxzoom&&this.zoom>=a.maxzoom||"none"!==a.visibility&&(E(u,this.zoom,s),(g[a.id]=a.createBucket({index:c.bucketLayerIDs.length,layers:u,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:F,sourceID:this.source})).populate(M,f,this.tileID.canonical),c.bucketLayerIDs.push(u.map(function(e){return e.id})))}C=e.mapObject(f.glyphDependencies,function(e){return Object.keys(e).map(Number)}),Object.keys(C).length?o.send("getGlyphs",{uid:this.uid,stacks:C},function(e,t){r||(r=e,l=t,y.call(b))}):l={},w=Object.keys(f.iconDependencies),w.length?o.send("getImages",{icons:w,source:this.source,tileID:this.tileID,type:"icons"},function(e,t){r||(r=e,d=t,y.call(b))}):d={},O=Object.keys(f.patternDependencies);function y(){if(r)return i(r);if(l&&d&&v){var t,a,n=new T(l),o=new e.ImageAtlas(d,v);for(a in g)t=g[a],t instanceof e.SymbolBucket?(E(t.layers,this.zoom,s),e.performSymbolLayout(t,l,n.positions,d,o.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):t.hasPattern&&(t instanceof e.LineBucket||t instanceof e.FillBucket||t instanceof e.FillExtrusionBucket)&&(E(t.layers,this.zoom,s),t.addFeatures(f,this.tileID.canonical,o.patternPositions));this.status="done",i(null,{buckets:e.values(g).filter(function(e){return!e.isEmpty()}),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:n.image,imageAtlas:o,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?n.positions:null})}}O.length?o.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"patterns"},function(e,t){r||(r=e,v=t,y.call(b))}):v={},y.call(this)},o=function(e,t,n,s){this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=s||Oe,this.loading={},this.loaded={}},o.prototype.loadTile=function(t,n){var o,a,s=this,i=t.uid;this.loading||(this.loading={}),a=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),o=this.loading[i]=new A(t),o.abort=this.loadVectorData(t,function(t,r){if(delete s.loading[i],t||!r)return o.status="done",s.loaded[i]=o,n(t);var l,d,u=r.rawData,c={};r.expires&&(c.expires=r.expires),r.cacheControl&&(c.cacheControl=r.cacheControl),l={},a&&(d=a.finish(),d&&(l.resourceTiming=JSON.parse(JSON.stringify(d)))),o.vectorTile=r.vectorTile,o.parse(r.vectorTile,s.layerIndex,s.availableImages,s.actor,function(t,s){if(t||!s)return n(t);n(null,e.extend({rawTileData:u.slice(0)},s,c,l))}),s.loaded=s.loaded||{},s.loaded[i]=o})},o.prototype.reloadTile=function(e,t){var n,s,r=this,o=this.loaded,i=e.uid,a=this;o&&o[i]&&(n=o[i],n.showCollisionBoxes=e.showCollisionBoxes,s=function(e,s){var o=n.reloadCallback;o&&(delete n.reloadCallback,n.parse(n.vectorTile,a.layerIndex,r.availableImages,a.actor,o)),t(e,s)},"parsing"===n.status?n.reloadCallback=s:"done"===n.status&&(n.vectorTile?n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s()))},o.prototype.abortTile=function(e,t){var n=this.loading,s=e.uid;n&&n[s]&&n[s].abort&&(n[s].abort(),delete n[s]),t()},o.prototype.removeTile=function(e,t){var n=this.loaded,s=e.uid;n&&n[s]&&delete n[s],t()},O=e.window.ImageBitmap,c=function(){this.loaded={}},c.prototype.loadTile=function(t,n){var o=t.uid,a=t.encoding,s=t.rawImageData,r=O&&s instanceof O?this.getImageData(s):s,i=new e.DEMData(o,r,a);this.loaded=this.loaded||{},this.loaded[o]=i,n(null,i)},c.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:n.width,height:n.height},n.data)},c.prototype.removeTile=function(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]},ie=function e(t,n){var s,o=t&&t.type;if("FeatureCollection"===o)for(s=0;s<t.features.length;s++)e(t.features[s],n);else if("GeometryCollection"===o)for(s=0;s<t.geometries.length;s++)e(t.geometries[s],n);else if("Feature"===o)e(t.geometry,n);else if("Polygon"===o)V(t.coordinates,n);else if("MultiPolygon"===o)for(s=0;s<t.coordinates.length;s++)V(t.coordinates[s],n);return t};function V(e,t){if(0!==e.length){G(e[0],t);for(var n=1;n<e.length;n++)G(e[n],!t)}}function G(e,t){for(var o=0,n=0,i=e.length,s=i-1;n<i;s=n++)o+=(e[n][0]-e[s][0])*(e[s][1]+e[n][1]);o>=0!=!!t&&e.reverse()}Z=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))},f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var s,o,a=[],t=0,l=this._feature.geometry;t<l.length;t+=1)s=l[t],a.push([new e.Point$1(s[0],s[1])]);return a}for(var u=[],i=0,r=this._feature.geometry;i<r.length;i+=1){for(var c=[],n=0,d=r[i];n<d.length;n+=1)o=d[n],c.push(new e.Point$1(o[0],o[1]));u.push(c)}return u},f.prototype.toGeoJSON=function(e,t,n){return Z.call(this,e,t,n)},g=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t},g.prototype.feature=function(e){return new f(this._features[e])},J=e.vectorTile.VectorTileFeature,b=ne;function ne(e,t){this.options=t||{},this.features=e,this.length=e.length}function h(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}ne.prototype.feature=function(e){return new h(this.features[e],this.options.extent)},h.prototype.loadGeometry=function(){s=this.rawGeometry,this.geometry=[];for(t=0;t<s.length;t++){for(var t,s,o=s[t],i=[],n=0;n<o.length;n++)i.push(new e.Point$1(o[n][0],o[n][1]));this.geometry.push(i)}return this.geometry},h.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e,t,n,c=this.geometry,a=1/0,r=-1/0,s=1/0,o=-1/0,i=0;i<c.length;i++)for(n=c[i],t=0;t<n.length;t++)e=n[t],a=Math.min(a,e.x),r=Math.max(r,e.x),s=Math.min(s,e.y),o=Math.max(o,e.y);return[a,s,r,o]},h.prototype.toGeoJSON=J.prototype.toGeoJSON;var t,n,o,c,l,f,g,b,O,A,T,H,q,Z,J,ie,u=C,re=C,ce=function(e,t){t=t||{};var n,s={};for(n in e)s[n]=new b(e[n].features,t),s[n].name=n,s[n].version=t.version,s[n].extent=t.extent;return C({layers:s})},ue=b;function C(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,de,e.layers[n])}(t,n),n.finish()}function de(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n,o,i,s={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)s.feature=e.feature(n),t.writeMessage(2,me,s);o=s.keys;for(n=0;n<o.length;n++)t.writeStringField(3,o[n]);i=s.values;for(n=0;n<i.length;n++)t.writeMessage(4,we,i[n])}function me(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,ve,e),t.writeVarintField(3,n.type),t.writeMessage(4,ge,n)}function ve(e,t){var n,s,o,i,a,r,c=e.feature,l=e.keys,d=e.values,u=e.keycache,h=e.valuecache;for(a in c.properties)s=u[a],void 0===s&&(l.push(a),s=l.length-1,u[a]=s),t.writeVarint(s),n=c.properties[a],o=typeof n,"string"!==o&&"boolean"!==o&&"number"!==o&&(n=JSON.stringify(n)),r=o+":"+n,i=h[r],void 0===i&&(d.push(n),i=d.length-1,h[r]=i),t.writeVarint(i)}function S(e,t){return(t<<3)+(7&e)}function $(e){return e<<1^e>>31}function ge(e,t){for(var n,s,i,a,c,l,d=e.loadGeometry(),o=e.type,u=0,h=0,m=d.length,r=0;r<m;r++){n=d[r],c=1,1===o&&(c=n.length),t.writeVarint(S(1,c));for(i=3===o?n.length-1:n.length,s=0;s<i;s++)1===s&&1!==o&&t.writeVarint(S(2,i-1)),a=n[s].x-u,l=n[s].y-h,t.writeVarint($(a)),t.writeVarint($(l)),u+=a,h+=l;3===o&&t.writeVarint(S(7,1))}}function we(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function z(e,t,n,s,o,i){if(!(o-s<=n)){var a=s+o>>1;B(e,t,a,s,o,i%2),z(e,t,n,s,a-1,i+1),z(e,t,n,a+1,o,i+1)}}function B(e,t,n,s,o,i){for(;o>s;){if(o-s>600){var c=o-s+1,h=n-s+1,m=Math.log(c),d=.5*Math.exp(2*m/3),f=.5*Math.sqrt(m*d*(c-d)/c)*(h-c/2<0?-1:1);B(e,t,n,Math.max(s,Math.floor(n-h*d/c+f)),Math.min(o,Math.floor(n+(c-h)*d/c+f)),i)}var u=t[2*n+i],l=s,a=o;for(r(e,t,s,n),t[2*o+i]>u&&r(e,t,s,o);l<a;){for(r(e,t,l,a),l++,a--;t[2*l+i]<u;)l++;for(;t[2*a+i]>u;)a--}t[2*s+i]===u?r(e,t,s,a):r(e,t,++a,o),a<=n&&(s=a+1),n<=a&&(o=a-1)}}function r(e,t,n,s){L(e,n,s),L(t,2*n,2*s),L(t,2*n+1,2*s+1)}function L(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function I(e,t,n,s){var o=e-n,i=t-s;return o*o+i*i}u.fromVectorTileJs=re,u.fromGeojsonVt=ce,u.GeoJSONWrapper=ue;var be=function(e){return e[0]},Ee=function(e){return e[1]},p=function(e,t,n,s,o){void 0===t&&(t=be),void 0===n&&(n=Ee),void 0===s&&(s=64),void 0===o&&(o=Float64Array),this.nodeSize=s,this.points=e;for(var c=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new c(e.length),r=this.coords=new o(2*e.length),i=0;i<e.length;i++)a[i]=i,r[2*i]=t(e[i]),r[2*i+1]=n(e[i]);z(a,r,s,0,a.length-1,0)};p.prototype.range=function(e,t,n,s){return function(e,t,n,s,o,i,a){for(r=[0,e.length-1,0],h=[];r.length;){var r,c,l,d,u,h,g,p=r.pop(),m=r.pop(),f=r.pop();if(m-f<=a)for(d=f;d<=m;d++)c=t[2*d],l=t[2*d+1],c>=n&&c<=o&&l>=s&&l<=i&&h.push(e[d]);else u=Math.floor((f+m)/2),c=t[2*u],l=t[2*u+1],c>=n&&c<=o&&l>=s&&l<=i&&h.push(e[u]),g=(p+1)%2,(0===p?n<=c:s<=l)&&(r.push(f),r.push(u-1),r.push(g)),(0===p?o>=c:i>=l)&&(r.push(u+1),r.push(m),r.push(g))}return h}(this.ids,this.coords,e,t,n,s,this.nodeSize)},p.prototype.within=function(e,t,n){return function(e,t,n,s,o,i){for(var r,p,a=[0,e.length-1,0],m=[],g=o*o;a.length;){var h=a.pop(),l=a.pop(),d=a.pop();if(l-d<=i)for(r=d;r<=l;r++)I(t[2*r],t[2*r+1],n,s)<=g&&m.push(e[r]);else{var c=Math.floor((d+l)/2),u=t[2*c],f=t[2*c+1];I(u,f,n,s)<=g&&m.push(e[c]),p=(h+1)%2,(0===h?n-o<=u:s-o<=f)&&(a.push(d),a.push(c-1),a.push(p)),(0===h?n+o>=u:s+o>=f)&&(a.push(c+1),a.push(l),a.push(p))}}return m}(this.ids,this.coords,e,t,n,this.nodeSize)},q={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},n=function(e){this.options=i(Object.create(q),e),this.trees=new Array(this.options.maxZoom+1)};function ke(e,t,n,s,o){return{x:e,y:t,zoom:1/0,id:n,parentId:-1,numPoints:s,properties:o}}function je(e,t){var n=e.geometry.coordinates,s=n[0],o=n[1];return{x:F(s),y:M(o),zoom:1/0,index:t,parentId:-1}}function U(e){return{type:"Feature",id:e.id,properties:K(e),geometry:{type:"Point",coordinates:[(s=e.x,360*(s-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,s}function K(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return i(i({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function F(e){return e/360+.5}function M(e){var n=Math.sin(e*Math.PI/180),t=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return t<0?0:t>1?1:t}function i(e,t){for(var n in t)e[n]=t[n];return e}function X(e){return e.x}function ae(e){return e.y}function k(e,t,n,s){for(var o,r,c,a=s,m=n-t>>1,l=n-t,f=e[t],d=e[t+1],u=e[n],h=e[n+1],i=t+3;i<n;i+=3)r=he(e[i],e[i+1],f,d,u,h),r>a?(o=i,a=r):r===a&&(c=Math.abs(i-m),c<l&&(o=i,l=c));a>s&&(o-t>3&&k(e,t,o,s),e[o+2]=a,n-o>3&&k(e,o,n,s))}function he(e,t,n,s,o,i){var c,a=o-n,r=i-s;return(0!==a||0!==r)&&(c=((e-n)*a+(t-s)*r)/(a*a+r*r),c>1?(n=o,s=i):c>0&&(n+=a*c,s+=r*c)),(a=e-n)*a+(r=t-s)*r}function a(e,t,n,s){var o={id:void 0===e?null:e,type:t,geometry:n,tags:s,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t,o,n=e.geometry,s=e.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)x(e,n);else if("Polygon"===s||"MultiLineString"===s)for(t=0;t<n.length;t++)x(e,n[t]);else if("MultiPolygon"===s)for(t=0;t<n.length;t++)for(o=0;o<n[t].length;o++)x(e,n[t][o])}(o),o}function x(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function d(e,t,n,s){if(t.geometry){var o,h,i=t.geometry.coordinates,c=t.geometry.type,l=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),r=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=s||0),"Point"===c)se(i,r);else if("MultiPoint"===c)for(o=0;o<i.length;o++)se(i[o],r);else if("LineString"===c)w(i,r,l,!1);else if("MultiLineString"===c){if(n.lineMetrics){for(o=0;o<i.length;o++)r=[],w(i[o],r,l,!1),e.push(a(u,"LineString",r,t.properties));return}_(i,r,l,!1)}else if("Polygon"===c)_(i,r,l,!0);else{if("MultiPolygon"!==c){if("GeometryCollection"===c){for(o=0;o<t.geometry.geometries.length;o++)d(e,{id:u,geometry:t.geometry.geometries[o],properties:t.properties},n,s);return}throw new Error("Input data is not a valid GeoJSON object.")}for(o=0;o<i.length;o++)h=[],_(i[o],h,l,!0),r.push(h)}e.push(a(u,c,r,t.properties))}}function se(e,t){t.push(te(e[0])),t.push(oe(e[1])),t.push(0)}function w(e,t,n,s){for(var i,a,r,c,l,d=0,o=0;o<e.length;o++)i=te(e[o][0]),a=oe(e[o][1]),t.push(i),t.push(a),t.push(0),o>0&&(d+=s?(r*a-i*c)/2:Math.sqrt(Math.pow(i-r,2)+Math.pow(a-c,2))),r=i,c=a;l=t.length-3,t[2]=1,k(t,0,l,n),t[l+2]=1,t.size=Math.abs(d),t.start=0,t.end=t.size}function _(e,t,n,s){for(var i,o=0;o<e.length;o++)i=[],w(e[o],i,n,s),t.push(i)}function te(e){return e/360+.5}function oe(e){var n=Math.sin(e*Math.PI/180),t=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return t<0?0:t>1?1:t}function s(e,t,n,s,o,i,r,c){if(s/=t,i>=(n/=t)&&r<s)return e;if(r<n||i>=s)return null;for(m=[],p=0;p<e.length;p++){var d,h,m,p,g,u=e[p],f=u.geometry,l=u.type,b=0===o?u.minX:u.minY,j=0===o?u.maxX:u.maxY;if(b>=n&&j<s)m.push(u);else if(!(j<n||b>=s)){if(d=[],"Point"===l||"MultiPoint"===l)le(f,d,n,s,o);else if("LineString"===l)ee(f,d,n,s,o,!1,c.lineMetrics);else if("MultiLineString"===l)v(f,d,n,s,o,!1);else if("Polygon"===l)v(f,d,n,s,o,!0);else if("MultiPolygon"===l)for(h=0;h<f.length;h++)g=[],v(f[h],g,n,s,o,!0),g.length&&d.push(g);if(d.length){if(c.lineMetrics&&"LineString"===l){for(h=0;h<d.length;h++)m.push(a(u.id,l,d[h],u.tags));continue}"LineString"!==l&&"MultiLineString"!==l||(1===d.length?(l="LineString",d=d[0]):l="MultiLineString"),"Point"!==l&&"MultiPoint"!==l||(l=3===d.length?"Point":"MultiPoint"),m.push(a(u.id,l,d,u.tags))}}}return m.length?m:null}function le(e,t,n,s,o){for(var a,i=0;i<e.length;i+=3)a=e[i+o],a>=n&&a<=s&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]))}function ee(e,t,n,s,o,i,a){for(var h,g,r=P(e),v=0===o?fe:pe,b=e.start,u=0;u<e.length-3;u+=3){var d,c=e[u],l=e[u+1],w=e[u+2],f=e[u+3],m=e[u+4],p=0===o?c:l,y=0===o?f:m,_=!1;a&&(g=Math.sqrt(Math.pow(c-f,2)+Math.pow(l-m,2))),p<n?y>n&&(h=v(r,c,l,f,m,n),a&&(r.start=b+g*h)):p>s?y<s&&(h=v(r,c,l,f,m,s),a&&(r.start=b+g*h)):j(r,c,l,w),y<n&&p>=n&&(h=v(r,c,l,f,m,n),_=!0),y>s&&p<=s&&(h=v(r,c,l,f,m,s),_=!0),!i&&_&&(a&&(r.end=b+g*h),t.push(r),r=P(e)),a&&(b+=g)}d=e.length-3,c=e[d],l=e[d+1],w=e[d+2],(p=0===o?c:l)>=n&&p<=s&&j(r,c,l,w),d=r.length-3,i&&d>=3&&(r[d]!==r[0]||r[d+1]!==r[1])&&j(r,r[0],r[1],r[2]),r.length&&t.push(r)}function P(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function v(e,t,n,s,o,i){for(var a=0;a<e.length;a++)ee(e[a],t,n,s,o,i,!1)}function j(e,t,n,s){e.push(t),e.push(n),e.push(s)}function fe(e,t,n,s,o,i){var a=(i-t)/(s-t);return e.push(i),e.push(n+(o-n)*a),e.push(1),a}function pe(e,t,n,s,o,i){var a=(i-n)/(o-n);return e.push(t+(s-t)*a),e.push(i),e.push(1),a}function Q(e,t){for(var n,s,o,i,r,c,d=[],l=0;l<e.length;l++){if(n=e[l],o=n.type,"Point"===o||"MultiPoint"===o||"LineString"===o)i=R(n.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(s=0;s<n.geometry.length;s++)i.push(R(n.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<n.geometry.length;s++){for(c=[],r=0;r<n.geometry[s].length;r++)c.push(R(n.geometry[s][r],t));i.push(c)}d.push(a(n.id,o,i,n.tags))}return d}function R(e,t){var n,s=[];s.size=e.size,void 0!==e.start&&(s.start=e.start,s.end=e.end);for(n=0;n<e.length;n+=3)s.push(e[n]+t,e[n+1],e[n+2]);return s}function Y(e,t){if(e.transformed)return e;var n,i,a,r,d=1<<e.z,c=e.x,l=e.y;for(a=0;a<e.features.length;a++){var o=e.features[a],s=o.geometry,u=o.type;if(o.geometry=[],1===u)for(n=0;n<s.length;n+=2)o.geometry.push(W(s[n],s[n+1],t,d,c,l));else for(n=0;n<s.length;n++){r=[];for(i=0;i<s[n].length;i+=2)r.push(W(s[n][i],s[n][i+1],t,d,c,l));o.geometry.push(r)}}return e.transformed=!0,e}function W(e,t,n,s,o,i){return[Math.round(n*(e*s-o)),Math.round(n*(t*s-i))]}function ye(e,t,n,s,o){for(var u=t===o.maxZoom?0:o.tolerance/((1<<t)*o.extent),i={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:s,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<e.length;a++){i.numFeatures++,_e(i,e[a],u,o);var c=e[a].minX,l=e[a].minY,d=e[a].maxX,r=e[a].maxY;c<i.minX&&(i.minX=c),l<i.minY&&(i.minY=l),d>i.maxX&&(i.maxX=d),r>i.maxY&&(i.maxY=r)}return i}function _e(e,t,n,s){var o,c,l,d,u,h,i=t.geometry,a=t.type,r=[];if("Point"===a||"MultiPoint"===a)for(o=0;o<i.length;o+=3)r.push(i[o]),r.push(i[o+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)y(r,i,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(o=0;o<i.length;o++)y(r,i[o],e,n,"Polygon"===a,0===o);else if("MultiPolygon"===a)for(l=0;l<i.length;l++){d=i[l];for(o=0;o<d.length;o++)y(r,d[o],e,n,!0,0===o)}if(r.length){if(c=t.tags||null,"LineString"===a&&s.lineMetrics){for(h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}u={geometry:r,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c},null!==t.id&&(u.id=t.id),e.features.push(u)}}function y(e,t,n,s,o,i){if(c=s*s,s>0&&t.size<(o?c:s))n.numPoints+=t.length/3;else{for(var c,r=[],a=0;a<t.length;a+=3)(0===s||t[a+2]>c)&&(n.numSimplified++,r.push(t[a]),r.push(t[a+1])),n.numPoints++;o&&function(e,t){for(var a,r,i=0,n=0,s=e.length,o=s-2;n<s;o=n,n+=2)i+=(e[n]-e[o])*(e[n+1]+e[o+1]);if(i>0===t)for(n=0,s=e.length;n<s/2;n+=2)a=e[n],r=e[n+1],e[n]=e[s-2-n],e[n+1]=e[s-1-n],e[s-2-n]=a,e[s-1-n]=r}(r,i),e.push(r)}}function m(e,t){var n,o=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(o&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");n=function(e,t){var n,s=[];if("FeatureCollection"===e.type)for(n=0;n<e.features.length;n++)d(s,e.features[n],t,n);else"Feature"===e.type?d(s,e,t):d(s,{geometry:e},t);return s}(e,t),this.tiles={},this.tileCoords=[],o&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(e,t){var n=t.buffer/t.extent,o=e,i=s(e,1,-1-n,n,0,-1,2,t),a=s(e,1,1-n,2+n,0,-1,2,t);return(i||a)&&(o=s(e,1,-n,1+n,0,-1,2,t)||[],i&&(o=Q(i,1).concat(o)),a&&(o=o.concat(Q(a,-1)))),o}(n,t)).length&&this.splitTile(n,0,0,0),o&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function N(e,t,n){return 32*((1<<e)*n+t)+e}function Ce(e,t){if(s=e.tileID.canonical,!this._geoJSONIndex)return t(null,null);if(o=this._geoJSONIndex.getTile(s.z,s.x,s.y),!o)return t(null,null);var s,o,i=new g(o.features),n=u(i);0===n.byteOffset&&n.byteLength===n.buffer.byteLength||(n=new Uint8Array(n)),t(null,{vectorTile:i,rawData:n.buffer})}return n.prototype.load=function(e){var t,n,s,a,l,i=this.options,o=i.log,d=i.minZoom,r=i.maxZoom,c=i.nodeSize;o&&console.time("total time"),a="prepare "+e.length+" points",o&&console.time(a),this.points=e;for(t=[],n=0;n<e.length;n++)e[n].geometry&&t.push(je(e[n],n));this.trees[r+1]=new p(t,X,ae,c,Float32Array),o&&console.timeEnd(a);for(s=r;s>=d;s--)l=+Date.now(),t=this._cluster(t,s),this.trees[s]=new p(t,X,ae,c,Float32Array),o&&console.log("z%d: %d clusters in %dms",s,t.length,+Date.now()-l);return o&&console.timeEnd("total time"),this},n.prototype.getClusters=function(e,t){var o,c,h,m,n=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),s=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,s=180;else if(n>s)return c=this.getClusters([n,i,180,a],t),m=this.getClusters([-180,i,s,a],t),c.concat(m);for(var l=this.trees[this._limitZoom(t)],d=[],r=0,u=l.range(F(n),M(a),F(s),M(i));r<u.length;r+=1)h=u[r],o=l.points[h],d.push(o.numPoints?U(o):this.points[o.index]);return d},n.prototype.getChildren=function(e){var t,s,l,u=this._getOriginId(e),r=this._getOriginZoom(e),a="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(a);if(s=n.points[u],!s)throw new Error(a);for(var d=this.options.radius/(this.options.extent*Math.pow(2,r-1)),o=[],i=0,c=n.within(s.x,s.y,d);i<c.length;i+=1)l=c[i],t=n.points[l],t.parentId===e&&o.push(t.numPoints?U(t):this.points[t.index]);if(0===o.length)throw new Error(a);return o},n.prototype.getLeaves=function(e,t,n){t=t||10,n=n||0;var s=[];return this._appendLeaves(s,e,t,n,0),s},n.prototype.getTile=function(e,t,n){var o=this.trees[this._limitZoom(e)],s=Math.pow(2,e),l=this.options,d=l.extent,i=l.radius/d,r=(n-i)/s,c=(n+1+i)/s,a={features:[]};return this._addTileFeatures(o.range((t-i)/s,r,(t+1+i)/s,c),o.points,t,n,s,a),0===t&&this._addTileFeatures(o.range(1-i/s,r,1,c),o.points,s,n,s,a),t===s-1&&this._addTileFeatures(o.range(0,r,i/s,c),o.points,-1,n,s,a),a.features.length?a:null},n.prototype.getClusterExpansionZoom=function(e){for(var n,t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){if(n=this.getChildren(e),t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},n.prototype._appendLeaves=function(e,t,n,s,o){for(var i,r,a=0,c=this.getChildren(t);a<c.length;a+=1)if(r=c[a],i=r.properties,i&&i.cluster?o+i.point_count<=s?o+=i.point_count:o=this._appendLeaves(e,i.cluster_id,n,s,o):o<s?o++:e.push(r),e.length===n)break;return o},n.prototype._addTileFeatures=function(e,t,n,s,o,i){for(c=0,l=e;c<l.length;c+=1){var c,l,a=t[l[c]],d=a.numPoints,u={type:1,geometry:[[Math.round(this.options.extent*(a.x*o-n)),Math.round(this.options.extent*(a.y*o-s))]],tags:d?K(a):this.points[a.index].properties},r=void 0;d?r=a.id:this.options.generateId?r=a.index:this.points[a.index].id&&(r=this.points[a.index].id),void 0!==r&&(u.id=r),i.features.push(u)}},n.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))},n.prototype._cluster=function(e,t){for(var n,s,d,h,f,g,b,x,E,k,r=[],i=this.options,M=i.radius,S=i.extent,m=i.reduce,A=i.minPoints,F=M/(S*Math.pow(2,t)),l=0;l<e.length;l++)if(n=e[l],!(n.zoom<=t)){n.zoom=t;for(var u=this.trees[t+1],y=u.within(n.x,n.y,F),c=n.numPoints||1,o=c,p=0,C=y;p<C.length;p+=1)k=C[p],b=u.points[k],b.zoom>t&&(o+=b.numPoints||1);if(o>=A){for(var w=n.x*c,_=n.y*c,a=m&&c>1?this._map(n,!0):null,j=(l<<5)+(t+1)+this.points.length,v=0,O=y;v<O.length;v+=1)x=O[v],s=u.points[x],s.zoom<=t||(s.zoom=t,g=s.numPoints||1,w+=s.x*g,_+=s.y*g,s.parentId=j,m&&(a||(a=this._map(n,!0)),m(a,this._map(s))));n.parentId=j,r.push(ke(w/o,_/o,j,o,a))}else if(r.push(n),o>1)for(d=0,f=y;d<f.length;d+=1)E=f[d],h=u.points[E],h.zoom<=t||(h.zoom=t,r.push(h))}return r},n.prototype._getOriginId=function(e){return e-this.points.length>>5},n.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},n.prototype._map=function(e,t){if(e.numPoints)return t?i({},e.properties):e.properties;var s=this.points[e.index].properties,n=this.options.map(s);return t&&n===s?i({},n):n},m.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},m.prototype.splitTile=function(e,t,n,o,i,a,r){for(var d=[e,t,n,o],l=this.options,m=l.debug;d.length;){o=d.pop(),n=d.pop(),t=d.pop(),e=d.pop();var u=1<<t,C=N(t,n,o),c=this.tiles[C];if(!c&&(m>1&&console.time("creation"),c=this.tiles[C]=ye(e,t,n,o,l),this.tileCoords.push({z:t,x:n,y:o}),m)&&(m>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,o,c.numFeatures,c.numPoints,c.numSimplified),console.timeEnd("creation")),_="z"+t,this.stats[_]=(this.stats[_]||0)+1,this.total++),c.source=e,i){{if(t===l.maxZoom||t===i)continue;if(y=1<<i-t,n!==Math.floor(a/y)||o!==Math.floor(r/y))continue}}else if(t===l.indexMaxZoom||c.numPoints<=l.indexMaxPoints)continue;if(c.source=null,0!==e.length){m>1&&console.time("clipping");var g,b,j,y,_,h=.5*l.buffer/l.extent,O=.5-h,w=.5+h,x=1+h,v=g=b=j=null,p=s(e,u,n-h,n+w,0,c.minX,c.maxX,l),f=s(e,u,n+O,n+x,0,c.minX,c.maxX,l);e=null,p&&(v=s(p,u,o-h,o+w,1,c.minY,c.maxY,l),g=s(p,u,o+O,o+x,1,c.minY,c.maxY,l),p=null),f&&(b=s(f,u,o-h,o+w,1,c.minY,c.maxY,l),j=s(f,u,o+O,o+x,1,c.minY,c.maxY,l),f=null),m>1&&console.timeEnd("clipping"),d.push(v||[],t+1,2*n,2*o),d.push(g||[],t+1,2*n,2*o+1),d.push(b||[],t+1,2*n+1,2*o),d.push(j||[],t+1,2*n+1,2*o+1)}}},m.prototype.getTile=function(e,t,n){var a,c,d=this.options,u=d.extent,l=d.debug;if(e<0||e>24)return null;if(c=1<<e,a=N(e,t=(t%c+c)%c,n),this.tiles[a])return Y(this.tiles[a],u);l>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var r,s=e,o=t,i=n;!r&&s>0;)s--,o=Math.floor(o/2),i=Math.floor(i/2),r=this.tiles[N(s,o,i)];return r&&r.source?(l>1&&console.log("found parent tile z%d-%d-%d",s,o,i),l>1&&console.time("drilling down"),this.splitTile(r.source,s,o,i,e,t,n),l>1&&console.timeEnd("drilling down"),this.tiles[a]?Y(this.tiles[a],u):null):null},H=function(t){function s(e,n,s,o){t.call(this,e,n,s,Ce),o&&(this.loadGeoJSON=o)}return t&&(s.__proto__=t),s.prototype=Object.create(t&&t.prototype),s.prototype.constructor=s,s.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},s.prototype._loadData=function(){if(o=this,this._pendingCallback&&this._pendingLoadDataParams){var o,i,s=this._pendingCallback,t=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams,i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),this.loadGeoJSON(t,function(a,r){if(a||!r)return s(a);if("object"!=typeof r)return s(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));ie(r,!0);try{if(t.filter){var c,d,u,l=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===l.result)throw new Error(l.value.map(function(e){return e.key+": "+e.message}).join(", "));u=r.features.filter(function(e){return l.value.evaluate({zoom:0},e)}),r={type:"FeatureCollection",features:u}}o._geoJSONIndex=t.cluster?new n(function(t){if(n=t.superclusterOptions,s=t.clusterProperties,!s||!n)return n;for(var n,s,m={},u={},r={accumulated:null,zoom:0},i={properties:null},c=Object.keys(s),l=0,d=c;l<d.length;l+=1){var o=d[l],h=s[o],a=h[0],f=h[1],p=e.createExpression(f),g=e.createExpression("string"==typeof a?[a,["accumulated"],["get",o]]:a);m[o]=p.value,u[o]=g.value}return n.map=function(e){i.properties=e;for(var n,s={},t=0,o=c;t<o.length;t+=1)n=o[t],s[n]=m[n].evaluate(r,i);return s},n.reduce=function(e,t){i.properties=t;for(var n,s=0,o=c;s<o.length;s+=1)n=o[s],r.accumulated=e[n],e[n]=u[n].evaluate(r,i)},n}(t)).load(r.features):function(e,t){return new m(e,t)}(r,t.geojsonVtOptions)}catch(e){return s(e)}o.loaded={},c={},i&&(d=i.finish(),d&&(c.resourceTiming={},c.resourceTiming[t.source]=JSON.parse(JSON.stringify(d)))),s(null,c)})}},s.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},s.prototype.reloadTile=function(e,n){var s=this.loaded,o=e.uid;return s&&s[o]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},s.prototype.loadGeoJSON=function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(t.data))}catch{return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},s.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},s.prototype.getClusterExpansionZoom=function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}},s.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}},s.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}},s}(o),t=function(t){var n=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:o,geojson:H},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}},t.prototype.setReferrer=function(e,t){this.referrer=t},t.prototype.setImages=function(e,t,n){for(o in this.availableImages[e]=t,this.workerSources[e]){var o,i,s=this.workerSources[e][o];for(i in s)s[i].availableImages=t}n()},t.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},t.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},t.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},t.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},t.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},t.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},t.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},t.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},t.prototype.removeSource=function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var s=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==s.removeSource?s.removeSource(t,n):n()}},t.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},t.prototype.syncRTLPluginState=function(t,n,s){try{e.plugin.setState(n);var i,o=e.plugin.getPluginURL();e.plugin.isLoaded()&&!e.plugin.isParsed()&&o!=null&&(this.self.importScripts(o),i=e.plugin.isParsed(),s(i?void 0:new Error("RTL Text Plugin failed to import scripts from "+o),i))}catch(e){s(e.toString())}},t.prototype.getAvailableImages=function(e){var t=this.availableImages[e];return t||(t=[]),t},t.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new l),t},t.prototype.getWorkerSource=function(e,t,n){var s,o=this;return(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n])&&(s={send:function(t,n,s){o.actor.send(t,n,s,e)}},this.workerSources[e][t][n]=new this.workerSourceTypes[t](s,this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][n]},t.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new c),this.demWorkerSources[e][t]},t.prototype.enforceCacheSizeLimit=function(t,n){e.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new t(self)),t}),s(0,function(e){var Lt=e.createCommonjsModule(function(e){function t(e){return!s(e)}function s(e){return"undefined"!=typeof window&&"undefined"!=typeof document?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,s=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(s);try{t=new Worker(n),e=!0}catch{e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t,n,e=document.createElement("canvas");return e.width=e.height=1,t=e.getContext("2d"),!!t&&(n=t.getImageData(0,0,1,1),n&&n.width===e.width)}()?(s=e&&e.failIfMajorPerformanceCaveat,void 0===n[s]&&(n[s]=function(e){var s,n=function(e){var n=document.createElement("canvas"),s=Object.create(t.webGLContextAttributes);return s.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",s)||n.probablySupportsContext("experimental-webgl",s):n.supportsContext?n.supportsContext("webgl",s)||n.supportsContext("experimental-webgl",s):n.getContext("webgl",s)||n.getContext("experimental-webgl",s)}(e);return!!n&&(s=n.createShader(n.VERTEX_SHADER),!!s&&!n.isContextLost()&&(n.shaderSource(s,"void main() {}"),n.compileShader(s),!0===n.getShaderParameter(s,n.COMPILE_STATUS)))}(s)),n[s]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var s}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=s);var n={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),t={create:function(t,n,s){var o=e.window.document.createElement(t);return void 0!==n&&(o.className=n),s&&s.appendChild(o),o},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},W=e.window.document&&e.window.document.documentElement.style;function En(e){if(!W)return e[0];for(var t=0;t<e.length;t++)if(e[t]in W)return e[t];return e[0]}oe=En(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),t.disableDrag=function(){W&&oe&&(xn=W[oe],W[oe]="none")},t.enableDrag=function(){W&&oe&&(W[oe]=xn)},wn=En(["transform","WebkitTransform"]),t.setTransform=function(e,t){e.style[wn]=t},he=!1;try{fe=Object.defineProperty({},"passive",{get:function(){he=!0}}),e.window.addEventListener("test",fe,fe),e.window.removeEventListener("test",fe,fe)}catch{he=!1}t.addEventListener=function(e,t,n,s){void 0===s&&(s={}),"passive"in s&&he?e.addEventListener(t,n,s):e.addEventListener(t,n,s.capture)},t.removeEventListener=function(e,t,n,s){void 0===s&&(s={}),"passive"in s&&he?e.removeEventListener(t,n,s):e.removeEventListener(t,n,s.capture)},Me=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",Me,!0)};function ri(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}t.suppressClick=function(){e.window.addEventListener("click",Me,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",Me,!0)},0)},t.mousePos=function(t,n){var s=t.getBoundingClientRect();return new e.Point(n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop)},t.touchPos=function(t,n){for(var o=t.getBoundingClientRect(),i=[],s=0;s<n.length;s++)i.push(new e.Point(n[s].clientX-o.left-t.clientLeft,n[s].clientY-o.top-t.clientTop));return i},t.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},t.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var si=function(t){function n(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(t=0,n=this.requestors;t<n.length;t+=1){var t,n,s=n[t],o=s.ids,i=s.callback;this._notify(o,i)}this.requestors=[]}},n.prototype.getImage=function(e){return this.images[e]},n.prototype.addImage=function(e,t){this._validate(e,t)&&(this.images[e]=t)},n.prototype._validate=function(t,n){var s=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),s=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),s=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),s=!1),s},n.prototype._validateStretch=function(e,t){if(!e)return!0;for(var n,o=0,s=0,i=e;s<i.length;s+=1){if(n=i[s],n[0]<o||n[1]<n[0]||t<n[1])return!1;o=n[1]}return!0},n.prototype._validateContent=function(e,t){return!e||!(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1])},n.prototype.updateImage=function(e,t){var n=this.images[e];t.version=n.version+1,this.images[e]=t,this.updatedImages[e]=!0},n.prototype.removeImage=function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(e,t){if(n=!0,!this.isLoaded())for(var n,i,s=0,o=e;s<o.length;s+=1)i=o[s],this.images[i]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},n.prototype._notify=function(t,n){for(var s,o,a={},i=0,r=t;i<r.length;i+=1)o=r[i],this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o})),s=this.images[o],s?a[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.');n(null,a)},n.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},n.prototype.getPattern=function(t){var o,i,s=this.patterns[t],n=this.getImage(t);return n?s&&s.position.version===n.version?s.position:(s?s.position.version=n.version:(o={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new e.ImagePosition(o,n),this.patterns[t]={bin:o,position:i}),this._updatePatternAtlas(),this.patterns[t].position):null},n.prototype.bind=function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){r=[];for(m in this.patterns)r.push(this.patterns[m].bin);var l=e.potpack(r),h=l.w,u=l.h,n=this.atlasImage;for(d in n.resize({width:h||1,height:u||1}),this.patterns){var r,d,m,c=this.patterns[d].bin,a=c.x+1,i=c.y+1,t=this.images[d].data,o=t.width,s=t.height;e.RGBAImage.copy(t,n,{x:0,y:0},{x:a,y:i},{width:o,height:s}),e.RGBAImage.copy(t,n,{x:0,y:s-1},{x:a,y:i-1},{width:o,height:1}),e.RGBAImage.copy(t,n,{x:0,y:0},{x:a,y:i+s},{width:o,height:1}),e.RGBAImage.copy(t,n,{x:o-1,y:0},{x:a-1,y:i},{width:1,height:s}),e.RGBAImage.copy(t,n,{x:0,y:0},{x:a+o,y:i},{width:1,height:s})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(e){for(var t,s,n=0,o=e;n<o.length;n+=1)t=o[n],this.callbackDispatchedThisFrame[t]||(this.callbackDispatchedThisFrame[t]=!0,s=this.images[t],ri(s)&&this.updateImage(t,s))},n}(e.Evented),mn=Xe,ni=Xe,ge=1e20;function Xe(e,t,n,s,o,i){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=s||.25,this.fontFamily=o||"sans-serif",this.fontWeight=i||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function on(e,t,n,s,o,i,a){for(var r,c=0;c<t;c++){for(r=0;r<n;r++)s[r]=e[r*t+c];for(sn(s,o,i,a,n),r=0;r<n;r++)e[r*t+c]=o[r]}for(r=0;r<n;r++){for(c=0;c<t;c++)s[c]=e[r*t+c];for(sn(s,o,i,a,t),c=0;c<t;c++)e[r*t+c]=Math.sqrt(o[c])}}function sn(e,t,n,s,o){n[0]=0,s[0]=-ge,s[1]=+ge;for(var r,a=1,i=0;a<o;a++){for(r=(e[a]+a*a-(e[n[i]]+n[i]*n[i]))/(2*a-2*n[i]);r<=s[i];)i--,r=(e[a]+a*a-(e[n[i]]+n[i]*n[i]))/(2*a-2*n[i]);n[++i]=a,s[i]=r,s[i+1]=+ge}for(a=0,i=0;a<o;a++){for(;s[i+1]<a;)i++;t[a]=(a-n[i])*(a-n[i])+e[n[i]]}}Xe.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var n,o,i=this.ctx.getImageData(0,0,this.size,this.size),s=new Uint8ClampedArray(this.size*this.size),t=0;t<this.size*this.size;t++)n=i.data[4*t+3]/255,this.gridOuter[t]=1===n?0:0===n?ge:Math.pow(Math.max(0,.5-n),2),this.gridInner[t]=1===n?ge:0===n?0:Math.pow(Math.max(0,n-.5),2);for(on(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),on(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),t=0;t<this.size*this.size;t++)o=this.gridOuter[t]-this.gridInner[t],s[t]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))));return s},mn.default=ni,N=function(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}},N.prototype.setURL=function(e){this.url=e},N.prototype.getGlyphs=function(t,n){var o,i,r,c,s=this,a=[];for(r in t)for(o=0,i=t[r];o<i.length;o+=1)c=i[o],a.push({stack:r,id:c});e.asyncAll(a,function(e,t){var a,r,c,i=e.stack,o=e.id,n=s.entries[i];if(n||(n=s.entries[i]={glyphs:{},requests:{},ranges:{}}),r=n.glyphs[o],void 0===r){if(r=s._tinySDF(n,i,o))return n.glyphs[o]=r,void t(null,{stack:i,id:o,glyph:r});a=Math.floor(o/256),256*a>65535?t(new Error("glyphs > 65535 not supported")):n.ranges[a]?t(null,{stack:i,id:o,glyph:r}):(c=n.requests[a],c||(c=n.requests[a]=[],N.loadGlyphRange(i,a,s.url,s.requestManager,function(e,t){if(t){for(o in t)s._doesCharSupportLocalGlyph(+o)||(n.glyphs[+o]=t[+o]);n.ranges[a]=!0}for(var o,i=0,r=c;i<r.length;i+=1)(0,r[i])(e,t);delete n.requests[a]})),c.push(function(e,n){e?t(e):n&&t(null,{stack:i,id:o,glyph:n[o]||null})}))}else t(null,{stack:i,id:o,glyph:r})},function(e,t){if(e)n(e);else if(t){for(var a={},o=0,r=t;o<r.length;o+=1){var i=r[o],c=i.stack,l=i.id,s=i.glyph;(a[c]||(a[c]={}))[l]=s&&{id:s.id,bitmap:s.bitmap.clone(),metrics:s.metrics}}n(null,a)}})},N.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))},N.prototype._tinySDF=function(t,n,s){var o,i,a=this.localIdeographFontFamily;if(a&&this._doesCharSupportLocalGlyph(s))return i=t.tinySDF,i||(o="400",/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),i=t.tinySDF=new N.TinySDF(24,3,8,.25,a,o)),{id:s,bitmap:new e.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(s))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}},N.loadGlyphRange=function(t,n,s,o,i){var a=256*n,r=a+255,c=o.transformRequest(o.normalizeGlyphsURL(s).replace("{fontstack}",t).replace("{range}",a+"-"+r),e.ResourceType.Glyphs);e.getArrayBuffer(c,function(t,n){if(t)i(t);else if(n){for(var o,a={},s=0,r=e.parseGlyphPBF(n);s<r.length;s+=1)o=r[s],a[o.id]=o;i(null,a)}})},N.TinySDF=mn,Se=function(){this.specification=e.styleSpec.light.position},Se.prototype.possiblyEvaluate=function(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))},Se.prototype.interpolate=function(t,n,s){return{x:e.number(t.x,n.x,s),y:e.number(t.y,n.y,s),z:e.number(t.z,n.z,s)}};var ti=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new Se,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),ei="-transition",Qo=function(t){function n(n){t.call(this),this._transitionable=new e.Transitionable(ti),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(t,n){if(void 0===n&&(n={}),!this._validate(e.validateLight,t,n))for(s in t){var s,o=t[s];e.endsWith(s,ei)?this._transitionable.setTransition(s.slice(0,-11),o):this._transitionable.setValue(s,o)}},n.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},n.prototype._validate=function(t,n,s){return(!s||!1!==s.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},n}(e.Evented),Y=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Y.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]},Y.prototype.getDashRanges=function(e,t,n){var o,c,l,i=[],a=e.length%2==1?-e[e.length-1]*n:0,r=e[0]*n,s=!0;i.push({left:a,right:r,isDash:s,zeroLength:0===e[0]});for(c=e[0],o=1;o<e.length;o++)s=!s,l=e[o],a=c*n,r=(c+=l)*n,i.push({left:a,right:r,isDash:s,zeroLength:0===l});return i},Y.prototype.addRoundDash=function(e,t,n){for(r=t/2,i=-n;i<=n;i++)for(var i,r,l,f=this.nextRow+n+i,p=this.width*f,u=0,o=e[u],s=0;s<this.width;s++){s/o.right>1&&(o=e[++u]);var h=Math.abs(s-o.left),m=Math.abs(s-o.right),a=Math.min(h,m),d=void 0,c=i/n*(r+1);o.isDash?(l=r-Math.abs(c),d=Math.sqrt(a*a+l*l)):d=r-Math.sqrt(a*a+c*c),this.data[p+s]=Math.max(0,Math.min(255,d+128))}},Y.prototype.addRegularDash=function(e){for(t=e.length-1;t>=0;--t)o=e[t],i=e[t+1],o.zeroLength?e.splice(t,1):i&&i.isDash===o.isDash&&(i.left=o.left,e.splice(t,1));a=e[0],r=e[e.length-1],a.isDash===r.isDash&&(a.left=r.left-this.width,r.right=a.right+this.width);for(var t,o,i,a,r,h=this.width*this.nextRow,c=0,s=e[c],n=0;n<this.width;n++){n/s.right>1&&(s=e[++c]);var d=Math.abs(n-s.left),u=Math.abs(n-s.right),l=Math.min(d,u),m=s.isDash?l:-l;this.data[h+n]=Math.max(0,Math.min(255,m+128))}},Y.prototype.addDash=function(t,n){var s,i,a,r,l,o=n?7:0,c=2*o+1;if(this.nextRow+c>this.height)return e.warnOnce("LineAtlas out of space"),null;for(s=0,i=0;i<t.length;i++)s+=t[i];return 0!==s&&(a=this.width/s,r=this.getDashRanges(t,this.width,a),n?this.addRoundDash(r,a,o):this.addRegularDash(r)),l={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:s},this.nextRow+=c,this.dirty=!0,l},Y.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))},te=function t(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var i,r,a=this.workerPool.acquire(this.id),o=0;o<a.length;o++)r=a[o],i=new t.Actor(r,s,this.id),i.name="Worker "+o,this.actors.push(i)};function Jt(t,n,s){var o=function(o,i){if(o)return s(o);if(i){var a=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(a.vectorLayers=i.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(e){return e.id})),a.tiles=n.canonicalizeTileset(a,t.url),s(null,a)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),o):e.browser.frame(function(){return o(null,t)})}te.prototype.broadcast=function(t,n,s){s=s||function(){},e.asyncAll(this.actors,function(e,s){e.send(t,n,s)},s)},te.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},te.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},te.Actor=e.Actor,de=function(t,n,s){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=s||24},de.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},de.prototype.contains=function(t){var n=Math.pow(2,t.z),s=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),o=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),i=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=s&&t.x<i&&t.y>=o&&t.y<a};var Xo=function(t){function n(n,s,o,i){if(t.call(this),this.id=n,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(s,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Jt(this._options,this.map._requestManager,function(n,s){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):s&&(e.extend(t,s),s.bounds&&(t.tileBounds=new de(s.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(s.tiles,t.map._requestManager._customAccessToken),e.postMapLoadEvent(s.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setSourceProperty=function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},n.prototype.setTiles=function(e){var t=this;return this.setSourceProperty(function(){t._options.tiles=e}),this},n.prototype.setUrl=function(e){var t=this;return this.setSourceProperty(function(){t.url=e,t._options.url=e}),this},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.loadTile=function(t,n){var i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),s={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(s,o){return delete t.request,t.aborted?n(null):s&&404!==s.status?n(s):(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}s.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",s,o.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",s,o.bind(this)))},n.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(e.Evented),Zt=function(t){function n(n,s,o,i){t.call(this),this.id=n,this.dispatcher=o,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},s),e.extend(this,e.pick(s,["url","scheme","tileSize"]))}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Jt(this._options,this.map._requestManager,function(n,s){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):s&&(e.extend(t,s),s.bounds&&(t.tileBounds=new de(s.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(s.tiles),e.postMapLoadEvent(s.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.loadTile=function(t,n){var s=this,o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(o,e.ResourceType.Tile),function(o,i){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(o)t.state="errored",n(o);else if(i){s.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var r=s.map.painter.context,a=r.gl;t.texture=s.map.painter.getTileTexture(i.width),t.texture?t.texture.update(i,{useMipmap:!0}):(t.texture=new e.Texture(r,i,a.RGBA,{useMipmap:!0}),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(s.dispatcher),n(null)}})},n.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},n.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},n.prototype.hasTransition=function(){return!1},n}(e.Evented),Yo=function(t){function n(n,s,o,i){t.call(this,n,s,o,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(t,n){var s=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function o(e,s){e&&(t.state="errored",n(e)),s&&(t.dem=s,t.needsHillshadePrepare=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(s,e.ResourceType.Tile),function(s,i){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(s)t.state="errored",n(s);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=e.window.ImageBitmap&&i instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?i:e.browser.getImageData(i,1),r={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:a,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",r,o.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},n.prototype._getNeighboringTiles=function(t){var n=t.canonical,o=Math.pow(2,n.z),i=(n.x-1+o)%o,a=0===n.x?t.wrap-1:t.wrap,r=(n.x+1+o)%o,c=n.x+1===o?t.wrap+1:t.wrap,s={};return s[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},s[new e.OverscaledTileID(t.overscaledZ,c,n.z,r,n.y).key]={backfilled:!1},n.y>0&&(s[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},s[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},s[new e.OverscaledTileID(t.overscaledZ,c,n.z,r,n.y-1).key]={backfilled:!1}),n.y+1<o&&(s[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},s[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},s[new e.OverscaledTileID(t.overscaledZ,c,n.z,r,n.y+1).key]={backfilled:!1}),s},n.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})},n}(Zt),qo=function(t){function n(n,s,o,i){t.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(i),this._data=s.data,this._options=e.extend({},s),this._collectResourceTiming=s.collectResourceTiming,this._resourceTiming=[],void 0!==s.maxzoom&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;var a=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(void 0!==s.buffer?s.buffer:128)*a,tolerance:(void 0!==s.tolerance?s.tolerance:.375)*a,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:void 0!==s.clusterMaxZoom?Math.min(s.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:e.EXTENT,radius:(s.clusterRadius||50)*a,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)t.fire(new e.ErrorEvent(n));else{var s={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(s.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",s))}})},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)n.fire(new e.ErrorEvent(t));else{var s={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(s.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",s))}}),this},n.prototype.getClusterExpansionZoom=function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this},n.prototype.getClusterChildren=function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this},n.prototype.getClusterLeaves=function(e,t,n,s){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},s),this},n.prototype._updateWorkerData=function(t){n=this,this._loaded=!1;var n,s=e.extend({},this.workerOptions),o=this._data;"string"==typeof o?(s.request=this.map._requestManager.transformRequest(e.browser.resolveURL(o),e.ResourceType.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(o),this.actor.send(this.type+".loadData",s,function(e,o){n._removed||o&&o.abandoned||(n._loaded=!0,o&&o.resourceTiming&&o.resourceTiming[n.id]&&(n._resourceTiming=o.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:s.source},null),t(e))})},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(t,n){var o,i=this,s=t.actor?"reloadTile":"loadTile";t.actor=this.actor,o={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},t.request=this.actor.send(s,o,function(e,o){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(o,i.map.painter,"reloadTile"===s),n(null))})},n.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(e.Evented),Ke=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ye=function(t){function n(e,n,s,o){t.call(this),this.id=e,this.dispatcher=s,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(t,n){var s=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(o,i){s._loaded=!0,o?s.fire(new e.ErrorEvent(o)):i&&(s.image=i,t&&(s.coordinates=t),n&&n(),s._finishLoading())})},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,function(){t.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setCoordinates=function(t){var n,s,o=this;return this.coordinates=t,s=t.map(e.MercatorCoordinate.fromLngLat),this.tileID=function(t){for(var n,a=1/0,s=1/0,o=-1/0,i=-1/0,r=0,c=t;r<c.length;r+=1)n=c[r],a=Math.min(a,n.x),s=Math.min(s,n.y),o=Math.max(o,n.x),i=Math.max(i,n.y);var u=o-a,h=i-s,m=Math.max(u,h),l=Math.max(0,Math.floor(-Math.log(m)/Math.LN2)),d=Math.pow(2,l);return new e.CanonicalTileID(l,Math.floor((a+o)/2*d),Math.floor((s+i)/2*d))}(s),this.minzoom=this.maxzoom=this.tileID.z,n=s.map(function(e){return o.tileID.getTilePoint(e)._round()}),this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t,o,n=this.map.painter.context,s=n.gl;for(o in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Ke.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles)t=this.tiles[o],"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}},n.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(e.Evented),Ko=function(t){function n(e,n,s,o){t.call(this,e,n,s,o),this.roundZoom=!0,this.type="video",this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){t=this,this._loaded=!1,s=this.options,this.urls=[];for(var t,s,i,n=0,o=s.urls;n<o.length;n+=1)i=o[n],this.urls.push(this.map._requestManager.transformRequest(i,e.ResourceType.Source).url);e.getVideo(this.urls,function(n,s){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):s&&(t.video=s,t.video.loop=!0,t.video.addEventListener("playing",function(){t.map.triggerRepaint()}),t.map&&t.video.play(),t._finishLoading())})},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=t}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var n,o,s=this.map.painter.context,t=s.gl;for(o in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Ke.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(s,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles)n=this.tiles[o],"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(ye),Uo=function(t){function n(n,s,o,i){t.call(this,n,s,o,i),s.coordinates?Array.isArray(s.coordinates)&&4===s.coordinates.length&&!s.coordinates.some(function(e){return!Array.isArray(e)||2!==e.length||e.some(function(e){return"number"!=typeof e})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "coordinates"'))),s.animate&&"boolean"!=typeof s.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),s.canvas?"string"==typeof s.canvas||s.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=s,this.animate=void 0===s.animate||s.animate}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){if(t=!1,this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var t,n,i,s=this.map.painter.context,o=s.gl;for(i in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Ke.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(s,this.canvas,o.RGBA,{premultiply:!0}),this.tiles)n=this.tiles[i],"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t,e=0,n=[this.canvas.width,this.canvas.height];e<n.length;e+=1)if(t=n[e],isNaN(t)||t<=0)return!0;return!1},n}(ye),at={vector:Xo,raster:Zt,"raster-dem":Yo,geojson:qo,video:Ko,image:ye,canvas:Uo};function Wo(t,n){var s=e.identity([]);return e.translate(s,s,[1,1,0]),e.scale(s,s,[.5*t.width,.5*t.height,1]),e.multiply(s,s,t.calculatePosMatrix(n.toUnwrapped()))}function $o(e,t,n,s,o,i){var a,r,f,m=function(e,t,n){if(e){for(var s,i,r,o=0,a=e;o<a.length;o+=1)if(s=t[a[o]],s&&s.source===n&&"fill-extrusion"===s.type)return!0}else for(r in t)if(i=t[r],i.source===n&&"fill-extrusion"===i.type)return!0;return!1}(o&&o.layers,t,e.id),h=i.maxPitchScaleFactor(),l=e.tilesIn(s,h,m);l.sort(Gt);for(var d=[],c=0,u=l;c<u.length;c+=1)a=u[c],d.push({wrappedTileID:a.tileID.wrapped().key,queryResults:a.tile.queryRenderedFeatures(t,n,e._state,a.queryGeometry,a.cameraQueryGeometry,a.scale,o,i,h,Wo(e.transform,a.tileID))});r=function(e){for(var i={},u={},o=0,l=e;o<l.length;o+=1){var c=l[o],a=c.queryResults,r=c.wrappedTileID,m=u[r]=u[r]||{};for(t in a)for(var t,n,f=a[t],d=m[t]=m[t]||{},p=i[t]=i[t]||[],s=0,h=f;s<h.length;s+=1)n=h[s],d[n.featureIndex]||(d[n.featureIndex]=!0,p.push(n))}return i}(d);for(f in r)r[f].forEach(function(t){var n=t.feature,s=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=s});return r}function Gt(e,t){var n=e.tileID,s=t.tileID;return n.overscaledZ-s.overscaledZ||n.canonical.y-s.canonical.y||n.wrap-s.wrap||n.canonical.x-s.canonical.x}w=function(e,t){this.max=e,this.onRemove=t,this.reset()},w.prototype.reset=function(){for(s in this.data)for(var e,s,t=0,n=this.data[s];t<n.length;t+=1)e=n[t],e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this},w.prototype.add=function(e,t,n){var o,i,a=this,s=e.wrapped().key;return void 0===this.data[s]&&(this.data[s]=[]),o={value:t,timeout:void 0},(void 0!==n&&(o.timeout=setTimeout(function(){a.remove(e,o)},n)),this.data[s].push(o),this.order.push(s),this.order.length>this.max)&&(i=this._getAndRemoveByKey(this.order[0]),i&&this.onRemove(i)),this},w.prototype.has=function(e){return e.wrapped().key in this.data},w.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},w.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},w.prototype.getByKey=function(e){var t=this.data[e];return t?t[0].value:null},w.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},w.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,o=void 0===t?0:this.data[n].indexOf(t),s=this.data[n][o];return this.data[n].splice(o,1),s.timeout&&clearTimeout(s.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(s.value),this.order.splice(this.order.indexOf(n),1),this},w.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this},w.prototype.filter=function(e){n=[];for(c in this.data)for(var t,n,s,i,a,c,o=0,r=this.data[c];o<r.length;o+=1)i=r[o],e(i.value)||n.push(i);for(t=0,a=n;t<a.length;t+=1)s=a[t],this.remove(s.value.tileID,s)},me=function(e,t,n){this.context=e;var s=e.gl;this.buffer=s.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?s.DYNAMIC_DRAW:s.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer},me.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},me.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},me.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},An={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},q=function(e,t,n,s){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=s,this.context=e;var o=e.gl;this.buffer=o.createBuffer(),e.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer},q.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},q.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},q.prototype.enableAttributes=function(e,t){for(n=0;n<this.attributes.length;n++){var n,o=this.attributes[n],s=t.attributes[o.name];void 0!==s&&e.enableVertexAttribArray(s)}},q.prototype.setVertexAttribPointers=function(e,t,n){for(s=0;s<this.attributes.length;s++){var s,o=this.attributes[s],i=t.attributes[o.name];void 0!==i&&e.vertexAttribPointer(i,o.components,e[An[o.type]],!1,this.itemSize,o.offset+this.itemSize*(n||0))}},q.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},n=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1},n.prototype.get=function(){return this.current},n.prototype.set=function(){},n.prototype.getDefault=function(){return this.default},n.prototype.setDefault=function(){this.set(this.default)};var n,s,o,i,a,r,l,d,u,h,m,p,g,v,b,j,_,w,x,C,A,S,M,F,T,z,D,N,R,P,H,I,B,V,$,U,K,q,X,Q,J,xn,oe,wn,he,fe,Me,Se,te,de,me,An,Vo=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(n),Bo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(n),Io=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(n),Ro=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(n),Lo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(n),Do=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(n),To=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(n),Fo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(n),Mo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(n),So=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(n),Ao=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(n),ko=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(n),Eo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(n),Co=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(n),xo=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(n),Oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(n),wo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(n),_o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(n),yo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(n),jo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(n),bo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(n),vo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(n),po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(n),ho=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(n),uo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(n),lo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(n),co=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(n),ro=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(n),ao=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(n),io=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(n),oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(n),Bt=function(e){function t(t,n){e.call(this,t),this.context=t,this.parent=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t}(n),so=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(Bt),no=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(Bt),Rt=function(e,t,n,s){this.context=e,this.width=t,this.height=n;var i=e.gl,o=this.framebuffer=i.createFramebuffer();this.colorAttachment=new so(e,o),s&&(this.depthAttachment=new no(e,o))},xe,ee,Le,je,Tt,Re,gt,$e,be,Qe,le,Pt,Ce,tt,re,ve,On,_e,ht,fn,ln,qe,Ae,se,ze,Vt,Wt,lt,ae,pe,Ut,Kt,Yt,Ee,ce,mt;Rt.prototype.destroy=function(){var t,e=this.context.gl,n=this.colorAttachment.get();(n&&e.deleteTexture(n),this.depthAttachment)&&(t=this.depthAttachment.get(),t&&e.deleteRenderbuffer(t)),e.deleteFramebuffer(this.framebuffer)},s=function(e,t,n){this.func=e,this.mask=t,this.range=n},s.ReadOnly=!1,s.ReadWrite=!0,s.disabled=new s(519,s.ReadOnly,[0,1]),xe=7680,d=function(e,t,n,s,o,i){this.test=e,this.ref=t,this.mask=n,this.fail=s,this.depthFail=o,this.pass=i},d.disabled=new d({func:519,mask:0},0,0,xe,xe,xe),h=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n},h.Replace=[1,0],h.disabled=new h(h.Replace,e.Color.transparent,[!1,!1,!1,!1]),h.unblended=new h(h.Replace,e.Color.transparent,[!0,!0,!0,!0]),h.alphaBlended=new h([1,771],e.Color.transparent,[!0,!0,!0,!0]),l=function(e,t,n){this.enable=e,this.mode=t,this.frontFace=n},l.disabled=new l(!1,1029,2305),l.backCCW=new l(!0,1029,2305),j=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Vo(this),this.clearDepth=new Bo(this),this.clearStencil=new Io(this),this.colorMask=new Ro(this),this.depthMask=new Lo(this),this.stencilMask=new Do(this),this.stencilFunc=new To(this),this.stencilOp=new Fo(this),this.stencilTest=new Mo(this),this.depthRange=new So(this),this.depthTest=new Ao(this),this.depthFunc=new ko(this),this.blend=new Eo(this),this.blendFunc=new Co(this),this.blendColor=new xo(this),this.blendEquation=new Oo(this),this.cullFace=new wo(this),this.cullFaceSide=new _o(this),this.frontFace=new yo(this),this.program=new jo(this),this.activeTexture=new bo(this),this.viewport=new vo(this),this.bindFramebuffer=new po(this),this.bindRenderbuffer=new ho(this),this.bindTexture=new uo(this),this.bindVertexBuffer=new lo(this),this.bindElementBuffer=new co(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ro(this),this.pixelStoreUnpack=new ao(this),this.pixelStoreUnpackPremultiplyAlpha=new io(this),this.pixelStoreUnpackFlipY=new oo(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)},j.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},j.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},j.prototype.createIndexBuffer=function(e,t){return new me(this,e,t)},j.prototype.createVertexBuffer=function(e,t,n){return new q(this,e,t,n)},j.prototype.createRenderbuffer=function(e,t,n){var s=this.gl,o=s.createRenderbuffer();return this.bindRenderbuffer.set(o),s.renderbufferStorage(s.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),o},j.prototype.createFramebuffer=function(e,t,n){return new Rt(this,e,t,n)},j.prototype.clear=function(e){var s=e.color,o=e.depth,t=this.gl,n=0;s&&(n|=t.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),void 0!==o&&(n|=t.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),t.clear(n)},j.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},j.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},j.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},j.prototype.setColorMode=function(t){e.deepEqual(t.blendFunction,h.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},j.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)},ee=function(t){function n(n,s,o){var i=this;t.call(this),this.id=n,this.dispatcher=o,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=function(t,n,s,o){var i=new at[n.type](t,n,s,o);if(i.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return e.bindAll(["load","abort","unload","serialize","prepare"],i),i}(n,s,o,this),this._tiles={},this._cache=new w(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},n.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(t in this._tiles){var t,e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},n.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},n.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(e){for(n in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n,t=this._tiles[n];t.upload(e),t.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return e.values(this._tiles).map(function(e){return e.tileID}).sort(Nt).map(function(e){return e.key})},n.prototype.getRenderableIds=function(t){var o,s=this,n=[];for(o in this._tiles)this._isIdRenderable(o,t)&&n.push(this._tiles[o]);return t?n.sort(function(t,n){var o=t.tileID,i=n.tileID,a=new e.Point(o.canonical.x,o.canonical.y)._rotate(s.transform.angle),r=new e.Point(i.canonical.x,i.canonical.y)._rotate(s.transform.angle);return o.overscaledZ-i.overscaledZ||r.y-a.y||r.x-a.x}).map(function(e){return e.tileID.key}):n.map(function(e){return e.tileID}).sort(Nt).map(function(e){return e.key})},n.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},n.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},n.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},n.prototype._tileLoaded=function(t,n,s,o){if(o)return t.state="errored",void(404!==o.status?this._source.fire(new e.ErrorEvent(o,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===s&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},n.prototype._backfillDEM=function(e){for(var n,s,o=this.getRenderableIds(),t=0;t<o.length;t++)n=o[t],e.neighboringTiles&&e.neighboringTiles[n]&&(s=this.getTileByID(n),i(e,s),i(s,e));function i(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,o=t.tileID.canonical.y-e.tileID.canonical.y,s=Math.pow(2,e.tileID.canonical.z),i=t.tileID.key;0===n&&0===o||Math.abs(o)>1||(Math.abs(n)>1&&(1===Math.abs(n+s)?n+=s:1===Math.abs(n-s)&&(n-=s)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,o),e.neighboringTiles&&e.neighboringTiles[i]&&(e.neighboringTiles[i].backfilled=!0)))}},n.prototype.getTile=function(e){return this.getTileByID(e.key)},n.prototype.getTileByID=function(e){return this._tiles[e]},n.prototype._retainLoadedChildren=function(e,t,n,s){for(c in this._tiles){var i,a,r,c,o=this._tiles[c];if(!(s[c]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)){for(i=o.tileID;o&&o.tileID.overscaledZ>t+1;)r=o.tileID.scaledTo(o.tileID.overscaledZ-1),(o=this._tiles[r.key])&&o.hasData()&&(i=r);for(a=i;a.overscaledZ>t;)if(e[(a=a.scaledTo(a.overscaledZ-1)).key]){s[i.key]=i;break}}}},n.prototype.findLoadedParent=function(e,t){if(e.key in this._loadedParentTiles)return n=this._loadedParentTiles[e.key],n&&n.tileID.overscaledZ>=t?n:null;for(s=e.overscaledZ-1;s>=t;s--){var n,s,i=e.scaledTo(s),o=this._getLoadedTile(i);if(o)return o}},n.prototype._getLoadedTile=function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)},n.prototype.updateCacheSize=function(e){var n=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(e.height/this._source.tileSize)+1),t=Math.floor(5*n),s="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,t):t;this._cache.setMaxSize(s)},n.prototype.handleWrapJump=function(e){var t,n,s,i,a,r,c=(e-(void 0===this._prevLng?e:this._prevLng))/360,o=Math.round(c);if(this._prevLng=e,o){n={};for(r in this._tiles)t=this._tiles[r],t.tileID=t.tileID.unwrapTo(t.tileID.wrap+o),n[t.tileID.key]=t;for(i in this._tiles=n,this._timers)clearTimeout(this._timers[i]),delete this._timers[i];for(s in this._tiles)a=this._tiles[s],this._setTileReloadTimer(s,a)}},n.prototype.update=function(t){if(j=this,this.transform=t,this._sourceLoaded&&!this._paused){this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?o=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(o=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(o=o.filter(function(e){return j._source.hasTile(e)}))):o=[];var o,i,a,c,l,m,f,j,y,r=t.coveringZoomLevel(this._source),w=Math.max(r-n.maxOverzooming,this._source.minzoom),_=Math.max(r+n.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(o,r);if(zt(this._source.type)){for(var u={},b={},h=0,v=Object.keys(s);h<v.length;h+=1){var p=v[h],g=s[p],d=this._tiles[p];d&&!(d.fadeEndTime&&d.fadeEndTime<=e.browser.now())&&(a=this.findLoadedParent(g,w),a&&(this._addTile(a.tileID),u[a.tileID.key]=a.tileID),b[p]=g)}for(c in this._retainLoadedChildren(b,r,_,s),u)s[c]||(this._coveredTiles[c]=!0,s[c]=u[c])}for(y in s)this._tiles[y].clearFadeHold();for(l=0,f=e.keysDifference(this._tiles,s);l<f.length;l+=1)m=f[l],i=this._tiles[m],i.hasSymbolBuckets&&!i.holdingForFade()?i.setHoldDuration(this.map._fadeDuration):i.hasSymbolBuckets&&!i.symbolFadeFinished()||this._removeTile(m);this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},n.prototype._updateRetainedTiles=function(e,t){for(var o,i,a,r,c,l,d,u,m,f,p,g,s={},v={},y=Math.max(t-n.maxOverzooming,this._source.minzoom),_=Math.max(t+n.maxUnderzooming,this._source.minzoom),j={},h=0,b=e;h<b.length;h+=1)r=b[h],g=this._addTile(r),s[r.key]=r,g.hasData()||t<this._source.maxzoom&&(j[r.key]=r);this._retainLoadedChildren(j,t,_,s);for(u=0,m=e;u<m.length;u+=1)if(a=m[u],o=this._tiles[a.key],!o.hasData()){if(t+1>this._source.maxzoom){if(d=a.children(this._source.maxzoom)[0],f=this.getTile(d),f&&f.hasData()){s[d.key]=d;continue}}else if(c=a.children(this._source.maxzoom),s[c[0].key]&&s[c[1].key]&&s[c[2].key]&&s[c[3].key])continue;for(p=o.wasRequested(),l=a.overscaledZ-1;l>=y;--l){if(i=a.scaledTo(l),v[i.key])break;if(v[i.key]=!0,!(o=this.getTile(i))&&p&&(o=this._addTile(i)),o&&(s[i.key]=i,p=o.wasRequested(),o.hasData()))break}}return s},n.prototype._updateLoadedParentTileCache=function(){for(r in this._loadedParentTiles={},this._tiles){for(var t,n,o,a,r,i=[],s=void 0,e=this._tiles[r].tileID;e.overscaledZ>0;){if(e.key in this._loadedParentTiles){s=this._loadedParentTiles[e.key];break}if(i.push(e.key),o=e.scaledTo(e.overscaledZ-1),s=this._getLoadedTile(o))break;e=o}for(t=0,n=i;t<n.length;t+=1)a=n[t],this._loadedParentTiles[a]=s}},n.prototype._addTile=function(t){var s,n=this._tiles[t.key];return n||((n=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n))),s=Boolean(n),s||(n=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n?(n.uses++,this._tiles[t.key]=n,s||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null)},n.prototype._setTileReloadTimer=function(e,t){var n,s=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]),n=t.getExpiryTimeout(),n&&(this._timers[e]=setTimeout(function(){s._reloadTile(e,"expired"),delete s._timers[e]},n))},n.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},n.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},n.prototype.tilesIn=function(t,n,s){var j=this,r=[],o=this.transform;if(!o)return r;for(var i,a,g,b=s?o.getCameraQueryGeometry(t):t,v=t.map(function(e){return o.pointCoordinate(e)}),f=b.map(function(e){return o.pointCoordinate(e)}),m=this.getIds(),u=1/0,h=1/0,d=-1/0,l=-1/0,c=0,p=f;c<p.length;c+=1)i=p[c],u=Math.min(u,i.x),h=Math.min(h,i.y),d=Math.max(d,i.x),l=Math.max(l,i.y);for(g=function(t){if(s=j._tiles[m[t]],!s.holdingForFade()){var s,g,b,i=s.tileID,p=Math.pow(2,o.zoom-s.tileID.overscaledZ),a=n*s.queryPadding*e.EXTENT/s.tileSize/p,c=[i.getTilePoint(new e.MercatorCoordinate(u,h)),i.getTilePoint(new e.MercatorCoordinate(d,l))];c[0].x-a<e.EXTENT&&c[0].y-a<e.EXTENT&&c[1].x+a>=0&&c[1].y+a>=0&&(g=v.map(function(e){return i.getTilePoint(e)}),b=f.map(function(e){return i.getTilePoint(e)}),r.push({tile:s,tileID:i,queryGeometry:g,cameraQueryGeometry:b,scale:p}))}},a=0;a<m.length;a++)g(a);return r},n.prototype.getVisibleCoordinates=function(e){for(var n,i=this,s=this.getRenderableIds(e).map(function(e){return i._tiles[e].tileID}),t=0,o=s;t<o.length;t+=1)n=o[t],n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped());return s},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zt(this._source.type))for(n in this._tiles){var n,t=this._tiles[n];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=e.browser.now())return!0}return!1},n.prototype.setFeatureState=function(e,t,n){e=e||"_geojsonTileLayer",this._state.updateState(e,t,n)},n.prototype.removeFeatureState=function(e,t,n){e=e||"_geojsonTileLayer",this._state.removeFeatureState(e,t,n)},n.prototype.getFeatureState=function(e,t){return e=e||"_geojsonTileLayer",this._state.getState(e,t)},n.prototype.setDependencies=function(e,t,n){var s=this._tiles[e];s&&s.setDependencies(t,n)},n.prototype.reloadTilesForDependencies=function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter(function(n){return!n.hasDependency(e,t)})},n}(e.Evented);function Nt(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),s=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||s-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function zt(e){return"raster"===e||"image"===e||"video"===e}function eo(){return new e.window.Worker(mt.workerUrl)}ee.maxOverzooming=10,ee.maxUnderzooming=3,Le="mapboxgl_preloaded_worker_pool",D=function(){this.active={}},D.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<D.workerCount;)this.workers.push(new eo);return this.active[e]=!0,this.workers.slice()},D.prototype.release=function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},D.prototype.isPreloaded=function(){return!!this.active[Le]},D.prototype.numActive=function(){return Object.keys(this.active).length},Tt=Math.floor(e.browser.hardwareConcurrency/2);function Ft(){return je||(je=new D),je}function Js(t,n){var o,s={};for(o in t)"ref"!==o&&(s[o]=t[o]);return e.refProperties.forEach(function(e){e in n&&(s[e]=n[e])}),s}function Mt(e){e=e.slice();for(var t,s=Object.create(null),n=0;n<e.length;n++)s[e[n].id]=e[n];for(t=0;t<e.length;t++)"ref"in e[t]&&(e[t]=Js(e[t],s[e[t].ref]));return e}D.workerCount=Math.max(Math.min(Tt,6),1),i={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function St(e,t,n){n.push({command:i.addSource,args:[e,t[e]]})}function At(e,t,n){t.push({command:i.removeSource,args:[e]}),n[e]=!0}function Zs(e,t,n,s){At(e,n,s),St(e,t,n)}function Qs(t,n,s){var o;for(o in t[s])if(t[s].hasOwnProperty(o)&&"data"!==o&&!e.deepEqual(t[s][o],n[s][o]))return!1;for(o in n[s])if(n[s].hasOwnProperty(o)&&"data"!==o&&!e.deepEqual(t[s][o],n[s][o]))return!1;return!0}function Ne(t,n,s,o,i,a){var r;for(r in n=n||{},t=t||{})t.hasOwnProperty(r)&&(e.deepEqual(t[r],n[r])||s.push({command:a,args:[o,r,n[r],i]}));for(r in n)n.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(e.deepEqual(t[r],n[r])||s.push({command:a,args:[o,r,n[r],i]}))}function kt(e){return e.id}function Et(e,t){return e[t.id]=t,e}function Xs(t,n){if(!t)return[{command:i.setStyle,args:[n]}];s=[];try{if(!e.deepEqual(t.version,n.version))return[{command:i.setStyle,args:[n]}];e.deepEqual(t.center,n.center)||s.push({command:i.setCenter,args:[n.center]}),e.deepEqual(t.zoom,n.zoom)||s.push({command:i.setZoom,args:[n.zoom]}),e.deepEqual(t.bearing,n.bearing)||s.push({command:i.setBearing,args:[n.bearing]}),e.deepEqual(t.pitch,n.pitch)||s.push({command:i.setPitch,args:[n.pitch]}),e.deepEqual(t.sprite,n.sprite)||s.push({command:i.setSprite,args:[n.sprite]}),e.deepEqual(t.glyphs,n.glyphs)||s.push({command:i.setGlyphs,args:[n.glyphs]}),e.deepEqual(t.transition,n.transition)||s.push({command:i.setTransition,args:[n.transition]}),e.deepEqual(t.light,n.light)||s.push({command:i.setLight,args:[n.light]});var s,o,a={},r=[];!function(t,n,s,o){var a;for(a in n=n||{},t=t||{})t.hasOwnProperty(a)&&(n.hasOwnProperty(a)||At(a,s,o));for(a in n)n.hasOwnProperty(a)&&(t.hasOwnProperty(a)?e.deepEqual(t[a],n[a])||("geojson"===t[a].type&&"geojson"===n[a].type&&Qs(t,n,a)?s.push({command:i.setGeoJSONSourceData,args:[a,n[a].data]}):Zs(a,n,s,o)):St(a,n,s))}(t.sources,n.sources,r,a),o=[],t.layers&&t.layers.forEach(function(e){a[e.source]?s.push({command:i.removeLayer,args:[e.id]}):o.push(e)}),s=s.concat(r),function(t,n,s){n=n||[];var o,a,r,c,l,u,m,f=(t=t||[]).map(kt),h=n.map(kt),g=t.reduce(Et,{}),p=n.reduce(Et,{}),d=f.slice(),v=Object.create(null);for(l=0,u=0;l<f.length;l++)a=f[l],p.hasOwnProperty(a)?u++:(s.push({command:i.removeLayer,args:[a]}),d.splice(d.indexOf(a,u),1));for(l=0,u=0;l<h.length;l++)a=h[h.length-1-l],d[d.length-1-l]!==a&&(g.hasOwnProperty(a)?(s.push({command:i.removeLayer,args:[a]}),d.splice(d.lastIndexOf(a,d.length-u),1)):u++,m=d[d.length-l],s.push({command:i.addLayer,args:[p[a],m]}),d.splice(d.length-l,0,a),v[a]=!0);for(l=0;l<h.length;l++)if(c=g[a=h[l]],r=p[a],!v[a]&&!e.deepEqual(c,r))if(e.deepEqual(c.source,r.source)&&e.deepEqual(c["source-layer"],r["source-layer"])&&e.deepEqual(c.type,r.type)){for(o in Ne(c.layout,r.layout,s,a,null,i.setLayoutProperty),Ne(c.paint,r.paint,s,a,null,i.setPaintProperty),e.deepEqual(c.filter,r.filter)||s.push({command:i.setFilter,args:[a,r.filter]}),e.deepEqual(c.minzoom,r.minzoom)&&e.deepEqual(c.maxzoom,r.maxzoom)||s.push({command:i.setLayerZoomRange,args:[a,r.minzoom,r.maxzoom]}),c)c.hasOwnProperty(o)&&"layout"!==o&&"paint"!==o&&"filter"!==o&&"metadata"!==o&&"minzoom"!==o&&"maxzoom"!==o&&(0===o.indexOf("paint.")?Ne(c[o],r[o],s,a,o.slice(6),i.setPaintProperty):e.deepEqual(c[o],r[o])||s.push({command:i.setLayerProperty,args:[a,o,r[o]]}));for(o in r)r.hasOwnProperty(o)&&!c.hasOwnProperty(o)&&"layout"!==o&&"paint"!==o&&"filter"!==o&&"metadata"!==o&&"minzoom"!==o&&"maxzoom"!==o&&(0===o.indexOf("paint.")?Ne(c[o],r[o],s,a,o.slice(6),i.setPaintProperty):e.deepEqual(c[o],r[o])||s.push({command:i.setLayerProperty,args:[a,o,r[o]]}))}else s.push({command:i.removeLayer,args:[a]}),m=d[d.lastIndexOf(a)+1],s.push({command:i.addLayer,args:[r,m]})}(o,n.layers,s)}catch(e){console.warn("Unable to compute style diff:",e),s=[{command:i.setStyle,args:[n]}]}return s}Re=function(e,t){this.reset(e,t)},Re.prototype.reset=function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Re.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,s=this._distances[n],o=t*this.paddedLength+this.padding;s<o&&n<this._distances.length;)s=this._distances[++n];var i=n-1,a=this._distances[i],r=s-a,c=r>0?(o-a)/r:0;return this.points[i].mult(1-c).add(this.points[n].mult(c))},m=function(e,t,n){var s,o=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(s=0;s<this.xCellCount*this.yCellCount;s++)o.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};function et(t,n,s,o,i){var a=e.create();return n?(e.scale(a,a,[1/i,1/i,1]),s||e.rotateZ(a,a,o.angle)):e.multiply(a,o.labelPlaneMatrix,t),a}function Ct(t,n,s,o,i){if(n){var a=e.clone(t);return e.scale(a,a,[i,i,1]),s||e.rotateZ(a,a,-o.angle),a}return o.glCoordMatrix}function O(t,n){var o,s=[t.x,t.y,0,1];return pt(s,s,n),o=s[3],{point:new e.Point(s[0]/o,s[1]/o),signedDistanceFromCamera:o}}function st(e,t){return.5+e/t*.5}function Gs(e,t){var n=e[0]/e[3],s=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&s>=-t[1]&&s<=t[1]}function Ys(t,n,s,o,i,a,r,c){var C=o?t.textSizeData:t.iconSizeData,E=e.evaluateSizeForZoom(C,s.transform.zoom),k=[256/s.width*2+1,256/s.height*2+1],d=o?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;d.clear();for(var b=t.lineVertexArray,v=o?t.text.placedSymbolArray:t.icon.placedSymbolArray,g=s.transform.width/s.transform.height,h=!1,f=0;f<v.length;f++)if(l=v.get(f),l.hidden||l.writingMode===e.WritingMode.vertical&&!h)ie(l.numGlyphs,d);else if(h=!1,u=[l.anchorX,l.anchorY,0,1],e.transformMat4(u,u,n),Gs(u,k)){var l,u,A=u[3],_=st(s.transform.cameraToCenterDistance,A),w=e.evaluateSizeForFeature(C,E,l),x=r?w/_:w*_,m=new e.Point(l.anchorX,l.anchorY),j=O(m,i).point,y={},p=yt(l,x,!1,c,n,i,a,t.glyphOffsetArray,b,d,j,m,y,g);h=p.useVertical,(p.notEnoughRoom||h||p.needsFlipping&&yt(l,x,!0,c,n,i,a,t.glyphOffsetArray,b,d,j,m,y,g).notEnoughRoom)&&ie(l.numGlyphs,d)}else ie(l.numGlyphs,d);o?t.text.dynamicLayoutVertexBuffer.updateData(d):t.icon.dynamicLayoutVertexBuffer.updateData(d)}function xt(e,t,n,s,o,i,a,r,c,l,d){var u,v=r.glyphStartIndex+r.numGlyphs,h=r.lineStartIndex,m=r.lineStartIndex+r.lineLength,p=t.getoffsetX(r.glyphStartIndex),g=t.getoffsetX(v-1),f=Be(e*p,n,s,o,i,a,r.segment,h,m,c,l,d);return f?(u=Be(e*g,n,s,o,i,a,r.segment,h,m,c,l,d),u?{first:f,last:u}:null):null}function _t(t,n,s,o){return t===e.WritingMode.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*o?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function yt(t,n,s,o,i,a,r,c,l,d,u,h,m,f){var v,g=n/24,w=t.lineOffsetX*g,y=t.lineOffsetY*g;if(t.numGlyphs>1){var N=t.glyphStartIndex+t.numGlyphs,R=t.lineStartIndex,L=t.lineStartIndex+t.lineLength,p=xt(g,c,w,y,s,u,h,t,l,a,m);if(!p)return{notEnoughRoom:!0};if(T=O(p.first.point,r).point,S=O(p.last.point,r).point,o&&!s&&(E=_t(t.writingMode,T,S,f),E))return E;v=[p.first];for(j=t.glyphStartIndex+1;j<N-1;j++)v.push(Be(g*c.getoffsetX(j),w,y,s,u,h,t.segment,R,L,l,a,m));v.push(p.last)}else{if(o&&!s){var b,j,_,x,C,E,S,T,A=O(h,i).point,k=t.lineStartIndex+t.segment+1,M=new e.Point(l.getx(k),l.gety(k)),F=O(M,i),D=F.signedDistanceFromCamera>0?F.point:bt(h,M,A,1,i),z=_t(t.writingMode,A,D,f);if(z)return z}if(x=Be(g*c.getoffsetX(t.glyphStartIndex),w,y,s,u,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,a,m),!x)return{notEnoughRoom:!0};v=[x]}for(b=0,_=v;b<_.length;b+=1)C=_[b],e.addDynamicAttributes(d,C.point,C.angle);return{}}function bt(e,t,n,s,o){var a=O(e.add(e.sub(t)._unit()),o).point,i=n.sub(a);return n.add(i._mult(s/i.mag()))}function Be(t,n,s,o,i,a,r,c,l,d,u,h){var k=o?t-n:t+n,g=k>0?1:-1,y=0;o&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);for(var x,C,E,S,f=g>0?c+r:c+r+1,m=i,p=i,v=0,b=0,_=Math.abs(k),w=[];v+b<=_;){if((f+=g)<c||f>=l)return null;(p=m,w.push(m),void 0===(m=h[f]))&&(x=new e.Point(d.getx(f),d.gety(f)),C=O(x,u),C.signedDistanceFromCamera>0?m=h[f]=C.point:(E=f-g,m=bt(0===v?a:new e.Point(d.getx(E),d.gety(E)),x,p,_-v+1,u))),v+=b,b=p.dist(m)}var M=(_-v)/b,A=m.sub(p),j=A.mult(M)._add(p);return j._add(A._unit()._perp()._mult(s*g)),S=y+Math.atan2(m.y-p.y,m.x-p.x),w.push(j),{point:j,angle:S,path:w}}m.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},m.prototype.insert=function(e,t,n,s,o){this._forEachCell(t,n,s,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(o)},m.prototype.insertCircle=function(e,t,n,s){this._forEachCell(t-s,n-s,t+s,n+s,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(s)},m.prototype._insertBoxCell=function(e,t,n,s,o,i){this.boxCells[o].push(i)},m.prototype._insertCircleCell=function(e,t,n,s,o,i){this.circleCells[o].push(i)},m.prototype._query=function(e,t,n,s,o,i){if(n<0||e>this.width||s<0||t>this.height)return!o&&[];if(a=[],e<=0&&t<=0&&this.width<=n&&this.height<=s){if(o)return!0;for(r=0;r<this.boxKeys.length;r++)a.push({key:this.boxKeys[r],x1:this.bboxes[4*r],y1:this.bboxes[4*r+1],x2:this.bboxes[4*r+2],y2:this.bboxes[4*r+3]});for(c=0;c<this.circleKeys.length;c++){var a,r,c,h,d=this.circles[3*c],u=this.circles[3*c+1],l=this.circles[3*c+2];a.push({key:this.circleKeys[c],x1:d-l,y1:u-l,x2:d+l,y2:u+l})}return i?a.filter(i):a}return h={hitTest:o,seenUids:{box:{},circle:{}}},this._forEachCell(e,t,n,s,this._queryCell,a,h,i),o?a.length>0:a},m.prototype._queryCircle=function(e,t,n,s,o){var i,d,a=e-n,r=e+n,c=t-n,l=t+n;return r<0||a>this.width||l<0||c>this.height?!s&&[]:(i=[],d={hitTest:s,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},this._forEachCell(a,c,r,l,this._queryCellCircle,i,d,o),s?i.length>0:i)},m.prototype.query=function(e,t,n,s,o){return this._query(e,t,n,s,!1,o)},m.prototype.hitTest=function(e,t,n,s,o){return this._query(e,t,n,s,!0,o)},m.prototype.hitTestCircle=function(e,t,n,s){return this._queryCircle(e,t,n,!0,s)},m.prototype._queryCell=function(e,t,n,s,o,i,a,r){if(f=a.seenUids,b=this.boxCells[o],null!==b)for(var c,d,u,m,f,g,b,l=this.bboxes,v=0,y=b;v<y.length;v+=1)if(m=y[v],!f.box[m]&&(f.box[m]=!0,c=4*m,e<=l[c+2]&&t<=l[c+3]&&n>=l[c+0]&&s>=l[c+1]&&(!r||r(this.boxKeys[m])))){if(a.hitTest)return i.push(!0),!0;i.push({key:this.boxKeys[m],x1:l[c],y1:l[c+1],x2:l[c+2],y2:l[c+3]})}if(g=this.circleCells[o],null!==g)for(var h=this.circles,j=0,_=g;j<_.length;j+=1)if(u=_[j],!f.circle[u]&&(f.circle[u]=!0,d=3*u,this._circleAndRectCollide(h[d],h[d+1],h[d+2],e,t,n,s)&&(!r||r(this.circleKeys[u])))){if(a.hitTest)return i.push(!0),!0;var w=h[d],O=h[d+1],p=h[d+2];i.push({key:this.circleKeys[u],x1:w-p,y1:O-p,x2:w+p,y2:O+p})}},m.prototype._queryCellCircle=function(e,t,n,s,o,i,a,r){var l,d,u,m,g,c=a.circle,f=a.seenUids,_=this.boxCells[o];if(null!==_)for(var h=this.bboxes,p=0,j=_;p<j.length;p+=1)if(l=j[p],!f.box[l]&&(f.box[l]=!0,u=4*l,this._circleAndRectCollide(c.x,c.y,c.radius,h[u+0],h[u+1],h[u+2],h[u+3])&&(!r||r(this.boxKeys[l]))))return i.push(!0),!0;if(g=this.circleCells[o],null!==g)for(var v=this.circles,b=0,y=g;b<y.length;b+=1)if(d=y[b],!f.circle[d]&&(f.circle[d]=!0,m=3*d,this._circlesCollide(v[m],v[m+1],v[m+2],c.x,c.y,c.radius)&&(!r||r(this.circleKeys[d]))))return i.push(!0),!0},m.prototype._forEachCell=function(e,t,n,s,o,i,a,r){for(var c,d,f=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),h=this._convertToXCellCoord(n),m=this._convertToYCellCoord(s),l=f;l<=h;l++)for(c=u;c<=m;c++)if(d=this.xCellCount*c+l,o.call(this,e,t,n,s,d,i,a,r))return},m.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},m.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},m.prototype._circlesCollide=function(e,t,n,s,o,i){var a=s-e,r=o-t,c=n+i;return c*c>a*a+r*r},m.prototype._circleAndRectCollide=function(e,t,n,s,o,i,a){var r,l,u,h,c=(i-s)/2,d=Math.abs(e-(s+c));return!(d>c+n)&&(r=(a-o)/2,l=Math.abs(t-(o+r)),!(l>r+n)&&(d<=c||l<=r||(u=d-c,h=l-r,u*u+h*h<=n*n)))},gt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ie(e,t){for(var n,s=0;s<e;s++)n=t.length,t.resize(n+4),t.float32.set(gt,3*n)}function pt(e,t,n){var s=t[0],o=t[1];return e[0]=n[0]*s+n[4]*o+n[12],e[1]=n[1]*s+n[5]*o+n[13],e[3]=n[3]*s+n[7]*o+n[15],e}A=100,M=function(e,t,n){void 0===t&&(t=new m(e.width+200,e.height+200,25)),void 0===n&&(n=new m(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+A,this.screenBottomBoundary=e.height+A,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function y(t,n,s){return n*(e.EXTENT/(t.tileSize*Math.pow(2,s-t.tileID.overscaledZ)))}M.prototype.placeCollisionBox=function(e,t,n,s,o){var i=this.projectAndGetPerspectiveRatio(s,e.anchorPointX,e.anchorPointY),a=n*i.perspectiveRatio,r=e.x1*a+i.point.x,c=e.y1*a+i.point.y,l=e.x2*a+i.point.x,d=e.y2*a+i.point.y;return!this.isInsideGrid(r,c,l,d)||!t&&this.grid.hitTest(r,c,l,d,o)?{box:[],offscreen:!1}:{box:[r,c,l,d],offscreen:this.isOffscreen(r,c,l,d)}},M.prototype.placeCollisionCircles=function(t,n,s,o,i,a,r,c,l,d,u,h,m){var x,k,S,F,N,L,R,V,$,B=[],H=new e.Point(n.anchorX,n.anchorY),J=O(H,a),I=st(this.transform.cameraToCenterDistance,J.signedDistanceFromCamera),M=(d?i/I:i*I)/e.ONE_EM,Z=O(H,r).point,T=xt(M,o,n.lineOffsetX*M,n.lineOffsetY*M,!1,Z,H,n,s,r,{}),C=!1,P=!1,D=!0;if(T){for(var p=.5*h*I+m,j=new e.Point(-100,-100),b=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),_=new Re,U=T.first,W=T.last,f=[],z=U.path.length-1;z>=1;z--)f.push(U.path[z]);for(x=1;x<W.path.length;x++)f.push(W.path[x]);if(V=2.5*p,c&&(L=f.map(function(e){return O(e,c)}),f=L.some(function(e){return e.signedDistanceFromCamera<=0})?[]:L.map(function(e){return e.point})),R=[],f.length>0){for(var v=f[0].clone(),g=f[0].clone(),y=1;y<f.length;y++)v.x=Math.min(v.x,f[y].x),v.y=Math.min(v.y,f[y].y),g.x=Math.max(g.x,f[y].x),g.y=Math.max(g.y,f[y].y);R=v.x>=j.x&&g.x<=b.x&&v.y>=j.y&&g.y<=b.y?[f]:g.x<j.x||v.x>b.x||g.y<j.y||v.y>b.y?[]:e.clipLine([f],j.x,j.y,b.x,b.y)}for(S=0,N=R;S<N.length;S+=1){$=N[S],_.reset($,.25*p),F=_.length<=.5*p?1:Math.ceil(_.paddedLength/V)+1;for(k=0;k<F;k++){var Q=k/Math.max(F-1,1),q=_.lerp(Q),E=q.x+A,w=q.y+A;B.push(E,w,p,0);var K=E-p,Y=w-p,G=E+p,X=w+p;if(D=D&&this.isOffscreen(K,Y,G,X),P=P||this.isInsideGrid(K,Y,G,X),!t&&this.grid.hitTestCircle(E,w,p,u)&&(C=!0,!l))return{circles:[],offscreen:!1,collisionDetected:C}}}}return{circles:!l&&C||!P?[]:B,offscreen:D,collisionDetected:C}},M.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n,s,o,h,v,f=[],i=1/0,c=1/0,a=-1/0,r=-1/0,u=0,g=t;u<g.length;u+=1)h=g[u],o=new e.Point(h.x+A,h.y+A),i=Math.min(i,o.x),c=Math.min(c,o.y),a=Math.max(a,o.x),r=Math.max(r,o.y),f.push(o);for(var l={},d={},m=0,p=this.grid.query(i,c,a,r).concat(this.ignoredGrid.query(i,c,a,r));m<p.length;m+=1)s=p[m],n=s.key,(void 0===l[n.bucketInstanceId]&&(l[n.bucketInstanceId]={}),!l[n.bucketInstanceId][n.featureIndex])&&(v=[new e.Point(s.x1,s.y1),new e.Point(s.x2,s.y1),new e.Point(s.x2,s.y2),new e.Point(s.x1,s.y2)],e.polygonIntersectsPolygon(f,v)&&(l[n.bucketInstanceId][n.featureIndex]=!0,void 0===d[n.bucketInstanceId]&&(d[n.bucketInstanceId]=[]),d[n.bucketInstanceId].push(n.featureIndex)));return d},M.prototype.insertCollisionBox=function(e,t,n,s,o){var i={bucketInstanceId:n,featureIndex:s,collisionGroupID:o};(t?this.ignoredGrid:this.grid).insert(i,e[0],e[1],e[2],e[3])},M.prototype.insertCollisionCircles=function(e,t,n,s,o){for(var a=t?this.ignoredGrid:this.grid,r={bucketInstanceId:n,featureIndex:s,collisionGroupID:o},i=0;i<e.length;i+=4)a.insertCircle(r,e[i],e[i+1],e[i+2])},M.prototype.projectAndGetPerspectiveRatio=function(t,n,s){var o=[n,s,0,1];return pt(o,o,t),{point:new e.Point((o[0]/o[3]+1)/2*this.transform.width+A,(-o[1]/o[3]+1)/2*this.transform.height+A),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}},M.prototype.isOffscreen=function(e,t,n,s){return n<A||e>=this.screenRightBoundary||s<A||t>this.screenBottomBoundary},M.prototype.isInsideGrid=function(e,t,n,s){return n>=0&&e<this.gridRightBoundary&&s>=0&&t<this.gridBottomBoundary},M.prototype.getViewportMatrix=function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t},$e=function(e,t,n,s){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):s&&n?1:0,this.placed=n},$e.prototype.isHidden=function(){return 0===this.opacity&&!this.placed},K=function(e,t,n,s,o){this.text=new $e(e?e.text:null,t,n,o),this.icon=new $e(e?e.icon:null,t,s,o)},K.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var jt=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},qs=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Ks=function(e,t,n,s,o){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=s,this.tileID=o},wt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};function Ot(t,n,s,o,i){var a=e.getAnchorAlignment(t),c=-(a.horizontalAlign-.5)*n,l=-(a.verticalAlign-.5)*s,r=e.evaluateVariableOffset(t,o);return new e.Point(c+r[0]*i,l+r[1]*i)}function Je(t,n,s,o,i,a){var m=t.x1,c=t.x2,l=t.y1,d=t.y2,u=t.anchorPointX,h=t.anchorPointY,r=new e.Point(n,s);return o&&r._rotate(i?a:-a),{x1:m+r.x,y1:l+r.y,x2:c+r.x,y2:d+r.y,anchorPointX:u,anchorPointY:h}}wt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]},g=function(e,t,n,s){this.transform=e.clone(),this.collisionIndex=new M(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new wt(n),this.collisionCircleArrays={},this.prevPlacement=s,s&&(s.prevPlacement=void 0),this.placedOrientations={}};function Te(e,t,n,s,o){e.emplaceBack(t?1:0,n?1:0,s||0,o||0),e.emplaceBack(t?1:0,n?1:0,s||0,o||0),e.emplaceBack(t?1:0,n?1:0,s||0,o||0),e.emplaceBack(t?1:0,n?1:0,s||0,o||0)}g.prototype.getBucketParts=function(t,n,s,o){if(i=s.getBucket(n),m=s.latestFeatureIndex,i&&m&&n.id===i.layerIds[0]){var i,a,r,l,m,v,w=s.collisionBoxArray,c=i.layers[0].layout,_=Math.pow(2,this.transform.zoom-s.tileID.overscaledZ),j=s.tileSize/e.EXTENT,u=this.transform.calculatePosMatrix(s.tileID.toUnwrapped()),h="map"===c.get("text-pitch-alignment"),p="map"===c.get("text-rotation-alignment"),f=y(s,1,this.transform.zoom),b=et(u,h,p,this.transform,f),g=null;if(h&&(v=Ct(u,h,p,this.transform,f),g=e.multiply([],this.transform.labelPlaneMatrix,v)),this.retainedQueryData[i.bucketInstanceId]=new Ks(i.bucketInstanceId,m,i.sourceLayerIndex,i.index,s.tileID),r={bucket:i,layout:c,posMatrix:u,textLabelPlaneMatrix:b,labelToScreenMatrix:g,scale:_,textPixelRatio:j,holdingForFade:s.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(i.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(i.sourceID)},o)for(a=0,l=i.sortKeyRanges;a<l.length;a+=1){var d=l[a],O=d.sortKey,x=d.symbolInstanceStart,C=d.symbolInstanceEnd;t.push({sortKey:O,symbolInstanceStart:x,symbolInstanceEnd:C,parameters:r})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:i.symbolInstances.length,parameters:r})}},g.prototype.attemptAnchorPlacement=function(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f){var g,v=[u.textOffset0,u.textOffset1],p=Ot(e,n,s,v,o),b=this.collisionIndex.placeCollisionBox(Je(t,p.x,p.y,i,a,this.transform.angle),d,r,c,l.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(Je(f,p.x,p.y,i,a,this.transform.angle),d,r,c,l.predicate).box.length)return b.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID].text&&(g=this.prevPlacement.variableOffsets[u.crossTileID].anchor),this.variableOffsets[u.crossTileID]={textOffset:v,width:n,height:s,anchor:e,textBoxScale:o,prevAnchor:g},this.markUsedJustification(h,e,u,m),h.allowVerticalPlacement&&(this.markUsedOrientation(h,m,u),this.placedOrientations[u.crossTileID]=m),{shift:p,placedGlyphBoxes:b}):void 0},g.prototype.placeLayerBucketPart=function(t,n,s){var d,m,p,g,v,j,i=this,r=t.parameters,o=r.bucket,a=r.layout,u=r.posMatrix,k=r.textLabelPlaneMatrix,F=r.labelToScreenMatrix,f=r.textPixelRatio,M=r.holdingForFade,O=r.collisionBoxArray,A=r.partiallyEvaluatedTextSize,c=r.collisionGroup,x=a.get("text-optional"),_=a.get("icon-optional"),l=a.get("text-allow-overlap"),h=a.get("icon-allow-overlap"),y="map"===a.get("text-rotation-alignment"),b="map"===a.get("text-pitch-alignment"),w="none"!==a.get("icon-text-fit"),S="viewport-y"===a.get("symbol-z-order"),C=l&&(h||!o.hasIconData()||_),E=h&&(l||!o.hasTextData()||x);if(!o.collisionArrays&&O&&o.deserializeCollisionBoxes(O),v=function(t,r){if(!n[t.crossTileID])if(M)i.placements[t.crossTileID]=new jt(!1,!1,!1);else{var g,v,S,z,L,R,P,I,B,V,$,W,U,q,Y,G,m=!1,j=!1,O=!0,H=null,d={box:null,offscreen:null},T={box:null,offscreen:null},p=null,D=null,N=0,K=0,Q=0;if(r.textFeatureIndex?N=r.textFeatureIndex:t.useRuntimeCollisionCircles&&(N=t.featureIndex),r.verticalTextFeatureIndex&&(K=r.verticalTextFeatureIndex),R=r.textBox,R&&(V=function(n){var s,a=e.WritingMode.horizontal;return o.allowVerticalPlacement&&!n&&i.prevPlacement&&(s=i.prevPlacement.placedOrientations[t.crossTileID],s&&(i.placedOrientations[t.crossTileID]=s,a=s,i.markUsedOrientation(o,a,t))),a},q=function(n,s){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&r.verticalTextBox)for(var i=0,a=o.writingModes;i<a.length&&(a[i]===e.WritingMode.vertical?(d=s(),T=d):d=n(),!(d&&d.box&&d.box.length));i+=1);else d=n()},a.get("text-variable-anchor")?(g=a.get("text-variable-anchor"),i.prevPlacement&&i.prevPlacement.variableOffsets[t.crossTileID]&&(P=i.prevPlacement.variableOffsets[t.crossTileID],g.indexOf(P.anchor)>0&&(g=g.filter(function(e){return e!==P.anchor})).unshift(P.anchor)),B=function(e,n,s){for(var _=e.x2-e.x1,p=e.y2-e.y1,v=t.textBoxScale,C=w&&!h?n:null,r={box:[],offscreen:!1},j=l?2*g.length:g.length,a=0;a<j;++a){var O=g[a%g.length],x=a>=g.length,d=i.attemptAnchorPlacement(O,e,_,p,v,y,b,f,u,c,x,t,o,s,C);if(d&&(r=d.placedGlyphBoxes)&&r.box&&r.box.length){m=!0,H=d.shift;break}}return r},q(function(){return B(R,r.iconBox,e.WritingMode.horizontal)},function(){var n=r.verticalTextBox,s=d&&d.box&&d.box.length;return o.allowVerticalPlacement&&!s&&t.numVerticalGlyphVertices>0&&n?B(n,r.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),d&&(m=d.box,O=d.offscreen),G=V(d&&d.box),!m&&i.prevPlacement&&(L=i.prevPlacement.variableOffsets[t.crossTileID],L&&(i.variableOffsets[t.crossTileID]=L,i.markUsedJustification(o,L.anchor,t,G)))):(W=function(e,n){var s=i.collisionIndex.placeCollisionBox(e,l,f,u,c.predicate);return s&&s.box&&s.box.length&&(i.markUsedOrientation(o,n,t),i.placedOrientations[t.crossTileID]=n),s},q(function(){return W(R,e.WritingMode.horizontal)},function(){var n=r.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?W(n,e.WritingMode.vertical):{box:null,offscreen:null}}),V(d&&d.box&&d.box.length))),m=(v=d)&&v.box&&v.box.length>0,O=v&&v.offscreen,t.useRuntimeCollisionCircles){var X=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),J=e.evaluateSizeForFeature(o.textSizeData,A,X),ee=a.get("text-padding"),Z=t.collisionCircleDiameter;p=i.collisionIndex.placeCollisionCircles(l,X,o.lineVertexArray,o.glyphOffsetArray,J,u,k,F,s,b,c.predicate,Z,ee),m=l||p.circles.length>0&&!p.collisionDetected,O=O&&p.offscreen}if((r.iconFeatureIndex&&(Q=r.iconFeatureIndex),r.iconBox)&&(I=function(e){var t=w&&H?Je(e,H.x,H.y,y,b,i.transform.angle):e;return i.collisionIndex.placeCollisionBox(t,h,f,u,c.predicate)},j=T&&T.box&&T.box.length&&r.verticalIconBox?(D=I(r.verticalIconBox)).box.length>0:(D=I(r.iconBox)).box.length>0,O=O&&D.offscreen),U=x||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,$=_||0===t.numIconVertices,U||$?$?U||(j=j&&m):m=j&&m:j=m=j&&m,m&&v&&v.box&&(T&&T.box&&K?i.collisionIndex.insertCollisionBox(v.box,a.get("text-ignore-placement"),o.bucketInstanceId,K,c.ID):i.collisionIndex.insertCollisionBox(v.box,a.get("text-ignore-placement"),o.bucketInstanceId,N,c.ID)),j&&D&&i.collisionIndex.insertCollisionBox(D.box,a.get("icon-ignore-placement"),o.bucketInstanceId,Q,c.ID),p&&(m&&i.collisionIndex.insertCollisionCircles(p.circles,a.get("text-ignore-placement"),o.bucketInstanceId,N,c.ID),s)){Y=o.bucketInstanceId,S=i.collisionCircleArrays[Y],void 0===S&&(S=i.collisionCircleArrays[Y]=new qs);for(z=0;z<p.circles.length;z+=4)S.circles.push(p.circles[z+0]),S.circles.push(p.circles[z+1]),S.circles.push(p.circles[z+2]),S.circles.push(p.collisionDetected?1:0)}i.placements[t.crossTileID]=new jt(m||C,j||E,O||o.justReloaded),n[t.crossTileID]=!0}},S)for(g=o.getSortedSymbolIndexes(this.transform.angle),m=g.length-1;m>=0;--m)p=g[m],v(o.symbolInstances.get(p),o.collisionArrays[p]);else for(d=t.symbolInstanceStart;d<t.symbolInstanceEnd;d++)v(o.symbolInstances.get(d),o.collisionArrays[d]);s&&o.bucketInstanceId in this.collisionCircleArrays&&(j=this.collisionCircleArrays[o.bucketInstanceId],e.invert(j.invProjMatrix,u),j.viewportMatrix=this.collisionIndex.getViewportMatrix()),o.justReloaded=!1},g.prototype.markUsedJustification=function(t,n,s,o){c={left:s.leftJustifiedTextSymbolIndex,center:s.centerJustifiedTextSymbolIndex,right:s.rightJustifiedTextSymbolIndex},a=o===e.WritingMode.vertical?s.verticalPlacedTextSymbolIndex:c[e.getAnchorJustification(n)];for(var i,a,c,r=0,l=[s.leftJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.rightJustifiedTextSymbolIndex,s.verticalPlacedTextSymbolIndex];r<l.length;r+=1)i=l[r],i>=0&&(t.text.placedSymbolArray.get(i).crossTileID=a>=0&&i!==a?0:s.crossTileID)},g.prototype.markUsedOrientation=function(t,n,s){for(var a,r=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,c=n===e.WritingMode.vertical?n:0,o=0,i=[s.leftJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.rightJustifiedTextSymbolIndex];o<i.length;o+=1)a=i[o],t.text.placedSymbolArray.get(a).placedOrientation=r;s.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(s.verticalPlacedTextSymbolIndex).placedOrientation=c)},g.prototype.commit=function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom,t=this.prevPlacement,s=!1,this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var t,n,s,o,i,a,r,c,d,h,u=t?t.symbolFadeChange(e):1,l=t?t.opacities:{},m=t?t.variableOffsets:{},f=t?t.placedOrientations:{};for(c in this.placements)n=this.placements[c],o=l[c],o?(this.opacities[c]=new K(o,u,n.text,n.icon),s=s||n.text!==o.text.placed||n.icon!==o.icon.placed):(this.opacities[c]=new K(null,u,n.text,n.icon,n.skipFade),s=s||n.text||n.icon);for(h in l)r=l[h],this.opacities[h]||(d=new K(r,u,!1,!1),d.isHidden()||(this.opacities[h]=d,s=s||r.text.placed||r.icon.placed));for(i in m)this.variableOffsets[i]||!this.opacities[i]||this.opacities[i].isHidden()||(this.variableOffsets[i]=m[i]);for(a in f)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=f[a]);s?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},g.prototype.updateLayerOpacities=function(e,t){for(var n,s,a={},o=0,i=t;o<i.length;o+=1)n=i[o],s=n.getBucket(e),s&&n.latestFeatureIndex&&e.id===s.layerIds[0]&&this.updateBucketOpacities(s,a,n.collisionBoxArray)},g.prototype.updateBucketOpacities=function(t,n,s){o=this,t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var o,c,i=t.layers[0].layout,f=new K(null,0,!1,!1,!0),u=i.get("text-allow-overlap"),d=i.get("icon-allow-overlap"),h=i.get("text-variable-anchor"),g="map"===i.get("text-rotation-alignment"),v="map"===i.get("text-pitch-alignment"),a="none"!==i.get("icon-text-fit"),m=new K(null,0,u&&(d||!t.hasIconData()||i.get("icon-optional")),d&&(u||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&s&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(s);for(var r=function(e,t,n){for(var s=0;s<t/4;s++)e.opacityVertexArray.emplaceBack(n)},p=function(s){var l,d,u,b,w,O,x,C,E,k,A,S,F,T,D,i=t.symbolInstances.get(s),M=i.numHorizontalGlyphVertices,z=i.numVerticalGlyphVertices,p=i.crossTileID,L=n[p],c=o.opacities[p];L?c=f:c||(c=m,o.opacities[p]=c),n[p]=!0;var N=M>0||z>0,R=i.numIconVertices>0,y=o.placedOrientations[i.crossTileID],_=y===e.WritingMode.vertical,j=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;N&&(O=Dt(c.text),S=_?be:O,r(t.text,M,S),D=j?be:O,r(t.text,z,D),E=c.text.isHidden(),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach(function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=E||_?1:0)}),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=E||j?1:0),k=o.variableOffsets[i.crossTileID],k&&o.markUsedJustification(t,k.anchor,i,y),w=o.placedOrientations[i.crossTileID],w&&(o.markUsedJustification(t,"left",i,w),o.markUsedOrientation(t,w,i))),R&&(x=Dt(c.icon),C=!(a&&i.verticalPlacedIconSymbolIndex&&_),i.placedIconSymbolIndex>=0&&(F=C?x:be,r(t.icon,i.numIconVertices,F),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=c.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(T=C?be:x,r(t.icon,i.numVerticalIconVertices,T),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=c.icon.isHidden())),(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&(d=t.collisionArrays[s],d&&(l=new e.Point(0,0),(d.textBox||d.verticalTextBox)&&(b=!0,h&&(u=o.variableOffsets[p],u?(l=Ot(u.anchor,u.width,u.height,u.textOffset,u.textBoxScale),g&&l._rotate(v?o.transform.angle:-o.transform.angle)):b=!1),d.textBox&&Te(t.textCollisionBox.collisionVertexArray,c.text.placed,!b||_,l.x,l.y),d.verticalTextBox&&Te(t.textCollisionBox.collisionVertexArray,c.text.placed,!b||j,l.x,l.y)),A=Boolean(!j&&d.verticalIconBox),d.iconBox&&Te(t.iconCollisionBox.collisionVertexArray,c.icon.placed,A,a?l.x:0,a?l.y:0),d.verticalIconBox&&Te(t.iconCollisionBox.collisionVertexArray,c.icon.placed,!A,a?l.x:0,a?l.y:0)))},l=0;l<t.symbolInstances.length;l++)p(l);t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays&&(c=this.collisionCircleArrays[t.bucketInstanceId],t.placementInvProjMatrix=c.invProjMatrix,t.placementViewportMatrix=c.viewportMatrix,t.collisionCircleArray=c.circles,delete this.collisionCircleArrays[t.bucketInstanceId])},g.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},g.prototype.zoomAdjustment=function(e){return Math.max(0,(this.transform.zoom-e)/1.5)},g.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},g.prototype.stillRecent=function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e},g.prototype.setStale=function(){this.stale=!0};var Ws=Math.pow(2,25),$s=Math.pow(2,24),Vs=Math.pow(2,17),Bs=Math.pow(2,16),Is=Math.pow(2,9),Ns=Math.pow(2,8),Ds=Math.pow(2,1);function Dt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Ws+t*$s+n*Vs+t*Bs+n*Is+t*Ns+n*Ds+t}be=0,Qe=function(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]},Qe.prototype.continuePlacement=function(e,t,n,s,o){for(var a,r,i=this._bucketParts;this._currentTileIndex<e.length;)if(a=e[this._currentTileIndex],t.getBucketParts(i,s,a,this._sortAcrossTiles),this._currentTileIndex++,o())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,i.sort(function(e,t){return e.sortKey-t.sortKey}));this._currentPartIndex<i.length;)if(r=i[this._currentPartIndex],t.placeLayerBucketPart(r,this._seenCrossTileIDs,n),this._currentPartIndex++,o())return!0;return!1},le=function(e,t,n,s,o,i,a){this.placement=new g(e,o,i,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=s,this._done=!1},le.prototype.isDone=function(){return this._done},le.prototype.continuePlacement=function(t,n,s){for(var o,i,a=this,r=e.browser.now(),c=function(){var t=e.browser.now()-r;return!a._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){if(o=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom,"symbol"===o.type&&(!o.minzoom||o.minzoom<=i)&&(!o.maxzoom||o.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Qe(o)),this._inProgressLayer.continuePlacement(s[o.source],this.placement,this._showCollisionBoxes,o,c))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},le.prototype.commit=function(e){return this.placement.commit(e),this.placement},Pt=512/e.EXTENT/2,Ce=function(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(s=0;s<t.length;s++){var s,o=t.get(s),i=o.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,e)})}},Ce.prototype.getScaledCoordinates=function(t,n){var o=n.canonical.z-this.tileID.canonical.z,s=Pt/Math.pow(2,o);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*s),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*s)}},Ce.prototype.findMatches=function(e,t,n){for(a=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++)if(o=e.get(i),!o.crossTileID&&(r=this.indexedSymbolInstances[o.key],r))for(var s,o,i,a,r,l=this.getScaledCoordinates(o,t),c=0,d=r;c<d.length;c+=1)if(s=d[c],Math.abs(s.coord.x-l.x)<=a&&Math.abs(s.coord.y-l.y)<=a&&!n[s.crossTileID]){n[s.crossTileID]=!0,o.crossTileID=s.crossTileID;break}},tt=function(){this.maxCrossTileID=0},tt.prototype.generate=function(){return++this.maxCrossTileID},re=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0},re.prototype.handleWrapJump=function(e){if(n=Math.round((e-this.lng)/360),0!==n)for(s in this.indexes){var t,n,s,a,o=this.indexes[s],i={};for(a in o)t=o[a],t.tileID=t.tileID.unwrapTo(t.tileID.wrap+n),i[t.tileID.key]=t;this.indexes[s]=i}this.lng=e},re.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var s,o,i,a,c,l,d,u,r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={}),s=this.usedCrossTileIDs[e.overscaledZ];for(d in this.indexes)if(i=this.indexes[d],Number(d)>e.overscaledZ)for(u in i)c=i[u],c.tileID.isChildOf(e)&&c.findMatches(t.symbolInstances,e,s);else l=i[e.scaledTo(Number(d)).key],l&&l.findMatches(t.symbolInstances,e,s);for(a=0;a<t.symbolInstances.length;a++)o=t.symbolInstances.get(a),o.crossTileID||(o.crossTileID=n.generate(),s[o.crossTileID]=!0);return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Ce(e,t.symbolInstances,t.bucketInstanceId),!0},re.prototype.removeBucketCrossTileIDs=function(e,t){for(i in t.indexedSymbolInstances)for(var o,i,n=0,s=t.indexedSymbolInstances[i];n<s.length;n+=1)o=s[n],delete this.usedCrossTileIDs[e][o.crossTileID]},re.prototype.removeStaleBuckets=function(e){var t,n,o,s=!1;for(o in this.indexes){t=this.indexes[o];for(n in t)e[t[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,t[n]),delete t[n],s=!0)}return s},ve=function(){this.layerIndexes={},this.crossTileIDs=new tt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}},ve.prototype.addLayer=function(e,t,n){o=this.layerIndexes[e.id],void 0===o&&(o=this.layerIndexes[e.id]=new re);var s,o,i,r,c,a=!1,l={};o.handleWrapJump(n);for(i=0,r=t;i<r.length;i+=1)c=r[i],s=c.getBucket(e),s&&e.id===s.layerIds[0]&&(s.bucketInstanceId||(s.bucketInstanceId=++this.maxBucketInstanceId),o.addBucket(c.tileID,s,this.crossTileIDs)&&(a=!0),l[s.bucketInstanceId]=!0);return o.removeStaleBuckets(l)&&(a=!0),a},ve.prototype.pruneUnusedLayers=function(e){var n,t={};for(n in e.forEach(function(e){t[e]=!0}),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var Pe=function(t,n){return e.emitValidationErrors(t,n&&n.filter(function(e){return"source.canvas"!==e.identifier}))},zs=e.pick(i,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ts=e.pick(i,["setCenter","setZoom","setBearing","setPitch"]),Fs=function(){var t,n,o,s={},i=e.styleSpec.$version;for(t in e.styleSpec.$root)n=e.styleSpec.$root[t],n.required&&null!=(o="version"===t?i:"array"===n.type?[]:{})&&(s[t]=o);return s}(),Z=function(t){function n(s,o){var a,i=this;void 0===o&&(o={}),t.call(this),this.map=s,this.dispatcher=new te(Ft(),this),this.imageManager=new si,this.imageManager.setEventedParent(this),this.glyphManager=new N(s._requestManager,o.localIdeographFontFamily),this.lineAtlas=new Y(256,512),this.crossTileSymbolIndex=new ve,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer()),a=this,this._rtlTextPluginCallback=n.registerForPluginStateChange(function(t){var n={pluginStatus:t.pluginStatus,pluginURL:t.pluginURL};a.dispatcher.broadcast("syncRTLPluginState",n,function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every(function(e){return e}))for(var s in a.sourceCaches)a.sourceCaches[s].reload()})}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t,n,o,s=i.sourceCaches[e.sourceId];if(s&&(t=s.getSource(),t&&t.vectorLayerIds))for(o in i._layers)n=i._layers[o],n.source===t.id&&i._validateLayer(n)}})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.loadURL=function(t,n){var o,i,s=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),o="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t),t=this.map._requestManager.normalizeStyleURL(t,n.accessToken),i=this.map._requestManager.transformRequest(t,e.ResourceType.Style),this._request=e.getJSON(i,function(t,n){s._request=null,t?s.fire(new e.ErrorEvent(t)):n&&s._load(n,o)})},n.prototype.loadJSON=function(t,n){var s=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){s._request=null,s._load(t,!1!==n.validate)})},n.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Fs,!1)},n.prototype._load=function(t,n){if(!n||!Pe(this,e.validateStyle(t))){for(a in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(a,t.sources[a],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs),o=Mt(this.stylesheet.layers),this._order=o.map(function(e){return e.id}),this._layers={},this._serializedLayers={};for(var s,o,a,i=0,r=o;i<r.length;i+=1)s=r[i],(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Qo(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},n.prototype._loadSprite=function(t){var n=this;this._spriteRequest=function(t,n,s){var o,i,c,l=e.browser.devicePixelRatio>1?"@2x":"",a=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,l,".json"),e.ResourceType.SpriteJSON),function(e,t){a=null,o||(o=e,i=t,d())}),r=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,l,".png"),e.ResourceType.SpriteImage),function(e,t){r=null,o||(o=e,c=t,d())});function d(){if(o)s(o);else if(i&&c){a=e.browser.getImageData(c),n={};for(r in i){var n,a,r,t=i[r],l=t.width,d=t.height,h=t.x,b=t.y,m=t.sdf,f=t.pixelRatio,p=t.stretchX,g=t.stretchY,v=t.content,u=new e.RGBAImage({width:l,height:d});e.RGBAImage.copy(a,u,{x:h,y:b},{x:0,y:0},{width:l,height:d}),n[r]={data:u,pixelRatio:f,sdf:m,stretchX:p,stretchY:g,content:v}}s(null,n)}}return{cancel:function(){a&&(a.cancel(),a=null),r&&(r.cancel(),r=null)}}}(t,this.map._requestManager,function(t,s){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(s)for(var o in s)n.imageManager.addImage(o,s[o]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new e.Event("data",{dataType:"style"}))})},n.prototype._validateLayer=function(t){var n,s,o=this.sourceCaches[t.source];o&&(s=t.sourceLayer,s&&(n=o.getSource(),("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(s))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+s+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')))))},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(e){for(var n,i,s=[],t=0,o=e;t<o.length;t+=1)i=o[t],n=this._layers[i],"custom"!==n.type&&s.push(n.serialize());return s},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(t){if(this._loaded){if(p=this._changed,this._changed){var n,s,o,i,a,r,c,l,d,u,m,p,g,f=Object.keys(this._updatedLayers),h=Object.keys(this._removedLayers);for(a in(f.length||h.length)&&this._updateWorkerLayers(f,h),this._updatedSources)r=this._updatedSources[a],"reload"===r?this._reloadSource(a):"clear"===r&&this._clearSource(a);for(g in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[g].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}o={};for(u in this.sourceCaches)d=this.sourceCaches[u],o[u]=d.used,d.used=!1;for(s=0,i=this._order;s<i.length;s+=1)m=i[s],n=this._layers[m],n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0);for(c in o)l=this.sourceCaches[c],o[c]!==l.used&&l.fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:c}));this.light.recalculate(t),this.z=t.zoom,p&&this.fire(new e.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t,e=Object.keys(this._changedImages);if(e.length){for(t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}},n.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(t){var n,s,o=this;if(this._checkLoaded(),Pe(this,e.validateStyle(t)))return!1;if((t=e.clone$1(t)).layers=Mt(t.layers),n=Xs(this.serialize(),t).filter(function(e){return!(e.command in Ts)}),0===n.length)return!1;if(s=n.filter(function(e){return!(e.command in zs)}),s.length>0)throw new Error("Unimplemented: "+s.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&o[e.command].apply(o,e.args)}),this.stylesheet=t,!0},n.prototype.addImage=function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this._afterImageUpdated(t)},n.prototype.updateImage=function(e,t){this.imageManager.updateImage(e,t)},n.prototype.getImage=function(e){return this.imageManager.getImage(e)},n.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},n.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(t,n,s){var o,i=this;if(void 0===s&&(s={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,n,null,s)||(this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0),o=this.sourceCaches[t]=new ee(t,n,this.dispatcher),o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:t}}),o.onAdd(this.map),this._changed=!0)},n.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(s in this._layers)if(this._layers[s].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+s+'" is using it.')));var s,n=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],n.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},n.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},n.prototype.addLayer=function(t,n,s){void 0===s&&(s={}),this._checkLoaded();var o,a,r,i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{if("custom"===t.type){if(Pe(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,"layers."+i,t,{arrayIndex:-1},s))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}a=n?this._order.indexOf(n):this._order.length,n&&-1===a?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):((this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type)&&(r=this._removedLayers[i],delete this._removedLayers[i],r.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())),this._updateLayer(o),o.onAdd&&o.onAdd(this.map))}},n.prototype.moveLayer=function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var s,o=this._order.indexOf(t);this._order.splice(o,1),s=n?this._order.indexOf(n):this._order.length,n&&-1===s?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(s,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(t){this._checkLoaded();var s,n=this._layers[t];n?(n.setEventedParent(null),s=this._order.indexOf(t),this._order.splice(s,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(e){return this._layers[e]},n.prototype.hasLayer=function(e){return e in this._layers},n.prototype.setLayerZoomRange=function(t,n,s){this._checkLoaded();var o=this.getLayer(t);o?o.minzoom===n&&o.maxzoom===s||(n!=null&&(o.minzoom=n),s!=null&&(o.maxzoom=s),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(t,n,s){void 0===s&&(s={}),this._checkLoaded();var o=this.getLayer(t);if(o){if(!e.deepEqual(o.filter,n))return n==null?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateStyle.filter,"layers."+o.id+".filter",n,null,s)||(o.filter=e.clone$1(n),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(t){return e.clone$1(this.getLayer(t).filter)},n.prototype.setLayoutProperty=function(t,n,s,o){void 0===o&&(o={}),this._checkLoaded();var i=this.getLayer(t);i?e.deepEqual(i.getLayoutProperty(n),s)||(i.setLayoutProperty(n,s,o),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(t,n){var s=this.getLayer(t);if(s)return s.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(t,n,s,o){void 0===o&&(o={}),this._checkLoaded();var i=this.getLayer(t);i?e.deepEqual(i.getPaintProperty(n),s)||(i.setPaintProperty(n,s,o)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},n.prototype.setFeatureState=function(t,n){this._checkLoaded();var i,a=t.source,s=t.sourceLayer,o=this.sourceCaches[a];void 0!==o?(i=o.getSource().type,"geojson"===i&&s?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==i||s?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(s,t.id,n)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new e.ErrorEvent(new Error("The source '"+a+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(t,n){this._checkLoaded();var o,i,a=t.source,s=this.sourceCaches[a];void 0!==s?(o=s.getSource().type,i="vector"===o?t.sourceLayer:void 0,"vector"!==o||i?n&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):s.removeFeatureState(i,t.id,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new e.ErrorEvent(new Error("The source '"+a+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(t){this._checkLoaded();var s=t.source,o=t.sourceLayer,n=this.sourceCaches[s];if(void 0!==n){if("vector"!==n.getSource().type||o)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(o,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+s+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._serializeLayers(this._order)},function(e){return void 0!==e})},n.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(e){for(var t,s,o,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,O=this,w=function(e){return"fill-extrusion"===O._layers[e].type},_={},n=[],i=this._order.length-1;i>=0;i--)if(a=this._order[i],w(a)){_[a]=i;for(r=0,f=e;r<f.length;r+=1)if(m=f[r][a],m)for(s=0,u=m;s<u.length;s+=1)y=u[s],n.push(y)}n.sort(function(e,t){return t.intersectionZ-e.intersectionZ});for(l=[],t=this._order.length-1;t>=0;t--)if(p=this._order[t],w(p))for(c=n.length-1;c>=0;c--){if(v=n[c].feature,_[v.layer.id]<t)break;l.push(v),n.pop()}else for(d=0,b=e;d<b.length;d+=1)if(h=b[d][p],h)for(o=0,g=h;o<g.length;o+=1)j=g[o],l.push(j.feature);return l},n.prototype.queryRenderedFeatures=function(t,n,s){if(n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n),i={},n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o,i,r,c,d,a=0,l=n.layers;a<l.length;a+=1){if(r=l[a],c=this._layers[r],!c)return this.fire(new e.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be queried for features."))),[];i[c.source]=!0}}o=[];for(d in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[d]||o.push($o(this.sourceCaches[d],this._layers,this._serializedLayers,t,n,s));return this.placement&&o.push(function(e,t,n,s,o,i,a){for(var h,p,v,r={},m=i.queryRenderedSymbols(s),l=[],d=0,u=Object.keys(m).map(Number);d<u.length;d+=1)h=u[d],l.push(a[h]);l.sort(Gt);for(var g=function(){var s,i,a,l,u,h,n=f[c],d=n.featureIndex.lookupSymbolFeatures(m[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,o.filter,o.layers,o.availableImages,e);for(i in d){u=r[i]=r[i]||[],a=d[i],a.sort(function(e,t){var o,s=n.featureSortOrder;return s?(o=s.indexOf(e.featureIndex),s.indexOf(t.featureIndex)-o):t.featureIndex-e.featureIndex});for(s=0,l=a;s<l.length;s+=1)h=l[s],u.push(h)}},c=0,f=l;c<f.length;c+=1)g();p=function(t){r[t].forEach(function(s){var o=s.feature,i=e[t],a=n[i.source].getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=a})};for(v in r)p(v);return r}(this._layers,this._serializedLayers,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)},n.prototype.querySourceFeatures=function(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var s=this.sourceCaches[t];return s?function(e,t){for(var s,o,i=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),a=[],r={},n=0;n<i.length;n++)s=i[n],o=s.tileID.canonical.key,r[o]||(r[o]=!0,s.querySourceFeatures(a,t));return a}(s,n):[]},n.prototype.addSourceType=function(e,t,s){return n.getSourceType(e)?s(new Error('A source type called "'+e+'" already exists.')):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},s):s(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(t,n){void 0===n&&(n={}),this._checkLoaded();var o,i,a=this.light.getLight(),s=!1;for(o in t)if(!e.deepEqual(t[o],a[o])){s=!0;break}s&&(i={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(t,n),this.light.updateTransitions(i))},n.prototype._validate=function(t,n,s,o,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Pe(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:s,styleSpec:e.styleSpec},o)))},n.prototype._remove=function(){for(var n in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[n].setEventedParent(null);for(var t in this.sourceCaches)this.sourceCaches[t].clearTiles(),this.sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},n.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},n.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},n.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},n.prototype._updatePlacement=function(t,n,s,o,i){void 0===i&&(i=!1);for(var a,c,d,u,h,f,p,b,l=!1,g=!1,r={},m=0,v=this._order;m<v.length;m+=1)f=v[m],a=this._layers[f],"symbol"===a.type&&(r[a.source]||(h=this.sourceCaches[a.source],r[a.source]=h.getRenderableIds(!0).map(function(e){return h.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})),p=this.crossTileSymbolIndex.addLayer(a,r[a.source],t.center.lng),l=l||p);if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((i=i||this._layerOrderChanged||0===s)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new le(t,this._order,i,n,s,o,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,r),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),g=!0),l&&this.pauseablePlacement.placement.setStale()),g||l)for(c=0,u=this._order;c<u.length;c+=1)b=u[c],d=this._layers[b],"symbol"===d.type&&this.placement.updateLayerOpacities(d,r[d.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},n.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var s=this.sourceCaches[t.source];s&&s.setDependencies(t.tileID.key,t.type,t.icons)},n.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},n.prototype.getResource=function(t,n,s){return e.makeRequest(n,s)},n}(e.Evented);Z.getSourceType=function(e){return at[e]},Z.setSourceType=function(e,t){at[e]=t},Z.registerForPluginStateChange=e.registerForPluginStateChange;var nt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),rt=c(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ms=c(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ss=c(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),As=c(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),ks=c("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Cs=c(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),xs=c(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Os=c("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ci=c("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ms=c("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),hs=c(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),us=c(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ds=c(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),is=c(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),os=c(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Jn=c(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Zn=c(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Qn=c(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Gn=c(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Yn=c(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qn=c(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),$n=c(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Pn=c(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Rn=c(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Fn=c(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Mn=c(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function c(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=t.match(/attribute ([\w]+) ([\w]+)/g),s=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=o?o.concat(s):s,i={};return{fragmentSource:e=e.replace(n,function(e,t,n,s,o){return i[o]=!0,"define"===t?`
#ifndef HAS_UNIFORM_u_`+o+`
varying `+n+" "+s+" "+o+`;
#else
uniform `+n+" "+s+" u_"+o+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+o+`
    `+n+" "+s+" "+o+" = u_"+o+`;
#endif
`}),vertexSource:t=t.replace(n,function(e,t,n,s,o){var r="float"===s?"vec2":"vec4",a=o.match(/color/)?"color":r;return i[o]?"define"===t?`
#ifndef HAS_UNIFORM_u_`+o+`
uniform lowp float u_`+o+`_t;
attribute `+n+" "+r+" a_"+o+`;
varying `+n+" "+s+" "+o+`;
#else
uniform `+n+" "+s+" u_"+o+`;
#endif
`:"vec4"===a?`
#ifndef HAS_UNIFORM_u_`+o+`
    `+o+" = a_"+o+`;
#else
    `+n+" "+s+" "+o+" = u_"+o+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+o+`
    `+o+" = unpack_mix_"+a+"(a_"+o+", u_"+o+`_t);
#else
    `+n+" "+s+" "+o+" = u_"+o+`;
#endif
`:"define"===t?`
#ifndef HAS_UNIFORM_u_`+o+`
uniform lowp float u_`+o+`_t;
attribute `+n+" "+r+" a_"+o+`;
#else
uniform `+n+" "+s+" u_"+o+`;
#endif
`:"vec4"===a?`
#ifndef HAS_UNIFORM_u_`+o+`
    `+n+" "+s+" "+o+" = a_"+o+`;
#else
    `+n+" "+s+" "+o+" = u_"+o+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+o+`
    `+n+" "+s+" "+o+" = unpack_mix_"+a+"(a_"+o+", u_"+o+`_t);
#else
    `+n+" "+s+" "+o+" = u_"+o+`;
#endif
`}),staticAttributes:a,staticUniforms:r}}On=Object.freeze({__proto__:null,prelude:rt,background:Ms,backgroundPattern:Ss,circle:As,clippingMask:ks,heatmap:Cs,heatmapTexture:xs,collisionBox:Os,collisionCircle:ci,debug:ms,fill:hs,fillOutline:us,fillOutlinePattern:ds,fillPattern:is,fillExtrusion:os,fillExtrusionPattern:Jn,hillshadePrepare:Zn,hillshade:Qn,line:Gn,lineGradient:Yn,linePattern:qn,lineSDF:$n,raster:Pn,symbolIcon:Rn,symbolSDF:Fn,symbolTextAndIcon:Mn}),_e=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Cn(e){for(var s,n=[],t=0;t<e.length;t++)null!==e[t]&&(s=e[t].split(" "),n.push(s.pop()));return n}_e.prototype.bind=function(e,t,n,s,o,i,a,r){this.context=e;for(var d,l=this.boundPaintVertexBuffers.length!==s.length,c=0;!l&&c<s.length;c++)this.boundPaintVertexBuffers[c]!==s[c]&&(l=!0);d=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==o||this.boundVertexOffset!==i||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==r,!e.extVertexArrayObject||d?this.freshBind(t,n,s,o,i,a,r):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),o&&o.dynamicDraw&&o.bind(),r&&r.bind())},_e.prototype.freshBind=function(e,t,n,s,o,i,a){var l,d,u,h,m,f,p,g=e.numAttributes,c=this.context,r=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),h=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=s,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=i,this.boundDynamicVertexBuffer2=a;else{h=c.currentNumAttributes||0;for(d=g;d<h;d++)r.disableVertexAttribArray(d)}t.enableAttributes(r,e);for(u=0,m=n;u<m.length;u+=1)m[u].enableAttributes(r,e);i&&i.enableAttributes(r,e),a&&a.enableAttributes(r,e),t.bind(),t.setVertexAttribPointers(r,e,o);for(l=0,f=n;l<f.length;l+=1)p=f[l],p.bind(),p.setVertexAttribPointers(r,e,o);i&&(i.bind(),i.setVertexAttribPointers(r,e,o)),s&&s.bind(),a&&(a.bind(),a.setVertexAttribPointers(r,e,o)),c.currentNumAttributes=g},_e.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},ht=function(e,t,n,s,o,i){a=e.gl,this.program=a.createProgram();for(var a,r,c,l,d,u,p,g,v,C=Cn(n.staticAttributes),x=s?s.getBinderAttributes():[],h=C.concat(x),O=n.staticUniforms?Cn(n.staticUniforms):[],w=s?s.getBinderUniforms():[],m=[],b=0,j=O.concat(w);b<j.length;b+=1)g=j[b],m.indexOf(g)<0&&m.push(g);p=s?s.defines():[],i&&p.push("#define OVERDRAW_INSPECTOR;");var y=p.concat(rt.fragmentSource,n.fragmentSource).join(`
`),_=p.concat(rt.vertexSource,n.vertexSource).join(`
`),f=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else if(a.shaderSource(f,y),a.compileShader(f),a.attachShader(this.program,f),d=a.createShader(a.VERTEX_SHADER),a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(d,_),a.compileShader(d),a.attachShader(this.program,d),this.attributes={},l={},this.numAttributes=h.length;for(r=0;r<this.numAttributes;r++)h[r]&&(a.bindAttribLocation(this.program,r,h[r]),this.attributes[h[r]]=r);a.linkProgram(this.program),a.deleteShader(d),a.deleteShader(f);for(u=0;u<m.length;u++)c=m[u],c&&!l[c]&&(v=a.getUniformLocation(this.program,c),v&&(l[c]=v));this.fixedUniforms=o(e,l),this.binderUniforms=s?s.getUniforms(e,l):[]}};function kn(e,t,n){var r=1/y(n,1,t.transform.tileZoom),s=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,t.transform.tileZoom)/s,i=o*(n.tileID.canonical.x+n.tileID.wrap*s),a=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[i>>16,a>>16],u_pixel_coord_lower:[65535&i,65535&a]}}ht.prototype.draw=function(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p){if(v=e.gl,!this.failedToCreate){for(_ in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(s),e.setColorMode(o),e.setCullFace(i),this.fixedUniforms)this.fixedUniforms[_].set(a[_]);m&&m.setUniforms(e,this.binderUniforms,u,{zoom:h});for(var g,v,b,y,_,w=(b={},b[v.LINES]=2,b[v.TRIANGLES]=3,b[v.LINE_STRIP]=1,b)[t],j=0,O=d.get();j<O.length;j+=1)g=O[j],y=g.vaos||(g.vaos={}),(y[r]||(y[r]=new _e)).bind(e,this,c,m?m.getPaintVertexBuffers():[],l,g.vertexOffset,f,p),v.drawElements(t,g.primitiveLength*w,v.UNSIGNED_SHORT,g.primitiveOffset*w*2)}};var qt=function(t,n,s,o){var a,i=n.style.light,r=i.properties.get("position"),c=[r.x,r.y,r.z],l=e.create$1();return"viewport"===i.properties.get("anchor")&&e.fromRotation(l,-n.transform.angle),e.transformMat3(c,c,l),a=i.properties.get("color"),{u_matrix:t,u_lightpos:c,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[a.r,a.g,a.b],u_vertical_gradient:+s,u_opacity:o}},Sn=function(t,n,s,o,i,a,r){return e.extend(qt(t,n,s,o),kn(a,n,r),{u_height_factor:-Math.pow(2,i.overscaledZ)/r.tileSize/8})},_n=function(e){return{u_matrix:e}},yn=function(t,n,s,o){return e.extend(_n(t),kn(s,n,o))},Tn=function(e,t){return{u_matrix:e,u_world:t}},zn=function(t,n,s,o,i){return e.extend(yn(t,n,s,o),{u_world:i})},Dn=function(t,n,s,o){var i,a,c,r=t.transform;return"map"===o.paint.get("circle-pitch-alignment")?(c=y(s,1,r.zoom),i=!0,a=[c,c]):(i=!1,a=r.pixelsToGLUnits),{u_camera_to_center_distance:r.cameraToCenterDistance,u_scale_with_map:+("map"===o.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(n.posMatrix,s,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:a}},Nn=function(e,t,n){var s=y(n,1,t.zoom),o=Math.pow(2,t.zoom-n.tileID.overscaledZ),i=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:s,u_extrude_scale:[t.pixelsToGLUnits[0]/(s*o),t.pixelsToGLUnits[1]/(s*o)],u_overscale_factor:i}},Ln=function(e,t,n){return{u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},jn=function(e,t,n){return void 0===n&&(n=1),{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}},bn=function(e){return{u_matrix:e}},Hn=function(e,t,n,s){return{u_matrix:e,u_extrude_scale:y(t,1,n),u_intensity:s}},In=function(t,n,s,o){var i,a=e.create();return e.ortho(a,0,t.width,t.height,0,0,1),i=t.context.gl,{u_matrix:a,u_world:[i.drawingBufferWidth,i.drawingBufferHeight],u_image:s,u_color_ramp:o,u_opacity:n.paint.get("heatmap-opacity")}},Bn=function(t,n,s){var o,i,a,r,d=s.paint.get("hillshade-shadow-color"),u=s.paint.get("hillshade-highlight-color"),l=s.paint.get("hillshade-accent-color"),c=s.paint.get("hillshade-illumination-direction")*(Math.PI/180);return"viewport"===s.paint.get("hillshade-illumination-anchor")&&(c-=t.transform.angle),r=!t.options.moving,{u_matrix:t.transform.calculatePosMatrix(n.tileID.toUnwrapped(),r),u_image:0,u_latrange:(i=n.tileID,a=Math.pow(2,i.canonical.z),o=i.canonical.y,[new e.MercatorCoordinate(0,o/a).toLngLat().lat,new e.MercatorCoordinate(0,(o+1)/a).toLngLat().lat]),u_light:[s.paint.get("hillshade-exaggeration"),c],u_shadow:d,u_highlight:u,u_accent:l}},Vn=function(t,n){var o=n.stride,s=e.create();return e.ortho(s,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(s,s,[0,-e.EXTENT,0]),{u_matrix:s,u_image:1,u_dimension:[o,o],u_zoom:t.overscaledZ,u_unpack:n.getUnpackVector()}},it=function(t,n,s){var o=t.transform;return{u_matrix:pn(t,n,s),u_ratio:1/y(n,1,o.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Wn=function(t,n,s,o){return e.extend(it(t,n,s),{u_image:0,u_image_height:o})},Un=function(t,n,s,o){var i=t.transform,a=gn(n,i);return{u_matrix:pn(t,n,s),u_texsize:n.imageAtlasTexture.size,u_ratio:1/y(n,1,i.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[a,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Kn=function(t,n,s,o,i){var m=t.transform,a=t.lineAtlas,d=gn(n,m),u="round"===s.layout.get("line-cap"),r=a.getDash(o.from,u),c=a.getDash(o.to,u),l=r.width*i.fromScale,h=c.width*i.toScale;return e.extend(it(t,n,s),{u_patternscale_a:[d/l,-r.height/2],u_patternscale_b:[d/h,-c.height/2],u_sdfgamma:a.width/(256*Math.min(l,h)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:r.y,u_tex_y_b:c.y,u_mix:i.t})};function gn(e,t){return 1/y(e,1,t.tileZoom)}function pn(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}fn=function(e,t,n,s,o){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:s.mix,u_opacity:s.opacity*o.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:o.paint.get("raster-brightness-min"),u_brightness_high:o.paint.get("raster-brightness-max"),u_saturation_factor:(a=o.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(i=o.paint.get("raster-contrast"),i>0?1/(1-i):1+i),u_spin_weights:Xn(o.paint.get("raster-hue-rotate"))};var i,a};function Xn(e){e*=Math.PI/180;var n=Math.sin(e),t=Math.cos(e);return[(2*t+1)/3,(-Math.sqrt(3)*n-t+1)/3,(Math.sqrt(3)*n-t+1)/3]}var ke,hn=function(e,t,n,s,o,i,a,r,c,l){var d=o.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:d.cameraToCenterDistance,u_pitch:d.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:d.width/d.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:i,u_label_plane_matrix:a,u_coord_matrix:r,u_is_text:+c,u_pitch_with_map:+s,u_texsize:l,u_texture:0}},un=function(t,n,s,o,i,a,r,c,l,d,u){var h=i.transform;return e.extend(hn(t,n,s,o,i,a,r,c,l,d),{u_gamma_scale:o?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+u})},es=function(t,n,s,o,i,a,r,c,l,d){return e.extend(un(t,n,s,o,i,a,r,c,!0,l,!0),{u_texsize_icon:d,u_texture_icon:1})},ts=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},ns=function(t,n,s,o,i,a){return e.extend(function(e,t,n,s){var o=n.imageManager.getPattern(e.from.toString()),i=n.imageManager.getPattern(e.to.toString()),a=n.imageManager.getPixelSize(),u=a.width,h=a.height,r=Math.pow(2,s.tileID.overscaledZ),c=s.tileSize*Math.pow(2,n.transform.tileZoom)/r,l=c*(s.tileID.canonical.x+s.tileID.wrap*r),d=c*s.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:i.tl,u_pattern_br_b:i.br,u_texsize:[u,h],u_mix:t.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:i.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/y(s,1,n.transform.tileZoom),u_pixel_coord_upper:[l>>16,d>>16],u_pixel_coord_lower:[65535&l,65535&d]}}(o,a,s,i),{u_matrix:t,u_opacity:n})},ss={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,n.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},collisionBox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,n.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,n.u_overscale_factor)}},collisionCircle:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}},debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmapTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels)}},lineGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image),u_image_height:new e.Uniform1f(t,n.u_image_height)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},lineSDF:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},symbolTextAndIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}}};function dn(t,n,o,i,a,r,c){for(var u,m,f,p,g,j,_,O,D,L,R,v=t.context,V=v.gl,$=t.useProgram("collisionBox"),b=[],x=0,I=0,F=0;F<i.length;F++){var T=i[F],z=n.getTile(T),h=z.getBucket(o);h&&(_=T.posMatrix,0===a[0]&&0===a[1]||(_=t.translatePosMatrix(T.posMatrix,z,a,r)),p=c?h.textCollisionBox:h.iconCollisionBox,O=h.collisionCircleArray,O.length>0&&(g=e.create(),R=_,e.mul(g,h.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(g,g,h.placementViewportMatrix),b.push({circleArray:O,circleOffset:I,transform:R,invTransform:g}),I=x+=O.length/4),p&&$.draw(v,V.LINES,s.disabled,d.disabled,t.colorModeForRenderPass(),l.disabled,Nn(_,t.transform,z),o.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,t.transform.zoom,null,null,p.collisionVertexBuffer))}if(c&&b.length){L=t.useProgram("collisionCircle"),u=new e.StructArrayLayout2f1f2i16,u.resize(4*x),u._trim();for(var w=0,M=0,N=b;M<N.length;M+=1)for(f=N[M],j=0;j<f.circleArray.length/4;j++){var A=4*j,k=f.circleArray[A+0],y=f.circleArray[A+1],E=f.circleArray[A+2],C=f.circleArray[A+3];u.emplace(w++,k,y,E,C,0),u.emplace(w++,k,y,E,C,1),u.emplace(w++,k,y,E,C,2),u.emplace(w++,k,y,E,C,3)}(!ke||ke.length<2*x)&&(ke=function(t){var n,o,i=2*t,s=new e.StructArrayLayout3ui6;s.resize(i),s._trim();for(n=0;n<i;n++)o=6*n,s.uint16[o+0]=4*n+0,s.uint16[o+1]=4*n+1,s.uint16[o+2]=4*n+2,s.uint16[o+3]=4*n+2,s.uint16[o+4]=4*n+3,s.uint16[o+5]=4*n+0;return s}(x));for(var P=v.createIndexBuffer(ke,!0),H=v.createVertexBuffer(u,e.collisionCircleLayout.members,!0),S=0,B=b;S<B.length;S+=1)m=B[S],D=Ln(m.transform,m.invTransform,t.transform),L.draw(v,V.TRIANGLES,s.disabled,d.disabled,t.colorModeForRenderPass(),l.disabled,D,o.id,H,P,e.SegmentVector.simpleSegment(0,2*m.circleOffset,m.circleArray.length,m.circleArray.length/2),null,t.transform.zoom,null,null,null);H.destroy(),P.destroy()}}ln=e.identity(new Float32Array(16));function rs(t,n,s,o,i,a){var r=e.getAnchorAlignment(t),l=-(r.horizontalAlign-.5)*n,d=-(r.verticalAlign-.5)*s,c=e.evaluateVariableOffset(t,o);return new e.Point((l/i+c[0])*a,(d/i+c[1])*a)}function cs(t,n,s,o,i,a,r,c,l,d,u){var F=t.text.placedSymbolArray,b=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,k={};b.clear();for(j=0;j<F.length;j++){var h=F.get(j),N=t.allowVerticalPlacement&&!h.placedOrientation,m=h.hidden||!h.crossTileID||N?null:o[h.crossTileID];if(m){var E=new e.Point(h.anchorX,h.anchorY),C=O(E,s?c:r),D=st(a.cameraToCenterDistance,C.signedDistanceFromCamera),M=i.evaluateSizeForFeature(t.textSizeData,d,h)*D/e.ONE_EM;s&&(M*=t.tilePixelRatio/l);for(var p,g,v,j,y,_,z=m.width,T=m.height,w=rs(m.anchor,z,T,m.textOffset,m.textBoxScale,M),A=s?O(E.add(w),r).point:C.point.add(n?w.rotate(-a.angle):w),S=t.allowVerticalPlacement&&h.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,x=0;x<h.numGlyphs;x++)e.addDynamicAttributes(b,A,S);u&&h.associatedIconIndex>=0&&(k[h.associatedIconIndex]={shiftedAnchor:A,angle:S})}else ie(h.numGlyphs,b)}if(u){f.clear();for(_=t.icon.placedSymbolArray,p=0;p<_.length;p++)if(g=_.get(p),g.hidden)ie(g.numGlyphs,f);else if(v=k[p],v)for(y=0;y<g.numGlyphs;y++)e.addDynamicAttributes(f,v.shiftedAnchor,v.angle);else ie(g.numGlyphs,f);t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(b)}function ls(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function cn(t,n,o,i,a,r,c,l,d,u,h,m){for(var f,j,C,k,A,S,z,D,$,U,K,I=t.context,v=I.gl,X=t.transform,M="map"===l,b="map"===d,H=M&&"point"!==o.layout.get("symbol-placement"),N=M&&!b&&!H,ce=void 0!==o.layout.get("symbol-sort-key").constantOr(1),Q=!1,J=t.depthModeForSublayer(0,s.ReadOnly),te=o.layout.get("text-variable-anchor"),E=[],T=0,W=i;T<W.length;T+=1){var O=W[T],g=n.getTile(O),p=g.getBucket(o);if(p&&(j=a?p.text:p.icon,j&&j.segments.get().length)){var de=j.programConfigurations.get(o.id),x=a||p.sdfIcons,_=a?p.textSizeData:p.iconSizeData,ee=b||0!==X.pitch,ae=t.useProgram(ls(x,a,p),de),P=e.evaluateSizeForZoom(_,X.zoom),w=void 0,oe=[0,0],B=void 0,V=void 0,Z=null,se=void 0;a?(B=g.glyphAtlasTexture,V=v.LINEAR,w=g.glyphAtlasTexture.size,p.iconsInText)&&(oe=g.imageAtlasTexture.size,Z=g.imageAtlasTexture,U="composite"===_.kind||"camera"===_.kind,se=ee||t.options.rotating||t.options.zooming||U?v.LINEAR:v.NEAREST):(K=1!==o.layout.get("icon-size").constantOr(0)||p.iconsNeedLinear,B=g.imageAtlasTexture,V=x||t.options.rotating||t.options.zooming||K||ee?v.LINEAR:v.NEAREST,w=g.imageAtlasTexture.size);var q=y(g,1,t.transform.zoom),Y=et(O.posMatrix,b,M,t.transform,q),G=Ct(O.posMatrix,b,M,t.transform,q),le=te&&p.hasTextData(),re="none"!==o.layout.get("icon-text-fit")&&le&&p.hasIconData();H&&Ys(p,O.posMatrix,t,a,Y,G,b,u);var F=t.translatePosMatrix(O.posMatrix,g,r,c),R=H||a&&te||re?ln:Y,L=t.translatePosMatrix(G,g,r,c,!0),ie=x&&0!==o.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),ne={program:ae,buffers:j,uniformValues:x?p.iconsInText?es(_.kind,P,N,b,t,F,R,L,w,oe):un(_.kind,P,N,b,t,F,R,L,a,w,!0):hn(_.kind,P,N,b,t,F,R,L,a,w),atlasTexture:B,atlasTextureIcon:Z,atlasInterpolation:V,atlasInterpolationIcon:se,isSDF:x,hasHalo:ie};if(ce&&p.canOverlap){Q=!0;for(k=0,$=j.segments.get();k<$.length;k+=1)z=$[k],E.push({segments:new e.SegmentVector([z]),sortKey:z.sortKey,state:ne})}else E.push({segments:j.segments,sortKey:0,state:ne})}}Q&&E.sort(function(e,t){return e.sortKey-t.sortKey});for(C=0,D=E;C<D.length;C+=1)S=D[C],f=S.state,(I.activeTexture.set(v.TEXTURE0),f.atlasTexture.bind(f.atlasInterpolation,v.CLAMP_TO_EDGE),f.atlasTextureIcon&&(I.activeTexture.set(v.TEXTURE1),f.atlasTextureIcon&&f.atlasTextureIcon.bind(f.atlasInterpolationIcon,v.CLAMP_TO_EDGE)),f.isSDF)&&(A=f.uniformValues,f.hasHalo&&(A.u_is_halo=1,rn(f.buffers,S.segments,o,t,f.program,J,h,m,A)),A.u_is_halo=0),rn(f.buffers,S.segments,o,t,f.program,J,h,m,f.uniformValues)}function rn(e,t,n,s,o,i,a,r,c){var d=s.context,u=d.gl;o.draw(d,u.TRIANGLES,i,a,r,l.disabled,c,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,s.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function an(e,t,n,s,o,i,a){var r,c,h,m,f,p,g,v,b,y,_,w,x,C,S,d=e.context.gl,j=n.paint.get("fill-pattern"),u=j&&j.constantOr(1),O=n.getCrossfadeParameters();a?(g=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",x=d.LINES):(g=u?"fillPattern":"fill",x=d.TRIANGLES);for(f=0,b=s;f<b.length;f+=1)if(p=b[f],r=t.getTile(p),(!u||r.patternsLoaded())&&(c=r.getBucket(n),c)){if(h=c.programConfigurations.get(n.id),S=e.useProgram(g,h),u&&(e.context.activeTexture.set(d.TEXTURE0),r.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),h.updatePaintBuffers(O)),v=j.constantOr(null),v&&r.imageAtlas){var E=r.imageAtlas,k=E.patternPositions[v.to.toString()],A=E.patternPositions[v.from.toString()];k&&A&&h.setConstantPatternPositions(k,A)}m=e.translatePosMatrix(p.posMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor")),a?(_=c.indexBuffer2,y=c.segments2,C=[d.drawingBufferWidth,d.drawingBufferHeight],w="fillOutlinePattern"===g&&u?zn(m,e,O,r,C):Tn(m,C)):(_=c.indexBuffer,y=c.segments,w=u?yn(m,e,O,r):_n(m)),S.draw(e.context,x,o,e.stencilModeForClipping(p),i,l.disabled,w,n.id,c.layoutVertexBuffer,_,y,n.paint,e.transform.zoom,h)}}function Ze(e,t,n,s,o,i,a){for(var c,u,y,g=e.context,p=g.gl,_=n.paint.get("fill-extrusion-pattern"),m=_.constantOr(1),j=n.getCrossfadeParameters(),b=n.paint.get("fill-extrusion-opacity"),f=0,v=s;f<v.length;f+=1){var h=v[f],r=t.getTile(h),d=r.getBucket(n);if(d){if(c=d.programConfigurations.get(n.id),y=e.useProgram(m?"fillExtrusionPattern":"fillExtrusion",c),m&&(e.context.activeTexture.set(p.TEXTURE0),r.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),c.updatePaintBuffers(j)),u=_.constantOr(null),u&&r.imageAtlas){var w=r.imageAtlas,O=w.patternPositions[u.to.toString()],x=w.patternPositions[u.from.toString()];O&&x&&c.setConstantPatternPositions(O,x)}var C=e.translatePosMatrix(h.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),E=n.paint.get("fill-extrusion-vertical-gradient"),k=m?Sn(C,e,E,b,h,j,r):qt(C,e,E,b);y.draw(g,g.gl.TRIANGLES,o,i,a,l.backCCW,k,n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,n.paint,e.transform.zoom,c)}}}function fs(e,t,n,s,o,i){var d,u,r=e.context,a=r.gl,c=t.fbo;c&&(d=e.useProgram("hillshade"),r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,c.colorAttachment.get()),u=Bn(e,t,n),d.draw(r,a.TRIANGLES,s,o,i,l.disabled,u,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments))}function ps(t,n,s,o,i,a){var h,m,f,c=t.context,r=c.gl,d=n.dem;if(d&&d.data){var u=d.dim,g=d.stride,p=d.getPixels();c.activeTexture.set(r.TEXTURE1),c.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(g),n.demTexture?(m=n.demTexture,m.update(p,{premultiply:!1}),m.bind(r.NEAREST,r.CLAMP_TO_EDGE)):(n.demTexture=new e.Texture(c,p,r.RGBA,{premultiply:!1}),n.demTexture.bind(r.NEAREST,r.CLAMP_TO_EDGE)),c.activeTexture.set(r.TEXTURE0),h=n.fbo,h||(f=new e.Texture(c,{width:u,height:u,data:null},r.RGBA),f.bind(r.LINEAR,r.CLAMP_TO_EDGE),(h=n.fbo=c.createFramebuffer(u,u,!0)).colorAttachment.set(f.texture)),c.bindFramebuffer.set(h.framebuffer),c.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(c,r.TRIANGLES,o,i,a,l.disabled,Vn(n.tileID,d),s.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function gs(t,n,s,o,i){if(a=o.paint.get("raster-fade-duration"),a>0){var a,r=e.browser.now(),c=(r-t.timeAdded)/a,m=n?(r-n.timeAdded)/a:-1,l=s.getSource(),d=i.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),u=!n||Math.abs(n.tileID.overscaledZ-d)>Math.abs(t.tileID.overscaledZ-d),h=u&&t.refreshedUponExpiration?1:e.clamp(u?c:1-m,0,1);return t.refreshedUponExpiration&&c>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var vs=new e.Color(1,0,0,1),bs=new e.Color(0,1,0,1),js=new e.Color(0,0,1,1),ys=new e.Color(1,0,1,1),_s=new e.Color(0,1,1,1);function ws(e){var n,t=e.transform.padding;nn(e,e.transform.height-(t.top||0),3,vs),nn(e,t.bottom||0,3,bs),tn(e,t.left||0,3,js),tn(e,e.transform.width-(t.right||0),3,ys),n=e.transform.centerPoint,!function(e,t,n,s){var o=20,i=2;Ue(e,t-i/2,n-o/2,i,o,s),Ue(e,t-o/2,n-i/2,o,i,s)}(e,n.x,e.transform.height-n.y,_s)}function nn(e,t,n,s){Ue(e,0,t+n/2,e.transform.width,n,s)}function tn(e,t,n,s){Ue(e,t-n/2,0,n,e.transform.height,s)}function Ue(t,n,s,o,i,a){var c=t.context,r=c.gl;r.enable(r.SCISSOR_TEST),r.scissor(n*e.browser.devicePixelRatio,s*e.browser.devicePixelRatio,o*e.browser.devicePixelRatio,i*e.browser.devicePixelRatio),c.clear({color:a}),r.disable(r.SCISSOR_TEST)}function Es(t,n,o){var a=t.context,i=a.gl,r=o.posMatrix,c=t.useProgram("debug"),u=s.disabled,m=d.disabled,v=t.colorModeForRenderPass(),p="$debug";a.activeTexture.set(i.TEXTURE0),t.emptyTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),c.draw(a,i.LINE_STRIP,u,m,v,l.disabled,jn(r,e.Color.red),p,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var f=n.getTileByID(o.key).latestRawTileData,b=f&&f.byteLength||0,j=Math.floor(b/1024),y=n.getTile(o).tileSize,_=512/Math.min(y,512)*(o.overscaledZ/t.transform.zoom)*.5,g=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(g+=" => "+o.overscaledZ),function(e,t){e.initDebugOverlayCanvas();var s=e.debugOverlayCanvas,o=e.context.gl,n=e.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,s.width,s.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(t,5,5),n.strokeText(t,5,5),e.debugOverlayTexture.update(s),e.debugOverlayTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}(t,g+" "+j+"kb"),c.draw(a,i.TRIANGLES,u,m,h.alphaBlended,l.disabled,jn(r,e.Color.transparent,_),p,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}qe={symbol:function(t,n,s,o,i){if("translucent"===t.renderPass){var a=d.disabled,r=t.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(t,n,s,o,i,a,r){for(var v,h=n.transform,p="map"===i,f="map"===a,u=0,m=t;u<m.length;u+=1){var l=m[u],d=o.getTile(l),c=d.getBucket(s);if(c&&c.text&&c.text.segments.get().length){var b=c.textSizeData,g=e.evaluateSizeForZoom(b,h.zoom),j=y(d,1,n.transform.zoom),_=et(l.posMatrix,f,p,n.transform,j),w="none"!==s.layout.get("icon-text-fit")&&c.hasIconData();g&&(v=Math.pow(2,h.zoom-d.tileID.overscaledZ),cs(c,p,f,r,e.symbolSize,h,_,l.posMatrix,v,g,w))}}}(o,t,s,n,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),i),0!==s.paint.get("icon-opacity").constantOr(1)&&cn(t,n,s,o,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),a,r),0!==s.paint.get("text-opacity").constantOr(1)&&cn(t,n,s,o,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),a,r),n.map.showCollisionBoxes&&(dn(t,n,s,o,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),dn(t,n,s,o,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,o,i){if("translucent"===t.renderPass){var x=o.paint.get("circle-opacity"),M=o.paint.get("circle-stroke-width"),S=o.paint.get("circle-stroke-opacity"),w=void 0!==o.layout.get("circle-sort-key").constantOr(1);if(0!==x.constantOr(1)||0!==M.constantOr(1)&&0!==S.constantOr(1)){for(var j=t.context,A=j.gl,k=t.depthModeForSublayer(0,s.ReadOnly),E=d.disabled,C=t.colorModeForRenderPass(),c=[],m=0;m<i.length;m++){var y=i[m],_=n.getTile(y),a=_.getBucket(o);if(a)if(g=a.programConfigurations.get(o.id),b={programConfiguration:g,program:t.useProgram("circle",g),layoutVertexBuffer:a.layoutVertexBuffer,indexBuffer:a.indexBuffer,uniformValues:Dn(t,y,_,o)},w)for(u=0,v=a.segments.get();u<v.length;u+=1)p=v[u],c.push({segments:new e.SegmentVector([p]),sortKey:p.sortKey,state:b});else c.push({segments:a.segments,sortKey:0,state:b})}w&&c.sort(function(e,t){return e.sortKey-t.sortKey});for(h=0,f=c;h<f.length;h+=1){var u,h,f,p,g,v,b,O=f[h],r=O.state,F=r.programConfiguration,T=r.program,z=r.layoutVertexBuffer,D=r.indexBuffer,N=r.uniformValues,L=O.segments;T.draw(j,A.TRIANGLES,k,E,C,l.disabled,N,o.id,z,D,L,o.paint,t.transform.zoom,F)}}}},heatmap:function(t,n,o,i){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a,c,u,m,r=t.context,f=r.gl,v=d.disabled,g=new h([f.ONE,f.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(e,t,n){var o,i,s=e.gl;e.activeTexture.set(s.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]),o=n.heatmapFbo,o?(s.bindTexture(s.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)):(i=s.createTexture(),s.bindTexture(s.TEXTURE_2D,i),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),o=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,s){var o=e.gl,i=e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,t.width/4,t.height/4,0,o.RGBA,i,null),s.colorAttachment.set(n)}(e,t,i,o))})(r,t,o),r.clear({color:e.Color.transparent});for(c=0;c<i.length;c++)if(u=i[c],!n.hasRenderableParent(u)&&(m=n.getTile(u),a=m.getBucket(o),a)){var p=a.programConfigurations.get(o.id),b=t.useProgram("heatmap",p),j=t.transform.zoom;b.draw(r,f.TRIANGLES,s.disabled,v,g,l.disabled,Hn(u.posMatrix,m,j,o.paint.get("heatmap-intensity")),o.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,o.paint,t.transform.zoom,p)}r.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var a,i=t.context,o=i.gl,r=n.heatmapFbo;r&&(i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),i.activeTexture.set(o.TEXTURE1),a=n.colorRampTexture,a||(a=n.colorRampTexture=new e.Texture(i,n.colorRamp,o.RGBA)),a.bind(o.LINEAR,o.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,o.TRIANGLES,s.disabled,d.disabled,t.colorModeForRenderPass(),l.disabled,In(t,n,0,1),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom))}(t,o))},line:function(t,n,o,i){if("translucent"===t.renderPass&&(F=o.paint.get("line-opacity"),S=o.paint.get("line-width"),0!==F.constantOr(1)&&0!==S.constantOr(1)))for(var a,r,c,h,v,b,E,S,F,L=t.depthModeForSublayer(0,s.ReadOnly),N=t.colorModeForRenderPass(),p=o.paint.get("line-dasharray"),C=o.paint.get("line-pattern"),m=C.constantOr(1),_=o.paint.get("line-gradient"),g=o.getCrossfadeParameters(),D=m?"linePattern":p?"lineSDF":_?"lineGradient":"line",u=t.context,d=u.gl,x=!0,y=0,O=i;y<O.length;y+=1)if(h=O[y],c=n.getTile(h),(!m||c.patternsLoaded())&&(r=c.getBucket(o),r)){var f=r.programConfigurations.get(o.id),z=t.context.program.get(),k=t.useProgram(D,f),T=x||k.program!==z,j=C.constantOr(null);if(j&&c.imageAtlas){var M=c.imageAtlas,w=M.patternPositions[j.to.toString()],A=M.patternPositions[j.from.toString()];w&&A&&f.setConstantPatternPositions(w,A)}if(E=m?Un(t,c,o,g):p?Kn(t,c,o,p,g):_?Wn(t,c,o,r.lineClipsArray.length):it(t,c,o),m)u.activeTexture.set(d.TEXTURE0),c.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),f.updatePaintBuffers(g);else if(p&&(T||t.lineAtlas.dirty))u.activeTexture.set(d.TEXTURE0),t.lineAtlas.bind(u);else if(_){if(a=r.gradients[o.id],v=a.texture,o.gradientVersion!==a.version){if(b=256,o.stepInterpolant){var R=n.getSource().maxzoom,P=h.canonical.z===R?Math.ceil(1<<t.transform.maxZoom-h.canonical.z):1,H=r.maxLineLength/e.EXTENT*1024*P;b=e.clamp(e.nextPowerOfTwo(H),256,u.maxTextureSize)}a.gradient=e.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:b,image:a.gradient||void 0,clips:r.lineClipsArray}),a.texture?a.texture.update(a.gradient):a.texture=new e.Texture(u,a.gradient,d.RGBA),a.version=o.gradientVersion,v=a.texture}u.activeTexture.set(d.TEXTURE0),v.bind(o.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE)}k.draw(u,d.TRIANGLES,L,t.stencilModeForClipping(h),N,l.disabled,E,o.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,o.paint,t.transform.zoom,f,r.layoutVertexBuffer2),x=!1}},fill:function(t,n,o,i){if(r=o.paint.get("fill-color"),a=o.paint.get("fill-opacity"),0!==a.constantOr(1)){var a,r,l,d,c=t.colorModeForRenderPass(),u=o.paint.get("fill-pattern"),h=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===r.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";t.renderPass===h&&(l=t.depthModeForSublayer(1,"opaque"===t.renderPass?s.ReadWrite:s.ReadOnly),an(t,n,o,i,l,c,!1)),"translucent"===t.renderPass&&o.paint.get("fill-antialias")&&(d=t.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,s.ReadOnly),an(t,n,o,i,d,c,!0))}},"fill-extrusion":function(e,t,n,o){var i,r,a=n.paint.get("fill-extrusion-opacity");0!==a&&"translucent"===e.renderPass&&(i=new s(e.context.gl.LEQUAL,s.ReadWrite,e.depthRangeFor3D),1!==a||n.paint.get("fill-extrusion-pattern").constantOr(1)?(Ze(e,t,n,o,i,d.disabled,h.disabled),Ze(e,t,n,o,i,e.stencilModeFor3D(),e.colorModeForRenderPass())):(r=e.colorModeForRenderPass(),Ze(e,t,n,o,i,d.disabled,r)))},hillshade:function(e,t,n,o){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i,a,f=e.context,u=e.depthModeForSublayer(0,s.ReadOnly),h=e.colorModeForRenderPass(),l="translucent"===e.renderPass?e.stencilConfigForOverlap(o):[{},o],m=l[0],r=0,c=l[1];r<c.length;r+=1)a=c[r],i=t.getTile(a),i.needsHillshadePrepare&&"offscreen"===e.renderPass?ps(e,i,n,u,d.disabled,h):"translucent"===e.renderPass&&fs(e,i,n,u,m[a.overscaledZ],h);f.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,o){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")&&o.length)for(var v,c=e.context,i=c.gl,m=t.getSource(),y=e.useProgram("raster"),b=e.colorModeForRenderPass(),w=m instanceof ye?[{},o]:e.stencilConfigForOverlap(o),k=w[0],p=w[1],E=p[p.length-1].overscaledZ,x=!e.options.moving,f=0,_=p;f<_.length;f+=1){var r=_[f],j=e.depthModeForSublayer(r.overscaledZ-E,1===n.paint.get("raster-opacity")?s.ReadWrite:s.ReadOnly,i.LESS),a=t.getTile(r),A=e.transform.calculatePosMatrix(r.toUnwrapped(),x);a.registerFadeDuration(n.paint.get("raster-fade-duration"));var h=t.findLoadedParent(r,0),C=gs(a,h,t,n,e.transform),u=void 0,O=void 0,g="nearest"===n.paint.get("raster-resampling")?i.NEAREST:i.LINEAR;c.activeTexture.set(i.TEXTURE0),a.texture.bind(g,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),c.activeTexture.set(i.TEXTURE1),h?(h.texture.bind(g,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),u=Math.pow(2,h.tileID.overscaledZ-a.tileID.overscaledZ),O=[a.tileID.canonical.x*u%1,a.tileID.canonical.y*u%1]):a.texture.bind(g,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),v=fn(A,O||[0,0],u||1,C,n),m instanceof ye?y.draw(c,i.TRIANGLES,j,d.disabled,b,l.disabled,v,n.id,m.boundsBuffer,e.quadTriangleIndexBuffer,m.boundsSegments):y.draw(c,i.TRIANGLES,j,k[r.overscaledZ],b,l.disabled,v,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,n){if(r=n.paint.get("background-color"),i=n.paint.get("background-opacity"),0!==i){var i,r,u,a=e.context,p=a.gl,h=e.transform,m=h.tileSize,o=n.paint.get("background-pattern");if(!e.isPatternMissing(o)&&(u=!o&&1===r.a&&1===i&&e.opaquePassEnabledForLayer()?"opaque":"translucent",e.renderPass===u)){var O=d.disabled,b=e.depthModeForSublayer(0,"opaque"===u?s.ReadWrite:s.ReadOnly),w=e.colorModeForRenderPass(),_=e.useProgram(o?"backgroundPattern":"background"),y=h.coveringTiles({tileSize:m});o&&(a.activeTexture.set(p.TEXTURE0),e.imageManager.bind(e.context));for(var j=n.getCrossfadeParameters(),c=0,v=y;c<v.length;c+=1){var g=v[c],f=e.transform.calculatePosMatrix(g.toUnwrapped()),x=o?ns(f,i,e,o,{tileID:g,tileSize:m},j):ts(f,i,r);_.draw(a,p.TRIANGLES,b,O,w,l.disabled,x,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}},debug:function(e,t,n){for(var s=0;s<n.length;s++)Es(e,t,n[s])},custom:function(e,t,n){var a,r,o=e.context,i=n.implementation;"offscreen"===e.renderPass?(a=i.prerender,a&&(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),a.call(i,o.gl,e.transform.customLayerMatrix()),o.setDirty(),e.setBaseState())):"translucent"===e.renderPass&&(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode(d.disabled),r="3d"===i.renderingMode?new s(e.context.gl.LEQUAL,s.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,s.ReadOnly),o.setDepthMode(r),i.render(o.gl,e.transform.customLayerMatrix()),o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null))}},r=function(e,t){this.context=new j(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=ee.maxUnderzooming+ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ve,this.gpuTimers={}},r.prototype.resize=function(t,n){if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i,s=0,o=this.style._order;s<o.length;s+=1)i=o[s],this.style._layers[i].resize()},r.prototype.setup=function(){var n,s,o,i,r,c,t=this.context,a=new e.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(e.EXTENT,0),a.emplaceBack(0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(a,nt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2),s=new e.StructArrayLayout2i4,s.emplaceBack(0,0),s.emplaceBack(e.EXTENT,0),s.emplaceBack(0,e.EXTENT),s.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(s,nt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5),o=new e.StructArrayLayout4i8,o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(o,Ke.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2),i=new e.StructArrayLayout2i4,i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,nt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2),n=new e.StructArrayLayout1ui2,n.emplaceBack(0),n.emplaceBack(1),n.emplaceBack(3),n.emplaceBack(2),n.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(n),c=new e.StructArrayLayout3ui6,c.emplaceBack(0,1,2),c.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(c),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA),r=this.context.gl,this.stencilClearMode=new d({func:r.ALWAYS,mask:0},0,255,r.ZERO,r.ZERO,r.ZERO)},r.prototype.clearStencil=function(){var t,o=this.context,n=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0,t=e.create(),e.ortho(t,0,this.width,this.height,0,0,1),e.scale(t,t,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,n.TRIANGLES,s.disabled,this.stencilClearMode,h.disabled,l.disabled,bn(t),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},r.prototype._renderTileClippingMasks=function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var i,a,r,c,u,o=this.context,n=o.gl;this.nextStencilID+t.length>256&&this.clearStencil(),o.setColorMode(h.disabled),o.setDepthMode(s.disabled),c=this.useProgram("clippingMask"),this._tileClippingMaskIDs={};for(i=0,a=t;i<a.length;i+=1)r=a[i],u=this._tileClippingMaskIDs[r.key]=this.nextStencilID++,c.draw(o,n.TRIANGLES,s.disabled,new d({func:n.ALWAYS,mask:0},u,255,n.KEEP,n.KEEP,n.REPLACE),h.disabled,l.disabled,bn(r.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},r.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new d({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},r.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new d({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},r.prototype.stencilConfigForOverlap=function(e){var t,a,r,s=this.context.gl,n=e.sort(function(e,t){return t.overscaledZ-e.overscaledZ}),i=n[n.length-1].overscaledZ,o=n[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(a={},t=0;t<o;t++)a[t+i]=new d({func:s.GEQUAL,mask:255},t+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=o,[a,n]}return[(r={},r[i]=d.disabled,r),n]},r.prototype.colorModeForRenderPass=function(){var t,n=this.context.gl;return this._showOverdrawInspector?(t=1/8,new h([n.CONSTANT_COLOR,n.ONE],new e.Color(t,t,t,0),[!0,!0,!0,!0])):"opaque"===this.renderPass?h.unblended:h.alphaBlended},r.prototype.depthModeForSublayer=function(e,t,n){if(!this.opaquePassEnabledForLayer())return s.disabled;var o=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new s(n||this.context.gl.LEQUAL,t,[o,o])},r.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},r.prototype.render=function(t,n){j=this,this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame(),s=this.style._order,o=this.style.sourceCaches;for(C in o)v=o[C],v.used&&v.prepare(this.context);var s,o,i,r,c,l,d,m,p,g,v,b,j,y,_,C,u={},f={},w={};for(l in o)p=o[l],u[l]=p.getVisibleCoordinates(),f[l]=u[l].slice().reverse(),w[l]=p.getVisibleCoordinates(!0).reverse();this.opaquePassCutoff=1/0;for(c=0;c<s.length;c++)if(_=s[c],this.style._layers[_].is3D()){this.opaquePassCutoff=c;break}this.renderPass="offscreen";for(m=0,b=s;m<b.length;m+=1)y=b[m],i=this.style._layers[y],i.hasOffscreenPass()&&!i.isHidden(this.transform.zoom)&&(g=f[i.source],("custom"===i.type||g.length)&&this.renderLayer(this,o[i.source],i,g));for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=s.length-1;this.currentLayer>=0;this.currentLayer--){var h=this.style._layers[s[this.currentLayer]],x=o[h.source],O=u[h.source];this._renderTileClippingMasks(h,O),this.renderLayer(this,x,h,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<s.length;this.currentLayer++){var a=this.style._layers[s[this.currentLayer]],E=o[a.source],k=("symbol"===a.type?w:f)[a.source];this._renderTileClippingMasks(a,u[a.source]),this.renderLayer(this,E,a,k)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(e){e.source&&!e.isHidden(j.transform.zoom)&&(e.source!==(d&&d.id)&&(d=j.style.sourceCaches[e.source]),(!r||r.getSource().maxzoom<d.getSource().maxzoom)&&(r=d))}),r&&qe.debug(this,r,r.getVisibleCoordinates())),this.options.showPadding&&ws(this),this.context.setDefault()},r.prototype.renderLayer=function(e,t,n,s){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||s.length)&&(this.id=n.id,this.gpuTimingStart(n),qe[n.type](e,t,n,s,this.style.placement.variableOffsets),this.gpuTimingEnd())},r.prototype.gpuTimingStart=function(e){if(this.options.gpuTiming){var n=this.context.extTimerQuery,t=this.gpuTimers[e.id];t||(t=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:n.createQueryEXT()}),t.calls++,n.beginQueryEXT(n.TIME_ELAPSED_EXT,t.query)}},r.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}},r.prototype.collectGpuTimers=function(){var e=this.gpuTimers;return this.gpuTimers={},e},r.prototype.queryGpuTimers=function(e){t={};for(s in e){var t,s,o=e[s],n=this.context.extTimerQuery,i=n.getQueryObjectEXT(o.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(o.query),t[s]=i}return t},r.prototype.translatePosMatrix=function(t,n,s,o,i){if(!s[0]&&!s[1])return t;if(a=i?"map"===o?this.transform.angle:0:"viewport"===o?-this.transform.angle:0,a){var a,r,d,c=Math.sin(a),l=Math.cos(a);s=[s[0]*l-s[1]*c,s[0]*c+s[1]*l]}return d=[i?s[0]:y(n,s[0],this.transform.zoom),i?s[1]:y(n,s[1],this.transform.zoom),0],r=new Float32Array(16),e.translate(r,t,d),r},r.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},r.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},r.prototype.isPatternMissing=function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n},r.prototype.useProgram=function(e,t){this.cache=this.cache||{};var n=""+e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new ht(this.context,e,On[e],t,ss[e],this._showOverdrawInspector)),this.cache[n]},r.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},r.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)},r.prototype.initDebugOverlayCanvas=function(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var t=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,t.RGBA)}},r.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()},Ae=function(e,t){this.points=e,this.planes=t},Ae.fromInvProjectionMatrix=function(t,n,s){var i=Math.pow(2,s),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(n){return e.transformMat4([],n,t)}).map(function(t){return e.scale$1([],t,1/t[3]/n*i)}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(t){var s=e.sub([],o[t[0]],o[t[1]]),i=e.sub([],o[t[2]],o[t[1]]),n=e.normalize([],e.cross([],s,i)),a=-e.dot(n,o[t[1]]);return n.concat(a)});return new Ae(o,a)},U=function(t,n){this.min=t,this.max=n,this.center=e.scale$2([],e.add([],this.min,this.max),.5)},U.prototype.quadrant=function(t){for(var s=[t%2==0,t<2],i=e.clone$2(this.min),o=e.clone$2(this.max),n=0;n<s.length;n++)i[n]=s[n]?this.min[n]:this.center[n],o[n]=s[n]?this.center[n]:this.max[n];return o[2]=this.max[2],new U(i,o)},U.prototype.distanceX=function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]},U.prototype.distanceY=function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]},U.prototype.intersects=function(t){for(var n,d,c=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],u=!0,o=0;o<t.planes.length;o++){for(var h=t.planes[o],a=0,r=0;r<c.length;r++)a+=e.dot$1(h,c[r])>=0;if(0===a)return 0;a!==c.length&&(u=!1)}if(u)return 2;for(n=0;n<3;n++){for(var s=Number.MAX_VALUE,l=-Number.MAX_VALUE,i=0;i<t.points.length;i++)d=t.points[i][n]-this.min[n],s=Math.min(s,d),l=Math.max(l,d);if(l<0||s>this.max[n]-this.min[n])return 0}return 1},P=function(e,t,n,s){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===s&&(s=0),isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(s)||s<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=s},P.prototype.interpolate=function(t,n,s){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,s)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,s)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,s)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,s)),this},P.prototype.getCenter=function(t,n){var s=e.clamp((this.left+t-this.right)/2,0,t),o=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(s,o)},P.prototype.equals=function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right},P.prototype.clone=function(){return new P(this.top,this.bottom,this.left,this.right)},P.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}},o=function(t,n,s,o,i){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=s??0,this._maxPitch=o??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new P,this._posMatrixCache={},this._alignedPosMatrixCache={}},a={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}},o.prototype.clone=function(){var e=new o(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e},a.minZoom.get=function(){return this._minZoom},a.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},a.maxZoom.get=function(){return this._maxZoom},a.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},a.minPitch.get=function(){return this._minPitch},a.minPitch.set=function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))},a.maxPitch.get=function(){return this._maxPitch},a.maxPitch.set=function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))},a.renderWorldCopies.get=function(){return this._renderWorldCopies},a.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},a.worldSize.get=function(){return this.tileSize*this.scale},a.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},a.size.get=function(){return new e.Point(this.width,this.height)},a.bearing.get=function(){return-this.angle/Math.PI*180},a.bearing.set=function(t){var n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},a.pitch.get=function(){return this._pitch/Math.PI*180},a.pitch.set=function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},a.fov.get=function(){return this._fov/Math.PI*180},a.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},a.zoom.get=function(){return this._zoom},a.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},a.center.get=function(){return this._center},a.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},a.padding.get=function(){return this._edgeInsets.toJSON()},a.padding.set=function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())},a.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},o.prototype.isPaddingEqual=function(e){return this._edgeInsets.equals(e)},o.prototype.interpolatePadding=function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()},o.prototype.coveringZoomLevel=function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)},o.prototype.getVisibleUnwrappedCoordinates=function(t){if(s=[new e.UnwrappedTileID(0,t)],this._renderWorldCopies)for(var s,r=this.pointCoordinate(new e.Point(0,0)),o=this.pointCoordinate(new e.Point(this.width,0)),i=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),c=Math.floor(Math.min(r.x,o.x,i.x,a.x)),l=Math.floor(Math.max(r.x,o.x,i.x,a.x)),n=c-1;n<=l+1;n++)0!==n&&s.push(new e.UnwrappedTileID(n,t));return s},o.prototype.coveringTiles=function(t){if(s=this.coveringZoomLevel(t),p=s,void 0!==t.minzoom&&s<t.minzoom)return[];void 0!==t.maxzoom&&s>t.maxzoom&&(s=t.maxzoom);var s,i,r,m,p,v,y,g=e.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,s),c=[a*g.x,a*g.y,0],C=Ae.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),j=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(j=s);var l=function(e){return{aabb:new U([e*a,0,0],[(e+1)*a,a,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},o=[],b=[],h=s,x=t.reparseOverscaled?p:s;if(this._renderWorldCopies)for(r=1;r<=3;r++)o.push(l(-r)),o.push(l(r));for(o.push(l(0));o.length>0;){var n=o.pop(),d=n.x,u=n.y,f=n.fullyVisible;if(!f){if(m=n.aabb.intersects(C),0===m)continue;f=2===m}var E=n.aabb.distanceX(c),_=n.aabb.distanceY(c),w=Math.max(Math.abs(E),Math.abs(_)),O=3+(1<<h-n.zoom)-2;if(n.zoom===h||w>O&&n.zoom>=j)b.push({tileID:new e.OverscaledTileID(n.zoom===h?x:n.zoom,n.wrap,n.zoom,d,u),distanceSq:e.sqrLen([c[0]-.5-d,c[1]-.5-u])});else for(i=0;i<4;i++)v=(d<<1)+i%2,y=(u<<1)+(i>>1),o.push({aabb:n.aabb.quadrant(i),zoom:n.zoom+1,x:v,y,wrap:n.wrap,fullyVisible:f})}return b.sort(function(e,t){return e.distanceSq-t.distanceSq}).map(function(e){return e.tileID})},o.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},a.unmodified.get=function(){return this._unmodified},o.prototype.zoomScale=function(e){return Math.pow(2,e)},o.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},o.prototype.project=function(t){var n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)},o.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},a.point.get=function(){return this.project(this.center)},o.prototype.setLocationAtPoint=function(t,n){var s=this.pointCoordinate(n),o=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),a=new e.MercatorCoordinate(i.x-(s.x-o.x),i.y-(s.y-o.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},o.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},o.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},o.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},o.prototype.coordinateLocation=function(e){return e.toLngLat()},o.prototype.pointCoordinate=function(t){n=[t.x,t.y,0,1],s=[t.x,t.y,1,1],e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(s,s,this.pixelMatrixInverse);var n,s,o=n[3],i=s[3],h=n[0]/o,l=s[0]/i,d=n[1]/o,u=s[1]/i,a=n[2]/o,c=s[2]/i,r=a===c?0:(0-a)/(c-a);return new e.MercatorCoordinate(e.number(h,l,r)/this.worldSize,e.number(d,u,r)/this.worldSize)},o.prototype.coordinatePoint=function(t){var n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix),new e.Point(n[0]/n[3],n[1]/n[3])},o.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},o.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},o.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},o.prototype.calculatePosMatrix=function(t,n){if(void 0===n&&(n=!1),o=t.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache,i[o])return i[o];var o,i,a=t.canonical,r=this.worldSize/this.zoomScale(a.z),c=a.x+Math.pow(2,a.z)*t.wrap,s=e.identity(new Float64Array(16));return e.translate(s,s,[c*r,a.y*r,0]),e.scale(s,s,[r/e.EXTENT,r/e.EXTENT,1]),e.multiply(s,n?this.alignedProjMatrix:this.projMatrix,s),i[o]=new Float32Array(s),i[o]},o.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},o.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,i,a,l,d,u,h,m,f,p,g,v,s=-90,r=90,o=-180,c=180,n=this.size,b=this._unmodified;if(this.latRange&&(m=this.latRange,s=e.mercatorYfromLat(m[1])*this.worldSize,u=(r=e.mercatorYfromLat(m[0])*this.worldSize)-s<n.y?n.y/(r-s):0),this.lngRange&&(h=this.lngRange,o=e.mercatorXfromLng(h[0])*this.worldSize,g=(c=e.mercatorXfromLng(h[1])*this.worldSize)-o<n.x?n.x/(c-o):0),t=this.point,f=Math.max(g||0,u||0),f)return this.center=this.unproject(new e.Point(g?(c+o)/2:t.x,u?(r+s)/2:t.y)),this.zoom+=this.scaleZoom(f),this._unmodified=b,void(this._constraining=!1);this.latRange&&(p=t.y,i=n.y/2,p-i<s&&(a=s+i),p+i>r&&(a=r-i)),this.lngRange&&(v=t.x,d=n.x/2,v-d<o&&(l=o+d),v+d>c&&(l=c-d)),void 0===l&&void 0===a||(this.center=this.unproject(new e.Point(void 0!==l?l:t.x,void 0!==a?a:t.y))),this._unmodified=b,this._constraining=!1}},o.prototype._calcMatrices=function(){if(this.height){c=this._fov/2,n=this.centerOffset,this.cameraToCenterDistance=.5/Math.tan(c)*this.height;var n,c,v=Math.PI/2+this._pitch,u=this._fov*(.5+n.y/this.height),g=Math.sin(u)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-v-u,.01,Math.PI-.01)),d=this.point,r=d.x,s=d.y,p=1.01*(Math.cos(Math.PI/2-this._pitch)*g+this.cameraToCenterDistance),b=this.height/50,t=new Float64Array(16);e.perspective(t,this._fov,this.width/this.height,b,p),t[8]=2*-n.x/this.width,t[9]=2*n.y/this.height,e.scale(t,t,[1,-1,1]),e.translate(t,t,[0,0,-this.cameraToCenterDistance]),e.rotateX(t,t,this._pitch),e.rotateZ(t,t,this.angle),e.translate(t,t,[-r,-s,0]),this.mercatorMatrix=e.scale([],t,[this.worldSize,this.worldSize,this.worldSize]),e.scale(t,t,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=t,this.invProjMatrix=e.invert([],this.projMatrix);var h=this.width%2/2,m=this.height%2/2,f=Math.cos(this.angle),l=Math.sin(this.angle),i=r-Math.round(r)+f*h+l*m,o=s-Math.round(s)+f*m+l*h,a=new Float64Array(t);if(e.translate(a,a,[i>.5?i-1:i,o>.5?o-1:o,0]),this.alignedProjMatrix=a,t=e.create(),e.scale(t,t,[this.width/2,-this.height/2,1]),e.translate(t,t,[1,-1,0]),this.labelPlaneMatrix=t,t=e.create(),e.scale(t,t,[1,-1,1]),e.translate(t,t,[-1,-1,0]),e.scale(t,t,[2/this.width,2/this.height,1]),this.glCoordMatrix=t,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(t=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=t,this._posMatrixCache={},this._alignedPosMatrixCache={}}},o.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.Point(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},o.prototype.getCameraPoint=function(){var t=this._pitch,n=Math.tan(t)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,n))},o.prototype.getCameraQueryGeometry=function(t){if(n=this.getCameraPoint(),1===t.length)return[t[0],n];for(var n,i,s=n.x,o=n.y,a=n.x,r=n.y,c=0,l=t;c<l.length;c+=1)i=l[c],s=Math.min(s,i.x),o=Math.min(o,i.y),a=Math.max(a,i.x),r=Math.max(r,i.y);return[new e.Point(s,o),new e.Point(a,o),new e.Point(a,r),new e.Point(s,r),new e.Point(s,o)]},Object.defineProperties(o.prototype,a),I=function(t){var n,s,o,i,a;this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),a=300,s=!1,n=null,o=function(){n=null,s&&(i(),n=setTimeout(o,a),s=!1)},function(){return s=!0,n||o(),n})},I.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},I.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},I.prototype.getHashString=function(t){var a=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,m=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),s=Math.pow(10,m),r=Math.round(a.lng*s)/s,c=Math.round(a.lat*s)/s,l=this._map.getBearing(),i=this._map.getPitch(),n="";if(n+=t?"/"+r+"/"+c+"/"+o:o+"/"+c+"/"+r,(l||i)&&(n+="/"+Math.round(10*l)/10),i&&(n+="/"+Math.round(i)),this._hashName){var d=this._hashName,u=!1,h=e.window.location.hash.slice(1).split("&").map(function(e){var t=e.split("=")[0];return t===d?(u=!0,t+"="+n):e}).filter(function(e){return e});return u||h.push(d+"="+n),"#"+h.join("&")}return"#"+n},I.prototype._getCurrentHash=function(){var t,s=this,n=e.window.location.hash.replace("#","");return this._hashName?(n.split("&").map(function(e){return e.split("=")}).forEach(function(e){e[0]===s._hashName&&(t=e)}),(t&&t[1]||"").split("/")):n.split("/")},I.prototype._onHashChange=function(){var t,e=this._getCurrentHash();return e.length>=3&&!e.some(function(e){return isNaN(e)})&&(t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing(),this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0)},I.prototype._updateHashUnthrottled=function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());try{e.window.history.replaceState(e.window.history.state,null,t)}catch{}};var He={linearity:.3,easing:e.bezier(0,0,.3,1)},Ls=e.extend({deceleration:2500,maxSpeed:1400},He),Rs=e.extend({deceleration:20,maxSpeed:1400},He),Ps=e.extend({deceleration:1e3,maxSpeed:360},He),Hs=e.extend({deceleration:1e3,maxSpeed:90},He),ue=function(e){this._map=e,this.clear()};function Ve(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function We(t,n,s){var o=s.maxSpeed,i=s.linearity,c=s.deceleration,a=e.clamp(t*i/(n/1e3),-o,o),r=Math.abs(a)/(c*i);return{easing:s.easing,duration:1e3*r,amount:a*(r/2)}}ue.prototype.clear=function(){this._inertiaBuffer=[]},ue.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})},ue.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,n=e.browser.now();t.length>0&&n-t[0].time>160;)t.shift()},ue.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s,o,i,r,c,l,d,u,n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},a=0,h=this._inertiaBuffer;a<h.length;a+=1)o=h[a].settings,n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround);return i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={},n.pan.mag()&&(c=We(n.pan.mag(),i,e.extend({},Ls,t||{})),s.offset=n.pan.mult(c.amount/n.pan.mag()),s.center=this._map.transform.center,Ve(s,c)),n.zoom&&(l=We(n.zoom,i,Rs),s.zoom=this._map.transform.zoom+l.amount,Ve(s,l)),n.bearing&&(r=We(n.bearing,i,Ps),s.bearing=this._map.transform.bearing+e.clamp(r.amount,-179,179),Ve(s,r)),n.pitch&&(d=We(n.pitch,i,Hs),s.pitch=this._map.transform.pitch+d.amount,Ve(s,d)),(s.zoom||s.bearing)&&(u=void 0===n.pinchAround?n.around:n.pinchAround,s.around=u?this._map.unproject(u):this._map.getCenter()),this.clear(),e.extend(s,{noMoveStart:!0})}};var E=function(n){function s(s,o,i,a){void 0===a&&(a={});var r=t.mousePos(o.getCanvasContainer(),i),c=o.unproject(r);n.call(this,s,e.extend({point:r,lngLat:c,originalEvent:i},a)),this._defaultPrevented=!1,this.target=o}n&&(s.__proto__=n),s.prototype=Object.create(n&&n.prototype),s.prototype.constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(e.Event),De=function(n){function s(s,o,i){var c="touchend"===s?i.changedTouches:i.touches,a=t.touchPos(o.getCanvasContainer(),c),l=a.map(function(e){return o.unproject(e)}),r=a.reduce(function(e,t,n,s){return e.add(t.div(s.length))},new e.Point(0,0)),d=o.unproject(r);n.call(this,s,{points:a,point:r,lngLats:l,lngLat:d,originalEvent:i}),this._defaultPrevented=!1}n&&(s.__proto__=n),s.prototype=Object.create(n&&n.prototype),s.prototype.constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(e.Event),Us=function(e){function t(t,n,s){e.call(this,t,{originalEvent:s}),this._defaultPrevented=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,n),t}(e.Event),f=function(e,t){this._map=e,this._clickTolerance=t.clickTolerance};f.prototype.reset=function(){delete this._mousedownPos},f.prototype.wheel=function(e){return this._firePreventable(new Us(e.type,this._map,e))},f.prototype.mousedown=function(e,t){return this._mousedownPos=t,this._firePreventable(new E(e.type,this._map,e))},f.prototype.mouseup=function(e){this._map.fire(new E(e.type,this._map,e))},f.prototype.click=function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new E(e.type,this._map,e))},f.prototype.dblclick=function(e){return this._firePreventable(new E(e.type,this._map,e))},f.prototype.mouseover=function(e){this._map.fire(new E(e.type,this._map,e))},f.prototype.mouseout=function(e){this._map.fire(new E(e.type,this._map,e))},f.prototype.touchstart=function(e){return this._firePreventable(new De(e.type,this._map,e))},f.prototype.touchmove=function(e){this._map.fire(new De(e.type,this._map,e))},f.prototype.touchend=function(e){this._map.fire(new De(e.type,this._map,e))},f.prototype.touchcancel=function(e){this._map.fire(new De(e.type,this._map,e))},f.prototype._firePreventable=function(e){if(this._map.fire(e),e.defaultPrevented)return{}},f.prototype.isEnabled=function(){return!0},f.prototype.isActive=function(){return!1},f.prototype.enable=function(){},f.prototype.disable=function(){},S=function(e){this._map=e},S.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},S.prototype.mousemove=function(e){this._map.fire(new E(e.type,this._map,e))},S.prototype.mousedown=function(){this._delayContextMenu=!0},S.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new E("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},S.prototype.contextmenu=function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new E(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()},S.prototype.isEnabled=function(){return!0},S.prototype.isActive=function(){return!1},S.prototype.enable=function(){},S.prototype.disable=function(){},x=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1};function ot(e,t){for(var s={},n=0;n<e.length;n++)s[e[n].identifier]=t[n];return s}x.prototype.isEnabled=function(){return!!this._enabled},x.prototype.isActive=function(){return!!this._active},x.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},x.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},x.prototype.mousedown=function(e,n){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)},x.prototype.mousemoveWindow=function(e,n){if(this._active&&(s=n,!(this._lastPos.equals(s)||!this._box&&s.dist(this._startPos)<this._clickTolerance))){o=this._startPos,this._lastPos=s,this._box||(this._box=t.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var s,o,i=Math.min(o.x,s.x),r=Math.max(o.x,s.x),a=Math.min(o.y,s.y),c=Math.max(o.y,s.y);t.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=r-i+"px",this._box.style.height=c-a+"px"}},x.prototype.mouseupWindow=function(n,s){if(a=this,this._active&&0===n.button){var a,o=this._startPos,i=s;if(this.reset(),t.suppressClick(),o.x!==i.x||o.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(e){return e.fitScreenCoordinates(o,i,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},x.prototype.keydown=function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))},x.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(t.remove(this._box),this._box=null),t.enableDrag(),delete this._startPos,delete this._lastPos},x.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))},se=function(e){this.reset(),this.numTouches=e.numTouches},se.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},se.prototype.touchstart=function(t,n,s){(this.centroid||s.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),s.length===this.numTouches&&(this.centroid=function(t){for(var i,s=new e.Point(0,0),n=0,o=t;n<o.length;n+=1)i=o[n],s._add(i);return s.div(t.length)}(n),this.touches=ot(s,n)))},se.prototype.touchmove=function(e,t,n){if(!this.aborted&&this.centroid){s=ot(n,t);for(o in this.touches){var s,o,a=this.touches[o],i=s[o];(!i||i.dist(a)>30)&&(this.aborted=!0)}}},se.prototype.touchend=function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var s=!this.aborted&&this.centroid;if(this.reset(),s)return s}},B=function(e){this.singleTap=new se(e),this.numTaps=e.numTaps,this.reset()},B.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},B.prototype.touchstart=function(e,t,n){this.singleTap.touchstart(e,t,n)},B.prototype.touchmove=function(e,t,n){this.singleTap.touchmove(e,t,n)},B.prototype.touchend=function(e,t,n){if(s=this.singleTap.touchend(e,t,n),s){var s,o=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(s)<30;if(o&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=s,this.count===this.numTaps)return this.reset(),s}},z=function(){this._zoomIn=new B({numTouches:1,numTaps:2}),this._zoomOut=new B({numTouches:2,numTaps:1}),this.reset()},z.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},z.prototype.touchstart=function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)},z.prototype.touchmove=function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)},z.prototype.touchend=function(e,t,n){var s=this,o=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return o?(this._active=!0,e.preventDefault(),setTimeout(function(){return s.reset()},0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(o)},{originalEvent:e})}}):i?(this._active=!0,e.preventDefault(),setTimeout(function(){return s.reset()},0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}}):void 0},z.prototype.touchcancel=function(){this.reset()},z.prototype.enable=function(){this._enabled=!0},z.prototype.disable=function(){this._enabled=!1,this.reset()},z.prototype.isEnabled=function(){return this._enabled},z.prototype.isActive=function(){return this._active},ze={},ze[0]=1,ze[2]=2,b=function(e){this.reset(),this._clickTolerance=e.clickTolerance||1},b.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},b.prototype._correctButton=function(){return!1},b.prototype._move=function(){return{}},b.prototype.mousedown=function(e,n){if(!this._lastPoint){var s=t.mouseButton(e);this._correctButton(e,s)&&(this._lastPoint=n,this._eventButton=s)}},b.prototype.mousemoveWindow=function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){var n=ze[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)},b.prototype.mouseupWindow=function(e){this._lastPoint&&t.mouseButton(e)===this._eventButton&&(this._moved&&t.suppressClick(),this.reset())},b.prototype.enable=function(){this._enabled=!0},b.prototype.disable=function(){this._enabled=!1,this.reset()},b.prototype.isEnabled=function(){return this._enabled},b.prototype.isActive=function(){return this._active};var to=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.mousedown=function(t,n){e.prototype.mousedown.call(this,t,n),this._lastPoint&&(this._active=!0)},t.prototype._correctButton=function(e,t){return 0===t&&!e.ctrlKey},t.prototype._move=function(e,t){return{around:t,panDelta:t.sub(e)}},t}(b),Ht=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(b),It=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(b),k=function(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()};k.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},k.prototype.touchstart=function(e,t,n){return this._calculateTransform(e,t,n)},k.prototype.touchmove=function(e,t,n){if(this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)},k.prototype.touchend=function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()},k.prototype.touchcancel=function(){this.reset()},k.prototype._calculateTransform=function(t,n,s){s.length>0&&(this._active=!0);var a,r,l,d,o=ot(s,n),u=new e.Point(0,0),c=new e.Point(0,0),i=0;for(l in o)a=o[l],d=this._touches[l],d&&(u._add(a),c._add(a.sub(d)),i++,o[l]=a);if(this._touches=o,!(i<this._minTouches)&&c.mag()&&(r=c.div(i),this._sum._add(r),!(this._sum.mag()<this._clickTolerance)))return{around:u.div(i),panDelta:r}},k.prototype.enable=function(){this._enabled=!0},k.prototype.disable=function(){this._enabled=!1,this.reset()},k.prototype.isEnabled=function(){return this._enabled},k.prototype.isActive=function(){return this._active},v=function(){this.reset()};function Fe(e,t,n){for(var s=0;s<e.length;s++)if(e[s].identifier===n)return t[s]}v.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},v.prototype._start=function(){},v.prototype._move=function(){return{}},v.prototype.touchstart=function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))},v.prototype.touchmove=function(e,t,n){if(this._firstTwoTouches){e.preventDefault();var a,i=this._firstTwoTouches,r=i[0],c=i[1],s=Fe(n,t,r),o=Fe(n,t,c);if(s&&o)return a=this._aroundCenter?null:s.add(o).div(2),this._move([s,o],a,e)}},v.prototype.touchend=function(e,n,s){if(this._firstTwoTouches){var o=this._firstTwoTouches,i=o[0],a=o[1],r=Fe(s,n,i),c=Fe(s,n,a);r&&c||(this._active&&t.suppressClick(),this.reset())}},v.prototype.touchcancel=function(){this.reset()},v.prototype.enable=function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around},v.prototype.disable=function(){this._enabled=!1,this.reset()},v.prototype.isEnabled=function(){return this._enabled},v.prototype.isActive=function(){return this._active};function vt(e,t){return Math.log(e/t)/Math.LN2}Vt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._distance,delete this._startDistance},t.prototype._start=function(e){this._startDistance=this._distance=e[0].dist(e[1])},t.prototype._move=function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(vt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vt(this._distance,n),pinchAround:t}},t}(v);function $t(e,t){return 180*e.angleWith(t)/Math.PI}Wt=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},t.prototype._start=function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])},t.prototype._move=function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$t(this._vector,n),pinchAround:t}},t.prototype._isBelowThreshold=function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=$t(e,this._startVector);return Math.abs(n)<t},t}(v);function ct(e){return Math.abs(e.y)>Math.abs(e.x)}var mo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},t.prototype._start=function(e){this._lastPoints=e,ct(e[0].sub(e[1]))&&(this._valid=!1)},t.prototype._move=function(e,t,n){var s=e[0].sub(this._lastPoints[0]),o=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(s,o,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(s.y+o.y)/2*-.5}},t.prototype.gestureBeginsVertically=function(e,t,n){if(void 0!==this._valid)return this._valid;var i,s=e.mag()>=2,o=t.mag()>=2;if(s||o)return!s||!o?(void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0):(i=e.y>0==t.y>0,ct(e)&&ct(t)&&i)},t}(v),fo={panStep:100,bearingStep:15,pitchStep:10},L=function(){var e=fo;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1};function go(e){return e*(2-e)}L.prototype.reset=function(){this._active=!1},L.prototype.keydown=function(e){if(t=this,!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=0,s=0,o=0,i=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?s=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?s=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?o=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?o=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(s=0,o=0),{cameraAnimation:function(r){var c=r.getZoom();r.easeTo({duration:300,easeId:"keyboardHandler",easing:go,zoom:n?Math.round(c)+n*(e.shiftKey?2:1):c,bearing:r.getBearing()+s*t._bearingStep,pitch:r.getPitch()+o*t._pitchStep,offset:[-i*t._panStep,-a*t._panStep],center:r.getCenter()},{originalEvent:e})}}}},L.prototype.enable=function(){this._enabled=!0},L.prototype.disable=function(){this._enabled=!1,this.reset()},L.prototype.isEnabled=function(){return this._enabled},L.prototype.isActive=function(){return this._active},L.prototype.disableRotation=function(){this._rotationDisabled=!0},L.prototype.enableRotation=function(){this._rotationDisabled=!1},lt=4.000244140625,p=function(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout"],this)},p.prototype.setZoomRate=function(e){this._defaultZoomRate=e},p.prototype.setWheelZoomRate=function(e){this._wheelZoomRate=e},p.prototype.isEnabled=function(){return!!this._enabled},p.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},p.prototype.isZooming=function(){return!!this._zooming},p.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},p.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},p.prototype.wheel=function(t){if(this.isEnabled()){var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,s=e.browser.now(),o=s-(this._lastWheelEventTime||0);this._lastWheelEventTime=s,0!==n&&n%lt==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":o>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(o*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}},p.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},p.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=t.mousePos(this._el,n);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},p.prototype.renderFrame=function(){if(n=this,this._frameId&&(this._frameId=null,this.isActive())){t=this._map.transform,0!==this._delta&&(r="wheel"===this._type&&Math.abs(this._delta)>lt?this._wheelZoomRate:this._defaultZoomRate,s=2/(1+Math.exp(-Math.abs(this._delta*r))),this._delta<0&&0!==s&&(s=1/s),u="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale,this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(u*s))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0);var t,n,s,i,a,r,u,h,c="number"==typeof this._targetZoom?this._targetZoom:t.zoom,l=this._startZoom,d=this._easing,o=!1;return"wheel"===this._type&&l&&d?(i=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),h=d(i),a=e.number(l,c,h),i<1?this._frameId||(this._frameId=!0):o=!0):(a=c,o=!0),this._active=!0,o&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!o,zoomDelta:a-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},p.prototype._smoothOutEasing=function(t){if(n=e.ease,this._prevEase){var n,s=this._prevEase,i=(e.browser.now()-s.start)/s.duration,a=s.easing(i+.01)-s.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,r=Math.sqrt(.0729-o*o);n=e.bezier(o,r,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:n},n},p.prototype.reset=function(){this._active=!1},X=function(e,t){this._clickZoom=e,this._tapZoom=t},X.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},X.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},X.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},X.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()},R=function(){this.reset()},R.prototype.reset=function(){this._active=!1},R.prototype.dblclick=function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}},R.prototype.enable=function(){this._enabled=!0},R.prototype.disable=function(){this._enabled=!1,this.reset()},R.prototype.isEnabled=function(){return this._enabled},R.prototype.isActive=function(){return this._active},T=function(){this._tap=new B({numTouches:1,numTaps:1}),this.reset()},T.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},T.prototype.touchstart=function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))},T.prototype.touchmove=function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var s=t[0],o=s.y-this._swipePoint.y;return this._swipePoint=s,e.preventDefault(),this._active=!0,{zoomDelta:o/128}}}else this._tap.touchmove(e,t,n)},T.prototype.touchend=function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)},T.prototype.touchcancel=function(){this.reset()},T.prototype.enable=function(){this._enabled=!0},T.prototype.disable=function(){this._enabled=!1,this.reset()},T.prototype.isEnabled=function(){return this._enabled},T.prototype.isActive=function(){return this._active},J=function(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n},J.prototype.enable=function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},J.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},J.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},J.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()},ae=function(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n},ae.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ae.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ae.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ae.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()},V=function(e,t,n,s){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=s,this._rotationDisabled=!1,this._enabled=!0},V.prototype.enable=function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},V.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},V.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},V.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},V.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},V.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()},pe=function(e){return e.zoom||e.drag||e.pitch||e.rotate},Ut=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(e.Event);function ut(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}u=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ue(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),e.bindAll(["handleEvent","handleWindowEvent"],this),o=this._el,this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[e.window,"blur",void 0]];for(i=0,a=this._listeners;i<a.length;i+=1){var o,i,a,r=a[i],c=r[0],l=r[1],d=r[2];t.addEventListener(c,l,c===e.window.document?this.handleWindowEvent:this.handleEvent,d)}},u.prototype.destroy=function(){for(n=0,s=this._listeners;n<s.length;n+=1){var n,s,o=s[n],i=o[0],a=o[1],r=o[2];t.removeEventListener(i,a,i===e.window.document?this.handleWindowEvent:this.handleEvent,r)}},u.prototype._addDefaultHandlers=function(e){var n,s,o,i,a,r,c,l,d,u,h,m,g,v,b,y,t=this._map,j=t.getCanvasContainer();this._add("mapEvent",new f(t,e)),g=t.boxZoom=new x(t,e),this._add("boxZoom",g),h=new z,i=new R,t.doubleClickZoom=new X(i,h),this._add("tapZoom",h),this._add("clickZoom",i),a=new T,this._add("tapDragZoom",a),y=t.touchPitch=new mo,this._add("touchPitch",y),c=new Ht(e),l=new It(e),t.dragRotate=new ae(e,c,l),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]),m=new to(e),u=new k(e),t.dragPan=new J(j,m,u),this._add("mousePan",m),this._add("touchPan",u,["touchZoom","touchRotate"]),o=new Wt,d=new Vt,t.touchZoomRotate=new V(j,d,o,a),this._add("touchRotate",o,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),v=t.scrollZoom=new p(t,this),this._add("scrollZoom",v,["mousePan"]),b=t.keyboard=new L,this._add("keyboard",b),this._add("blockableMapEvent",new S(t));for(n=0,r=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];n<r.length;n+=1)s=r[n],e.interactive&&e[s]&&t[s].enable(e[s])},u.prototype._add=function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t},u.prototype.stop=function(e){if(!this._updatingCamera){for(var t=0,n=this._handlers;t<n.length;t+=1)n[t].handler.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}},u.prototype.isActive=function(){for(var e=0,t=this._handlers;e<t.length;e+=1)if(t[e].handler.isActive())return!0;return!1},u.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},u.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},u.prototype.isMoving=function(){return Boolean(pe(this._eventsInProgress))||this.isZooming()},u.prototype._blockedByActive=function(e,t,n){for(var s in e)if(s!==n&&(!t||t.indexOf(s)<0))return!0;return!1},u.prototype.handleWindowEvent=function(e){this.handleEvent(e,e.type+"Window")},u.prototype._getMapTouches=function(e){for(var n,i,s=[],t=0,o=e;t<o.length;t+=1)n=o[t],i=n.target,this._el.contains(i)&&s.push(n);return s},u.prototype.handleEvent=function(e,n){if("blur"!==e.type){this._updatingCamera=!0;for(var o,r,h,p,g="renderFrame"===e.type?void 0:e,a={needsRenderFrame:!1},f={},i={},l=e.touches?this._getMapTouches(e.touches):void 0,b=l?t.touchPos(this._el,l):t.mousePos(this._el,e),d=0,m=this._handlers;d<m.length;d+=1){var u=m[d],c=u.handlerName,s=u.handler,v=u.allowed;s.isEnabled()&&(o=void 0,this._blockedByActive(i,v,c)?s.reset():s[n||e.type]&&(o=s[n||e.type](e,b,l),this.mergeHandlerResult(a,f,o,c,g),o&&o.needsRenderFrame&&this._triggerRenderFrame()),(o||s.isActive())&&(i[c]=s))}r={};for(p in this._previousActiveHandlers)i[p]||(r[p]=g);this._previousActiveHandlers=i,(Object.keys(r).length||ut(a))&&(this._changes.push([a,f,r]),this._triggerRenderFrame()),(Object.keys(i).length||ut(a))&&this._map._stop(!0),this._updatingCamera=!1,h=a.cameraAnimation,h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}else this.stop(!0)},u.prototype.mergeHandlerResult=function(t,n,s,o,i){if(s){e.extend(t,s);var a={handlerName:o,originalEvent:s.originalEvent||i};void 0!==s.zoomDelta&&(n.zoom=a),void 0!==s.panDelta&&(n.drag=a),void 0!==s.pitchDelta&&(n.pitch=a),void 0!==s.bearingDelta&&(n.rotate=a)}},u.prototype._applyChanges=function(){for(var n={},i={},a={},s=0,r=this._changes;s<r.length;s+=1){var o=r[s],t=o[0],c=o[1],l=o[2];t.panDelta&&(n.panDelta=(n.panDelta||new e.Point(0,0))._add(t.panDelta)),t.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+t.zoomDelta),t.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+t.bearingDelta),t.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+t.pitchDelta),void 0!==t.around&&(n.around=t.around),void 0!==t.pinchAround&&(n.pinchAround=t.pinchAround),t.noInertia&&(n.noInertia=t.noInertia),e.extend(i,c),e.extend(a,l)}this._updateMapTransform(n,i,a),this._changes=[]},u.prototype._updateMapTransform=function(e,t,n){if(i=this._map,o=i.transform,!ut(e))return this._fireEvents(t,n,!0);var o,i,u,a=e.panDelta,r=e.zoomDelta,c=e.bearingDelta,l=e.pitchDelta,s=e.around,d=e.pinchAround;void 0!==d&&(s=d),i._stop(!0),s=s||i.transform.centerPoint,u=o.pointLocation(a?s.sub(a):s),c&&(o.bearing+=c),l&&(o.pitch+=l),r&&(o.zoom+=r),o.setLocationAtPoint(u,s),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)},u.prototype._fireEvents=function(t,n,s){var o,a,r,c,d,u,h,m,f,p,b,j,_=this,y=pe(this._eventsInProgress),i=pe(t),l={};for(a in t)p=t[a].originalEvent,this._eventsInProgress[a]||(l[a+"start"]=p),this._eventsInProgress[a]=t[a];for(f in!y&&i&&this._fireEvent("movestart",i.originalEvent),l)this._fireEvent(f,l[f]);for(m in i&&this._fireEvent("move",i.originalEvent),t)h=t[m].originalEvent,this._fireEvent(m,h);c={};for(d in this._eventsInProgress){var g=this._eventsInProgress[d],v=g.handlerName,w=g.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[d],r=n[v]||w,c[d+"end"]=r)}for(b in c)this._fireEvent(b,c[b]);j=pe(this._eventsInProgress),s&&(y||i)&&!j&&(this._updatingCamera=!0,o=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),u=function(e){return 0!==e&&-_._bearingSnap<e&&e<_._bearingSnap},o?(u(o.bearing||this._map.getBearing())&&(o.bearing=0),this._map.easeTo(o,{originalEvent:r})):(this._map.fire(new e.Event("moveend",{originalEvent:r})),u(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1)},u.prototype._fireEvent=function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},u.prototype._requestFrame=function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(t){delete e._frameId,e.handleEvent(new Ut("renderFrame",{timeStamp:t})),e._applyChanges()})},u.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())},Kt=function(t){function n(n,s){t.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},n.prototype.panBy=function(t,n,s){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),s)},n.prototype.panTo=function(t,n,s){return this.easeTo(e.extend({center:t},n),s)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},n.prototype.zoomTo=function(t,n,s){return this.easeTo(e.extend({zoom:t},n),s)},n.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},n.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(e,t){return this.jumpTo({padding:e},t),this},n.prototype.rotateTo=function(t,n,s){return this.easeTo(e.extend({bearing:t},n),s)},n.prototype.resetNorth=function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this},n.prototype.resetNorthPitch=function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this},n.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},n.prototype.cameraForBounds=function(t,n){t=e.LngLatBounds.convert(t);var s=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),s,n)},n.prototype._cameraForBoxAndBearing=function(t,n,s,o){d={top:0,bottom:0,right:0,left:0},"number"==typeof(o=e.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding&&(a=o.padding,o.padding={top:a,bottom:a,right:a,left:a}),o.padding=e.extend(d,o.padding);var a,d,i=this.transform,c=i.padding,u=i.project(e.LngLat.convert(t)),h=i.project(e.LngLat.convert(n)),r=u.rotate(-s*Math.PI/180),l=h.rotate(-s*Math.PI/180),b=new e.Point(Math.max(r.x,l.x),Math.max(r.y,l.y)),v=new e.Point(Math.min(r.x,l.x),Math.min(r.y,l.y)),p=b.sub(v),g=(i.width-(c.left+c.right+o.padding.left+o.padding.right))/p.x,m=(i.height-(c.top+c.bottom+o.padding.top+o.padding.bottom))/p.y;if(!(m<0||g<0)){var f=Math.min(i.scaleZoom(i.scale*Math.min(g,m)),o.maxZoom),j="number"==typeof o.offset.x?new e.Point(o.offset.x,o.offset.y):e.Point.convert(o.offset),y=(o.padding.left-o.padding.right)/2,_=(o.padding.top-o.padding.bottom)/2,w=new e.Point(y,_).rotate(s*Math.PI/180),O=j.add(w).mult(i.scale/i.zoomScale(f));return{center:i.unproject(u.add(h).div(2).sub(O)),zoom:f,bearing:s}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},n.prototype.fitScreenCoordinates=function(t,n,s,o,i){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),s,o),o,i)},n.prototype._fitInternal=function(t,n,s){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,s):this.flyTo(n,s)):this},n.prototype.jumpTo=function(t,n){this.stop();var s=this.transform,o=!1,i=!1,a=!1;return"zoom"in t&&s.zoom!==+t.zoom&&(o=!0,s.zoom=+t.zoom),void 0!==t.center&&(s.center=e.LngLat.convert(t.center)),"bearing"in t&&s.bearing!==+t.bearing&&(i=!0,s.bearing=+t.bearing),"pitch"in t&&s.pitch!==+t.pitch&&(a=!0,s.pitch=+t.pitch),null==t.padding||s.isPaddingEqual(t.padding)||(s.padding=t.padding),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),o&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),i&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))},n.prototype.easeTo=function(t,n){o=this,this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);var o,y,s=this.transform,i=this.getZoom(),a=this.getBearing(),l=this.getPitch(),w=this.getPadding(),c="zoom"in t?+t.zoom:i,f="bearing"in t?this._normalizeBearing(t.bearing,a):a,m="pitch"in t?+t.pitch:l,h="padding"in t?t.padding:s.padding,u=e.Point.convert(t.offset),d=s.centerPoint.add(u),p=s.pointLocation(d),g=e.LngLat.convert(t.center||p);this._normalizeCenter(g);var r,b,j=s.project(p),_=s.project(g).sub(j),v=s.zoomScale(c-i);return t.around&&(r=e.LngLat.convert(t.around),b=s.locationPoint(r)),y={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching},this._zooming=this._zooming||c!==i,this._rotating=this._rotating||a!==f,this._pitching=this._pitching||m!==l,this._padding=!s.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,y),this._ease(function(t){if(o._zooming&&(s.zoom=e.number(i,c,t)),o._rotating&&(s.bearing=e.number(a,f,t)),o._pitching&&(s.pitch=e.number(l,m,t)),o._padding&&(s.interpolatePadding(w,h,t),d=s.centerPoint.add(u)),r)s.setLocationAtPoint(r,b);else{var g=s.zoomScale(s.zoom-i),y=c>i?Math.min(2,v):Math.max(.5,v),O=Math.pow(y,1-t),p=s.unproject(j.add(_.mult(t*O)).mult(g));s.setLocationAtPoint(s.renderWorldCopies?p.wrap():p,d)}o._fireMoveEvents(n)},function(e){o._afterEase(n,e)},t),this},n.prototype._prepareEase=function(t,n,s){void 0===s&&(s={}),this._moving=!0,n||s.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!s.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!s.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!s.pitching&&this.fire(new e.Event("pitchstart",t))},n.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},n.prototype._afterEase=function(t,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var s=this._zooming,o=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,s&&this.fire(new e.Event("zoomend",t)),o&&this.fire(new e.Event("rotateend",t)),i&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}},n.prototype.flyTo=function(t,n){if(a=this,!t.essential&&e.browser.prefersReducedMotion)return F=e.pick(t,["center","zoom","bearing","pitch","around"]),this.jumpTo(F,n);this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a,u,C,E,M,F,D,s=this.transform,d=this.getZoom(),f=this.getBearing(),g=this.getPitch(),L=this.getPadding(),p="zoom"in t?e.clamp(+t.zoom,s.minZoom,s.maxZoom):d,k="bearing"in t?this._normalizeBearing(t.bearing,f):f,x="pitch"in t?+t.pitch:g,O="padding"in t?t.padding:s.padding,N=s.zoomScale(p-d),w=e.Point.convert(t.offset),v=s.centerPoint.add(w),_=s.pointLocation(v),b=e.LngLat.convert(t.center||_);this._normalizeCenter(b);var y=s.project(_),j=s.project(b).sub(y),o=t.curve,i=Math.max(s.width,s.height),c=i/N,l=j.mag();"minZoom"in t&&(C=e.clamp(Math.min(t.minZoom,d,p),s.minZoom,s.maxZoom),E=i/s.zoomScale(C-d),o=Math.sqrt(E/l*2)),u=o*o;function A(e){var t=(c*c-i*i+(e?-1:1)*u*u*l*l)/(2*(e?c:i)*u*l);return Math.log(Math.sqrt(t*t+1)-t)}function S(e){return(Math.exp(e)-Math.exp(-e))/2}function h(e){return(Math.exp(e)+Math.exp(-e))/2}var r=A(0),T=function(e){return h(r)/h(r+o*e)},z=function(e){return i*((h(r)*(S(t=r+o*e)/h(t))-S(r))/u)/l;var t},m=(A(1)-r)/o;if(Math.abs(l)<1e-6||!isFinite(m)){if(Math.abs(i-c)<1e-6)return this.easeTo(t,n);M=c<i?-1:1,m=Math.abs(Math.log(c/i))/o,z=function(){return 0},T=function(e){return Math.exp(M*o*e)}}return"duration"in t?t.duration=+t.duration:(D="screenSpeed"in t?+t.screenSpeed/o:+t.speed,t.duration=1e3*m/D),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=f!==k,this._pitching=x!==g,this._padding=!s.isPaddingEqual(O),this._prepareEase(n,!1),this._ease(function(t){var o,i=t*m,r=1/T(i);s.zoom=1===t?p:d+s.scaleZoom(r),a._rotating&&(s.bearing=e.number(f,k,t)),a._pitching&&(s.pitch=e.number(g,x,t)),a._padding&&(s.interpolatePadding(L,O,t),v=s.centerPoint.add(w)),o=1===t?b:s.unproject(y.add(j.mult(z(i))).mult(r)),s.setLocationAtPoint(s.renderWorldCopies?o.wrap():o,v),a._fireMoveEvents(n)},function(){return a._afterEase(n)},t),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n,s=this._onEaseEnd;delete this._onEaseEnd,s.call(this,t)}return e||(n=this.handlers,n&&n.stop(!1)),this},n.prototype._ease=function(t,n,s){!1===s.animate||0===s.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=s,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(t,n){t=e.wrap(t,-180,180);var s=Math.abs(t-n);return Math.abs(t-360-n)<s&&(t-=360),Math.abs(t+360-n)<s&&(t+=360),t},n.prototype._normalizeCenter=function(e){var n,t=this.transform;t.renderWorldCopies&&!t.lngRange&&(n=e.lng-t.center.lng,e.lng+=n>180?-360:n<-180?360:0)},n}(e.Evented),C=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)},C.prototype.getDefaultPosition=function(){return"bottom-right"},C.prototype.onAdd=function(e){var n=this.options&&this.options.compact;return this._map=e,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=t.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=t.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),n&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===n&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},C.prototype.onRemove=function(){t.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},C.prototype._setElementTitle=function(e,t){var n=this._map._getUIString("AttributionControl."+t);e.title=n,e.setAttribute("aria-label",n)},C.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},C.prototype._updateEditLink=function(){var n,s,t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map")),n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}],t&&(s=n.reduce(function(e,t,s){return t.value&&(e+=t.key+"="+t.value+(s<n.length-1?"&":"")),e},"?"),t.href=e.config.FEEDBACK_URL+"/"+s+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback"))},C.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},C.prototype._updateAttributions=function(){if(this._map.style){var t,n,s,o,i,a,e=[];(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(function(e){return"string"!=typeof e?"":e})):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet)&&(s=this._map.style.stylesheet,this.styleOwner=s.owner,this.styleId=s.id),o=this._map.style.sourceCaches;for(a in o)i=o[a],i.used&&(t=i.getSource(),t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution));e.sort(function(e,t){return e.length-t.length}),n=(e=e.filter(function(t,n){for(var s=n+1;s<e.length;s++)if(e[s].indexOf(t)>=0)return!1;return!0})).join(" | "),n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},C.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")},$=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)},$.prototype.onAdd=function(e){this._map=e,this._container=t.create("div","mapboxgl-ctrl");var n=t.create("a","mapboxgl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://www.mapbox.com/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},$.prototype.onRemove=function(){t.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},$.prototype.getDefaultPosition=function(){return"bottom-left"},$.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},$.prototype._logoRequired=function(){if(this._map.style){var t,e=this._map.style.sourceCaches;for(t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},$.prototype._updateCompact=function(){var e,t=this._container.children;t.length&&(e=t[0],this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact"))},Q=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1},Q.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},Q.prototype.remove=function(e){for(var n,s=this._currentlyRunning,t=0,o=s?this._queue.concat(s):this._queue;t<o.length;t+=1)if(n=o[t],n.id===e)return void(n.cancelled=!0)},Q.prototype.run=function(e){void 0===e&&(e=0),s=this._currentlyRunning=this._queue,this._queue=[];for(var n,s,t=0,o=s;t<o.length;t+=1)if(n=o[t],!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1},Q.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var zo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},dt=e.window.HTMLImageElement,No=e.window.HTMLElement,G=e.window.ImageBitmap,Ie=60,Po={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Ie,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ho=function(n){function s(t){var i,a,s=this;if(null!=(t=e.extend({},Po,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>Ie)throw new Error("maxPitch must be less than or equal to 60");if(i=new o(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),n.call(this,i,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Q,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},zo,t.locale),this._clickTolerance=t.clickTolerance,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof No))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return s._update(!1)}),this.on("moveend",function(){return s._update(!1)}),this.on("zoom",function(){return s._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new u(this,t),a="string"==typeof t.hash&&t.hash||void 0,this._hash=t.hash&&new I(a).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new C({customAttribution:t.customAttribution})),this.addControl(new $,t.logoPosition),this.on("style.load",function(){s.transform.unmodified&&s.jumpTo(s.style.stylesheet)}),this.on("data",function(t){s._update("style"===t.dataType),s.fire(new e.Event(t.dataType+"data",t))}),this.on("dataloading",function(t){s.fire(new e.Event(t.dataType+"dataloading",t))})}n&&(s.__proto__=n),s.prototype=Object.create(n&&n.prototype),s.prototype.constructor=s;var i={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var s,o=t.onAdd(this);return this._controls.push(t),s=this._controlPositions[n],-1!==n.indexOf("bottom")?s.insertBefore(o,s.firstChild):s.appendChild(o),this},s.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this},s.prototype.hasControl=function(e){return this._controls.indexOf(e)>-1},s.prototype.resize=function(t){var o,i=this._containerDimensions(),n=i[0],s=i[1];return this._resizeCanvas(n,s),this.transform.resize(n,s),this.painter.resize(n,s),o=!this._moving,o&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),o&&this.fire(new e.Event("moveend",t)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},s.prototype.setMinZoom=function(e){if((e=e??-2)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(e){if((e=e??22)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(e){if((e=e??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(e){if((e=e??Ie)>Ie)throw new Error("maxPitch must be less than or equal to 60");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},s.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},s.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(e,t,n){var o,i,a,s=this;return"mouseenter"===e||"mouseover"===e?(i=!1,{layer:t,listener:n,delegates:{mousemove:function(o){var a=s.getLayer(t)?s.queryRenderedFeatures(o.point,{layers:[t]}):[];a.length?i||(i=!0,n.call(s,new E(e,s,o.originalEvent,{features:a}))):i=!1},mouseout:function(){i=!1}}}):"mouseleave"===e||"mouseout"===e?(o=!1,{layer:t,listener:n,delegates:{mousemove:function(i){(s.getLayer(t)?s.queryRenderedFeatures(i.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,n.call(s,new E(e,s,i.originalEvent)))},mouseout:function(t){o&&(o=!1,n.call(s,new E(e,s,t.originalEvent)))}}}):{layer:t,listener:n,delegates:(a={},a[e]=function(e){var o=s.getLayer(t)?s.queryRenderedFeatures(e.point,{layers:[t]}):[];o.length&&(e.features=o,n.call(s,e),delete e.features)},a)}},s.prototype.on=function(e,t,s){if(void 0===s)return n.prototype.on.call(this,e,t);var i,o=this._createDelegatedListener(e,t,s);for(i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(o),o.delegates)this.on(i,o.delegates[i]);return this},s.prototype.once=function(e,t,s){if(void 0===s)return n.prototype.once.call(this,e,t);var i,o=this._createDelegatedListener(e,t,s);for(i in o.delegates)this.once(i,o.delegates[i]);return this},s.prototype.off=function(e,t,s){var o=this;return void 0===s?n.prototype.off.call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(n){for(var i,c,r=n[e],a=0;a<r.length;a++)if(i=r[a],i.layer===t&&i.listener===s){for(c in i.delegates)o.off(c,i.delegates[c]);return r.splice(a,1),o}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(t,n){if(!this.style)return[];if(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),n=n||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0])o=[e.Point.convert(t)];else{var o,s=e.Point.convert(t[0]),i=e.Point.convert(t[1]);o=[s,new e.Point(i.x,s.y),i,new e.Point(s.x,i.y),s]}return this.style.queryRenderedFeatures(o,n,this.transform)},s.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},s.prototype.setStyle=function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))},s.prototype._getUIString=function(e){var t=this._locale[e];if(t==null)throw new Error("Missing UI string '"+e+"'");return t},s.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new Z(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Z(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(t,n){if(s=this,"string"==typeof t){var s,o=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(o,e.ResourceType.Style);e.getJSON(i,function(t,o){t?s.fire(new e.ErrorEvent(t)):o&&s._updateDiff(o,n)})}else"object"==typeof t&&this._updateDiff(t,n)},s.prototype._updateDiff=function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(s){e.warnOnce("Unable to perform style diff: "+(s.message||s.error||s)+".  Rebuilding the style from scratch."),this._updateStyle(t,n)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)},s.prototype.isSourceLoaded=function(t){var n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},s.prototype.areTilesLoaded=function(){var e,t,s,o,n=this.style&&this.style.sourceCaches;for(s in n){e=n[s]._tiles;for(o in e)if(t=e[o],"loaded"!==t.state&&"errored"!==t.state)return!1}return!0},s.prototype.addSourceType=function(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)},s.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},s.prototype.getSource=function(e){return this.style.getSource(e)},s.prototype.addImage=function(t,n,s){void 0===s&&(s={}),i=s.pixelRatio,void 0===i&&(i=1),o=s.sdf,void 0===o&&(o=!1);var d=s.stretchX,l=s.stretchY,c=s.content;if(this._lazyInitEmptyStyle(),n instanceof dt||G&&n instanceof G){var o,i,a=e.browser.getImageData(n),g=a.width,u=a.height,h=a.data;this.style.addImage(t,{data:new e.RGBAImage({width:g,height:u},h),pixelRatio:i,stretchX:d,stretchY:l,content:c,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var m=n.width,f=n.height,p=n.data,r=n;this.style.addImage(t,{data:new e.RGBAImage({width:m,height:f},new Uint8Array(p)),pixelRatio:i,stretchX:d,stretchY:l,content:c,sdf:o,version:0,userImage:r}),r.onAdd&&r.onAdd(this,t)}},s.prototype.updateImage=function(t,n){if(s=this.style.getImage(t),!s)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var s,r,o=n instanceof dt||G&&n instanceof G?e.browser.getImageData(n):n,i=o.width,a=o.height,c=o.data;if(void 0===i||void 0===a)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(i!==s.data.width||a!==s.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));r=!(n instanceof dt||G&&n instanceof G),s.data.replace(c,r),this.style.updateImage(t,s)},s.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(e){this.style.removeImage(e)},s.prototype.loadImage=function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),n)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)},s.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},s.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},s.prototype.getLayer=function(e){return this.style.getLayer(e)},s.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},s.prototype.setFilter=function(e,t,n){return void 0===n&&(n={}),this.style.setFilter(e,t,n),this._update(!0)},s.prototype.getFilter=function(e){return this.style.getFilter(e)},s.prototype.setPaintProperty=function(e,t,n,s){return void 0===s&&(s={}),this.style.setPaintProperty(e,t,n,s),this._update(!0)},s.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},s.prototype.setLayoutProperty=function(e,t,n,s){return void 0===s&&(s={}),this.style.setLayoutProperty(e,t,n,s),this._update(!0)},s.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},s.prototype.setLight=function(e,t){return void 0===t&&(t={}),this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},s.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},s.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},s.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){e=this._container,e.classList.add("mapboxgl-map"),(this._missingCSSCanary=t.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS(),n=this._canvasContainer=t.create("div","mapboxgl-canvas-container",e),this._interactive&&n.classList.add("mapboxgl-interactive"),this._canvas=t.create("canvas","mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),s=this._containerDimensions(),this._resizeCanvas(s[0],s[1]);var e,n,s,o=this._controlContainer=t.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=t.create("div","mapboxgl-ctrl-"+e,o)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(t,n){var s=e.browser.devicePixelRatio||1;this._canvas.width=s*t,this._canvas.height=s*n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"},s.prototype._setupPainter=function(){var n=e.extend({},Lt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);t?(this.painter=new r(t,this.transform),e.webpSupported.testSupport(t)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},s.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},s.prototype._onMapScroll=function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},s.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},s.prototype._render=function(t){var s,o,a,r,c,l,d,h,m,i=this,u=0,n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(s=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,s),u=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed)return a=!1,this.style&&this._styleDirty&&(this._styleDirty=!1,r=this.transform.zoom,c=e.browser.now(),this.style.zoomHistory.update(r,c),l=new e.EvaluationParameters(r,{now:c,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=l.crossFadingFactor(),1===o&&o===this._crossFadingFactor||(a=!0,this._crossFadingFactor=o),this.style.update(l)),(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame"))&&(h=e.browser.now()-u,n.endQueryEXT(n.TIME_ELAPSED_EXT,s),setTimeout(function(){var t=n.getQueryObjectEXT(s,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(s),i.fire(new e.Event("gpu-timing-frame",{cpuTime:h,gpuTime:t}))},50)),this.listens("gpu-timing-layer")&&(m=this.painter.collectGpuTimers(),setTimeout(function(){var t=i.painter.queryGpuTimers(m);i.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))},50)),d=this._sourcesDirty||this._styleDirty||this._placementDirty,d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0),this},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var t,n=0,s=this._controls;n<s.length;n+=1)s[n].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1)),t=this.painter.context.gl.getExtension("WEBGL_lose_context"),t&&t.loseContext&&t.loseContext(),ft(this._canvasContainer),ft(this._controlContainer),ft(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},s.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(e){t._frame=null,t._render(e)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(e){this._trackResize&&this.resize({originalEvent:e})._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},i.showPadding.get=function(){return!!this._showPadding},i.showPadding.set=function(e){this._showPadding!==e&&(this._showPadding=e,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(e){this._vertices=e,this._update()},s.prototype._setCacheLimits=function(t,n){e.setCacheLimits(t,n)},i.version.get=function(){return e.version},Object.defineProperties(s.prototype,i),s}(Kt);function ft(e){e.parentNode&&e.parentNode.removeChild(e)}Yt={showCompass:!0,showZoom:!0,visualizePitch:!1},H=function(n){var s=this;this.options=e.extend({},Yt,n),this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(e){return s._map.zoomIn({},{originalEvent:e})}),t.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(e){return s._map.zoomOut({},{originalEvent:e})}),t.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(e){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:e}):s._map.resetNorth({},{originalEvent:e})}),this._compassIcon=t.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))},H.prototype._updateZoomButtons=function(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},H.prototype._rotateCompassArrow=function(){var e=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=e},H.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _(this._map,this._compass,this.options.visualizePitch)),this._container},H.prototype.onRemove=function(){t.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},H.prototype._createButton=function(e,n){var s=t.create("button",e,this._container);return s.type="button",s.addEventListener("click",n),s},H.prototype._setButtonTitle=function(e,t){var n=this._map._getUIString("NavigationControl."+t);e.title=n,e.setAttribute("aria-label",n)},_=function(n,s,o){void 0===o&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Ht({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new It({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),t.addEventListener(s,"mousedown",this.mousedown),t.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),t.addEventListener(s,"touchmove",this.touchmove),t.addEventListener(s,"touchend",this.touchend),t.addEventListener(s,"touchcancel",this.reset)};function Xt(t,n,s){if(t=new e.LngLat(t.lng,t.lat),n){var o,i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),r=s.locationPoint(t).distSqr(n);s.locationPoint(i).distSqr(n)<r?t=i:s.locationPoint(a).distSqr(n)<r&&(t=a)}for(;Math.abs(t.lng-s.center.lng)>180;){if(o=s.locationPoint(t),o.x>=0&&o.y>=0&&o.x<=s.width&&o.y<=s.height)break;t.lng>s.center.lng?t.lng-=360:t.lng+=360}return t}_.prototype.down=function(e,n){this.mouseRotate.mousedown(e,n),this.mousePitch&&this.mousePitch.mousedown(e,n),t.disableDrag()},_.prototype.move=function(e,t){var s,n=this.map,o=this.mouseRotate.mousemoveWindow(e,t);o&&o.bearingDelta&&n.setBearing(n.getBearing()+o.bearingDelta),this.mousePitch&&(s=this.mousePitch.mousemoveWindow(e,t),s&&s.pitchDelta&&n.setPitch(n.getPitch()+s.pitchDelta))},_.prototype.off=function(){var e=this.element;t.removeEventListener(e,"mousedown",this.mousedown),t.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),t.removeEventListener(e,"touchmove",this.touchmove),t.removeEventListener(e,"touchend",this.touchend),t.removeEventListener(e,"touchcancel",this.reset),this.offTemp()},_.prototype.offTemp=function(){t.enableDrag(),t.removeEventListener(e.window,"mousemove",this.mousemove),t.removeEventListener(e.window,"mouseup",this.mouseup)},_.prototype.mousedown=function(n){this.down(e.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),t.mousePos(this.element,n)),t.addEventListener(e.window,"mousemove",this.mousemove),t.addEventListener(e.window,"mouseup",this.mouseup)},_.prototype.mousemove=function(e){this.move(e,t.mousePos(this.element,e))},_.prototype.mouseup=function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()},_.prototype.touchstart=function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=t.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))},_.prototype.touchmove=function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=t.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))},_.prototype.touchend=function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},_.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},Ee={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qt(e,t,n){var o,s=e.classList;for(o in Ee)s.remove("mapboxgl-"+n+"-anchor-"+o);s.add("mapboxgl-"+n+"-anchor-"+t)}var Go={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ge=function(n){function s(s,o){if(n.call(this),(s instanceof e.window.HTMLElement||o)&&(s=e.extend({element:s},o)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=e.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=t.create("div"),this._element.setAttribute("aria-label","Map marker"),i=t.createNS("http://www.w3.org/2000/svg","svg"),i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41"),m=t.createNS("http://www.w3.org/2000/svg","g"),m.setAttributeNS(null,"stroke","none"),m.setAttributeNS(null,"stroke-width","1"),m.setAttributeNS(null,"fill","none"),m.setAttributeNS(null,"fill-rule","evenodd"),a=t.createNS("http://www.w3.org/2000/svg","g"),a.setAttributeNS(null,"fill-rule","nonzero"),u=t.createNS("http://www.w3.org/2000/svg","g"),u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var i,a,r,c,l,d,u,h,m,f,p,g,v,j,b=0,y=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];b<y.length;b+=1)v=y[b],r=t.createNS("http://www.w3.org/2000/svg","ellipse"),r.setAttributeNS(null,"opacity","0.04"),r.setAttributeNS(null,"cx","10.5"),r.setAttributeNS(null,"cy","5.80029008"),r.setAttributeNS(null,"rx",v.rx),r.setAttributeNS(null,"ry",v.ry),u.appendChild(r);p=t.createNS("http://www.w3.org/2000/svg","g"),p.setAttributeNS(null,"fill",this._color),j=t.createNS("http://www.w3.org/2000/svg","path"),j.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(j),h=t.createNS("http://www.w3.org/2000/svg","g"),h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000"),g=t.createNS("http://www.w3.org/2000/svg","path"),g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(g),f=t.createNS("http://www.w3.org/2000/svg","g"),f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF"),d=t.createNS("http://www.w3.org/2000/svg","g"),d.setAttributeNS(null,"transform","translate(8.0, 8.0)"),c=t.createNS("http://www.w3.org/2000/svg","circle"),c.setAttributeNS(null,"fill","#000000"),c.setAttributeNS(null,"opacity","0.25"),c.setAttributeNS(null,"cx","5.5"),c.setAttributeNS(null,"cy","5.5"),c.setAttributeNS(null,"r","5.4999962"),l=t.createNS("http://www.w3.org/2000/svg","circle"),l.setAttributeNS(null,"fill","#FFFFFF"),l.setAttributeNS(null,"cx","5.5"),l.setAttributeNS(null,"cy","5.5"),l.setAttributeNS(null,"r","5.4999962"),d.appendChild(c),d.appendChild(l),a.appendChild(u),a.appendChild(p),a.appendChild(h),a.appendChild(f),a.appendChild(d),i.appendChild(a),i.setAttributeNS(null,"height",41*this._scale+"px"),i.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(i),this._offset=e.Point.convert(s&&s.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(e){e.preventDefault()}),this._element.addEventListener("mousedown",function(e){e.preventDefault()}),Qt(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),s.prototype=Object.create(n&&n.prototype),s.prototype.constructor=s,s.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),t.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var n=13.5,t=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[n,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},s.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},s.prototype._update=function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Xt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var n,s="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?s="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(s="rotateZ("+(this._rotation-this._map.getBearing())+"deg)"),n="","viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX("+this._map.getPitch()+"deg)"),e&&"moveend"!==e.type||(this._pos=this._pos.round()),t.setTransform(this._element,Ee[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+n+" "+s)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},s.prototype._onMove=function(t){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(e){return this._rotation=e||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(e){return this._rotationAlignment=e||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(e.Evented),ce,Ye=0,we=!1,Zo=function(n){function s(t){n.call(this),this.options=e.extend({},Go,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),s.prototype=Object.create(n&&n.prototype),s.prototype.constructor=s,s.prototype.onAdd=function(n){return this._map=n,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),s=this._setupUI,void 0!==ce?s(ce):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(e){ce="denied"!==e.state,s(ce)}):(ce=!!e.window.navigator.geolocation,s(ce)),this._container;var s},s.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),t.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ye=0,we=!1},s.prototype._isOutOfMapMaxBounds=function(e){var t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}},s.prototype._updateCamera=function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),s=t.coords.accuracy,o=this._map.getBearing(),i=e.extend({bearing:o},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(s),i,{geolocateSource:!0})},s.prototype._updateMarker=function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var e=this._map._container.clientHeight/2,n=this._map.unproject([0,e]),s=this._map.unproject([1,e]),o=n.distanceTo(s),t=Math.ceil(2*this._accuracy/o);this._circleElement.style.width=t+"px",this._circleElement.style.height=t+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&we)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(n){var o,i,s=this;this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=t.create("button","mapboxgl-ctrl-geolocate",this._container),t.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===n?(e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),o=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)):(i=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=t.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ge(this._dotElement),this._circleElement=t.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ge({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){var n=t.originalEvent&&"resize"===t.originalEvent.type;t.geolocateSource||"ACTIVE_LOCK"!==s._watchState||n||(s._watchState="BACKGROUND",s._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),s._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),s.fire(new e.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){{switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ye--,we=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ye>1?(t={maximumAge:6e5,timeout:0},we=!0):(t=this.options.positionOptions,we=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(e.Evented),Jo={maxWidth:100,unit:"metric"},ne=function(t){this.options=e.extend({},Jo,t),e.bindAll(["_onMove","setUnit"],this)};function en(e,t,n){var i,s=n&&n.maxWidth||100,a=e._container.clientHeight/2,r=e.unproject([0,a]),c=e.unproject([s,a]),o=r.distanceTo(c);n&&"imperial"===n.unit?(i=3.2808*o,i>5280?Oe(t,s,i/5280,e._getUIString("ScaleControl.Miles")):Oe(t,s,i,e._getUIString("ScaleControl.Feet"))):n&&"nautical"===n.unit?Oe(t,s,o/1852,e._getUIString("ScaleControl.NauticalMiles")):o>=1e3?Oe(t,s,o/1e3,e._getUIString("ScaleControl.Kilometers")):Oe(t,s,o,e._getUIString("ScaleControl.Meters"))}function Oe(e,t,n,s){var o,i,a,r=(i=n,(a=Math.pow(10,(""+Math.floor(i)).length-1))*((o=i/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:o>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(o))),c=r/n;e.style.width=t*c+"px",e.innerHTML=r+"&nbsp;"+s}ne.prototype.getDefaultPosition=function(){return"bottom-left"},ne.prototype._onMove=function(){en(this._map,this._container,this.options)},ne.prototype.onAdd=function(e){return this._map=e,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ne.prototype.onRemove=function(){t.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ne.prototype.setUnit=function(e){this.options.unit=e,en(this._map,this._container,this.options)},F=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")},F.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},F.prototype.onRemove=function(){t.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},F.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},F.prototype._setupUI=function(){var n=this._fullscreenButton=t.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);t.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},F.prototype._updateTitle=function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e},F.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},F.prototype._isFullscreen=function(){return this._fullscreen},F.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},F.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var oi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ii=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ai=function(n){function s(t){n.call(this),this.options=e.extend(Object.create(oi),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),s.prototype=Object.create(n&&n.prototype),s.prototype.constructor=s,s.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&t.remove(this._content),this._container&&(t.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},s.prototype.setHTML=function(t){var n,s=e.window.document.createDocumentFragment(),o=e.window.document.createElement("body");for(o.innerHTML=t;n=o.firstChild;)s.appendChild(n);return this.setDOMContent(s)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},s.prototype.setDOMContent=function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=t.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(e){this._container&&this._container.classList.add(e)},s.prototype.removeClassName=function(e){this._container&&this._container.classList.remove(e)},s.prototype.setOffset=function(e){return this.options.offset=e,this._update(),this},s.prototype.toggleClassName=function(e){if(this._container)return this._container.classList.toggle(e)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=t.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(e){this._update(e.point)},s.prototype._onMouseMove=function(e){this._update(e.point)},s.prototype._onDrag=function(e){this._update(e.point)},s.prototype._update=function(e){if(l=this,d=this._lngLat||this._trackPointer,this._map&&d&&this._content&&(this._container||(this._container=t.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=t.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(e){return l._container.classList.add(e)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Xt(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var o,i,a,r,l,d,n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),s=this.options.anchor,c=vn(this.options.offset);s||(i=this._container.offsetWidth,a=this._container.offsetHeight,o=n.y+c.bottom.y<a?["top"]:n.y>this._map.transform.height-a?["bottom"]:[],n.x<i/2?o.push("left"):n.x>this._map.transform.width-i/2&&o.push("right"),s=0===o.length?"bottom":o.join("-")),r=n.add(c[s]).round(),t.setTransform(this._container,Ee[s]+" translate("+r.x+"px,"+r.y+"px)"),Qt(this._container,s,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(ii);e&&e.focus()}},s.prototype._onClose=function(){this.remove()},s}(e.Evented);function vn(t){if(t){if("number"==typeof t){var n,s=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.Point(0,0),top:new e.Point(0,t),"top-left":new e.Point(s,s),"top-right":new e.Point(-s,s),bottom:new e.Point(0,-t),"bottom-left":new e.Point(s,-s),"bottom-right":new e.Point(-s,-s),left:new e.Point(t,0),right:new e.Point(-t,0)}}return t instanceof e.Point||Array.isArray(t)?(n=e.Point.convert(t),{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}):{center:e.Point.convert(t.center||[0,0]),top:e.Point.convert(t.top||[0,0]),"top-left":e.Point.convert(t["top-left"]||[0,0]),"top-right":e.Point.convert(t["top-right"]||[0,0]),bottom:e.Point.convert(t.bottom||[0,0]),"bottom-left":e.Point.convert(t["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(t["bottom-right"]||[0,0]),left:e.Point.convert(t.left||[0,0]),right:e.Point.convert(t.right||[0,0])}}return vn(new e.Point(0,0))}return mt={version:e.version,supported:Lt,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Ho,NavigationControl:H,GeolocateControl:Zo,AttributionControl:C,ScaleControl:ne,FullscreenControl:F,Popup:ai,Marker:Ge,Style:Z,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){Ft().acquire(Le)},clearPrewarmedResources:function(){var e=je;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Le),je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return D.workerCount},set workerCount(e){D.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:""},mt}),n}()},3108:function(e,t,n){"use strict";e.exports=n(26099)},26099:function(e,t,n){"use strict";var o=n(64928),i=n(32420),l=n(51160),m=n(76752),r=n(55616),s=n(31264),d=n(47520),u=n(18400),h=n(72512),a=n(76244);function c(e,t){for(var o=t[0],a=t[1],r=1/(t[2]-o),c=1/(t[3]-a),s=new Array(e.length),n=0,l=e.length/2;n<l;n++)s[2*n]=i((e[2*n]-o)*r,0,1),s[2*n+1]=i((e[2*n+1]-a)*c,0,1);return s}e.exports=function(e,t){t||(t={}),e=d(e,"float64"),t=r(t,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"}),C=s(t.maxDepth,255),n=s(t.bounds,m(e,2)),n[0]===n[2]&&n[2]++,n[1]===n[3]&&n[3]++,x=c(e,n),j=e.length>>>1,t.dtype||(t.dtype="array"),"string"==typeof t.dtype?i=new(h(t.dtype))(j):t.dtype&&(i=t.dtype,Array.isArray(i)&&(i.length=j));for(v=0;v<j;++v)i[v]=v;var n,i,p,g,v,b,j,y,O,x,C,E,f=[],_=[],w=[],k=[];!function e(t,n,s,o,i,a){if(!o.length)return null;var g=f[i]||(f[i]=[]),O=w[i]||(w[i]=[]),h=_[i]||(_[i]=[]),m=g.length;if(++i>C||a>1073741824){for(l=0;l<o.length;l++)g.push(o[l]),O.push(a),h.push(null,null,null,null);return m}if(g.push(o[0]),O.push(a),o.length<=1)return h.push(null,null,null,null),m;for(var l,c=.5*s,p=t+c,d=n+c,v=[],y=[],b=[],j=[],u=1,k=o.length;u<k;u++){var r=o[u],A=x[2*r],E=x[2*r+1];A<p?E<d?v.push(r):y.push(r):E<d?b.push(r):j.push(r)}return a<<=2,h.push(e(t,n,c,v,i,a),e(t,d,c,y,i,a+1),e(p,n,c,b,i,a+2),e(p,d,c,j,i,a+3)),m}(0,0,1,i,0,1);for(g=0,p=0;p<f.length;p++){if(y=f[p],i.set)i.set(y,g);else for(b=0,E=y.length;b<E;b++)i[b+g]=y[b];O=g+f[p].length,k[p]=[g,O],g=O}return i.range=function(){for(d=[],p=arguments.length;p--;)d[p]=arguments[p];u(d[d.length-1])?(h=d.pop(),d.length||null==h.x&&null==h.l&&null==h.left||(d=[h],i={}),i=r(h,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})):i={},d.length||(d=n);var i,d,h,p,g,j,t=l.apply(void 0,d),v=[Math.min(t.x,t.x+t.width),Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height)],M=v[0],O=v[1],F=v[2],y=v[3],b=c([M,O,F,y],n),x=b[0],C=b[1],E=b[2],S=b[3],m=s(i.level,f.length);return null!=i.d&&("number"==typeof i.d?g=[i.d,i.d]:i.d.length&&(g=i.d),m=Math.min(Math.max(Math.ceil(-a(Math.abs(g[0])/(n[2]-n[0]))),Math.ceil(-a(Math.abs(g[1])/(n[3]-n[1])))),m)),m=Math.min(m,f.length),i.lod?function(e,t,n,s,i){for(r=[],a=0;a<i;a++){var a,r,c=w[a],l=k[a][0],u=A(e,t,a),h=A(n,s,a),d=o.ge(c,u),m=o.gt(c,h,d,c.length-1);r[a]=[d+l,m+l]}return r}(x,C,E,S,m):(j=[],function t(n,s,o,i,a,r){if(null!==a&&null!==r&&!(x>n+o||C>s+o||E<n||S<s||i>=m||a===r)){g=f[i],void 0===r&&(r=g.length);for(u=a;u<r;u++){var v=g[u],A=e[2*v],k=e[2*v+1];A>=M&&A<=F&&k>=O&&k<=y&&j.push(v)}var u,g,l=_[i],T=l[4*a+0],w=l[4*a+1],b=l[4*a+2],h=l[4*a+3],p=function(e,t){for(var n=null,s=0;null===n;)if(n=e[4*t+s],++s>e.length)return null;return n}(l,a+1),c=.5*o,d=i+1;t(n,s,c,d,T,w||b||h||p),t(n,s+c,c,d,w,b||h||p),t(n+c,s,c,d,b,h||p),t(n+c,s+c,c,d,h,p)}}(0,0,1,0,0,1),j)},i;function A(e,t,n){for(var i=1,a=.5,o=.5,s=.5,r=0;r<n;r++)i<<=2,i+=e<a?t<o?0:1:t<o?2:3,s*=.5,a+=e<a?-s:s,o+=t<o?-s:s;return i}}},40440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3256),o=6378137;function i(e){var t,n=0;if(e&&e.length>0){n+=Math.abs(a(e[0]));for(t=1;t<e.length;t++)n-=Math.abs(a(e[t]))}return n}function a(e){var t,a,r,c,l,d,i=0,n=e.length;if(n>2){for(t=0;t<n;t++)t===n-2?(a=n-2,r=n-1,c=0):t===n-1?(a=n-1,r=0,c=1):(a=t,r=t+1,c=t+2),l=e[a],d=e[r],i+=(s(e[c][0])-s(l[0]))*Math.sin(s(d[1]));i=i*o*o/2}return i}function s(e){return e*Math.PI/180}t.default=function(e){return r.geomReduce(e,function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=i(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(e,t){"use strict";function n(e,t,n){void 0===n&&(n={});var s={type:"Feature"};return(0===n.id||n.id)&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.properties=t||{},s.geometry=e,s}function i(e,t,s){if(void 0===s&&(s={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!o(e[0])||!o(e[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:e},t,s)}function a(e,t,s){void 0===s&&(s={});for(var o,i,a=0,r=e;a<r.length;a++){if(o=r[a],o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,s)}function r(e,t,s){if(void 0===s&&(s={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,s)}function s(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function m(e,t,s){return void 0===s&&(s={}),n({type:"MultiLineString",coordinates:e},t,s)}function l(e,t,s){return void 0===s&&(s={}),n({type:"MultiPoint",coordinates:e},t,s)}function d(e,t,s){return void 0===s&&(s={}),n({type:"MultiPolygon",coordinates:e},t,s)}function u(e,n){void 0===n&&(n="kilometers");var s=t.factors[n];if(!s)throw new Error(n+" units is invalid");return e*s}function c(e,n){void 0===n&&(n="kilometers");var s=t.factors[n];if(!s)throw new Error(n+" units is invalid");return e/s}function h(e){return e%(2*Math.PI)*180/Math.PI}function o(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return i(t).geometry;case"LineString":return r(t).geometry;case"Polygon":return a(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return m(t).geometry;case"MultiPolygon":return d(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return i(e,t)}),n)},t.polygon=a,t.polygons=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return a(e,t)}),n)},t.lineString=r,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return r(e,t)}),n)},t.featureCollection=s,t.multiLineString=m,t.multiPoint=l,t.multiPolygon=d,t.geometryCollection=function(e,t,s){return void 0===s&&(s={}),n({type:"GeometryCollection",geometries:e},t,s)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=u,t.lengthToRadians=c,t.lengthToDegrees=function(e,t){return h(c(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=h,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u(c(e,t),n)},t.convertArea=function(e,n,s){if(void 0===n&&(n="meters"),void 0===s&&(s="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o,i=t.areaFactors[n];if(!i)throw new Error("invalid original units");if(o=t.areaFactors[s],!o)throw new Error("invalid final units");return e/i*o},t.isNumber=o,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!o(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},3256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(46284);function o(e,t,n){if(null!==e)for(var s,i,a,r,c,l,h,m,f,p,v,y,g=0,d=0,j=e.type,b="FeatureCollection"===j,w="Feature"===j,_=b?e.features.length:1,u=0;u<_;u++){v=(y=!!(m=b?e.features[u].geometry:w?e.geometry:e)&&"GeometryCollection"===m.type)?m.geometries.length:1;for(p=0;p<v;p++)if(a=0,l=0,null!==(h=y?m.geometries[p]:m))switch(i=h.coordinates,c=h.type,g=!n||"Polygon"!==c&&"MultiPolygon"!==c?0:1,c){case null:break;case"Point":if(!1===t(i,d,u,a,l))return!1;d++,a++;break;case"LineString":case"MultiPoint":for(s=0;s<i.length;s++){if(!1===t(i[s],d,u,a,l))return!1;d++,"MultiPoint"===c&&a++}"LineString"===c&&a++;break;case"Polygon":case"MultiLineString":for(s=0;s<i.length;s++){for(r=0;r<i[s].length-g;r++){if(!1===t(i[s][r],d,u,a,l))return!1;d++}"MultiLineString"===c&&a++,"Polygon"===c&&l++}"Polygon"===c&&a++;break;case"MultiPolygon":for(s=0;s<i.length;s++){for(l=0,r=0;r<i[s].length;r++){for(f=0;f<i[s][r].length-g;f++){if(!1===t(i[s][r][f],d,u,a,l))return!1;d++}l++}a++}break;case"GeometryCollection":for(s=0;s<h.geometries.length;s++)if(!1===o(h.geometries[s],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}function r(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function c(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function a(e,t){var n,s,i,a,c,l,d,u,m,f,h=0,o="FeatureCollection"===e.type,r="Feature"===e.type,p=o?e.features.length:1;for(n=0;n<p;n++){for(s=o?e.features[n].geometry:r?e.geometry:e,a=o?e.features[n].properties:r?e.properties:{},d=o?e.features[n].bbox:r?e.bbox:void 0,u=o?e.features[n].id:r?e.id:void 0,f=(m=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,c=0;c<f;c++)if(null!==(i=m?s.geometries[c]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,a,d,u))return!1;break;case"GeometryCollection":for(l=0;l<i.geometries.length;l++)if(!1===t(i.geometries[l],h,a,d,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,a,d,u))return!1;h++}}function i(e,t){a(e,function(e,n,o,i,a){var r,c,d,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(s.feature(e,o,{bbox:i,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(r=0;r<e.coordinates.length;r++)if(d={type:c,coordinates:e.coordinates[r]},!1===t(s.feature(d,o),n,r))return!1})}function l(e,t){i(e,function(e,n,i){if(a=0,e.geometry&&(c=e.geometry.type,"Point"!==c&&"MultiPoint"!==c)){var a,r,c,l=0,d=0,u=0;return!1!==o(e,function(o,c,h,m,f){if(void 0===r||n>l||m>d||f>u)return r=o,l=n,d=m,u=f,void(a=0);var p=s.lineString([r,o],e.properties);if(!1===t(p,n,i,f,a))return!1;a++,r=o})&&void 0}})}function d(e,t){if(!e)throw new Error("geojson is required");i(e,function(e,n,o){if(null!==e.geometry){var i,r=e.geometry.type,a=e.geometry.coordinates;switch(r){case"LineString":if(!1===t(e,n,o,0,0))return!1;break;case"Polygon":for(i=0;i<a.length;i++)if(!1===t(s.lineString(a[i],e.properties),n,o,i))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,n,s){var i=n;return o(e,function(e,s,o,a,r){i=0===s&&void 0===n?e:t(i,e,s,o,a,r)},s),i},t.propEach=r,t.propReduce=function(e,t,n){var s=n;return r(e,function(e,o){s=0===o&&void 0===n?e:t(s,e,o)}),s},t.featureEach=c,t.featureReduce=function(e,t,n){var s=n;return c(e,function(e,o){s=0===o&&void 0===n?e:t(s,e,o)}),s},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=a,t.geomReduce=function(e,t,n){var s=n;return a(e,function(e,o,i,a,r){s=0===o&&void 0===n?e:t(s,e,o,i,a,r)}),s},t.flattenEach=i,t.flattenReduce=function(e,t,n){var s=n;return i(e,function(e,o,i){s=0===o&&0===i&&void 0===n?e:t(s,e,o,i)}),s},t.segmentEach=l,t.segmentReduce=function(e,t,n){var s=n,o=!1;return l(e,function(e,i,a,r,c){s=!1===o&&void 0===n?e:t(s,e,i,a,r,c),o=!0}),s},t.lineEach=d,t.lineReduce=function(e,t,n){var s=n;return d(e,function(e,o,i,a){s=0===o&&void 0===n?e:t(s,e,o,i,a)}),s},t.findSegment=function(e,t){if(t=t||{},!s.isObject(t))throw new Error("options is invalid");var o,c,l=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,n=t.segmentIndex||0,r=t.properties;switch(e.type){case"FeatureCollection":l<0&&(l=e.features.length+l),r=r||e.features[l].properties,c=e.features[l].geometry;break;case"Feature":r=r||e.properties,c=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":c=e;break;default:throw new Error("geojson is invalid")}if(null===c)return null;switch(o=c.coordinates,c.type){case"Point":case"MultiPoint":return null;case"LineString":return n<0&&(n=o.length+n-1),s.lineString([o[n],o[n+1]],r,t);case"Polygon":return a<0&&(a=o.length+a),n<0&&(n=o[a].length+n-1),s.lineString([o[a][n],o[a][n+1]],r,t);case"MultiLineString":return i<0&&(i=o.length+i),n<0&&(n=o[i].length+n-1),s.lineString([o[i][n],o[i][n+1]],r,t);case"MultiPolygon":return i<0&&(i=o.length+i),a<0&&(a=o[i].length+a),n<0&&(n=o[i][a].length-n-1),s.lineString([o[i][a][n],o[i][a][n+1]],r,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!s.isObject(t))throw new Error("options is invalid");var n,c,l=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,o=t.coordIndex||0,r=t.properties;switch(e.type){case"FeatureCollection":l<0&&(l=e.features.length+l),r=r||e.features[l].properties,c=e.features[l].geometry;break;case"Feature":r=r||e.properties,c=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":c=e;break;default:throw new Error("geojson is invalid")}if(null===c)return null;switch(n=c.coordinates,c.type){case"Point":return s.point(n,r,t);case"MultiPoint":return i<0&&(i=n.length+i),s.point(n[i],r,t);case"LineString":return o<0&&(o=n.length+o),s.point(n[o],r,t);case"Polygon":return a<0&&(a=n.length+a),o<0&&(o=n[a].length+o),s.point(n[a][o],r,t);case"MultiLineString":return i<0&&(i=n.length+i),o<0&&(o=n[i].length+o),s.point(n[i][o],r,t);case"MultiPolygon":return i<0&&(i=n.length+i),a<0&&(a=n[i].length+a),o<0&&(o=n[i][a].length-o),s.point(n[i][a][o],r,t)}throw new Error("geojson is invalid")}},42428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(84880);function s(e){var t=[1/0,1/0,-1/0,-1/0];return o.coordEach(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}s.default=s,t.default=s},76796:function(e,t){"use strict";function n(e,t,n){void 0===n&&(n={});var s={type:"Feature"};return(0===n.id||n.id)&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.properties=t||{},s.geometry=e,s}function i(e,t,s){if(void 0===s&&(s={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!o(e[0])||!o(e[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:e},t,s)}function a(e,t,s){void 0===s&&(s={});for(var o,i,a=0,r=e;a<r.length;a++){if(o=r[a],o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,s)}function r(e,t,s){if(void 0===s&&(s={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,s)}function s(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function m(e,t,s){return void 0===s&&(s={}),n({type:"MultiLineString",coordinates:e},t,s)}function l(e,t,s){return void 0===s&&(s={}),n({type:"MultiPoint",coordinates:e},t,s)}function d(e,t,s){return void 0===s&&(s={}),n({type:"MultiPolygon",coordinates:e},t,s)}function u(e,n){void 0===n&&(n="kilometers");var s=t.factors[n];if(!s)throw new Error(n+" units is invalid");return e*s}function c(e,n){void 0===n&&(n="kilometers");var s=t.factors[n];if(!s)throw new Error(n+" units is invalid");return e/s}function h(e){return e%(2*Math.PI)*180/Math.PI}function o(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return i(t).geometry;case"LineString":return r(t).geometry;case"Polygon":return a(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return m(t).geometry;case"MultiPolygon":return d(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return i(e,t)}),n)},t.polygon=a,t.polygons=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return a(e,t)}),n)},t.lineString=r,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return r(e,t)}),n)},t.featureCollection=s,t.multiLineString=m,t.multiPoint=l,t.multiPolygon=d,t.geometryCollection=function(e,t,s){return void 0===s&&(s={}),n({type:"GeometryCollection",geometries:e},t,s)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=u,t.lengthToRadians=c,t.lengthToDegrees=function(e,t){return h(c(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=h,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u(c(e,t),n)},t.convertArea=function(e,n,s){if(void 0===n&&(n="meters"),void 0===s&&(s="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o,i=t.areaFactors[n];if(!i)throw new Error("invalid original units");if(o=t.areaFactors[s],!o)throw new Error("invalid final units");return e/i*o},t.isNumber=o,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!o(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},84880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(76796);function o(e,t,n){if(null!==e)for(var s,i,a,r,c,l,h,m,f,p,v,y,g=0,d=0,j=e.type,b="FeatureCollection"===j,w="Feature"===j,_=b?e.features.length:1,u=0;u<_;u++){v=(y=!!(m=b?e.features[u].geometry:w?e.geometry:e)&&"GeometryCollection"===m.type)?m.geometries.length:1;for(p=0;p<v;p++)if(a=0,l=0,null!==(h=y?m.geometries[p]:m))switch(i=h.coordinates,c=h.type,g=!n||"Polygon"!==c&&"MultiPolygon"!==c?0:1,c){case null:break;case"Point":if(!1===t(i,d,u,a,l))return!1;d++,a++;break;case"LineString":case"MultiPoint":for(s=0;s<i.length;s++){if(!1===t(i[s],d,u,a,l))return!1;d++,"MultiPoint"===c&&a++}"LineString"===c&&a++;break;case"Polygon":case"MultiLineString":for(s=0;s<i.length;s++){for(r=0;r<i[s].length-g;r++){if(!1===t(i[s][r],d,u,a,l))return!1;d++}"MultiLineString"===c&&a++,"Polygon"===c&&l++}"Polygon"===c&&a++;break;case"MultiPolygon":for(s=0;s<i.length;s++){for(l=0,r=0;r<i[s].length;r++){for(f=0;f<i[s][r].length-g;f++){if(!1===t(i[s][r][f],d,u,a,l))return!1;d++}l++}a++}break;case"GeometryCollection":for(s=0;s<h.geometries.length;s++)if(!1===o(h.geometries[s],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}function r(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function c(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function a(e,t){var n,s,i,a,c,l,d,u,m,f,h=0,o="FeatureCollection"===e.type,r="Feature"===e.type,p=o?e.features.length:1;for(n=0;n<p;n++){for(s=o?e.features[n].geometry:r?e.geometry:e,a=o?e.features[n].properties:r?e.properties:{},d=o?e.features[n].bbox:r?e.bbox:void 0,u=o?e.features[n].id:r?e.id:void 0,f=(m=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,c=0;c<f;c++)if(null!==(i=m?s.geometries[c]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,a,d,u))return!1;break;case"GeometryCollection":for(l=0;l<i.geometries.length;l++)if(!1===t(i.geometries[l],h,a,d,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,a,d,u))return!1;h++}}function i(e,t){a(e,function(e,n,o,i,a){var r,c,d,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(s.feature(e,o,{bbox:i,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(r=0;r<e.coordinates.length;r++)if(d={type:c,coordinates:e.coordinates[r]},!1===t(s.feature(d,o),n,r))return!1})}function l(e,t){i(e,function(e,n,i){if(a=0,e.geometry&&(c=e.geometry.type,"Point"!==c&&"MultiPoint"!==c)){var a,r,c,l=0,d=0,u=0;return!1!==o(e,function(o,c,h,m,f){if(void 0===r||n>l||m>d||f>u)return r=o,l=n,d=m,u=f,void(a=0);var p=s.lineString([r,o],e.properties);if(!1===t(p,n,i,f,a))return!1;a++,r=o})&&void 0}})}function d(e,t){if(!e)throw new Error("geojson is required");i(e,function(e,n,o){if(null!==e.geometry){var i,r=e.geometry.type,a=e.geometry.coordinates;switch(r){case"LineString":if(!1===t(e,n,o,0,0))return!1;break;case"Polygon":for(i=0;i<a.length;i++)if(!1===t(s.lineString(a[i],e.properties),n,o,i))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,n,s){var i=n;return o(e,function(e,s,o,a,r){i=0===s&&void 0===n?e:t(i,e,s,o,a,r)},s),i},t.propEach=r,t.propReduce=function(e,t,n){var s=n;return r(e,function(e,o){s=0===o&&void 0===n?e:t(s,e,o)}),s},t.featureEach=c,t.featureReduce=function(e,t,n){var s=n;return c(e,function(e,o){s=0===o&&void 0===n?e:t(s,e,o)}),s},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=a,t.geomReduce=function(e,t,n){var s=n;return a(e,function(e,o,i,a,r){s=0===o&&void 0===n?e:t(s,e,o,i,a,r)}),s},t.flattenEach=i,t.flattenReduce=function(e,t,n){var s=n;return i(e,function(e,o,i){s=0===o&&0===i&&void 0===n?e:t(s,e,o,i)}),s},t.segmentEach=l,t.segmentReduce=function(e,t,n){var s=n,o=!1;return l(e,function(e,i,a,r,c){s=!1===o&&void 0===n?e:t(s,e,i,a,r,c),o=!0}),s},t.lineEach=d,t.lineReduce=function(e,t,n){var s=n;return d(e,function(e,o,i,a){s=0===o&&void 0===n?e:t(s,e,o,i,a)}),s},t.findSegment=function(e,t){if(t=t||{},!s.isObject(t))throw new Error("options is invalid");var o,c,l=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,n=t.segmentIndex||0,r=t.properties;switch(e.type){case"FeatureCollection":l<0&&(l=e.features.length+l),r=r||e.features[l].properties,c=e.features[l].geometry;break;case"Feature":r=r||e.properties,c=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":c=e;break;default:throw new Error("geojson is invalid")}if(null===c)return null;switch(o=c.coordinates,c.type){case"Point":case"MultiPoint":return null;case"LineString":return n<0&&(n=o.length+n-1),s.lineString([o[n],o[n+1]],r,t);case"Polygon":return a<0&&(a=o.length+a),n<0&&(n=o[a].length+n-1),s.lineString([o[a][n],o[a][n+1]],r,t);case"MultiLineString":return i<0&&(i=o.length+i),n<0&&(n=o[i].length+n-1),s.lineString([o[i][n],o[i][n+1]],r,t);case"MultiPolygon":return i<0&&(i=o.length+i),a<0&&(a=o[i].length+a),n<0&&(n=o[i][a].length-n-1),s.lineString([o[i][a][n],o[i][a][n+1]],r,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!s.isObject(t))throw new Error("options is invalid");var n,c,l=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,o=t.coordIndex||0,r=t.properties;switch(e.type){case"FeatureCollection":l<0&&(l=e.features.length+l),r=r||e.features[l].properties,c=e.features[l].geometry;break;case"Feature":r=r||e.properties,c=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":c=e;break;default:throw new Error("geojson is invalid")}if(null===c)return null;switch(n=c.coordinates,c.type){case"Point":return s.point(n,r,t);case"MultiPoint":return i<0&&(i=n.length+i),s.point(n[i],r,t);case"LineString":return o<0&&(o=n.length+o),s.point(n[o],r,t);case"Polygon":return a<0&&(a=n.length+a),o<0&&(o=n[a].length+o),s.point(n[a][o],r,t);case"MultiLineString":return i<0&&(i=n.length+i),o<0&&(o=n[i].length+o),s.point(n[i][o],r,t);case"MultiPolygon":return i<0&&(i=n.length+i),a<0&&(a=n[i].length+a),o<0&&(o=n[i][a].length-o),s.point(n[i][a][o],r,t)}throw new Error("geojson is invalid")}},77844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(43752),o=n(49840);t.default=function(e,t){void 0===t&&(t={});var i=0,a=0,n=0;return s.coordEach(e,function(e){i+=e[0],a+=e[1],n++}),o.point([i/n,a/n],t.properties)}},49840:function(e,t){"use strict";function n(e,t,n){void 0===n&&(n={});var s={type:"Feature"};return(0===n.id||n.id)&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.properties=t||{},s.geometry=e,s}function o(e,t,s){return void 0===s&&(s={}),n({type:"Point",coordinates:e},t,s)}function i(e,t,s){void 0===s&&(s={});for(var o,i,a=0,r=e;a<r.length;a++){if(o=r[a],o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,s)}function a(e,t,s){if(void 0===s&&(s={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,s)}function s(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function c(e,t,s){return void 0===s&&(s={}),n({type:"MultiLineString",coordinates:e},t,s)}function l(e,t,s){return void 0===s&&(s={}),n({type:"MultiPoint",coordinates:e},t,s)}function d(e,t,s){return void 0===s&&(s={}),n({type:"MultiPolygon",coordinates:e},t,s)}function u(e,n){void 0===n&&(n="kilometers");var s=t.factors[n];if(!s)throw new Error(n+" units is invalid");return e*s}function r(e,n){void 0===n&&(n="kilometers");var s=t.factors[n];if(!s)throw new Error(n+" units is invalid");return e/s}function h(e){return e%(2*Math.PI)*180/Math.PI}function m(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return o(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return c(t).geometry;case"MultiPolygon":return d(t).geometry;default:throw new Error(e+" is invalid")}},t.point=o,t.points=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return o(e,t)}),n)},t.polygon=i,t.polygons=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return i(e,t)}),n)},t.lineString=a,t.lineStrings=function(e,t,n){return void 0===n&&(n={}),s(e.map(function(e){return a(e,t)}),n)},t.featureCollection=s,t.multiLineString=c,t.multiPoint=l,t.multiPolygon=d,t.geometryCollection=function(e,t,s){return void 0===s&&(s={}),n({type:"GeometryCollection",geometries:e},t,s)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=u,t.lengthToRadians=r,t.lengthToDegrees=function(e,t){return h(r(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=h,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u(r(e,t),n)},t.convertArea=function(e,n,s){if(void 0===n&&(n="meters"),void 0===s&&(s="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o,i=t.areaFactors[n];if(!i)throw new Error("invalid original units");if(o=t.areaFactors[s],!o)throw new Error("invalid final units");return e/i*o},t.isNumber=m,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!m(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(49840);function o(e,t,n){if(null!==e)for(var s,i,a,r,c,l,h,m,f,p,v,y,g=0,d=0,j=e.type,b="FeatureCollection"===j,w="Feature"===j,_=b?e.features.length:1,u=0;u<_;u++){v=(y=!!(m=b?e.features[u].geometry:w?e.geometry:e)&&"GeometryCollection"===m.type)?m.geometries.length:1;for(p=0;p<v;p++)if(a=0,l=0,null!==(h=y?m.geometries[p]:m))switch(i=h.coordinates,c=h.type,g=!n||"Polygon"!==c&&"MultiPolygon"!==c?0:1,c){case null:break;case"Point":if(!1===t(i,d,u,a,l))return!1;d++,a++;break;case"LineString":case"MultiPoint":for(s=0;s<i.length;s++){if(!1===t(i[s],d,u,a,l))return!1;d++,"MultiPoint"===c&&a++}"LineString"===c&&a++;break;case"Polygon":case"MultiLineString":for(s=0;s<i.length;s++){for(r=0;r<i[s].length-g;r++){if(!1===t(i[s][r],d,u,a,l))return!1;d++}"MultiLineString"===c&&a++,"Polygon"===c&&l++}"Polygon"===c&&a++;break;case"MultiPolygon":for(s=0;s<i.length;s++){for(l=0,r=0;r<i[s].length;r++){for(f=0;f<i[s][r].length-g;f++){if(!1===t(i[s][r][f],d,u,a,l))return!1;d++}l++}a++}break;case"GeometryCollection":for(s=0;s<h.geometries.length;s++)if(!1===o(h.geometries[s],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}function r(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function c(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function a(e,t){var n,s,i,a,c,l,d,u,m,f,h=0,o="FeatureCollection"===e.type,r="Feature"===e.type,p=o?e.features.length:1;for(n=0;n<p;n++){for(s=o?e.features[n].geometry:r?e.geometry:e,a=o?e.features[n].properties:r?e.properties:{},d=o?e.features[n].bbox:r?e.bbox:void 0,u=o?e.features[n].id:r?e.id:void 0,f=(m=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,c=0;c<f;c++)if(null!==(i=m?s.geometries[c]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,h,a,d,u))return!1;break;case"GeometryCollection":for(l=0;l<i.geometries.length;l++)if(!1===t(i.geometries[l],h,a,d,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,a,d,u))return!1;h++}}function i(e,t){a(e,function(e,n,o,i,a){var r,c,d,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(s.feature(e,o,{bbox:i,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(r=0;r<e.coordinates.length;r++)if(d={type:c,coordinates:e.coordinates[r]},!1===t(s.feature(d,o),n,r))return!1})}function l(e,t){i(e,function(e,n,i){if(a=0,e.geometry&&(c=e.geometry.type,"Point"!==c&&"MultiPoint"!==c)){var a,r,c,l=0,d=0,u=0;return!1!==o(e,function(o,c,h,m,f){if(void 0===r||n>l||m>d||f>u)return r=o,l=n,d=m,u=f,void(a=0);var p=s.lineString([r,o],e.properties);if(!1===t(p,n,i,f,a))return!1;a++,r=o})&&void 0}})}function d(e,t){if(!e)throw new Error("geojson is required");i(e,function(e,n,o){if(null!==e.geometry){var i,r=e.geometry.type,a=e.geometry.coordinates;switch(r){case"LineString":if(!1===t(e,n,o,0,0))return!1;break;case"Polygon":for(i=0;i<a.length;i++)if(!1===t(s.lineString(a[i],e.properties),n,o,i))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,n,s){var i=n;return o(e,function(e,s,o,a,r){i=0===s&&void 0===n?e:t(i,e,s,o,a,r)},s),i},t.propEach=r,t.propReduce=function(e,t,n){var s=n;return r(e,function(e,o){s=0===o&&void 0===n?e:t(s,e,o)}),s},t.featureEach=c,t.featureReduce=function(e,t,n){var s=n;return c(e,function(e,o){s=0===o&&void 0===n?e:t(s,e,o)}),s},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=a,t.geomReduce=function(e,t,n){var s=n;return a(e,function(e,o,i,a,r){s=0===o&&void 0===n?e:t(s,e,o,i,a,r)}),s},t.flattenEach=i,t.flattenReduce=function(e,t,n){var s=n;return i(e,function(e,o,i){s=0===o&&0===i&&void 0===n?e:t(s,e,o,i)}),s},t.segmentEach=l,t.segmentReduce=function(e,t,n){var s=n,o=!1;return l(e,function(e,i,a,r,c){s=!1===o&&void 0===n?e:t(s,e,i,a,r,c),o=!0}),s},t.lineEach=d,t.lineReduce=function(e,t,n){var s=n;return d(e,function(e,o,i,a){s=0===o&&void 0===n?e:t(s,e,o,i,a)}),s},t.findSegment=function(e,t){if(t=t||{},!s.isObject(t))throw new Error("options is invalid");var o,c,l=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,n=t.segmentIndex||0,r=t.properties;switch(e.type){case"FeatureCollection":l<0&&(l=e.features.length+l),r=r||e.features[l].properties,c=e.features[l].geometry;break;case"Feature":r=r||e.properties,c=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":c=e;break;default:throw new Error("geojson is invalid")}if(null===c)return null;switch(o=c.coordinates,c.type){case"Point":case"MultiPoint":return null;case"LineString":return n<0&&(n=o.length+n-1),s.lineString([o[n],o[n+1]],r,t);case"Polygon":return a<0&&(a=o.length+a),n<0&&(n=o[a].length+n-1),s.lineString([o[a][n],o[a][n+1]],r,t);case"MultiLineString":return i<0&&(i=o.length+i),n<0&&(n=o[i].length+n-1),s.lineString([o[i][n],o[i][n+1]],r,t);case"MultiPolygon":return i<0&&(i=o.length+i),a<0&&(a=o[i].length+a),n<0&&(n=o[i][a].length-n-1),s.lineString([o[i][a][n],o[i][a][n+1]],r,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!s.isObject(t))throw new Error("options is invalid");var n,c,l=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,o=t.coordIndex||0,r=t.properties;switch(e.type){case"FeatureCollection":l<0&&(l=e.features.length+l),r=r||e.features[l].properties,c=e.features[l].geometry;break;case"Feature":r=r||e.properties,c=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":c=e;break;default:throw new Error("geojson is invalid")}if(null===c)return null;switch(n=c.coordinates,c.type){case"Point":return s.point(n,r,t);case"MultiPoint":return i<0&&(i=n.length+i),s.point(n[i],r,t);case"LineString":return o<0&&(o=n.length+o),s.point(n[o],r,t);case"Polygon":return a<0&&(a=n.length+a),o<0&&(o=n[a].length+o),s.point(n[a][o],r,t);case"MultiLineString":return i<0&&(i=n.length+i),o<0&&(o=n[i].length+o),s.point(n[i][o],r,t);case"MultiPolygon":return i<0&&(i=n.length+i),a<0&&(a=n[i].length+a),o<0&&(o=n[i][a].length-o),s.point(n[i][a][o],r,t)}throw new Error("geojson is invalid")}},49972:function(e){e.exports=function(e){var s=0,o=0,t=0,n=0;return e.map(function(e){var i,a=(e=e.slice())[0],r=a.toUpperCase();if(a!=r)switch(e[0]=r,a){case"a":e[6]+=t,e[7]+=n;break;case"v":e[1]+=n;break;case"h":e[1]+=t;break;default:for(i=1;i<e.length;)e[i++]+=t,e[i++]+=n}switch(r){case"Z":t=s,n=o;break;case"H":t=e[1];break;case"V":n=e[1];break;case"M":t=s=e[1],n=o=e[2];break;default:t=e[e.length-2],n=e[e.length-1]}return e})}},76752:function(e){"use strict";e.exports=function(e,t){if(!e||null==e.length)throw Error("Argument should be an array");t=t==null?1:Math.floor(t);for(o=Array(2*t),n=0;n<t;n++){for(var n,o,i=-1/0,a=1/0,s=n,r=e.length;s<r;s+=t)e[s]>i&&(i=e[s]),e[s]<a&&(a=e[s]);o[n]=a,o[t+n]=i}return o}},10272:function(e){"use strict";e.exports=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var s,o=Object(e),i=o.length;if(0===i)return-1;for(s=0;s<i;s++)if(t.call(n,o[s],s,o))return s;return-1}},71152:function(e,t,n){"use strict";var s=n(76752);e.exports=function(e,t,n){if(!e||null==e.length)throw Error("Argument should be an array");t==null&&(t=1),n==null&&(n=s(e,t));for(i=0;i<t;i++){var i,l,r=n[t+i],a=n[i],o=i,c=e.length;if(r===1/0&&a===-1/0)for(o=i;o<c;o+=t)e[o]=e[o]===r?1:e[o]===a?0:.5;else if(r===1/0)for(o=i;o<c;o+=t)e[o]=e[o]===r?1:0;else if(a===-1/0)for(o=i;o<c;o+=t)e[o]=e[o]===a?0:1;else{l=r-a;for(o=i;o<c;o+=t)isNaN(e[o])||(e[o]=0===l?.5:(e[o]-a)/l)}}return e}},67752:function(e){e.exports=function(e,t){if(s="number"==typeof e,o="number"==typeof t,s&&!o?(t=e,e=0):s||o||(e=0,t=0),n=(t|=0)-(e|=0),n<0)throw new Error("array length must be positive");for(var n,s,o,a=new Array(n),i=0,r=e;i<n;i++,r++)a[i]=r;return a}},45408:function(e,t,n){"use strict";f=n(4168);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var a,m,f,g,u=n(86832).codes,k=u.ERR_AMBIGUOUS_ARGUMENT,l=u.ERR_INVALID_ARG_TYPE,z=u.ERR_INVALID_ARG_VALUE,T=u.ERR_INVALID_RETURN_VALUE,i=u.ERR_MISSING_ARGS,r=n(26144),F=n(35840).inspect,w=n(35840).types,M=w.isPromise,v=w.isRegExp,D=Object.assign?Object.assign:n(60964).assign,b=Object.is?Object.is:n(39896);function d(){var e=n(25116);a=e.isDeepEqual,m=e.isDeepStrictEqual}new Map;var _=!1,s=e.exports=p,h={};function o(e){throw e.message instanceof Error?e.message:new r(e)}function C(e,t,n,s){if(!n){var o,i=!1;if(0===t)i=!0,s="No value argument passed to `assert.ok()`";else if(s instanceof Error)throw s;throw o=new r({actual:n,expected:!0,message:s,operator:"==",stackStartFn:e}),o.generatedMessage=i,o}}function p(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];C.apply(void 0,[p,t.length].concat(t))}s.fail=function e(t,n,s,o,i){var a,c,d,l=arguments.length;throw 0===l?c="Failed":1===l?(s=t,t=void 0):(!1===_&&(_=!0,(f.emitWarning?f.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===l&&(o="!=")),s instanceof Error?s:(d={actual:t,expected:n,operator:void 0===o?"fail":o,stackStartFn:i||e},void 0!==s&&(d.message=s),a=new r(d),c&&(a.message=c,a.generatedMessage=!0),a)},s.AssertionError=r,s.ok=p,s.equal=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");t!=n&&o({actual:t,expected:n,message:s,operator:"==",stackStartFn:e})},s.notEqual=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");t==n&&o({actual:t,expected:n,message:s,operator:"!=",stackStartFn:e})},s.deepEqual=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");void 0===a&&d(),a(t,n)||o({actual:t,expected:n,message:s,operator:"deepEqual",stackStartFn:e})},s.notDeepEqual=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");void 0===a&&d(),a(t,n)&&o({actual:t,expected:n,message:s,operator:"notDeepEqual",stackStartFn:e})},s.deepStrictEqual=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");void 0===a&&d(),m(t,n)||o({actual:t,expected:n,message:s,operator:"deepStrictEqual",stackStartFn:e})},s.notDeepStrictEqual=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");void 0===a&&d(),m(t,n)&&o({actual:t,expected:n,message:s,operator:"notDeepStrictEqual",stackStartFn:e})},s.strictEqual=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");b(t,n)||o({actual:t,expected:n,message:s,operator:"strictEqual",stackStartFn:e})},s.notStrictEqual=function e(t,n,s){if(arguments.length<2)throw new i("actual","expected");b(t,n)&&o({actual:t,expected:n,message:s,operator:"notStrictEqual",stackStartFn:e})},g=function e(t,n,s){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach(function(e){e in t&&(void 0!==s&&"string"==typeof s[e]&&v(t[e])&&t[e].test(s[e])?o[e]=s[e]:o[e]=t[e])})};function A(e,t,n,s){if("function"!=typeof t){if(v(t))return t.test(e);if(2===arguments.length)throw new l("expected",["Function","RegExp"],t);if("object"!==c(e)||null===e){var i,u=new r({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:s});throw u.operator=s.name,u}if(i=Object.keys(t),t instanceof Error)i.push("name","message");else if(0===i.length)throw new z("error",t,"may not be an empty object");return void 0===a&&d(),i.forEach(function(a){"string"==typeof e[a]&&v(t[a])&&t[a].test(e[a])||function(e,t,n,s,i,a){if(!(n in e)||!m(e[n],t[n])){if(!s){var l=new g(e,i),d=new g(t,i,e),c=new r({actual:l,expected:d,operator:"deepStrictEqual",stackStartFn:a});throw c.actual=e,c.expected=t,c.operator=a.name,c}o({actual:e,expected:t,message:s,operator:a.name,stackStartFn:a})}}(e,t,a,n,i,s)}),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function j(e){if("function"!=typeof e)throw new l("fn","Function",e);try{e()}catch(e){return e}return h}function y(e){return M(e)||null!==e&&"object"===c(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function O(e){return Promise.resolve().then(function(){var t;if("function"==typeof e){if(!y(t=e()))throw new T("instance of Promise","promiseFn",t)}else{if(!y(e))throw new l("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then(function(){return t}).then(function(){return h}).catch(function(e){return e})})}function x(e,t,n,s){if("string"==typeof n){if(4===arguments.length)throw new l("error",["Object","Error","Function","RegExp"],n);if("object"===c(t)&&null!==t){if(t.message===n)throw new k("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new k("error/message",'The error "'.concat(t,'" is identical to the message.'));s=n,n=void 0}else if(n!=null&&"object"!==c(n)&&"function"!=typeof n)throw new l("error",["Object","Error","Function","RegExp"],n);if(t===h){var a,i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=s?": ".concat(s):".",a="rejects"===e.name?"rejection":"exception",o({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(a).concat(i),stackStartFn:e})}if(n&&!A(t,n,s,e))throw t}function E(e,t,n,s){if(t!==h){if("string"==typeof n&&(s=n,n=void 0),!n||A(t,n)){var i=s?": ".concat(s):".",a="doesNotReject"===e.name?"rejection":"exception";o({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(a).concat(i,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function S(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];C.apply(void 0,[S,t.length].concat(t))}s.throws=function e(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];x.apply(void 0,[e,j(t)].concat(o))},s.rejects=function e(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];return O(t).then(function(t){return x.apply(void 0,[e,t].concat(o))})},s.doesNotThrow=function e(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];E.apply(void 0,[e,j(t)].concat(o))},s.doesNotReject=function e(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];return O(t).then(function(t){return E.apply(void 0,[e,t].concat(o))})},s.ifError=function e(t){if(t!=null){n="ifError got unwanted exception: ","object"===c(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=F(t);var n,s,o,i,l,a=new r({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),d=t.stack;if("string"==typeof d){s=d.split(`
`),s.shift();for(o=a.stack.split(`
`),i=0;i<s.length;i++)if(l=o.indexOf(s[i]),-1!==l){o=o.slice(0,l);break}a.stack="".concat(o.join(`
`),`
`).concat(s.join(`
`))}throw a}},s.strict=D(S,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict},26144:function(e,t,n){"use strict";a=n(4168);function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){var t="function"==typeof Map?new Map:void 0;return g=function(e){if(null===e||(s=e,-1===Function.toString.call(s).indexOf("[native code]")))return e;var s;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,r(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},g(e)}function p(){return p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(e,t,n){var o,s=[null];return s.push.apply(s,t),o=new(Function.bind.apply(e,s)),n&&m(o,n.prototype),o},p.apply(null,arguments)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}f=n(35840).inspect,j=n(86832).codes.ERR_INVALID_ARG_TYPE;function b(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var a,f,j,_,o="",h="",u="",s="",c={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function y(e){var n=Object.keys(e),t=Object.create(Object.getPrototypeOf(e));return n.forEach(function(n){t[n]=e[n]}),Object.defineProperty(t,"message",{value:e.message}),t}function d(e){return f(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}_=function(e){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==i(e)||null===e)throw new j("options","Object",e);var m,_,O,x=e.message,n=e.operator,E=e.stackStartFn,f=e.actual,g=e.expected,C=Error.stackTraceLimit;if(Error.stackTraceLimit=0,x!=null)m=l(this,r(t).call(this,String(x)));else if(a.stderr&&a.stderr.isTTY&&(a.stderr&&a.stderr.getColorDepth&&1!==a.stderr.getColorDepth()?(o="[34m",h="[32m",s="[39m",u="[31m"):(o="",h="",s="",u="")),"object"===i(f)&&null!==f&&"object"===i(g)&&null!==g&&"stack"in f&&f instanceof Error&&"stack"in g&&g instanceof Error&&(f=y(f),g=y(g)),"deepStrictEqual"===n||"strictEqual"===n)m=l(this,r(t).call(this,function(e,t,n){var p,_,x,C,k,A,v="",f="",E=0,y="",w=!1,z=d(e),l=z.split(`
`),m=d(t).split(`
`),r=0,T="";if("strictEqual"===n&&"object"===i(e)&&"object"===i(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===l.length&&1===m.length&&l[0]!==m[0])if(k=l[0].length+m[0].length,k<=10){if(!("object"===i(e)&&null!==e||"object"===i(t)&&null!==t||0===e&&0===t))return"".concat(c[n],`

`)+"".concat(l[0]," !== ").concat(m[0],`
`)}else if("strictEqualObject"!==n&&k<(a.stderr&&a.stderr.isTTY?a.stderr.columns:80)){for(;l[0][r]===m[0][r];)r++;r>2&&(T=`
  `.concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",r),"^"),r=0)}for(x=l[l.length-1],A=m[m.length-1];x===A&&(r++<2?y=`
  `.concat(x).concat(y):v=x,l.pop(),m.pop(),0!==l.length&&0!==m.length);)x=l[l.length-1],A=m[m.length-1];if(C=Math.max(l.length,m.length),0===C){if(_=z.split(`
`),_.length>30)for(_[26]="".concat(o,"...").concat(s);_.length>27;)_.pop();return"".concat(c.notIdentical,`

`).concat(_.join(`
`),`
`)}r>3&&(y=`
`.concat(o,"...").concat(s).concat(y),w=!0),""!==v&&(y=`
  `.concat(v).concat(y),v="");var g=0,M=c[n]+`
`.concat(h,"+ actual").concat(s," ").concat(u,"- expected").concat(s),F=" ".concat(o,"...").concat(s," Lines skipped");for(r=0;r<C;r++){if(p=r-E,l.length<r+1)p>1&&r>2&&(p>4?(f+=`
`.concat(o,"...").concat(s),w=!0):p>3&&(f+=`
  `.concat(m[r-2]),g++),f+=`
  `.concat(m[r-1]),g++),E=r,v+=`
`.concat(u,"-").concat(s," ").concat(m[r]),g++;else if(m.length<r+1)p>1&&r>2&&(p>4?(f+=`
`.concat(o,"...").concat(s),w=!0):p>3&&(f+=`
  `.concat(l[r-2]),g++),f+=`
  `.concat(l[r-1]),g++),E=r,f+=`
`.concat(h,"+").concat(s," ").concat(l[r]),g++;else{var O=m[r],j=l[r],S=j!==O&&(!b(j,",")||j.slice(0,-1)!==O);S&&b(O,",")&&O.slice(0,-1)===j&&(S=!1,j+=","),S?(p>1&&r>2&&(p>4?(f+=`
`.concat(o,"...").concat(s),w=!0):p>3&&(f+=`
  `.concat(l[r-2]),g++),f+=`
  `.concat(l[r-1]),g++),E=r,f+=`
`.concat(h,"+").concat(s," ").concat(j),v+=`
`.concat(u,"-").concat(s," ").concat(O),g+=2):(f+=v,v="",1!==p&&0!==r||(f+=`
  `.concat(j),g++))}if(g>20&&r<C-2)return"".concat(M).concat(F,`
`).concat(f,`
`).concat(o,"...").concat(s).concat(v,`
`)+"".concat(o,"...").concat(s)}return"".concat(M).concat(w?F:"",`
`).concat(f).concat(v).concat(y).concat(T)}(f,g,n)));else if("notDeepStrictEqual"===n||"notStrictEqual"===n){if(O=c[n],_=d(f).split(`
`),"notStrictEqual"===n&&"object"===i(f)&&null!==f&&(O=c.notStrictEqualObject),_.length>30)for(_[26]="".concat(o,"...").concat(s);_.length>27;)_.pop();m=1===_.length?l(this,r(t).call(this,"".concat(O," ").concat(_[0]))):l(this,r(t).call(this,"".concat(O,`

`).concat(_.join(`
`),`
`)))}else{var p=d(f),w="",k=c[n];"notDeepEqual"===n||"notEqual"===n?(p="".concat(c[n],`

`).concat(p)).length>1024&&(p="".concat(p.slice(0,1021),"...")):(w="".concat(d(g)),p.length>512&&(p="".concat(p.slice(0,509),"...")),w.length>512&&(w="".concat(w.slice(0,509),"...")),"deepEqual"===n||"equal"===n?p="".concat(k,`

`).concat(p,`

should equal

`):w=" ".concat(n," ").concat(w)),m=l(this,r(t).call(this,"".concat(p).concat(w)))}return Error.stackTraceLimit=C,m.generatedMessage=!x,Object.defineProperty(v(m),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),m.code="ERR_ASSERTION",m.actual=f,m.expected=g,m.operator=n,Error.captureStackTrace&&Error.captureStackTrace(v(m),E),m.stack,m.name="AssertionError",l(m)}var n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),p=t,n=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:f.custom,value:function(e,t){return f(this,function(e){for(t=1;t<arguments.length;t++){var t,n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.forEach(function(t){O(e,t,n[t])})}return e}({},t,{customInspect:!1,depth:0}))}}],n&&w(p.prototype,n),t}(g(Error)),e.exports=_},86832:function(e,t,n){"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var s,c,l={};function i(e,t,n){n||(n=Error);var s=function(n){function s(n,i,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),c=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,a(s).call(this,function(e,n,s){return"string"==typeof t?t:t(e,n,s)}(n,i,r))),c.code=e,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(s,n),s}(n);l[e]=s}function d(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,i){if(void 0===s&&(s=n(45408)),s("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(l="not ",t.substr(0,4)===l)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))c="The ".concat(e," ").concat(a," ").concat(d(t,"type"));else{var a,r,c,l,u,h=("number"!=typeof r&&(r=0),r+1>(u=e).length||-1===u.indexOf(".",r)?"argument":"property");c='The "'.concat(e,'" ').concat(h," ").concat(a," ").concat(d(t,"type"))}return c+". Received type ".concat(o(i))},TypeError),i("ERR_INVALID_ARG_VALUE",function(e,t){var s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";return void 0===c&&(c=n(35840)),s=c.inspect(t),s.length>128&&(s="".concat(s.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(o,". Received ").concat(s)},TypeError,RangeError),i("ERR_INVALID_RETURN_VALUE",function(e,t,n){var s;return s=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(o(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(s,".")},TypeError),i("ERR_MISSING_ARGS",function(){for(var t,i,a=arguments.length,e=new Array(a),o=0;o<a;o++)e[o]=arguments[o];switch(void 0===s&&(s=n(45408)),s(e.length>0,"At least one arg needs to be specified"),t="The ",i=e.length,e=e.map(function(e){return'"'.concat(e,'"')}),i){case 1:t+="".concat(e[0]," argument");break;case 2:t+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:t+=e.slice(0,i-1).join(", "),t+=", and ".concat(e[i-1]," arguments")}return"".concat(t," must be specified")},TypeError),e.exports.codes=l},25116:function(e,t,n){"use strict";function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,s=[],o=!0,i=!1,a=void 0;try{for(n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var V=void 0!==/a/g.flags,h=function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t},x=function(e){var t=[];return e.forEach(function(e,n){return t.push([n,e])}),t},D=Object.is?Object.is:n(39896),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},v=Number.isNaN?Number.isNaN:n(1560);function f(e){return e.call.bind(e)}var r=f(Object.prototype.hasOwnProperty),d=f(Object.prototype.propertyIsEnumerable),_=f(Object.prototype.toString),s=n(35840).types,B=s.isAnyArrayBuffer,I=s.isArrayBufferView,b=s.isDate,m=s.isMap,y=s.isRegExp,u=s.isSet,U=s.isNativeError,H=s.isBoxedPrimitive,z=s.isNumberObject,C=s.isStringObject,E=s.isBooleanObject,k=s.isBigIntObject,P=s.isSymbolObject,R=s.isFloat32Array,L=s.isFloat64Array;function N(e){if(0===e.length||e.length>10)return!0;for(var n,t=0;t<e.length;t++)if(n=e.charCodeAt(t),n<48||n>57)return!0;return 10===e.length&&e>=Math.pow(2,32)}function c(e){return Object.keys(e).filter(N).concat(l(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function T(e,t){if(e===t)return 0;for(var s=e.length,o=t.length,n=0,i=Math.min(s,o);n<i;++n)if(e[n]!==t[n]){s=e[n],o=t[n];break}return s<o?-1:o<s?1:0}var g=0,p=1,S=2,A=3;function i(e,t,n,s){if(e===t)return 0!==e||!n||D(e,t);if(n){{if("object"!==o(e))return"number"==typeof e&&v(e)&&v(t);if("object"!==o(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}}else{if(null===e||"object"!==o(e))return(null===t||"object"!==o(t))&&e==t;if(null===t||"object"!==o(t))return!1}if(d=_(e),d!==_(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var i,r,l,d,h,f,w,j=c(e),O=c(t);return j.length===O.length&&a(e,t,n,s,p,j)}if("[object Object]"===d&&(!m(e)&&m(t)||!u(e)&&u(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(y(e)){if(!y(t)||(i=e,r=t,!(V?i.source===r.source&&i.flags===r.flags:RegExp.prototype.toString.call(i)===RegExp.prototype.toString.call(r))))return!1}else if(U(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(I(e)){if(n||!R(e)&&!L(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===T(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;return h=c(e),w=c(t),h.length===w.length&&a(e,t,n,s,g,h)}if(u(e))return!!u(t)&&e.size===t.size&&a(e,t,n,s,S);if(m(e))return!!m(t)&&e.size===t.size&&a(e,t,n,s,A);if(B(e)){if(l=t,(f=e).byteLength!==l.byteLength||0!==T(new Uint8Array(f),new Uint8Array(l)))return!1}else if(H(e)&&!function(e,t){return z(e)?z(t)&&D(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):C(e)?C(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):E(e)?E(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):k(e)?k(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):P(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return a(e,t,n,s,g)}function w(e,t){return t.filter(function(t){return d(e,t)})}function a(e,t,n,s,a,c){if(5===arguments.length){c=Object.keys(e);var u,m,f,v,b,y,_,C,E,k=Object.keys(t);if(c.length!==k.length)return!1}for(u=0;u<c.length;u++)if(!r(t,c[u]))return!1;if(n&&5===arguments.length)if(m=l(e),0!==m.length){{b=0;for(u=0;u<m.length;u++)if(f=m[u],d(e,f)){if(!d(t,f))return!1;c.push(f),b++}else if(d(t,f))return!1;if(y=l(t),m.length!==y.length&&w(t,y).length!==b)return!1}}else if(v=l(t),0!==v.length&&0!==w(t,v).length)return!1;if(0===c.length&&(a===g||a===p&&0===e.length||0===e.size))return!0;if(void 0===s)s={val1:new Map,val2:new Map,position:0};else{if(_=s.val1.get(e),void 0!==_&&(C=s.val2.get(t),void 0!==C))return _===C;s.position++}return s.val1.set(e,s.position),s.val2.set(t,s.position),E=function(e,t,n,s,a,c){var d,u,m,l=0;if(c===S){if(!function(e,t,n,s){for(var a,r,c,d,i=null,u=h(e),l=0;l<u.length;l++)if(a=u[l],"object"===o(a)&&null!==a)null===i&&(i=new Set),i.add(a);else if(!t.has(a)){if(n)return!1;if(!$(e,t,a))return!1;null===i&&(i=new Set),i.add(a)}if(null!==i){for(d=h(t),c=0;c<d.length;c++)if(r=d[c],"object"===o(r)&&null!==r){if(!j(i,r,n,s))return!1}else if(!n&&!e.has(r)&&!j(i,r,n,s))return!1;return 0===i.size}return!0}(e,t,n,a))return!1}else if(c===A){if(!function(e,t,n,s){for(var c,l,d,u,h,r=null,p=x(e),m=0;m<p.length;m++){var g=O(p[m],2),a=g[0],f=g[1];if("object"===o(a)&&null!==a)null===r&&(r=new Set),r.add(a);else if(h=t.get(a),void 0===h&&!t.has(a)||!i(f,h,n,s)){if(n)return!1;if(!W(e,t,a,f,s))return!1;null===r&&(r=new Set),r.add(a)}}if(null!==r){for(d=x(t),c=0;c<d.length;c++)if(u=O(d[c],2),l=(a=u[0],u[1]),"object"===o(a)&&null!==a){if(!M(r,e,a,l,n,s))return!1}else if(!(n||e.has(a)&&i(e.get(a),l,!1,s)||M(r,e,a,l,!1,s)))return!1;return 0===r.size}return!0}(e,t,n,a))return!1}else if(c===p)for(;l<e.length;l++){if(!r(e,l)){if(r(t,l))return!1;for(d=Object.keys(e);l<d.length;l++)if(u=d[l],!r(t,u)||!i(e[u],t[u],n,a))return!1;return d.length===Object.keys(t).length}if(!r(t,l)||!i(e[l],t[l],n,a))return!1}for(l=0;l<s.length;l++)if(m=s[l],!i(e[m],t[m],n,a))return!1;return!0}(e,t,n,c,s,a),s.val1.delete(e),s.val2.delete(t),E}function j(e,t,n,s){for(var a,r=h(e),o=0;o<r.length;o++)if(a=r[o],i(t,a,n,s))return e.delete(a),!0;return!1}function F(e){switch(o(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(v(e))return!1}return!0}function $(e,t,n){var s=F(n);return s??(t.has(s)&&!e.has(s))}function W(e,t,n,s,o){var r,a=F(n);return a??(r=t.get(a),!(void 0===r&&!t.has(a)||!i(s,r,!1,o))&&!e.has(a)&&i(s,r,!1,o))}function M(e,t,n,s,o,a){for(var r,l=h(e),c=0;c<l.length;c++)if(r=l[c],i(n,r,o,a)&&i(s,t.get(r),o,a))return e.delete(r),!0;return!1}e.exports={isDeepEqual:function(e,t){return i(e,t,!1)},isDeepStrictEqual:function(e,t){return i(e,t,!0)}}},83160:function(e,t,n){"use strict";n.r(t),n.d(t,{decode:function(){return r},encode:function(){return a}});for(var a,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<64;i++)o[s.charCodeAt(i)]=i;a=function(e){var n,o=new Uint8Array(e),i=o.length,t="";for(n=0;n<i;n+=3)t+=s[o[n]>>2],t+=s[(3&o[n])<<4|o[n+1]>>4],t+=s[(15&o[n+1])<<2|o[n+2]>>6],t+=s[63&o[n+2]];return i%3==2?t=t.substring(0,t.length-1)+"=":i%3==1&&(t=t.substring(0,t.length-2)+"=="),t},r=function(e){var t,n,i,r,c,l,d,a=.75*e.length,u=e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--),r=new ArrayBuffer(a),n=new Uint8Array(r);for(t=0;t<u;t+=4)d=o[e.charCodeAt(t)],i=o[e.charCodeAt(t+1)],c=o[e.charCodeAt(t+2)],l=o[e.charCodeAt(t+3)],n[s++]=d<<2|i>>4,n[s++]=(15&i)<<4|c>>2,n[s++]=(3&c)<<6|63&l;return r}},59968:function(e,t){"use strict";t.byteLength=function(e){var t=a(e),s=t[0],n=t[1];return 3*(s+n)/4-n},t.toByteArray=function(e){var t,s,d=a(e),l=d[0],c=d[1],o=new r(function(e,t,n){return 3*(t+n)/4-n}(0,l,c)),i=0,u=c>0?l-4:l;for(t=0;t<u;t+=4)s=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],o[i++]=s>>16&255,o[i++]=s>>8&255,o[i++]=255&s;return 2===c&&(s=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,o[i++]=255&s),1===c&&(s=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,o[i++]=s>>8&255,o[i++]=255&s),o},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],r=16383,o=0,l=n-a;o<l;o+=r)i.push(c(e,o,o+r>l?l:o+r));return 1===a?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"=")),i.join("")};for(var s=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)s[o]=i[o],n[i.charCodeAt(o)]=o;function a(e){var t,n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return t=e.indexOf("="),-1===t&&(t=n),[t,t===n?0:4-t%4]}function c(e,t,n){for(var i,a,r=[],o=t;o<n;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(s[(i=a)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return r.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},64928:function(e){"use strict";function n(e,t,n,s,o){for(a=o+1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)>=0?(a=i,o=i-1):s=i+1}return a}function s(e,t,n,s,o){for(a=o+1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)>0?(a=i,o=i-1):s=i+1}return a}function o(e,t,n,s,o){for(a=s-1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)<0?(a=i,s=i+1):o=i-1}return a}function i(e,t,n,s,o){for(a=s-1;s<=o;){var a,i=s+o>>>1,r=e[i];(void 0!==n?n(r,t):r-t)<=0?(a=i,s=i+1):o=i-1}return a}function a(e,t,n,s,o){for(;s<=o;){var i=s+o>>>1,a=e[i],r=void 0!==n?n(a,t):a-t;if(0===r)return i;r<=0?s=i+1:o=i-1}return-1}function t(e,t,n,s,o,i){return"function"==typeof n?i(e,t,n,void 0===s?0:0|s,void 0===o?e.length-1:0|o):i(e,t,void 0,void 0===n?0:0|n,void 0===s?e.length-1:0|s)}e.exports={ge:function(e,s,o,i,a){return t(e,s,o,i,a,n)},gt:function(e,n,o,i,a){return t(e,n,o,i,a,s)},lt:function(e,n,s,i,a){return t(e,n,s,i,a,o)},le:function(e,n,s,o,a){return t(e,n,s,o,a,i)},eq:function(e,n,s,o,i){return t(e,n,s,o,i,a)}}},308:function(e,t){"use strict";function s(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return n=(e>65535)<<4,n|=t=((e>>>=n)>255)<<3,n|=t=((e>>>=t)>15)<<2,(n|=t=((e>>>=t)>3)<<1)|(e>>>=t)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=s,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var n=new Array(256);!function(e){for(t=0;t<256;++t){var t,n=t,s=t,o=7;for(n>>>=1;n;n>>>=1)s<<=1,s|=1&n,--o;e[t]=s<<o&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>s(e)+1}},29620:function(e,t,n){"use strict";var s,a=n(32420);e.exports=function(e,t){t||(t={});var n,i,r,c,d,u,h,m,f,p,v,E=null==t.cutoff?.25:t.cutoff,C=null==t.radius?8:t.radius,x=t.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");n=t.width,i=t.height,c=e,d=t.stride?t.stride:Math.floor(e.length/n/i)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(f=(m=e).getContext("2d"),n=m.width,i=m.height,c=(p=f.getImageData(0,0,n,i)).data,d=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(f=e,n=(m=e.canvas).width,i=m.height,c=(p=f.getImageData(0,0,n,i)).data,d=4):window.ImageData&&e instanceof window.ImageData&&(p=e,n=e.width,i=e.height,c=p.data,d=4);if(h=Math.max(n,i),window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array)for(v=c,c=Array(n*i),r=0,u=v.length;r<u;r++)c[r]=v[r*d+x]/255;else if(1!==d)throw Error("Raw data can have only 1 value per pixel");var l,j,g=Array(n*i),b=Array(n*i),y=Array(h),_=Array(h),w=Array(h+1),O=Array(h);for(r=0,u=n*i;r<u;r++)l=c[r],g[r]=1===l?0:0===l?s:Math.pow(Math.max(0,.5-l),2),b[r]=1===l?s:0===l?0:Math.pow(Math.max(0,l-.5),2);o(g,n,i,y,_,O,w),o(b,n,i,y,_,O,w),j=window.Float32Array?new Float32Array(n*i):new Array(n*i);for(r=0,u=n*i;r<u;r++)j[r]=a(1-((g[r]-b[r])/C+E),0,1);return j},s=1e20;function o(e,t,n,s,o,a,r){for(var c,l=0;l<t;l++){for(c=0;c<n;c++)s[c]=e[c*t+l];for(i(s,o,a,r,n),c=0;c<n;c++)e[c*t+l]=o[c]}for(c=0;c<n;c++){for(l=0;l<t;l++)s[l]=e[c*t+l];for(i(s,o,a,r,t),l=0;l<t;l++)e[c*t+l]=Math.sqrt(o[l])}}function i(e,t,n,o,i){n[0]=0,o[0]=-s,o[1]=+s;for(var c,r=1,a=0;r<i;r++){for(c=(e[r]+r*r-(e[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);c<=o[a];)a--,c=(e[r]+r*r-(e[n[a]]+n[a]*n[a]))/(2*r-2*n[a]);n[++a]=r,o[a]=c,o[a+1]=+s}for(r=0,a=0;r<i;r++){for(;o[a+1]<r;)a++;t[r]=(r-n[a])*(r-n[a])+e[n[a]]}}},99676:function(e,t,n){"use strict";var s=n(53664),o=n(57916),i=o(s("String.prototype.indexOf"));e.exports=function(e,t){var n=s(e,!!t);return"function"==typeof n&&i(e,".prototype.")>-1?o(n):n}},57916:function(e,t,n){"use strict";var a,i=n(8844),s=n(53664),d=n(14500),h=s("%TypeError%"),r=s("%Function.prototype.apply%"),c=s("%Function.prototype.call%"),l=s("%Reflect.apply%",!0)||i.call(c,r),o=s("%Object.defineProperty%",!0),u=s("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}e.exports=function(e){if("function"!=typeof e)throw new h("a function is required");var t=l(i,c,arguments);return d(t,1+u(0,e.length-(arguments.length-1)),!0)},a=function(){return l(i,r,arguments)},o?o(e.exports,"apply",{value:a}):e.exports.apply=a},32420:function(e){e.exports=function(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}},3808:function(e,t,n){"use strict";var s=n(32420);function o(e,t){t==null&&(t=!0);var o=e[0],i=e[1],a=e[2],n=e[3];return n==null&&(n=t?1:255),t&&(o*=255,i*=255,a*=255,n*=255),16777216*(o=255&s(o,0,255))+((i=255&s(i,0,255))<<16)+((a=255&s(a,0,255))<<8)+(255&s(n,0,255))}e.exports=o,e.exports.to=o,e.exports.from=function(e,t){var n=(e=+e)>>>24,s=(16711680&e)>>>16,o=(65280&e)>>>8,i=255&e;return!1===t?[n,s,o,i]:[n/255,s/255,o/255,i/255]}},17592:function(e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(e,t,n){"use strict";var o=n(96824),s=n(32420),i=n(72512);e.exports=function(e,t){"float"!==t&&t||(t="array"),"uint"===t&&(t="uint8"),"uint_clamped"===t&&(t="uint8_clamped");var n=new(i(t))(4),a="uint8"!==t&&"uint8_clamped"!==t;return e.length&&"string"!=typeof e||((e=o(e))[0]/=255,e[1]/=255,e[2]/=255),function(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(e[0]>1||0===e[0])&&(e[1]>1||0===e[1])&&(e[2]>1||0===e[2])&&(!e[3]||e[3]>1))}(e)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:255,a&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(a?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=null!=e[3]?e[3]:1):(n[0]=s(Math.floor(255*e[0]),0,255),n[1]=s(Math.floor(255*e[1]),0,255),n[2]=s(Math.floor(255*e[2]),0,255),n[3]=null==e[3]?255:s(Math.floor(255*e[3]),0,255)),n)}},96824:function(e,t,n){"use strict";var o=n(95532),i=n(53576),s=n(32420);e.exports=function(e){var t,n=o(e);return n.space?((t=Array(3))[0]=s(n.values[0],0,255),t[1]=s(n.values[1],0,255),t[2]=s(n.values[2],0,255),"h"===n.space[0]&&(t=i.rgb(t)),t.push(s(n.alpha,0,1)),t):[]}},95532:function(e,t,n){"use strict";var s,o=n(17592);e.exports=function(e){var t,i,r,c,l,d,n=[],a=1;return"string"==typeof e?(e=e.toLowerCase(),o[e]?(n=o[e].slice(),i="rgb"):"transparent"===e?(a=0,i="rgb",n=[0,0,0]):/^#[A-Fa-f0-9]+$/.test(e)?(t=e.slice(1),a=1,(r=t.length)<=4?(n=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],4===r&&(a=parseInt(t[3]+t[3],16)/255)):(n=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],8===r&&(a=parseInt(t[6]+t[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"):(l=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^)]*)\)/.exec(e))?(c=l[1],d="rgb"===c,i=t=c.replace(/a$/,""),r="cmyk"===t?4:"gray"===t?1:3,n=l[2].trim().split(/\s*[,/]\s*|\s+/).map(function(e,n){if(/%$/.test(e))return n===r?parseFloat(e)/100:"rgb"===t?255*parseFloat(e)/100:parseFloat(e);if("h"===t[n]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==s[e])return s[e]}return parseFloat(e)}),c===t&&n.push(1),a=d||void 0===n[r]?1:n[r],n=n.slice(0,r)):e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(n=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)}),i=e.match(/([a-z])/gi).join("").toLowerCase())):isNaN(e)?Array.isArray(e)||e.length?(n=[e[0],e[1],e[2]],i="rgb",a=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(i="rgb",n=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(i="hsl",n=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),a=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(a/=100)):(i="rgb",n=[e>>>16,(65280&e)>>>8,255&e]),{space:i,values:n,alpha:a}},s={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(e,t,n){"use strict";var s=n(19336);e.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,o,i,r,c,l=e[0]/360,a=e[1]/100,s=e[2]/100;if(0===a)return[o=255*s,o,o];n=2*s-(r=s<.5?s*(1+a):s+a-s*a),c=[0,0,0];for(i=0;i<3;i++)(t=l+1/3*-(i-1))<0?t++:t>1&&t--,o=6*t<1?n+6*(r-n)*t:2*t<1?r:3*t<2?n+(r-n)*(2/3-t)*6:n,c[i]=255*o;return c}},s.hsl=function(e){var n,c,i=e[0]/255,a=e[1]/255,r=e[2]/255,s=Math.min(i,a,r),t=Math.max(i,a,r),o=t-s;return t===s?n=0:i===t?n=(a-r)/o:a===t?n=2+(r-i)/o:r===t&&(n=4+(i-a)/o),(n=Math.min(60*n,360))<0&&(n+=360),c=(s+t)/2,[n,100*(t===s?0:c<=.5?o/(t+s):o/(2-t-s)),100*c]}},19336:function(e){"use strict";e.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(e){e.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(e,t,n){"use strict";e.exports={parse:n(46416),stringify:n(49395)}},8744:function(e,t,n){"use strict";var s=n(30584);e.exports={isSize:function(e){return/^[\d.]/.test(e)||-1!==e.indexOf("/")||-1!==s.indexOf(e)}}},46416:function(e,t,n){"use strict";var s,l=n(92384),r=n(68194),u=n(3748),h=n(2904),m=n(47916),c=n(7294),o=n(39956),d=n(8744).isSize;e.exports=i,s=i.cache={};function i(e){if("string"!=typeof e)throw new Error("Font argument must be a string.");if(s[e])return s[e];if(""===e)throw new Error("Cannot parse an empty string.");if(-1!==u.indexOf(e))return s[e]={system:e};for(var t,f,n={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},i=o(e,/\s+/);t=i.shift();){if(-1!==r.indexOf(t))return["style","variant","weight","stretch"].forEach(function(e){n[e]=t}),s[e]=n;if(-1===m.indexOf(t))if("normal"!==t&&"small-caps"!==t)if(-1===c.indexOf(t)){if(-1===h.indexOf(t)){if(d(t)){if(f=o(t,"/"),n.size=f[0],null!=f[1]?n.lineHeight=a(f[1]):"/"===i[0]&&(i.shift(),n.lineHeight=a(i.shift())),!i.length)throw new Error("Missing required font-family.");return n.family=o(i.join(" "),/\s*,\s*/).map(l),s[e]=n}throw new Error("Unknown or unsupported font token: "+t)}n.weight=t}else n.stretch=t;else n.variant=t;else n.style=t}throw new Error("Missing required font-size.")}function a(e){var t=parseFloat(e);return t.toString()===e?t:e}},49395:function(e,t,n){"use strict";var a=n(55616),r=n(8744).isSize,c=o(n(68194)),h=o(n(3748)),m=o(n(2904)),f=o(n(47916)),l=o(n(7294)),d={normal:1,"small-caps":1},u={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},i="serif";function s(e,t){if(e&&!t[e]&&!c[e])throw Error("Unknown keyword `"+e+"`");return e}function o(e){for(var n={},t=0;t<e.length;t++)n[e[t]]=1;return n}e.exports=function(e){if((e=a(e,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return e.system&&s(e.system,h),e.system;if(s(e.style,f),s(e.variant,d),s(e.weight,m),s(e.stretch,l),null==e.size&&(e.size="1rem"),"number"==typeof e.size&&(e.size+="px"),!r)throw Error("Bad size value `"+e.size+"`");e.family||(e.family=i),Array.isArray(e.family)&&(e.family.length||(e.family=[i]),e.family=e.family.map(function(e){return u[e]?e:'"'+e+'"'}).join(", "));var t=[];return t.push(e.style),e.variant!==e.style&&t.push(e.variant),e.weight!==e.variant&&e.weight!==e.style&&t.push(e.weight),e.stretch!==e.weight&&e.stretch!==e.variant&&e.stretch!==e.style&&t.push(e.stretch),t.push(e.size+(null==e.lineHeight||"normal"===e.lineHeight||e.lineHeight+""=="1"?"":"/"+e.lineHeight)),t.push(e.family),t.filter(Boolean).join(" ")}},27940:function(e,t,n){"use strict";var i=n(81680),a=n(18496),s=n(87396),r=n(95920),c=n(50868),l=n(84323),d=Function.prototype.bind,u=Object.defineProperty,h=Object.prototype.hasOwnProperty,o=function(e,t,n){var o,i=a(t)&&s(t.value);return delete(o=r(t)).writable,delete o.value,o.get=function(){return!n.overwriteDefinition&&h.call(this,e)?i:(t.value=d.call(i,n.resolveContext?n.resolveContext(this):this),u(this,e,t),this[e])},o};e.exports=function(e){var t=c(arguments[1]);return i(t.resolveContext)&&s(t.resolveContext),l(e,function(e,n){return o(n,e,t)})}},21092:function(e,t,n){"use strict";var o=n(81680),i=n(85488),a=n(38452),r=n(50868),s=n(71056),c=e.exports=function(e,t){var n,i,c,l,d;return arguments.length<2||"string"!=typeof e?(n=t,t=e,e=null):n=arguments[2],o(e)?(i=s.call(e,"c"),c=s.call(e,"e"),l=s.call(e,"w")):(i=l=!0,c=!1),d={value:t,configurable:i,enumerable:c,writable:l},n?a(r(n),d):d};c.gs=function(e,t,n){var c,l,d,u;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],o(t)?i(t)?o(n)?i(n)||(c=n,n=void 0):n=void 0:(c=t,t=n=void 0):t=void 0,o(e)?(l=s.call(e,"c"),d=s.call(e,"e")):(l=!0,d=!1),u={get:t,set:n,configurable:l,enumerable:d},c?a(r(c),u):u}},84706:function(e,t,n){"use strict";function s(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}n.d(t,{XE:function(){return s},kv:function(){return c},mo:function(){return l},Uf:function(){return d},SY:function(){return u},ik:function(){return h},oh:function(){return m}}),1===(o=s).length&&(i=o,o=function(e,t){return s(i(e),t)});var o,i,a=Array.prototype;function c(e,t){var n,o,i=e.length,s=-1;if(t==null){for(;++s<i;)if(null!=(n=e[s])&&n>=n)for(o=n;++s<i;)null!=(n=e[s])&&n>o&&(o=n)}else for(;++s<i;)if(null!=(n=t(e[s],s,e))&&n>=n)for(o=n;++s<i;)null!=(n=t(e[s],s,e))&&n>o&&(o=n);return o}function r(e){return null===e?NaN:+e}function l(e,t){var s,i=e.length,o=i,n=-1,a=0;if(t==null)for(;++n<i;)isNaN(s=r(e[n]))?--o:a+=s;else for(;++n<i;)isNaN(s=r(t(e[n],n,e)))?--o:a+=s;if(o)return a/o}function d(e){for(var t,n,i,s=e.length,a=-1,o=0;++a<s;)o+=e[a].length;for(n=new Array(o);--s>=0;)for(t=(i=e[s]).length;--t>=0;)n[--o]=i[t];return n}function u(e,t){var n,o,i=e.length,s=-1;if(t==null){for(;++s<i;)if(null!=(n=e[s])&&n>=n)for(o=n;++s<i;)null!=(n=e[s])&&o>n&&(o=n)}else for(;++s<i;)if(null!=(n=t(e[s],s,e))&&n>=n)for(o=n;++s<i;)null!=(n=t(e[s],s,e))&&o>n&&(o=n);return o}function h(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var o=-1,s=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(s);++o<s;)i[o]=e+o*n;return i}function m(e,t){var s,i=e.length,n=-1,o=0;if(t==null)for(;++n<i;)(s=+e[n])&&(o+=s);else for(;++n<i;)(s=+t(e[n],n,e))&&(o+=s);return o}a.slice,a.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(e,t,n){"use strict";n.d(t,{kH:function(){return i},UJ:function(){return m}});var o,i,s="$";function a(){}function c(e,t){if(n=new a,e instanceof a)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var n,o,r,s=-1,i=e.length;if(t==null)for(;++s<i;)n.set(s,e[s]);else for(;++s<i;)n.set(t(o=e[s],s,e),o)}else if(e)for(r in e)n.set(r,e[r]);return n}a.prototype=c.prototype={constructor:a,has:function(e){return s+e in this},get:function(e){return this[s+e]},set:function(e,t){return this[s+e]=t,this},remove:function(e){var t=s+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===s&&delete this[e]},keys:function(){var t,e=[];for(t in this)t[0]===s&&e.push(t.slice(1));return e},values:function(){var t,e=[];for(t in this)t[0]===s&&e.push(this[t]);return e},entries:function(){var e,t=[];for(e in this)e[0]===s&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t,e=0;for(t in this)t[0]===s&&++e;return e},empty:function(){for(var e in this)if(e[0]===s)return!1;return!0},each:function(e){for(var t in this)t[0]===s&&e(this[t],t.slice(1),this)}},i=c;function m(){var t,n,o,e=[],a=[];function s(t,a,r,c){if(a>=e.length)return o!=null&&t.sort(o),n!=null?n(t):t;for(var d,u,m,h=-1,p=t.length,g=e[a++],l=i(),f=r();++h<p;)(u=l.get(m=g(d=t[h])+""))?u.push(d):l.set(m,[d]);return l.each(function(e,t){c(f,t,s(e,a,r,c))}),f}function r(t,s){if(++s>e.length)return t;var o,i=a[s-1];return n!=null&&s>=e.length?o=t.entries():(o=[],t.each(function(e,t){o.push({key:t,values:r(e,s)})})),i!=null?o.sort(function(e,t){return i(e.key,t.key)}):o}return t={object:function(e){return s(e,0,u,h)},map:function(e){return s(e,0,l,d)},entries:function(e){return r(s(e,0,l,d),0)},key:function(n){return e.push(n),t},sortKeys:function(n){return a[e.length-1]=n,t},sortValues:function(e){return o=e,t},rollup:function(e){return n=e,t}}}function u(){return{}}function h(e,t,n){e[t]=n}function l(){return i()}function d(e,t,n){e.set(t,n)}function r(){}o=i.prototype,r.prototype=function(e,t){if(n=new r,e instanceof r)e.each(function(e){n.add(e)});else if(e){var n,s=-1,o=e.length;if(t==null)for(;++s<o;)n.add(e[s]);else for(;++s<o;)n.add(t(e[s],s,e))}return n}.prototype={constructor:r,has:o.has,add:function(e){return this[s+(e+="")]=e,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each}},49812:function(e,t,n){"use strict";function J(e,t){var s;function n(){var n,o,i=s.length,a=0,r=0;for(n=0;n<i;++n)a+=(o=s[n]).x,r+=o.y;for(a=a/i-e,r=r/i-t,n=0;n<i;++n)(o=s[n]).x-=a,o.y-=r}return e==null&&(e=0),t==null&&(t=0),n.initialize=function(e){s=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n}function s(e){return function(){return e}}function a(){return 1e-6*(Math.random()-.5)}function F(e,t,n,s){if(isNaN(t)||isNaN(n))return e;var o,a,r,l,d,u,g,v,b,i=e._root,c={data:s},m=e._x0,f=e._y0,p=e._x1,h=e._y1;if(!i)return e._root=c,e;for(;i.length;)if((u=t>=(a=(m+p)/2))?m=a:p=a,(d=n>=(r=(f+h)/2))?f=r:h=r,o=i,!(i=i[l=d<<1|u]))return o[l]=c,e;if(v=+e._x.call(null,i.data),g=+e._y.call(null,i.data),t===v&&n===g)return c.next=i,o?o[l]=c:e._root=c,e;do o=o?o[l]=new Array(4):e._root=new Array(4),(u=t>=(a=(m+p)/2))?m=a:p=a,(d=n>=(r=(f+h)/2))?f=r:h=r;while((l=d<<1|u)==(b=(g>=r)<<1|v>=a))return o[b]=i,o[l]=c,e}function i(e,t,n,s,o){this.node=e,this.x0=t,this.y0=n,this.x1=s,this.y1=o}function Y(e){return e[0]}function q(e){return e[1]}function j(e,t,n){var s=new y(t??Y,n??q,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function y(e,t,n,s,o,i){this._x=e,this._y=t,this._x0=n,this._y0=s,this._x1=o,this._y1=i,this._root=void 0}function x(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}n.r(t),n.d(t,{forceCenter:function(){return J},forceCollide:function(){return I},forceLink:function(){return R},forceManyBody:function(){return X},forceRadial:function(){return Q},forceSimulation:function(){return G},forceX:function(){return Z},forceY:function(){return B}}),o=j.prototype=y.prototype;function W(e){return e.x+e.vx}function V(e){return e.y+e.vy}function I(e){var t,o,i=1,r=1;function n(){for(var e,n,s,c,d,u,h,f=t.length,m=0;m<r;++m)for(u=j(t,W,V).visitAfter(l),n=0;n<f;++n)e=t[n],d=o[e.index],h=d*d,s=e.x+e.vx,c=e.y+e.vy,u.visit(p);function p(t,n,o,r,l){var f=t.data,v=t.r,u=d+v;if(!f)return n>s+u||r<s-u||o>c+u||l<c-u;if(f.index>e.index){var p=s-f.x-f.vx,g=c-f.y-f.vy,m=p*p+g*g;m<u*u&&(0===p&&(m+=(p=a())*p),0===g&&(m+=(g=a())*g),m=(u-(m=Math.sqrt(m)))/m*i,e.vx+=(p*=m)*(u=(v*=v)/(h+v)),e.vy+=(g*=m)*u,f.vx-=p*(u=1-u),f.vy-=g*u)}}}function l(e){if(e.data)return e.r=o[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function c(){if(t){var n,s,i=t.length;for(o=new Array(i),n=0;n<i;++n)s=t[n],o[s.index]=+e(s,n,t)}}return"function"!=typeof e&&(e=s(e==null?1:+e)),n.initialize=function(e){t=e,c()},n.iterations=function(e){return arguments.length?(r=+e,n):r},n.strength=function(e){return arguments.length?(i=+e,n):i},n.radius=function(t){return arguments.length?(e="function"==typeof t?t:s(+t),c(),n):e},n}o.copy=function(){var t,s,o,n=new y(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root;if(!e)return n;if(!e.length)return n._root=x(e),n;for(o=[{source:e,target:n._root=new Array(4)}];e=o.pop();)for(t=0;t<4;++t)(s=e.source[t])&&(s.length?o.push({source:s,target:e.target[t]=new Array(4)}):e.target[t]=x(s));return n},o.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return F(this.cover(t,n),t,n,e)},o.addAll=function(e){var t,n,s,l,o=e.length,d=new Array(o),u=new Array(o),i=1/0,a=1/0,r=-1/0,c=-1/0;for(t=0;t<o;++t)isNaN(n=+this._x.call(null,l=e[t]))||isNaN(s=+this._y.call(null,l))||(d[t]=n,u[t]=s,n<i&&(i=n),n>r&&(r=n),s<a&&(a=s),s>c&&(c=s));if(i>r||a>c)return this;for(this.cover(i,a).cover(r,c),t=0;t<o;++t)F(this,d[t],u[t],e[t]);return this},o.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var s,r,c,l,n=this._x0,o=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(o=Math.floor(t))+1;else{for(s=i-n,r=this._root;n>e||e>=i||o>t||t>=a;)switch(c=(t<o)<<1|e<n,(l=new Array(4))[c]=r,r=l,s*=2,c){case 0:i=n+s,a=o+s;break;case 1:n=i-s,a=o+s;break;case 2:i=n+s,o=a-s;break;case 3:n=i-s,o=a-s}this._root&&this._root.length&&(this._root=r)}return this._x0=n,this._y0=o,this._x1=i,this._y1=a,this},o.data=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},o.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},o.find=function(e,t,n){var a,r,c,l,d,u,p,g,b,w,h=this._x0,m=this._y0,v=this._x1,f=this._y1,s=[],o=this._root;for(o&&s.push(new i(o,h,m,v,f)),n==null?n=1/0:(h=e-n,m=t-n,v=e+n,f=t+n,n*=n);a=s.pop();)if(!(!(o=a.node)||(p=a.x0)>v||(g=a.y0)>f||(u=a.x1)<h||(d=a.y1)<m))if(o.length)c=(p+u)/2,r=(g+d)/2,s.push(new i(o[3],c,r,u,d),new i(o[2],p,r,c,d),new i(o[1],c,g,u,r),new i(o[0],p,g,c,r)),(b=(t>=r)<<1|e>=c)&&(a=s[s.length-1],s[s.length-1]=s[s.length-1-b],s[s.length-1-b]=a);else{var j=e-+this._x.call(null,o.data),y=t-+this._y.call(null,o.data),_=j*j+y*y;_<n&&(l=Math.sqrt(n=_),h=e-l,m=t-l,v=e+l,f=t+l,w=o.data)}return w},o.remove=function(e){if(isNaN(m=+this._x.call(null,e))||isNaN(u=+this._y.call(null,e)))return this;var n,s,o,i,a,r,c,l,d,u,h,m,t=this._root,f=this._x0,p=this._y0,g=this._x1,v=this._y1;if(!t)return this;if(t.length)for(;;){if((l=m>=(r=(f+g)/2))?f=r:g=r,(d=u>=(c=(p+v)/2))?p=c:v=c,n=t,!(t=t[s=d<<1|l]))return this;if(!t.length)break;(n[s+1&3]||n[s+2&3]||n[s+3&3])&&(a=n,h=s)}for(;t.data!==e;)if(i=t,!(t=t.next))return this;return(o=t.next)&&delete t.next,i?(o?i.next=o:delete i.next,this):n?(o?n[s]=o:delete n[s],(t=n[0]||n[1]||n[2]||n[3])&&t===(n[3]||n[2]||n[1]||n[0])&&!t.length&&(a?a[h]=t:this._root=t),this):(this._root=o,this)},o.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},o.root=function(){return this._root},o.size=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},o.visit=function(e){var t,s,a,r,c,l,d,u,o=[],n=this._root;for(n&&o.push(new i(n,this._x0,this._y0,this._x1,this._y1));s=o.pop();)!e(n=s.node,d=s.x0,u=s.y0,c=s.x1,l=s.y1)&&n.length&&(a=(d+c)/2,r=(u+l)/2,(t=n[3])&&o.push(new i(t,a,r,c,l)),(t=n[2])&&o.push(new i(t,d,r,a,l)),(t=n[1])&&o.push(new i(t,a,u,c,r)),(t=n[0])&&o.push(new i(t,d,u,a,r)));return this},o.visitAfter=function(e){s=[],c=[];for(this._root&&s.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));t=s.pop();){if(o=t.node,o.length){var t,n,s,o,c,l=t.x0,d=t.y0,u=t.x1,h=t.y1,a=(l+u)/2,r=(d+h)/2;(n=o[0])&&s.push(new i(n,l,d,a,r)),(n=o[1])&&s.push(new i(n,a,d,u,r)),(n=o[2])&&s.push(new i(n,l,r,a,h)),(n=o[3])&&s.push(new i(n,a,r,u,h))}c.push(t)}for(;t=c.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},o.x=function(e){return arguments.length?(this._x=e,this):this._x},o.y=function(e){return arguments.length?(this._y=e,this):this._y},_=n(34712);function P(e){return e.index}function k(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function R(e){var n,o,i,r,h,c=P,l=function(e){return 1/Math.min(n[e.source.index],n[e.target.index])},d=s(30),u=1;function t(t){for(var n,s,o,c,l,d,m,p,f=0,g=e.length;f<u;++f)for(s=0;s<g;++s)n=(p=e[s]).source,l=(c=p.target).x+c.vx-n.x-n.vx||a(),o=c.y+c.vy-n.y-n.vy||a(),l*=m=((m=Math.sqrt(l*l+o*o))-h[s])/m*t*i[s],o*=m,c.vx-=l*(d=r[s]),c.vy-=o*d,n.vx+=l*(d=1-d),n.vy+=o*d}function m(){if(o){var t,s,d=o.length,a=e.length,l=(0,_.kH)(o,c);for(s=0,n=new Array(d);s<a;++s)(t=e[s]).index=s,"object"!=typeof t.source&&(t.source=k(l,t.source)),"object"!=typeof t.target&&(t.target=k(l,t.target)),n[t.source.index]=(n[t.source.index]||0)+1,n[t.target.index]=(n[t.target.index]||0)+1;for(s=0,r=new Array(a);s<a;++s)t=e[s],r[s]=n[t.source.index]/(n[t.source.index]+n[t.target.index]);i=new Array(a),f(),h=new Array(a),p()}}function f(){if(o)for(var t=0,n=e.length;t<n;++t)i[t]=+l(e[t],t,e)}function p(){if(o)for(var t=0,n=e.length;t<n;++t)h[t]=+d(e[t],t,e)}return e==null&&(e=[]),t.initialize=function(e){o=e,m()},t.links=function(n){return arguments.length?(e=n,m(),t):e},t.id=function(e){return arguments.length?(c=e,t):c},t.iterations=function(e){return arguments.length?(u=+e,t):u},t.strength=function(e){return arguments.length?(l="function"==typeof e?e:s(+e),f(),t):l},t.distance=function(e){return arguments.length?(d="function"==typeof e?e:s(+e),p(),t):d},t}C={value:function(){}};function A(){for(var e,t=0,s=arguments.length,n={};t<s;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new f(n)}function f(e){this._=e}function L(e,t){for(var s,n=0,o=e.length;n<o;++n)if((s=e[n]).name===t)return s.value}function w(e,t,n){for(var s=0,o=e.length;s<o;++s)if(e[s].name===t){e[s]=C,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}f.prototype=A.prototype={constructor:f,on:function(e,t){var n,a,s=this._,i=(a=s,(e+"").trim().split(/^|\s+/).map(function(e){var n="",t=e.indexOf(".");if(t>=0&&(n=e.slice(t+1),e=e.slice(0,t)),e&&!a.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})),o=-1,r=i.length;if(!(arguments.length<2)){if(t!=null&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<r;)if(n=(e=i[o]).type)s[n]=w(s[n],e.name,t);else if(t==null)for(n in s)s[n]=w(s[n],e.name,null);return this}for(;++o<r;)if((n=(e=i[o]).type)&&(n=L(s[n],e.name)))return n},copy:function(){var n,e={},t=this._;for(n in t)e[n]=t[n].slice();return new f(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var s,o,i=new Array(s),n=0;n<s;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=0,s=(o=this._[e]).length;n<s;++n)o[n].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,i=o.length;s<i;++s)o[s].value.apply(t,n)}};var o,d,m,_,C,S,M,N=A,c=0,l=0,h=0,T=1e3,g=0,r=0,p=0,u="object"==typeof performance&&performance.now?performance:Date,E="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function z(){return r||(E(H),r=u.now()+p)}function H(){r=0}function b(){this._call=this._time=this._next=null}function D(e,t,n){var s=new b;return s.restart(e,t,n),s}function O(){r=(g=u.now())+p,c=l=0;try{!function(){z(),++c;for(var t,e=m;e;)(t=r-e._time)>=0&&e._call.call(null,t),e=e._next;--c}()}finally{c=0,function(){for(var t,n,e=m,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:m=n);d=t,v(s)}(),r=0}}function $(){var e=u.now(),t=e-g;t>T&&(p-=t,g=e)}function v(e){c||(l&&(l=clearTimeout(l)),e-r>24?(e<1/0&&(l=setTimeout(O,e-u.now()-p)),h&&(h=clearInterval(h))):(h||(g=u.now(),h=setInterval($,T)),c=1,E(O)))}function U(e){return e.x}function K(e){return e.y}b.prototype=D.prototype={constructor:b,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(n==null?z():+n)+(t==null?0:+t),this._next||d===this||(d?d._next=this:m=this,d=this),this._call=e,this._time=n,v()},stop:function(){this._call&&(this._call=null,this._time=1/0,v())}},S=10,M=Math.PI*(3-Math.sqrt(5));function G(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),c=0,o=.6,s=(0,_.kH)(),l=D(d),a=N("tick","end");function d(){u(),a.call("tick",t),n<i&&(l.stop(),a.call("end",t))}function u(i){var a,l,d,u=e.length;void 0===i&&(i=1);for(d=0;d<i;++d)for(n+=(c-n)*r,s.each(function(e){e(n)}),l=0;l<u;++l)null==(a=e[l]).fx?a.x+=a.vx*=o:(a.x=a.fx,a.vx=0),null==a.fy?a.y+=a.vy*=o:(a.y=a.fy,a.vy=0);return t}function h(){for(var t,s,o,n=0,i=e.length;n<i;++n)((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y))&&(s=S*Math.sqrt(n),o=n*M,t.x=s*Math.cos(o),t.y=s*Math.sin(o)),(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}function m(t){return t.initialize&&t.initialize(e),t}return e==null&&(e=[]),h(),t={tick:u,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),s.each(m),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(r=+e,t):+r},alphaTarget:function(e){return arguments.length?(c=+e,t):c},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},force:function(e,n){return arguments.length>1?(n==null?s.remove(e):s.set(e,m(n)),t):s.get(e)},find:function(t,n,s){var i,a,r,c,l,o=0,d=e.length;for(s==null?s=1/0:s*=s,o=0;o<d;++o)(c=(a=t-(i=e[o]).x)*a+(r=n-i.y)*r)<s&&(l=i,s=c);return l},on:function(e,n){return arguments.length>1?(a.on(e,n),t):a.on(e)}}}function X(){var t,n,i,c,l=s(-30),o=1,r=1/0,d=.81;function e(e){var s,o=n.length,i=j(n,U,K).visitAfter(h);for(c=e,s=0;s<o;++s)t=n[s],i.visit(m)}function u(){if(n){var e,t,s=n.length;for(i=new Array(s),e=0;e<s;++e)t=n[e],i[t.index]=+l(t,e,n)}}function h(e){var t,n,s,o,a,r=0,c=0;if(e.length){for(o=a=s=0;s<4;++s)(t=e[s])&&(n=Math.abs(t.value))&&(r+=t.value,c+=n,o+=n*t.x,a+=n*t.y);e.x=o/c,e.y=a/c}else{(t=e).x=t.data.x,t.y=t.data.y;do r+=i[t.data.index];while(t=t.next)}e.value=r}function m(e,n,s,l){if(!e.value)return!0;var h=e.x-t.x,m=e.y-t.y,f=l-n,u=h*h+m*m;if(f*f/d<u)return u<r&&(0===h&&(u+=(h=a())*h),0===m&&(u+=(m=a())*m),u<o&&(u=Math.sqrt(o*u)),t.vx+=h*e.value*c/u,t.vy+=m*e.value*c/u),!0;if(!(e.length||u>=r)){(e.data!==t||e.next)&&(0===h&&(u+=(h=a())*h),0===m&&(u+=(m=a())*m),u<o&&(u=Math.sqrt(o*u)));do e.data!==t&&(f=i[e.data.index]*c/u,t.vx+=h*f,t.vy+=m*f);while(e=e.next)}}return e.initialize=function(e){n=e,u()},e.strength=function(t){return arguments.length?(l="function"==typeof t?t:s(+t),u(),e):l},e.distanceMin=function(t){return arguments.length?(o=t*t,e):Math.sqrt(o)},e.distanceMax=function(t){return arguments.length?(r=t*t,e):Math.sqrt(r)},e.theta=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e}function Q(e,t,n){var i,a,r,c=s(.1);function o(e){for(s=0,d=i.length;s<d;++s){var s,d,o=i[s],c=o.x-t||1e-6,l=o.y-n||1e-6,u=Math.sqrt(c*c+l*l),h=(a[s]-u)*r[s]*e/u;o.vx+=c*h,o.vy+=l*h}}function l(){if(i){var t,n=i.length;for(r=new Array(n),a=new Array(n),t=0;t<n;++t)a[t]=+e(i[t],t,i),r[t]=isNaN(a[t])?0:+c(i[t],t,i)}}return"function"!=typeof e&&(e=s(+e)),t==null&&(t=0),n==null&&(n=0),o.initialize=function(e){i=e,l()},o.strength=function(e){return arguments.length?(c="function"==typeof e?e:s(+e),l(),o):c},o.radius=function(t){return arguments.length?(e="function"==typeof t?t:s(+t),l(),o):e},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(e){return arguments.length?(n=+e,o):n},o}function Z(e){var t,o,i,a=s(.1);function n(e){for(var s,n=0,a=t.length;n<a;++n)(s=t[n]).vx+=(i[n]-s.x)*o[n]*e}function r(){if(t){var n,s=t.length;for(o=new Array(s),i=new Array(s),n=0;n<s;++n)o[n]=isNaN(i[n]=+e(t[n],n,t))?0:+a(t[n],n,t)}}return"function"!=typeof e&&(e=s(e==null?0:+e)),n.initialize=function(e){t=e,r()},n.strength=function(e){return arguments.length?(a="function"==typeof e?e:s(+e),r(),n):a},n.x=function(t){return arguments.length?(e="function"==typeof t?t:s(+t),r(),n):e},n}function B(e){var t,o,i,a=s(.1);function n(e){for(var s,n=0,a=t.length;n<a;++n)(s=t[n]).vy+=(i[n]-s.y)*o[n]*e}function r(){if(t){var n,s=t.length;for(o=new Array(s),i=new Array(s),n=0;n<s;++n)o[n]=isNaN(i[n]=+e(t[n],n,t))?0:+a(t[n],n,t)}}return"function"!=typeof e&&(e=s(e==null?0:+e)),n.initialize=function(e){t=e,r()},n.strength=function(e){return arguments.length?(a="function"==typeof e?e:s(+e),r(),n):a},n.y=function(t){return arguments.length?(e="function"==typeof t?t:s(+t),r(),n):e},n}},57624:function(e,t,n){"use strict";function s(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,n=e.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+e.slice(s+1)]}n.d(t,{E9:function(){return h},SO:function(){return p}}),l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(e){if(!(t=l.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function o(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function c(e,t){if(i=s(e,t),!i)return e+"";var i,n=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}a.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type},r={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return c(100*e,t)},r:c,s:function(e,t){if(i=s(e,t),!i)return e+"";var i,o=i[0],r=i[1],n=r-(u=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=o.length;return n===a?o:n>a?o+new Array(n-a+1).join("0"):n>0?o.slice(0,n)+"."+o.slice(n):"0."+new Array(1-n).join("0")+s(e,Math.max(0,t+n-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function d(e){return e}var i,r,l,u,h,m=Array.prototype.map,f=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function p(e){var t,n,o=void 0===e.grouping||void 0===e.thousands?d:(t=m.call(e.grouping,Number),n=e.thousands+"",function(e,s){for(var i=e.length,r=[],c=0,o=t[0],a=0;i>0&&o>0&&(a+o+1>s&&(o=Math.max(1,s-a)),r.push(e.substring(i-=o,i+o)),!((a+=o+1)>s));)o=t[c=(c+1)%t.length];return r.reverse().join(n)}),c=void 0===e.currency?"":e.currency[0]+"",b=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",h=void 0===e.numerals?d:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(m.call(e.numerals,String)),p=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"-":e.minus+"",v=void 0===e.nan?"NaN":e.nan+"";function i(e){var _=(e=a(e)).fill,y=e.align,s=e.sign,d=e.symbol,i=e.zero,m=e.width,j=e.comma,n=e.precision,w=e.trim,t=e.type;"n"===t?(j=!0,t="g"):r[t]||(void 0===n&&(n=12),w=!0,t="g"),(i||"0"===_&&"="===y)&&(i=!0,_="0",y="=");var C="$"===d?c:"#"===d&&/[boxX]/.test(t)?"0"+t.toLowerCase():"",E="$"===d?b:/[%p]/.test(t)?p:"",O=r[t],k=/[defgprs%]/.test(t);function x(e){var r,d,p,b,x,A,c=C,a=E;if("c"===t)a=O(e)+a,e="";else if(p=(e=+e)<0||1/e<0,e=isNaN(e)?v:O(Math.abs(e),n),w&&(e=function(e){t:for(var s,o=e.length,t=1,n=-1;t<o;++t)switch(e[t]){case".":n=s=t;break;case"0":0===n&&(n=t),s=t;break;default:if(!+e[t])break t;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(s+1):e}(e)),p&&0==+e&&"+"!==s&&(p=!1),c=(p?"("===s?s:g:"-"===s||"("===s?"":s)+c,a=("s"===t?f[8+u/3]:"")+a+(p&&"("===s?")":""),k)for(d=-1,A=e.length;++d<A;)if(48>(x=e.charCodeAt(d))||x>57){a=(46===x?l+e.slice(d+1):e.slice(d))+a,e=e.slice(0,d);break}switch(j&&!i&&(e=o(e,1/0)),b=c.length+e.length+a.length,r=b<m?new Array(m-b+1).join(_):"",j&&i&&(e=o(r+e,r.length?m-a.length:1/0),r=""),y){case"<":e=c+e+a+r;break;case"=":e=c+r+e+a;break;case"^":e=r.slice(0,b=r.length>>1)+c+e+a+r.slice(b);break;default:e=r+c+e+a}return h(e)}return n=void 0===n?6:/[gprs]/.test(t)?Math.max(1,Math.min(21,n)):Math.max(0,Math.min(20,n)),x.toString=function(){return e+""},x}return{format:i,formatPrefix:function(e,t){var n,r=i(((e=a(e)).type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor((n=t,((n=s(Math.abs(n)))?n[1]:NaN)/3)))),c=Math.pow(10,-o),l=f[8+o/3];return function(e){return r(c*e)+l}}}}i=p({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),h=i.format,i.formatPrefix},87108:function(e,t,n){"use strict";n.r(t),n.d(t,{geoAiry:function(){return ii},geoAiryRaw:function(){return Wt},geoAitoff:function(){return Xo},geoAitoffRaw:function(){return se},geoArmadillo:function(){return Ko},geoArmadilloRaw:function(){return Zt},geoAugust:function(){return Wo},geoAugustRaw:function(){return he},geoBaker:function(){return zo},geoBakerRaw:function(){return _t},geoBerghaus:function(){return Co},geoBerghausRaw:function(){return pn},geoBertin1953:function(){return _o},geoBertin1953Raw:function(){return _n},geoBoggs:function(){return go},geoBoggsRaw:function(){return le},geoBonne:function(){return oo},geoBonneRaw:function(){return Mn},geoBottomley:function(){return Js},geoBottomleyRaw:function(){return Dn},geoBromley:function(){return Zs},geoBromleyRaw:function(){return Se},geoChamberlin:function(){return Vn},geoChamberlinAfrica:function(){return Bs},geoChamberlinRaw:function(){return In},geoCollignon:function(){return Rs},geoCollignonRaw:function(){return M},geoCraig:function(){return Ms},geoCraigRaw:function(){return Un},geoCraster:function(){return Ss},geoCrasterRaw:function(){return De},geoCylindricalEqualArea:function(){return Es},geoCylindricalEqualAreaRaw:function(){return Le},geoCylindricalStereographic:function(){return bs},geoCylindricalStereographicRaw:function(){return Gn},geoEckert1:function(){return vs},geoEckert1Raw:function(){return Ie},geoEckert2:function(){return gs},geoEckert2Raw:function(){return Ve},geoEckert3:function(){return ps},geoEckert3Raw:function(){return We},geoEckert4:function(){return ms},geoEckert4Raw:function(){return Ke},geoEckert5:function(){return ls},geoEckert5Raw:function(){return Ye},geoEckert6:function(){return rs},geoEckert6Raw:function(){return Xe},geoEisenlohr:function(){return is},geoEisenlohrRaw:function(){return Je},geoFahey:function(){return ss},geoFaheyRaw:function(){return nt},geoFoucaut:function(){return Cs},geoFoucautRaw:function(){return ot},geoFoucautSinusoidal:function(){return Os},geoFoucautSinusoidalRaw:function(){return Jn},geoGilbert:function(){return co},geoGingery:function(){return jo},geoGingeryRaw:function(){return Sn},geoGinzburg4:function(){return Mo},geoGinzburg4Raw:function(){return bt},geoGinzburg5:function(){return No},geoGinzburg5Raw:function(){return yt},geoGinzburg6:function(){return Ro},geoGinzburg6Raw:function(){return wt},geoGinzburg8:function(){return Bo},geoGinzburg8Raw:function(){return xt},geoGinzburg9:function(){return Yo},geoGinzburg9Raw:function(){return Et},geoGringorten:function(){return Zo},geoGringortenQuincuncial:function(){return io},geoGringortenRaw:function(){return J},geoGuyou:function(){return li},geoGuyouRaw:function(){return fe},geoHammer:function(){return Oo},geoHammerRaw:function(){return ie},geoHammerRetroazimuthal:function(){return ts},geoHammerRetroazimuthalRaw:function(){return It},geoHealpix:function(){return ti},geoHealpixRaw:function(){return $t},geoHill:function(){return Jo},geoHillRaw:function(){return Yt},geoHomolosine:function(){return Io},geoHomolosineRaw:function(){return re},geoHufnagel:function(){return Po},geoHufnagelRaw:function(){return nn},geoHyperelliptical:function(){return To},geoHyperellipticalRaw:function(){return rn},geoInterrupt:function(){return D},geoInterruptedBoggs:function(){return So},geoInterruptedHomolosine:function(){return Ao},geoInterruptedMollweide:function(){return ko},geoInterruptedMollweideHemispheres:function(){return xo},geoInterruptedQuarticAuthalic:function(){return hs},geoInterruptedSinuMollweide:function(){return wo},geoInterruptedSinusoidal:function(){return yo},geoKavrayskiy7:function(){return vo},geoKavrayskiy7Raw:function(){return gt},geoLagrange:function(){return fo},geoLagrangeRaw:function(){return En},geoLarrivee:function(){return uo},geoLarriveeRaw:function(){return mt},geoLaskowski:function(){return ao},geoLaskowskiRaw:function(){return ht},geoLittrow:function(){return eo},geoLittrowRaw:function(){return ut},geoLoximuthal:function(){return Qs},geoLoximuthalRaw:function(){return Nn},geoMiller:function(){return Ks},geoMillerRaw:function(){return dt},geoModifiedStereographic:function(){return V},geoModifiedStereographicAlaska:function(){return zs},geoModifiedStereographicGs48:function(){return Ts},geoModifiedStereographicGs50:function(){return Fs},geoModifiedStereographicLee:function(){return xs},geoModifiedStereographicMiller:function(){return As},geoModifiedStereographicRaw:function(){return Hn},geoMollweide:function(){return bo},geoMollweideRaw:function(){return T},geoMtFlatPolarParabolic:function(){return us},geoMtFlatPolarParabolicRaw:function(){return at},geoMtFlatPolarQuartic:function(){return ns},geoMtFlatPolarQuarticRaw:function(){return it},geoMtFlatPolarSinusoidal:function(){return os},geoMtFlatPolarSinusoidalRaw:function(){return st},geoNaturalEarth:function(){return et.c},geoNaturalEarth2:function(){return cs},geoNaturalEarth2Raw:function(){return Qe},geoNaturalEarthRaw:function(){return et.g},geoNellHammer:function(){return ds},geoNellHammerRaw:function(){return Ge},geoNicolosi:function(){return fs},geoNicolosiRaw:function(){return qe},geoPatterson:function(){return Ys},geoPattersonRaw:function(){return Pe},geoPeirceQuincuncial:function(){return Tn},geoPierceQuincuncial:function(){return Tn},geoPolyconic:function(){return ks},geoPolyconicRaw:function(){return Re},geoPolyhedral:function(){return me},geoPolyhedralButterfly:function(){return Is},geoPolyhedralCollignon:function(){return $s},geoPolyhedralWaterman:function(){return Ws},geoProject:function(){return Gs},geoQuantize:function(){return ro},geoQuincuncial:function(){return Me},geoRectangularPolyconic:function(){return lo},geoRectangularPolyconicRaw:function(){return Fn},geoRobinson:function(){return mo},geoRobinsonRaw:function(){return Fe},geoSatellite:function(){return po},geoSatelliteRaw:function(){return kn},geoSinuMollweide:function(){return $o},geoSinuMollweideRaw:function(){return te},geoSinusoidal:function(){return ho},geoSinusoidalRaw:function(){return z},geoStitch:function(){return Do},geoTimes:function(){return Lo},geoTimesRaw:function(){return vt},geoTwoPointAzimuthal:function(){return tn},geoTwoPointAzimuthalRaw:function(){return sn},geoTwoPointAzimuthalUsa:function(){return Ho},geoTwoPointEquidistant:function(){return Jt},geoTwoPointEquidistantRaw:function(){return en},geoTwoPointEquidistantUsa:function(){return Vo},geoVanDerGrinten:function(){return Uo},geoVanDerGrinten2:function(){return qo},geoVanDerGrinten2Raw:function(){return Ct},geoVanDerGrinten3:function(){return Go},geoVanDerGrinten3Raw:function(){return kt},geoVanDerGrinten4:function(){return Qo},geoVanDerGrinten4Raw:function(){return At},geoVanDerGrintenRaw:function(){return jt},geoWagner:function(){return Gt},geoWagner4:function(){return oi},geoWagner4Raw:function(){return Ut},geoWagner6:function(){return ai},geoWagner6Raw:function(){return St},geoWagner7:function(){return ei},geoWagnerRaw:function(){return Xt},geoWiechel:function(){return ci},geoWiechelRaw:function(){return Mt},geoWinkel3:function(){return Ns},geoWinkel3Raw:function(){return Tt}});var w,T,L,H,I,$,U,q,Y,G,X,Q,Z,d=n(87952),r=Math.abs,b=Math.atan,g=Math.atan2,o=(Math.ceil,Math.cos),S=Math.exp,B=Math.floor,j=Math.log,F=Math.max,O=Math.min,W=Math.pow,ve=Math.round,m=Math.sign||function(e){return e>0?1:e<0?-1:0},s=Math.sin,h=Math.tan,c=1e-6,R=1e-12,i=Math.PI,l=i/2,x=i/4,E=Math.SQRT1_2,v=a(2),C=a(i),k=2*i,p=180/i,f=i/180,be,an,ae,Te,Se,Qn,Xn,bt,yt,wt,Et,Bt,hn,fn,gn,bn,yn,wn,ue,et,es,Yn,oe,ke;function u(e){return e>1?l:e<-1?-l:Math.asin(e)}function y(e){return e>1?0:e<-1?i:Math.acos(e)}function a(e){return e>0?Math.sqrt(e):0}function zt(e){return(S(e)-S(-e))/2}function Vt(e){return(S(e)+S(-e))/2}function Wt(e){var n=h(e/2),t=2*j(o(e/2))/(n*n);function i(e,n){var c=o(e),a=o(n),l=s(n),i=a*c,r=-((1-i?j((1+i)/2)/(1-i):-.5)+t/(1+i));return[r*a*s(e),r*l]}return i.invert=function(n,i){var v,d=a(n*n+i*i),h=-e/2,_=50;if(!d)return[0,0];do{var f,p=h/2,l=o(p),m=s(p),b=m/l,y=-j(r(l));h-=v=(2/b*y-t*b-d)/(-y/(m*m)+1-t/(2*l*l))*(l<0?.7:1)}while(r(v)>c&&--_>0)return f=s(h),[g(n*f,d*o(h)),u(i*f/d)]},i}function ii(){var e=l,t=(0,d.U)(Wt),n=t(e);return n.radius=function(n){return arguments.length?t(e=n*f):e*p},n.scale(179.976).clipAngle(147)}function se(e,t){var n=o(t),i=function(e){return e?e/Math.sin(e):1}(y(n*o(e/=2)));return[2*n*s(e)*i,s(t)*i]}function Xo(){return(0,d.c)(se).scale(152.63)}function Zt(e){var t=s(e),n=o(e),i=e>=0?1:-1,a=h(i*e),l=(1+t-n)/2;function d(e,r){var c=o(r),d=o(e/=2);return[(1+c)*s(e),(i*r>-g(d,a)-.001?0:10*-i)+l+s(r)*n-(1+c)*t*d]}return d.invert=function(e,d){var h=0,u=0,A=50;do{var p=o(h),v=s(h),w=o(u),b=s(u),m=1+w,k=m*v-e,_=l+b*n-m*t*p-d,j=m*p/2,O=-v*b,x=t*m*v/2,C=n*w+t*p*b,E=O*x-C*j,y=(_*O-k*C)/E/2,f=(k*x-_*j)/E;r(f)>2&&(f/=2),h-=y,u-=f}while((r(y)>c||r(f)>c)&&--A>0)return i*u>-g(o(h),a)-.001?[2*h,u]:null},d}function Ko(){var t=20*f,e=t>=0?1:-1,s=h(e*t),i=(0,d.U)(Zt),n=i(t),a=n.stream;return n.parallel=function(n){return arguments.length?(s=h((e=(t=n*f)>=0?1:-1)*t),i(t)):t*p},n.stream=function(i){var l=n.rotate(),c=a(i),r=(n.rotate([0,0]),a(i)),d=n.precision();return n.rotate(l),c.sphere=function(){r.polygonStart(),r.lineStart();for(var n=-180*e;e*n<180;n+=90*e)r.point(n,90*e);if(t)for(;e*(n-=3*e*d)>=-180;)r.point(n,e*-g(o(n*f/2),s)*p);r.lineEnd(),r.polygonEnd()},c},n.scale(218.695).center([0,28.0974])}function he(e,t){var n=h(t/2),c=a(1-n*n),l=1+c*o(e/=2),i=s(e)*c/l,r=n/l,d=i*i,u=r*r;return[4/3*i*(3+d-3*u),4/3*r*(3+3*d-u)]}function Wo(){return(0,d.c)(he).scale(66.1603)}se.invert=function(e,t){if(!(e*e+4*t*t>i*i+c)){var m=e,h=t,T=25;do{var l,v,j,M=s(m),f=s(m/2),u=o(m/2),p=s(h),n=o(h),O=s(2*h),_=p*p,g=n*n,F=f*f,w=1-g*u*u,d=w?y(n*u)*a(l=1/w):l=0,x=2*d*n*f-e,C=d*p-t,E=l*(g*F+d*n*u*_),k=l*(.5*M*O-2*d*p*f),A=.25*l*(O*f-d*p*g*M),S=l*(_*u+d*F*n),b=k*A-S*E;if(!b)break;v=(C*k-x*S)/b,j=(x*A-C*E)/b,m-=v,h-=j}while((r(v)>c||r(j)>c)&&--T>0)return[m,h]}},he.invert=function(e,t){if(t*=3/8,!(e*=3/8)&&r(t)>1)return null;var n=1+e*e+t*t,i=a((n-a(n*n-4*t*t))/2),d=u(i)/3,h=i?function(e){return j(e+a(e*e-1))}(r(t/i))/3:function(e){return j(e+a(e*e+1))}(r(e))/3,c=o(d),l=Vt(h),f=l*l-c*c;return[2*m(e)*g(zt(h)*c,.25-f),2*m(t)*g(l*s(d),.25+f)]},be=a(8),an=j(1+v);function _t(e,t){var n=r(t);return n<x?[e,j(h(x+t/2))]:[e*o(n)*(2*v-1/s(n)),m(t)*(2*v*(n-x)-j(h(n/2)))]}function zo(){return(0,d.c)(_t).scale(112.314)}_t.invert=function(e,t){if((d=r(t))<an)return[e,2*b(S(t))-l];var i,a,c,d,n=x,u=25;do i=o(n/2),a=h(n/2),n-=c=(be*(n-x)-j(a)-d)/(be-i*i/(2*a));while(r(c)>R&&--u>0)return[e/(o(n)*(be-1/s(n))),m(t)*n]},I=n(69020);function pn(e){var t=2*i/e;function n(e,n){if(c=(0,I.O)(e,n),r(e)>l){var c,d=g(c[1],c[0]),h=a(c[0]*c[0]+c[1]*c[1]),m=t*ve((d-l)/t)+l,f=g(s(d-=m),2-o(d)),d=m+u(i/h*s(f))-f;c[0]=h*o(d),c[1]=h*s(d)}return c}return n.invert=function(e,n){if(r=a(e*e+n*n),r>l){var r,c=g(n,e),d=t*ve((c-l)/t)+l,m=c>d?-1:1,f=r*o(d-c),u=1/h(m*y((f-i)/a(i*(i-2*f)+r*r))),c=d+2*b((u+m*a(u*u-3))/3);e=r*o(c),n=r*s(c)}return I.O.invert(e,n)},n}function Co(){var e=5,a=(0,d.U)(pn),t=a(e),r=t.stream,n=.01,h=-o(n*f),c=s(n*f);return t.lobes=function(t){return arguments.length?a(e=+t):e},t.stream=function(a){var f=t.rotate(),m=r(a),d=(t.rotate([0,0]),r(a));return t.rotate(f),m.sphere=function(){d.polygonStart(),d.lineStart();for(var r=0,m=360/e,f=2*i/e,t=90-180/e,a=l;r<e;++r,t-=m,a-=f)d.point(g(c*o(a),h)*p,u(c*s(a))*p),t<-90?(d.point(-90,-180-t-n),d.point(-90,-180-t+n)):(d.point(90,t+n),d.point(90,t-n));d.lineEnd(),d.polygonEnd()},m},t.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}ae=n(54724);function ie(e,t){if(arguments.length<2&&(t=e),1===t)return ae.y;if(t===1/0)return jn;function n(n,s){var o=(0,ae.y)(n/t,s);return o[0]*=e,o}return n.invert=function(n,s){var o=ae.y.invert(n/e,s);return o[0]*=t,o},n}function jn(e,t){return[e*o(t)/o(t/=2),2*s(t)]}function Oo(){var e=2,t=(0,d.U)(ie),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n.scale(169.529)}function ee(e,t,n){var s,o,i,a=100;n=void 0===n?0:+n,t=+t;do(s=e(n))===(o=e(n+c))&&(o=s+c),n-=i=-1*c*(s-t)/(s-o);while(a-- >0&&r(i)>c)return a<0?NaN:n}function rt(e,t,n){return void 0===t&&(t=40),void 0===n&&(n=R),function(s,o,i,a){i=void 0===i?0:+i,a=void 0===a?0:+a;for(m=0;m<t;m++){var c=e(i,a),d=c[0]-s,l=c[1]-o;if(r(d)<n&&r(l)<n)break;if(p=d*d+l*l,p>v)i-=u/=2,a-=h/=2;else{v=p;var u,h,m,p,v,g=(i>0?-1:1)*n,f=(a>0?-1:1)*n,b=e(i+g,a),j=e(i,a+f),y=(b[0]-c[0])/g,_=(b[1]-c[1])/g,w=(j[0]-c[0])/f,O=(j[1]-c[1])/f,x=O*y-_*w,C=(r(x)<.5?.5:1)/x;if(i+=u=(l*w-d*O)*C,a+=h=(d*_-l*y)*C,r(u)<n&&r(h)<n)break}}return[i,a]}}function _n(){var t=ie(1.68,2);function e(e,n){e+n<-1.4&&(r=(e-n+1.6)*(e+n+1.4)/8,e+=r,n-=.8*r*s(n+i/2));var r,a=t(e,n),c=(1-o(e*n))/12;return a[1]<0&&(a[0]*=1+c),a[1]>0&&(a[1]*=1+c/1.5*a[0]*a[0]),a}return e.invert=rt(e),e}function _o(){return(0,d.c)(_n()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function xn(e,t){var n,i=e*s(t),a=30;do t-=n=(t+s(t)-i)/(1+o(t));while(r(n)>c&&--a>0)return t/2}function Ne(e,t,n){function i(i,a){return[e*i*o(a=xn(n,a)),t*s(a)]}return i.invert=function(i,a){return a=u(a/t),[i/(e*o(a)),u((2*a+s(2*a))/n)]},i}jn.invert=function(e,t){var n=2*u(t/2);return[e*o(n/2)/o(n),n]},T=Ne(v/l,v,i);function bo(){return(0,d.c)(T).scale(169.529)}Y=2.00276,Te=1.11072;function le(e,t){var n=xn(i,t);return[Y*e/(1/o(t)+Te/o(n)),(t+v*s(n))/Y]}function go(){return(0,d.c)(le).scale(160.857)}function P(e){var t=0,n=(0,d.U)(e),s=n(t);return s.parallel=function(e){return arguments.length?n(t=e*f):t*p},s}function z(e,t){return[e*o(t),t]}function ho(){return(0,d.c)(z).scale(152.63)}function Mn(e){if(!e)return z;var t=1/h(e);function n(n,i){var a=t+e-i,r=a&&n*o(i)/a;return[a*s(r),t-a*o(r)]}return n.invert=function(n,s){var i=a(n*n+(s=t-s)*s),r=t+e-i;return[i/o(r)*g(n,s),r]},n}function oo(){return P(Mn).scale(123.082).center([0,26.1441]).parallel(45)}function Dn(e){function t(t,n){var i=l-n,a=i&&t*e*s(i)/i;return[i*s(a)/e,l-i*o(a)]}return t.invert=function(t,n){var i=t*e,r=l-n,o=a(i*i+r*r),c=g(i,r);return[(o?o/s(o):1)*c/e,l-o]},t}function Js(){var e=.5,t=(0,d.U)(Dn),n=t(e);return n.fraction=function(n){return arguments.length?t(e=+n):e},n.scale(158.837)}le.invert=function(e,t){var a,l,d=Y*t,n=t<0?-x:x,u=25;do a=d-v*s(n),n-=l=(s(2*n)+2*n-i*s(a))/(2*o(2*n)+2+i*o(a)*v*o(n));while(r(l)>c&&--u>0)return a=d-v*s(n),[e*(1/o(a)+Te/o(n))/Y,a]},z.invert=function(e,t){return[e/o(t),t]},Se=Ne(1,4/i,i);function Zs(){return(0,d.c)(Se).scale(152.63)}H=n(24052),U=n(92992);function Pt(e,t,n,i,l,d){if(m=o(d),r(e)>1||r(d)>1)h=y(n*l+t*i*m);else{var h,m,f=s(e/2),p=s(d/2);h=2*u(a(f*f+t*i*p*p))}return r(h)>c?[h,g(i*s(d),t*l-n*i*m)]:[0,0]}function Oe(e,t,n){return y((e*e+t*t-n*n)/(2*e*t))}function qs(e){return e-2*i*B((e+i)/(2*i))}function In(e,t,n){for(var c,u,a=[[e[0],e[1],s(e[1]),o(e[1])],[t[0],t[1],s(t[1]),o(t[1])],[n[0],n[1],s(n[1]),o(n[1])]],r=a[2],l=0;l<3;++l,r=c)c=a[l],r.v=Pt(c[1]-r[1],r[3],r[2],c[3],c[2],c[0]-r[0]),r.point=[0,0];var d=Oe(a[0].v[0],a[2].v[0],a[1].v[0]),h=Oe(a[0].v[0],a[1].v[0],a[2].v[0]),m=i-d;return a[2].point[1]=0,a[0].point[0]=-(a[1].point[0]=a[0].v[0]/2),u=[a[2].point[0]=a[0].point[0]+a[2].v[0]*o(d),2*(a[0].point[1]=a[1].point[1]=a[2].v[0]*s(d))],function(e,t){var n,i,c,l,d,p=s(t),f=o(t),r=new Array(3);for(n=0;n<3;++n){if(l=a[n],r[n]=Pt(t-l[1],l[3],l[2],f,p,e-l[0]),!r[n][0])return l.point;r[n][1]=qs(r[n][1]-l.v[1])}c=u.slice();for(n=0;n<3;++n)d=2==n?0:n+1,i=Oe(a[n].v[0],r[n][0],r[d][0]),r[n][1]<0&&(i=-i),n?1==n?(i=h-i,c[0]-=r[n][0]*o(i),c[1]-=r[n][0]*s(i)):(i=m-i,c[0]+=r[n][0]*o(i),c[1]+=r[n][0]*s(i)):(c[0]+=r[n][0]*o(i),c[1]-=r[n][0]*s(i));return c[0]/=3,c[1]/=3,c}}function Ee(e){return e[0]*=f,e[1]*=f,e}function Bs(){return Vn([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Vn(e,t,n){var o,a,r=(0,H.c)({type:"MultiPoint",coordinates:[e,t,n]}),c=[-r[0],-r[1]],s=(0,U.c)(c),i=In(Ee(s(e)),Ee(s(t)),Ee(s(n)));return i.invert=rt(i),o=(0,d.c)(i).rotate(c),a=o.center,delete o.rotate,o.center=function(e){return arguments.length?a(s(e)):s.invert(a())},o.clipAngle(90)}function M(e,t){var n=a(1-s(t));return[2/C*e*n,C*(1-n)]}function Rs(){return(0,d.c)(M).scale(95.6464).center([0,30])}function Un(e){var t=h(e);function n(e,n){return[e,(e?e/s(e):1)*(s(n)*o(e)-t*o(n))]}return n.invert=t?function(e,n){e&&(n*=s(e)/e);var i=o(e);return[e,2*g(a(i*i+t*t-n*n)-i,t-n)]}:function(e,t){return[e,u(e?t*h(e)/e:t)]},n}function Ms(){return P(Un).scale(249.828).clipAngle(90)}M.invert=function(e,t){var n=(n=t/C-1)*n;return[n>0?e*a(i/n)/2:0,u(1-n)]},G=a(3);function De(e,t){return[G*e*(2*o(2*t/3)-1)/C,G*C*s(t/3)]}function Ss(){return(0,d.c)(De).scale(156.19)}function Le(e){var t=o(e);function n(e,n){return[e*t,s(n)/t]}return n.invert=function(e,n){return[e/t,u(n*t)]},n}function Es(){return P(Le).parallel(38.58).scale(195.044)}function Gn(e){var t=o(e);function n(e,n){return[e*t,(1+t)*h(n/2)]}return n.invert=function(e,n){return[e/t,2*b(n/(1+t))]},n}function bs(){return P(Gn).scale(124.75)}function Ie(e,t){var n=a(8/(3*i));return[n*e*(1-r(t)/i),n*t]}function vs(){return(0,d.c)(Ie).scale(165.664)}function Ve(e,t){var n=a(4-3*s(r(t)));return[2/a(6*i)*e*n,m(t)*a(2*i/3)*(2-n)]}function gs(){return(0,d.c)(Ve).scale(165.664)}function We(e,t){var n=a(i*(4+i));return[2/n*e*(1+a(1-4*t*t/(i*i))),4/n*t]}function ps(){return(0,d.c)(We).scale(180.739)}function Ke(e,t){d=(2+l)*s(t),t/=2;for(var n,d,u=0,h=1/0;u<10&&r(h)>c;u++)n=o(t),t-=h=(t+s(t)*(n+2)-d)/(2*n*(1+n));return[2/a(i*(4+i))*e*(1+o(t)),2*a(i/(4+i))*s(t)]}function ms(){return(0,d.c)(Ke).scale(180.739)}function Ye(e,t){return[e*(1+o(t))/a(2+i),2*t/a(2+i)]}function ls(){return(0,d.c)(Ye).scale(173.044)}function Xe(e,t){for(var n=(1+l)*s(t),d=0,u=1/0;d<10&&r(u)>c;d++)t-=u=(t+s(t)-n)/(1+o(t));return n=a(2+i),[e*(1+o(t))/n,2*t/n]}function rs(){return(0,d.c)(Xe).scale(173.044)}De.invert=function(e,t){var n=3*u(t/(G*C));return[C*e/(G*(2*o(2*n/3)-1)),n]},Ie.invert=function(e,t){var n=a(8/(3*i)),s=t/n;return[e/(n*(1-r(s)/i)),s]},Ve.invert=function(e,t){var n=2-r(t)/a(2*i/3);return[e*a(6*i)/(2*n),m(t)*u((4-n*n)/3)]},We.invert=function(e,t){var n=a(i*(4+i))/2;return[e*n/(1+a(1-t*t*(4+i)/(4*i))),t*n/2]},Ke.invert=function(e,t){var n=t*a((4+i)/i)/2,s=u(n),r=o(s);return[e/(2/a(i*(4+i))*(1+r)),u((s+n*(r+2))/(2+l))]},Ye.invert=function(e,t){var n=a(2+i),s=t*n/2;return[n*e/(1+o(s)),s]},Xe.invert=function(e,t){var n=1+l,i=a(n/2);return[2*e*i/(1+o(t*=i)),u((t+s(t))/n)]},X=3+2*v;function Je(e,t){var u=s(e/=2),r=o(e),c=a(o(t)),l=o(t/=2),i=s(t)/(l+v*r*c),d=a(2/(1+i*i)),n=a((v*l+(r+u)*c)/(v*l+(r-u)*c));return[X*(d*(n-1/n)-2*j(n)),X*(d*i*(n+1/n)-2*b(i))]}function is(){return(0,d.c)(Je).scale(62.5271)}Je.invert=function(e,t){if(!(N=he.invert(e/1.2,1.065*t)))return null;var N,z=N[0],f=N[1],Y=20;e/=X,t/=X;do{var T,L,q=z/2,V=f/2,p=s(q),m=o(q),k=s(V),u=o(V),B=o(f),i=a(B),d=k/(u+v*m*i),C=d*d,n=a(2/(1+C)),y=(v*u+(m+p)*i)/(v*u+(m-p)*i),h=a(y),M=h-1/h,_=h+1/h,I=n*M-2*j(h)-e,G=n*d*_-2*b(d)-t,A=k&&E*i*p*C/k,D=(v*m*u+i)/(2*(u+v*m*i)*(u+v*m*i)*i),$=-.5*d*n*n*n,P=$*A,H=$*D,x=(x=2*u+v*i*(m-p))*x*h,w=(v*m*u*i+B)/x,g=-v*p*k/(i*x),R=M*P-2*w/h+n*(w+w/y),W=M*H-2*g/h+n*(g+g/y),U=d*_*P-2*A/(1+C)+n*_*A+n*d*(w-w/y),K=d*_*H-2*D/(1+C)+n*_*D+n*d*(g-g/y),S=W*U-K*R;if(!S)break;T=(G*W-I*K)/S,L=(I*U-G*R)/S,z-=T,f=F(-l,O(l,f-L))}while((r(T)>c||r(L)>c)&&--Y>0)return r(r(f)-l)<c?[0,f]:Y&&[z,f]},Z=o(35*f);function nt(e,t){var n=h(t/2);return[e*Z*a(1-n*n),(1+Z)*n]}function ss(){return(0,d.c)(nt).scale(137.152)}function ot(e,t){var n=t/2,s=o(n);return[2*e/C*o(t)*s*s,C*h(n)]}function Cs(){return(0,d.c)(ot).scale(135.264)}function Jn(e){var n=1-e,d=t(i,0)[0]-t(-i,0)[0],r=a(2*(t(0,l)[1]-t(0,-l)[1])/d);function t(t,i){var a=o(i),r=s(i);return[a/(n+e*a)*t,n*i+e*r]}function c(e,n){var s=t(e,n);return[s[0]*r,s[1]/r]}function u(e){return c(0,e)[1]}return c.invert=function(t,s){var i=ee(u,s);return[t/r*(e+n/o(i)),i]},c}function Os(){var e=.5,t=(0,d.U)(Jn),n=t(e);return n.alpha=function(n){return arguments.length?t(e=+n):e},n.scale(168.725)}nt.invert=function(e,t){var n=t/(1+Z);return[e&&e/(Z*a(1-n*n)),2*b(n)]},ot.invert=function(e,t){var n=b(t/C),s=o(n),i=2*n;return[e*C/2/(o(i)*s*s),i]},Qn=n(4888),Xn=n(69604);function Rn(e){return[e[0]/2,u(h(e[1]/2*f))*p]}function zn(e){return[2*e[0],2*b(s(e[1]*f))*p]}function co(e){e==null&&(e=Qn.c);var n=e(),o=(0,Xn.c)().scale(p).precision(0).clipAngle(null).translate([0,0]);function s(e){return n(Rn(e))}function t(e){s[e]=function(){return arguments.length?(n[e].apply(n,arguments),s):n[e]()}}return n.invert&&(s.invert=function(e){return zn(n.invert(e))}),s.stream=function(e){var t=n.stream(e),s=o.stream({point:function(e,n){t.point(e/2,u(h(-n/2*f))*p)},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}});return s.sphere=t.sphere,s},s.rotate=function(e){return arguments.length?(o.rotate(e),s):o.rotate()},s.center=function(e){return arguments.length?(n.center(Rn(e)),s):zn(n.center())},t("angle"),t("clipAngle"),t("clipExtent"),t("fitExtent"),t("fitHeight"),t("fitSize"),t("fitWidth"),t("scale"),t("translate"),t("precision"),s.scale(249.5)}function Sn(e,t){var n=2*i/t,d=e*e;function u(t,u){var p=(0,I.O)(t,u),h=p[0],m=p[1],k=h*h+m*m;if(k>d){var j,y,C,E,O=a(k),w=g(m,h),b=n*ve(w/n),f=w-b,v=e*o(f),A=(e*s(f)-f*s(v))/(l-v),_=An(f,A),x=(i-e)/ge(_,v,i);h=O,E=50;do h-=C=(e+ge(_,v,h)*x-O)/(_(h)*x);while(r(C)>c&&--E>0)m=f*s(h),h<l&&(m-=A*(h-l)),j=s(b),y=o(b),p[0]=h*y-m*j,p[1]=h*j+m*y}return p}return u.invert=function(t,c){if(y=t*t+c*c,y>d){var v=a(y),f=g(c,t),C=n*ve(f/n),x=f-C;t=v*o(x),c=v*s(x);for(var O=t-l,j=s(t),u=c/j,_=t<l?1/0:0,k=10;;){var y,m=e*s(u),h=e*o(u),b=s(h),p=l-h,w=(m-u*b)/p,E=An(u,w);if(r(_)<R||!--k)break;u-=_=(u*j-w*O-c)/(j-2*O*(p*(h+u*m*o(h)-b)-m*(m-u*b))/(p*p))}t=(v=e+ge(E,h,t)*(i-e)/ge(E,h,i))*o(f=C+u),c=v*s(f)}return I.O.invert(t,c)},u}function An(e,t){return function(n){var s=e*o(n);return n<l&&(s-=t),a(1+s*s)}}function ge(e,t,n){for(var s=(n-t)/50,o=e(t)+e(n),i=1,a=t;i<50;++i)o+=2*e(a+=s);return.5*o*s}function jo(){var n=6,e=30*f,c=o(e),a=s(e),r=(0,d.U)(Sn),t=r(e,n),l=t.stream,m=-o(.01*f),h=s(.01*f);return t.radius=function(t){return arguments.length?(c=o(e=t*f),a=s(e),r(e,n)):e*p},t.lobes=function(t){return arguments.length?r(e,n=+t):n},t.stream=function(e){var f=t.rotate(),d=l(e),r=(t.rotate([0,0]),l(e));return t.rotate(f),d.sphere=function(){r.polygonStart(),r.lineStart();for(var l=0,t=2*i/n,e=0;l<n;++l,e-=t)r.point(g(h*o(e),m)*p,u(h*s(e))*p),r.point(g(a*o(e-t/2),c)*p,u(a*s(e-t/2))*p);r.lineEnd(),r.polygonEnd()},d},t.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function ye(e,t,n,l,d,h,m,f){function p(a,r){if(!r)return[e*a/i,0];var c=r*r,p=e+c*(t+c*(n+c*l)),g=r*(d-1+c*(h-f+c*m)),v=(p*p+g*g)/(2*g),b=a*u(p/v)/i;return[v*s(b),r*(1+c*f)+v*(1-o(b))]}return arguments.length<8&&(f=0),p.invert=function(p,g){var P,W,w=i*p/e,j=g,K=50;do{var v=j*j,b=e+v*(t+v*(n+v*l)),_=j*(d-1+v*(h-f+v*m)),D=b*b+_*_,x=2*_,y=D/x,T=y*y,C=u(b/y)/i,M=w*C,U=b*b,S=(2*t+v*(4*n+6*v*l))*j,z=d+v*(3*h+5*v*m),O=(2*(b*S+_*(z-1))*x-D*(2*(z-1)))/(x*x),N=o(M),L=s(M),k=y*N,E=y*L,H=w/i*(1/a(1-U/T))*(S*y-b*O)/T,I=E-p,B=j*(1+v*f)+y-k-g,V=O*L+k*H,$=k*C,F=1+O-(O*N-E*H),R=E*C,A=V*R-F*$;if(!A)break;w-=W=(B*V-I*F)/A,j-=P=(I*R-B*$)/A}while((r(W)>c||r(P)>c)&&--K>0)return[w,j]},p}bt=ye(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Mo(){return(0,d.c)(bt).scale(149.995)}yt=ye(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function No(){return(0,d.c)(yt).scale(153.93)}wt=ye(5/6*i,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ro(){return(0,d.c)(wt).scale(130.945)}function xt(e,t){var n=e*e,s=t*t;return[e*(1-.162388*s)*(.87-952426e-9*n*n),t*(1+s/12)]}function Bo(){return(0,d.c)(xt).scale(131.747)}xt.invert=function(e,t){var o,i,a,n=e,s=t,l=50;do a=s*s,s-=i=(s*(1+a/12)-t)/(1+a/4);while(r(i)>c&&--l>0)l=50,e/=1-.162388*a;do o=(o=n*n)*o,n-=i=(n*(.87-952426e-9*o)-e)/(.87-.00476213*o);while(r(i)>c&&--l>0)return[n,s]},Et=ye(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Yo(){return(0,d.c)(Et).scale(131.087)}function Qt(e){var t=e(l,0)[0]-e(-l,0)[0];function n(n,s){var o=n>0?-.5:.5,a=e(n+o*i,s);return a[0]-=o*t,a}return e.invert&&(n.invert=function(n,s){var r=n>0?-.5:.5,a=e.invert(n+r*t,s),o=a[0]-r*i;return o<-i?o+=2*i:o>i&&(o-=2*i),a[0]=o,a}),n}function J(e,t){var n,b=m(e),h=m(t),f=o(t),p=o(e)*f,v=s(e)*f,d=s(h*t);return e=r(g(v,d)),t=u(p),r(e-l)>c&&(e%=l),n=function(e,t){if(t===l)return[0,0];var n,f,p,b,C,g=s(t),d=g*g,m=d*d,_=1+m,P=1+3*m,A=1-m,L=u(1/a(_)),y=A+d*_*L,x=(1-g)/y,w=a(x),h=x*_,O=a(h),v=w*A;if(0===e)return[0,-(v+d*O)];var T,E=o(t),k=1/E,j=2*g*E,N=(-y*E-(1-g)*((-3*d+L*P)*j))/(y*y),M=-k*j,F=-k*(d*_*N+x*P*j),D=-2*k*(A*(.5*N/w)-2*d*w*j),z=4*e/i;if(e>.222*i||t<i/4&&e>.175*i){if(n=(v+d*a(h*(1+m)-v*v))/(1+m),e>i/4)return[n,n];f=n,p=.5*n,n=.5*(p+f),b=50;do{if(C=n*(D+M*a(h-n*n))+F*u(n/O)-z,!C)break;C<0?p=n:f=n,n=.5*(p+f)}while(r(f-p)>c&&--b>0)}else{n=c,b=25;do{var R=n*n,S=a(h-R),H=D+M*S,I=n*H+F*u(n/O)-z;n-=T=S?I/(H+(F-M*R)/S):0}while(r(T)>c&&--b>0)}return[n,-v-d*a(h-n*n)]}(e>i/4?l-e:e,t),e>i/4&&(d=n[0],n[0]=-n[1],n[1]=-d),n[0]*=b,n[1]*=-h,n}function Zo(){return(0,d.c)(Qt(J)).scale(239.75)}function Ft(e,t){if(t<c)return[(h=s(e))-(d=t*(e-h*(n=o(e)))/4)*n,n+d*h,1-t*h*h/2,e-d];if(t>=1-c)return d=(1-t)/4,i=1/(n=Vt(e)),[(h=((g=S(2*(g=e)))-1)/(g+1))+d*((f=n*zt(e))-e)/(n*n),i-d*h*i*(f-e),i+d*h*i*(f+e),2*b(S(e))-l+d*(f-e)/n];var n,i,d,h,f,g,p=[1,0,0,0,0,0,0,0,0],v=[a(t),0,0,0,0,0,0,0,0],m=0;for(n=a(1-t),f=1;r(v[m]/p[m])>c&&m<8;)d=p[m++],v[m]=(d-n)/2,p[m]=(d+n)/2,n=a(d*n),f*=2;i=f*p[m]*e;do i=(u(h=v[m]*s(n=i)/p[m])+i)/2;while(--m)return[s(i),h=o(i),h/o(i-n),i]}function K(e,t){if(!t)return e;if(1===t)return j(h(e/2+x));for(var l,n=1,s=a(1-t),o=a(t),d=0;r(o)>c;d++)e%i?(l=b(s*h(e)/n),l<0&&(l+=i),e+=l+~~(e/i)*i):e+=e,o=(n+s)/2,s=a(n*s),o=((n=o)-s)/2;return e/(W(2,d)*n)}function fe(e,t){var c=(v-1)/(v+1),n=a(1-c*c),p=K(l,n*n),y=j(h(i/4+r(t)/2)),d=S(-1*y)/a(c),u=function(e,t){var n=e*e,o=t+1,s=1-n-t*t;return[.5*((e>=0?l:-l)-g(s,2*e)),-.25*j(s*s+4*n)+.5*j(o*o+n)]}(d*o(-1*e),d*s(-1*e)),f=function(e,t,n){if(o=r(e),i=zt(r(t)),o){var o,i,d=1/s(o),c=1/(h(o)*h(o)),l=-(c+n*(i*i*d*d)-1+n),u=(-l+a(l*l-(n-1)*c*4))/2;return[K(b(1/a(u)),n)*m(e),K(b(a((u/c-1)/n)),1-n)*m(t)]}return[0,K(b(i),1-n)*m(t)]}(u[0],u[1],n*n);return[-f[1],(t>=0?1:-1)*(.5*p-f[0])]}function li(){return(0,d.c)(Qt(fe)).scale(151.496)}J.invert=function(e,t){r(e)>1&&(e=2*m(e)-e),r(t)>1&&(t=2*m(t)-t);var v=m(e),f=m(t),c=-v*e,d=-f*t,h=d/c<1,p=function(e,t){for(var v=0,f=1,n=.5,b=50;;){var s=n*n,d=a(n),O=u(1/a(1+s)),c=1-s+n*(1+s)*O,p=(1-d)/c,g=a(p),w=p*(1+s),C=g*(1-s),j=a(w-e*e),y=t+C+n*j;if(r(f-v)<R||0==--b||0===y)break;y>0?v=n:f=n,n=.5*(v+f)}if(!b)return null;var _=u(d),h=o(_),m=1/h,l=2*d*h,x=(-c*h-(-3*n+O*(1+3*s))*l*(1-d))/(c*c);return[i/4*(e*(-2*m*((1-s)*(.5*x/g)-2*n*g*l)+-m*l*j)+-m*(n*(1+s)*x+p*(1+3*s)*l)*u(e/a(w))),_]}(h?d:c,h?c:d),n=p[0],b=p[1],j=o(b);return h&&(n=-l-n),[v*(g(s(n)*j,-s(b))+i),f*u(o(n)*j)]},fe.invert=function(e,t){var n,s,o,i,d,h,c=(v-1)/(v+1),u=a(1-c*c),m=(d=-e,i=u*u,(h=.5*K(l,u*u)-t)?(s=Ft(h,i),d?(o=(n=Ft(d,1-i))[1]*n[1]+i*s[0]*s[0]*n[0]*n[0],[[s[0]*n[2]/o,s[1]*s[2]*n[0]*n[1]/o],[s[1]*n[1]/o,-s[0]*s[2]*n[0]*n[2]/o],[s[2]*n[1]*n[2]/o,-i*s[0]*s[1]*n[0]/o]]):[[s[0],0],[s[1],0],[s[2],0]]):[[0,(n=Ft(d,1-i))[0]/n[1]],[1/n[1],0],[n[2]/n[1],0]]),r=function(e,t){var n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}(m[0],m[1]);return[g(r[1],r[0])/-1,2*b(S(-.5*j(c*r[0]*r[0]+c*r[1]*r[1])))-l]},Bt=n(61780);function It(e){var t=s(e),n=o(e),i=Ht(e);function d(e,a){d=i(e,a),e=d[0],a=d[1];var d,h=s(a),m=o(a),f=o(e),p=y(t*h+n*m*f),g=s(p),u=r(g)>c?p/g:1;return[u*n*s(e),(r(e)>l?u:-u)*(t*m-n*h*f)]}return i.invert=Ht(-e),d.invert=function(e,n){var r=a(e*e+n*n),h=-s(r),f=o(r),c=r*f,d=-n*h,u=r*t,p=a(c*c+d*d-u*u),m=g(c*u+d*p,d*u-c*p),v=(r>l?-1:1)*g(e*h,r*o(m)*f+n*s(m)*h);return i.invert(v,m)},d}function Ht(e){var t=s(e),n=o(e);return function(e,i){var a=o(i),r=o(e)*a,l=s(e)*a,c=s(i);return[g(l,r*n-c*t),u(c*n+r*t)]}}function ts(){var t=0,s=(0,d.U)(It),e=s(t),o=e.rotate,i=e.stream,n=(0,Bt.c)();return e.parallel=function(n){if(!arguments.length)return t*p;var o=e.rotate();return s(t=n*f).rotate(o)},e.rotate=function(s){return arguments.length?(o.call(e,[s[0],s[1]-t*p]),n.center([-s[0],-s[1]]),e):((s=o.call(e))[1]+=t*p,s)},e.stream=function(e){return(e=i(e)).sphere=function(){e.polygonStart();var t,s=n.radius(89.99)().coordinates[0],i=s.length-1,o=-1;for(e.lineStart();++o<i;)e.point((t=s[o])[0],t[1]);for(e.lineEnd(),i=(s=n.radius(90.01)().coordinates[0]).length-1,e.lineStart();--o>=0;)e.point((t=s[o])[0],t[1]);e.lineEnd(),e.polygonEnd()},e},e.scale(79.4187).parallel(45).clipAngle(179.999)}var _e=n(84706),Lt=n(16016),Nt=u(1-1/3)*p,Dt=Le(0);function $t(e){var t=Nt*f,c=M(i,t)[0]-M(-i,t)[0],s=Dt(0,t)[1],a=M(0,t)[1],o=C-a,n=k/e,l=4/k,d=s+o*o*4/k;function u(u,h){var m,f,p=r(h);return p>t?(f=O(e-1,F(0,B((u+i)/n))),(m=M(u+=i*(e-1)/e-f*n,p))[0]=m[0]*k/c-k*(e-1)/(2*e)+f*k/e,m[1]=s+4*(m[1]-a)*o/k,h<0&&(m[1]=-m[1])):m=Dt(u,h),m[0]*=l,m[1]/=d,m}return u.invert=function(t,u){t/=l;var h,m,f=r(u*=d);return f>s?(m=O(e-1,F(0,B((t+i)/n))),t=(t+i*(e-1)/e-m*n)*c/k,h=M.invert(t,.25*(f-s)*k/o+a),h[0]-=i*(e-1)/e-m*n,u<0&&(h[1]=-h[1]),h):Dt.invert(t,u)},u}function ri(e,t){return[e,1&t?90-c:Nt]}function si(e,t){return[e,1&t?-90+c:-Nt]}function ni(e){return[e[0]*(1-c),e[1]]}function ti(){var t=4,n=(0,d.U)($t),e=n(t),s=e.stream;return e.lobes=function(e){return arguments.length?n(t=+e):t},e.stream=function(n){var i=e.rotate(),o=s(n),a=(e.rotate([0,0]),s(n));return e.rotate(i),o.sphere=function(){var e,n;(0,Lt.c)((e=180/t,n=[].concat((0,_e.ik)(-180,180+e/2,e).map(ri),(0,_e.ik)(180,-180-e/2,-e).map(si)),{type:"Polygon",coordinates:[180===e?n.map(ni):n]}),a)},o},e.scale(239.75)}function Yt(e){var d,t=1+e,n=u(s(1/t)),c=2*a(i/(d=i+4*n*t)),m=.5*c*(t+a(e*(2+e))),f=e*e,h=t*t;function p(u,p){if(v=1-s(p),v&&v<2){b=l-p,x=25;do{var v,b,j,y,O,x,_=s(b),C=o(b),w=n+g(_,t-C),E=1+h-2*t*C;b-=O=(b-f*n-t*_+E*w-.5*v*d)/(2*t*_*w)}while(r(O)>R&&--x>0)j=c*a(E),y=u*w/i}else j=c*(e+v),y=u*n/i;return[j*s(y),m-j*o(y)]}return p.invert=function(e,o){var l=e*e+(o-=m)*o,r=(1+h-l/(c*c))/(2*t),p=y(r),v=s(p),b=n+g(v,t-r);return[u(e/a(l))*i/b,u(1-2*(p-f*n-t*v+(1+h-2*t*r)*b)/d)]},p}function Jo(){var e=1,t=(0,d.U)(Yt),n=t(e);return n.ratio=function(n){return arguments.length?t(e=+n):e},n.scale(167.774).center([0,18.67])}q=.7109889596207567,L=.0528035274542;function te(e,t){return t>-q?((e=T(e,t))[1]+=L,e):z(e,t)}function $o(){return(0,d.c)(te).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function re(e,t){return r(t)>q?((e=T(e,t))[1]-=t>0?L:-L,e):z(e,t)}function Io(){return(0,d.c)(re).scale(152.63)}function nn(e,t,n,r){var d,c=a(4*i/(2*n+(1+e-t/2)*s(2*n)+(e+t)/2*s(4*n)+t/2*s(6*n))),l=a(r*s(n)*a((1+e*o(2*n)+t*o(4*n))/(1+e+t))),p=n*f(1);function h(n){return a(1+e*o(2*n)+t*o(4*n))}function f(o){var i=o*n;return(2*i+(1+e-t/2)*s(2*i)+(e+t)/2*s(4*i)+t/2*s(6*i))/n}function g(e){return h(e)*s(e)}return d=function(e,t){var r,a=n*ee(f,p*s(t)/n,t/i);return isNaN(a)&&(a=n*m(t)),r=c*h(a),[r*l*e/i*o(a),r/l*s(a)]},d.invert=function(e,t){var s=ee(g,t*l/c);return[e*i/(o(s)*c*l*h(s)),u(n*f(s/n)/p)]},0===n&&(c=a(r/i),(d=function(e,t){return[e*c,s(t)/c]}).invert=function(e,t){return[e/c,u(t*c)]}),d}function Po(){var e=1,t=0,n=45*f,s=2,o=(0,d.U)(nn),i=o(e,t,n,s);return i.a=function(i){return arguments.length?o(e=+i,t,n,s):e},i.b=function(i){return arguments.length?o(e,t=+i,n,s):t},i.psiMax=function(i){return arguments.length?o(e,t,n=+i*f,s):n*p},i.ratio=function(i){return arguments.length?o(e,t,n,s=+i):s},i.scale(180.739)}function Ot(e,t,n,s,o,i,a,r,c,l,d){if(d.nanEncountered)return NaN;var u,h,m,f,p,g,v,b,j,y;if(h=e(t+.25*(u=n-t)),m=e(n-.25*u),isNaN(h))d.nanEncountered=!0;else{if(!isNaN(m))return f=((p=(y=u*(s+4*h+o)/12)+(b=u*(o+4*m+i)/12))-a)/15,l>c?(d.maxDepthCount++,p+f):Math.abs(f)<r?p+f:(g=Ot(e,t,j=t+.5*u,s,h,o,y,.5*r,c,l+1,d),isNaN(g)?(d.nanEncountered=!0,NaN):(v=Ot(e,j,n,o,m,i,b,.5*r,c,l+1,d),isNaN(v)?(d.nanEncountered=!0,NaN):g+v));d.nanEncountered=!0}}function di(e,t,n,s,o){void 0===s&&(s=1e-8),void 0===o&&(o=20);var i=e(t),a=e(.5*(t+n)),r=e(n);return Ot(e,t,n,i,a,r,(i+4*a+r)*(n-t)/6,s,o,1,{maxDepthCount:0,nanEncountered:!1})}function rn(e,t,n){function c(n){return e+(1-e)*W(1-W(n,t),1/t)}function l(e){return di(c,0,e,1e-4)}for(var f,p,d=1/l(1),a=1e3,v=(1+1e-8)*d,o=[],h=0;h<=a;h++)o.push(l(h/a)*v);function g(e){var n,s=0,i=a,t=500;do o[t]>e?i=t:s=t,t=s+i>>1;while(t>s)return n=o[t+1]-o[t],n&&(n=(e-o[t+1])/n),(t+1+n)/a}return f=2*g(1)/i*d/n,p=function(e,t){var n=g(r(s(t))),o=c(n)*e;return n/=f,[o,t>=0?n:-n]},p.invert=function(e,t){var n;return r(t*=f)<1&&(n=m(t)*u(l(r(t))*d)),[e/c(r(t)),n]},p}function To(){var e=0,t=2.5,n=1.183136,s=(0,d.U)(rn),o=s(e,t,n);return o.alpha=function(o){return arguments.length?s(e=+o,t,n):e},o.k=function(o){return arguments.length?s(e,t=+o,n):t},o.gamma=function(o){return arguments.length?s(e,t,n=+o):n},o.scale(152.63)}function Fo(e,t){return r(e[0]-t[0])<c&&r(e[1]-t[1])<c}function dn(e,t){for(var n,o,a,c,r=-1,l=e.length,s=e[0],i=[];++r<l;){c=((o=e[r])[0]-s[0])/t,a=(o[1]-s[1])/t;for(n=0;n<t;++n)i.push([s[0]+n*c,s[1]+n*a]);s=o}return i.push(o),i}function D(e,t,n){function o(n,s){for(var a,r=s<0?-1:1,i=t[+(s<0)],o=0,c=i.length-1;o<c&&n>i[o][2][0];++o);return a=e(n-i[o][1][0],s),a[0]+=e(i[o][1][0],r*s>r*i[o][0][1]?i[o][0][1]:s)[0],a}n?o.invert=n(o):e.invert&&(o.invert=function(n,s){for(var r,c,l=a[+(s<0)],d=t[+(s<0)],i=0,u=l.length;i<u;++i)if(r=l[i],r[0][0]<=n&&n<r[1][0]&&r[0][1]<=s&&s<r[1][1])return c=e.invert(n-e(d[i][1][0],0)[0],s),c[0]+=d[i][1][0],Fo(o(c[0],c[1]),[n,s])?c:null});var i,a,s=(0,d.c)(o),r=s.stream;return s.stream=function(e){var n=s.rotate(),t=r(e),o=(s.rotate([0,0]),r(e));return s.rotate(n),t.sphere=function(){(0,Lt.c)(i,o)},t},s.lobes=function(n){return arguments.length?(i=function(e){var t,n,s,o,i,a,r,l=[],d=e[0].length;for(n=0;n<d;++n)s=(t=e[0][n])[0][0],a=t[0][1],o=t[1][1],i=t[2][0],r=t[2][1],l.push(dn([[s+c,a+c],[s+c,o-c],[i-c,o-c],[i-c,r+c]],30));for(n=e[1].length-1;n>=0;--n)s=(t=e[1][n])[0][0],a=t[0][1],o=t[1][1],i=t[2][0],r=t[2][1],l.push(dn([[i-c,r-c],[i-c,o+c],[s+c,o+c],[s+c,a-c]],30));return{type:"Polygon",coordinates:[(0,_e.Uf)(l)]}}(n),t=n.map(function(e){return e.map(function(e){return[[e[0][0]*f,e[0][1]*f],[e[1][0]*f,e[1][1]*f],[e[2][0]*f,e[2][1]*f]]})}),a=t.map(function(t){return t.map(function(t){var o,i=e(t[0][0],t[0][1])[0],a=e(t[2][0],t[2][1])[0],n=e(t[1][0],t[0][1])[1],s=e(t[1][0],t[1][1])[1];return n>s&&(o=n,n=s,s=o),[[i,n],[a,s]]})}),s):t.map(function(e){return e.map(function(e){return[[e[0][0]*p,e[0][1]*p],[e[1][0]*p,e[1][1]*p],[e[2][0]*p,e[2][1]*p]]})})},t!=null&&s.lobes(t),s}te.invert=function(e,t){return t>-q?T.invert(e,t-L):z.invert(e,t)},re.invert=function(e,t){return r(t)>q?T.invert(e,t+(t>0?L:-L)):z.invert(e,t)},hn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function So(){return D(le,hn).scale(160.857)}fn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ao(){return D(re,fn).scale(152.63)}gn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ko(){return D(T,gn).scale(169.529)}bn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function xo(){return D(T,bn).scale(169.529).rotate([20,0])}yn=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function wo(){return D(te,yn,rt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}wn=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function yo(){return D(z,wn).scale(152.63).rotate([-20,0])}function gt(e,t){return[3/k*e*a(i*i/3-t*t),t]}function vo(){return(0,d.c)(gt).scale(158.837)}function En(e){function t(t,n){if(r(r(n)-l)<c)return[0,n<0?-2:2];var a=s(n),i=W((1+a)/(1-a),e/2),d=.5*(i+1/i)+o(t*=e);return[2*s(t)/d,(i-1/i)/d]}return t.invert=function(t,n){if(o=r(n),r(o-2)<c)return t?null:[0,m(n)*l];if(o>2)return null;var o,i=(t/=2)*t,a=(n/=2)*n,s=2*n/(1+i+a);return s=W((1+s)/(1-s),1/e),[g(2*t,1-i-a)/e,u((s-1)/(s+1))]},t}function fo(){var e=.5,t=(0,d.U)(En),n=t(e);return n.spacing=function(n){return arguments.length?t(e=+n):e},n.scale(124.75)}gt.invert=function(e,t){return[k/3*e/a(i*i/3-t*t),t]},ue=i/v;function mt(e,t){return[e*(1+a(o(t)))/2,t/(o(t/2)*o(e/6))]}function uo(){return(0,d.c)(mt).scale(97.2672)}function ht(e,t){var s=e*e,n=t*t;return[e*(.975534+n*(-.0143059*s-.119161+-.0547009*n)),t*(1.00384+s*(.0802894+-.02855*n+199025e-9*s)+n*(.0998909+-.0491032*n))]}function ao(){return(0,d.c)(ht).scale(139.98)}function ut(e,t){return[s(e)/o(t),h(t)*o(e)]}function eo(){return(0,d.c)(ut).scale(144.049).clipAngle(89.999)}function Nn(e){var t=o(e),n=h(x+e/2);function s(s,o){var a=o-e,i=r(a)<c?s*t:r(i=x+o/2)<c||r(r(i)-l)<c?0:s*a/j(h(i)/n);return[i,a]}return s.invert=function(s,o){var i,a=o+e;return[r(o)<c?s/t:r(i=x+a/2)<c||r(r(i)-l)<c?0:s*j(h(i)/n)/o,a]},s}function Qs(){return P(Nn).parallel(40).scale(158.837)}function dt(e,t){return[e,1.25*j(h(x+.4*t))]}function Ks(){return(0,d.c)(dt).scale(108.318)}function Hn(e){var t=e.length-1;function n(n,i){for(var r,m=o(i),f=2/(1+m*o(n)),l=f*m*s(n),d=f*s(i),h=t,u=e[h],c=u[0],a=u[1];--h>=0;)c=(u=e[h])[0]+l*(r=c)-d*a,a=u[1]+l*a+d*r;return[c=l*(r=c)-d*a,a=l*a+d*r]}return n.invert=function(n,i){var O=20,l=n,d=i;do{for(var f,_,x,C,w=t,y=e[w],p=y[0],m=y[1],v=0,h=0;--w>=0;)v=p+l*(f=v)-d*h,h=m+l*h+d*f,p=(y=e[w])[0]+l*(f=p)-d*m,m=y[1]+l*m+d*f;_=(v=p+l*(f=v)-d*h)*v+(h=m+l*h+d*f)*h,l-=C=((p=l*(f=p)-d*m-n)*v+(m=l*m+d*f-i)*h)/_,d-=x=(m*v-p*h)/_}while(r(C)+r(x)>c*c&&--O>0)if(O){var j=a(l*l+d*d),E=2*b(.5*j),k=s(E);return[g(l*k,j*o(E)),j?u(d*k/j):0]}},n}mt.invert=function(e,t){var A=r(e),u=r(t),i=c,n=l;u<ue?n*=u/ue:i+=6*y(ue/u);for(f=0;f<25;f++){var f,k=s(n),m=a(o(n)),E=s(n/2),d=o(n/2),C=s(i/6),h=o(i/6),j=.5*i*(1+m)-A,_=n/(d*h)-u,w=m?-.25*i*k/m:0,O=.5*(1+m),x=(1+.5*n*E/d)/(d*h),v=n/d*(C/6)/(h*h),g=w*v-x*O,b=(j*v-_*O)/g,p=(_*w-j*x)/g;if(n-=b,i-=p,r(b)<c&&r(p)<c)break}return[e<0?-i:i,t<0?-n:n]},ht.invert=function(e,t){var a=m(e)*i,o=t/2,h=50;do{var s=a*a,n=o*o,d=a*o,u=a*(.975534+n*(-.0143059*s-.119161+-.0547009*n))-e,l=o*(1.00384+s*(.0802894+-.02855*n+199025e-9*s)+n*(.0998909+-.0491032*n))-t,f=.975534-n*(.119161+3*s*.0143059+.0547009*n),p=-d*(.238322+.2188036*n+.0286118*s),g=d*(.1605788+7961e-7*s+-.0571*n),v=1.00384+s*(.0802894+199025e-9*s)+n*(3*(.0998909-.02855*s)-.245516*n),b=p*g-v*f,j=(l*p-u*v)/b,y=(u*g-l*f)/b;a-=j,o-=y}while((r(j)>c||r(y)>c)&&--h>0)return h&&[a,o]},ut.invert=function(e,t){var n=e*e,o=t*t+1,s=n+o,i=e?E*a((s-a(s*s-4*n))/n):1/a(o);return[u(e*i),m(t)*y(i)]},dt.invert=function(e,t){return[e,2.5*b(S(.8*t))-.625*i]};var Us=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Vs=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Hs=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Ls=[[.9245,0],[0,0],[.01943,0]],Ds=[[.721316,0],[0,0],[-.00881625,-.00617325]];function zs(){return V(Us,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Ts(){return V(Vs,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Fs(){return V(Hs,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function As(){return V(Ls,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function xs(){return V(Ds,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function V(e,t){var n=(0,d.c)(Hn(e)).rotate(t).clipAngle(90),s=(0,U.c)(t),o=n.center;return delete n.rotate,n.center=function(e){return arguments.length?o(s(e)):s.invert(o())},n}Q=a(6),$=a(7);function at(e,t){var n=u(7*s(t)/(3*Q));return[Q*e*(2*o(2*n/3)-1)/$,9*s(n/3)/$]}function us(){return(0,d.c)(at).scale(164.859)}function it(e,t){for(var i,d=(1+E)*s(t),n=t,l=0;l<25&&(n-=i=(s(n/2)+s(n)-d)/(.5*o(n/2)+o(n)),!(r(i)<c));l++);return[e*(1+2*o(n)/o(n/2))/(3*v),2*a(3)*s(n/2)/a(2+v)]}function ns(){return(0,d.c)(it).scale(188.209)}function st(e,t){for(var l,d=a(6/(4+i)),h=(1+i/4)*s(t),n=t/2,u=0;u<25&&(n-=l=(n/2+s(n)-h)/(.5+o(n)),!(r(l)<c));u++);return[d*(.5+o(n))*e/1.5,d*n]}function os(){return(0,d.c)(st).scale(166.518)}at.invert=function(e,t){var n=3*u(t*$/9);return[e*$/(Q*(2*o(2*n/3)-1)),u(3*s(n)*Q/7)]},it.invert=function(e,t){var i=t*a(2+v)/(2*a(3)),n=2*u(i);return[3*v*e/(1+2*o(n)/o(n/2)),u((i+s(n))/(1+E))]},st.invert=function(e,t){var d=a(6/(4+i)),n=t/d;return r(r(n)-l)<c&&(n=n<0?-l:l),[1.5*e/(d*(.5+o(n))),u((n/2+s(n))/(1+i/4))]},et=n(47984);function Qe(e,t){var n=t*t,s=n*n,o=n*s;return[e*(.84719-.13063*n+o*o*(.05494*n-.04515-.02326*s+.00331*o)),t*(1.01183+s*s*(.01926*n-.02625-.00396*s))]}function cs(){return(0,d.c)(Qe).scale(175.295)}function Ge(e,t){return[e*(1+o(t))/2,2*(t-h(t/2))]}function ds(){return(0,d.c)(Ge).scale(152.63)}Qe.invert=function(e,t){var n,s,i,a,o=t,c=25;do o-=a=(o*(1.01183+(s=(n=o*o)*n)*s*(.01926*n-.02625-.00396*s))-t)/(1.01183+s*s*(.21186*n-.23625+-.05148*s));while(r(a)>R&&--c>0)return[e/(.84719-.13063*(n=o*o)+(i=n*(s=n*n))*i*(.05494*n-.04515-.02326*s+.00331*i)),o]},Ge.invert=function(e,t){for(var n,a=t/2,s=0,i=1/0;s<10&&r(i)>c;++s)n=o(t/2),t-=i=(t-h(t/2)-a)/(1-.5/(n*n));return[2*e/(1+o(t)),t]},es=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function hs(){return D(ie(1/0),es).rotate([20,0]).scale(152.63)}function qe(e,t){var n=s(t),p=o(t),b=m(e);if(0===e||r(t)===l)return[0,t];if(0===t)return[e,0];if(r(e)===l)return[e*p,l*n];var d=i/(2*e)-2*e/i,f=2*t/i,c=(1-f*f)/(n-f),h=d*d,u=c*c,j=1+h/u,y=1+u/h,g=(d*n/c-d/2)/j,v=(u*n/h+c/2)/y,_=v*v-(u*n*n/h+c*n-1)/y;return[l*(g+a(g*g+p*p/j)*b),l*(v+a(_<0?0:_)*m(-t*d)*b)]}function fs(){return(0,d.c)(qe).scale(127.267)}qe.invert=function(e,t){var o=(e/=l)*e,n=o+(t/=l)*t,r=i*i;return[e?(n-1+a((1-n)*(1-n)+4*o))/(2*e)*l:0,ee(function(e){return n*(i*s(e)-2*e)*i+4*e*e*(t-s(e))+2*i*e-r*t},0)]};var Ue=1.0148,$e=.23185,Be=-.14499,He=.02406,js=Ue,ys=5*$e,_s=7*Be,ws=9*He,Zn=1.790857183;function Pe(e,t){var n=t*t;return[e,t*(Ue+n*n*($e+n*(Be+He*n)))]}function Ys(){return(0,d.c)(Pe).scale(139.319)}function Re(e,t){if(r(t)<c)return[e,0];var n=h(t),i=e*s(t);return[s(i)/n,t+(1-o(i))/n]}function ks(){return(0,d.c)(Re).scale(103.74)}Pe.invert=function(e,t){t>Zn?t=Zn:t<-1.790857183&&(t=-1.790857183);var n,o,s=t;do n=s*s,s-=o=(s*(Ue+n*n*($e+n*(Be+He*n)))-t)/(js+n*n*(ys+n*(_s+ws*n)));while(r(o)>c)return[e,s]},Re.invert=function(e,t){if(r(t)<c)return[e,0];var a,p=e*e+t*t,n=.5*t,g=10;do{var i=h(n),d=1/o(n),f=p-2*t*n+n*n;n-=a=(i*f+2*(n-t))/(2+f*d*d+2*(n-t)*i)}while(r(a)>c&&--g>0)return i=h(n),[(r(t)<r(n+1/i)?u(e*i):m(t)*m(e)*(y(r(e*i))+l))/s(n),n]},Yn=n(13696),oe=n(27284);function ce(e,t){return[e[0]*t[0]+e[1]*t[3],e[0]*t[1]+e[1]*t[4],e[0]*t[2]+e[1]*t[5]+e[2],e[3]*t[0]+e[4]*t[3],e[3]*t[1]+e[4]*t[4],e[3]*t[2]+e[4]*t[5]+e[5]]}function qn(e,t){return[e[0]-t[0],e[1]-t[1]]}function Kn(e){return a(e[0]*e[0]+e[1]*e[1])}function me(e,t,n){function a(e,n){var s,i=t(e,n),o=i.project([e*p,n*p]);return(s=i.transform)?[s[0]*o[0]+s[1]*o[1]+s[2],-(s[3]*o[0]+s[4]*o[1]+s[5])]:(o[1]=-o[1],o)}function r(e,n){var l=e.project.invert,s=e.transform,o=n;if(s&&(s=function(e){var t=1/(e[0]*e[4]-e[1]*e[3]);return[t*e[4],-t*e[1],t*(e[1]*e[5]-e[2]*e[4]),-t*e[3],t*e[0],t*(e[2]*e[3]-e[0]*e[5])]}(s),o=[s[0]*o[0]+s[1]*o[1]+s[2],s[3]*o[0]+s[4]*o[1]+s[5]]),l&&e===function(e){return t(e[0]*f,e[1]*f)}(i=l(o)))return i;for(var i,a=e.children,c=0,d=a&&a.length;c<d;++c)if(i=r(a[c],n))return i}!function e(t,n){if(t.edges=function(e){for(var n=e.length,s=[],o=e[n-1],t=0;t<n;++t)s.push([o,o=e[t]]);return s}(t.face),n.face){r=t.shared=function(e,t){for(var n,s,a,r=e.length,o=null,i=0;i<r;++i){n=e[i];for(a=t.length;--a>=0;)if(s=t[a],n[0]===s[0]&&n[1]===s[1]){if(o)return[o,n];o=n}}}(t.face,n.face),u=(c=r.map(n.project),l=r.map(t.project),m=qn(c[1],c[0]),f=qn(l[1],l[0]),d=function(e,t){return g(e[0]*t[1]-e[1]*t[0],e[0]*t[0]+e[1]*t[1])}(m,f),p=Kn(m)/Kn(f),ce([1,0,c[0][0],0,1,c[0][1]],ce([p,0,0,0,p,0],ce([o(d),s(d),0,-s(d),o(d),0],[1,0,-l[0][0],0,1,-l[0][1]])))),t.transform=n.transform?ce(n.transform,u):u;for(var r,c,l,d,u,m,f,p,a=n.edges,i=0,h=a.length;i<h;++i)N(r[0],a[i][1])&&N(r[1],a[i][0])&&(a[i]=t),N(r[0],a[i][0])&&N(r[1],a[i][1])&&(a[i]=t);for(i=0,h=(a=t.edges).length;i<h;++i)N(r[0],a[i][0])&&N(r[1],a[i][1])&&(a[i]=n),N(r[0],a[i][1])&&N(r[1],a[i][0])&&(a[i]=n)}else t.transform=n.transform;return t.children&&t.children.forEach(function(n){e(n,t)}),t}(e,{transform:null}),$n(e)&&(a.invert=function(t,n){var s=r(e,[t,-n]);return s&&(s[0]*=f,s[1]*=f,s)});var i=(0,d.c)(a),c=i.stream;return i.stream=function(t){var o=i.rotate(),s=c(t),n=(i.rotate([0,0]),c(t));return i.rotate(o),s.sphere=function(){n.polygonStart(),n.lineStart(),Wn(n,e),n.lineEnd(),n.polygonEnd()},s},i.angle(n==null?-30:n*p)}function Wn(e,t,n){var o,a,l,h=t.edges,d=h.length,p={type:"MultiPoint",coordinates:t.face},g=t.face.filter(function(e){return 90!==r(e[1])}),s=(0,Yn.c)({type:"MultiPoint",coordinates:g}),u=!1,i=-1,f=s[1][0]-s[0][0],m=180===f||360===f?[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]:(0,H.c)(p);if(n)for(;++i<d&&h[i]!==n;);++i;for(a=0;a<d;++a)o=h[(a+i)%d],Array.isArray(o)?(u||(e.point((l=(0,oe.c)(o[0],m)(c))[0],l[1]),u=!0),e.point((l=(0,oe.c)(o[1],m)(c))[0],l[1])):(u=!1,o!==n&&Wn(e,o,t))}function N(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}function $n(e){return e.project.invert||e.children&&e.children.some($n)}var pe=n(53285),Ps=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],je=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(e){return e.map(function(e){return Ps[e]})});function Is(e){e=e||function(e){var t=(0,H.c)({type:"MultiPoint",coordinates:e});return(0,pe.c)().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=je.map(function(t){return{face:t,project:e(t)}});return[-1,0,0,1,0,1,4,5].forEach(function(e,n){var s=t[e];s&&(s.children||(s.children=[])).push(t[n])}),me(t[0],function(e,n){return t[e<-i/2?n<0?6:4:e<0?n<0?2:0:e<i/2?n<0?3:1:n<0?7:5]}).angle(-30).scale(101.858).center([0,45])}ke=2/a(3);function Bn(e,t){var n=M(e,t);return[n[0]*ke,n[1]]}function $s(e){e=e||function(e){var t=(0,H.c)({type:"MultiPoint",coordinates:e});return(0,d.c)(Bn).translate([0,0]).scale(1).rotate(t[1]>0?[-t[0],0]:[180-t[0],180])};var t=je.map(function(t){return{face:t,project:e(t)}});return[-1,0,0,1,0,1,4,5].forEach(function(e,n){var s=t[e];s&&(s.children||(s.children=[])).push(t[n])}),me(t[0],function(e,n){return t[e<-i/2?n<0?6:4:e<0?n<0?2:0:e<i/2?n<0?3:1:n<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ws(e){e=e||function(e){var t=6===e.length?(0,H.c)({type:"MultiPoint",coordinates:e}):e[0];return(0,pe.c)().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t,n=je.map(function(e){for(var t,s=e.map(xe),i=s.length,n=s[i-1],a=[],o=0;o<i;++o)t=s[o],a.push(Pn([.9486832980505138*n[0]+.31622776601683794*t[0],.9486832980505138*n[1]+.31622776601683794*t[1],.9486832980505138*n[2]+.31622776601683794*t[2]]),Pn([.9486832980505138*t[0]+.31622776601683794*n[0],.9486832980505138*t[1]+.31622776601683794*n[1],.9486832980505138*t[2]+.31622776601683794*n[2]])),n=t;return a}),a=[],r=[-1,0,0,1,0,1,4,5];return n.forEach(function(e,t){for(var s,o,l=je[t],c=l.length,d=a[t]=[],i=0;i<c;++i)n.push([l[i],e[(2*i+2)%(2*c)],e[(2*i+1)%(2*c)]]),r.push(t),d.push((s=xe(e[(2*i+2)%(2*c)]),o=xe(e[(2*i+1)%(2*c)]),[s[1]*o[2]-s[2]*o[1],s[2]*o[0]-s[0]*o[2],s[0]*o[1]-s[1]*o[0]]))}),t=n.map(function(t){return{project:e(t),face:t}}),r.forEach(function(e,n){var s=t[e];s&&(s.children||(s.children=[])).push(t[n])}),me(t[0],function(e,n){var d=o(n),c=[d*o(e),d*s(e),s(n)],r=e<-i/2?n<0?6:4:e<0?n<0?2:0:e<i/2?n<0?3:1:n<0?7:5,l=a[r];return t[Ce(l[0],c)<0?8+3*r:Ce(l[1],c)<0?8+3*r+1:Ce(l[2],c)<0?8+3*r+2:r]}).angle(-30).scale(110.625).center([0,45])}function Ce(e,t){for(var n=0,o=e.length,s=0;n<o;++n)s+=e[n]*t[n];return s}function Pn(e){return[g(e[1],e[0])*p,u(F(-1,O(1,e[2])))*p]}function xe(e){var t=e[0]*f,n=e[1]*f,i=o(n);return[i*o(t),i*s(t),s(n)]}function ne(){}function Gs(e,t){var n,s=t.stream;if(!s)throw new Error("invalid projection");switch(e&&e.type){case"Feature":n=Ln;break;case"FeatureCollection":n=Xs;break;default:n=Ae}return n(e,s)}function Xs(e,t){return{type:"FeatureCollection",features:e.features.map(function(e){return Ln(e,t)})}}function Ln(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:Ae(e.geometry,t)}}function Ae(e,t){if(!e)return null;if("GeometryCollection"===e.type)return function(e,t){return{type:"GeometryCollection",geometries:e.geometries.map(function(e){return Ae(e,t)})}}(e,t);var n;switch(e.type){case"Point":case"MultiPoint":n=to;break;case"LineString":case"MultiLineString":n=no;break;case"Polygon":case"MultiPolygon":case"Sphere":n=so;break;default:return null}return(0,Lt.c)(e,t(n)),n.result()}Bn.invert=function(e,t){return M.invert(e/ke,t)};var _=[],A=[],to={point:function(e,t){_.push([e,t])},result:function(){var e=_.length?_.length<2?{type:"Point",coordinates:_[0]}:{type:"MultiPoint",coordinates:_}:null;return _=[],e}},no={lineStart:ne,point:function(e,t){_.push([e,t])},lineEnd:function(){_.length&&(A.push(_),_=[])},result:function(){var e=A.length?A.length<2?{type:"LineString",coordinates:A[0]}:{type:"MultiLineString",coordinates:A}:null;return A=[],e}},so={polygonStart:ne,lineStart:ne,point:function(e,t){_.push([e,t])},lineEnd:function(){var e=_.length;if(e){do _.push(_[0].slice());while(++e<4)A.push(_),_=[]}},polygonEnd:ne,result:function(){if(!A.length)return null;var e=[],t=[];return A.forEach(function(n){(function(e){if((n=e.length)<4)return!1;for(var n,t=0,s=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)s+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return s<=0})(n)?e.push([n]):t.push(n)}),t.forEach(function(t){var n=t[0];e.some(function(e){if(function(e,t){for(var h=t[0],n=t[1],s=!1,o=0,r=e.length,c=r-1;o<r;c=o++){var a=e[o],l=a[0],i=a[1],d=e[c],m=d[0],u=d[1];i>n^u>n&&h<(m-l)*(n-i)/(u-i)+l&&(s=!s)}return s}(e[0],n))return e.push(t),!0})||e.push([t])}),A=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}};function Me(e){var t=e(l,0)[0]-e(-l,0)[0];function n(n,s){var d,u,h=r(n)<l,o=e(h?n:n>0?n-i:n+i,s),a=(o[0]-o[1])*E,c=(o[0]+o[1])*E;return h?[a,c]:(d=t*E,u=a>0^c>0?-1:1,[u*a-m(c)*d,u*c-m(a)*d])}return e.invert&&(n.invert=function(n,s){var o=(n+s)*E,a=(s-n)*E,l=r(o)<.5*t&&r(a)<.5*t;if(!l){var c,d=t*E,u=o>0^a>0?-1:1,h=-u*n+(a>0?1:-1)*d,m=-u*s+(o>0?1:-1)*d;o=(-h-m)*E,a=(h-m)*E}return c=e.invert(o,a),l||(c[0]+=o>0?i:-i),c}),(0,d.c)(n).rotate([-90,-90,45]).clipAngle(179.999)}function io(){return Me(J).scale(176.423)}function Tn(){return Me(fe).scale(111.48)}function ro(e,t){if(!(0<=(t=+t)&&t<=20))throw new Error("invalid digits");function n(e){var o=e.length,n=2,s=new Array(o);for(s[0]=+e[0].toFixed(t),s[1]=+e[1].toFixed(t);n<o;)s[n]=e[n],++n;return s}function c(e){return e.map(n)}function o(e){for(var t,s=n(e[0]),o=[s],i=1;i<e.length;i++)t=n(e[i]),(t.length>2||t[0]!=s[0]||t[1]!=s[1])&&(o.push(t),s=t);return 1===o.length&&e.length>1&&o.push(n(e[e.length-1])),o}function i(e){return e.map(o)}function s(e){if(e==null)return e;var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(s)};break;case"Point":t={type:"Point",coordinates:n(e.coordinates)};break;case"MultiPoint":t={type:e.type,coordinates:c(e.coordinates)};break;case"LineString":t={type:e.type,coordinates:o(e.coordinates)};break;case"MultiLineString":case"Polygon":t={type:e.type,coordinates:i(e.coordinates)};break;case"MultiPolygon":t={type:"MultiPolygon",coordinates:e.coordinates.map(i)};break;default:return e}return null!=e.bbox&&(t.bbox=e.bbox),t}function a(e){var t={type:"Feature",properties:e.properties,geometry:s(e.geometry)};return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),t}if(e!=null)switch(e.type){case"Feature":return a(e);case"FeatureCollection":var r={type:"FeatureCollection",features:e.features.map(a)};return null!=e.bbox&&(r.bbox=e.bbox),r;default:return s(e)}return e}function Fn(e){var t=s(e);function n(n,i){if(a=t?h(n*t/2)/t:n/2,!i)return[2*a,-e];var a,r=2*b(a*s(i)),c=1/h(i);return[s(r)*c,i+(1-o(r))*c-e]}return n.invert=function(n,a){if(r(a+=e)<c)return[t?2*b(t*n/2)/t:n,0];var m,f,p,_=n*n+a*a,l=0,j=10;do{var d=h(l),g=1/o(l),v=_-2*a*l+l*l;l-=p=(d*v+2*(l-a))/(2+v*g*g+2*(l-a)*d)}while(r(p)>c&&--j>0)return m=n*(d=h(l)),f=h(r(a)<r(l+1/d)?.5*u(m):.5*y(m)+i/4)/s(l),[t?2*b(t*f)/t:2*f,l]},n}function lo(){return P(Fn).scale(131.215)}w=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Fe(e,t){var n,a=O(18,36*r(t)/i),o=B(a),s=a-o,c=(n=w[o])[0],d=n[1],u=(n=w[++o])[0],h=n[1],m=(n=w[O(19,++o)])[0],f=n[1];return[e*(u+s*(m-c)/2+s*s*(m-2*u+c)/2),(t>0?l:-l)*(h+s*(f-d)/2+s*s*(f-2*h+d)/2)]}function mo(){return(0,d.c)(Fe).scale(152.63)}function kn(e,t){if(n=function(e){function t(t,n){var i=o(n),a=(e-1)/(e-i*o(t));return[a*i*s(t),a*s(n)]}return t.invert=function(t,n){var i=t*t+n*n,s=a(i),o=(e-a(1-i*(e+1)/(e-1)))/((e-1)/s+s/(e-1));return[g(t*o,s*a(1-o*o)),s?u(n*o/s):0]},t}(e),!t)return n;var n,i=o(t),r=s(t);function c(t,s){var o=n(t,s),a=o[1],c=a*r/(e-1)+i;return[o[0]*i/c,a/c]}return c.invert=function(t,s){var o=(e-1)/(e-1-s*r);return n.invert(o*t,o*s*i)},c}function po(){var e=2,t=0,n=(0,d.U)(kn),s=n(e,t);return s.distance=function(s){return arguments.length?n(e=+s,t):e},s.tilt=function(s){return arguments.length?n(e,t=s*f):t*p},s.scale(432.147).clipAngle(y(1/e)*p-1e-6)}w.forEach(function(e){e[1]*=1.0144}),Fe.invert=function(e,t){var m=t/l,c=90*m,d=O(18,r(c/5)),n=F(0,B(d));do{var b,j,i=w[n][1],a=w[n+1][1],o=w[O(19,n+2)][1],v=o-i,x=o-2*a+i,u=2*(r(m)-a)/v,g=x/v,s=u*(1-g*u*(1-2*g*u));if(s>=0||1===n){c=(t>=0?5:-5)*(s+d),j=50;do s=(d=O(18,r(c)/5))-(n=B(d)),i=w[n][1],a=w[n+1][1],o=w[O(19,n+2)][1],c-=(b=(t>=0?l:-l)*(a+s*(o-i)/2+s*s*(o-2*a+i)/2)-t)*p;while(r(b)>R&&--j>0)break}}while(--n>=0)var y=w[n][0],_=w[n+1][0],h=w[O(19,n+2)][0];return[e/(_+s*(h-y)/2+s*s*(h-2*_+y)/2),c*f]};var de=1e-4,Cn=1e4,ze=-180,we=ze+de,On=180,Ze=On-de,tt=-90,Rt=tt+de,ct=90,lt=ct-de;function Eo(e){return e.length>0}function vn(e){return e===tt||e===ct?[0,e]:[ze,(t=e,Math.floor(t*Cn)/Cn)];var t}function ft(e){var t=e[0],n=e[1],s=!1;return t<=we?(t=ze,s=!0):t>=Ze&&(t=On,s=!0),n<=Rt?(n=tt,s=!0):n>=lt&&(n=ct,s=!0),s?[t,n]:e}function mn(e){return e.map(ft)}function un(e,t,n){for(r=0,u=e.length;r<u;++r){s=e[r].slice(),n.push({index:-1,polygon:t,ring:s});for(o=0,a=s.length;o<a;++o){var s,o,i,a,r,c,u,l=s[o],p=l[0],d=l[1];if(p<=we||p>=Ze||d<=Rt||d>=lt){s[o]=ft(l);for(i=o+1;i<a;++i){var h=s[i],m=h[0],f=h[1];if(m>we&&m<Ze&&f>Rt&&f<lt)break}if(i===o+1)continue;if(o?(c={index:-1,polygon:t,ring:s.slice(0,o+1)},c.ring[c.ring.length-1]=vn(d),n[n.length-1]=c):n.pop(),i>=a)break;n.push({index:-1,polygon:t,ring:s=s.slice(i-1)}),s[0]=vn(s[0][1]),o=-1,a=s.length}}}}function ln(e){var t,n,s,o,i,a,l=e.length,r={},c={};for(n=0;n<l;++n)s=(t=e[n]).ring[0],o=t.ring[t.ring.length-1],s[0]!==o[0]||s[1]!==o[1]?(t.index=n,r[s]=c[o]=t):(t.polygon.push(t.ring),e[n]=null);for(n=0;n<l;++n)if(t=e[n]){if(s=t.ring[0],o=t.ring[t.ring.length-1],i=c[s],a=r[o],delete r[s],delete c[o],s[0]===o[0]&&s[1]===o[1]){t.polygon.push(t.ring);continue}i?(delete c[s],delete r[i.ring[0]],i.ring.pop(),e[i.index]=null,t={index:-1,polygon:i.polygon,ring:i.ring.concat(t.ring)},i===a?t.polygon.push(t.ring):(t.index=l++,e.push(r[t.ring[0]]=c[t.ring[t.ring.length-1]]=t))):a?(delete r[o],delete c[a.ring[a.ring.length-1]],t.ring.pop(),t={index:l++,polygon:a.polygon,ring:t.ring.concat(a.ring)},e[a.index]=null,e.push(r[t.ring[0]]=c[t.ring[t.ring.length-1]]=t)):(t.ring.push(t.ring[0]),t.polygon.push(t.ring))}}function cn(e){var t={type:"Feature",geometry:pt(e.geometry)};return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function pt(e){if(e==null)return e;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(pt)};break;case"Point":t={type:"Point",coordinates:ft(e.coordinates)};break;case"MultiPoint":case"LineString":t={type:e.type,coordinates:mn(e.coordinates)};break;case"MultiLineString":t={type:"MultiLineString",coordinates:e.coordinates.map(mn)};break;case"Polygon":var t,n,s,o,i,a=[];un(e.coordinates,a,n=[]),ln(n),t={type:"Polygon",coordinates:a};break;case"MultiPolygon":n=[],s=-1,o=e.coordinates.length;for(i=new Array(o);++s<o;)un(e.coordinates[s],i[s]=[],n);ln(n),t={type:"MultiPolygon",coordinates:i.filter(Eo)};break;default:return e}return null!=e.bbox&&(t.bbox=e.bbox),t}function Do(e){if(e==null)return e;switch(e.type){case"Feature":return cn(e);case"FeatureCollection":var t={type:"FeatureCollection",features:e.features.map(cn)};return null!=e.bbox&&(t.bbox=e.bbox),t;default:return pt(e)}}function vt(e,t){var n=h(t/2),o=s(x*n);return[e*(.74482-.34588*o*o),1.70711*n]}function Lo(){return(0,d.c)(vt).scale(146.153)}function on(e,t,n){var m=(0,oe.c)(t,n),a=m(.5),r=(0,U.c)([-a[0],-a[1]])(t),c=m.distance/2,l=-u(s(r[1]*f)/s(c)),h=[-a[0],-a[1],-(r[0]>0?i-l:l)*p],o=(0,d.c)(e(c)).rotate(h),g=(0,U.c)(h),v=o.center;return delete o.rotate,o.center=function(e){return arguments.length?v(g(e)):g.invert(v())},o.clipAngle(90)}function sn(e){var t=o(e);function n(e,n){var s=(0,pe.Y)(e,n);return s[0]*=t,s}return n.invert=function(e,n){return pe.Y.invert(e/t,n)},n}function Ho(){return tn([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function tn(e,t){return on(sn,e,t)}function en(e){if(!(e*=2))return I.O;var n=-e/2,t=-n,i=e*e,c=h(t),l=.5/s(t);function r(s,r){var l=y(o(r)*o(s-n)),c=y(o(r)*o(s-t));return[((l*=l)-(c*=c))/(2*e),(r<0?-1:1)*a(4*i*c-(i-l+c)*(i-l+c))/(2*e)]}return r.invert=function(e,s){var i,r,d=s*s,u=o(a(d+(i=e+n)*i)),h=o(a(d+(i=e+t)*i));return[g(r=u-h,i=(u+h)*c),(s<0?-1:1)*y(a(i*i+r*r)*l)]},r}function Vo(){return Jt([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Jt(e,t){return on(en,e,t)}function jt(e,t){if(r(t)<c)return[e,0];if(s=r(t/l),g=u(s),r(e)<c||r(r(t)-l)<c)return[0,m(t)*i*h(g/2)];var s,g,_=o(g),f=r(i/e-e/i)/2,p=f*f,n=_/(s+_-1),v=n*(2/s-1),b=v*v,d=b+p,j=n-b,y=p+n;return[m(e)*i*(f*j+a(p*j*j-d*(n*n-b)))/d,m(t)*i*(v*y-f*a((p+1)*d-y*y))/d]}function Uo(){return(0,d.c)(jt).scale(79.4183)}function Ct(e,t){if(r(t)<c)return[e,0];if(n=r(t/l),d=u(n),r(e)<c||r(r(t)-l)<c)return[0,m(t)*i*h(d/2)];var n,d,p=o(d),s=r(i/e-e/i)/2,g=s*s,f=p*(a(1+g)-s*p)/(1+g*n*n);return[m(e)*i*f,m(t)*i*a(1-f*(2*s+f))]}function qo(){return(0,d.c)(Ct).scale(79.4183)}function kt(e,t){if(r(t)<c)return[e,0];var n,s,d=t/l,f=u(d);return r(e)<c||r(r(t)-l)<c?[0,i*h(f/2)]:(n=(i/e-e/i)/2,s=d/(1+o(f)),[i*(m(e)*a(n*n+1-s*s)-n),i*s])}function Go(){return(0,d.c)(kt).scale(79.4183)}function At(e,t){if(!t)return[e,0];if(h=r(t),!e||h===l)return[0,t];var h,o=h/l,n=o*o,c=(8*o-n*(n+2)-5)/(2*n*(o-1)),s=c*c,v=o*c,u=n+s+2*v,f=o+3*c,p=e/l,g=p+1/p,d=m(r(e)-l)*a(g*g-4),b=d*d,i=(d*(u+s-1)+2*a(u*(n+s*b-1)+(1-n)*(n*(f*f+4*s)+12*v*s+4*s*s)))/(4*u+b);return[m(e)*l*i,m(t)*l*a(1+d*r(i)-i*i)]}function Qo(){return(0,d.c)(At).scale(127.16)}function Xt(e,t,n,r){m=i/3,e=F(e,c),t=F(t,c),e=O(e,l),t=O(t,i-c),n=F(n,0),n=O(n,100-c);var m,b=(r=F(r,c))/100,d=y((n/100+1)*o(m))/m,f=s(e)/s(d*l),p=t/i,v=a(b*s(e/2)/s(t/2));return function(e,t,n,i,r){function c(c,l){var d=n*s(i*l),u=a(1-d*d),h=a(2/(1+u*o(c*=r)));return[e*u*h*s(c),t*d*h]}return c.invert=function(o,c){var d=o/e,m=c/t,l=a(d*d+m*m),f=2*u(l/2);return[g(o*h(f),e*l)/r,l&&u(c*s(f)/(t*n*l))/i]},c}(v/a(p*f*d),1/(v*a(p*f*d)),f,d,p)}function Gt(){var e=65*f,t=60*f,n=20,s=200,o=(0,d.U)(Xt),i=o(e,t,n,s);return i.poleline=function(i){return arguments.length?o(e=+i*f,t,n,s):e*p},i.parallels=function(i){return arguments.length?o(e,t=+i*f,n,s):t*p},i.inflation=function(i){return arguments.length?o(e,t,n=+i,s):n},i.ratio=function(i){return arguments.length?o(e,t,n,s=+i):s},i.scale(163.775)}function ei(){return Gt().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}vt.invert=function(e,t){var n=t/1.70711,o=s(x*n);return[e/(.74482-.34588*o*o),2*b(n)]},jt.invert=function(e,t){if(r(t)<c)return[e,0];if(r(e)<c)return[0,l*s(2*b(t/i))];var p=(e/=i)*e,u=(t/=i)*t,h=p+u,g=h*h,f=-r(t)*(1+h),d=f-2*u+p,n=-2*f+1+2*u+g,_=u/n+(2*d*d*d/(n*n*n)-9*f*d/(n*n))/27,v=(f-d*d/(3*n))/n,j=2*a(-v/3),w=y(3*_/(v*j))/3;return[i*(h-1+a(1+2*(p-u)+g))/(2*e),m(t)*i*(-j*o(w+i/3)-d/(3*n))]},Ct.invert=function(e,t){if(!e)return[0,l*s(2*b(t/i))];var n=r(e/i),o=(1-n*n-(t/=i)*t)/(2*n),c=a(o*o+1);return[m(e)*i*(c-o),m(t)*l*s(2*g(a((1-2*o*n)*(o+c)-n),a(c+o+n)))]},kt.invert=function(e,t){if(!t)return[e,0];var n=t/i,o=(i*i*(1-n*n)-e*e)/(2*i*e);return[e?i*(m(e)*a(o*o+1)-o):0,l*s(2*b(n))]},At.invert=function(e,t){if(!e||!t)return[e,t];t/=i;var v=m(e)*e/l,o=(v*v-1+4*t*t)/r(v),f=o*o,s=2*t,w=50;do{var _,n=s*s,u=(8*s-n*(n+2)-5)/(2*n*(s-1)),h=(3*s-n*s-10)/(2*n*s),d=u*u,j=s*u,g=s+u,p=g*g,y=s+3*u,O=-2*g*(4*j*d+(1-4*n+3*n*n)*(1+h)+d*(14*n-6-f+(8*n-8-2*f)*h)+j*(12*n-8+(10*n-10-f)*h)),b=a(p*(n+d*f-1)+(1-n)*(n*(y*y+4*d)+d*(12*j+4*d)));s-=_=(o*(p+d-1)+2*b-v*(4*p+f))/(o*(2*u*h+2*g*(1+h))+O/b-8*g*(o*(-1+d+p)+2*b)*(1+h)/(f+4*p))}while(_>c&&--w>0)return[m(e)*(a(o*o+4)+o)*i/4,l*s]};var qt=4*i+3*a(3),Kt=2*a(2*i*a(3)/qt),Ut=Ne(Kt*a(3)/i,Kt,qt/6);function oi(){return(0,d.c)(Ut).scale(176.84)}function St(e,t){return[e*a(1-3*t*t/(i*i)),t]}function ai(){return(0,d.c)(St).scale(152.63)}function Mt(e,t){var n=o(t),i=o(e)*n,r=1-i,c=o(e=g(s(e)*n,-s(t))),l=s(e);return[l*(n=a(1-i*i))-c*r,-c*n-l*r]}function ci(){return(0,d.c)(Mt).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Tt(e,t){var n=se(e,t);return[(n[0]+e/l)/2,(n[1]+t)/2]}function Ns(){return(0,d.c)(Tt).scale(158.837)}St.invert=function(e,t){return[e/a(1-3*t*t/(i*i)),t]},Mt.invert=function(e,t){var n=(e*e+t*t)/-2,s=a(-n*(2+n)),o=t*n+e*s,i=e*n-t*s,r=a(i*i+o*o);return[g(s*o,r*(1+n)),r?-u(s*i/r):0]},Tt.invert=function(e,t){var n=e,i=t,T=25;do{var u,h=o(i),m=s(i),_=s(2*i),j=m*m,g=h*h,b=s(n),f=o(n/2),p=s(n/2),v=p*p,w=1-g*f*f,d=w?y(h*f)*a(u=1/w):u=0,x=.5*(2*d*h*p+n/l)-e,C=.5*(d*m+i)-t,E=.5*u*(g*v+d*h*f*j)+.5/l,k=u*(b*_/4-d*m*p),A=.125*u*(_*p-d*m*g*b),S=.5*u*(j*f+d*v*h)+.5,M=k*A-S*E,O=(C*k-x*S)/M,F=(x*A-C*E)/M;n-=O,i-=F}while((r(O)>c||r(F)>c)&&--T>0)return[n,i]}},88728:function(e,t,n){"use strict";function a(){return new s}function s(){this.reset()}n.d(t,{c:function(){return a}}),s.prototype={constructor:s,reset:function(){this.s=this.t=0},add:function(e){i(o,e,this.t),i(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new s;function i(e,t,n){var s=e.s=t+n,o=s-t,i=s-o;e.t=t-i+(n-o)}},95384:function(e,t,n){"use strict";n.d(t,{cp:function(){return j},mQ:function(){return a},oB:function(){return o}});var c,l,d,h,m,f=n(88728),s=n(64528),i=n(70932),p=n(16016),a=(0,f.c)(),r=(0,f.c)(),o={point:i.c,lineStart:i.c,lineEnd:i.c,polygonStart:function(){a.reset(),o.lineStart=b,o.lineEnd=g},polygonEnd:function(){var e=+a;r.add(e<0?s.kD+e:e),this.lineStart=this.lineEnd=this.point=i.c},sphere:function(){r.add(s.kD)}};function b(){o.point=v}function g(){u(m,h)}function v(e,t){o.point=u,m=e,h=t,e*=s.qw,t*=s.qw,c=e,l=(0,s.W8)(t=t/2+s.wL),d=(0,s.g$)(t)}function u(e,t){e*=s.qw,t=(t*=s.qw)/2+s.wL;var n=e-c,o=n>=0?1:-1,i=o*n,r=(0,s.W8)(t),u=(0,s.g$)(t),h=d*u,m=l*r+h*(0,s.W8)(i),f=h*o*(0,s.g$)(i);a.add((0,s.WE)(f,m)),c=e,l=r,d=u}function j(e){return r.reset(),(0,p.c)(e,o),2*r}},13696:function(e,t,n){"use strict";n.d(t,{c:function(){return M}});var s,o,i,a,d,u,h,m,j,y,S=n(88728),f=n(95384),p=n(84220),c=n(64528),C=n(16016),g=(0,S.c)(),l={point:v,lineStart:w,lineEnd:O,polygonStart:function(){l.point=x,l.lineStart=k,l.lineEnd=E,g.reset(),f.oB.polygonStart()},polygonEnd:function(){f.oB.polygonEnd(),l.point=v,l.lineStart=w,l.lineEnd=O,f.mQ<0?(s=-(o=180),i=-(a=90)):g>c.Gg?a=90:g<-c.Gg&&(i=-90),d[0]=s,d[1]=o},sphere:function(){s=-(o=180),i=-(a=90)}};function v(e,t){u.push(d=[s=e,o=e]),t<i&&(i=t),t>a&&(a=t)}function _(e,t){if(b=(0,p.ux)([e*c.qw,t*c.qw]),m){var j=(0,p.CW)(m,b),_=[j[1],-j[0],0],n=(0,p.CW)(_,j);(0,p.cJ)(n);var g,b,n=(0,p.G)(n),y=e-h,l=y>0?1:-1,f=n[0]*c.oh*l,v=(0,c.a2)(y)>180;v^(l*h<f&&f<l*e)?(g=n[1]*c.oh)>a&&(a=g):v^(l*h<(f=(f+360)%360-180)&&f<l*e)?(g=-n[1]*c.oh)<i&&(i=g):(t<i&&(i=t),t>a&&(a=t)),v?e<h?r(s,e)>r(s,o)&&(o=e):r(e,o)>r(s,o)&&(s=e):o>=s?(e<s&&(s=e),e>o&&(o=e)):e>h?r(s,e)>r(s,o)&&(o=e):r(e,o)>r(s,o)&&(s=e)}else u.push(d=[s=e,o=e]);t<i&&(i=t),t>a&&(a=t),m=b,h=e}function w(){l.point=_}function O(){d[0]=s,d[1]=o,l.point=v,m=null}function x(e,t){if(m){var n=e-h;g.add((0,c.a2)(n)>180?n+(n>0?360:-360):n)}else y=e,j=t;f.oB.point(e,t),_(e,t)}function k(){f.oB.lineStart()}function E(){x(y,j),f.oB.lineEnd(),(0,c.a2)(g)>c.Gg&&(s=-(o=180)),d[0]=s,d[1]=o,m=null}function r(e,t){return(t-=e)<0?t+360:t}function A(e,t){return e[0]-t[0]}function b(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function M(e){var t,n,c,h,m,f,p;if(a=o=-(s=i=1/0),u=[],(0,C.c)(e,l),m=u.length){for(u.sort(A),c=1,h=[t=u[0]];c<m;++c)b(t,(n=u[c])[0])||b(t,n[1])?(r(t[0],n[1])>r(t[0],t[1])&&(t[1]=n[1]),r(n[0],t[1])>r(t[0],t[1])&&(t[0]=n[0])):h.push(t=n);for(f=-1/0,c=0,t=h[m=h.length-1];c<=m;t=n,++c)n=h[c],(p=r(t[1],n[0]))>f&&(f=p,s=n[0],o=t[1])}return u=d=null,s===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[s,i],[o,a]]}},84220:function(e,t,n){"use strict";n.d(t,{CW:function(){return r},Ez:function(){return a},G:function(){return o},cJ:function(){return d},mg:function(){return c},ux:function(){return i},wx:function(){return l}});var s=n(64528);function o(e){return[(0,s.WE)(e[1],e[0]),(0,s.qR)(e[2])]}function i(e){var t=e[0],n=e[1],o=(0,s.W8)(n);return[o*(0,s.W8)(t),o*(0,s.g$)(t),(0,s.g$)(n)]}function a(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function r(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function c(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function l(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function d(e){var t=(0,s._I)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}},24052:function(e,t,n){"use strict";n.d(t,{c:function(){return z}});var o,i,a,l,d,u,h,m,f,p,g,b,j,y,x,C,s=n(64528),T=n(70932),A=n(16016),r={sphere:T.c,point:v,lineStart:O,lineEnd:w,polygonStart:function(){r.lineStart=S,r.lineEnd=M},polygonEnd:function(){r.lineStart=O,r.lineEnd=w}};function v(e,t){e*=s.qw,t*=s.qw;var n=(0,s.W8)(t);c(n*(0,s.W8)(e),n*(0,s.g$)(e),(0,s.g$)(t))}function c(e,t,n){++l,h+=(e-h)/l,m+=(t-m)/l,f+=(n-f)/l}function O(){r.point=E}function E(e,t){e*=s.qw,t*=s.qw;var n=(0,s.W8)(t);o=n*(0,s.W8)(e),a=n*(0,s.g$)(e),i=(0,s.g$)(t),r.point=k,c(o,a,i)}function k(e,t){e*=s.qw,t*=s.qw;var m=(0,s.W8)(t),r=m*(0,s.W8)(e),l=m*(0,s.g$)(e),h=(0,s.g$)(t),n=(0,s.WE)((0,s._I)((n=a*h-i*l)*n+(n=i*r-o*h)*n+(n=o*l-a*r)*n),o*r+a*l+i*h);u+=n,p+=n*(o+(o=r)),d+=n*(a+(a=l)),g+=n*(i+(i=h)),c(o,a,i)}function w(){r.point=v}function S(){r.point=F}function M(){_(x,C),r.point=v}function F(e,t){x=e,C=t,e*=s.qw,t*=s.qw,r.point=_;var n=(0,s.W8)(t);o=n*(0,s.W8)(e),a=n*(0,s.g$)(e),i=(0,s.g$)(t),c(o,a,i)}function _(e,t){e*=s.qw,t*=s.qw;var O=(0,s.W8)(t),l=O*(0,s.W8)(e),_=O*(0,s.g$)(e),h=(0,s.g$)(t),m=a*h-i*_,f=i*l-o*h,r=o*_-a*l,v=(0,s._I)(m*m+f*f+r*r),n=(0,s.qR)(v),w=v&&-n/v;b+=w*m,y+=w*f,j+=w*r,u+=n,p+=n*(o+(o=l)),d+=n*(a+(a=_)),g+=n*(i+(i=h)),c(o,a,i)}function z(e){l=u=h=m=f=p=d=g=b=y=j=0,(0,A.c)(e,r);var t=b,n=y,o=j,i=t*t+n*n+o*o;return i<s.a8&&(t=p,n=d,o=g,u<s.Gg&&(t=h,n=m,o=f),(i=t*t+n*n+o*o)<s.a8)?[NaN,NaN]:[(0,s.WE)(n,t)*s.oh,(0,s.qR)(o/(0,s._I)(i))*s.oh]}},61780:function(e,t,n){"use strict";n.d(t,{Q:function(){return a},c:function(){return l}}),i=n(84220);function o(e){return function(){return e}}var i,s=n(64528),c=n(92992);function a(e,t,n,o,a,c){if(n){var l,u,d=(0,s.W8)(t),h=(0,s.g$)(t),m=o*n;a==null?(a=t+o*s.kD,c=t-m/2):(a=r(d,a),c=r(d,c),(o>0?a<c:a>c)&&(a+=o*s.kD));for(l=a;o>0?l>c:l<c;l-=m)u=(0,i.G)([d,-h*(0,s.W8)(l),-h*(0,s.g$)(l)]),e.point(u[0],u[1])}}function r(e,t){(t=(0,i.ux)(t))[0]-=e,(0,i.cJ)(t);var n=(0,s.mE)(-t[1]);return((-t[2]<0?-n:n)+s.kD-s.Gg)%s.kD}function l(){var t,n,i=o([0,0]),r=o(90),l=o(6),d={point:function(e,o){t.push(e=n(e,o)),e[0]*=s.oh,e[1]*=s.oh}};function e(){var e=i.apply(this,arguments),o=r.apply(this,arguments)*s.qw,u=l.apply(this,arguments)*s.qw;return t=[],n=(0,c.O)(-e[0]*s.qw,-e[1]*s.qw,0).invert,a(d,o,u,1),e={type:"Polygon",coordinates:[t]},t=n=null,e}return e.center=function(t){return arguments.length?(i="function"==typeof t?t:o([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(r="function"==typeof t?t:o(+t),e):r},e.precision=function(t){return arguments.length?(l="function"==typeof t?t:o(+t),e):l},e}},78284:function(e,t,n){"use strict";var o=n(14229),s=n(64528);t.c=(0,o.c)(function(){return!0},function(e){var i,n=NaN,t=NaN,o=NaN;return{lineStart:function(){e.lineStart(),i=1},point:function(a,r){var c=a>0?s.pi:-s.pi,l=(0,s.a2)(a-n);(0,s.a2)(l-s.pi)<s.Gg?(e.point(n,t=(t+r)/2>0?s.or:-s.or),e.point(o,t),e.lineEnd(),e.lineStart(),e.point(c,t),e.point(a,t),i=0):o!==c&&l>=s.pi&&((0,s.a2)(n-o)<s.Gg&&(n-=o*s.Gg),(0,s.a2)(a-c)<s.Gg&&(a-=c*s.Gg),t=function(e,t,n,o){var i,a,r=(0,s.g$)(e-n);return(0,s.a2)(r)>s.Gg?(0,s.MQ)(((0,s.g$)(t)*(a=(0,s.W8)(o))*(0,s.g$)(n)-(0,s.g$)(o)*(i=(0,s.W8)(t))*(0,s.g$)(e))/(i*a*r)):(t+o)/2}(n,t,a,r),e.point(o,t),e.lineEnd(),e.lineStart(),e.point(c,t),i=0),e.point(n=a,t=r),o=c},lineEnd:function(){e.lineEnd(),n=t=NaN},clean:function(){return 2-i}}},function(e,t,n,o){if(e==null)i=n*s.or,o.point(-s.pi,i),o.point(0,i),o.point(s.pi,i),o.point(s.pi,0),o.point(s.pi,-i),o.point(0,-i),o.point(-s.pi,-i),o.point(-s.pi,0),o.point(-s.pi,i);else if((0,s.a2)(e[0]-t[0])>s.Gg){var i,a=e[0]<t[0]?s.pi:-s.pi;i=n*a/2,o.point(-a,i),o.point(0,i),o.point(a,i)}else o.point(t[0],t[1])},[-s.pi,-s.or])},97208:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var s=n(70932);function o(){var t,e=[];return{point:function(e,n,s){t.push([e,n,s])},lineStart:function(){e.push(t=[])},lineEnd:s.c,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},2728:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var o=n(84220),a=n(61780),s=n(64528),i=n(41860),r=n(14229);function c(e){var t=(0,s.W8)(e),u=6*s.qw,n=t>0,h=(0,s.a2)(t)>s.Gg;function l(e,n){return(0,s.W8)(e)*(0,s.W8)(n)>t}function c(e,n,i){var a,f,g,_,w,F=(0,o.ux)(e),M=(0,o.ux)(n),C=[1,0,0],h=(0,o.CW)(F,M),x=(0,o.Ez)(h,h),j=h[0],b=x-j*j;if(!b)return!i&&e;var S=t*x/b,A=-t*j/b,k=(0,o.CW)(C,h),r=(0,o.wx)(C,S),E=(0,o.wx)(h,A);(0,o.mg)(r,E);var u=k,v=(0,o.Ez)(r,u),y=(0,o.Ez)(u,u),O=v*v-y*((0,o.Ez)(r,r)-1);if(!(O<0)){if(_=(0,s._I)(O),a=(0,o.wx)(u,(-v-_)/y),(0,o.mg)(a,r),a=(0,o.G)(a),!i)return a;var p,l=e[0],m=n[0],d=e[1],c=n[1];if(m<l&&(p=l,l=m,m=p),f=m-l,g=(0,s.a2)(f-s.pi)<s.Gg,!g&&c<d&&(p=d,d=c,c=p),g||f<s.Gg?g?d+c>0^a[1]<((0,s.a2)(a[0]-l)<s.Gg?d:c):d<=a[1]&&a[1]<=c:f>s.pi^(l<=a[0]&&a[0]<=m))return w=(0,o.wx)(u,(-v+_)/y),(0,o.mg)(w,r),[a,(0,o.G)(w)]}}function d(t,o){var a=n?e:s.pi-e,i=0;return t<-a?i|=1:t>a&&(i|=2),o<-a?i|=4:o>a&&(i|=8),i}return(0,r.c)(l,function(e){var t,o,a,r,u;return{lineStart:function(){r=o=!1,a=1},point:function(m,f){var p,b,g=[m,f],v=l(m,f),j=n?v?0:d(m,f):v?d(m+(m<0?s.pi:-s.pi),f):0;!t&&(r=o=v)&&e.lineStart(),v!==o&&(!(p=c(t,g))||(0,i.c)(t,p)||(0,i.c)(g,p))&&(g[2]=1),v!==o?(a=0,v?(e.lineStart(),p=c(g,t),e.point(p[0],p[1])):(p=c(t,g),e.point(p[0],p[1],2),e.lineEnd()),t=p):h&&t&&n^v&&(j&u||!(b=c(g,t,!0))||(a=0,n?(e.lineStart(),e.point(b[0][0],b[0][1]),e.point(b[1][0],b[1][1]),e.lineEnd()):(e.point(b[1][0],b[1][1]),e.lineEnd(),e.lineStart(),e.point(b[0][0],b[0][1],3)))),!v||t&&(0,i.c)(t,g)||e.point(g[0],g[1]),t=g,o=v,u=j},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return a|(r&&o)<<1}}},function(t,n,s,o){(0,a.Q)(o,e,u,s,t,n)},n?[0,-e]:[-s.pi,e-s.pi])}},14229:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var o=n(97208),i=n(32232),s=n(64528),a=n(58196),r=n(84706);function c(e,t,n,s){return function(c){var m,f,g,v=t(c),j=(0,o.c)(),p=t(j),h=!1,u={point:b,lineStart:y,lineEnd:_,polygonStart:function(){u.point=w,u.lineStart=x,u.lineEnd=C,m=[],g=[]},polygonEnd:function(){u.point=b,u.lineStart=y,u.lineEnd=_,m=(0,r.Uf)(m);var e=(0,a.c)(g,s);m.length?(h||(c.polygonStart(),h=!0),(0,i.c)(m,d,e,n,c)):e&&(h||(c.polygonStart(),h=!0),c.lineStart(),n(null,null,1,c),c.lineEnd()),h&&(c.polygonEnd(),h=!1),m=g=null},sphere:function(){c.polygonStart(),c.lineStart(),n(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function b(t,n){e(t,n)&&c.point(t,n)}function O(e,t){v.point(e,t)}function y(){u.point=O,v.lineStart()}function _(){u.point=b,v.lineEnd()}function w(e,t){f.push([e,t]),p.point(e,t)}function x(){p.lineStart(),f=[]}function C(){w(f[0][0],f[0][1]),p.lineEnd();var t,n,s,o,i=p.clean(),e=j.result(),a=e.length;if(f.pop(),g.push(f),f=null,a)if(1&i){if((n=(s=e[0]).length-1)>0){for(h||(c.polygonStart(),h=!0),c.lineStart(),t=0;t<n;++t)c.point((o=s[t])[0],o[1]);c.lineEnd()}}else a>1&&2&i&&e.push(e.pop().concat(e.shift())),m.push(e.filter(l))}return u}}function l(e){return e.length>1}function d(e,t){return((e=e.x)[0]<0?e[1]-s.or-s.Gg:s.or-e[1])-((t=t.x)[0]<0?t[1]-s.or-s.Gg:s.or-t[1])}},21676:function(e,t,n){"use strict";n.d(t,{c:function(){return l}});var s=n(64528),a=n(97208),r=n(32232),c=n(84706),o=1e9,i=-o;function l(e,t,n,l){function u(s,o){return e<=s&&s<=n&&t<=o&&o<=l}function h(s,o,i,a){var r=0,c=0;if(s==null||(r=d(s,i))!==(c=d(o,i))||m(s,o)<0^i>0)do a.point(0===r||3===r?e:n,r>1?l:t);while((r=(r+i+4)%4)!==c)else a.point(o[0],o[1])}function d(o,i){return(0,s.a2)(o[0]-e)<s.Gg?i>0?0:3:(0,s.a2)(o[0]-n)<s.Gg?i>0?2:1:(0,s.a2)(o[1]-t)<s.Gg?i>0?1:0:i>0?3:2}function f(e,t){return m(e.x,t.x)}function m(e,t){var n=d(e,1),s=d(t,1);return n!==s?n-s:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){var m,p,g,v,b,j,y,_,x,C,E,d=s,w=(0,a.c)(),O={point:k,lineStart:function(){O.point=A,p&&p.push(y=[]),_=!0,g=!1,b=j=NaN},lineEnd:function(){m&&(A(x,C),E&&g&&w.rejoin(),m.push(w.result())),O.point=k,g&&d.lineEnd()},polygonStart:function(){d=w,m=[],p=[],v=!0},polygonEnd:function(){var t=function(){for(var a=0,r=0,h=p.length;r<h;++r)for(var t,s,c=p[r],d=1,u=c.length,o=c[0],i=o[0],n=o[1];d<u;++d)s=i,t=n,i=(o=c[d])[0],n=o[1],t<=l?n>l&&(i-s)*(l-t)>(n-t)*(e-s)&&++a:n<=l&&(i-s)*(l-t)<(n-t)*(e-s)&&--a;return a}(),n=v&&t,o=(m=(0,c.Uf)(m)).length;(n||o)&&(s.polygonStart(),n&&(s.lineStart(),h(null,null,1,s),s.lineEnd()),o&&(0,r.c)(m,f,t,h,s),s.polygonEnd()),d=s,m=p=y=null}};function k(e,t){u(e,t)&&d.point(e,t)}function A(s,a){if(r=u(s,a),p&&y.push([s,a]),_)x=s,C=a,E=r,_=!1,r&&(d.lineStart(),d.point(s,a));else if(r&&g)d.point(s,a);else{var r,c=[b=Math.max(i,Math.min(o,b)),j=Math.max(i,Math.min(o,j))],h=[s=Math.max(i,Math.min(o,s)),a=Math.max(i,Math.min(o,a))];(function(e,t,n,s,o,i){var a,u=e[0],h=e[1],r=0,c=1,l=t[0]-u,d=t[1]-h;if(a=n-u,l||!(a>0)){if(a/=l,l<0){if(a<r)return;a<c&&(c=a)}else if(l>0){if(a>c)return;a>r&&(r=a)}if(a=o-u,l||!(a<0)){if(a/=l,l<0){if(a>c)return;a>r&&(r=a)}else if(l>0){if(a<r)return;a<c&&(c=a)}if(a=s-h,d||!(a>0)){if(a/=d,d<0){if(a<r)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>r&&(r=a)}if(a=i-h,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>r&&(r=a)}else if(d>0){if(a<r)return;a<c&&(c=a)}return r>0&&(e[0]=u+r*l,e[1]=h+r*d),c<1&&(t[0]=u+c*l,t[1]=h+c*d),!0}}}}})(c,h,e,t,n,l)?(g||(d.lineStart(),d.point(c[0],c[1])),d.point(h[0],h[1]),r||d.lineEnd(),v=!1):r&&(d.lineStart(),d.point(s,a),v=!1)}b=s,j=a,g=r}return O}}},32232:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});var i=n(41860),a=n(64528);function s(e,t,n,s){this.x=e,this.z=t,this.o=n,this.e=s,this.v=!1,this.n=this.p=null}function r(e,t,n,r,c){var l,d,u,f,p,g,v,m=[],h=[];if(e.forEach(function(e){if(!((r=e.length-1)<=0)){var t,r,n=e[0],o=e[r];if((0,i.c)(n,o)){if(!n[2]&&!o[2]){for(c.lineStart(),d=0;d<r;++d)c.point((n=e[d])[0],n[1]);return void c.lineEnd()}o[0]+=2*a.Gg}m.push(t=new s(n,e,null,!0)),h.push(t.o=new s(n,null,t,!1)),m.push(t=new s(o,e,null,!1)),h.push(t.o=new s(o,null,t,!0))}}),m.length){for(h.sort(t),o(m),o(h),d=0,g=h.length;d<g;++d)h[d].e=n=!n;for(v=m[0];;){for(l=v,f=!0;l.v;)if((l=l.n)===v)return;u=l.z,c.lineStart();do{if(l.v=l.o.v=!0,l.e){if(f)for(d=0,g=u.length;d<g;++d)c.point((p=u[d])[0],p[1]);else r(l.x,l.n.x,1,c);l=l.n}else{if(f)for(u=l.p.z,d=u.length-1;d>=0;--d)c.point((p=u[d])[0],p[1]);else r(l.x,l.p.x,-1,c);l=l.p}u=(l=l.o).z,f=!f}while(!l.v)c.lineEnd()}}}function o(e){if(s=e.length){for(var t,s,o=0,n=e[0];++o<s;)n.n=t=e[o],t.p=n,n=t;n.n=t=e[0],t.p=n}}},68120:function(e,t,n){"use strict";function s(e,t){function n(n,s){return n=e(n,s),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,s){return(n=t.invert(n,s))&&e.invert(n[0],n[1])}),n}n.d(t,{c:function(){return s}})},7376:function(e,t,n){"use strict";function s(e){return e}n.d(t,{c:function(){return s}})},83356:function(e,t,n){"use strict";n.r(t),n.d(t,{geoAlbers:function(){return Ie},geoAlbersUsa:function(){return qe},geoArea:function(){return at.cp},geoAzimuthalEqualArea:function(){return Oe.c},geoAzimuthalEqualAreaRaw:function(){return Oe.y},geoAzimuthalEquidistant:function(){return we.c},geoAzimuthalEquidistantRaw:function(){return we.O},geoBounds:function(){return _t.c},geoCentroid:function(){return jt.c},geoCircle:function(){return vt.c},geoClipAntimeridian:function(){return gt.c},geoClipCircle:function(){return ft.c},geoClipExtent:function(){return mt},geoClipRectangle:function(){return ne.c},geoConicConformal:function(){return nt},geoConicConformalRaw:function(){return pe},geoConicEqualArea:function(){return T},geoConicEqualAreaRaw:function(){return Ne},geoConicEquidistant:function(){return $e},geoConicEquidistantRaw:function(){return Ee},geoContains:function(){return ot},geoDistance:function(){return k},geoEqualEarth:function(){return ht},geoEqualEarthRaw:function(){return K},geoEquirectangular:function(){return P.c},geoEquirectangularRaw:function(){return P.u},geoGnomonic:function(){return H.c},geoGnomonicRaw:function(){return H.Y},geoGraticule:function(){return je},geoGraticule10:function(){return st},geoIdentity:function(){return pt},geoInterpolate:function(){return tt.c},geoLength:function(){return ze},geoMercator:function(){return Ze},geoMercatorRaw:function(){return _},geoNaturalEarth1:function(){return De.c},geoNaturalEarth1Raw:function(){return De.g},geoOrthographic:function(){return Re.c},geoOrthographicRaw:function(){return Re.t},geoPath:function(){return wt},geoProjection:function(){return m.c},geoProjectionMutator:function(){return m.U},geoRotation:function(){return ye.c},geoStereographic:function(){return yt},geoStereographicRaw:function(){return ie},geoStream:function(){return d.c},geoTransform:function(){return se.c},geoTransverseMercator:function(){return We},geoTransverseMercatorRaw:function(){return ae}});var at=n(95384),_t=n(13696),jt=n(24052),vt=n(61780),gt=n(78284),ft=n(2728),ne=n(21676);function mt(){var e,t,a,n=0,s=0,o=960,i=500;return a={stream:function(a){return e&&t===a?e:e=(0,ne.c)(n,s,o,i)(t=a)},extent:function(r){return arguments.length?(n=+r[0][0],s=+r[0][1],o=+r[1][0],i=+r[1][1],e=t=null,a):[[n,s],[o,i]]}}}var D,N,te,ut=n(58196),z=n(88728),s=n(64528),o=n(70932),d=n(16016),Z=(0,z.c)(),f={sphere:o.c,point:o.c,lineStart:function(){f.point=lt,f.lineEnd=dt},lineEnd:o.c,polygonStart:o.c,polygonEnd:o.c};function dt(){f.point=f.lineEnd=o.c}function lt(e,t){e*=s.qw,t*=s.qw,te=e,N=(0,s.g$)(t),D=(0,s.W8)(t),f.point=ct}function ct(e,t){e*=s.qw,t*=s.qw;var o=(0,s.g$)(t),n=(0,s.W8)(t),i=(0,s.a2)(e-te),a=(0,s.W8)(i),r=n*(0,s.g$)(i),c=D*o-N*n*a,l=N*o+D*n*a;Z.add((0,s.WE)((0,s._I)(r*r+c*c),l)),te=e,N=o,D=n}function ze(e){return Z.reset(),(0,d.c)(e,f),+Z}S=[null,null],Te={type:"LineString",coordinates:S};function k(e,t){return S[0]=e,S[1]=t,ze(Te)}X={Feature:function(e,t){return M(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,s=-1,o=n.length;++s<o;)if(M(n[s].geometry,t))return!0;return!1}},G={Sphere:function(){return!0},Point:function(e,t){return Fe(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,s=-1,o=n.length;++s<o;)if(Fe(n[s],t))return!0;return!1},LineString:function(e,t){return Se(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,s=-1,o=n.length;++s<o;)if(Se(n[s],t))return!0;return!1},Polygon:function(e,t){return Ae(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,s=-1,o=n.length;++s<o;)if(Ae(n[s],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,s=-1,o=n.length;++s<o;)if(M(n[s],t))return!0;return!1}};function M(e,t){return!!e&&!!G.hasOwnProperty(e.type)&&G[e.type](e,t)}function Fe(e,t){return 0===k(e,t)}function Se(e,t){for(var n,i,a,o=0,r=e.length;o<r;o++){if(0===(i=k(e[o],t)))return!0;if(o>0&&(n=k(e[o],e[o-1]))>0&&a<=n&&i<=n&&(a+i-n)*(1-Math.pow((a-i)/n,2))<s.a8*n)return!0;a=i}return!1}function Ae(e,t){return!!(0,ut.c)(e.map(rt),Ve(t))}function rt(e){return(e=e.map(Ve)).pop(),e}function Ve(e){return[e[0]*s.qw,e[1]*s.qw]}function ot(e,t){return(e&&X.hasOwnProperty(e.type)?X[e.type]:M)(e,t)}h=n(84706);function ce(e,t,n){var o=(0,h.ik)(e,t-s.Gg,n).concat(t);return function(e){return o.map(function(t){return[e,t]})}}function xe(e,t,n){var o=(0,h.ik)(e,t-s.Gg,n).concat(t);return function(e){return o.map(function(t){return[t,e]})}}function je(){var t,n,o,i,a,r,c,l,g,v,b,j,m=10,p=m,u=90,f=360,d=2.5;function e(){return{type:"MultiLineString",coordinates:y()}}function y(){return(0,h.ik)((0,s.Km)(o/u)*u,i,u).map(v).concat((0,h.ik)((0,s.Km)(n/f)*f,t,f).map(g)).concat((0,h.ik)((0,s.Km)(l/m)*m,c,m).filter(function(e){return(0,s.a2)(e%u)>s.Gg}).map(j)).concat((0,h.ik)((0,s.Km)(r/p)*p,a,p).filter(function(e){return(0,s.a2)(e%f)>s.Gg}).map(b))}return e.lines=function(){return y().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[v(o).concat(g(t).slice(1),v(i).reverse().slice(1),g(n).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(s){return arguments.length?(o=+s[0][0],i=+s[1][0],n=+s[0][1],t=+s[1][1],o>i&&(s=o,o=i,i=s),n>t&&(s=n,n=t,t=s),e.precision(d)):[[o,n],[i,t]]},e.extentMinor=function(t){return arguments.length?(l=+t[0][0],c=+t[1][0],r=+t[0][1],a=+t[1][1],l>c&&(t=l,l=c,c=t),r>a&&(t=r,r=a,a=t),e.precision(d)):[[l,r],[c,a]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(u=+t[0],f=+t[1],e):[u,f]},e.stepMinor=function(t){return arguments.length?(m=+t[0],p=+t[1],e):[m,p]},e.precision=function(s){return arguments.length?(d=+s,j=ce(r,a,90),b=xe(l,c,d),v=ce(n,t,90),g=xe(o,i,d),e):d},e.extentMajor([[-180,-90+s.Gg],[180,90-s.Gg]]).extentMinor([[-180,-80-s.Gg],[180,80+s.Gg]])}function st(){return je()()}var W,U,ve,ge,tt=n(27284),q=n(7376),Y=(0,z.c)(),B=(0,z.c)(),l={point:o.c,lineStart:o.c,lineEnd:o.c,polygonStart:function(){l.lineStart=Ue,l.lineEnd=Je},polygonEnd:function(){l.lineStart=l.lineEnd=l.point=o.c,Y.add((0,s.a2)(B)),B.reset()},result:function(){var e=Y/2;return Y.reset(),e}};function Ue(){l.point=et}function et(e,t){l.point=fe,ve=W=e,ge=U=t}function fe(e,t){B.add(U*e-W*t),W=e,U=t}function Je(){fe(ve,ge)}var a,r,c,h,m,b,j,C,A,S,P,H,V,$,G,X,Te,he,ue,de=l,le=n(73784),re=0,ee=0,x=0,R=0,L=0,p=0,Q=0,J=0,v=0,i={point:u,lineStart:be,lineEnd:_e,polygonStart:function(){i.lineStart=Ge,i.lineEnd=Ye},polygonEnd:function(){i.point=u,i.lineStart=be,i.lineEnd=_e},result:function(){var e=v?[Q/v,J/v]:p?[R/p,L/p]:x?[re/x,ee/x]:[NaN,NaN];return re=ee=x=R=L=p=Q=J=v=0,e}},Be,Me,oe,se;function u(e,t){re+=e,ee+=t,++x}function be(){i.point=Qe}function Qe(e,t){i.point=Xe,u(a=e,r=t)}function Xe(e,t){var o=e-a,i=t-r,n=(0,s._I)(o*o+i*i);R+=n*(a+e)/2,L+=n*(r+t)/2,p+=n,u(a=e,r=t)}function _e(){i.point=u}function Ge(){i.point=Ke}function Ye(){Ce(he,ue)}function Ke(e,t){i.point=Ce,u(he=a=e,ue=r=t)}function Ce(e,t){var o=e-a,i=t-r,n=(0,s._I)(o*o+i*i);R+=n*(a+e)/2,L+=n*(r+t)/2,p+=n,Q+=(n=r*e-a*t)*(a+e),J+=n*(r+t),v+=3*n,u(a=e,r=t)}V=i;function ke(e){this._context=e}ke.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,s.kD)}},result:o.c},A=(0,z.c)(),b={point:o.c,lineStart:function(){b.point=it},lineEnd:function(){$&&Le(Be,Me),b.point=o.c},polygonStart:function(){$=!0},polygonEnd:function(){$=null},result:function(){var e=+A;return A.reset(),e}};function it(e,t){b.point=Le,Be=j=e,Me=C=t}function Le(e,t){j-=e,C-=t,A.add((0,s._I)(j*j+C*C)),j=e,C=t}oe=b;function Pe(){this._string=[]}function He(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function wt(e,t){var s,o,i=4.5;function n(e){return e&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),(0,d.c)(e,s(o))),o.result()}return n.area=function(e){return(0,d.c)(e,s(de)),de.result()},n.measure=function(e){return(0,d.c)(e,s(oe)),oe.result()},n.bounds=function(e){return(0,d.c)(e,s(le.c)),le.c.result()},n.centroid=function(e){return(0,d.c)(e,s(V)),V.result()},n.projection=function(t){return arguments.length?(s=t==null?(e=null,q.c):(e=t).stream,n):e},n.context=function(e){return arguments.length?(o=e==null?(t=null,new Pe):new ke(t=e),"function"!=typeof i&&o.pointRadius(i),n):t},n.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(o.pointRadius(+e),+e),n):i},n.projection(e).context(t)}Pe.prototype={_radius:4.5,_circle:He(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=He(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},m=n(87952);function I(e){var t=0,n=s.pi/3,o=(0,m.U)(e),i=o(t,n);return i.parallels=function(e){return arguments.length?o(t=e[0]*s.qw,n=e[1]*s.qw):[t*s.oh,n*s.oh]},i}function Ne(e,t){var o,a,i=(0,s.g$)(e),n=(i+(0,s.g$)(t))/2;if((0,s.a2)(n)<s.Gg)return function(e){var t=(0,s.W8)(e);function n(e,n){return[e*t,(0,s.g$)(n)/t]}return n.invert=function(e,n){return[e/t,(0,s.qR)(n*t)]},n}(e);o=1+i*(2*n-i),a=(0,s._I)(o)/n;function r(e,t){var i=(0,s._I)(o-2*n*(0,s.g$)(t))/n;return[i*(0,s.g$)(e*=n),a-i*(0,s.W8)(e)]}return r.invert=function(e,t){var i=a-t,r=(0,s.WE)(e,(0,s.a2)(i))*(0,s.kq)(i);return i*n<0&&(r-=s.pi*(0,s.kq)(e)*(0,s.kq)(i)),[r/n,(0,s.qR)((o-(e*e+i*i)*n*n)/(2*n))]},r}function T(){return I(Ne).scale(155.424).center([0,33.6442])}function Ie(){return T().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}c=n(86420);function qe(){var i,a,l,d,u,h,t=Ie(),n=T().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=T().rotate([157,0]).center([-3,19.9]).parallels([8,18]),r={point:function(e,t){i=[e,t]}};function e(e){var t=e[0],n=e[1];return i=null,d.point(t,n),i||(u.point(t,n),i)||(h.point(t,n),i)}function m(){return a=l=null,e}return e.invert=function(e){var a=t.scale(),r=t.translate(),s=(e[0]-r[0])/a,i=(e[1]-r[1])/a;return(i>=.12&&i<.234&&s>=-.425&&s<-.214?n:i>=.166&&i<.234&&s>=-.214&&s<-.115?o:t).invert(e)},e.stream=function(e){return a&&l===e?a:(s=[t.stream(l=e),n.stream(e),o.stream(e)],i=s.length,a={point:function(e,t){for(var n=-1;++n<i;)s[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)s[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)s[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)s[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)s[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)s[e].polygonEnd()}});var s,i},e.precision=function(e){return arguments.length?(t.precision(e),n.precision(e),o.precision(e),m()):t.precision()},e.scale=function(s){return arguments.length?(t.scale(s),n.scale(.35*s),o.scale(s),e.translate(t.translate())):t.scale()},e.translate=function(e){if(!arguments.length)return t.translate();var i=t.scale(),a=+e[0],c=+e[1];return d=t.translate(e).clipExtent([[a-.455*i,c-.238*i],[a+.455*i,c+.238*i]]).stream(r),u=n.translate([a-.307*i,c+.201*i]).clipExtent([[a-.425*i+s.Gg,c+.12*i+s.Gg],[a-.214*i-s.Gg,c+.234*i-s.Gg]]).stream(r),h=o.translate([a-.205*i,c+.212*i]).clipExtent([[a-.214*i+s.Gg,c+.166*i+s.Gg],[a-.115*i-s.Gg,c+.234*i-s.Gg]]).stream(r),m()},e.fitExtent=function(t,n){return(0,c.QX)(e,t,n)},e.fitSize=function(t,n){return(0,c.UV)(e,t,n)},e.fitWidth=function(t,n){return(0,c.Qx)(e,t,n)},e.fitHeight=function(t,n){return(0,c.OW)(e,t,n)},e.scale(1070)}var Oe=n(54724),we=n(69020),ye=n(92992);function _(e,t){return[e,(0,s.Yz)((0,s.a6)((s.or+t)/2))]}function Ze(){return me(_).scale(961/s.kD)}function me(e){var o,i,a,t=(0,m.c)(e),l=t.center,c=t.scale,d=t.translate,u=t.clipExtent,n=null;function r(){var r=s.pi*c(),l=t((0,ye.c)(t.rotate()).invert([0,0]));return u(n==null?[[l[0]-r,l[1]-r],[l[0]+r,l[1]+r]]:e===_?[[Math.max(l[0]-r,n),o],[Math.min(l[0]+r,i),a]]:[[n,Math.max(l[1]-r,o)],[i,Math.min(l[1]+r,a)]])}return t.scale=function(e){return arguments.length?(c(e),r()):c()},t.translate=function(e){return arguments.length?(d(e),r()):d()},t.center=function(e){return arguments.length?(l(e),r()):l()},t.clipExtent=function(e){return arguments.length?(e==null?n=o=i=a=null:(n=+e[0][0],o=+e[0][1],i=+e[1][0],a=+e[1][1]),r()):n==null?null:[[n,o],[i,a]]},r()}function F(e){return(0,s.a6)((s.or+e)/2)}function pe(e,t){var i=(0,s.W8)(e),n=e===t?(0,s.g$)(e):(0,s.Yz)(i/(0,s.W8)(t))/(0,s.Yz)(F(t)/F(e)),o=i*(0,s.g3)(F(e),n)/n;if(!n)return _;function a(e,t){o>0?t<-s.or+s.Gg&&(t=-s.or+s.Gg):t>s.or-s.Gg&&(t=s.or-s.Gg);var i=o/(0,s.g3)(F(t),n);return[i*(0,s.g$)(n*e),o-i*(0,s.W8)(n*e)]}return a.invert=function(e,t){var i=o-t,r=(0,s.kq)(n)*(0,s._I)(e*e+i*i),a=(0,s.WE)(e,(0,s.a2)(i))*(0,s.kq)(i);return i*n<0&&(a-=s.pi*(0,s.kq)(e)*(0,s.kq)(i)),[a/n,2*(0,s.MQ)((0,s.g3)(o/r,1/n))-s.or]},a}function nt(){return I(pe).scale(109.5).parallels([30,30])}_.invert=function(e,t){return[e,2*(0,s.MQ)((0,s.oN)(t))-s.or]},P=n(69604);function Ee(e,t){var i=(0,s.W8)(e),n=e===t?(0,s.g$)(e):(i-(0,s.W8)(t))/(t-e),o=i/n+e;if((0,s.a2)(n)<s.Gg)return P.u;function a(e,t){var i=o-t,a=n*e;return[i*(0,s.g$)(a),o-i*(0,s.W8)(a)]}return a.invert=function(e,t){var i=o-t,a=(0,s.WE)(e,(0,s.a2)(i))*(0,s.kq)(i);return i*n<0&&(a-=s.pi*(0,s.kq)(e)*(0,s.kq)(i)),[a/n,o-(0,s.kq)(n)*(0,s._I)(e*e+i*i)]},a}function $e(){return I(Ee).scale(131.154).center([0,13.9389])}var g=1.340264,y=-.081106,O=893e-6,w=.003796,E=(0,s._I)(3)/2;function K(e,t){var o=(0,s.qR)(E*(0,s.g$)(t)),n=o*o,i=n*n*n;return[e*(0,s.W8)(o)/(E*(g+3*y*n+i*(7*O+9*w*n))),o*(g+y*n+i*(O+w*n))]}function ht(){return(0,m.c)(K).scale(177.158)}K.invert=function(e,t){for(var a,o=t,n=o*o,i=n*n*n,r=0;r<12&&(i=(n=(o-=a=(o*(g+y*n+i*(O+w*n))-t)/(g+3*y*n+i*(7*O+9*w*n)))*o)*n*n,!((0,s.a2)(a)<s.a8));++r);return[E*e*(g+3*y*n+i*(7*O+9*w*n))/(0,s.W8)(o),(0,s.qR)((0,s.g$)(o)/E)]},H=n(53285),se=n(15196);function pt(){var o,a,r,h,f,p,g,l=1,d=0,u=0,y=1,j=1,n=0,i=null,b=1,v=1,_=(0,se.s)({point:function(t,n){var s=e([t,n]);this.stream.point(s[0],s[1])}}),m=q.c;function t(){return b=l*y,v=l*j,h=g=null,e}function e(e){var i,t=e[0]*b,s=e[1]*v;return n&&(i=s*a-t*o,t=t*a+s*o,s=i),[t+d,s+u]}return e.invert=function(e){var i,t=e[0]-d,s=e[1]-u;return n&&(i=s*a+t*o,t=t*a-s*o,s=i),[t/b,s/v]},e.stream=function(e){return h&&g===e?h:h=_(m(g=e))},e.postclip=function(e){return arguments.length?(m=e,i=r=p=f=null,t()):m},e.clipExtent=function(e){return arguments.length?(m=e==null?(i=r=p=f=null,q.c):(0,ne.c)(i=+e[0][0],r=+e[0][1],p=+e[1][0],f=+e[1][1]),t()):i==null?null:[[i,r],[p,f]]},e.scale=function(e){return arguments.length?(l=+e,t()):l},e.translate=function(e){return arguments.length?(d=+e[0],u=+e[1],t()):[d,u]},e.angle=function(e){return arguments.length?(n=e%360*s.qw,o=(0,s.g$)(n),a=(0,s.W8)(n),t()):n*s.oh},e.reflectX=function(e){return arguments.length?(y=e?-1:1,t()):y<0},e.reflectY=function(e){return arguments.length?(j=e?-1:1,t()):j<0},e.fitExtent=function(t,n){return(0,c.QX)(e,t,n)},e.fitSize=function(t,n){return(0,c.UV)(e,t,n)},e.fitWidth=function(t,n){return(0,c.Qx)(e,t,n)},e.fitHeight=function(t,n){return(0,c.OW)(e,t,n)},e}var De=n(47984),Re=n(4888),bt=n(62280);function ie(e,t){var n=(0,s.W8)(t),o=1+(0,s.W8)(e)*n;return[n*(0,s.g$)(e)/o,(0,s.g$)(t)/o]}function yt(){return(0,m.c)(ie).scale(250).clipAngle(142)}function ae(e,t){return[(0,s.Yz)((0,s.a6)((s.or+t)/2)),-e]}function We(){var e=me(ae),n=e.center,t=e.rotate;return e.center=function(e){return arguments.length?n([-e[1],e[0]]):[(e=n())[1],-e[0]]},e.rotate=function(e){return arguments.length?t([e[0],e[1],e.length>2?e[2]+90:90]):[(e=t())[0],e[1],e[2]-90]},t([0,0,90]).scale(159.155)}ie.invert=(0,bt.g)(function(e){return 2*(0,s.MQ)(e)}),ae.invert=function(e,t){return[-t,2*(0,s.MQ)((0,s.oN)(e))-s.or]}},27284:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var s=n(64528);function o(e,t){var i=e[0]*s.qw,o=e[1]*s.qw,a=t[0]*s.qw,r=t[1]*s.qw,c=(0,s.W8)(o),g=(0,s.g$)(o),l=(0,s.W8)(r),v=(0,s.g$)(r),p=c*(0,s.W8)(i),h=c*(0,s.g$)(i),m=l*(0,s.W8)(a),f=l*(0,s.g$)(a),n=2*(0,s.qR)((0,s._I)((0,s.SD)(r-o)+c*l*(0,s.SD)(a-i))),d=(0,s.g$)(n),u=n?function(e){var t=(0,s.g$)(e*=n)/d,o=(0,s.g$)(n-e)/d,i=o*p+t*m,a=o*h+t*f,r=o*g+t*v;return[(0,s.WE)(a,i)*s.oh,(0,s.WE)(r,(0,s._I)(i*i+a*a))*s.oh]}:function(){return[i*s.oh,o*s.oh]};return u.distance=n,u}},64528:function(e,t,n){"use strict";n.d(t,{Gg:function(){return a},Km:function(){return p},MQ:function(){return h},SD:function(){return C},W8:function(){return f},WE:function(){return m},Yz:function(){return v},_I:function(){return _},a2:function(){return u},a6:function(){return w},a8:function(){return j},g$:function(){return i},g3:function(){return b},kD:function(){return c},kq:function(){return y},mE:function(){return O},oN:function(){return g},oh:function(){return l},or:function(){return o},pi:function(){return s},qR:function(){return x},qw:function(){return d},wL:function(){return r}});var a=1e-6,j=1e-12,s=Math.PI,o=s/2,r=s/4,c=2*s,l=180/s,d=s/180,u=Math.abs,h=Math.atan,m=Math.atan2,f=Math.cos,p=Math.ceil,g=Math.exp,v=(Math.floor,Math.log),b=Math.pow,i=Math.sin,y=Math.sign||function(e){return e>0?1:e<0?-1:0},_=Math.sqrt,w=Math.tan;function O(e){return e>1?0:e<-1?s:Math.acos(e)}function x(e){return e>1?o:e<-1?-o:Math.asin(e)}function C(e){return(e=i(e/2))*e}},70932:function(e,t,n){"use strict";function s(){}n.d(t,{c:function(){return s}})},73784:function(e,t,n){"use strict";var i=n(70932),s=1/0,a=s,o=-s,r=o,c={point:function(e,t){e<s&&(s=e),e>o&&(o=e),t<a&&(a=t),t>r&&(r=t)},lineStart:i.c,lineEnd:i.c,polygonStart:i.c,polygonEnd:i.c,result:function(){var e=[[s,a],[o,r]];return o=r=-(a=s=1/0),e}};t.c=c},41860:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var s=n(64528);function o(e,t){return(0,s.a2)(e[0]-t[0])<s.Gg&&(0,s.a2)(e[1]-t[1])<s.Gg}},58196:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(88728),o=n(84220),s=n(64528),i=(0,r.c)();function a(e){return(0,s.a2)(e[0])<=s.pi?e[0]:(0,s.kq)(e[0])*(((0,s.a2)(e[0])+s.pi)%s.kD-s.pi)}function c(e,t){var d=a(t),r=t[1],T=(0,s.g$)(r),D=[(0,s.g$)(d),-(0,s.W8)(d),0],j=0,M=0;i.reset(),1===T?r=s.or+s.Gg:-1===T&&(r=-s.or-s.Gg);for(h=0,S=e.length;h<S;++h)if(p=(f=e[h]).length)for(var f,p,m=f[p-1],v=a(m),A=m[1]/2+s.wL,k=(0,s.g$)(A),z=(0,s.W8)(A),_=0;_<p;++_,v=w,k=C,z=E,m=l){var c,h,y,O,S,l=f[_],w=a(l),x=l[1]/2+s.wL,C=(0,s.g$)(x),E=(0,s.W8)(x),n=w-v,b=n>=0?1:-1,g=b*n,u=g>s.pi,F=k*C;i.add((0,s.WE)(F*b*(0,s.g$)(g),z*E+F*(0,s.W8)(g))),j+=u?n+b*s.kD:n,u^v>=d^w>=d&&(c=(0,o.CW)((0,o.ux)(m),(0,o.ux)(l)),(0,o.cJ)(c),y=(0,o.CW)(D,c),(0,o.cJ)(y),O=(u^n>=0?-1:1)*(0,s.qR)(y[2]),(r>O||r===O&&(c[0]||c[1]))&&(M+=u^n>=0?1:-1))}return(j<-s.Gg||j<s.Gg&&i<-s.Gg)^1&M}},62280:function(e,t,n){"use strict";n.d(t,{a:function(){return o},g:function(){return i}});var s=n(64528);function o(e){return function(t,n){var a=(0,s.W8)(t),o=(0,s.W8)(n),i=e(a*o);return[i*o*(0,s.g$)(t),i*(0,s.g$)(n)]}}function i(e){return function(t,n){var o=(0,s._I)(t*t+n*n),i=e(o),a=(0,s.g$)(i),r=(0,s.W8)(i);return[(0,s.WE)(t*a,o*r),(0,s.qR)(o&&n*a/o)]}}},54724:function(e,t,n){"use strict";n.d(t,{c:function(){return r},y:function(){return s}});var o=n(64528),i=n(62280),a=n(87952),s=(0,i.a)(function(e){return(0,o._I)(2/(1+e))});function r(){return(0,a.c)(s).scale(124.75).clipAngle(179.999)}s.invert=(0,i.g)(function(e){return 2*(0,o.qR)(e/2)})},69020:function(e,t,n){"use strict";n.d(t,{O:function(){return s},c:function(){return r}});var o=n(64528),i=n(62280),a=n(87952),s=(0,i.a)(function(e){return(e=(0,o.mE)(e))&&e/(0,o.g$)(e)});function r(){return(0,a.c)(s).scale(79.4188).clipAngle(179.999)}s.invert=(0,i.g)(function(e){return e})},69604:function(e,t,n){"use strict";n.d(t,{c:function(){return i},u:function(){return s}});var o=n(87952);function s(e,t){return[e,t]}function i(){return(0,o.c)(s).scale(152.63)}s.invert=s},86420:function(e,t,n){"use strict";n.d(t,{OW:function(){return l},QX:function(){return i},Qx:function(){return c},UV:function(){return r}});var a=n(16016),o=n(73784);function s(e,t,n){var s=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),s!=null&&e.clipExtent(null),(0,a.c)(n,e.stream(o.c)),t(o.c.result()),s!=null&&e.clipExtent(s),e}function i(e,t,n){return s(e,function(n){var o=t[1][0]-t[0][0],i=t[1][1]-t[0][1],s=Math.min(o/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(o-s*(n[1][0]+n[0][0]))/2,r=+t[0][1]+(i-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([a,r])},n)}function r(e,t,n){return i(e,[[0,0],t],n)}function c(e,t,n){return s(e,function(n){var o=+t,s=o/(n[1][0]-n[0][0]),i=(o-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];e.scale(150*s).translate([i,a])},n)}function l(e,t,n){return s(e,function(n){var o=+t,s=o/(n[1][1]-n[0][1]),i=-s*n[0][0],a=(o-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([i,a])},n)}},53285:function(e,t,n){"use strict";n.d(t,{Y:function(){return o},c:function(){return r}});var s=n(64528),i=n(62280),a=n(87952);function o(e,t){var n=(0,s.W8)(t),o=(0,s.W8)(e)*n;return[n*(0,s.g$)(e)/o,(0,s.g$)(t)/o]}function r(){return(0,a.c)(o).scale(144.049).clipAngle(60)}o.invert=(0,i.g)(s.MQ)},87952:function(e,t,n){"use strict";n.d(t,{c:function(){return j},U:function(){return m}});var u,h=n(78284),b=n(2728),g=n(21676),r=n(68120),c=n(7376),s=n(64528),p=n(92992),i=n(15196),o=n(86420),y=n(84220),a=16,f=(0,s.W8)(30*s.qw);function l(e,t){return+t?function(e,t){function n(o,i,a,r,c,l,d,u,h,m,p,g,v,b){var x=d-o,O=u-i,E=x*x+O*O;if(E>4*t&&v--){var y=r+m,_=c+p,j=l+g,k=(0,s._I)(y*y+_*_+j*j),z=(0,s.qR)(j/=k),A=(0,s.a2)((0,s.a2)(j)-1)<s.Gg||(0,s.a2)(a-h)<s.Gg?(a+h)/2:(0,s.WE)(_,y),M=e(A,z),w=M[0],C=M[1],F=w-o,T=C-i,S=O*F-x*T;(S*S/E>t||(0,s.a2)((x*F+O*T)/E-.5)>.3||r*m+c*p+l*g<f)&&(n(o,i,a,r,c,l,w,C,A,y/=k,_/=k,j,v,b),b.point(w,C),n(w,C,A,y,_,j,d,u,h,m,p,g,v,b))}}return function(t){var o,i,r,c,l,d,f,p,g,b,j,_,s={point:v,lineStart:m,lineEnd:u,polygonStart:function(){t.polygonStart(),s.lineStart=w},polygonEnd:function(){t.polygonEnd(),s.lineStart=m}};function v(n,s){n=e(n,s),t.point(n[0],n[1])}function m(){o=NaN,s.point=h,t.lineStart()}function h(s,u){var h=(0,y.ux)([s,u]),m=e(s,u);n(o,i,d,c,r,l,o=m[0],i=m[1],d=s,c=h[0],r=h[1],l=h[2],a,t),t.point(o,i)}function u(){s.point=v,t.lineEnd()}function w(){m(),s.point=O,s.lineEnd=x}function O(e,t){h(f=e,t),_=o,j=i,b=c,g=r,p=l,s.point=h}function x(){n(o,i,d,c,r,l,_,j,f,b,g,p,a,t),s.lineEnd=u,u()}return s}}(e,t):function(e){return(0,i.s)({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}u=(0,i.s)({point:function(e,t){this.stream.point(e*s.qw,t*s.qw)}});function v(e,t,n,s,o){function i(i,a){return[t+e*(i*=s),n-e*(a*=o)]}return i.invert=function(i,a){return[(i-t)/e*s,(n-a)/e*o]},i}function d(e,t,n,o,i,a){var r=(0,s.W8)(a),c=(0,s.g$)(a),l=r*e,d=c*e,u=r/e,h=c/e,f=(c*n-r*t)/e,p=(c*t+r*n)/e;function m(e,s){return[l*(e*=o)-d*(s*=i)+t,n-d*e-l*s]}return m.invert=function(e,t){return[o*(u*e-h*t+f),i*(p-h*e-u*t)]},m}function j(e){return m(function(){return e})()}function m(e){var j,y,w,O,S,M,R,P,I,B,x=150,L=480,N=250,D=0,z=0,V=0,T=0,F=0,f=0,A=1,k=1,E=null,C=h.c,m=null,_=c.c,H=.5;function t(e){return P(e[0]*s.qw,e[1]*s.qw)}function $(e){return(e=P.invert(e[0],e[1]))&&[e[0]*s.oh,e[1]*s.oh]}function n(){var e=d(x,0,0,A,k,f).apply(null,M(D,z)),t=(f?d:v)(x,L-e[0],N-e[1],A,k,f);return B=(0,p.O)(V,T,F),y=(0,r.c)(M,t),P=(0,r.c)(B,y),I=l(y,H),a()}function a(){return S=R=null,t}return t.stream=function(e){return S&&R===e?S:S=u(function(e){return(0,i.s)({point:function(t,n){var s=e(t,n);return this.stream.point(s[0],s[1])}})}(B)(C(I(_(R=e)))))},t.preclip=function(e){return arguments.length?(C=e,E=void 0,a()):C},t.postclip=function(e){return arguments.length?(_=e,m=O=w=j=null,a()):_},t.clipAngle=function(e){return arguments.length?(C=+e?(0,b.c)(E=e*s.qw):(E=null,h.c),a()):E*s.oh},t.clipExtent=function(e){return arguments.length?(_=e==null?(m=O=w=j=null,c.c):(0,g.c)(m=+e[0][0],O=+e[0][1],w=+e[1][0],j=+e[1][1]),a()):m==null?null:[[m,O],[w,j]]},t.scale=function(e){return arguments.length?(x=+e,n()):x},t.translate=function(e){return arguments.length?(L=+e[0],N=+e[1],n()):[L,N]},t.center=function(e){return arguments.length?(D=e[0]%360*s.qw,z=e[1]%360*s.qw,n()):[D*s.oh,z*s.oh]},t.rotate=function(e){return arguments.length?(V=e[0]%360*s.qw,T=e[1]%360*s.qw,F=e.length>2?e[2]%360*s.qw:0,n()):[V*s.oh,T*s.oh,F*s.oh]},t.angle=function(e){return arguments.length?(f=e%360*s.qw,n()):f*s.oh},t.reflectX=function(e){return arguments.length?(A=e?-1:1,n()):A<0},t.reflectY=function(e){return arguments.length?(k=e?-1:1,n()):k<0},t.precision=function(e){return arguments.length?(I=l(y,H=e*e),a()):(0,s._I)(H)},t.fitExtent=function(e,n){return(0,o.QX)(t,e,n)},t.fitSize=function(e,n){return(0,o.UV)(t,e,n)},t.fitWidth=function(e,n){return(0,o.Qx)(t,e,n)},t.fitHeight=function(e,n){return(0,o.OW)(t,e,n)},function(){return M=e.apply(this,arguments),t.invert=M.invert&&$,n()}}},47984:function(e,t,n){"use strict";n.d(t,{c:function(){return a},g:function(){return s}});var i=n(87952),o=n(64528);function s(e,t){var n=t*t,s=n*n;return[e*(.8707-.131979*n+s*(s*(.003971*n-.001529*s)-.013791)),t*(1.007226+n*(.015085+s*(.028874*n-.044475-.005916*s)))]}function a(){return(0,i.c)(s).scale(175.295)}s.invert=function(e,t){var n,i,a,s=t,r=25;do n=s*s,i=n*n,s-=a=(s*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))-t)/(1.007226+n*(.045255+i*(.259866*n-.311325-.005916*11*i)));while((0,o.a2)(a)>o.Gg&&--r>0)return[e/(.8707+(n=s*s)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),s]}},4888:function(e,t,n){"use strict";n.d(t,{c:function(){return r},t:function(){return o}});var s=n(64528),i=n(62280),a=n(87952);function o(e,t){return[(0,s.W8)(t)*(0,s.g$)(e),(0,s.g$)(t)]}function r(){return(0,a.c)(o).scale(249.5).clipAngle(90+s.Gg)}o.invert=(0,i.g)(s.qR)},92992:function(e,t,n){"use strict";n.d(t,{O:function(){return a},c:function(){return d}});var l=n(68120),s=n(64528);function o(e,t){return[(0,s.a2)(e)>s.pi?e+Math.round(-e/s.kD)*s.kD:e,t]}function a(e,t,n){return(e%=s.kD)?t||n?(0,l.c)(c(e),i(t,n)):c(e):t||n?i(t,n):o}function r(e){return function(t,n){return[(t+=e)>s.pi?t-s.kD:t<-s.pi?t+s.kD:t,n]}}function c(e){var t=r(e);return t.invert=r(-e),t}function i(e,t){var n=(0,s.W8)(e),o=(0,s.g$)(e),i=(0,s.W8)(t),a=(0,s.g$)(t);function r(e,t){var r=(0,s.W8)(t),c=(0,s.W8)(e)*r,l=(0,s.g$)(e)*r,d=(0,s.g$)(t),u=d*n+c*o;return[(0,s.WE)(l*i-u*a,c*n-d*o),(0,s.qR)(u*i+l*a)]}return r.invert=function(e,t){var r=(0,s.W8)(t),c=(0,s.W8)(e)*r,l=(0,s.g$)(e)*r,d=(0,s.g$)(t),u=d*i-l*a;return[(0,s.WE)(l*i+d*a,c*n+u*o),(0,s.qR)(u*n-c*o)]},r}function d(e){function t(t){return(t=e(t[0]*s.qw,t[1]*s.qw))[0]*=s.oh,t[1]*=s.oh,t}return e=a(e[0]*s.qw,e[1]*s.qw,e.length>2?e[2]*s.qw:0),t.invert=function(t){return(t=e.invert(t[0]*s.qw,t[1]*s.qw))[0]*=s.oh,t[1]*=s.oh,t},t}o.invert=o},16016:function(e,t,n){"use strict";function s(e,t){e&&a.hasOwnProperty(e.type)&&a[e.type](e,t)}n.d(t,{c:function(){return c}});var i={Feature:function(e,t){s(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,o=-1,i=n.length;++o<i;)s(n[o].geometry,t)}},a={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,s=-1,o=n.length;++s<o;)e=n[s],t.point(e[0],e[1],e[2])},LineString:function(e,t){o(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,s=-1,i=n.length;++s<i;)o(n[s],t,0)},Polygon:function(e,t){r(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,s=-1,o=n.length;++s<o;)r(n[s],t)},GeometryCollection:function(e,t){for(var n=e.geometries,o=-1,i=n.length;++o<i;)s(n[o],t)}};function o(e,t,n){var s,o=-1,i=e.length-n;for(t.lineStart();++o<i;)s=e[o],t.point(s[0],s[1],s[2]);t.lineEnd()}function r(e,t){var n=-1,s=e.length;for(t.polygonStart();++n<s;)o(e[n],t,1);t.polygonEnd()}function c(e,t){e&&i.hasOwnProperty(e.type)?i[e.type](e,t):s(e,t)}},15196:function(e,t,n){"use strict";function i(e){return{stream:o(e)}}function o(e){return function(t){var o,n=new s;for(o in e)n[o]=e[o];return n.stream=t,n}}function s(){}n.d(t,{c:function(){return i},s:function(){return o}}),s.prototype={constructor:s,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(e,t,n){"use strict";function K(e,t){return e.parent===t.parent?1:2}function te(e,t){return e+t.x}function ee(e,t){return Math.max(e,t.y)}function J(){var s=K,t=1,n=1,o=!1;function e(e){c=0,e.eachAfter(function(e){var t=e.children;t?(e.x=function(e){return e.reduce(te,0)/e.length}(t),e.y=function(e){return 1+e.reduce(ee,0)}(t)):(e.x=i?c+=s(e,i):0,e.y=0,i=e)});var i,c,a=function(e){for(var t;t=e.children;)e=t[0];return e}(e),r=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(e),l=a.x-s(a,r)/2,d=r.x+s(r,a)/2;return e.eachAfter(o?function(s){s.x=(s.x-e.x)*t,s.y=(e.y-s.y)*n}:function(s){s.x=(s.x-l)/(d-l)*t,s.y=(1-(e.y?s.y/e.y:1))*n})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(s){return arguments.length?(o=!1,t=+s[0],n=+s[1],e):o?null:[t,n]},e.nodeSize=function(s){return arguments.length?(o=!0,t=+s[0],n=+s[1],e):o?[t,n]:null},e}function Z(e){var t=0,n=e.children,s=n&&n.length;if(s)for(;--s>=0;)t+=n[s].value;else t=1;e.value=t}function p(e,t){var n,s,i,a,r,c=new o(e),d=+e.value&&(c.value=e.value),l=[c];for(t==null&&(t=X);n=l.pop();)if(d&&(n.value=+n.data.value),(a=t(n.data))&&(r=a.length))for(n.children=new Array(r),s=r-1;s>=0;--s)l.push(i=n.children[s]=new o(a[s])),i.parent=n,i.depth=n.depth+1;return c.eachBefore(M)}function X(e){return e.children}function ie(e){e.data=e.data.data}function M(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function o(e){this.data=e,this.depth=this.height=0,this.parent=null}n.r(t),n.d(t,{cluster:function(){return J},hierarchy:function(){return p},pack:function(){return R},packEnclose:function(){return A},packSiblings:function(){return H},partition:function(){return P},stratify:function(){return W},tree:function(){return Q},treemap:function(){return ne},treemapBinary:function(){return se},treemapDice:function(){return a},treemapResquarify:function(){return F},treemapSlice:function(){return d},treemapSliceDice:function(){return oe},treemapSquarify:function(){return j}}),o.prototype=p.prototype={constructor:o,count:function(){return this.eachAfter(Z)},each:function(e){var t,o,i,a,n=this,s=[n];do for(i=s.reverse(),s=[];n=i.pop();)if(e(n),o=n.children)for(t=0,a=o.length;t<a;++t)s.push(o[t]);while(s.length)return this},eachAfter:function(e){for(var n,s,o,t=this,i=[t],a=[];t=i.pop();)if(a.push(t),s=t.children)for(n=0,o=s.length;n<o;++n)i.push(s[n]);for(;t=a.pop();)e(t);return this},eachBefore:function(e){for(var t,s,n=this,o=[n];n=o.pop();)if(e(n),s=n.children)for(t=s.length-1;t>=0;--t)o.push(s[t]);return this},sum:function(e){return this.eachAfter(function(t){for(var s=+e(t.data)||0,n=t.children,o=n&&n.length;--o>=0;)s+=n[o].value;t.value=s})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var o,t=this,s=function(e,t){if(e===t)return e;var n=e.ancestors(),s=t.ancestors(),o=null;for(e=n.pop(),t=s.pop();e===t;)o=e,e=n.pop(),t=s.pop();return o}(t,e),n=[t];t!==s;)t=t.parent,n.push(t);for(o=n.length;e!==s;)n.splice(o,0,e),e=e.parent;return n},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return p(this).eachBefore(ie)}},S=Array.prototype.slice;function A(e){for(var t,s,n=0,i=(e=function(e){for(var n,s,t=e.length;t;)n=Math.random()*t--|0,s=e[t],e[t]=e[n],e[n]=s;return e}(S.call(e))).length,o=[];n<i;)s=e[n],t&&T(t,s)?++n:(t=B(o=q(o,s)),n=0);return t}function q(e,t){var n,s;if(b(t,e))return[t];for(n=0;n<e.length;++n)if(h(t,e[n])&&b(r(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(s=n+1;s<e.length;++s)if(h(r(e[n],e[s]),t)&&h(r(e[n],t),e[s])&&h(r(e[s],t),e[n])&&b(_(e[n],e[s],t),e))return[e[n],e[s],t];throw new Error}function h(e,t){var n=e.r-t.r,s=t.x-e.x,o=t.y-e.y;return n<0||n*n<s*s+o*o}function T(e,t){var n=e.r-t.r+1e-6,s=t.x-e.x,o=t.y-e.y;return n>0&&n*n>s*s+o*o}function b(e,t){for(var n=0;n<t.length;++n)if(!T(e,t[n]))return!1;return!0}function B(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return r(e[0],e[1]);case 3:return _(e[0],e[1],e[2])}var t}function r(e,t){var c=e.x,l=e.y,i=e.r,u=t.x,a=t.y,r=t.r,n=u-c,s=a-l,d=r-i,o=Math.sqrt(n*n+s*s);return{x:(c+u+n/o*d)/2,y:(l+a+s/o*d)/2,r:(o+i+r)/2}}function _(e,t,n){var i=e.x,o=e.y,s=e.r,_=t.x,y=t.y,j=t.r,v=n.x,g=n.y,m=n.r,h=i-_,w=i-v,f=o-y,p=o-g,S=j-s,k=m-s,E=i*i+o*o-s*s,C=E-_*_-y*y+j*j,x=E-v*v-g*g+m*m,r=w*f-h*p,u=(f*x-p*C)/(2*r)-i,a=(p*S-f*k)/r,c=(w*C-h*x)/(2*r)-o,l=(h*k-w*S)/r,b=a*a+l*l-1,d=2*(s+u*a+c*l),A=u*u+c*c-s*s,O=-(b?(d+Math.sqrt(d*d-4*b*A))/(2*b):A/d);return{x:i+u+a*O,y:o+c+l*O,r:O}}function w(e,t,n){var s,o,a,r,c=e.x-t.x,l=e.y-t.y,i=c*c+l*l;i?(o=t.r+n.r,o*=o,r=e.r+n.r,o>(r*=r)?(s=(i+r-o)/(2*i),a=Math.sqrt(Math.max(0,r/i-s*s)),n.x=e.x-s*c-a*l,n.y=e.y-s*l+a*c):(s=(i+o-r)/(2*i),a=Math.sqrt(Math.max(0,o/i-s*s)),n.x=t.x+s*c-a*l,n.y=t.y+s*l+a*c)):(n.x=t.x+n.r,n.y=t.y)}function O(e,t){var n=e.r+t.r-1e-6,s=t.x-e.x,o=t.y-e.y;return n>0&&n*n>s*s+o*o}function x(e){var t=e._,n=e.next._,s=t.r+n.r,o=(t.x*n.r+n.x*t.r)/s,i=(t.y*n.r+n.y*t.r)/s;return o*o+i*i}function u(e){this._=e,this.next=null,this.previous=null}function E(e){if(!(r=e.length))return 0;var t,n,s,o,i,a,r,c,l,d,h;if((t=e[0]).x=0,t.y=0,!(r>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(r>2))return t.r+n.r;w(n,t,s=e[2]),t=new u(t),n=new u(n),s=new u(s),t.next=s.previous=n,n.next=t.previous=s,s.next=n.previous=t;t:for(o=3;o<r;++o){w(t._,n._,s=e[o]),s=new u(s),i=n.next,a=t.previous,l=n._.r,d=t._.r;do if(l<=d){if(O(i._,s._)){n=i,t.next=n,n.previous=t,--o;continue t}l+=i._.r,i=i.next}else{if(O(a._,s._)){(t=a).next=n,n.previous=t,--o;continue t}d+=a._.r,a=a.previous}while(i!==a.next)for(s.previous=t,s.next=n,t.next=n.previous=n=s,c=x(t);(s=s.next)!==n;)(h=x(s))<c&&(t=s,c=h);n=t.next}for(t=[n._],s=n;(s=s.next)!==n;)t.push(s._);for(s=A(t),o=0;o<r;++o)(t=e[o]).x-=s.x,t.y-=s.y;return s.r}function H(e){return E(e),e}function c(e){if("function"!=typeof e)throw new Error;return e}function s(){return 0}function i(e){return function(){return e}}function L(e){return Math.sqrt(e.value)}function R(){var o=null,t=1,n=1,a=s;function e(e){return e.x=t/2,e.y=n/2,o?e.eachBefore(z(o)).eachAfter(f(a,.5)).eachBefore(N(1)):e.eachBefore(z(L)).eachAfter(f(s,1)).eachAfter(f(a,e.r/Math.min(t,n))).eachBefore(N(Math.min(t,n)/(2*e.r))),e}return e.radius=function(t){return arguments.length?(o=null==(n=t)?null:c(n),e):o;var n},e.size=function(s){return arguments.length?(t=+s[0],n=+s[1],e):[t,n]},e.padding=function(t){return arguments.length?(a="function"==typeof t?t:i(+t),e):a},e}function z(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function f(e,t){return function(n){if(o=n.children){var s,o,a,r=o.length,i=e(n)*t||0;if(i)for(s=0;s<r;++s)o[s].r+=i;if(a=E(o),i)for(s=0;s<r;++s)o[s].r-=i;n.r=a+i}}}function N(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function y(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function a(e,t,n,s,o){for(var i,a=e.children,r=-1,c=a.length,l=e.value&&(s-t)/e.value;++r<c;)(i=a[r]).y0=n,i.y1=o,i.x0=t,i.x1=t+=i.value*l}function P(){var s=1,n=1,t=0,o=!1;function e(e){var i=e.height+1;return e.x0=e.y0=t,e.x1=s,e.y1=n/i,e.eachBefore(function(e,n){return function(s){s.children&&a(s,s.x0,e*(s.depth+1)/n,s.x1,e*(s.depth+2)/n);var o=s.x0,i=s.y0,r=s.x1-t,c=s.y1-t;r<o&&(o=r=(o+r)/2),c<i&&(i=c=(i+c)/2),s.x0=o,s.y0=i,s.x1=r,s.y1=c}}(n,i)),o&&e.eachBefore(y),e}return e.round=function(t){return arguments.length?(o=!!t,e):o},e.size=function(t){return arguments.length?(s=+t[0],n=+t[1],e):[s,n]},e.padding=function(n){return arguments.length?(t=+n,e):t},e}var m,j,S,F,k="$",I={depth:-1},C={};function V(e){return e.id}function $(e){return e.parentId}function W(){var t=V,n=$;function e(e){var s,i,a,r,c,d,h,l=e.length,m=new Array(l),u={};for(s=0;s<l;++s)d=e[s],i=m[s]=new o(d),null!=(a=t(d,s,e))&&(a+="")&&(u[h=k+(i.id=a)]=h in u?C:i);for(s=0;s<l;++s)if(i=m[s],null!=(a=n(e[s],s,e))&&(a+="")){if(!(c=u[k+a]))throw new Error("missing: "+a);if(c===C)throw new Error("ambiguous: "+a);c.children?c.children.push(i):c.children=[i],i.parent=c}else{if(r)throw new Error("multiple roots");r=i}if(!r)throw new Error("no root");if(r.parent=I,r.eachBefore(function(e){e.depth=e.parent.depth+1,--l}).eachBefore(M),r.parent=null,l>0)throw new Error("cycle");return r}return e.id=function(n){return arguments.length?(t=c(n),e):t},e.parentId=function(t){return arguments.length?(n=c(t),e):n},e}function U(e,t){return e.parent===t.parent?1:2}function v(e){var t=e.children;return t?t[0]:e.t}function g(e){var t=e.children;return t?t[t.length-1]:e.t}function Y(e,t,n){var s=n/(t.i-e.i);t.c-=s,t.s+=n,e.c+=s,t.z+=n,t.m+=n}function G(e,t,n){return e.a.parent===t.parent?e.a:n}function l(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Q(){var t=U,n=1,s=1,o=null;function e(e){if(c=function(e){for(var t,n,o,i,a,s=new l(e,0),r=[s];n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),t=a-1;t>=0;--t)r.push(i=n.children[t]=new l(o[t],t)),i.parent=n;return(s.parent=new l(null,0)).children=[s],s}(e),c.eachAfter(i),c.parent.m=-c.z,c.eachBefore(a),o)e.eachBefore(r);else{var d=e,u=e,h=e;e.eachBefore(function(e){e.x<d.x&&(d=e),e.x>u.x&&(u=e),e.depth>h.depth&&(h=e)});var c,m=d===u?1:t(d,u)/2,f=m-d.x,p=n/(u.x+m+f),g=s/(h.depth||1);e.eachBefore(function(e){e.x=(e.x+f)*p,e.y=e.depth*g})}return e}function i(e){var o,s=e.children,i=e.parent.children,n=e.i?i[e.i-1]:null;s?(!function(e){for(var t,n=0,i=0,s=e.children,o=s.length;--o>=0;)(t=s[o]).z+=n,t.m+=n,n+=t.s+(i+=t.c)}(e),o=(s[0].z+s[s.length-1].z)/2,n?(e.z=n.z+t(e._,n._),e.m=e.z-o):e.z=o):n&&(e.z=n.z+t(e._,n._)),e.parent.A=function(e,n,s){if(n){for(var c,o=e,a=e,i=n,r=o.parent.children[0],l=o.m,d=a.m,u=i.m,h=r.m;i=g(i),o=v(o),i&&o;)r=v(r),(a=g(a)).a=e,(c=i.z+u-o.z-l+t(i._,o._))>0&&(Y(G(i,e,s),e,c),l+=c,d+=c),u+=i.m,l+=o.m,h+=r.m,d+=a.m;i&&!g(a)&&(a.t=i,a.m+=u-d),o&&!v(r)&&(r.t=o,r.m+=l-h,s=e)}return s}(e,n,e.parent.A||i[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e){e.x*=n,e.y=e.depth*s}return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(o=!1,n=+t[0],s=+t[1],e):o?null:[n,s]},e.nodeSize=function(t){return arguments.length?(o=!0,n=+t[0],s=+t[1],e):o?[n,s]:null},e}function d(e,t,n,s,o){for(var i,a=e.children,r=-1,c=a.length,l=e.value&&(o-n)/e.value;++r<c;)(i=a[r]).x0=t,i.x1=s,i.y0=n,i.y1=n+=i.value*l}l.prototype=Object.create(o.prototype),m=(1+Math.sqrt(5))/2;function D(e,t,n,s,o,i){for(var r,l,h,m,f,p,g,b,_,O,x,w=[],v=t.children,j=0,c=0,y=v.length,u=t.value;j<y;){g=o-n,m=i-s;do r=v[c++].value;while(!r&&c<y)for(f=p=r,l=r*r*(O=Math.max(m/g,g/m)/(u*e)),_=Math.max(p/l,l/f);c<y;++c){if(r+=h=v[c].value,h<f&&(f=h),h>p&&(p=h),l=r*r*O,(x=Math.max(p/l,l/f))>_){r-=h;break}_=x}w.push(b={value:r,dice:g<m,children:v.slice(j,c)}),b.dice?a(b,n,s,o,u?s+=m*r/u:i):d(b,n,s,u?n+=g*r/u:o,i),u-=r,j=c}return w}j=function e(t){function n(e,n,s,o,i){D(t,e,n,s,o,i)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(m);function ne(){var t=j,n=!1,o=1,a=1,m=[0],r=s,l=s,d=s,u=s,h=s;function e(e){return e.x0=e.y0=0,e.x1=o,e.y1=a,e.eachBefore(f),m=[0],n&&e.eachBefore(y),e}function f(e){var n=m[e.depth],s=e.x0+n,o=e.y0+n,i=e.x1-n,a=e.y1-n;i<s&&(s=i=(s+i)/2),a<o&&(o=a=(o+a)/2),e.x0=s,e.y0=o,e.x1=i,e.y1=a,e.children&&(n=m[e.depth+1]=r(e)/2,s+=h(e)-n,o+=l(e)-n,(i-=d(e)-n)<s&&(s=i=(s+i)/2),(a-=u(e)-n)<o&&(o=a=(o+a)/2),t(e,s,o,i,a))}return e.round=function(t){return arguments.length?(n=!!t,e):n},e.size=function(t){return arguments.length?(o=+t[0],a=+t[1],e):[o,a]},e.tile=function(n){return arguments.length?(t=c(n),e):t},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(r="function"==typeof t?t:i(+t),e):r},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(l="function"==typeof t?t:i(+t),e):l},e.paddingRight=function(t){return arguments.length?(d="function"==typeof t?t:i(+t),e):d},e.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:i(+t),e):u},e.paddingLeft=function(t){return arguments.length?(h="function"==typeof t?t:i(+t),e):h},e}function se(e,t,n,s,o){var a,l,r=e.children,c=r.length,i=new Array(c+1);for(i[0]=l=a=0;a<c;++a)i[a+1]=l+=r[a].value;!function e(t,n,s,o,a,c,l){if(t>=n-1)return m=r[t],m.x0=o,m.y0=a,m.x1=c,void(m.y1=l);for(var u,h,m,f,v,b,j=i[t],p=s/2+j,d=t+1,g=n-1;d<g;)f=d+g>>>1,i[f]<p?d=f+1:g=f;p-i[d-1]<i[d]-p&&t+1<d&&--d,u=i[d]-j,h=s-u,c-o>l-a?(v=(o*h+c*u)/s,e(t,d,u,o,a,v,l),e(d,n,h,v,a,c,l)):(b=(a*h+l*u)/s,e(t,d,u,o,a,c,b),e(d,n,h,o,b,c,l))}(0,c,e.value,t,n,s,o)}function oe(e,t,n,s,o){(1&e.depth?d:a)(e,t,n,s,o)}F=function e(t){function n(e,n,s,o,i){if((c=e._squarify)&&c.ratio===t)for(var r,c,l,u,m,f=-1,p=c.length,h=e.value;++f<p;){for(u=(r=c[f]).children,l=r.value=0,m=u.length;l<m;++l)r.value+=u[l].value;r.dice?a(r,n,s,o,s+=(i-s)*r.value/h):d(r,n,s,n+=(o-n)*r.value/h,i),h-=r.value}else e._squarify=c=D(t,e,n,s,o,i),c.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(m)},10132:function(e,t,n){"use strict";n.d(t,{ak:function(){return v}});var l,d,o=Math.PI,i=2*o,s=1e-6,u=i-s;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new a}a.prototype=c.prototype={constructor:a,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,s){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(e,t,n,s,o,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +s+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(e,t,n,i,a){e=+e,t=+t,n=+n,i=+i,a=+a;var p=this._x1,v=this._y1,l=n-e,d=i-t,r=p-e,c=v-t,m=r*r+c*c;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(m>s)if(Math.abs(c*l-d*r)>s&&a){var f=n-p,u=i-v,g=l*l+d*d,w=f*f+u*u,b=Math.sqrt(g),j=Math.sqrt(m),y=a*Math.tan((o-Math.acos((g+m-w)/(2*b*j)))/2),h=y/j,_=y/b;Math.abs(h-1)>s&&(this._+="L"+(e+h*r)+","+(t+h*c)),this._+="A"+a+","+a+",0,0,"+ +(c*f>r*u)+","+(this._x1=e+_*l)+","+(this._y1=t+_*d)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,a,r,c){e=+e,t=+t,c=!!c;var f=(n=+n)*Math.cos(a),p=n*Math.sin(a),d=e+f,h=t+p,m=1^c,l=c?a-r:r-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+d+","+h:(Math.abs(this._x1-d)>s||Math.abs(this._y1-h)>s)&&(this._+="L"+d+","+h),n&&(l<0&&(l=l%i+i),l>u?this._+="A"+n+","+n+",0,1,"+m+","+(e-f)+","+(t-p)+"A"+n+","+n+",0,1,"+m+","+(this._x1=d)+","+(this._y1=h):l>s&&(this._+="A"+n+","+n+",0,"+ +(l>=o)+","+m+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,s){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}},l=c,d=Array.prototype.slice;function r(e){return function(){return e}}function h(e){return e[0]}function m(e){return e[1]}function f(e){return e.source}function p(e){return e.target}function g(e,t,n,s,o){e.moveTo(t,n),e.bezierCurveTo(t=(t+s)/2,n,t,o,s,o)}function v(){return function(e){var i=f,a=p,s=h,o=m,n=null;function t(){var r,t=d.call(arguments),c=i.apply(this,t),u=a.apply(this,t);if(n||(n=r=l()),e(n,+s.apply(this,(t[0]=c,t)),+o.apply(this,t),+s.apply(this,(t[0]=u,t)),+o.apply(this,t)),r)return n=null,r+""||null}return t.source=function(e){return arguments.length?(i=e,t):i},t.target=function(e){return arguments.length?(a=e,t):a},t.x=function(e){return arguments.length?(s="function"==typeof e?e:r(+e),t):s},t.y=function(e){return arguments.length?(o="function"==typeof e?e:r(+e),t):o},t.context=function(e){return arguments.length?(n=e??null,t):n},t}(g)}},94336:function(e,t,n){"use strict";n.d(t,{Yn:function(){return y},m_:function(){return A},E9:function(){return v}});var a=n(8208),O=n(58931),i=n(46192),w=n(68936),c=n(32171),h=n(53528);function m(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function f(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function l(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function A(e){var xe=e.dateTime,A=e.date,ve=e.time,v=e.periods,y=e.days,u=e.shortDays,h=e.months,c=e.shortMonths,Ne=d(v),ze=r(v),Te=d(y),ke=r(y),Re=d(u),Ae=r(u),Se=d(h),Me=r(h),Le=d(c),Fe=r(c),s={a:function(e){return u[e.getDay()]},A:function(e){return y[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return h[e.getMonth()]},c:null,d:k,e:k,f:G,H:U,I:K,j:q,L:E,m:X,M:Q,p:function(e){return v[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:b,s:_,S:Z,u:J,U:ee,V:te,w:ne,W:se,x:null,X:null,y:oe,Y:ie,Z:ae,"%":j},n={a:function(e){return u[e.getUTCDay()]},A:function(e){return y[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return h[e.getUTCMonth()]},c:null,d:C,e:C,f:he,H:ce,I:le,j:de,L:x,m:me,M:fe,p:function(e){return v[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:b,s:_,S:pe,u:ge,U:Ee,V:be,w:je,W:ye,x:null,X:null,y:_e,Y:we,Z:Oe,"%":j},De={a:function(e,t,n){var s=Re.exec(t.slice(n));return s?(e.w=Ae[s[0].toLowerCase()],n+s[0].length):-1},A:function(e,t,n){var s=Te.exec(t.slice(n));return s?(e.w=ke[s[0].toLowerCase()],n+s[0].length):-1},b:function(e,t,n){var s=Le.exec(t.slice(n));return s?(e.m=Fe[s[0].toLowerCase()],n+s[0].length):-1},B:function(e,t,n){var s=Se.exec(t.slice(n));return s?(e.m=Me[s[0].toLowerCase()],n+s[0].length):-1},c:function(e,t,n){return o(e,xe,t,n)},d:p,e:p,f:I,H:S,I:S,j:N,L:H,m:z,M:R,p:function(e,t,n){var s=Ne.exec(t.slice(n));return s?(e.p=ze[s[0].toLowerCase()],n+s[0].length):-1},q:T,Q:M,s:$,S:P,u:re,U:Y,V:W,w:ue,W:V,x:function(e,t,n){return o(e,A,t,n)},X:function(e,t,n){return o(e,ve,t,n)},y:D,Y:L,Z:F,"%":B};function t(e,t){return function(n){var o,a,c,i=[],s=-1,r=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(i.push(e.slice(r,s)),null!=(a=g[o=e.charAt(++s)])?o=e.charAt(++s):a="e"===o?" ":"0",(c=t[o])&&(o=c(n,a)),i.push(o),r=s+1);return i.push(e.slice(r,s)),i.join("")}}function Ce(e,t){return function(n){var r,c,s=l(1900,void 0,1);if(o(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(c=(r=f(l(s.y,0,1))).getUTCDay(),r=c>4||0===c?a.ot.ceil(r):(0,a.ot)(r),r=O.c.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(c=(r=m(l(s.y,0,1))).getDay(),r=c>4||0===c?i.qT.ceil(r):(0,i.qT)(r),r=w.c.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),c="Z"in s?f(l(s.y,0,1)).getUTCDay():m(l(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(c+5)%7:s.w+7*s.U-(c+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,f(s)):m(s)}}function o(e,t,n,s){for(var o,a,i=0,r=t.length,c=n.length;i<r;){if(s>=c)return-1;if(37===(o=t.charCodeAt(i++))){if(o=t.charAt(i++),!(a=De[o in g?t.charAt(i++):o])||(s=a(e,n,s))<0)return-1}else if(o!=n.charCodeAt(s++))return-1}return s}return s.x=t(A,s),s.X=t(ve,s),s.c=t(xe,s),n.x=t(A,n),n.X=t(ve,n),n.c=t(xe,n),{format:function(e){var n=t(e+="",s);return n.toString=function(){return e},n},parse:function(e){var t=Ce(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var s=t(e+="",n);return s.toString=function(){return e},s},utcParse:function(e){var t=Ce(e+="",!0);return t.toString=function(){return e},t}}}var u,v,y,g={"-":"",_:" ",0:"0"},o=/^\s*\d+/,Ce=/^%/,xe=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var o=e<0?"-":"",s=(o?-e:e)+"",i=s.length;return o+(i<n?new Array(n-i+1).join(t)+s:s)}function ve(e){return e.replace(xe,"\\$&")}function d(e){return new RegExp("^(?:"+e.map(ve).join("|")+")","i")}function r(e){for(var n={},t=-1,s=e.length;++t<s;)n[e[t].toLowerCase()]=t;return n}function ue(e,t,n){var s=o.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function re(e,t,n){var s=o.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function Y(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function W(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function V(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function L(e,t,n){var s=o.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function D(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function F(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function T(e,t,n){var s=o.exec(t.slice(n,n+1));return s?(e.q=3*s[0]-3,n+s[0].length):-1}function z(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function p(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function N(e,t,n){var s=o.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function S(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function R(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function P(e,t,n){var s=o.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function H(e,t,n){var s=o.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function I(e,t,n){var s=o.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function B(e,t,n){var s=Ce.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function M(e,t,n){var s=o.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function $(e,t,n){var s=o.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function k(e,t){return s(e.getDate(),t,2)}function U(e,t){return s(e.getHours(),t,2)}function K(e,t){return s(e.getHours()%12||12,t,2)}function q(e,t){return s(1+w.c.count((0,c.c)(e),e),t,3)}function E(e,t){return s(e.getMilliseconds(),t,3)}function G(e,t){return E(e,t)+"000"}function X(e,t){return s(e.getMonth()+1,t,2)}function Q(e,t){return s(e.getMinutes(),t,2)}function Z(e,t){return s(e.getSeconds(),t,2)}function J(e){var t=e.getDay();return 0===t?7:t}function ee(e,t){return s(i.uU.count((0,c.c)(e)-1,e),t,2)}function te(e,t){var n=e.getDay();return e=n>=4||0===n?(0,i.kD)(e):i.kD.ceil(e),s(i.kD.count((0,c.c)(e),e)+(4===(0,c.c)(e).getDay()),t,2)}function ne(e){return e.getDay()}function se(e,t){return s(i.qT.count((0,c.c)(e)-1,e),t,2)}function oe(e,t){return s(e.getFullYear()%100,t,2)}function ie(e,t){return s(e.getFullYear()%1e4,t,4)}function ae(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+s(t/60|0,"0",2)+s(t%60,"0",2)}function C(e,t){return s(e.getUTCDate(),t,2)}function ce(e,t){return s(e.getUTCHours(),t,2)}function le(e,t){return s(e.getUTCHours()%12||12,t,2)}function de(e,t){return s(1+O.c.count((0,h.c)(e),e),t,3)}function x(e,t){return s(e.getUTCMilliseconds(),t,3)}function he(e,t){return x(e,t)+"000"}function me(e,t){return s(e.getUTCMonth()+1,t,2)}function fe(e,t){return s(e.getUTCMinutes(),t,2)}function pe(e,t){return s(e.getUTCSeconds(),t,2)}function ge(e){var t=e.getUTCDay();return 0===t?7:t}function Ee(e,t){return s(a.EV.count((0,h.c)(e)-1,e),t,2)}function be(e,t){var n=e.getUTCDay();return e=n>=4||0===n?(0,a.yA)(e):a.yA.ceil(e),s(a.yA.count((0,h.c)(e),e)+(4===(0,h.c)(e).getUTCDay()),t,2)}function je(e){return e.getUTCDay()}function ye(e,t){return s(a.ot.count((0,h.c)(e)-1,e),t,2)}function _e(e,t){return s(e.getUTCFullYear()%100,t,2)}function we(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function Oe(){return"+0000"}function j(){return"%"}function b(e){return+e}function _(e){return Math.floor(+e/1e3)}u=A({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),y=u.format,u.parse,v=u.utcFormat,u.utcParse},68936:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var i,a=n(81628),s=n(69792),o=(0,a.c)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s.iy)/s.SK},function(e){return e.getDate()-1});t.c=o,i=o.range},69792:function(e,t,n){"use strict";n.d(t,{KK:function(){return r},SK:function(){return a},cg:function(){return i},iy:function(){return o},yc:function(){return s}});var s=1e3,o=6e4,i=36e5,a=864e5,r=6048e5},73220:function(e,t,n){"use strict";n.r(t),n.d(t,{timeDay:function(){return v.c},timeDays:function(){return v.m},timeFriday:function(){return o.iB},timeFridays:function(){return o.sJ},timeHour:function(){return S},timeHours:function(){return E},timeInterval:function(){return a.c},timeMillisecond:function(){return j},timeMilliseconds:function(){return b},timeMinute:function(){return F},timeMinutes:function(){return M},timeMonday:function(){return o.qT},timeMondays:function(){return o.QP},timeMonth:function(){return A},timeMonths:function(){return D},timeSaturday:function(){return o.Wc},timeSaturdays:function(){return o.aI},timeSecond:function(){return l},timeSeconds:function(){return d},timeSunday:function(){return o.uU},timeSundays:function(){return o.Ab},timeThursday:function(){return o.kD},timeThursdays:function(){return o.eC},timeTuesday:function(){return o.Mf},timeTuesdays:function(){return o.Oc},timeWednesday:function(){return o.eg},timeWednesdays:function(){return o.sn},timeWeek:function(){return o.uU},timeWeeks:function(){return o.Ab},timeYear:function(){return c.c},timeYears:function(){return c.Q},utcDay:function(){return p.c},utcDays:function(){return p.o},utcFriday:function(){return s.od},utcFridays:function(){return s.iG},utcHour:function(){return k},utcHours:function(){return O},utcMillisecond:function(){return j},utcMilliseconds:function(){return b},utcMinute:function(){return x},utcMinutes:function(){return C},utcMonday:function(){return s.ot},utcMondays:function(){return s.iO},utcMonth:function(){return T},utcMonths:function(){return z},utcSaturday:function(){return s.Ad},utcSaturdays:function(){return s.K8},utcSecond:function(){return l},utcSeconds:function(){return d},utcSunday:function(){return s.EV},utcSundays:function(){return s.Wq},utcThursday:function(){return s.yA},utcThursdays:function(){return s.ob},utcTuesday:function(){return s.sG},utcTuesdays:function(){return s.kl},utcWednesday:function(){return s._6},utcWednesdays:function(){return s.W_},utcWeek:function(){return s.EV},utcWeeks:function(){return s.Wq},utcYear:function(){return w.c},utcYears:function(){return w.i}}),a=n(81628),r=(0,a.c)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e}),r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,a.c)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):r:null};var a,r,j=r,b=r.range,i=n(69792),m=(0,a.c)(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*i.yc)},function(e,t){return(t-e)/i.yc},function(e){return e.getUTCSeconds()}),l=m,d=m.range,u=(0,a.c)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.yc)},function(e,t){e.setTime(+e+t*i.iy)},function(e,t){return(t-e)/i.iy},function(e){return e.getMinutes()}),F=u,M=u.range,f=(0,a.c)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*i.yc-e.getMinutes()*i.iy)},function(e,t){e.setTime(+e+t*i.cg)},function(e,t){return(t-e)/i.cg},function(e){return e.getHours()}),S=f,E=f.range,v=n(68936),o=n(46192),_=(0,a.c)(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),A=_,D=_.range,c=n(32171),y=(0,a.c)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*i.iy)},function(e,t){return(t-e)/i.iy},function(e){return e.getUTCMinutes()}),x=y,C=y.range,g=(0,a.c)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*i.cg)},function(e,t){return(t-e)/i.cg},function(e){return e.getUTCHours()}),k=g,O=g.range,p=n(58931),s=n(8208),h=(0,a.c)(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),T=h,z=h.range,w=n(53528)},81628:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var s=new Date,o=new Date;function i(e,t,n,a){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=function(t){return e(t=new Date(+t)),t},r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=function(e,n){return t(e=new Date(+e),n==null?1:Math.floor(n)),e},r.range=function(n,s,o){var a,i=[];if(n=r.ceil(n),o=o==null?1:Math.floor(o),!(n<s&&o>0))return i;do i.push(a=new Date(+n)),t(n,o),e(n);while(a<n&&n<s)return i},r.filter=function(n){return i(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,s){if(e>=e)if(s<0)for(;++s<=0;)for(;t(e,-1),!n(e););else for(;--s>=0;)for(;t(e,1),!n(e););})},n&&(r.count=function(t,i){return s.setTime(+t),o.setTime(+i),e(s),e(o),Math.floor(n(s,o))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(a?function(t){return a(t)%e==0}:function(t){return r.count(0,t)%e==0}):r:null}),r}},58931:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var o,i=n(81628),a=n(69792),s=(0,i.c)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/a.SK},function(e){return e.getUTCDate()-1});t.c=s,o=s.range},8208:function(e,t,n){"use strict";n.d(t,{Ad:function(){return o},EV:function(){return a},K8:function(){return j},W_:function(){return g},Wq:function(){return m},_6:function(){return l},iG:function(){return b},iO:function(){return f},kl:function(){return p},ob:function(){return v},od:function(){return u},ot:function(){return r},sG:function(){return c},yA:function(){return d}}),h=n(81628),i=n(69792);function s(e){return(0,h.c)(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/i.KK})}var i,h,a=s(0),r=s(1),c=s(2),l=s(3),d=s(4),u=s(5),o=s(6),m=a.range,f=r.range,p=c.range,g=l.range,v=d.range,b=u.range,j=o.range},53528:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var i,o=n(81628),s=(0,o.c)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});s.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,o.c)(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null},t.c=s,i=s.range},46192:function(e,t,n){"use strict";n.d(t,{Ab:function(){return m},Mf:function(){return c},Oc:function(){return p},QP:function(){return f},Wc:function(){return i},aI:function(){return j},eC:function(){return v},eg:function(){return l},iB:function(){return u},kD:function(){return d},qT:function(){return r},sJ:function(){return b},sn:function(){return g},uU:function(){return a}}),h=n(81628),o=n(69792);function s(e){return(0,h.c)(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.iy)/o.KK})}var o,h,a=s(0),r=s(1),c=s(2),l=s(3),d=s(4),u=s(5),i=s(6),m=a.range,f=r.range,p=c.range,g=l.range,v=d.range,b=u.range,j=i.range},32171:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var i,o=n(81628),s=(0,o.c)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});s.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,o.c)(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null},t.c=s,i=s.range},64348:function(e,t,n){"use strict";var r=n(39640)(),i=n(53664),o=r&&i("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var c=i("%SyntaxError%"),s=i("%TypeError%"),a=n(2304);e.exports=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new s("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],i=!!a&&a(e,t);if(o)o(e,t,{configurable:null===d&&i?i.configurable:!d,enumerable:null===r&&i?i.enumerable:!r,value:n,writable:null===l&&i?i.writable:!l});else{if(!u&&(r||l||d))throw new c("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},81288:function(e,t,n){"use strict";var l=n(41820),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),u=Object.prototype.toString,r=Array.prototype.concat,i=Object.defineProperty,c=n(39640)(),s=i&&c,d=function(e,t,n,o){if(t in e)if(!0===o){if(e[t]===n)return}else if("function"!=typeof(a=o)||"[object Function]"!==u.call(a)||!o())return;var a;s?i(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n},o=function(e,t){var s,o=arguments.length>2?arguments[2]:{},n=l(t);a&&(n=r.call(n,Object.getOwnPropertySymbols(t)));for(s=0;s<n.length;s+=1)d(e,n[s],t[n[s]],o[n[s]])};o.supportsDescriptors=!!s,e.exports=o},31264:function(e){e.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},63768:function(e){"use strict";e.exports=n;var t=(n.canvas=document.createElement("canvas")).getContext("2d"),o=s([32,126]);function n(e,n){Array.isArray(e)&&(e=e.join(", "));var i,r,m,l={},a=16,d=.05;n&&(2===n.length&&"number"==typeof n[0]?i=s(n):Array.isArray(n)?i=n:(n.o?i=s(n.o):n.pairs&&(i=n.pairs),n.fontSize&&(a=n.fontSize),null!=n.threshold&&(d=n.threshold))),i||(i=o),t.font=a+"px "+e;for(r=0;r<i.length;r++){var c=i[r],u=t.measureText(c[0]).width+t.measureText(c[1]).width,h=t.measureText(c).width;Math.abs(u-h)>a*d&&(m=(h-u)/a,l[c]=1e3*m)}return l}function s(e){for(var t,o,i,s=[],n=e[0];n<=e[1];n++)for(o=String.fromCharCode(n),t=e[0];t<e[1];t++)i=o+String.fromCharCode(t),s.push(i);return s}n.createPairs=s,n.ascii=o},22235:function(e,t,n){var s=n(49972),o=n(48816),i={M:"moveTo",C:"bezierCurveTo"};e.exports=function(e,t){e.beginPath(),o(s(t)).forEach(function(t){var n=t[0],s=t.slice(1);e[i[n]].apply(e,s)}),e.closePath()}},72512:function(e){e.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(e){"use strict";function t(e,n,s){var o,a,i=0|e[s];if(i<=0)return[];if(a=new Array(i),s===e.length-1)for(o=0;o<i;++o)a[o]=n;else for(o=0;o<i;++o)a[o]=t(e,n,s+1);return a}e.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(e,t){var n,s;for(s=new Array(e),n=0;n<e;++n)s[n]=t;return s}(0|e,n);break;case"object":if("number"==typeof e.length)return t(e,n,0)}return[]}},28912:function(e){"use strict";function d(e,t,s){s=s||2;var a,r,c,l,d,u,h,m,g=t&&t.length,v=g?t[0]*s:e.length,o=f(e,0,v,s,!0),p=[];if(!o||o.next===o.prev)return p;if(g&&(o=function(e,t,s,o){var i,a,c,r=[];for(i=0,c=t.length;i<c;i++)(a=f(e,t[i]*o,i<c-1?t[i+1]*o:e.length,o,!1))===a.next&&(a.steiner=!0),r.push(C(a));for(r.sort(w),i=0;i<r.length;i++)x(r[i],s),s=n(s,s.next);return s}(e,t,o,s)),e.length>80*s){a=l=e[0],r=h=e[1];for(c=s;c<v;c+=s)(d=e[c])<a&&(a=d),(m=e[c+1])<r&&(r=m),d>l&&(l=d),m>h&&(h=m);u=0!==(u=Math.max(l-a,h-r))?1/u:0}return i(o,p,s,a,r,u),p}function f(e,t,n,s,i){var a,r;if(i===u(e,t,n,s)>0)for(a=t;a<n;a+=s)r=p(a,e[a],e[a+1],r);else for(a=n-s;a>=t;a-=s)r=p(a,e[a],e[a+1],r);return r&&l(r,r.next)&&(o(r),r=r.next),r}function n(e,n){if(!e)return e;n||(n=e);var i,s=e;do if(i=!1,s.steiner||!l(s,s.next)&&0!==t(s.prev,s,s.next))s=s.next;else{if(o(s),(s=n=s.prev)===s.next)break;i=!0}while(i||s!==n)return n}function i(e,t,s,a,r,c,l){if(e){!l&&c&&function(e,t,n,s){var o=e;do null===o.z&&(o.z=h(o.x,o.y,t,n,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e)o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,s,o,i,a,r,c,l=1;do{for(n=e,e=null,o=null,r=0;n;){for(r++,t=n,i=0,c=0;c<l&&(i++,t=t.nextZ);c++);for(a=l;i>0||a>0&&t;)0!==i&&(0===a||!t||n.z<=t.z)?(s=n,n=n.nextZ,i--):(s=t,t=t.nextZ,a--),o?o.nextZ=s:e=s,s.prevZ=o,o=s;n=t}o.nextZ=null,l*=2}while(r>1)}(o)}(e,a,r,c);for(var d,u,m=e;e.prev!==e.next;)if(u=e.prev,d=e.next,c?y(e,a,r,c):_(e))t.push(u.i/s),t.push(e.i/s),t.push(d.i/s),o(e),e=d.next,m=d.next;else if((e=d)===m){l?1===l?i(e=b(n(e),t,s),t,s,a,r,c,2):2===l&&j(e,t,s,a,r,c):i(n(e),t,s,a,r,c,1);break}}}function _(e){var n,o=e.prev,i=e,a=e.next;if(t(o,i,a)>=0)return!1;for(n=e.next.next;n!==e.prev;){if(s(o.x,o.y,i.x,i.y,a.x,a.y,n.x,n.y)&&t(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function y(e,n,o,i){var l=e.prev,d=e,a=e.next;if(t(l,d,a)>=0)return!1;for(var g=l.x<d.x?l.x<a.x?l.x:a.x:d.x<a.x?d.x:a.x,v=l.y<d.y?l.y<a.y?l.y:a.y:d.y<a.y?d.y:a.y,f=l.x>d.x?l.x>a.x?l.x:a.x:d.x>a.x?d.x:a.x,p=l.y>d.y?l.y>a.y?l.y:a.y:d.y>a.y?d.y:a.y,u=h(g,v,n,o,i),m=h(f,p,n,o,i),r=e.prevZ,c=e.nextZ;r&&r.z>=u&&c&&c.z<=m;){if(r!==e.prev&&r!==e.next&&s(l.x,l.y,d.x,d.y,a.x,a.y,r.x,r.y)&&t(r.prev,r,r.next)>=0)return!1;if(r=r.prevZ,c!==e.prev&&c!==e.next&&s(l.x,l.y,d.x,d.y,a.x,a.y,c.x,c.y)&&t(c.prev,c,c.next)>=0)return!1;c=c.nextZ}for(;r&&r.z>=u;){if(r!==e.prev&&r!==e.next&&s(l.x,l.y,d.x,d.y,a.x,a.y,r.x,r.y)&&t(r.prev,r,r.next)>=0)return!1;r=r.prevZ}for(;c&&c.z<=m;){if(c!==e.prev&&c!==e.next&&s(l.x,l.y,d.x,d.y,a.x,a.y,c.x,c.y)&&t(c.prev,c,c.next)>=0)return!1;c=c.nextZ}return!0}function b(e,t,s){i=e;do{var i,c=i.prev,r=i.next.next;!l(c,r)&&v(c,i,i.next,r)&&a(c,r)&&a(r,c)&&(t.push(c.i/s),t.push(i.i/s),t.push(r.i/s),o(i),o(i.next),i=e=r),i=i.next}while(i!==e)return n(i)}function j(e,t,s,o,a,r){var l,d,c=e;do{for(l=c.next.next;l!==c.prev;){if(c.i!==l.i&&O(c,l))return d=g(c,l),c=n(c,c.next),d=n(d,d.next),i(c,t,s,o,a,r),void i(d,t,s,o,a,r);l=l.next}c=c.next}while(c!==e)}function w(e,t){return e.x-t.x}function x(e,t){if(t=function(e,t){var o,l,n=t,r=e.x,i=e.y,c=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y&&(l=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y),l<=r&&l>c)){if(c=l,l===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}n=n.next}while(n!==t)if(!o)return null;if(r===c)return o;var d,f=o,m=o.x,u=o.y,h=1/0,n=o;do r>=n.x&&n.x>=m&&r!==n.x&&s(i<u?r:c,i,m,u,i<u?c:r,i,n.x,n.y)&&(d=Math.abs(i-n.y)/(r-n.x),a(n,e)&&(d<h||d===h&&(n.x>o.x||n.x===o.x&&E(o,n)))&&(o=n,h=d)),n=n.next;while(n!==f)return o}(e,t),t){var o=g(t,e);n(t,t.next),n(o,o.next)}}function E(e,n){return t(e.prev,e,n.prev)<0&&t(n.next,e,e.next)<0}function h(e,t,n,s,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*o)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function C(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e)return n}function s(e,t,n,s,o,i,a,r){return(o-a)*(t-r)-(e-a)*(i-r)>=0&&(e-a)*(s-r)-(n-a)*(t-r)>=0&&(n-a)*(i-r)-(o-a)*(s-r)>=0}function O(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&v(n,n.next,e,t))return!0;n=n.next}while(n!==e)return!1}(e,n)&&(a(e,n)&&a(n,e)&&function(e,t){var n=e,s=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==e)return s}(e,n)&&(t(e.prev,e,n.prev)||t(e,n.prev,n))||l(e,n)&&t(e.prev,e,e.next)>0&&t(n.prev,n,n.next)>0)}function t(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function l(e,t){return e.x===t.x&&e.y===t.y}function v(e,n,s,o){var i=r(t(e,n,s)),a=r(t(e,n,o)),l=r(t(s,o,e)),d=r(t(s,o,n));return i!==a&&l!==d||0===i&&!!c(e,s,n)||0===a&&!!c(e,o,n)||0===l&&!!c(s,e,o)||0===d&&!!c(s,n,o)}function c(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function r(e){return e>0?1:e<0?-1:0}function a(e,n){return t(e.prev,e,e.next)<0?t(e,n,e.next)>=0&&t(e,e.prev,n)>=0:t(e,n,e.prev)<0||t(e,e.next,n)<0}function g(e,t){var s=new m(e.i,e.x,e.y),n=new m(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,s.next=o,o.prev=s,n.next=s,s.prev=n,i.next=n,n.prev=i,n}function p(e,t,n,s){var o=new m(e,t,n);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function o(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function m(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u(e,t,n,s){for(var a=0,o=t,i=n-s;o<n;o+=s)a+=(e[i]-e[o])*(e[o+1]+e[i+1]),i=o;return a}e.exports=d,e.exports.default=d,d.deviation=function(e,t,n,s){var o,i,c,d,h,l=t&&t.length,p=l?t[0]*n:e.length,a=Math.abs(u(e,0,p,n));if(l)for(o=0,c=t.length;o<c;o++)d=t[o]*n,h=o<c-1?t[o+1]*n:e.length,a-=Math.abs(u(e,d,h,n));i=0;for(o=0;o<s.length;o+=3){var r=s[o]*n,m=s[o+1]*n,f=s[o+2]*n;i+=Math.abs((e[r]-e[f])*(e[m+1]-e[r+1])-(e[r]-e[m])*(e[f+1]-e[r+1]))}return 0===a&&0===i?0:Math.abs((i-a)/a)},d.flatten=function(e){for(var n,s,i=e[0][0].length,o={vertices:[],holes:[],dimensions:i},a=0,t=0;t<e.length;t++){for(n=0;n<e[t].length;n++)for(s=0;s<i;s++)o.vertices.push(e[t][n][s]);t>0&&(a+=e[t-1].length,o.holes.push(a))}return o}},6688:function(e,t,n){var s=n(78484);e.exports=function(e,t){var n,a,c,d,u,m,p=[],l=[],r=[],i={},o=[];function f(e){r[e]=!1,i.hasOwnProperty(e)&&Object.keys(i[e]).forEach(function(t){delete i[e][t],r[t]&&f(t)})}function h(e){var t,s,a,c=!1;for(l.push(e),r[e]=!0,t=0;t<o[e].length;t++)(s=o[e][t])===n?(v(n,l),c=!0):r[s]||(c=h(s));if(c)f(e);else for(t=0;t<o[e].length;t++)s=o[e][t],a=i[s],a||(a={},i[s]=a),a[s]=!0;return l.pop(),c}function v(e,n){var s=[].concat(n).concat(e);t?t(h):p.push(s)}function g(t){!function(t){for(var n=0;n<e.length;n++)n<t&&(e[n]=[]),e[n]=e[n].filter(function(e){return e>=t})}(t);for(var i,a,c,l,o=s(e).components.filter(function(e){return e.length>1}),r=1/0,n=0;n<o.length;n++)for(i=0;i<o[n].length;i++)o[n][i]<r&&(r=o[n][i],c=n);return a=o[c],!!a&&(l=e.map(function(e,t){return-1===a.indexOf(t)?[]:e.filter(function(e){return-1!==a.indexOf(e)})}),{leastVertex:r,adjList:l})}n=0;for(d=e.length;n<d;)if(u=g(n),n=u.leastVertex,o=u.adjList){for(a=0;a<o.length;a++)for(c=0;c<o[a].length;c++)m=o[a][c],r[+m]=!1,i[m]={};h(n),n+=1}else n=d;return t?void 0:p}},41476:function(e,t,n){"use strict";var s=n(9252);e.exports=function(){return s(this).length=0,this}},74772:function(e,t,n){"use strict";e.exports=n(44716)()?Array.from:n(80816)},44716:function(e){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=n(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},80816:function(e,t,n){"use strict";var c=n(92664).iterator,l=n(60948),h=n(17024),m=n(81304),r=n(34044),f=n(9252),d=n(42584),u=n(29768),a=Array.isArray,o=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;e.exports=function(e){var t,n,p,g,v,j,y,w,O,x,b=arguments[1],_=arguments[2];if(e=Object(f(e)),d(b)&&r(b),this&&this!==Array&&h(this))v=this;else{if(!b){if(l(e))return 1!==(g=e.length)?Array.apply(null,e):((n=new Array(1))[0]=e[0],n);if(a(e)){for(n=new Array(g=e.length),t=0;t<g;++t)n[t]=e[t];return n}}n=[]}if(!a(e))if(void 0!==(O=e[c])){for(w=r(O).call(e),v&&(n=new v),y=w.next(),t=0;!y.done;)p=b?o.call(b,_,y.value,t):y.value,v?(s.value=p,i(n,t,s)):n[t]=p,y=w.next(),++t;g=t}else if(u(e)){for(g=e.length,v&&(n=new v),t=0,j=0;t<g;++t)p=e[t],t+1<g&&(x=p.charCodeAt(0))>=55296&&x<=56319&&(p+=e[++t]),p=b?o.call(b,_,p,j):p,v?(s.value=p,i(n,j,s)):n[j]=p,++j;g=j}if(void 0===g)for(g=m(e.length),v&&(n=new v(g)),t=0;t<g;++t)p=b?o.call(b,_,e[t],t):e[t],v?(s.value=p,i(n,t,s)):n[t]=p;return v&&(s.value=null,n.length=g),n}},60948:function(e){"use strict";var t=Object.prototype.toString,n=t.call(function(){return arguments}());e.exports=function(e){return t.call(e)===n}},17024:function(e){"use strict";var t=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&n(t.call(e))}},33208:function(e){"use strict";e.exports=function(){}},85608:function(e,t,n){"use strict";e.exports=n(37328)()?Math.sign:n(92928)},37328:function(e){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},92928:function(e){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},96936:function(e,t,n){"use strict";var s=n(85608),o=Math.abs,i=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?s(e)*i(o(e)):e}},81304:function(e,t,n){"use strict";var s=n(96936),o=Math.max;e.exports=function(e){return o(0,s(e))}},14428:function(e,t,n){"use strict";var o=n(34044),i=n(9252),a=Function.prototype.bind,s=Function.prototype.call,r=Object.keys,c=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,l){var d,h=arguments[2],u=arguments[3];return n=Object(i(n)),o(l),d=r(n),u&&d.sort("function"==typeof u?a.call(u,n):void 0),"function"!=typeof e&&(e=d[e]),s.call(e,d,function(e,o){return c.call(n,e)?s.call(l,h,n[e],e,n,o):t})}}},38452:function(e,t,n){"use strict";e.exports=n(96276)()?Object.assign:n(81892)},96276:function(e){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},81892:function(e,t,n){"use strict";var s=n(54768),o=n(9252),i=Math.max;e.exports=function(e,t){var n,a,r,c=i(arguments.length,2);for(e=Object(o(e)),r=function(s){try{e[s]=t[s]}catch(e){n||(n=e)}},a=1;a<c;++a)s(t=arguments[a]).forEach(r);if(void 0!==n)throw n;return e}},95920:function(e,t,n){"use strict";var s=n(74772),o=n(38452),i=n(9252);e.exports=function(e){var t,a=Object(i(e)),n=arguments[1],r=Object(arguments[2]);return a!==e&&!n?a:(t={},n?s(n,function(n){(r.ensure||n in e)&&(t[n]=e[n])}):o(t,e),t)}},14452:function(e,t,n){"use strict";var s,o,i,r,a=Object.create;n(63092)()||(s=n(8672)),e.exports=s?1!==s.level?a:(o={},i={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){i[e]="__proto__"!==e?r:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(o,i),Object.defineProperty(s,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:o}),function(e,t){return a(null===e?o:e,t)}):a},42748:function(e,t,n){"use strict";e.exports=n(14428)("forEach")},69127:function(e,t,n){"use strict";var s=n(42584),o={function:!0,object:!0};e.exports=function(e){return s(e)&&o[typeof e]||!1}},42584:function(e,t,n){"use strict";var s=n(33208)();e.exports=function(e){return e!==s&&null!==e}},54768:function(e,t,n){"use strict";e.exports=n(87888)()?Object.keys:n(89592)},87888:function(e){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(e,t,n){"use strict";var s=n(42584),o=Object.keys;e.exports=function(e){return o(s(e)?Object(e):e)}},84323:function(e,t,n){"use strict";var s=n(34044),o=n(42748),i=Function.prototype.call;e.exports=function(e,t){var n={},a=arguments[2];return s(t),o(e,function(e,s,o,r){n[s]=i.call(t,a,e,s,o,r)}),n}},50868:function(e,t,n){"use strict";var s=n(42584),o=Array.prototype.forEach,i=Object.create;e.exports=function(){var t=i(null);return o.call(arguments,function(e){s(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},69932:function(e,t,n){"use strict";e.exports=n(63092)()?Object.setPrototypeOf:n(8672)},63092:function(e){"use strict";var n=Object.create,s=Object.getPrototypeOf,t={};e.exports=function(){var e=Object.setPrototypeOf;return"function"==typeof e&&s(e((arguments[0]||n)(null),t))===t}},8672:function(e,t,n){"use strict";var s,o,a,r=n(69127),c=n(9252),l=Object.prototype.isPrototypeOf,d=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0},i=function(e,t){if(c(e),null===t||r(t))return e;throw new TypeError("Prototype must be null or an object")};e.exports=(s=function(){var n,e=Object.create(null),t={},s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(s){try{(n=s.set).call(e,t)}catch{}if(Object.getPrototypeOf(e)===t)return{set:n,level:2}}return e.__proto__=t,Object.getPrototypeOf(e)===t?{level:2}:((e={}).__proto__=t,Object.getPrototypeOf(e)===t&&{level:1})}(),s?(2===s.level?s.set?(a=s.set,o=function(e,t){return a.call(i(e,t),t),e}):o=function(e,t){return i(e,t).__proto__=t,e}:o=function e(t,n){var s;return i(t,n),(s=l.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,s&&d(e.nullPolyfill,"__proto__",u),t},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:s.level})):null),n(14452)},34044:function(e){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},92584:function(e,t,n){"use strict";var s=n(69127);e.exports=function(e){if(!s(e))throw new TypeError(e+" is not an Object");return e}},9252:function(e,t,n){"use strict";var s=n(42584);e.exports=function(e){if(!s(e))throw new TypeError("Cannot use null or undefined");return e}},71056:function(e,t,n){"use strict";e.exports=n(42976)()?String.prototype.contains:n(93040)},42976:function(e){"use strict";var t="razdwatrzy";e.exports=function(){return"function"==typeof t.contains&&!0===t.contains("dwa")&&!1===t.contains("foo")}},93040:function(e){"use strict";var t=String.prototype.indexOf;e.exports=function(e){return t.call(this,e,arguments[1])>-1}},29768:function(e){"use strict";var t=Object.prototype.toString,n=t.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||t.call(e)===n)||!1}},82252:function(e){"use strict";var t=Object.create(null),n=Math.random;e.exports=function(){var e;do e=n().toString(36).slice(2);while(t[e])return e}},52104:function(e,t,n){"use strict";var a=n(69932),r=n(71056),o=n(21092),l=n(92664),i=n(85512),c=Object.defineProperty,s=e.exports=function(e,t){if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");i.call(this,e),t=t?r.call(t,"key+value")?"key+value":r.call(t,"key")?"key":"value":"value",c(this,"__kind__",o("",t))};a&&a(s,i),delete s.prototype.constructor,s.prototype=Object.create(i.prototype,{_resolve:o(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),c(s.prototype,l.toStringTag,o("c","Array Iterator"))},76024:function(e,t,n){"use strict";var o=n(60948),i=n(34044),a=n(29768),r=n(76252),c=Array.isArray,s=Function.prototype.call,l=Array.prototype.some;e.exports=function(e,t){var n,d,u,h,m,f,p,v,g=arguments[2];if(c(e)||o(e)?d="array":a(e)?d="string":e=r(e),i(t),h=function(){m=!0},"array"!==d)if("string"!==d)for(u=e.next();!u.done;){if(s.call(t,g,u.value,h),m)return;u=e.next()}else for(p=e.length,n=0;n<p&&(f=e[n],n+1<p&&(v=f.charCodeAt(0))>=55296&&v<=56319&&(f+=e[++n]),s.call(t,g,f,h),!m);++n);else l.call(e,function(e){return s.call(t,g,e,h),m})}},76252:function(e,t,n){"use strict";var i=n(60948),a=n(29768),s=n(52104),r=n(80940),c=n(52891),o=n(92664).iterator;e.exports=function(e){return"function"==typeof c(e)[o]?e[o]():i(e)?new s(e):a(e)?new r(e):new s(e)}},85512:function(e,t,n){"use strict";var o,d=n(41476),u=n(38452),h=n(34044),c=n(9252),s=n(21092),l=n(27940),i=n(92664),a=Object.defineProperty,r=Object.defineProperties;e.exports=o=function(e,t){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");r(this,{__list__:s("w",c(e)),__context__:s("w",t),__nextIndex__:s("w",0)}),t&&(h(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete o.prototype.constructor,r(o.prototype,u({_next:s(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:s(function(){return this._createResult(this._next())}),_createResult:s(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:s(function(e){return this.__list__[e]}),_unBind:s(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:s(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},l({_onAdd:s(function(e){e>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)):a(this,"__redo__",s("c",[e])))}),_onDelete:s(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:s(function(){this.__redo__&&d.call(this.__redo__),this.__nextIndex__=0})}))),a(o.prototype,i.iterator,s(function(){return this}))},76368:function(e,t,n){"use strict";var s=n(60948),o=n(42584),i=n(29768),a=n(92664).iterator,r=Array.isArray;e.exports=function(e){return!(!o(e)||!r(e)&&!i(e)&&!s(e)&&"function"!=typeof e[a])}},80940:function(e,t,n){"use strict";var a=n(69932),o=n(21092),c=n(92664),i=n(85512),r=Object.defineProperty,s=e.exports=function(e){if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");e=String(e),i.call(this,e),r(this,"__length__",o("",e.length))};a&&a(s,i),delete s.prototype.constructor,s.prototype=Object.create(i.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var n,t=this.__list__[e];return this.__nextIndex__===this.__length__?t:(n=t.charCodeAt(0))>=55296&&n<=56319?t+this.__list__[this.__nextIndex__++]:t})}),r(s.prototype,c.toStringTag,o("c","String Iterator"))},52891:function(e,t,n){"use strict";var s=n(76368);e.exports=function(e){if(!s(e))throw new TypeError(e+" is not iterable");return e}},60964:function(e){"use strict";function t(e){if(e==null)throw new TypeError("Cannot convert first argument to object");for(a=Object(e),o=1;o<arguments.length;o++)if(n=arguments[o],n!=null)for(var n,s,o,a,r,c=Object.keys(Object(n)),i=0,l=c.length;i<l;i++)s=c[i],r=Object.getOwnPropertyDescriptor(n,s),void 0!==r&&r.enumerable&&(a[s]=n[s]);return a}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},92664:function(e,t,n){"use strict";e.exports=n(43580)()?n(12296).Symbol:n(18376)},43580:function(e,t,n){"use strict";var o=n(12296),s={object:!0,symbol:!0};e.exports=function(){var t,e=o.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch{return!1}return!!s[typeof e.iterator]&&!!s[typeof e.toPrimitive]&&!!s[typeof e.toStringTag]}},53908:function(e){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},96863:function(e,t,n){"use strict";var s=n(21092),a=Object.create,o=Object.defineProperty,r=Object.prototype,i=a(null);e.exports=function(e){for(var t,n,a=0;i[e+(a||"")];)++a;return i[e+=a||""]=!0,o(r,t="@@"+e,s.gs(null,function(e){n||(n=!0,o(this,t,s(e)),n=!1)})),t}},53540:function(e,t,n){"use strict";var o=n(21092),s=n(12296).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:o("",s&&s.hasInstance||e("hasInstance")),isConcatSpreadable:o("",s&&s.isConcatSpreadable||e("isConcatSpreadable")),iterator:o("",s&&s.iterator||e("iterator")),match:o("",s&&s.match||e("match")),replace:o("",s&&s.replace||e("replace")),search:o("",s&&s.search||e("search")),species:o("",s&&s.species||e("species")),split:o("",s&&s.split||e("split")),toPrimitive:o("",s&&s.toPrimitive||e("toPrimitive")),toStringTag:o("",s&&s.toStringTag||e("toStringTag")),unscopables:o("",s&&s.unscopables||e("unscopables"))})}},73852:function(e,t,n){"use strict";var o=n(21092),i=n(63948),s=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:o(function(t){return s[t]?s[t]:s[t]=e(String(t))}),keyFor:o(function(e){var t;for(t in i(e),s)if(s[t]===e)return t})})}},18376:function(e,t,n){"use strict";var s,i,d,o=n(21092),c=n(63948),a=n(12296).Symbol,u=n(96863),h=n(53540),m=n(73852),f=Object.create,l=Object.defineProperties,r=Object.defineProperty;if("function"==typeof a)try{String(a()),d=!0}catch{}else a=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return s(e)},e.exports=s=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return d?a(t):(n=f(i.prototype),t=void 0===t?"":String(t),l(n,{__description__:o("",t),__name__:o("",u(t))}))},h(s),m(s),l(i.prototype,{constructor:o(s),toString:o("",function(){return this.__name__})}),l(s.prototype,{toString:o(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:o(function(){return c(this)})}),r(s.prototype,s.toPrimitive,o("",function(){var e=c(this);return"symbol"==typeof e?e:e.toString()})),r(s.prototype,s.toStringTag,o("c","Symbol")),r(i.prototype,s.toStringTag,o("c",s.prototype[s.toStringTag])),r(i.prototype,s.toPrimitive,o("c",s.prototype[s.toPrimitive]))},63948:function(e,t,n){"use strict";var s=n(53908);e.exports=function(e){if(!s(e))throw new TypeError(e+" is not a symbol");return e}},60463:function(e,t,n){"use strict";e.exports=n(96979)()?WeakMap:n(64864)},96979:function(e){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(e)&&"function"==typeof e.set&&e.set({},1)===e&&"function"==typeof e.delete&&"function"==typeof e.has&&"one"===e.get(t)}},69876:function(e){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},64864:function(e,t,n){"use strict";var o,g=n(42584),i=n(69932),a=n(92584),p=n(9252),m=n(82252),s=n(21092),d=n(76252),u=n(76024),h=n(92664).toStringTag,l=n(69876),f=Array.isArray,c=Object.defineProperty,r=Object.prototype.hasOwnProperty,v=Object.getPrototypeOf;e.exports=o=function(){var t,e=arguments[0];if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");return t=l&&i&&WeakMap!==o?i(new WeakMap,v(this)):this,g(e)&&(f(e)||(e=d(e))),c(t,"__weakMapData__",s("c","$weakMap$"+m())),e?(u(e,function(e){p(e),t.set(e[0],e[1])}),t):t},l&&(i&&i(o,WeakMap),o.prototype=Object.create(WeakMap.prototype,{constructor:s(o)})),Object.defineProperties(o.prototype,{delete:s(function(e){return!!r.call(a(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:s(function(e){if(r.call(a(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:s(function(e){return r.call(a(e),this.__weakMapData__)}),set:s(function(e,t){return c(a(e),this.__weakMapData__,s("c",t)),this}),toString:s(function(){return"[object WeakMap]"})}),c(o.prototype,h,s("c","WeakMap"))},61252:function(e){"use strict";var o,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},p=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},a=Number.isNaN||function(e){return e!=e};function t(){t.init.call(this)}e.exports=t,e.exports.once=function(e,t){return new Promise(function(n,s){function o(n){e.removeListener(t,a),s(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}i(e,t,a,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&i(e,"error",t,{once:!0})}(e,o)})},t.EventEmitter=t,t.prototype._events=void 0,t.prototype._eventsCount=0,t.prototype._maxListeners=void 0,o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?t.defaultMaxListeners:e._maxListeners}function l(e,t,n,o){if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),i=a[t]),void 0===i)i=a[t]=n,++e._eventsCount;else if("function"==typeof i?i=a[t]=o?[n,i]:[i,n]:o?i.unshift(n):i.push(n),(l=c(e))>0&&i.length>l&&!i.warned){i.warned=!0;var i,a,l,d,r=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");r.name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,d=r,console&&console.warn&&console.warn(d)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=f.bind(o);return s.listener=n,o.wrapFn=s,s}function h(e,t,n){var s,o=e._events;return void 0===o?[]:(s=o[t],void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var n=new Array(e.length),t=0;t<n.length;++t)n[t]=e[t].listener||e[t];return n}(s):d(s,s.length))}function m(e){var t,n=this._events;if(void 0!==n){if(t=n[e],"function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function d(e,t){for(var s=new Array(t),n=0;n<t;++n)s[n]=e[n];return s}function i(e,t,n,s){if("function"==typeof e.on)s.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){s.once&&e.removeEventListener(t,o),n(i)})}}Object.defineProperty(t,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),t.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},t.prototype.getMaxListeners=function(){return c(this)},t.prototype.emit=function(e){for(var n,s,o,a,c,l,u,i=[],t=1;t<arguments.length;t++)i.push(arguments[t]);if(o="error"===e,a=this._events,void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o)throw i.length>0&&(s=i[0]),s instanceof Error?s:(c=new Error("Unhandled error."+(s?" ("+s.message+")":"")),c.context=s,c);if(n=a[e],void 0===n)return!1;if("function"==typeof n)r(n,this,i);else{l=n.length,u=d(n,l);for(t=0;t<l;++t)r(u[t],this,i)}return!0},t.prototype.addListener=function(e,t){return l(this,e,t,!1)},t.prototype.on=t.prototype.addListener,t.prototype.prependListener=function(e,t){return l(this,e,t,!0)},t.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},t.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},t.prototype.removeListener=function(e,t){var n,o,i,a,r;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){r=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,r||t)}return this},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(e){if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var t,n,s,o,i=Object.keys(n);for(t=0;t<i.length;++t)"removeListener"!==(o=i[t])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(s=n[e]))this.removeListener(e,s);else if(void 0!==s)for(t=s.length-1;t>=0;t--)this.removeListener(e,s[t]);return this},t.prototype.listeners=function(e){return h(this,e,!0)},t.prototype.rawListeners=function(e){return h(this,e,!1)},t.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},t.prototype.listenerCount=m,t.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},39072:function(e){var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},12296:function(e,t,n){"use strict";e.exports=n(45072)()?globalThis:n(39072)},45072:function(e){"use strict";e.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},38248:function(e,t,n){"use strict";var s=n(94576);e.exports=function(e){var n,t=typeof e;if("string"===t){if(n=e,0==(e=+e)&&s(n))return!1}else if("number"!==t)return!1;return e-e<1}},47520:function(e,t,n){var s=n(72512);e.exports=function(e,t,n){if(!e)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(e)&&e[0]&&"number"==typeof e[0][0]){var o,i,a,r,d,u,c=e[0].length,l=e.length*c;if(t&&"string"!=typeof t||(t=new(s(t||"float32"))(l+n)),d=t.length-n,l!==d)throw new Error("source length "+l+" ("+c+"x"+e.length+") does not match destination length "+d);for(o=0,i=n;o<e.length;o++)for(a=0;a<c;a++)t[i++]=null===e[o][a]?NaN:e[o][a]}else if(t&&"string"!=typeof t)t.set(e,n);else if(r=s(t||"float32"),Array.isArray(e)||"array"===t)for(o=0,i=n,u=(t=new r(e.length+n)).length;i<u;i++,o++)t[i]=null===e[o]?NaN:e[o];else 0===n?t=new r(e):(t=new r(e.length+n)).set(e,n);return t}},33888:function(e,t,n){"use strict";var s=n(49395),o=[32,126];e.exports=function(e){var n,d,u,c=(e=e||{}).shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512],a=e.canvas||document.createElement("canvas"),l=e.font,r="number"==typeof e.step?[e.step,e.step]:e.step||[32,32],t=e.chars||o;if(l&&"string"!=typeof l&&(l=s(l)),Array.isArray(t)){if(2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]){for(var h=[],i=t[0],m=0;i<=t[1];i++)h[m++]=String.fromCharCode(i);t=h}}else t=String(t).split("");c=c.slice(),a.width=c[0],a.height=c[1],n=a.getContext("2d"),n.fillStyle="#000",n.fillRect(0,0,a.width,a.height),n.font=l,n.textAlign="center",n.textBaseline="middle",n.fillStyle="#fff",d=r[0]/2,u=r[1]/2;for(i=0;i<t.length;i++)n.fillText(t[i],d,u),(d+=r[0])>c[0]-r[0]/2&&(d=r[0]/2,u+=r[1]);return a}},71920:function(e){"use strict";function n(e,i){if(i||(i={}),("string"==typeof e||Array.isArray(e))&&(i.family=e),u=Array.isArray(i.family)?i.family.join(", "):i.family,!u)throw Error("`family` must be defined");var m=i.size||i.fontSize||i.em||48,w=i.weight||i.fontWeight||"",g=(e=[i.style||i.fontStyle||"",w,m].join(" ")+"px "+u,i.origin||"top");if(n.cache[u]&&m<=n.cache[u].em)return s(n.cache[u],g);var c,d,u,h,p,v,b,j,y,_,O,f=i.canvas||n.canvas,r=f.getContext("2d"),l={upper:void 0!==i.upper?i.upper:"H",lower:void 0!==i.lower?i.lower:"x",descent:void 0!==i.descent?i.descent:"p",ascent:void 0!==i.ascent?i.ascent:"h",tittle:void 0!==i.tittle?i.tittle:"i",overshoot:void 0!==i.overshoot?i.overshoot:"O"},a=Math.ceil(1.5*m);f.height=a,f.width=.5*a,r.font=e,d="H",c={top:0},r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(d,0,0),h=t(r.getImageData(0,0,a,a)),r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(d,0,a),b=t(r.getImageData(0,0,a,a)),c.lineHeight=c.bottom=a-b+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(d,0,a),p=a-t(r.getImageData(0,0,a,a))-1+h,c.baseline=c.alphabetic=p,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(d,0,.5*a),j=t(r.getImageData(0,0,a,a)),c.median=c.middle=a-j-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(d,0,.5*a),v=t(r.getImageData(0,0,a,a)),c.hanging=a-v-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(d,0,a),y=t(r.getImageData(0,0,a,a)),(c.ideographic=a-y-1+h,l.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(l.upper,0,0),c.upper=t(r.getImageData(0,0,a,a)),c.capHeight=c.baseline-c.upper),l.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(l.lower,0,0),c.lower=t(r.getImageData(0,0,a,a)),c.xHeight=c.baseline-c.lower),l.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(l.tittle,0,0),c.tittle=t(r.getImageData(0,0,a,a))),l.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(l.ascent,0,0),c.ascent=t(r.getImageData(0,0,a,a))),l.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(l.descent,0,0),c.descent=o(r.getImageData(0,0,a,a))),l.overshoot)&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(l.overshoot,0,0),_=o(r.getImageData(0,0,a,a)),c.overshoot=_-p);for(O in c)c[O]/=m;return c.em=m,n.cache[u]=c,s(c,g)}function s(e,t){var n,s={};for(n in"string"==typeof t&&(t=e[t]),e)"em"!==n&&(s[n]=e[n]-t);return s}function t(e){for(var s=e.height,n=e.data,t=3;t<n.length;t+=4)if(0!==n[t])return Math.floor(.25*(t-3)/s)}function o(e){for(var s=e.height,n=e.data,t=n.length-1;t>0;t-=4)if(0!==n[t])return Math.floor(.25*(t-3)/s)}e.exports=n,n.canvas=document.createElement("canvas"),n.cache={}},46492:function(e,t,n){"use strict";var o=n(90720),i=Object.prototype.toString,s=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!o(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(e)?function(e,t,n){for(var o=0,i=e.length;o<i;o++)s.call(e,o)&&(n==null?t(e[o],o,e):t.call(n,e[o],o,e))}(e,t,a):"string"==typeof e?function(e,t,n){for(var s=0,o=e.length;s<o;s++)n==null?t(e.charAt(s),s,e):t.call(n,e.charAt(s),s,e)}(e,t,a):function(e,t,n){for(var o in e)s.call(e,o)&&(n==null?t(e[o],o,e):t.call(n,e[o],o,e))}(e,t,a)}},74336:function(e){"use strict";var n=Object.prototype.toString,s=Math.max,t=function(e,t){for(var n,o=[],s=0;s<e.length;s+=1)o[s]=e[s];for(n=0;n<t.length;n+=1)o[n+e.length]=t[n];return o};e.exports=function(e){if(o=this,"function"!=typeof o||"[object Function]"!==n.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var o,i,r,c=function(e){for(var s=[],n=1,o=0;n<e.length;n+=1,o+=1)s[o]=e[n];return s}(arguments),d=s(0,o.length-c.length),l=[],a=0;a<d;a++)l[a]="$"+a;return(i=Function("binder","return function ("+function(e){for(var s="",n=0;n<e.length;n+=1)s+=e[n],n+1<e.length&&(s+=",");return s}(l)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var n=o.apply(this,t(c,arguments));return Object(n)===n?n:this}return o.apply(e,t(c,arguments))}),o.prototype)&&(r=function(){},r.prototype=o.prototype,i.prototype=new r,r.prototype=null),i}},8844:function(e,t,n){"use strict";var s=n(74336);e.exports=Function.prototype.bind||s},13380:function(e){e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var n,s,o,a,i=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(i.width=t.width),"number"==typeof t.height&&(i.height=t.height),a=t;try{s=[e],0===e.indexOf("webgl")&&s.push("experimental-"+e);for(o=0;o<s.length;o++)if(n=i.getContext(s[o],a))return n}catch{n=null}return n||null}},53664:function(e,t,n){"use strict";var s,r=SyntaxError,g=Function,c=TypeError,f=function(e){try{return g('"use strict"; return ('+e+").constructor;")()}catch{}},i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch{i=null}var p=function(){throw new c},C=i?function(){try{return p}catch{try{return i(arguments,"callee").get}catch{return p}}}():p,l=n(71080)(),x=n(69572)(),o=Object.getPrototypeOf||(x?function(e){return e.__proto__}:null),d={},_="undefined"!=typeof Uint8Array&&o?o(Uint8Array):s,a={"%AggregateError%":"undefined"==typeof AggregateError?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?s:ArrayBuffer,"%ArrayIteratorPrototype%":l&&o?o([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?s:Atomics,"%BigInt%":"undefined"==typeof BigInt?s:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?s:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?s:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?s:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?s:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?s:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?s:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l&&o?o(o([][Symbol.iterator]())):s,"%JSON%":"object"==typeof JSON?JSON:s,"%Map%":"undefined"==typeof Map?s:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l&&o?o((new Map)[Symbol.iterator]()):s,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?s:Promise,"%Proxy%":"undefined"==typeof Proxy?s:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?s:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?s:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l&&o?o((new Set)[Symbol.iterator]()):s,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l&&o?o(""[Symbol.iterator]()):s,"%Symbol%":l?Symbol:s,"%SyntaxError%":r,"%ThrowTypeError%":C,"%TypedArray%":_,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?s:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?s:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?s:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?s:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?s:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?s:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?s:WeakSet};if(o)try{null.error}catch(e){v=o(o(e)),a["%Error.prototype%"]=v}var v,y=function e(t){if("%AsyncFunction%"===t)n=f("async function () {}");else if("%GeneratorFunction%"===t)n=f("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=f("async function* () {}");else if("%AsyncGenerator%"===t){var n,s,i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else"%AsyncIteratorPrototype%"===t&&(s=e("%AsyncGenerator%"),s&&o&&(n=o(s.prototype)));return a[t]=n,n},j={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},u=n(8844),h=n(92064),w=u.call(Function.call,Array.prototype.concat),O=u.call(Function.apply,Array.prototype.splice),b=u.call(Function.call,String.prototype.replace),m=u.call(Function.call,String.prototype.slice),E=u.call(Function.call,RegExp.prototype.exec),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,S=function(e,t){var s,o,n=e;if(h(j,n)&&(n="%"+(o=j[n])[0]+"%"),h(a,n)){if(s=a[n],s===d&&(s=y(n)),void 0===s&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:s}}throw new r("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/,e))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var l,d,u,o=function(e){var t,n=m(e,0,1),s=m(e,-1);if("%"===n&&"%"!==s)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===s&&"%"!==n)throw new r("invalid intrinsic syntax, expected opening `%`");return t=[],b(e,k,function(e,n,s,o){t[t.length]=s?b(o,A,"$1"):n||e}),t}(e),y=o.length>0?o[0]:"",j=S("%"+y+"%",t),v=j.name,n=j.value,_=!1,g=j.alias;g&&(y=g[0],O(o,w([0,1],g)));for(d=1,l=!0;d<o.length;d+=1){var s=o[d],f=m(s,0,1),p=m(s,-1);if(('"'===f||"'"===f||"`"===f||'"'===p||"'"===p||"`"===p)&&f!==p)throw new r("property names with quotes must have matching quotes");if("constructor"!==s&&l||(_=!0),h(a,v="%"+(y+="."+s)+"%"))n=a[v];else if(n!=null){if(!(s in n)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}i&&d+1>=o.length?(u=i(n,s),n=(l=!!u)&&"get"in u&&!("originalValue"in u.get)?u.get:n[s]):(l=h(n,s),n=n[s]),l&&!_&&(a[v]=n)}}return n}},12408:function(e){e.exports=function(e,t){var v=t[0],u=t[1],o=t[2],i=t[3],g=t[4],m=t[5],n=t[6],s=t[7],f=t[8],h=t[9],l=t[10],r=t[11],p=t[12],d=t[13],a=t[14],c=t[15];return e[0]=m*(l*c-r*a)-h*(n*c-s*a)+d*(n*r-s*l),e[1]=-(u*(l*c-r*a)-h*(o*c-i*a)+d*(o*r-i*l)),e[2]=u*(n*c-s*a)-m*(o*c-i*a)+d*(o*s-i*n),e[3]=-(u*(n*r-s*l)-m*(o*r-i*l)+h*(o*s-i*n)),e[4]=-(g*(l*c-r*a)-f*(n*c-s*a)+p*(n*r-s*l)),e[5]=v*(l*c-r*a)-f*(o*c-i*a)+p*(o*r-i*l),e[6]=-(v*(n*c-s*a)-g*(o*c-i*a)+p*(o*s-i*n)),e[7]=v*(n*r-s*l)-g*(o*r-i*l)+f*(o*s-i*n),e[8]=g*(h*c-r*d)-f*(m*c-s*d)+p*(m*r-s*h),e[9]=-(v*(h*c-r*d)-f*(u*c-i*d)+p*(u*r-i*h)),e[10]=v*(m*c-s*d)-g*(u*c-i*d)+p*(u*s-i*m),e[11]=-(v*(m*r-s*h)-g*(u*r-i*h)+f*(u*s-i*m)),e[12]=-(g*(h*a-l*d)-f*(m*a-n*d)+p*(m*l-n*h)),e[13]=v*(h*a-l*d)-f*(u*a-o*d)+p*(u*l-o*h),e[14]=-(v*(m*a-n*d)-g*(u*a-o*d)+p*(u*n-o*m)),e[15]=v*(m*l-n*h)-g*(u*l-o*h)+f*(u*n-o*m),e}},76860:function(e){e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},64492:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},54212:function(e){e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},70800:function(e){e.exports=function(e){var t=e[0],n=e[1],s=e[2],o=e[3],i=e[4],a=e[5],r=e[6],c=e[7],l=e[8],d=e[9],u=e[10],h=e[11],m=e[12],f=e[13],p=e[14],g=e[15];return(t*a-n*i)*(u*g-h*p)-(t*r-s*i)*(d*g-h*f)+(t*c-o*i)*(d*p-u*f)+(n*r-s*a)*(l*g-h*m)-(n*c-o*a)*(l*p-u*m)+(s*c-o*r)*(l*f-d*m)}},61784:function(e){e.exports=function(e,t){var i=t[0],s=t[1],n=t[2],a=t[3],o=i+i,r=s+s,d=n+n,l=i*o,c=s*o,u=s*r,h=n*o,m=n*r,f=n*d,p=a*o,g=a*r,v=a*d;return e[0]=1-u-f,e[1]=c+v,e[2]=h-g,e[3]=0,e[4]=c-v,e[5]=1-l-f,e[6]=m+p,e[7]=0,e[8]=h+g,e[9]=m-p,e[10]=1-l-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},91616:function(e){e.exports=function(e,t,n){var a,r,l,s=n[0],o=n[1],i=n[2],c=Math.sqrt(s*s+o*o+i*i);return Math.abs(c)<1e-6?null:(s*=c=1/c,o*=c,i*=c,r=Math.sin(t),a=1-(l=Math.cos(t)),e[0]=s*s*a+l,e[1]=o*s*a+i*r,e[2]=i*s*a-o*r,e[3]=0,e[4]=s*o*a-i*r,e[5]=o*o*a+l,e[6]=i*o*a+s*r,e[7]=0,e[8]=s*i*a+o*r,e[9]=o*i*a-s*r,e[10]=i*i*a+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}},51944:function(e){e.exports=function(e,t,n){var s=t[0],i=t[1],a=t[2],r=t[3],u=s+s,c=i+i,o=a+a,d=s*u,l=s*c,h=s*o,m=i*c,f=i*o,p=a*o,g=r*u,v=r*c,b=r*o;return e[0]=1-(m+p),e[1]=l+b,e[2]=h-v,e[3]=0,e[4]=l-b,e[5]=1-(d+p),e[6]=f+g,e[7]=0,e[8]=h+v,e[9]=f-g,e[10]=1-(d+m),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},69444:function(e){e.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},48268:function(e){e.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},21856:function(e){e.exports=function(e,t){var n=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},79216:function(e){e.exports=function(e,t){var n=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},57736:function(e){e.exports=function(e,t){var n=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},38848:function(e){e.exports=function(e,t,n,s,o,i,a){var r=1/(n-t),c=1/(o-s),l=1/(i-a);return e[0]=2*i*r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*c,e[6]=0,e[7]=0,e[8]=(n+t)*r,e[9]=(o+s)*c,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*l,e[15]=0,e}},36635:function(e){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},36524:function(e,t,n){e.exports={create:n(54212),clone:n(76860),copy:n(64492),identity:n(36635),transpose:n(86520),invert:n(4308),adjoint:n(12408),determinant:n(70800),multiply:n(80944),translate:n(35176),scale:n(68152),rotate:n(30016),rotateX:n(15456),rotateY:n(64840),rotateZ:n(4192),fromRotation:n(91616),fromRotationTranslation:n(51944),fromScaling:n(69444),fromTranslation:n(48268),fromXRotation:n(21856),fromYRotation:n(79216),fromZRotation:n(57736),fromQuat:n(61784),frustum:n(38848),perspective:n(51296),perspectiveFromFieldOfView:n(63688),ortho:n(97688),lookAt:n(56508),str:n(89412)}},4308:function(e){e.exports=function(e,t){var b=t[0],l=t[1],o=t[2],i=t[3],a=t[4],r=t[5],c=t[6],s=t[7],d=t[8],u=t[9],h=t[10],m=t[11],f=t[12],p=t[13],v=t[14],g=t[15],M=b*r-l*a,x=b*c-o*a,y=b*s-i*a,_=l*c-o*r,w=l*s-i*r,O=o*s-i*c,j=d*p-u*f,C=d*v-h*f,E=d*g-m*f,k=u*v-h*p,A=u*g-m*p,S=h*g-m*v,n=M*S-x*A+y*k+_*E-w*C+O*j;return n?(n=1/n,e[0]=(r*S-c*A+s*k)*n,e[1]=(o*A-l*S-i*k)*n,e[2]=(p*O-v*w+g*_)*n,e[3]=(h*w-u*O-m*_)*n,e[4]=(c*E-a*S-s*C)*n,e[5]=(b*S-o*E+i*C)*n,e[6]=(v*y-f*O-g*x)*n,e[7]=(d*O-h*y+m*x)*n,e[8]=(a*A-r*E+s*j)*n,e[9]=(l*E-b*A-i*j)*n,e[10]=(f*w-p*y+g*M)*n,e[11]=(u*y-d*w-m*M)*n,e[12]=(r*C-a*k-c*j)*n,e[13]=(b*k-l*C+o*j)*n,e[14]=(p*x-f*_-v*M)*n,e[15]=(d*_-u*x+h*M)*n,e):null}},56508:function(e,t,n){var s=n(36635);e.exports=function(e,t,n,o){var i,a,r,c,l,d,u,h,m,f,p=t[0],g=t[1],v=t[2],b=o[0],j=o[1],y=o[2],_=n[0],w=n[1],O=n[2];return Math.abs(p-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(v-O)<1e-6?s(e):(a=p-_,d=g-w,l=v-O,u=j*(l*=i=1/Math.sqrt(a*a+d*d+l*l))-y*(d*=i),r=y*(a*=i)-b*l,c=b*d-j*a,(i=Math.sqrt(u*u+r*r+c*c))?(u*=i=1/i,r*=i,c*=i):(u=0,r=0,c=0),f=d*c-l*r,m=l*u-a*c,h=a*r-d*u,(i=Math.sqrt(f*f+m*m+h*h))?(f*=i=1/i,m*=i,h*=i):(f=0,m=0,h=0),e[0]=u,e[1]=f,e[2]=a,e[3]=0,e[4]=r,e[5]=m,e[6]=d,e[7]=0,e[8]=c,e[9]=h,e[10]=l,e[11]=0,e[12]=-(u*p+r*g+c*v),e[13]=-(f*p+m*g+h*v),e[14]=-(a*p+d*g+l*v),e[15]=1,e)}},80944:function(e){e.exports=function(e,t,n){var w=t[0],_=t[1],y=t[2],j=t[3],m=t[4],c=t[5],l=t[6],d=t[7],u=t[8],h=t[9],r=t[10],f=t[11],p=t[12],g=t[13],v=t[14],b=t[15],a=n[0],i=n[1],o=n[2],s=n[3];return e[0]=a*w+i*m+o*u+s*p,e[1]=a*_+i*c+o*h+s*g,e[2]=a*y+i*l+o*r+s*v,e[3]=a*j+i*d+o*f+s*b,a=n[4],i=n[5],o=n[6],s=n[7],e[4]=a*w+i*m+o*u+s*p,e[5]=a*_+i*c+o*h+s*g,e[6]=a*y+i*l+o*r+s*v,e[7]=a*j+i*d+o*f+s*b,a=n[8],i=n[9],o=n[10],s=n[11],e[8]=a*w+i*m+o*u+s*p,e[9]=a*_+i*c+o*h+s*g,e[10]=a*y+i*l+o*r+s*v,e[11]=a*j+i*d+o*f+s*b,a=n[12],i=n[13],o=n[14],s=n[15],e[12]=a*w+i*m+o*u+s*p,e[13]=a*_+i*c+o*h+s*g,e[14]=a*y+i*l+o*r+s*v,e[15]=a*j+i*d+o*f+s*b,e}},97688:function(e){e.exports=function(e,t,n,s,o,i,a){var r=1/(t-n),c=1/(s-o),l=1/(i-a);return e[0]=-2*r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*r,e[13]=(o+s)*c,e[14]=(a+i)*l,e[15]=1,e}},51296:function(e){e.exports=function(e,t,n,s,o){var i=1/Math.tan(t/2),a=1/(s-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+s)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*s*a,e[15]=0,e}},63688:function(e){e.exports=function(e,t,n,s){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),r=Math.tan(t.rightDegrees*Math.PI/180),c=2/(a+r),l=2/(o+i);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-r)*c*.5,e[9]=(o-i)*l*.5,e[10]=s/(n-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*n/(n-s),e[15]=0,e}},30016:function(e){e.exports=function(e,t,n,s){var r,c,l,d,u,h,m,f,p,g,v,j,y,_,w,O,x,C,E,k,A,S,M,F,a=s[0],i=s[1],o=s[2],b=Math.sqrt(a*a+i*i+o*o);return Math.abs(b)<1e-6?null:(a*=b=1/b,i*=b,o*=b,c=Math.sin(n),r=1-(M=Math.cos(n)),S=t[0],A=t[1],k=t[2],E=t[3],C=t[4],x=t[5],O=t[6],w=t[7],_=t[8],y=t[9],j=t[10],F=t[11],v=a*a*r+M,g=i*a*r+o*c,p=o*a*r-i*c,f=a*i*r-o*c,m=i*i*r+M,h=o*i*r+a*c,l=a*o*r+i*c,d=i*o*r-a*c,u=o*o*r+M,e[0]=S*v+C*g+_*p,e[1]=A*v+x*g+y*p,e[2]=k*v+O*g+j*p,e[3]=E*v+w*g+F*p,e[4]=S*f+C*m+_*h,e[5]=A*f+x*m+y*h,e[6]=k*f+O*m+j*h,e[7]=E*f+w*m+F*h,e[8]=S*l+C*d+_*u,e[9]=A*l+x*d+y*u,e[10]=k*l+O*d+j*u,e[11]=E*l+w*d+F*u,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},15456:function(e){e.exports=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],r=t[6],c=t[7],l=t[8],d=t[9],u=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+l*s,e[5]=a*o+d*s,e[6]=r*o+u*s,e[7]=c*o+h*s,e[8]=l*o-i*s,e[9]=d*o-a*s,e[10]=u*o-r*s,e[11]=h*o-c*s,e}},64840:function(e){e.exports=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],r=t[2],c=t[3],l=t[8],d=t[9],u=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-l*s,e[1]=a*o-d*s,e[2]=r*o-u*s,e[3]=c*o-h*s,e[8]=i*s+l*o,e[9]=a*s+d*o,e[10]=r*s+u*o,e[11]=c*s+h*o,e}},4192:function(e){e.exports=function(e,t,n){var s=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],r=t[2],c=t[3],l=t[4],d=t[5],u=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+l*s,e[1]=a*o+d*s,e[2]=r*o+u*s,e[3]=c*o+h*s,e[4]=l*o-i*s,e[5]=d*o-a*s,e[6]=u*o-r*s,e[7]=h*o-c*s,e}},68152:function(e){e.exports=function(e,t,n){var s=n[0],o=n[1],i=n[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},89412:function(e){e.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},35176:function(e){e.exports=function(e,t,n){var a,r,c,l,d,u,h,m,f,p,g,v,i=n[0],o=n[1],s=n[2];return t===e?(e[12]=t[0]*i+t[4]*o+t[8]*s+t[12],e[13]=t[1]*i+t[5]*o+t[9]*s+t[13],e[14]=t[2]*i+t[6]*o+t[10]*s+t[14],e[15]=t[3]*i+t[7]*o+t[11]*s+t[15]):(v=t[0],g=t[1],p=t[2],d=t[3],r=t[4],c=t[5],l=t[6],a=t[7],u=t[8],h=t[9],m=t[10],f=t[11],e[0]=v,e[1]=g,e[2]=p,e[3]=d,e[4]=r,e[5]=c,e[6]=l,e[7]=a,e[8]=u,e[9]=h,e[10]=m,e[11]=f,e[12]=v*i+r*o+u*s+t[12],e[13]=g*i+c*o+h*s+t[13],e[14]=p*i+l*o+m*s+t[14],e[15]=d*i+a*o+f*s+t[15]),e}},86520:function(e){e.exports=function(e,t){if(e===t){var n=t[1],s=t[2],o=t[3],i=t[6],a=t[7],r=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=r}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},23352:function(e,t,n){"use strict";var s,a,i=n(42771),m=n(55616),y=n(28624),u=n(55212),w=n(60463),c=n(72160),_=n(33888),o=n(14144),j=n(51160),h=n(58908),O=n(65819),f=n(23464),p=n(63768),g=n(50896),v=n(71920),b=n(47520),l=n(308).nextPow2,d=new w,r=!1;document.body&&(a=document.body.appendChild(document.createElement("div")),a.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(a).fontStretch&&(r=!0),document.body.removeChild(a)),s=function(e){(function(e){return"function"==typeof e&&e._gl&&e.prop&&e.texture&&e.buffer})(e)?(e={regl:e},this.gl=e.regl._gl):this.gl=u(e),this.shader=d.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=e.regl||y({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),d.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(h(e)?e:{})},s.prototype.createShader=function(){var e=this.regl,t=e({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:e.prop("count"),offset:e.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:e.this("sizeBuffer")},width:{offset:0,stride:8,buffer:e.this("sizeBuffer")},char:e.this("charBuffer"),position:e.this("position")},uniforms:{atlasSize:function(e,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(e,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(e,t){return t.atlas.texture},charStep:function(e,t){return t.atlas.step},em:function(e,t){return t.atlas.em},color:e.prop("color"),opacity:e.prop("opacity"),viewport:e.this("viewportArray"),scale:e.this("scale"),align:e.prop("align"),baseline:e.prop("baseline"),translate:e.this("translate"),positionOffset:e.prop("positionOffset")},primitive:"points",viewport:e.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:e,draw:t,atlas:{}}},s.prototype.update=function(e){if(t=this,"string"==typeof e)e={text:e};else if(!e)return;if(null!=(e=m(e,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(e.opacity)?this.opacity=e.opacity.map(function(e){return parseFloat(e)}):this.opacity=parseFloat(e.opacity)),null!=e.viewport&&(this.viewport=j(e.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=e.kerning&&(this.kerning=e.kerning),null!=e.offset&&("number"==typeof e.offset&&(e.offset=[e.offset,0]),this.positionOffset=b(e.offset)),e.direction&&(this.direction=e.direction),e.range&&(this.range=e.range,this.scale=[1/(e.range[2]-e.range[0]),1/(e.range[3]-e.range[1])],this.translate=[-e.range[0],-e.range[1]]),e.scale&&(this.scale=e.scale),e.translate&&(this.translate=e.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||e.font||(e.font=s.baseFontSize+"px sans-serif"),C=!1,H=!1,e.font&&(Array.isArray(e.font)?e.font:[e.font]).forEach(function(e,n){if("string"==typeof e)try{e=i.parse(e)}catch{e=i.parse(s.baseFontSize+"px "+e)}else{var o,c,l=e.style,m=e.weight,p=e.stretch,d=e.variant;e=i.parse(i.stringify(e)),l&&(e.style=l),m&&(e.weight=m),p&&(e.stretch=p),d&&(e.variant=d)}var a=i.stringify({size:s.baseFontSize,family:e.family,stretch:r?e.stretch:void 0,variant:e.variant,weight:e.weight,style:e.style}),u=O(e.size),h=Math.round(u[0]*f(u[1]));h!==t.fontSize[n]&&(H=!0,t.fontSize[n]=h),!(t.font[n]&&a==t.font[n].baseString||(C=!0,t.font[n]=s.fonts[a],t.font[n]))&&(c=e.family.join(", "),o=[e.style],e.style!=e.variant&&o.push(e.variant),e.variant!=e.weight&&o.push(e.weight),r&&e.weight!=e.stretch&&o.push(e.stretch),t.font[n]={baseString:a,family:c,weight:e.weight,stretch:e.stretch,style:e.style,variant:e.variant,width:{},kerning:{},metrics:v(c,{origin:"top",fontSize:s.baseFontSize,fontStyle:o.join(" ")})},s.fonts[a]=t.font[n])}),(C||H)&&this.font.forEach(function(n,s){var a,o=i.stringify({size:t.fontSize[s],family:n.family,stretch:r?n.stretch:void 0,variant:n.variant,weight:n.weight,style:n.style});(t.fontAtlas[s]=t.shader.atlas[o],!t.fontAtlas[s])&&(a=n.metrics,t.shader.atlas[o]=t.fontAtlas[s]={fontString:o,step:2*Math.ceil(t.fontSize[s]*a.bottom*.5),em:t.fontSize[s],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:t.regl.texture()}),null==e.text&&(e.text=t.text)}),"string"==typeof e.text&&e.position&&e.position.length>2){for(F=Array(.5*e.position.length),A=0;A<F.length;A++)F[A]=e.text;e.text=F}if(null!=e.text||C){if(this.textOffsets=[0],Array.isArray(e.text)){this.count=e.text[0].length,this.counts=[this.count];for(u=1;u<e.text.length;u++)this.textOffsets[u]=this.textOffsets[u-1]+e.text[u-1].length,this.count+=e.text[u].length,this.counts.push(e.text[u].length);this.text=e.text.join("")}else this.text=e.text,this.count=this.text.length,this.counts=[this.count];D=[],this.font.forEach(function(e,n){s.atlasContext.font=e.baseString;for(var o,r,c,i=t.fontAtlas[n],a=0;a<t.text.length;a++)if(o=t.text.charAt(a),null==i.ids[o]&&(i.ids[o]=i.chars.length,i.chars.push(o),D.push(o)),null==e.width[o]&&(e.width[o]=s.atlasContext.measureText(o).width/s.baseFontSize,t.kerning)){r=[];for(c in e.width)r.push(c+o,o+c);g(e.kerning,p(e.family,{pairs:r}))}})}if(e.position)if(e.position.length>2){for(var t,n,a,d,u,w,x,C,E,k,A,S,M,F,z,D,N,L,P,H,I,B,V,W,K,X=!e.position[0].length,y=o.mallocFloat(2*this.count),h=0,T=0;h<this.counts.length;h++)if(L=this.counts[h],X)for(z=0;z<L;z++)y[T++]=e.position[2*h],y[T++]=e.position[2*h+1];else for(P=0;P<L;P++)y[T++]=e.position[h][0],y[T++]=e.position[h][1];this.position.call?this.position({type:"float",data:y}):this.position=this.regl.buffer({type:"float",data:y}),o.freeFloat(y)}else this.position.destroy&&this.position.destroy(),this.position={constant:e.position};if(e.text||C){M=o.mallocUint8(this.count),d=o.mallocFloat(2*this.count),this.textWidth=[];for(w=0,a=0;w<this.counts.length;w++){for(var Q=this.counts[w],U=this.font[w]||this.font[0],G=this.fontAtlas[w]||this.fontAtlas[0],R=0;R<Q;R++){if(S=this.text.charAt(a),V=this.text.charAt(a-1),M[a]=G.ids[S],d[2*a]=U.width[S],R){var Y=d[2*a-2],q=d[2*a],$=d[2*a-1]+.5*Y+.5*q;this.kerning&&(N=U.kerning[V+S],N&&($+=.001*N)),d[2*a+1]=$}else d[2*a+1]=.5*d[2*a];a++}this.textWidth.push(d.length?.5*d[2*a-2]+d[2*a-1]:0)}e.align||(e.align=this.align),this.charBuffer({data:M,type:"uint8",usage:"stream"}),this.sizeBuffer({data:d,type:"float",usage:"stream"}),o.freeUint8(M),o.freeFloat(d),D.length&&this.font.forEach(function(e,n){var o=t.fontAtlas[n],i=o.step,u=Math.floor(s.maxAtlasSize/i),a=Math.min(u,o.chars.length),r=Math.ceil(o.chars.length/a),c=l(a*i),d=l(r*i);o.width=c,o.height=d,o.rows=r,o.cols=a,o.em&&o.texture({data:_({canvas:s.atlasCanvas,font:o.fontString,chars:o.chars,shape:[c,d],step:[i,i]})})})}if(e.align&&(this.align=e.align,this.alignOffset=this.textWidth.map(function(e,n){var s=Array.isArray(t.align)?t.align.length>1?t.align[n]:t.align[0]:t.align;if("number"==typeof s)return s;switch(s){case"right":case"end":return-e;case"center":case"centre":case"middle":return.5*-e}return 0})),null==this.baseline&&null==e.baseline&&(e.baseline=0),null!=e.baseline&&(this.baseline=e.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(e,n){var s=(t.font[n]||t.font[0]).metrics,o=0;return o+=.5*s.bottom,-1*(o+="number"==typeof e?e-s.baseline:-s[e])})),null!=e.color)if(e.color||(e.color="transparent"),"string"!=typeof e.color&&isNaN(e.color)){if("number"==typeof e.color[0]&&e.color.length>this.counts.length){B=e.color.length,k=o.mallocUint8(B);for(K=(e.color.subarray||e.color.slice).bind(e.color),x=0;x<B;x+=4)k.set(c(K(x,x+4),"uint8"),x)}else{I=e.color.length,k=o.mallocUint8(4*I);for(E=0;E<I;E++)k.set(c(e.color[E]||0,"uint8"),4*E)}this.color=k}else this.color=c(e.color,"uint8");if(e.position||e.text||e.color||e.baseline||e.align||e.font||e.offset||e.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){W=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0),this.batch=Array(W);for(n=0;n<this.batch.length;n++)this.batch[n]={count:this.counts.length>1?this.counts[n]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[n]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*n,4*n+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[n]:this.opacity,baseline:null!=this.baselineOffset[n]?this.baselineOffset[n]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[n]?this.alignOffset[n]:this.alignOffset[0]:0,atlas:this.fontAtlas[n]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*n,2*n+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},s.prototype.destroy=function(){},s.prototype.kerning=!0,s.prototype.position={constant:new Float32Array(2)},s.prototype.translate=null,s.prototype.scale=null,s.prototype.font=null,s.prototype.text="",s.prototype.positionOffset=[0,0],s.prototype.opacity=1,s.prototype.color=new Uint8Array([0,0,0,255]),s.prototype.alignOffset=[0,0],s.maxAtlasSize=1024,s.atlasCanvas=document.createElement("canvas"),s.atlasContext=s.atlasCanvas.getContext("2d",{alpha:!1}),s.baseFontSize=64,s.fonts={},e.exports=s},55212:function(e,t,n){"use strict";var a=n(55616);function s(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*n.g.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*n.g.innerHeight);else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left,e.canvas.height=e.height||t.bottom-t.top}}function o(e){return"function"==typeof e.getContext&&"width"in e&&"height"in e}function i(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=0,e.style.left=0,e}e.exports=function(e){if(e?"string"==typeof e&&(e={container:e}):e={},(e=o(e)||"string"==typeof(t=e).nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect?{container:e}:function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(e)?{gl:e}:a(e,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(e.pixelRatio=n.g.pixelRatio||1),e.gl)return e.gl;if(e.canvas&&(e.container=e.canvas.parentNode),e.container){if("string"==typeof e.container){var t,r=document.querySelector(e.container);if(!r)throw Error("Element "+e.container+" is not found");e.container=r}o(e.container)?(e.canvas=e.container,e.container=e.canvas.parentNode):e.canvas||(e.canvas=i(),e.container.appendChild(e.canvas),s(e))}else if(!e.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");e.container=document.body||document.documentElement,e.canvas=i(),e.container.appendChild(e.canvas),s(e)}return e.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{e.gl=e.canvas.getContext(t,e.attrs)}catch{}return e.gl}),e.gl}},26444:function(e){e.exports=function(e){"string"==typeof e&&(e=[e]);for(var s=[].slice.call(arguments,1),n=[],t=0;t<e.length-1;t++)n.push(e[t],s[t]||"");return n.push(e[t]),n.join("")}},2304:function(e,t,n){"use strict";var s=n(53664)("%Object.getOwnPropertyDescriptor%",!0);if(s)try{s([],"length")}catch{s=null}e.exports=s},52264:function(e,t,n){"use strict";var o=n(24200),s="function"==typeof n.g.matchMedia?!n.g.matchMedia("(hover: none)").matches:o;e.exports=s},89184:function(e,t,n){"use strict";var s=n(24200);e.exports=s&&function(){var t,e=!1;try{t=Object.defineProperty({},"passive",{get:function(){e=!0}}),window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{e=!1}return e}()},39640:function(e,t,n){"use strict";var s=n(53664)("%Object.defineProperty%",!0),o=function(){if(s)try{return s({},"a",{value:1}),!0}catch{return!1}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return 1!==s([],"length",{value:1}).length}catch{return!0}},e.exports=o},69572:function(e){"use strict";var t={foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof n)}},71080:function(e,t,n){"use strict";var s="undefined"!=typeof Symbol&&Symbol,o=n(89320);e.exports=function(){return"function"==typeof s&&"function"==typeof Symbol&&"symbol"==typeof s("foo")&&"symbol"==typeof Symbol("bar")&&o()}},89320:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var n,s,t={},e=Symbol("test"),o=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(o))return!1;for(e in t[e]=42,t)return!1;return("function"!=typeof Object.keys||0===Object.keys(t).length)&&("function"!=typeof Object.getOwnPropertyNames||0===Object.getOwnPropertyNames(t).length)&&(n=Object.getOwnPropertySymbols(t),1===n.length&&n[0]===e&&!!Object.prototype.propertyIsEnumerable.call(t,e)&&("function"!=typeof Object.getOwnPropertyDescriptor||!(s=Object.getOwnPropertyDescriptor(t,e),42!==s.value||!0!==s.enumerable)))}},46672:function(e,t,n){"use strict";var s=n(89320);e.exports=function(){return s()&&!!Symbol.toStringTag}},92064:function(e,t,n){"use strict";var s=Function.prototype.call,o=Object.prototype.hasOwnProperty,i=n(8844);e.exports=i.call(s,o)},35984:function(e,t){t.read=function(e,t,n,s,o){var i,r,m=8*o-s-1,u=(1<<m)-1,h=u>>1,a=-7,c=n?o-1:0,d=n?-1:1,l=e[t+c];for(c+=d,i=l&(1<<-a)-1,l>>=-a,a+=m;a>0;i=256*i+e[t+c],c+=d,a-=8);for(r=i&(1<<-a)-1,i>>=-a,a+=s;a>0;r=256*r+e[t+c],c+=d,a-=8);if(0===i)i=1-h;else{if(i===u)return r?NaN:1/0*(l?-1:1);r+=Math.pow(2,s),i-=h}return(l?-1:1)*r*Math.pow(2,i-s)},t.write=function(e,t,n,s,o,i){var a,r,c,u=8*i-o-1,h=(1<<u)-1,l=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=s?0:i-1,m=s?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=h?(r=0,a=h):a+l>=1?(r=(t*c-1)*Math.pow(2,o),a+=l):(r=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[n+d]=255&r,d+=m,r/=256,o-=8);for(a=a<<o|r,u+=o;u>0;e[n+d]=255&a,d+=m,a/=256,u-=8);e[n+d-m]|=128*p}},6768:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},91148:function(e,t,n){"use strict";var a=n(46672)(),o=n(99676)("Object.prototype.toString"),s=function(e){return!(a&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},i=function(e){return!!s(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},r=function(){return s(arguments)}();s.isLegacyArguments=i,e.exports=r?s:i},24200:function(e){e.exports=!0},90720:function(e){"use strict";if(i=Function.prototype.toString,t="object"==typeof Reflect&&null!==Reflect&&Reflect.apply,"function"==typeof t&&"function"==typeof Object.defineProperty)try{o=Object.defineProperty({},"length",{get:function(){throw n}}),n={},t(function(){throw 42},null,o)}catch(e){e!==n&&(t=null)}else t=null;var t,n,o,i,l,h=/^\s*class\b/,r=function(e){try{var t=i.call(e);return h.test(t)}catch{return!1}},c=function(e){try{return!r(e)&&(i.call(e),!0)}catch{return!1}},s=Object.prototype.toString,d="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),a=function(){return!1};"object"==typeof document&&(l=document.all,s.call(l)===s.call(document.all)&&(a=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=s.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch{}return!1})),e.exports=t?function(e){if(a(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{t(e,null,o)}catch(e){if(e!==n)return!1}return!r(e)&&c(e)}:function(e){if(a(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(d)return c(e);if(r(e))return!1;var t=s.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&c(e)}},84420:function(e,t,n){"use strict";var s,a=Object.prototype.toString,r=Function.prototype.toString,c=/^\s*(?:function)?\*/,i=n(46672)(),o=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(c.test(r.call(e)))return!0;if(!i)return"[object GeneratorFunction]"===a.call(e);if(!o)return!1;if(void 0===s){var t=function(){if(!i)return!1;try{return Function("return function*() {}")()}catch{}}();s=!!t&&o(t)}return o(e)===s}},96604:function(e){"use strict";e.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(e){"use strict";e.exports=function(e){return e!=e}},1560:function(e,t,n){"use strict";var i=n(57916),a=n(81288),r=n(85992),s=n(57740),c=n(59736),o=i(s(),Number);a(o,{getPolyfill:s,implementation:r,shim:c}),e.exports=o},57740:function(e,t,n){"use strict";var s=n(85992);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:s}},59736:function(e,t,n){"use strict";var s=n(81288),o=n(57740);e.exports=function(){var e=o();return s(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},18400:function(e){"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},58908:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n;return"[object Object]"===t.call(e)&&(null===(n=Object.getPrototypeOf(e))||n===Object.getPrototypeOf({}))}},94576:function(e){"use strict";e.exports=function(e){for(var t,s=e.length,n=0;n<s;n++)if(((t=e.charCodeAt(n))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},53520:function(e){"use strict";e.exports=function(e){return"string"==typeof e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))}},7728:function(e,t,n){"use strict";var a=n(46492),h=n(63436),o=n(99676),d=o("Object.prototype.toString"),c=n(46672)(),s=n(2304),u="undefined"==typeof globalThis?n.g:globalThis,r=h(),m=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},f=o("String.prototype.slice"),l={},i=Object.getPrototypeOf;c&&s&&i&&a(r,function(e){if(t=new u[e],Symbol.toStringTag in t){var t,a,o=i(t),n=s(o,Symbol.toStringTag);n||(a=i(o),n=s(a,Symbol.toStringTag)),l[e]=n.get}}),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c||!(Symbol.toStringTag in e)){var t=f(d(e),8,-1);return m(r,t)>-1}return!!s&&function(e){var t=!1;return a(l,function(n,s){if(!t)try{t=n.call(e)===s}catch{}}),t}(e)}},76244:function(e){"use strict";e.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}},62644:function(e,t,n){"use strict";e.exports=function(e,t){t||(t=e,e=window);var h,i=0,c=0,r=0,n={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function m(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==n.alt,n.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==n.shift,n.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==n.control,n.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==n.meta,n.meta=!!e.metaKey),t}function d(e,o){var a=s.x(o),l=s.y(o);"buttons"in o&&(e=0|o.buttons),(e!==i||a!==c||l!==r||m(o))&&(i=0|e,c=a||0,r=l||0,t&&t(i,c,r,n))}function a(e){d(0,e)}function u(){(i||c||r||n.shift||n.alt||n.meta||n.control)&&(c=r=0,i=0,n.shift=n.alt=n.control=n.meta=!1,t&&t(0,0,0,n))}function o(e){m(e)&&t&&t(i,c,r,n)}function f(e){0===s.buttons(e)?d(0,e):d(i,e)}function p(e){d(i|s.buttons(e),e)}function g(e){d(i&~s.buttons(e),e)}function v(){l||(l=!0,e.addEventListener("mousemove",f),e.addEventListener("mousedown",p),e.addEventListener("mouseup",g),e.addEventListener("mouseleave",a),e.addEventListener("mouseenter",a),e.addEventListener("mouseout",a),e.addEventListener("mouseover",a),e.addEventListener("blur",u),e.addEventListener("keyup",o),e.addEventListener("keydown",o),e.addEventListener("keypress",o),e!==window&&(window.addEventListener("blur",u),window.addEventListener("keyup",o),window.addEventListener("keydown",o),window.addEventListener("keypress",o)))}return v(),h={element:e},Object.defineProperties(h,{enabled:{get:function(){return l},set:function(t){t?v():l&&(l=!1,e.removeEventListener("mousemove",f),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",g),e.removeEventListener("mouseleave",a),e.removeEventListener("mouseenter",a),e.removeEventListener("mouseout",a),e.removeEventListener("mouseover",a),e.removeEventListener("blur",u),e.removeEventListener("keyup",o),e.removeEventListener("keydown",o),e.removeEventListener("keypress",o),e!==window&&(window.removeEventListener("blur",u),window.removeEventListener("keyup",o),window.removeEventListener("keydown",o),window.removeEventListener("keypress",o)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return c},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),h};var s=n(93784)},29128:function(e){var t={left:0,top:0};e.exports=function(e,n,s){n=n||e.currentTarget||e.srcElement,Array.isArray(s)||(s=[0,0]);var o,a=e.clientX||0,r=e.clientY||0,i=(o=n)===window||o===document||o===document.body?t:o.getBoundingClientRect();return s[0]=a-i.left,s[1]=r-i.top,s}},93784:function(e,t){"use strict";function n(e){return e.target||e.srcElement||window}t.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){{if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},t.element=n,t.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=n(e).getBoundingClientRect();return e.clientX-t.left}return 0},t.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=n(e).getBoundingClientRect();return e.clientY-t.top}return 0}},97264:function(e,t,n){"use strict";var s=n(23464);e.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var i=s("ex",e),o=function(e){n&&e.preventDefault();var r=e.deltaX||0,o=e.deltaY||0,a=e.deltaZ||0,s=1;switch(e.deltaMode){case 1:s=i;break;case 2:s=window.innerHeight}if(o*=s,a*=s,(r*=s)||o||a)return t(r,o,a,e)};return e.addEventListener("wheel",o),o}},88324:function(e,t,n){var s;!function(o,i){i[o]=i[o]||function(){"use strict";var e,o,i,r,h=Object.prototype.toString,m="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,s){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==s})}}catch{e=function(e,t,n){return e[t]=n,e}}function s(e,t){i.add(e,t),o||(o=m(i.drain))}function c(e){var t,n=typeof e;return e==null||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function a(){for(var e=0;e<this.chain.length;e++)p(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function p(e,t,n){var s,o;try{!1===t?n.reject(e.msg):(s=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=c(s))?o.call(s,n.resolve,n.reject):n.resolve(s)}catch(e){n.reject(e)}}function l(e){var o,t=this;if(!t.triggered){t.triggered=!0,t.def&&(t=t.def);try{(o=c(e))?s(function(){var s=new u(t);try{o.call(e,function(){l.apply(s,arguments)},function(){n.apply(s,arguments)})}catch(e){n.call(s,e)}}):(t.msg=e,t.state=1,t.chain.length>0&&s(a,t))}catch(e){n.call(new u(t),e)}}}function n(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&s(a,t))}function d(e,t,n,s){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){n(o,e)},s)}(o)}function u(e){this.def=e,this.triggered=!1}function f(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function t(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new f(this);this.then=function(e,n){var o={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),t.chain.push(o),0!==t.state&&s(a,t),o.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){l.call(t,e)},function(e){n.call(t,e)})}catch(e){n.call(t,e)}}return i=function(){var e,t,n;function s(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(o,i){e=new s(o,i),t?t.next=e:n=e,t=e,e=void 0},drain:function(){var e=n;for(n=t=o=void 0;e;)e.fn.call(e.self),e=e.next}}}(),r=e({},"constructor",t,!1),t.prototype=r,e(r,"__NPO__",0,!1),e(t,"resolve",function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),e(t,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),e(t,"all",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,s){if("function"!=typeof n||"function"!=typeof s)throw TypeError("Not a function");var o=e.length,i=Array(o),a=0;d(t,e,function(e,t){i[e]=t,++a===o&&n(i)},s)})}),e(t,"race",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):new t(function(n,s){if("function"!=typeof n||"function"!=typeof s)throw TypeError("Not a function");d(t,e,function(e,t){n(t)},s)})}),t}(),e.exports?e.exports=i[o]:void 0===(s=function(){return i[o]}.call(t,n,t,e))||(e.exports=s)}("Promise",void 0!==n.g?n.g:this)},48816:function(e){var t=Math.PI,o=r(120);function n(e,t,n,s){return["C",e,t,n,s,n,s]}function i(e,t,n,s,o,i){return["C",e/3+2/3*n,t/3+2/3*s,o/3+2/3*n,i/3+2/3*s,o,i]}function a(e,n,i,r,c,l,d,u,h,m){if(m)p=m[0],f=m[1],_=m[2],y=m[3];else{w=s(e,n,-c),e=w.x,n=w.y;var v=(e-(u=(w=s(u,h,-c)).x))/2,b=(n-(h=w.y))/2,x=v*v/(i*i)+b*b/(r*r);x>1&&(i*=x=Math.sqrt(x),r*=x);var E=i*i,C=r*r,O=(l==d?-1:1)*Math.sqrt(Math.abs((E*C-E*b*b-C*v*v)/(E*b*b+C*v*v)));O==1/0&&(O=1);var j,w,k,A,_=O*i*b/r+(e+u)/2,y=O*-r*v/i+(n+h)/2,p=Math.asin(((n-y)/r).toFixed(9)),f=Math.asin(((h-y)/r).toFixed(9));(p=e<_?t-p:p)<0&&(p=2*t+p),(f=u<_?t-f:f)<0&&(f=2*t+f),d&&p>f&&(p-=2*t),!d&&f>p&&(f-=2*t)}if(Math.abs(f-p)>o){var T=f,z=u,D=h;f=p+o*(d&&f>p?1:-1),k=a(u=_+i*Math.cos(f),h=y+r*Math.sin(f),i,r,c,0,d,z,D,[f,T,_,y])}var M=Math.tan((f-p)/4),F=4/3*i*M,S=4/3*r*M,g=[2*e-(e+F*Math.sin(p)),2*n-(n-S*Math.cos(p)),u+F*Math.sin(f),h-S*Math.cos(f),u,h];if(m)return g;k&&(g=g.concat(k));for(j=0;j<g.length;)A=s(g[j],g[j+1],c),g[j++]=A.x,g[j++]=A.y;return g}function s(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}function r(e){return e*(t/180)}e.exports=function(e){for(var t,d,u,h,f,m=[],v=0,g=0,j=0,b=0,c=null,l=null,o=0,s=0,p=0,y=e.length;p<y;p++){switch(t=e[p],f=t[0],f){case"M":j=t[1],b=t[2];break;case"A":(t=a(o,s,t[1],t[2],r(t[3]),t[4],t[5],t[6],t[7])).unshift("C"),t.length>7&&(m.push(t.splice(0,7)),t.unshift("C"));break;case"S":u=o,h=s,"C"!=d&&"S"!=d||(u+=u-v,h+=h-g),t=["C",u,h,t[1],t[2],t[3],t[4]];break;case"T":"Q"==d||"T"==d?(c=2*o-c,l=2*s-l):(c=o,l=s),t=i(o,s,c,l,t[1],t[2]);break;case"Q":c=t[1],l=t[2],t=i(o,s,t[1],t[2],t[3],t[4]);break;case"L":t=n(o,s,t[1],t[2]);break;case"H":t=n(o,s,t[1],s);break;case"V":t=n(o,s,o,t[1]);break;case"Z":t=n(o,s,j,b)}d=f,o=t[t.length-2],s=t[t.length-1],t.length>4?(v=t[t.length-4],g=t[t.length-3]):(v=o,g=s),m.push(t)}return m}},50896:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;if(t=new String("abc"),t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var t,s,n={},e=0;e<10;e++)n["_"+String.fromCharCode(e)]=e;return"0123456789"===Object.getOwnPropertyNames(n).map(function(e){return n[e]}).join("")&&(s={},"abcdefghijklmnopqrst".split("").forEach(function(e){s[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join(""))}catch{return!1}}()?Object.assign:function(e){for(var i,a,r,d,c=function(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(d in i=Object(arguments[l]))n.call(i,d)&&(c[d]=i[d]);if(t){r=t(i);for(a=0;a<r.length;a++)s.call(i,r[a])&&(c[r[a]]=i[r[a]])}}return c}},76835:function(e){"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:e===n||!!t(e)&&!!t(n)}},39896:function(e,t,n){"use strict";var i=n(81288),a=n(57916),r=n(76835),s=n(66148),c=n(16408),o=a(s(),Object);i(o,{getPolyfill:s,implementation:r,shim:c}),e.exports=o},66148:function(e,t,n){"use strict";var s=n(76835);e.exports=function(){return"function"==typeof Object.is?Object.is:s}},16408:function(e,t,n){"use strict";var s=n(66148),o=n(81288);e.exports=function(){var e=s();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},32764:function(e,t,n){"use strict";if(!Object.keys){var a,s=Object.prototype.hasOwnProperty,c=Object.prototype.toString,l=n(97344),r=Object.prototype.propertyIsEnumerable,d=!r.call({toString:null},"toString"),u=r.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&s.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{i(window[e])}catch{return!0}}catch{return!0}return!1}();a=function(e){var t,a,r,h,f,p,g=null!==e&&"object"==typeof e,v="[object Function]"===c.call(e),b=l(e),j=g&&"[object String]"===c.call(e),n=[];if(!g&&!v&&!b)throw new TypeError("Object.keys called on a non-object");if(p=u&&v,j&&e.length>0&&!s.call(e,0))for(a=0;a<e.length;++a)n.push(String(a));if(b&&e.length>0)for(r=0;r<e.length;++r)n.push(String(r));else for(h in e)p&&"prototype"===h||!s.call(e,h)||n.push(String(h));if(d)for(f=function(e){if("undefined"==typeof window||!m)return i(e);try{return i(e)}catch{return!1}}(e),t=0;t<o.length;++t)f&&"constructor"===o[t]||!s.call(e,o[t])||n.push(o[t]);return n}}e.exports=a},41820:function(e,t,n){"use strict";var a=Array.prototype.slice,r=n(97344),o=Object.keys,s=o?function(e){return o(e)}:n(32764),i=Object.keys;s.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(r(e)?a.call(e):e)})}else Object.keys=s;return Object.keys||s},e.exports=s},97344:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var s=t.call(e),n="[object Arguments]"===s;return n||(n="[object Array]"!==s&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},32868:function(e){"use strict";function n(e,t){if("string"!=typeof e)return[e];n=[e],"string"==typeof t||Array.isArray(t)?t={brackets:t}:t||(t={});var n,o,i=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],s=t.escape||"___",a=!!t.flat;return i.forEach(function(e){var o=new RegExp(["\\",e[0],"[^\\",e[0],"\\",e[1],"]*\\",e[1]].join("")),t=[];function i(o){var r=n.push(o.slice(e[0].length,-e[1].length))-1;return t.push(r),s+r+s}n.forEach(function(e,t){for(var s,a=0;e!=s;)if(s=e,e=e.replace(o,i),a++>1e4)throw Error("References have circular dependency. Please, check them.");n[t]=e}),t=t.reverse(),n=n.map(function(n){return t.forEach(function(t){n=n.replace(new RegExp("(\\"+s+t+"\\"+s+")","g"),e[0]+"$1"+e[1])}),n})}),o=new RegExp("\\"+s+"([0-9]+)\\"+s),a?n:function e(t,n){for(var i,a=[],r=0;i=o.exec(t);){if(r++>1e4)throw Error("Circular references in parenthesis");a.push(t.slice(0,i.index)),a.push(e(n[i[1]],n)),t=t.slice(i.index+i[0].length)}return a.push(t),a}(n[0],n)}function s(e,t){if(t&&t.flat){var s,i,a,o=t&&t.escape||"___",n=e[0];if(!n)return"";for(i=new RegExp("\\"+o+"([0-9]+)\\"+o),a=0;n!=s;){if(a++>1e4)throw Error("Circular references in "+e);s=n,n=n.replace(i,r)}return n}return e.reduce(function e(t,n){return Array.isArray(n)&&(n=n.reduce(e,"")),t+n},"");function r(t,n){if(null==e[n])throw Error("Reference "+n+"is undefined");return e[n]}}function t(e,t){return Array.isArray(e)?s(e,t):n(e,t)}t.parse=n,t.stringify=s,e.exports=t},51160:function(e,t,n){"use strict";var s=n(55616);e.exports=function(e){var t;return arguments.length>1&&(e=arguments),"string"==typeof e?e=e.split(/\s/).map(parseFloat):"number"==typeof e&&(e=[e]),e.length&&"number"==typeof e[0]?t=1===e.length?{width:e[0],height:e[0],x:0,y:0}:2===e.length?{width:e[0],height:e[1],x:0,y:0}:{x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(t={x:(e=s(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:e.top||0},null==e.width?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,null==e.height?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height),t}},21984:function(e){e.exports=function(e){var o=[];return e.replace(n,function(e,n,i){var a=n.toLowerCase();for(i=function(e){var t=e.match(s);return t?t.map(Number):[]}(i),"m"==a&&i.length>2&&(o.push([n].concat(i.splice(0,2))),a="l",n="m"==n?"l":"L");;){if(i.length==t[a])return i.unshift(n),o.push(i);if(i.length<t[a])throw new Error("malformed path data");o.push([n].concat(i.splice(0,t[a])))}}),o};var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi,s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(e){e.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-+]*\s*(.*)/)[1]||"",t}},41984:function(e,t,n){var s=n(4168);(function(){var t,n,o,i,a,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:s!=null&&s.hrtime?(e.exports=function(){return(n()-a)/1e6},o=s.hrtime,i=(n=function(){var e;return 1e9*(e=o())[0]+e[1]})(),r=1e9*s.uptime(),a=i-r):Date.now?(e.exports=function(){return Date.now()-t},t=Date.now()):(e.exports=function(){return(new Date).getTime()-t},t=(new Date).getTime())}).call(this)},55616:function(e){"use strict";e.exports=function(e,t,s){var o,i,a,r,l,d,u,c={};if("string"==typeof t&&(t=n(t)),Array.isArray(t)){u={};for(i=0;i<t.length;i++)u[t[i]]=!0;t=u}for(o in t)t[o]=n(t[o]);r={};for(o in t)if(a=t[o],Array.isArray(a)){for(i=0;i<a.length;i++)if(l=a[i],s&&(r[l]=!0),l in e){if(c[o]=e[l],s)for(d=i;d<a.length;d++)r[a[d]]=!0;break}}else o in e&&(t[o]&&(c[o]=e[o]),s&&(r[o]=!0));if(s)for(o in e)r[o]||(c[o]=e[o]);return c};var t={};function n(e){return t[e]?t[e]:("string"==typeof e&&(e=t[e]=e.split(/\s*,\s*|\s+/)),e)}},61456:function(e){e.exports=function(e,t,n,s){var h=e[0],i=e[1],a=!1;void 0===n&&(n=0),void 0===s&&(s=t.length);for(var d=s-n,o=0,r=d-1;o<d;r=o++){var l=t[o+n][0],c=t[o+n][1],m=t[r+n][0],u=t[r+n][1];c>i!=u>i&&h<(m-l)*(i-c)/(u-c)+l&&(a=!a)}return a}},14756:function(e,t,n){var s,u=n(7688),h=n(28648),l=n(72200),d=n(11403),r=n(82368),c=n(17792),o=!1,i=h();function a(e,t,n){var o=s.segments(e),i=s.segments(t),a=n(s.combine(o,i));return s.polygon(a)}s={buildLog:function(e){return!0===e?o=u():!1===e&&(o=!1),!1!==o&&o.list},epsilon:function(e){return i.epsilon(e)},segments:function(e){var t=l(!0,i,o);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:l(!1,i,o).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:r.union(e.combined,o),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:r.intersect(e.combined,o),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:r.difference(e.combined,o),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:r.differenceRev(e.combined,o),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:r.xor(e.combined,o),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:d(e.segments,i,o),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(s,e)},polygonToGeoJSON:function(e){return c.fromPolygon(s,i,e)},union:function(e,t){return a(e,t,s.selectUnion)},intersect:function(e,t){return a(e,t,s.selectIntersect)},difference:function(e,t){return a(e,t,s.selectDifference)},differenceRev:function(e,t){return a(e,t,s.selectDifferenceRev)},xor:function(e,t){return a(e,t,s.selectXor)}},"object"==typeof window&&(window.PolyBool=s),e.exports=s},7688:function(e){e.exports=function(){var t,s=0,n=!1;function e(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}return t={list:[],segmentId:function(){return s++},checkIntersection:function(t,n){return e("check",{seg1:t,seg2:n})},segmentChop:function(t,n){return e("div_seg",{seg:t,pt:n}),e("chop",{seg:t,pt:n})},statusRemove:function(t){return e("pop_seg",{seg:t})},segmentUpdate:function(t){return e("seg_update",{seg:t})},segmentNew:function(t,n){return e("new_seg",{seg:t,primary:n})},segmentRemove:function(t){return e("rem_seg",{seg:t})},tempStatus:function(t,n,s){return e("temp_status",{seg:t,above:n,below:s})},rewind:function(t){return e("rewind",{seg:t})},status:function(t,n,s){return e("status",{seg:t,above:n,below:s})},vert:function(s){return s===n?t:(n=s,e("vert",{x:s}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),e("log",{txt:t})},reset:function(){return e("reset")},selected:function(t){return e("selected",{segs:t})},chainStart:function(t){return e("chain_start",{seg:t})},chainRemoveHead:function(t,n){return e("chain_rem_head",{index:t,pt:n})},chainRemoveTail:function(t,n){return e("chain_rem_tail",{index:t,pt:n})},chainNew:function(t,n){return e("chain_new",{pt1:t,pt2:n})},chainMatch:function(t){return e("chain_match",{index:t})},chainClose:function(t){return e("chain_close",{index:t})},chainAddHead:function(t,n){return e("chain_add_head",{index:t,pt:n})},chainAddTail:function(t,n){return e("chain_add_tail",{index:t,pt:n})},chainConnect:function(t,n){return e("chain_con",{index1:t,index2:n})},chainReverse:function(t){return e("chain_rev",{index:t})},chainJoin:function(t,n){return e("chain_join",{index1:t,index2:n})},done:function(){return e("done")}}}},28648:function(e){e.exports=function(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,s){var o=n[0],i=n[1],a=s[0],r=s[1],c=t[0];return(a-o)*(t[1]-i)-(r-i)*(c-o)>=-e},pointBetween:function(t,n,s){var r=t[1]-n[1],o=s[0]-n[0],c=t[0]-n[0],i=s[1]-n[1],a=c*o+r*i;return!(a<e||a-(o*o+i*i)>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,s){var o=t[0]-n[0],i=t[1]-n[1],a=n[0]-s[0],r=n[1]-s[1];return Math.abs(o*r-a*i)<e},linesIntersect:function(t,n,s,o){var r=n[0]-t[0],d=n[1]-t[1],m=o[0]-s[0],f=o[1]-s[1],l=r*f-d*m;if(Math.abs(l)<e)return!1;var u=t[0]-s[0],h=t[1]-s[1],i=(m*h-f*u)/l,a=(r*h-d*u)/l,c={alongA:0,alongB:0,pt:[t[0]+i*r,t[1]+i*d]};return c.alongA=i<=-e?-2:i<e?-1:i-1<=-e?0:i-1<e?1:2,c.alongB=a<=-e?-2:a<e?-1:a-1<=-e?0:a-1<e?1:2,c},pointInsideRegion:function(t,n){for(var s,o,d=t[0],c=t[1],l=n[n.length-1][0],a=n[n.length-1][1],r=!1,i=0;i<n.length;i++)o=n[i][0],s=n[i][1],s-c>e!=a-c>e&&(l-o)*(c-s)/(a-s)+o-d>e&&(r=!r),l=o,a=s;return r}};return t}},17792:function(e){var t={toPolygon:function(e,t){function o(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function o(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}for(var n=o(t[0]),s=1;s<t.length;s++)n=e.selectDifference(e.combine(n,o(t[s])));return n}if("Polygon"===t.type)return e.polygon(o(t.coordinates));if("MultiPolygon"===t.type){for(var n=e.segments({inverted:!1,regions:[]}),s=0;s<t.coordinates.length;s++)n=e.selectUnion(e.combine(n,o(t.coordinates[s])));return e.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function r(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function d(e){return{region:e,children:[]}}n=e.polygon(e.segments(n));var s,o,a,i=d(null);function c(e,t){for(var s,o,n=0;n<e.children.length;n++)if(r(t,(s=e.children[n]).region))return void c(s,t);o=d(t);for(n=0;n<e.children.length;n++)r((s=e.children[n]).region,t)&&(o.children.push(s),e.children.splice(n,1),n--);e.children.push(o)}for(s=0;s<n.regions.length;s++)a=n.regions[s],a.length<3||c(i,a);function l(e,t){for(var s,i,c=0,a=e[e.length-1][0],r=e[e.length-1][1],n=[],o=0;o<e.length;o++)i=e[o][0],s=e[o][1],n.push([i,s]),c+=s*a-i*r,a=i,r=s;return c<0!==t&&n.reverse(),n.push([n[0][0],n[0][1]]),n}o=[];function u(e){var t,n=[l(e.region,!1)];o.push(n);for(t=0;t<e.children.length;t++)n.push(h(e.children[t]))}function h(e){for(var t=0;t<e.children.length;t++)u(e.children[t]);return l(e.region,!0)}for(s=0;s<i.children.length;s++)u(i.children[s]);return o.length<=0?{type:"Polygon",coordinates:[]}:1==o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};e.exports=t},72200:function(e,t,n){var s=n(48088);e.exports=function(e,t,n){function r(e,t,s){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:s.myFill.above,below:s.myFill.below},otherFill:null}}var i=s.create();function c(e,n){i.insertBefore(e,function(s){return r=e.isStart,l=e.pt,c=n,o=s.isStart,i=s.pt,a=s.other.pt,(0!==(d=t.pointsCompare(l,i))?d:t.pointsSame(c,a)?0:r!==o?r?1:-1:t.pointAboveOrOnLine(c,o?i:a,o?a:i)?1:-1)<0;var o,i,a,r,c,l,d})}function a(e,t){var n=function(e,t){var n=s.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return c(n,e.end),n}(e,t);return function(e,t,n){var o=s.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=o,c(o,e.pt)}(n,e,t),n}function o(e,t){var s=r(t,e.seg.end,e.seg);return function(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,c(e.other,e.pt)}(e,t),a(s,e.primary)}function l(a,r){f=s.create();function _(e){return f.findTransition(function(n){var s,o,i,a,r,c;return i=e,a=n.ev,r=i.seg.start,c=i.seg.end,s=a.seg.start,o=a.seg.end,(t.pointsCollinear(r,s,o)?t.pointsCollinear(c,s,o)||t.pointAboveOrOnLine(c,s,o)?1:-1:t.pointAboveOrOnLine(r,s,o)?1:-1)>0})}function b(e,s){var i,d,u,f,p,h=e.seg,m=s.seg,c=h.start,a=h.end,l=m.start,r=m.end;if(n&&n.checkIntersection(h,m),i=t.linesIntersect(c,a,l,r),!1===i){if(!t.pointsCollinear(c,a,l))return!1;if(t.pointsSame(c,r)||t.pointsSame(a,l))return!1;if(d=t.pointsSame(c,l),u=t.pointsSame(a,r),d&&u)return s;if(p=!d&&t.pointBetween(c,l,r),f=!u&&t.pointBetween(a,l,r),d)return f?o(s,a):o(e,r),s;p&&(u||(f?o(s,a):o(e,r)),o(s,c))}else 0===i.alongA&&(-1===i.alongB?o(e,l):0===i.alongB?o(e,i.pt):1===i.alongB&&o(e,r)),0===i.alongB&&(-1===i.alongA?o(s,c):0===i.alongA?o(s,i.pt):1===i.alongA&&o(s,a));return!1}for(p=[];!i.isEmpty();){if(c=i.getHead(),n&&n.vert(c.pt[0]),c.isStart){n&&n.segmentNew(c.seg,c.primary);var c,d,h,f,p,g,v,j,m=_(c),u=m.before?m.before.ev:null,l=m.after?m.after.ev:null;function y(){if(u){var e=b(c,u);if(e)return e}return!!l&&b(c,l)}if(n&&n.tempStatus(c.seg,!!u&&u.seg,!!l&&l.seg),h=y(),h&&(e?(v=null===c.seg.myFill.below||c.seg.myFill.above!==c.seg.myFill.below)&&(h.seg.myFill.above=!h.seg.myFill.above):h.seg.otherFill=c.seg.myFill,n&&n.segmentUpdate(h.seg),c.other.remove(),c.remove()),i.getHead()!==c){n&&n.rewind(c.seg);continue}e?(v=null===c.seg.myFill.below||c.seg.myFill.above!==c.seg.myFill.below,c.seg.myFill.below=l?l.seg.myFill.above:a,c.seg.myFill.above=v?!c.seg.myFill.below:c.seg.myFill.below):null===c.seg.otherFill&&(g=l?c.primary===l.primary?l.seg.otherFill.above:l.seg.myFill.above:c.primary?r:a,c.seg.otherFill={above:g,below:g}),n&&n.status(c.seg,!!u&&u.seg,!!l&&l.seg),c.other.status=m.insert(s.node({ev:c}))}else{if(d=c.status,null===d)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");(f.exists(d.prev)&&f.exists(d.next)&&b(d.prev.ev,d.next.ev),n&&n.statusRemove(d.ev.seg),d.remove(),!c.primary)&&(j=c.seg.myFill,c.seg.myFill=c.seg.otherFill,c.seg.otherFill=j),p.push(c.seg)}i.getHead().remove()}return n&&n.done(),p}return e?{addRegion:function(e){for(var o,i,c,l,s=e[e.length-1],r=0;r<e.length;r++)o=s,s=e[r],i=t.pointsCompare(o,s),0!==i&&a((c=i<0?o:s,l=i<0?s:o,{id:n?n.segmentId():-1,start:c,end:l,myFill:{above:null,below:null},otherFill:null}),!0)},calculate:function(e){return l(e,!1)}}:{calculate:function(e,t,n,s){return e.forEach(function(e){a(r(e.start,e.end,e),!0)}),n.forEach(function(e){a(r(e.start,e.end,e),!1)}),l(t,s)}}}},48088:function(e){e.exports={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var o=e.root,s=e.root.next;null!==s;){if(n(s))return t.prev=s.prev,t.next=s,s.prev.next=t,void(s.prev=t);o=s,s=s.next}o.next=t,t.prev=o,t.next=null},findTransition:function(t){for(var s=e.root,n=e.root.next;null!==n&&!t(n);)s=n,n=n.next;return{before:s===e.root?null:s,after:n,insert:function(e){return e.prev=s,e.next=n,s.next=e,null!==n&&(n.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},11403:function(e){e.exports=function(e,t,n){var s=[],o=[];return e.forEach(function(e){if(f=e.start,h=e.end,t.pointsSame(f,h))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(e);for(var a={index:0,matches_head:!1,matches_pt1:!1},g={index:0,matches_head:!1,matches_pt1:!1},l=a,u=0;u<s.length;u++)if(y=(i=s[u])[0],_=(i[1],i[i.length-1]),i[i.length-2],t.pointsSame(y,f)){if(b(u,!0,!0))break}else if(t.pointsSame(y,h)){if(b(u,!0,!1))break}else if(t.pointsSame(_,f)){if(b(u,!1,!0))break}else if(t.pointsSame(_,h)&&b(u,!1,!1))break;if(l===a)return s.push([f,h]),void(n&&n.chainNew(f,h));if(l===g){n&&n.chainMatch(a.index);var r,c,h,f,y,_,w,O=a.index,d=a.matches_pt1?h:f,m=a.matches_head,i=s[O],v=m?i[0]:i[i.length-1],x=m?i[1]:i[i.length-2],C=m?i[i.length-1]:i[0],E=m?i[i.length-2]:i[1];return t.pointsCollinear(x,v,d)&&(m?(n&&n.chainRemoveHead(a.index,d),i.shift()):(n&&n.chainRemoveTail(a.index,d),i.pop()),v=x),t.pointsSame(C,d)?(s.splice(O,1),t.pointsCollinear(E,C,v)&&(m?(n&&n.chainRemoveTail(a.index,v),i.pop()):(n&&n.chainRemoveHead(a.index,v),i.shift())),n&&n.chainClose(a.index),void o.push(i)):void(m?(n&&n.chainAddHead(a.index,d),i.unshift(d)):(n&&n.chainAddTail(a.index,d),i.push(d)))}r=a.index,c=g.index,n&&n.chainConnect(r,c),w=s[r].length<s[c].length,a.matches_head?g.matches_head?w?(j(r),p(r,c)):(j(c),p(c,r)):p(c,r):g.matches_head?p(r,c):w?(j(r),p(c,r)):(j(c),p(r,c))}function b(e,t,n){return l.index=e,l.matches_head=t,l.matches_pt1=n,l===a?(l=g,!1):(l=null,!0)}function j(e){n&&n.chainReverse(e),s[e].reverse()}function p(e,o){var i=s[e],a=s[o],r=i[i.length-1],l=i[i.length-2],c=a[0],d=a[1];t.pointsCollinear(l,r,c)&&(n&&n.chainRemoveTail(e,r),i.pop(),r=l),t.pointsCollinear(r,c,d)&&(n&&n.chainRemoveHead(o,c),a.shift()),n&&n.chainJoin(e,o),s[e]=i.concat(a),s.splice(o,1)}}),o}},82368:function(e){function t(e,t,n){var s=[];return e.forEach(function(e){var o=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[o]&&s.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[o],below:2===t[o]},otherFill:null})}),n&&n.selected(s),s}var n={union:function(e,n){return t(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],n)},intersect:function(e,n){return t(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],n)},difference:function(e,n){return t(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],n)},differenceRev:function(e,n){return t(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],n)},xor:function(e,n){return t(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],n)}};e.exports=n},9696:function(e,t,n){"use strict";var i=n(29936).Transform,a=n(55619);function s(){i.call(this,{readableObjectMode:!0})}function o(e,t,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,t&&(this.code=t),n&&(this.statusCode=n)}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,a(s.prototype),t.gS=function(e,t,n){for(var o=t,s=0;s<n.length;)if(e[o++]!==n[s++])return!1;return!0},t.wR=function(e,t){var s=[],n=0;if(t&&"hex"===t)for(;n<e.length;)s.push(parseInt(e.slice(n,n+2),16)),n+=2;else for(;n<e.length;n++)s.push(255&e.charCodeAt(n));return s},t.Bz=function(e,t){return e[t]|e[t+1]<<8},t.eW=function(e,t){return e[t+1]|e[t]<<8},t.st=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|16777216*e[t+3]},t.eI=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|16777216*e[t]},o.prototype=Object.create(Error.prototype),o.prototype.constructor=o},11688:function(e){"use strict";function n(e,t){var n=new Error(e);return n.code=t,n}function s(e){try{return decodeURIComponent(escape(e))}catch{return e}}function t(e,t,s){this.input=e.subarray(t,s),this.start=t;var o=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==o&&"MM\0*"!==o)throw n("invalid TIFF signature","EBADDATA");this.big_endian="M"===o[0]}t.prototype.each=function(e){this.aborted=!1;var t,n=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:n}];this.ifds_to_read.length>0&&!this.aborted;)t=this.ifds_to_read.shift(),t.offset&&this.scan_ifd(t.id,t.offset,e)},t.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw n("unexpected EOF","EBADDATA");return this.big_endian?256*t[e]+t[e+1]:t[e]+256*t[e+1]},t.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw n("unexpected EOF","EBADDATA");return this.big_endian?16777216*t[e]+65536*t[e+1]+256*t[e+2]+t[e+3]:t[e]+256*t[e+1]+65536*t[e+2]+16777216*t[e+3]},t.prototype.is_subifd_link=function(e,t){return 0===e&&34665===t||0===e&&34853===t||34665===e&&40965===t},t.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},t.prototype.exif_format_read=function(e,t){var n;switch(e){case 1:case 2:return this.input[t];case 6:return(n=this.input[t])|33554430*(128&n);case 3:return this.read_uint16(t);case 8:return(n=this.read_uint16(t))|131070*(32768&n);case 4:return this.read_uint32(t);case 9:return 0|this.read_uint32(t);default:return null}},t.prototype.scan_ifd=function(e,t,o){v=this.read_uint16(t),t+=2;for(c=0;c<v;c++){var c,h,v,l=this.read_uint16(t),a=this.read_uint16(t+2),d=this.read_uint32(t+4),f=this.exif_format_length(a),u=d*f,r=u<=4?t+8:this.read_uint32(t+8),m=!1;if(r+u>this.input.length)throw n("unexpected EOF","EBADDATA");for(var i=[],p=r,g=0;g<d;g++,p+=f){if(h=this.exif_format_read(a,p),null===h){i=null;break}i.push(h)}if(Array.isArray(i)&&2===a&&(i=s(String.fromCharCode.apply(null,i)))&&"\0"===i[i.length-1]&&(i=i.slice(0,-1)),this.is_subifd_link(e,l)&&Array.isArray(i)&&Number.isInteger(i[0])&&i[0]>0&&(this.ifds_to_read.push({id:l,offset:i[0]}),m=!0),!1===o({is_big_endian:this.big_endian,ifd:e,tag:l,format:a,count:d,entry_offset:t+this.start,data_length:u,data_offset:r+this.start,value:i,is_subifd_link:m}))return void(this.aborted=!0);t+=12}0===e&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},e.exports.ExifParser=t,e.exports.get_orientation=function(e){var n=0;try{return new t(e,0,e.length).each(function(e){if(0===e.ifd&&274===e.tag&&Array.isArray(e.value))return n=e.value[0],!1}),n}catch{return-1}}},44600:function(e,t,n){"use strict";var s=n(9696).eW,i=n(9696).eI;function o(e,t){if(e.length<4+t)return null;var n=i(e,t);return e.length<n+t||n<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+n),end:t+n}}function r(e,t){for(var n,s=0;;){if(n=o(e,s),!n)break;switch(n.boxtype){case"ispe":t.sizes.push({width:i(n.data,4),height:i(n.data,8)});break;case"irot":t.transforms.push({type:"irot",value:3&n.data[0]});break;case"imir":t.transforms.push({type:"imir",value:1&n.data[0]})}s=n.end}}function a(e,t,n){for(var s=0,o=0;o<n;o++)s=256*s+(e[t+o]||0);return s}function c(e,t){for(var d,u,o=e[4]>>4&15,i=15&e[4],r=e[5]>>4&15,p=s(e,6),n=8,l=0;l<p;l++){var h=s(e,n),m=s(e,n+=2),f=a(e,n+=2,r),c=s(e,n+=r);(n+=2,0===m&&1===c)&&(d=a(e,n,o),u=a(e,n+o,i),t.item_loc[h]={length:u,offset:d+f}),n+=c*(o+i)}}function l(e,t){for(var n,d=s(e,4),a=6,r=0;r<d;r++){if(n=o(e,a),!n)break;if("infe"===n.boxtype){for(var l=s(n.data,4),c="",i=8;i<n.data.length&&n.data[i];i++)c+=String.fromCharCode(n.data[i]);t.item_inf[c]=l}a=n.end}}function d(e,t){for(var n,s=0;;){if(n=o(e,s),!n)break;"ipco"===n.boxtype&&r(n.data,t),s=n.end}}e.exports.unbox=o,e.exports.readSizeFromMeta=function(e){if(t={sizes:[],transforms:[],item_inf:{},item_loc:{}},function(e,t){for(var n,s=4;;){if(n=o(e,s),!n)break;"iprp"===n.boxtype&&d(n.data,t),"iloc"===n.boxtype&&c(n.data,t),"iinf"===n.boxtype&&l(n.data,t),s=n.end}}(e,t),t.sizes.length){var t,s,i,a,r,u=(s=(r=t.sizes).reduce(function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?e:t}),i=r.reduce(function(e,t){return e.height>t.height||e.height===t.height&&e.width>t.width?e:t}),s.width>i.height||s.width===i.height&&s.height>i.width?s:i),n=1;return t.transforms.forEach(function(e){var s,t={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},o={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===e.type&&(n=0===e.value?o[n]:t[n=t[n=o[n]]]),"irot"===e.type)for(s=0;s<e.value;s++)n=t[n]}),a=null,t.item_inf.Exif&&(a=t.item_loc[t.item_inf.Exif]),{width:u.width,height:u.height,orientation:t.transforms.length?n:null,variants:t.sizes,exif_location:a}}},e.exports.getMimeType=function(e){var s,n=String.fromCharCode.apply(null,e.slice(0,4)),t={};t[n]=!0;for(s=8;s<e.length;s+=4)t[String.fromCharCode.apply(null,e.slice(s,s+4))]=!0;if(t.mif1||t.msf1||t.miaf)return"avif"===n||"avis"===n||"avio"===n?{type:"avif",mime:"image/avif"}:"heic"===n||"heix"===n?{type:"heic",mime:"image/heic"}:"hevc"===n||"hevx"===n?{type:"heic",mime:"image/heic-sequence"}:t.avif||t.avis?{type:"avif",mime:"image/avif"}:t.heic||t.heix||t.hevc||t.hevx||t.heis?t.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(e,t,n){"use strict";var o=n(9696).wR,i=n(9696).gS,a=n(9696).eI,s=n(44600),r=n(11688),c=o("ftyp");e.exports=function(e){if(i(e,4,c)&&(d=s.unbox(e,0),d&&(l=s.getMimeType(d.data),l))){for(h=d.end;;){if(n=s.unbox(e,h),!n)break;if(h=n.end,"mdat"===n.boxtype)return;if("meta"===n.boxtype){u=n.data;break}}if(u&&(t=s.readSizeFromMeta(u),t)){if(o={width:t.width,height:t.height,type:l.type,mime:l.mime,wUnits:"px",hUnits:"px"},t.variants.length>1&&(o.variants=t.variants),t.orientation&&(o.orientation=t.orientation),t.exif_location&&t.exif_location.offset+t.exif_location.length<=e.length){var t,n,o,l,d,u,h,f=a(e,t.exif_location.offset),p=e.slice(t.exif_location.offset+f+4,t.exif_location.offset+t.exif_location.length),m=r.get_orientation(p);m>0&&(o.orientation=m)}return o}}}},38728:function(e,t,n){"use strict";var o=n(9696).wR,i=n(9696).gS,s=n(9696).Bz,a=o("BM");e.exports=function(e){if(!(e.length<26)&&i(e,0,a))return{width:s(e,18),height:s(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(e,t,n){"use strict";var s=n(9696).wR,o=n(9696).gS,i=n(9696).Bz,a=s("GIF87a"),r=s("GIF89a");e.exports=function(e){if(!(e.length<10)&&(o(e,0,a)||o(e,0,r)))return{width:i(e,6),height:i(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(e,t,n){"use strict";var s=n(9696).Bz;e.exports=function(e){var l=s(e,0),d=s(e,2),a=s(e,4);if(0===l&&1===d&&a){for(var r=[],t={width:0,height:0},n=0;n<a;n++){var o=e[6+16*n]||256,i=e[6+16*n+1]||256,c={width:o,height:i};r.push(c),(o>t.width||i>t.height)&&(t=c)}return{width:t.width,height:t.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(e,t,n){"use strict";var s=n(9696).eW,o=n(9696).wR,i=n(9696).gS,a=n(11688),r=o("Exif\0\0");e.exports=function(e){if(!(e.length<2)&&255===e[0]&&216===e[1]&&255===e[2])for(var t,o,c,l,n=2;;){for(;;){if(e.length-n<2)return;if(255===e[n++])break}for(t=e[n++];255===t;)t=e[n++];if(208<=t&&t<=217||1===t)o=0;else{if(!(192<=t&&t<=254))return;if(e.length-n<2)return;o=s(e,n)-2,n+=2}if(217===t||218===t)return;if(225===t&&o>=10&&i(e,n,r)&&(c=a.get_orientation(e.slice(n+6,n+o))),o>=5&&192<=t&&t<=207&&196!==t&&200!==t&&204!==t){if(e.length-n<o)return;return l={width:s(e,n+3),height:s(e,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"},c>0&&(l.orientation=c),l}n+=o}}},37276:function(e,t,n){"use strict";var s=n(9696).wR,o=n(9696).gS,i=n(9696).eI,a=s(`PNG

`),r=s("IHDR");e.exports=function(e){if(!(e.length<24)&&o(e,0,a)&&o(e,12,r))return{width:i(e,16),height:i(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(e,t,n){"use strict";var o=n(9696).wR,i=n(9696).gS,s=n(9696).eI,a=o("8BPS\0");e.exports=function(e){if(!(e.length<22)&&i(e,0,a))return{width:s(e,18),height:s(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(e){"use strict";function n(e){return"number"==typeof e&&isFinite(e)&&e>0}var c=/<[-_.:a-zA-Z0-9][^>]*>/,o=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,i=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,s=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function t(e){return s.test(e)?e.match(s)[0]:"px"}e.exports=function(e){if(function(e){var n,t=0,s=e.length;for(239===e[0]&&187===e[1]&&191===e[2]&&(t=3);t<s&&(32===(n=e[t])||9===n||13===n||10===n);)t++;return t!==s&&60===e[t]}(e)){for(m="",h=0;h<e.length;h++)m+=String.fromCharCode(e[h]);if(f=(m.match(c)||[""])[0],o.test(f)){var s=function(e){var t=e.match(i),n=e.match(a),s=e.match(r);return{width:t&&(t[1]||t[2]),height:n&&(n[1]||n[2]),viewbox:s&&(s[1]||s[2])}}(f),d=parseFloat(s.width),u=parseFloat(s.height);if(s.width&&s.height){if(!n(d)||!n(u))return;return{width:d,height:u,type:"svg",mime:"image/svg+xml",wUnits:t(s.width),hUnits:t(s.height)}}var h,m,f,v,b=(s.viewbox||"").split(" "),l={width:b[2],height:b[3]},p=parseFloat(l.width),g=parseFloat(l.height);if(n(p)&&n(g)&&t(l.width)===t(l.height)){if(v=p/g,s.width){if(!n(d))return;return{width:d,height:d/v,type:"svg",mime:"image/svg+xml",wUnits:t(s.width),hUnits:t(s.width)}}if(s.height){if(!n(u))return;return{width:u*v,height:u,type:"svg",mime:"image/svg+xml",wUnits:t(s.height),hUnits:t(s.height)}}return{width:p,height:g,type:"svg",mime:"image/svg+xml",wUnits:t(l.width),hUnits:t(l.height)}}}}}},98792:function(e,t,n){"use strict";var i=n(9696).wR,a=n(9696).gS,u=n(9696).Bz,h=n(9696).eW,m=n(9696).st,c=n(9696).eI,l=i("II*\0"),d=i("MM\0*");function s(e,t,n){return n?h(e,t):u(e,t)}function o(e,t,n){return n?c(e,t):m(e,t)}function r(e,t,n){var i=s(e,t+2,n);return 1!==o(e,t+4,n)||3!==i&&4!==i?null:3===i?s(e,t+8,n):o(e,t+8,n)}e.exports=function(e){if(!(e.length<8)&&(a(e,0,l)||a(e,0,d))){var t,n,c,u,h,f,i=77===e[0],m=o(e,4,i)-8;if(!(m<0)&&(t=m+8,!(e.length-t<2)&&(c=12*s(e,t+0,i),!(c<=0||(t+=2,e.length-t<c))))){for(n=0;n<c;n+=12)256===(f=s(e,t+n,i))?u=r(e,t+n,i):257===f&&(h=r(e,t+n,i));return u&&h?{width:u,height:h,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}},20704:function(e,t,n){"use strict";var o=n(9696).wR,i=n(9696).gS,a=n(9696).Bz,s=n(9696).st,r=n(11688),c=o("RIFF"),l=o("WEBP");function d(e,t){if(157===e[t+3]&&1===e[t+4]&&42===e[t+5])return{width:16383&a(e,t+6),height:16383&a(e,t+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function u(e,t){if(47===e[t]){var n=s(e,t+1);return{width:1+(16383&n),height:1+(n>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function h(e,t){return{width:1+(e[t+6]<<16|e[t+5]<<8|e[t+4]),height:1+(e[t+9]<<t|e[t+8]<<8|e[t+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}e.exports=function(e){if(!(e.length<16)&&(i(e,0,c)||i(e,8,l))){var o,a,t=12,n=null,m=0,f=s(e,4)+8;if(!(f>e.length)){for(;t+8<f;)0!==e[t]?(a=String.fromCharCode.apply(null,e.slice(t,t+4)),o=s(e,t+4),"VP8 "===a&&o>=10?n=n||d(e,t+8):"VP8L"===a&&o>=9?n=n||u(e,t+8):"VP8X"===a&&o>=10?n=n||h(e,t+8):"EXIF"===a&&(m=r.get_orientation(e.slice(t+8,t+8+o)),t=1/0),t+=8+o):t++;if(n)return m>0&&(n.orientation=m),n}}}},87480:function(e,t,n){"use strict";e.exports={avif:n(40528),bmp:n(38728),gif:n(5588),ico:n(41924),jpeg:n(87968),png:n(37276),psd:n(90328),svg:n(16024),tiff:n(98792),webp:n(20704)}},19480:function(e,t,n){"use strict";var s=n(87480);e.exports=function(e){return function(e){for(var n,o=Object.keys(s),t=0;t<o.length;t++)if(n=s[o[t]](e),n)return n;return null}(e)},e.exports.parsers=s},4168:function(e){t=e.exports={};function d(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function u(e){if(o===setTimeout)return setTimeout(e,0);if((o===d||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch{try{return o.call(null,e,0)}catch{return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:d}catch{o=d}try{s="function"==typeof clearTimeout?clearTimeout:l}catch{s=l}}();var t,s,o,a,n=[],r=!1,c=-1;function f(){r&&a&&(r=!1,a.length?n=a.concat(n):c=-1,n.length&&h())}function h(){if(!r){var e,t=u(f);r=!0;for(e=n.length;e;){for(a=n,n=[];++c<e;)a&&a[c].run();c=-1,e=n.length}a=null,r=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch{try{return s.call(null,e)}catch{return s.call(this,e)}}}(t)}}function m(e,t){this.fun=e,this.array=t}function i(){}t.nextTick=function(e){var t,s=new Array(arguments.length-1);if(arguments.length>1)for(t=1;t<arguments.length;t++)s[t-1]=arguments[t];n.push(new m(e,s)),1!==n.length||r||u(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=i,t.addListener=i,t.once=i,t.off=i,t.removeListener=i,t.removeAllListeners=i,t.emit=i,t.prependListener=i,t.prependOnceListener=i,t.listeners=function(){return[]},t.binding=function(){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},3951:function(e,t,n){for(var h=n(41984),s="undefined"==typeof window?n.g:window,l=["moz","webkit"],a="AnimationFrame",i=s["request"+a],c=s["cancel"+a]||s["cancelRequest"+a],r=0;!i&&r<l.length;r++)i=s[l[r]+"Request"+a],c=s[l[r]+"Cancel"+a]||s[l[r]+"CancelRequest"+a];if(!i||!c){var d=0,u=0,o=[];i=function(e){if(0===o.length){var t=h(),n=Math.max(0,16.666666666666668-(t-d));d=n+t,setTimeout(function(){var e,t=o.slice(0);o.length=0;for(e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(d)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return o.push({handle:++u,callback:e,cancelled:!1}),u},c=function(e){for(var t=0;t<o.length;t++)o[t].handle===e&&(o[t].cancelled=!0)}}e.exports=function(e){return i.call(s,e)},e.exports.cancel=function(){c.apply(s,arguments)},e.exports.polyfill=function(e){e||(e=s),e.requestAnimationFrame=i,e.cancelAnimationFrame=c}},24544:function(e,t,n){"use strict";var o,l=n(76752),c=n(72160),u=n(45223),h=n(55616),a=n(50896),r=n(47520),i=n(37816),d=i.float32,s=i.fract32;e.exports=function(e,t){if("function"==typeof e?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),!(e=t.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,f,p,g,v,O,m=e._gl,x={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},n=[];return p=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),i=e.buffer({usage:"static",type:"float",data:o}),j(t),O=e({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{color:{buffer:p,offset:function(e,t){return 4*t.offset},divisor:1},position:{buffer:f,offset:function(e,t){return 8*t.offset},divisor:1},positionFract:{buffer:v,offset:function(e,t){return 8*t.offset},divisor:1},error:{buffer:g,offset:function(e,t){return 16*t.offset},divisor:1},direction:{buffer:i,stride:24,offset:0},lineOffset:{buffer:i,stride:24,offset:8},capOffset:{buffer:i,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:o.length}),a(b,{update:j,draw:_,destroy:y,regl:e,gl:m,canvas:m.canvas,groups:n}),b;function b(e){e?j(e):null===e&&y(),_()}function _(t){if("number"==typeof t)return w(t);t&&!Array.isArray(t)&&(t=[t]),e._refresh(),n.forEach(function(e,n){e&&(t&&(t[n]?e.draw=!0:e.draw=!1),e.draw?w(n):e.draw=!0)})}function w(e){"number"==typeof e&&(e=n[e]),e!=null&&e&&e.count&&e.color&&e.opacity&&e.positions&&e.positions.length>1&&(e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height],O(e),e.after&&e.after(e))}function j(e){if(e&&(null!=e.length?"number"==typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]),t=0,o=0,b.groups=n=e.map(function(e,i){var d=n[i];return e?("function"==typeof e?e={after:e}:"number"==typeof e[0]&&(e={positions:e}),e=h(e,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),d||(n[i]=d={id:i,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},e=a({},x,e)),u(d,e,[{lineWidth:function(e){return.5*+e},capSize:function(e){return.5*+e},opacity:parseFloat,errors:function(e){return e=r(e),o+=e.length,e},positions:function(e,n){return e=r(e,"float64"),n.count=Math.floor(e.length/2),n.bounds=l(e,2),n.offset=t,t+=n.count,e}},{color:function(e,t){if(n=t.count,e||(e="transparent"),!Array.isArray(e)||"number"==typeof e[0]){i=e,e=Array(n);for(s=0;s<n;s++)e[s]=i}if(e.length<n)throw Error("Not enough colors");for(var n,s,i,r,a=new Uint8Array(4*n),o=0;o<n;o++)r=c(e[o],"uint8"),a.set(r,4*o);return a},range:function(e,t){var o=t.bounds;return e||(e=o),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=s(t.scale),t.translateFract=s(t.translate),e},viewport:function(e){var t;return Array.isArray(e)?t={x:e[0],y:e[1],width:e[2]-e[0],height:e[3]-e[1]}:e?(t={x:e.x||e.left||0,y:e.y||e.top||0},e.right?t.width=e.right-t.x:t.width=e.w||e.width||0,e.bottom?t.height=e.bottom-t.y:t.height=e.h||e.height||0):t={x:0,y:0,width:m.drawingBufferWidth,height:m.drawingBufferHeight},t}}]),d):d}),t||o)){var t,o,y,O,i=n.reduce(function(e,t){return e+(t?t.count:0)},0),j=new Float64Array(2*i),_=new Uint8Array(4*i),w=new Float32Array(4*i);n.forEach(function(e){if(e){var s=e.positions,o=e.count,n=e.offset,i=e.color,a=e.errors;o&&(_.set(i,4*n),w.set(a,4*n),j.set(s,2*n))}}),y=d(j),f(y),O=s(j,y),v(O),p(_),g(w)}}function y(){f.destroy(),v.destroy(),p.destroy(),g.destroy(),i.destroy()}},o=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(e,t,n){"use strict";var o=n(72160),g=n(76752),i=n(50896),m=n(55616),d=n(47520),r=n(28912),u=n(71152),c=n(37816),h=c.float32,a=c.fract32,f=n(60463),l=n(51160),p=n(10272);function s(e,t){if(!(this instanceof s))return new s(e,t);if("function"==typeof e?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),!(e=t.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=s.shaders.has(e)?s.shaders.get(e):s.shaders.set(e,s.createShaders(e)).get(e),this.update(t)}e.exports=s,s.dashMult=2,s.maxPatternLength=256,s.precisionThreshold=3e6,s.maxPoints=1e4,s.maxLines=2048,s.shaders=new f,s.createShaders=function(e){var s,n=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),t={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:function(e,t){return"round"===t.join?2:1},miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]},depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(e,t){return!t.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},o=e(i({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:n,divisor:0,stride:8,offset:0},lineTop:{buffer:n,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},t));try{s=e(i({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:n,divisor:0,stride:8,offset:0},lineTop:{buffer:n,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},t))}catch{s=o}return{fill:e({primitive:"triangle",elements:function(e,t){return t.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:t.blend,depth:{enable:!1},scissor:t.scissor,stencil:t.stencil,viewport:t.viewport}),rect:o,miter:s}},s.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},s.prototype.render=function(){for(var n,e=[],t=arguments.length;t--;)e[t]=arguments[t];e.length&&(n=this).update.apply(n,e),this.draw()},s.prototype.draw=function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(t.length?t:this.passes).forEach(function(t){var o;if(t&&Array.isArray(t))return(o=e).draw.apply(o,t);"number"==typeof t&&(t=e.passes[t]),t&&t.count>1&&t.opacity&&(e.regl._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&e.shaders.fill(t),t.thickness&&(t.scale[0]*t.viewport.width>s.precisionThreshold||t.scale[1]*t.viewport.height>s.precisionThreshold||"rect"===t.join||!t.join&&(t.thickness<=2||t.count>=s.maxPoints)?e.shaders.rect(t):e.shaders.miter(t)))}),this},s.prototype.update=function(e){if(v=this,e){null!=e.length?"number"==typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var t,n,f,v,b,c=this.regl,j=this.gl;if(e.forEach(function(e,t){if(n=v.passes[t],void 0!==e)if(null!==e){{if("number"==typeof e[0]&&(e={positions:e}),e=m(e,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),n||(v.passes[t]=n={id:t,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:c.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},e=i({},s.defaults,e)),null!=e.thickness&&(n.thickness=parseFloat(e.thickness)),null!=e.opacity&&(n.opacity=parseFloat(e.opacity)),null!=e.miterLimit&&(n.miterLimit=parseFloat(e.miterLimit)),null!=e.overlay&&(n.overlay=!!e.overlay,t<s.maxLines&&(n.depth=2*(s.maxLines-1-t%s.maxLines)/s.maxLines-1)),null!=e.join&&(n.join=e.join),null!=e.hole&&(n.hole=e.hole),null!=e.fill&&(n.fill=e.fill?o(e.fill,"uint8"):null),null!=e.viewport&&(n.viewport=l(e.viewport)),n.viewport||(n.viewport=l([j.drawingBufferWidth,j.drawingBufferHeight])),null!=e.close&&(n.close=e.close),null===e.positions&&(e.positions=[]),e.positions){if(e.positions.x&&e.positions.y){q=e.positions.x,Z=e.positions.y,f=n.count=Math.max(q.length,Z.length),_=new Float64Array(2*f);for(k=0;k<f;k++)_[2*k]=q[k],_[2*k+1]=Z[k]}else _=d(e.positions,"float64"),f=n.count=Math.floor(_.length/2);if(le=n.bounds=g(_,2),n.fill){for(var n,f,b,y,_,O,k,S,M,z,D,L,R,H,B,V,$,W,K,q,G,X,Z,J,le,N=[],x={},U=0,A=0,ce=0,me=n.count,ie,se,ne,re,te,ae;A<me;A++)D=_[2*A],z=_[2*A+1],isNaN(D)||isNaN(z)||D==null||z==null?(D=_[2*U],z=_[2*U+1],x[A]=U):U=A,N[ce++]=D,N[ce++]=z;if(e.splitNull){n.count-1 in x||(x[n.count]=n.count-1);var w=Object.keys(x).map(Number).sort(function(e,t){return e-t}),E=[],T=0,C=null!=n.hole?n.hole[0]:null;C!=null&&(ie=p(w,function(e){return e>=C}),(w=w.slice(0,ie)).push(C));for(se=function(e){var s=N.slice(2*T,2*w[e]).concat(C?N.slice(2*C):[]),o=(n.hole||[]).map(function(t){return t-C+(w[e]-T)}),t=r(s,o),t=t.map(function(t){return t+T+(t+T<w[e]?0:C-w[e])});E.push.apply(E,t),T=w[e]+1},V=0;V<w.length;V++)se(V);for(S=0,J=E.length;S<J;S++)null!=x[E[S]]&&(E[S]=x[E[S]]);n.triangles=E}else{for(var I=r(N,n.hole||[]),P=0,fe=I.length;P<fe;P++)null!=x[I[P]]&&(I[P]=x[I[P]]);n.triangles=I}}y=new Float64Array(_),u(y,2,le),b=new Float64Array(2*f+6),n.close?_[0]===_[2*f-2]&&_[1]===_[2*f-1]?(b[0]=y[2*f-4],b[1]=y[2*f-3]):(b[0]=y[2*f-2],b[1]=y[2*f-1]):(b[0]=y[0],b[1]=y[1]),b.set(y,2),n.close?_[0]===_[2*f-2]&&_[1]===_[2*f-1]?(b[2*f+2]=y[2],b[2*f+3]=y[3],n.count-=1):(b[2*f+2]=y[0],b[2*f+3]=y[1],b[2*f+4]=y[2],b[2*f+5]=y[3]):(b[2*f+2]=y[2*f-2],b[2*f+3]=y[2*f-1],b[2*f+4]=y[2*f-2],b[2*f+5]=y[2*f-1]),G=h(b),n.positionBuffer(G),ne=a(b,G),n.positionFractBuffer(ne)}if(e.range?n.range=e.range:n.range||(n.range=n.bounds),(e.range||e.positions)&&n.count){var F=n.bounds,he=F[2]-F[0],ue=F[3]-F[1],Q=n.range[2]-n.range[0],Y=n.range[3]-n.range[1];n.scale=[he/Q,ue/Y],n.translate=[-n.range[0]/Q+F[0]/Q||0,-n.range[1]/Y+F[1]/Y||0],n.scaleFract=a(n.scale),n.translateFract=a(n.translate)}if(e.dashes){if(M=0,!e.dashes||e.dashes.length<2)M=1,B=new Uint8Array([255,255,255,255,255,255,255,255]);else{M=0;for(K=0;K<e.dashes.length;++K)M+=e.dashes[K];B=new Uint8Array(M*s.dashMult);for(var de=0,ee=255,oe=0;oe<2;oe++)for(W=0;W<e.dashes.length;++W){for(X=0,re=e.dashes[W]*s.dashMult*.5;X<re;++X)B[de++]=ee;ee^=255}}n.dashLength=M,n.dashTexture({channels:1,data:B,width:B.length,height:1,mag:"linear",min:"linear"},0,0)}if(e.color){if(R=n.count,O=e.color,O||(O="transparent"),L=new Uint8Array(4*R+4),Array.isArray(O)&&"number"!=typeof O[0]){for(H=0;H<R;H++)te=o(O[H],"uint8"),L.set(te,4*H);L.set(o(O[0],"uint8"),4*R)}else for(ae=o(O,"uint8"),$=0;$<R+1;$++)L.set(ae,4*$);n.colorBuffer({usage:"dynamic",type:"uint8",data:L})}}}else v.passes[t]=null}),e.length<this.passes.length){for(f=e.length;f<this.passes.length;f++)n=this.passes[f],n&&(n.colorBuffer.destroy(),n.positionBuffer.destroy(),n.dashTexture.destroy());this.passes.length=e.length}for(b=[],t=0;t<this.passes.length;t++)null!==this.passes[t]&&b.push(this.passes[t]);return this.passes=b,this}},s.prototype.destroy=function(){return this.passes.forEach(function(e){e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(e,t,n){"use strict";function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(n=e==null?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"],n!=null){var n,o,a,r,c,i=[],s=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=c.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return i}}(e,t)||d(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var l,j=n(72160),g=n(76752),p=n(3808),h=n(3108),o=n(50896),i=n(26444),u=n(55616),m=n(45223),f=n(47520),c=n(96604),a=n(37816),v=n(51160),b=s;function s(e,t){if(n=this,!(this instanceof s))return new s(e,t);"function"==typeof e?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t);var n,a,r,l,u,h=(e=t.regl)._gl,d=[];this.tooManyColors=c,l=e.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),o(this,{regl:e,gl:h,groups:[],markerCache:[null],markerTextures:[null],palette:d,paletteIds:{},paletteTexture:l,maxColors:255,maxSize:100,canvas:h.canvas}),this.update(t),u={uniforms:{constPointSize:!!t.constPointSize,opacity:e.prop("opacity"),paletteSize:function(){return[n.tooManyColors?0:255,l.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:l},attributes:{x:function(e,t){return t.xAttr||{buffer:t.positionBuffer,stride:8,offset:0}},y:function(e,t){return t.yAttr||{buffer:t.positionBuffer,stride:8,offset:4}},xFract:function(e,t){return t.xAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:0}},yFract:function(e,t){return t.yAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:4}},size:function(e,t){return t.size.length?{buffer:t.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*t.size/n.maxSize)]}},borderSize:function(e,t){return t.borderSize.length?{buffer:t.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*t.borderSize/n.maxSize)]}},colorId:function(e,t){return t.color.length?{buffer:t.colorBuffer,stride:n.tooManyColors?8:4,offset:0}:{constant:n.tooManyColors?d.slice(4*t.color,4*t.color+4):[t.color]}},borderColorId:function(e,t){return t.borderColor.length?{buffer:t.colorBuffer,stride:n.tooManyColors?8:4,offset:n.tooManyColors?4:2}:{constant:n.tooManyColors?d.slice(4*t.borderColor,4*t.borderColor+4):[t.borderColor]}},isActive:function(e,t){return!0===t.activation?{constant:[1]}:t.activation?t.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},a=o({},u),a.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),a.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=e(a),r=o({},u),r.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),r.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),c&&(r.frag=r.frag.replace("smoothstep","smoothStep"),a.frag=a.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(r)}s.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},s.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},s.prototype.draw=function(){for(var t,o,i=this,s=arguments.length,e=new Array(s),n=0;n<s;n++)e[n]=arguments[n];if(o=this.groups,1===e.length&&Array.isArray(e[0])&&(null===e[0][0]||Array.isArray(e[0][0]))&&(e=e[0]),this.regl._refresh(),e.length)for(t=0;t<e.length;t++)this.drawItem(t,e[t]);else o.forEach(function(e,t){i.drawItem(t)});return this},s.prototype.drawItem=function(e,t){var s,o,i,a=this.groups,n=a[e];if("number"==typeof t&&(e=t,n=a[t],t=null),n&&n.count&&n.opacity){n.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,n,t));for(o=[],s=1;s<n.activation.length;s++)n.activation[s]&&(!0===n.activation[s]||n.activation[s].data.length)&&o.push.apply(o,function(e){if(Array.isArray(e))return r(e)}(i=this.getMarkerDrawOptions(s,n,t))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||d(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());o.length&&this.drawMarker(o)}},s.prototype.getMarkerDrawOptions=function(e,t,n){var a,r,c,d,s=t.range,g=t.tree,p=t.viewport,i=t.activation,f=t.selectionBuffer,b=t.count;if(this.regl,!g)return n?[o({},t,{markerTexture:this.markerTextures[e],activation:i[e],count:n.length,elements:n,offset:0})]:[o({},t,{markerTexture:this.markerTextures[e],activation:i[e],offset:0})];if(d=[],a=g.range(s,{lod:!0,px:[(s[2]-s[0])/p.width,(s[3]-s[1])/p.height]}),n){for(var u=i[e].data,m=new Uint8Array(b),l=0;l<n.length;l++)c=n[l],m[c]=u?u[c]:1;f.subdata(m)}for(r=a.length;r--;){var v=y(a[r],2),h=v[0],j=v[1];d.push(o({},t,{markerTexture:this.markerTextures[e],activation:n?f:i[e],offset:h,count:j-h}))}return d},s.prototype.update=function(){for(var i=this,d=arguments.length,n=new Array(d),c=0;c<d;c++)n[c]=arguments[c];if(n.length){1===n.length&&Array.isArray(n[0])&&(n=n[0]);var l=this.groups,p=this.gl,e=this.regl,b=this.maxSize,r=this.maxColors,t=this.palette;this.groups=l=n.map(function(n,c){if(_=l[c],void 0===n)return _;if(null===n?n={positions:null}:"function"==typeof n?n={ondraw:n}:"number"==typeof n[0]&&(n={positions:n}),null===(n=u(n,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(n.positions=[]),null!=n.tooManyColors&&(i.tooManyColors=n.tooManyColors),_||(l[c]=_={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:e.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:e.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:e.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:e.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:e.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},n=o({},s.defaults,n)),n.positions&&!("marker"in n)&&(n.marker=_.marker,delete _.marker),n.marker&&!("positions"in n)&&(n.positions=_.positions,delete _.positions),A=0,S=0,m(_,n,[{snap:!0,size:function(e){return e==null&&(e=s.defaults.size),A+=e&&e.length?1:0,e},borderSize:function(e){return e==null&&(e=s.defaults.borderSize),A+=e&&e.length?1:0,e},opacity:parseFloat,color:function(e){return e==null&&(e=s.defaults.color),e=i.updateColor(e),S++,e},borderColor:function(e){return e==null&&(e=s.defaults.borderColor),e=i.updateColor(e),S++,e},bounds:function(e,t,n){return"range"in n||(n.range=null),e},positions:function(t,n,s){var i,r,c,l,o=n.snap,m=n.positionBuffer,d=n.positionFractBuffer,u=n.selectionBuffer;return t.x||t.y?(t.x.length?n.xAttr={buffer:e.buffer(t.x),offset:0,stride:4,count:t.x.length}:n.xAttr={buffer:t.x.buffer,offset:4*t.x.offset||0,stride:4*(t.x.stride||1),count:t.x.count},t.y.length?n.yAttr={buffer:e.buffer(t.y),offset:0,stride:4,count:t.y.length}:n.yAttr={buffer:t.y.buffer,offset:4*t.y.offset||0,stride:4*(t.y.stride||1),count:t.y.count},n.count=Math.max(n.xAttr.count,n.yAttr.count),t):(t=f(t,"float64"),i=n.count=Math.floor(t.length/2),c=n.bounds=i?g(t,2):null,(s.range||n.range||(delete n.range,s.range=c),s.marker||n.marker||(delete n.marker,s.marker=null),o&&(!0===o||i>o)?n.tree=h(t,{bounds:c}):o&&o.length&&(n.tree=o),n.tree)&&(l={primitive:"points",usage:"static",data:n.tree,type:"uint32"},n.elements?n.elements(l):n.elements=e.elements(l)),r=a.float32(t),m({data:r,usage:"dynamic"}),d({data:a.fract32(t,r),usage:"dynamic"}),u({data:new Uint8Array(i),type:"uint8",usage:"stream"}),t)}},{marker:function(t,n){if(a=n.activation,a.forEach(function(e){return e&&e.destroy&&e.destroy()}),a.length=0,t&&"number"!=typeof t[0]){for(var o,a,l,d,r=[],c=0,u=Math.min(t.length,n.count);c<u;c++)l=i.addMarker(t[c]),r[l]||(r[l]=new Uint8Array(n.count)),r[l][c]=1;for(o=0;o<r.length;o++)r[o]&&(d={data:r[o],type:"uint8",usage:"static"},a[o]?a[o](d):a[o]=e.buffer(d),a[o].data=r[o])}else a[i.addMarker(t)]=!0;return t},range:function(e,t){var s=t.bounds;if(s)return e||(e=s),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=a.fract(t.scale),t.translateFract=a.fract(t.translate),e},viewport:function(e){return v(e||[p.drawingBufferWidth,p.drawingBufferHeight])}}]),A){var j,y,_,w,C,E,A,S,z=_,N=z.count,M=z.size,k=z.borderSize,R=z.sizeBuffer,D=new Uint8Array(2*N);if(M.length||k.length)for(w=0;w<N;w++)D[2*w]=Math.round(255*(null==M[w]?M:M[w])/b),D[2*w+1]=Math.round(255*(null==k[w]?k:k[w])/b);R({data:D,usage:"dynamic"})}if(S){var d,T=_,F=T.count,O=T.color,x=T.borderColor,L=T.colorBuffer;if(i.tooManyColors){if(O.length||x.length){d=new Uint8Array(8*F);for(j=0;j<F;j++)E=O[j],d[8*j]=t[4*E],d[8*j+1]=t[4*E+1],d[8*j+2]=t[4*E+2],d[8*j+3]=t[4*E+3],C=x[j],d[8*j+4]=t[4*C],d[8*j+5]=t[4*C+1],d[8*j+6]=t[4*C+2],d[8*j+7]=t[4*C+3]}}else if(O.length||x.length){d=new Uint8Array(4*F+2);for(y=0;y<F;y++)null!=O[y]&&(d[4*y]=O[y]%r,d[4*y+1]=Math.floor(O[y]/r)),null!=x[y]&&(d[4*y+2]=x[y]%r,d[4*y+3]=Math.floor(x[y]/r))}L({data:d||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return _})}},s.prototype.addMarker=function(e){var t,n,a,r,o=this.markerTextures,c=this.regl,i=this.markerCache,s=e==null?0:i.indexOf(e);if(s>=0)return s;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)t=e;else{t=new Uint8Array(e.length);for(n=0,a=e.length;n<a;n++)t[n]=255*e[n]}return r=Math.floor(Math.sqrt(t.length)),s=o.length,i.push(e),o.push(c.texture({channels:1,data:t,radius:r,mag:"linear",min:"linear"})),s},s.prototype.updateColor=function(e){var t,s,o,i,a,r,c,l,d=this.paletteIds,n=this.palette,u=this.maxColors;if(Array.isArray(e)||(e=[e]),i=[],"number"==typeof e[0]){if(l=[],Array.isArray(e))for(a=0;a<e.length;a+=4)l.push(e.slice(a,a+4));else for(o=0;o<e.length;o+=4)l.push(e.subarray(o,o+4));e=l}for(r=0;r<e.length;r++)t=e[r],t=j(t,"uint8"),c=p(t,!1),null==d[c]&&(s=n.length,d[c]=Math.floor(s/4),n[s]=t[0],n[s+1]=t[1],n[s+2]=t[2],n[s+3]=t[3]),i[r]=d[c];return!this.tooManyColors&&n.length>4*u&&(this.tooManyColors=!0),this.updatePalette(n),1===i.length?i[0]:i},s.prototype.updatePalette=function(e){if(!this.tooManyColors){var o,t=this.maxColors,s=this.paletteTexture,n=Math.ceil(.25*e.length/t);if(n>1)for(o=.25*(e=e.slice()).length%t;o<n*t;o++)e.push(0,0,0,0);s.height<n&&s.resize(t,n),s.subimage({width:Math.min(.25*e.length,t),height:n,data:e},0,0)}},s.prototype.destroy=function(){return this.groups.forEach(function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach(function(e){return e&&e.destroy&&e.destroy()}),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(e){return e&&e.destroy&&e.destroy()}),this},l=n(50896),e.exports=function(e,t){var n=new b(e,t),s=n.render.bind(n);return l(s,{render:s,update:n.update.bind(n),draw:n.draw.bind(n),destroy:n.destroy.bind(n),regl:n.regl,gl:n.gl,canvas:n.gl.canvas,groups:n.groups,markers:n.markerCache,palette:n.palette}),s}},55795:function(e,t,n){"use strict";var c=n(38540),u=n(55616),l=n(76752),r=n(3951),m=n(67752),i=n(51160),d=n(47520);function s(e,t){if(!(this instanceof s))return new s(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=c(e),this.canvas=this.scatter.canvas}function h(e,t,n){return(null!=e.id?e.id:e)<<16|(255&t)<<8|255&n}function o(e,t,n){var i,a,r,c,s=e[t],o=e[n];return s.length>2?(s[0],s[2],i=s[1],a=s[3]):s.length?(i=s[0],a=s[1]):(s.x,i=s.y,s.x,s.width,a=s.y+s.height),o.length>2?(r=o[0],c=o[2],o[1],o[3]):o.length?(r=o[0],c=o[1]):(r=o.x,o.y,c=o.x+o.width,o.y,o.height),[r,i,c,a]}function a(e){if("number"==typeof e)return[e,e,e,e];if(2===e.length)return[e[0],e[1],e[0],e[1]];var t=i(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}e.exports=s,s.prototype.render=function(){for(var s,e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.length&&(s=this).update.apply(s,t),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=r(function(){e.draw(),e.dirty=!0,e.planned=null})):(this.draw(),this.dirty=!0,r(function(){e.dirty=!1})),this)},s.prototype.update=function(){for(e=[],s=arguments.length;s--;)e[s]=arguments[s];if(e.length){for(t=0;t<e.length;t++)this.updateItem(t,e[t]);this.traces=this.traces.filter(Boolean);for(var e,t,s,r,i=[],a=0,n=0;n<this.traces.length;n++){for(var c=this.traces[n],l=this.traces[n].passes,o=0;o<l.length;o++)i.push(this.passes[l[o]]);c.passOffset=a,a+=c.passes.length}return(r=this.scatter).update.apply(r,i),this}},s.prototype.updateItem=function(e,t){if(x=this.regl,null===t)return this.traces[e]=null,this;if(!t)return this;if(s=u(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),n=this.traces[e]||(this.traces[e]={id:e,buffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:i([x._gl.drawingBufferWidth,x._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0}),null!=s.color&&(n.color=s.color),null!=s.size&&(n.size=s.size),null!=s.marker&&(n.marker=s.marker),null!=s.borderColor&&(n.borderColor=s.borderColor),null!=s.borderSize&&(n.borderSize=s.borderSize),null!=s.opacity&&(n.opacity=s.opacity),s.viewport&&(n.viewport=i(s.viewport)),null!=s.diagonal&&(n.diagonal=s.diagonal),null!=s.upper&&(n.upper=s.upper),null!=s.lower&&(n.lower=s.lower),s.data){n.buffer(d(s.data)),n.columns=s.data.length,n.count=s.data[0].length,n.bounds=[];for(v=0;v<n.columns;v++)n.bounds[v]=l(s.data[v],1)}s.range&&(n.range=s.range,A=n.range&&"number"!=typeof n.range[0]),s.domain&&(n.domain=s.domain),k=!1,null!=s.padding&&(Array.isArray(s.padding)&&s.padding.length===n.columns&&"number"==typeof s.padding[s.padding.length-1]?(n.padding=s.padding.map(a),k=!0):n.padding=a(s.padding));var n,s,r,c,m,f,v,j,x,k,A,p=n.columns,g=n.count,E=n.viewport.width,C=n.viewport.height,y=n.viewport.x,_=n.viewport.y,w=E/p,O=C/p;n.passes=[];for(c=0;c<p;c++)for(r=0;r<p;r++)if((n.diagonal||r!==c)&&(n.upper||!(c>r))&&(n.lower||!(c<r))){if(j=h(n.id,c,r),m=this.passes[j]||(this.passes[j]={}),s.data&&(s.transpose?m.positions={x:{buffer:n.buffer,offset:r,count:g,stride:p},y:{buffer:n.buffer,offset:c,count:g,stride:p}}:m.positions={x:{buffer:n.buffer,offset:r*g,count:g},y:{buffer:n.buffer,offset:c*g,count:g}},m.bounds=o(n.bounds,c,r)),s.domain||s.viewport||s.data)if(f=k?o(n.padding,c,r):n.padding,n.domain){var b=o(n.domain,c,r),S=b[0],M=b[1],F=b[2],T=b[3];m.viewport=[y+S*E+f[0],_+M*C+f[1],y+F*E-f[2],_+T*C-f[3]]}else m.viewport=[y+r*w+w*f[0],_+c*O+O*f[1],y+(r+1)*w-w*f[2],_+(c+1)*O-O*f[3]];s.color&&(m.color=n.color),s.size&&(m.size=n.size),s.marker&&(m.marker=n.marker),s.borderSize&&(m.borderSize=n.borderSize),s.borderColor&&(m.borderColor=n.borderColor),s.opacity&&(m.opacity=n.opacity),s.range&&(m.range=A?o(n.range,c,r):n.range||m.bounds),n.passes.push(j)}return this},s.prototype.draw=function(){for(e=[],s=arguments.length;s--;)e[s]=arguments[s];if(e.length){for(n=[],t=0;t<e.length;t++)if("number"==typeof e[t]){var i=this.traces[e[t]],l=i.passes,a=i.passOffset;n.push.apply(n,m(a,a+l.length))}else if(e[t].length)var e,t,n,s,o,d=e[t],r=this.traces[t],c=r.passes,u=r.passOffset,c=c.map(function(e,t){n[u+t]=d});(o=this.scatter).draw.apply(o,n)}else this.scatter.draw();return this},s.prototype.destroy=function(){return this.traces.forEach(function(e){e.buffer&&e.buffer.destroy&&e.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(e){e.exports=function(){function j(e,t){this.id=xe++,this.type=e,this.data=t}function k(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(1<e.length&&t===n&&('"'===t||"'"===t))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(t=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return k(e.substr(0,t.index)).concat(k(t[1])).concat(k(e.substr(t.index+t[0].length)));if(1===(t=e.split(".")).length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(e=[],n=0;n<t.length;++n)e=e.concat(k(t[n]));return e}function ne(e){return"["+k(e).join("][")+"]"}function Y(e){return"string"==typeof e?e.split():e}function ge(e){return"string"==typeof e?document.querySelector(e):e}function Ce(e){n=e||{},e={};var n,s,o,i,a,m=[],d=[],c="undefined"==typeof window?1:window.devicePixelRatio,u=!1,h={},l=function(){},r=function(){};if("string"==typeof n?s=document.querySelector(n):"object"==typeof n&&("string"==typeof n.nodeName&&"function"==typeof n.appendChild&&"function"==typeof n.getBoundingClientRect?s=n:"function"==typeof n.drawArrays||"function"==typeof n.drawElements?o=(i=n).canvas:("gl"in n?i=n.gl:"canvas"in n?o=ge(n.canvas):"container"in n&&(a=ge(n.container)),"attributes"in n&&(e=n.attributes),"extensions"in n&&(m=Y(n.extensions)),"optionalExtensions"in n&&(d=Y(n.optionalExtensions)),"onDone"in n&&(l=n.onDone),"profile"in n&&(u=!!n.profile),"pixelRatio"in n&&(c=+n.pixelRatio),"cachedCode"in n&&(h=n.cachedCode))),s&&("canvas"===s.nodeName.toLowerCase()?o=s:a=s),!i){if(!o){if(!(s=function(e,n,s){function i(){var n=window.innerWidth,t=window.innerHeight;e!==document.body&&(n=(t=o.getBoundingClientRect()).right-t.left,t=t.bottom-t.top),o.width=s*n,o.height=s*t}var a,o=document.createElement("canvas");return t(o.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),e.appendChild(o),e===document.body&&(o.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(a=new ResizeObserver(function(){setTimeout(i)})).observe(e):window.addEventListener("resize",i,!1),i(),{canvas:o,onDestroy:function(){a?a.disconnect():window.removeEventListener("resize",i),e.removeChild(o)}}}(a||document.body,0,c)))return null;o=s.canvas,r=s.onDestroy}void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!0),i=function(e,t){function n(n){try{return e.getContext(n,t)}catch{return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,e)}return i?{gl:i,canvas:o,container:a,extensions:m,optionalExtensions:d,pixelRatio:c,profile:u,cachedCode:h,onDone:l,onDestroy:r}:(r(),l("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function u(e,t){for(var s=Array(e),n=0;n<e;++n)s[n]=t(n);return s}function K(e){var t,n;return n=(65535<e)<<4,n|=t=(255<(e>>>=n))<<3,(n|=t=(15<(e>>>=t))<<2)|(t=(3<(e>>>=t))<<1)|e>>>t>>1}function Q(){function e(e){t:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break t}e=0}return 0<(t=n[K(e)>>2]).length?t.pop():new ArrayBuffer(e)}function t(e){n[K(e.byteLength)>>2].push(e)}var n=u(8,function(){return[]});return{alloc:e,free:t,allocType:function(t,n){var s=null;switch(t){case 5120:s=new Int8Array(e(n),0,n);break;case 5121:s=new Uint8Array(e(n),0,n);break;case 5122:s=new Int16Array(e(2*n),0,n);break;case 5123:s=new Uint16Array(e(2*n),0,n);break;case 5124:s=new Int32Array(e(4*n),0,n);break;case 5125:s=new Uint32Array(e(4*n),0,n);break;case 5126:s=new Float32Array(e(4*n),0,n);break;default:return null}return s.length!==n?s.subarray(0,n):s},freeType:function(e){t(e.buffer)}}}function g(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||a(e.data))}function ae(e,t,n,s,o,i){for(a=0;a<t;++a)for(var a,r,l,d=e[a],c=0;c<n;++c)for(l=d[c],r=0;r<s;++r)o[i++]=l[r]}function Z(e,t,n,s,o){for(var r,c,l,a=1,i=n+1;i<t.length;++i)a*=t[i];if(r=t[n],4==t.length-n){c=t[n+1],l=t[n+2];for(t=t[n+3],i=0;i<r;++i)ae(e[i],c,l,t,s,o),o+=a}else for(i=0;i<r;++i)Z(e[i],t,n+1,s,o),o+=a}function S(e){return 0|L[Object.prototype.toString.call(e)]}function re(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function he(e,t,n,s,o,i,a){for(var r,l=0,c=0;c<n;++c)for(r=0;r<s;++r)e[l++]=t[o*c+i*r+a]}function ye(t,n,s,o){function l(e){this.id=m++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,s.profile&&(this.stats={size:0})}function i(e,n,s){e.byteLength=n.byteLength,t.bufferData(e.type,n,s)}function h(t,n,s,o,r,c){if(t.usage=s,Array.isArray(n)){if(t.dtype=o||5126,0<n.length)if(Array.isArray(n[0])){r=ie(n);for(l=o=1;l<r.length;++l)o*=r[l];t.dimension=o,i(t,n=H(n,r,t.dtype),s),c?t.persistentData=n:e.freeType(n)}else"number"==typeof n[0]?(t.dimension=r,re(r=e.allocType(t.dtype,n.length),n),i(t,r,s),c?t.persistentData=r:e.freeType(r)):a(n[0])&&(t.dimension=n[0].length,t.dtype=o||S(n[0])||5126,i(t,n=H(n,[n.length,n[0].length],t.dtype),s),c?t.persistentData=n:e.freeType(n))}else if(a(n))t.dtype=o||S(n),t.dimension=r,i(t,n,s),c&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(g(n)){r=n.shape;var l,h=n.stride,u=(l=n.offset,0),d=0,m=0,f=0;1===r.length?(u=r[0],d=1,m=h[0],f=0):2===r.length&&(u=r[0],d=r[1],m=h[0],f=h[1]),t.dtype=o||S(n.data)||5126,t.dimension=d,he(r=e.allocType(t.dtype,u*d),n.data,u,d,m,f,l),i(t,r,s),c?t.persistentData=r:e.freeType(r)}else n instanceof ArrayBuffer&&(t.dtype=5121,t.dimension=r,i(t,n,s),c&&(t.persistentData=new Uint8Array(new Uint8Array(n))))}function d(e){n.bufferCount--,o(e),t.deleteBuffer(e.buffer),e.buffer=null,delete r[e.id]}var u,m=0,r={};return l.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},l.prototype.destroy=function(){d(this)},u=[],s.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(r).forEach(function(t){e+=r[t].stats.size}),e}),{create:function(o,i,c,u){function f(e){var o=35044,i=null,n=0,r=0,c=1;return Array.isArray(e)||a(e)||g(e)||e instanceof ArrayBuffer?i=e:"number"==typeof e?n=0|e:e&&("data"in e&&(i=e.data),"usage"in e&&(o=se[e.usage]),"type"in e&&(r=A[e.type]),"dimension"in e&&(c=0|e.dimension),"length"in e&&(n=0|e.length)),m.bind(),i?h(m,i,o,r,c,u):(n&&t.bufferData(m.type,n,o),m.dtype=r||5121,m.usage=o,m.dimension=c,m.byteLength=n),s.profile&&(m.stats.size=m.byteLength*v[m.dtype]),f}n.bufferCount++;var m=new l(i);return r[m.id]=m,c||f(o),f._reglType="buffer",f._buffer=m,f.subdata=function(n,s){if(r=0|(s||0),m.bind(),a(n)||n instanceof ArrayBuffer)t.bufferSubData(m.type,r,n);else if(Array.isArray(n))0<n.length&&("number"==typeof n[0]?(i=e.allocType(m.dtype,n.length),re(i,n),t.bufferSubData(m.type,r,i),e.freeType(i)):(Array.isArray(n[0])||a(n[0]))&&(o=ie(n),i=H(n,o,m.dtype),t.bufferSubData(m.type,r,i),e.freeType(i)));else if(g(n)){o=n.shape;var o,i,r,l=n.stride,c=i=0,d=0,u=0;1===o.length?(i=o[0],c=1,d=l[0],u=0):2===o.length&&(i=o[0],c=o[1],d=l[0],u=l[1]),o=Array.isArray(n.data)?m.dtype:S(n.data),he(o=e.allocType(o,i*c),n.data,i,c,d,u,n.offset),t.bufferSubData(m.type,r,o),e.freeType(o)}return f},s.profile&&(f.stats=m.stats),f.destroy=function(){d(m)},f},createStream:function(e,t){var n=u.pop();return n||(n=new l(e)),n.bind(),h(n,t,35040,0,1,!1),n},destroyStream:function(e){u.push(e)},clear:function(){c(r).forEach(d),u.forEach(d)},getBuffer:function(e){return e&&e._buffer instanceof l?e._buffer:null},restore:function(){c(r).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:h}}function _e(e,t,n,s){function o(e){this.id=h++,i[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function l(s,o,i,r,c,l,d){var u;if(s.buffer.bind(),o?((u=d)||a(o)&&(!g(o)||a(o.data))||(u=t.oes_element_index_uint?5125:5123),n._initBuffer(s.buffer,o,i,u,3)):(e.bufferData(34963,l,i),s.buffer.dtype=u||5121,s.buffer.usage=i,s.buffer.dimension=3,s.buffer.byteLength=l),u=d,!d){switch(s.buffer.dtype){case 5121:case 5120:u=5121;break;case 5123:case 5122:u=5123;break;case 5125:case 5124:u=5125}s.buffer.dtype=u}s.type=u,0>(o=c)&&(o=s.buffer.byteLength,5123===u?o>>=1:5125===u&&(o>>=2)),s.vertCount=o,o=r,0>r&&(o=4,1===(r=s.buffer.dimension)&&(o=0),2===r&&(o=1),3===r&&(o=4)),s.primType=o}function d(e){s.elementsCount--,delete i[e.id],e.buffer.destroy(),e.buffer=null}var r,i={},h=0,u={uint8:5121,uint16:5123};return t.oes_element_index_uint&&(u.uint32=5125),o.prototype.bind=function(){this.buffer.bind()},r=[],{create:function(e){function r(e){if(e)if("number"==typeof e)c(e),i.primType=4,i.vertCount=0|e,i.type=5121;else{var s=null,d=35044,h=-1,o=-1,n=0,t=0;Array.isArray(e)||a(e)||g(e)?s=e:("data"in e&&(s=e.data),"usage"in e&&(d=se[e.usage]),"primitive"in e&&(h=D[e.primitive]),"count"in e&&(o=0|e.count),"type"in e&&(t=u[e.type]),"length"in e?n=0|e.length:(n=o,5123===t||5122===t?n*=2:5125!==t&&5124!==t||(n*=4))),l(i,s,d,h,o,n,t)}else c(),i.primType=4,i.vertCount=0,i.type=5121;return r}var c=n.create(null,34963,!0),i=new o(c._buffer);return s.elementsCount++,r(e),r._reglType="elements",r._elements=i,r.subdata=function(e,t){return c.subdata(e,t),r},r.destroy=function(){d(i)},r},createStream:function(e){var t=r.pop();return t||(t=new o(n.create(null,34963,!0,!1)._buffer)),l(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){r.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof o?e._elements:null},clear:function(){c(i).forEach(d)}}}function ce(t){for(s=e.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))s[n]=65535;else if(1/0===t[n])s[n]=31744;else if(-1/0===t[n])s[n]=64512;else{fe[0]=t[n];var n,s,a=(i=be[0])>>>31<<15,o=(i<<1>>>24)-127,i=i>>13&1023;s[n]=-24>o?a:-14>o?a+(i+1024>>-14-o):15<o?a+31744:a+(o+15<<10)+i}return s}function b(e){return Array.isArray(e)||a(e)}function y(e){return"[object "+e+"]"}function ee(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function J(e){return!(!Array.isArray(e)||0===e.length||!b(e[0]))}function p(e){return Object.prototype.toString.call(e)}function $(e){if(!e)return!1;var t=p(e);return 0<=je.indexOf(t)||ee(e)||J(e)||g(e)}function q(t,n){36193===t.type?(t.data=ce(n),e.freeType(n)):t.data=n}function F(e,t,n,s,i,a){if(e=void 0!==o[e]?o[e]:h[e]*O[t],a&&(e*=6),i){for(s=0;1<=n;)s+=e*n*n,n/=2;return s}return e*n*s}function ke(n,s,o,i,r,l,d){function D(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function f(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function V(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=je[t.colorSpace]),"type"in t&&(e.type=u[t.type]);var n=e.width,s=e.height,i=e.channels,o=!1;"shape"in t?(n=t.shape[0],s=t.shape[1],3===t.shape.length&&(i=t.shape[2],o=!0)):("radius"in t&&(n=s=t.radius),"width"in t&&(n=t.width),"height"in t&&(s=t.height),"channels"in t&&(i=t.channels,o=!0)),e.width=0|n,e.height=0|s,e.channels=0|i,n=!1,"format"in t&&(n=t.format,s=e.internalformat=j[n],e.format=fe[s],n in u&&!("type"in t)&&(e.type=u[n]),n in w&&(e.compressed=!0),n=!0),!o&&n?e.channels=h[e.format]:o&&!n&&e.channels!==R[e.format]&&(e.format=e.internalformat=R[e.channels])}}function ae(e){n.pixelStorei(37440,e.flipY),n.pixelStorei(37441,e.premultiplyAlpha),n.pixelStorei(37443,e.colorSpace),n.pixelStorei(3317,e.unpackAlignment)}function Z(){D.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function k(t,n){if(s=null,$(n)?s=n:n&&(V(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),$(n.data)&&(s=n.data)),n.copy)l=r.viewportWidth,o=r.viewportHeight,t.width=t.width||l-t.xOffset,t.height=t.height||o-t.yOffset,t.needsCopy=!0;else if(s){if(a(s))t.channels=t.channels||4,t.data=s,"type"in n||5121!==t.type||(t.type=0|L[Object.prototype.toString.call(s)]);else if(ee(s)){switch(t.channels=t.channels||4,o=(l=s).length,t.type){case 5121:case 5123:case 5125:case 5126:(o=e.allocType(t.type,o)).set(l),t.data=o;break;case 36193:t.data=ce(l)}t.alignment=1,t.needsFree=!0}else if(g(s)){l=s.data,Array.isArray(l)||5121!==t.type||(t.type=0|L[Object.prototype.toString.call(l)]),o=s.shape,c=s.stride,3===o.length?(i=o[2],d=c[2]):d=i=1,u=o[0],h=o[1],o=c[0],c=c[1],t.alignment=1,t.width=u,t.height=h,t.channels=i,t.format=t.internalformat=R[i],t.needsFree=!0,u=d,s=s.offset,i=t.width,d=t.height,h=t.channels;for(var s,o,i,c,l,d,u,h,m,f,j=e.allocType(36193===t.type?5126:t.type,i*d*h),y=0,v=0;v<d;++v)for(m=0;m<i;++m)for(f=0;f<h;++f)j[y++]=l[o*m+c*v+u*f+s];q(t,j)}else if(p(s)===P||p(s)===I||p(s)===pe)p(s)===P||p(s)===I?t.element=s:t.element=s.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(p(s)===U)t.element=s,t.width=s.width,t.height=s.height,t.channels=4;else if(p(s)===de)t.element=s,t.width=s.naturalWidth,t.height=s.naturalHeight,t.channels=4;else if(p(s)===le)t.element=s,t.width=s.videoWidth,t.height=s.videoHeight,t.channels=4;else if(J(s)){for(l=t.width||s[0].length,o=t.height||s.length,c=t.channels,c=b(s[0][0])?c||s[0][0].length:c||1,u=T.shape(s),i=1,d=0;d<u.length;++d)i*=u[d];i=e.allocType(36193===t.type?5126:t.type,i),T.flatten(s,u,"",i),q(t,i),t.alignment=1,t.width=l,t.height=o,t.channels=c,t.format=t.internalformat=R[c],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4}function ue(e,t,s,o,a){var h=e.element,l=e.data,m=e.internalformat,d=e.format,u=e.type,c=e.width,r=e.height;ae(e),h?n.texSubImage2D(t,a,s,o,d,u,h):e.compressed?n.compressedTexSubImage2D(t,a,s,o,m,c,r,l):e.needsCopy?(i(),n.copyTexSubImage2D(t,a,s,o,e.xOffset,e.yOffset,c,r)):n.texSubImage2D(t,a,s,o,c,r,d,u,l)}function x(){return ie.pop()||new Z}function W(t){t.needsFree&&e.freeType(t.data),Z.call(t),ie.push(t)}function be(){D.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Y(e,t,n){var s=e.images[0]=x();e.mipmask=1,s.width=e.width=t,s.height=e.height=n,s.channels=e.channels=4}function m(e,t){if(n=null,$(t))f(n=e.images[0]=x(),e),k(n,t),e.mipmask=1;else if(V(e,t),Array.isArray(t.mipmap))for(var n,o=t.mipmap,s=0;s<o.length;++s)f(n=e.images[s]=x(),e),n.width>>=s,n.height>>=s,k(n,o[s]),e.mipmask|=1<<s;else f(n=e.images[0]=x(),e),k(n,t),e.mipmask=1;f(e,e.images[0])}function re(e,t){for(r=e.images,o=0;o<r.length&&r[o];++o){var o,r,s=r[o],c=t,l=o,f=s.element,h=s.data,p=s.internalformat,a=s.format,m=s.type,u=s.width,d=s.height;ae(s),f?n.texImage2D(c,l,a,a,m,f):s.compressed?n.compressedTexImage2D(c,l,p,u,d,0,h):s.needsCopy?(i(),n.copyTexImage2D(c,l,a,s.xOffset,s.yOffset,u,d,0)):n.texImage2D(c,l,a,u,d,0,a,m,h||null)}}function te(){var t,e=he.pop()||new be;D.call(e);for(t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function oe(e){for(var n=e.images,t=0;t<n.length;++t)n[t]&&W(n[t]),n[t]=null;he.push(e)}function K(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function me(e,t){"min"in t&&(e.minFilter=G[t.min],0<=ve.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=z[t.mag]);var s,n=e.wrapS,o=e.wrapT;if("wrap"in t?(s=t.wrap,"string"==typeof s?n=o=_[s]:Array.isArray(s)&&(n=_[s[0]],o=_[s[1]])):("wrapS"in t&&(n=_[t.wrapS]),"wrapT"in t&&(o=_[t.wrapT])),e.wrapS=n,e.wrapT=o,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(n=!1,typeof t.mipmap){case"string":e.mipmapHint=ye[t.mipmap],n=e.genMipmaps=!0;break;case"boolean":n=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,n=!0}!n||"min"in t||(e.minFilter=9984)}}function Q(e,t){n.texParameteri(t,10241,e.minFilter),n.texParameteri(t,10240,e.magFilter),n.texParameteri(t,10242,e.wrapS),n.texParameteri(t,10243,e.wrapT),s.ext_texture_filter_anisotropic&&n.texParameteri(t,34046,e.anisotropic),e.genMipmaps&&(n.hint(33170,e.mipmapHint),n.generateMipmap(t))}function X(e){D.call(this),this.mipmask=0,this.internalformat=6408,this.id=ge++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new K,d.profile&&(this.stats={size:0})}function C(e){n.activeTexture(33984),n.bindTexture(e.target,e.texture)}function E(){var e=v[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(3553,null)}function se(e){var s=e.texture,t=e.unit,o=e.target;0<=t&&(n.activeTexture(33984+t),n.bindTexture(o,null),v[t]=null),n.deleteTexture(s),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete y[e.id],l.textureCount--}var O,S,M,N,H,B,ye={"don't care":4352,"dont care":4352,nice:4354,fast:4353},_={repeat:10497,clamp:33071,mirror:33648},z={nearest:9728,linear:9729},G=t({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},z),je={none:0,browser:37444},u={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},j={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},w={},ne;s.ext_srgb&&(j.srgb=35904,j.srgba=35906),s.oes_texture_float&&(u.float32=u.float=5126),s.oes_texture_half_float&&(u.float16=u["half float"]=36193),s.webgl_depth_texture&&(t(j,{depth:6402,"depth stencil":34041}),t(u,{uint16:5123,uint32:5125,"depth stencil":34042})),s.webgl_compressed_texture_s3tc&&t(w,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),s.webgl_compressed_texture_atc&&t(w,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),s.webgl_compressed_texture_pvrtc&&t(w,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),s.webgl_compressed_texture_etc1&&(w["rgb etc1"]=36196),ne=Array.prototype.slice.call(n.getParameter(34467)),Object.keys(w).forEach(function(e){var t=w[e];0<=ne.indexOf(t)&&(j[e]=t)}),B=Object.keys(j),o.textureFormats=B,S=[],Object.keys(j).forEach(function(e){S[j[e]]=e}),H=[],Object.keys(u).forEach(function(e){H[u[e]]=e}),N=[],Object.keys(z).forEach(function(e){N[z[e]]=e}),M=[],Object.keys(G).forEach(function(e){M[G[e]]=e}),O=[],Object.keys(_).forEach(function(e){O[_[e]]=e});var fe=B.reduce(function(e,t){var n=j[t];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||s.ext_srgb&&(35904===n||35906===n)?e[n]=n:32855===n||0<=t.indexOf("rgba")?e[n]=6408:e[n]=6407,e},{}),ie=[],he=[],ge=0,y={},A=o.maxTextureUnits,v=Array(A).map(function(){return null});return t(X.prototype,{bind:function(){this.bindCount+=1;var t,s,e=this.unit;if(0>e){for(t=0;t<A;++t){if(s=v[t],s){if(0<s.bindCount)continue;s.unit=-1}v[t]=this,e=t;break}d.profile&&l.maxTextureUnits<e+1&&(l.maxTextureUnits=e+1),this.unit=e,n.activeTexture(33984+e),n.bindTexture(this.target,this.texture)}return e},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&se(this)}}),d.profile&&(l.getTotalTextureSize=function(){var e=0;return Object.keys(y).forEach(function(t){e+=y[t].stats.size}),e}),{create2D:function(e,t){function o(e,t){var n,i=s.texInfo;return K.call(i),n=te(),"number"==typeof e?Y(n,0|e,"number"==typeof t?0|t:0|e):e?(me(i,e),m(n,e)):Y(n,1,1),i.genMipmaps&&(n.mipmask=(n.width<<1)-1),s.mipmask=n.mipmask,f(s,n),s.internalformat=n.internalformat,o.width=n.width,o.height=n.height,C(s),re(n,3553),Q(i,3553),E(),oe(n),d.profile&&(s.stats.size=F(s.internalformat,s.type,n.width,n.height,i.genMipmaps,!1)),o.format=S[s.internalformat],o.type=H[s.type],o.mag=N[i.magFilter],o.min=M[i.minFilter],o.wrapS=O[i.wrapS],o.wrapT=O[i.wrapT],o}var s=new X(3553);return y[s.id]=s,l.textureCount++,o(e,t),o.subimage=function(e,t,n,i){t|=0,n|=0,i|=0;var a=x();return f(a,s),a.width=0,a.height=0,k(a,e),a.width=a.width||(s.width>>i)-t,a.height=a.height||(s.height>>i)-n,C(s),ue(a,3553,t,n,i),E(),W(a),o},o.resize=function(e,t){var i,c,l,a=0|e,r=0|t||a;if(a===s.width&&r===s.height)return o;o.width=s.width=a,o.height=s.height=r,C(s);for(i=0;s.mipmask>>i;++i){if(c=a>>i,l=r>>i,!c||!l)break;n.texImage2D(3553,i,s.format,c,l,0,s.format,s.type,null)}return E(),d.profile&&(s.stats.size=F(s.internalformat,s.type,a,r,!1,!1)),o},o._reglType="texture2d",o._texture=s,d.profile&&(o.stats=s.stats),o.destroy=function(){s.decRef()},o},createCube:function(e,t,s,o,i,a){function c(e,t,n,s,o,i){var a,l=r.texInfo;for(K.call(l),a=0;6>a;++a)u[a]=te();if("number"!=typeof e&&e){if("object"==typeof e)if(t)m(u[0],e),m(u[1],t),m(u[2],n),m(u[3],s),m(u[4],o),m(u[5],i);else if(me(l,e),V(r,e),"faces"in e)for(e=e.faces,a=0;6>a;++a)f(u[a],r),m(u[a],e[a]);else for(a=0;6>a;++a)m(u[a],e)}else for(e=0|e||1,a=0;6>a;++a)Y(u[a],e,e);for(f(r,u[0]),r.mipmask=l.genMipmaps?(u[0].width<<1)-1:u[0].mipmask,r.internalformat=u[0].internalformat,c.width=u[0].width,c.height=u[0].height,C(r),a=0;6>a;++a)re(u[a],34069+a);for(Q(l,34067),E(),d.profile&&(r.stats.size=F(r.internalformat,r.type,c.width,c.height,l.genMipmaps,!0)),c.format=S[r.internalformat],c.type=H[r.type],c.mag=N[l.magFilter],c.min=M[l.minFilter],c.wrapS=O[l.wrapS],c.wrapT=O[l.wrapT],a=0;6>a;++a)oe(u[a]);return c}var u,r=new X(34067);return y[r.id]=r,l.cubeCount++,u=Array(6),c(e,t,s,o,i,a),c.subimage=function(e,t,n,s,o){n|=0,s|=0,o|=0;var i=x();return f(i,r),i.width=0,i.height=0,k(i,t),i.width=i.width||(r.width>>o)-n,i.height=i.height||(r.height>>o)-s,C(r),ue(i,34069+e,n,s,o),E(),W(i),c},c.resize=function(e){if((e|=0)!==r.width){c.width=r.width=e,c.height=r.height=e,C(r);for(var t,s=0;6>s;++s)for(t=0;r.mipmask>>t;++t)n.texImage2D(34069+s,t,r.format,e>>t,e>>t,0,r.format,r.type,null);return E(),d.profile&&(r.stats.size=F(r.internalformat,r.type,c.width,c.height,!1,!0)),c}},c._reglType="textureCube",c._texture=r,d.profile&&(c.stats=r.stats),c.destroy=function(){r.decRef()},c},clear:function(){for(var e=0;e<A;++e)n.activeTexture(33984+e),n.bindTexture(3553,null),v[e]=null;c(y).forEach(se),l.cubeCount=0,l.textureCount=0},getTexture:function(){return null},restore:function(){for(var t,e=0;e<A;++e)t=v[e],t&&(t.bindCount=0,t.unit=-1,v[e]=null);c(y).forEach(function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var s,t=0;32>t;++t)if(0!=(e.mipmask&1<<t))if(3553===e.target)n.texImage2D(3553,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(s=0;6>s;++s)n.texImage2D(34069+s,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);Q(e.texInfo,e.target)})},refresh:function(){for(var t,e=0;e<A;++e)t=v[e],t&&(t.bindCount=0,t.unit=-1,v[e]=null),n.activeTexture(33984+e),n.bindTexture(3553,null),n.bindTexture(34067,null)}}}function Se(e,n,s,o,i,a){function y(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var s=e=0;t?(e=t.width,s=t.height):n&&(e=n.width,s=n.height),this.width=e,this.height=s}function u(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function h(e){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function g(t,n){n&&(n.texture?e.framebufferTexture2D(36160,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,n.renderbuffer._renderbuffer.renderbuffer))}function d(e){var n=3553,s=null,o=null,t=e;return"object"==typeof e&&(t=e.data,"target"in e&&(n=0|e.target)),"texture2d"===(e=t._reglType)||"textureCube"===e?s=t:"renderbuffer"===e&&(o=t,n=36161),new y(n,s,o)}function m(e,t,n,s,a){return n?((e=o.create2D({width:e,height:t,format:s,type:a}))._texture.refCount=0,new y(3553,e,null)):((e=i.create({width:e,height:t,format:s}))._renderbuffer.refCount=0,new y(36161,null,e))}function f(e){return e&&(e.texture||e.renderbuffer)}function p(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}function O(){this.id=x++,l[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function E(e){e.colorAttachments.forEach(u),u(e.depthAttachment),u(e.stencilAttachment),u(e.depthStencilAttachment)}function w(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,a.framebufferCount--,delete l[t.id]}function j(t){e.bindFramebuffer(36160,t.framebuffer);var n,o=t.colorAttachments;for(n=0;n<o.length;++n)g(36064+n,o[n]);for(n=o.length;n<s.maxColorAttachments;++n)e.framebufferTexture2D(36160,36064+n,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),g(36096,t.depthAttachment),g(36128,t.stencilAttachment),g(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.isContextLost(),e.bindFramebuffer(36160,r.next?r.next.framebuffer:null),r.cur=r.next,e.getError()}function _(e,n){function o(e,t){var r=0,a=0,c=!0,l=!0,n=null,g=!0,u="rgba",p="uint8",S=1,O=null,w=null,A=null,x=!1;"number"==typeof e?(r=0|e,a=0|t||r):e?("shape"in e?(r=(a=e.shape)[0],a=a[1]):("radius"in e&&(r=a=e.radius),"width"in e&&(r=e.width),"height"in e&&(a=e.height)),("color"in e||"colors"in e)&&(n=e.color||e.colors,Array.isArray(n)),n||("colorCount"in e&&(S=0|e.colorCount),"colorTexture"in e&&(g=!!e.colorTexture,u="rgba4"),"colorType"in e&&(p=e.colorType,!g)&&("half float"===p||"float16"===p?u="rgba16f":"float"!==p&&"float32"!==p||(u="rgba32f")),"colorFormat"in e&&(u=e.colorFormat,0<=k.indexOf(u)?g=!0:0<=v.indexOf(u)&&(g=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(x=!!e.depthTexture||!!e.depthStencilTexture),"depth"in e&&("boolean"==typeof e.depth?c=e.depth:(O=e.depth,l=!1)),"stencil"in e&&("boolean"==typeof e.stencil?l=e.stencil:(w=e.stencil,c=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?c=l=e.depthStencil:(A=e.depthStencil,l=c=!1))):r=a=1;var i=null,y=null,b=null,_=null;if(Array.isArray(n))i=n.map(d);else if(n)i=[d(n)];else for(i=Array(S),n=0;n<S;++n)i[n]=m(r,a,g,u,p);for(r=r||i[0].width,a=a||i[0].height,O?y=d(O):c&&!l&&(y=m(r,a,x,"depth","uint32")),w?b=d(w):l&&!c&&(b=m(r,a,!1,"stencil","uint8")),A?_=d(A):!O&&!w&&l&&c&&(_=m(r,a,x,"depth stencil","depth stencil")),c=null,n=0;n<i.length;++n)h(i[n]),i[n]&&i[n].texture&&(l=M[i[n].texture._texture.format]*C[i[n].texture._texture.type],null===c&&(c=l));return h(y),h(b),h(_),E(s),s.width=r,s.height=a,s.colorAttachments=i,s.depthAttachment=y,s.stencilAttachment=b,s.depthStencilAttachment=_,o.color=i.map(f),o.depth=f(y),o.stencil=f(b),o.depthStencil=f(_),o.width=s.width,o.height=s.height,j(s),o}var s=new O;return a.framebufferCount++,o(e,n),t(o,{resize:function(e,t){var a,r,n=Math.max(0|e,1),i=Math.max(0|t||n,1);if(n===s.width&&i===s.height)return o;for(r=s.colorAttachments,a=0;a<r.length;++a)p(r[a],n,i);return p(s.depthAttachment,n,i),p(s.stencilAttachment,n,i),p(s.depthStencilAttachment,n,i),s.width=o.width=n,s.height=o.height=i,j(s),o},_reglType:"framebuffer",_framebuffer:s,destroy:function(){w(s),E(s)},use:function(e){r.setFBO({framebuffer:o},e)}})}var l,b,x,r={cur:null,next:null,dirty:!1,setFBO:null},k=["rgba"],v=["rgba4","rgb565","rgb5 a1"];return n.ext_srgb&&v.push("srgba"),n.ext_color_buffer_half_float&&v.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&v.push("rgba32f"),b=["uint8"],n.oes_texture_half_float&&b.push("half float","float16"),n.oes_texture_float&&b.push("float","float32"),x=0,l={},t(r,{getFramebuffer:function(e){return"function"==typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof O?e:null},create:_,createCube:function(e){function n(e){var a={color:null},r=0,c=null,i="rgba",d="uint8",l=1;if("number"==typeof e?r=0|e:e?("shape"in e?r=e.shape[0]:("radius"in e&&(r=0|e.radius),"width"in e?r=0|e.width:"height"in e&&(r=0|e.height)),("color"in e||"colors"in e)&&(c=e.color||e.colors,Array.isArray(c)),c||("colorCount"in e&&(l=0|e.colorCount),"colorType"in e&&(d=e.colorType),"colorFormat"in e&&(i=e.colorFormat)),"depth"in e&&(a.depth=e.depth),"stencil"in e&&(a.stencil=e.stencil),"depthStencil"in e&&(a.depthStencil=e.depthStencil)):r=1,c)if(Array.isArray(c))for(e=[],i=0;i<c.length;++i)e[i]=c[i];else e=[c];else for(e=Array(l),c={radius:r,format:i,type:d},i=0;i<l;++i)e[i]=o.createCube(c);for(a.color=Array(e.length),i=0;i<e.length;++i)l=e[i],r=r||l.width,a.color[i]={target:34069,data:e[i]};for(i=0;6>i;++i){for(l=0;l<e.length;++l)a.color[l].target=34069+i;0<i&&(a.depth=s[0].depth,a.stencil=s[0].stencil,a.depthStencil=s[0].depthStencil),s[i]?s[i](a):s[i]=_(a)}return t(n,{width:r,height:r,color:e})}var s=Array(6);return n(e),t(n,{faces:s,resize:function(e){var o,t=0|e;if(t===n.width)return n;o=n.color;for(e=0;e<o.length;++e)o[e].resize(t);for(e=0;6>e;++e)s[e].resize(t);return n.width=n.height=t,n},_reglType:"framebufferCube",destroy:function(){s.forEach(function(e){e.destroy()})}})},clear:function(){c(l).forEach(w)},restore:function(){r.cur=null,r.next=null,r.dirty=!0,c(l).forEach(function(t){t.framebuffer=e.createFramebuffer(),j(t)})}})}function V(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function Me(e,t,n,s,o,i,r){function h(){this.id=++f,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var e=t.oes_vertex_array_object;this.vao=e?e.createVertexArrayOES():null,u[this.id]=this,this.buffers=[]}m=n.maxAttributes,d=Array(m);for(n=0;n<m;++n)d[n]=new V;var d,m,f=0,u={},l={Record:V,scope:{},state:d,currentVAO:null,targetVAO:null,restore:t.oes_vertex_array_object?function(){t.oes_vertex_array_object&&c(u).forEach(function(e){e.refresh()})}:function(){},createVAO:function(e){function n(e){Array.isArray(e)?(d=e,t.elements&&t.ownsElements&&t.elements.destroy(),t.elements=null,t.ownsElements=!1,t.offset=0,t.count=0,t.instances=-1,t.primitive=4):(e.elements?(d=e.elements,t.ownsElements?("function"==typeof d&&"elements"===d._reglType?t.elements.destroy():t.elements(d),t.ownsElements=!1):i.getElements(e.elements)?(t.elements=e.elements,t.ownsElements=!1):(t.elements=i.create(e.elements),t.ownsElements=!0)):(t.elements=null,t.ownsElements=!1),d=e.attributes,t.offset=0,t.count=-1,t.instances=-1,t.primitive=4,t.elements&&(t.count=t.elements._elements.vertCount,t.primitive=t.elements._elements.primType),"offset"in e&&(t.offset=0|e.offset),"count"in e&&(t.count=0|e.count),"instances"in e&&(t.instances=0|e.instances),"primitive"in e&&(t.primitive=D[e.primitive])),e={},h=t.attributes,h.length=d.length;for(l=0;l<d.length;++l){var c,l,d,h,r=d[l],s=h[l]=new V,u=r.data||r;Array.isArray(u)||a(u)||g(u)?(t.buffers[l]&&(c=t.buffers[l],a(u)&&c._buffer.byteLength>=u.byteLength?c.subdata(u):(c.destroy(),t.buffers[l]=null)),t.buffers[l]||(c=t.buffers[l]=o.create(r,34962,!1,!0)),s.buffer=o.getBuffer(c),s.size=0|s.buffer.dimension,s.normalized=!1,s.type=s.buffer.dtype,s.offset=0,s.stride=0,s.divisor=0,s.state=1,e[l]=1):o.getBuffer(r)?(s.buffer=o.getBuffer(r),s.size=0|s.buffer.dimension,s.normalized=!1,s.type=s.buffer.dtype,s.offset=0,s.stride=0,s.divisor=0,s.state=1):o.getBuffer(r.buffer)?(s.buffer=o.getBuffer(r.buffer),s.size=0|(+r.size||s.buffer.dimension),s.normalized=!!r.normalized||!1,s.type="type"in r?A[r.type]:s.buffer.dtype,s.offset=0|(r.offset||0),s.stride=0|(r.stride||0),s.divisor=0|(r.divisor||0),s.state=1):"x"in r&&(s.x=+r.x||0,s.y=+r.y||0,s.z=+r.z||0,s.w=+r.w||0,s.state=2)}for(c=0;c<t.buffers.length;++c)!e[c]&&t.buffers[c]&&(t.buffers[c].destroy(),t.buffers[c]=null);return t.refresh(),n}var t=new h;return s.vaoCount+=1,n.destroy=function(){for(var e=0;e<t.buffers.length;++e)t.buffers[e]&&t.buffers[e].destroy();t.buffers.length=0,t.ownsElements&&(t.elements.destroy(),t.elements=null,t.ownsElements=!1),t.destroy()},n._vao=t,n._reglType="vao",n(e)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(t){for(var s,n=0;n<d.length;++n)s=d[n],s.buffer===t&&(e.disableVertexAttribArray(n),s.buffer=null)},setVAO:t.oes_vertex_array_object?function(e){if(e!==l.currentVAO){var n=t.oes_vertex_array_object;e?n.bindVertexArrayOES(e.vao):n.bindVertexArrayOES(null),l.currentVAO=e}}:function(n){if(n!==l.currentVAO){if(n)n.bindAttrs();else{for(var s,i=t.angle_instanced_arrays,o=0;o<d.length;++o)s=d[o],s.buffer?(e.enableVertexAttribArray(o),s.buffer.bind(),e.vertexAttribPointer(o,s.size,s.type,s.normalized,s.stride,s.offfset),i&&s.divisor&&i.vertexAttribDivisorANGLE(o,s.divisor)):(e.disableVertexAttribArray(o),e.vertexAttrib4f(o,s.x,s.y,s.z,s.w));r.elements?e.bindBuffer(34963,r.elements.buffer.buffer):e.bindBuffer(34963,null)}l.currentVAO=n}},clear:t.oes_vertex_array_object?function(){c(u).forEach(function(e){e.destroy()})}:function(){}};return h.prototype.bindAttrs=function(){for(var n,s=t.angle_instanced_arrays,a=this.attributes,o=0;o<a.length;++o)n=a[o],n.buffer?(e.enableVertexAttribArray(o),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(o,n.size,n.type,n.normalized,n.stride,n.offset),s&&n.divisor&&s.vertexAttribDivisorANGLE(o,n.divisor)):(e.disableVertexAttribArray(o),e.vertexAttrib4f(o,n.x,n.y,n.z,n.w));for(s=a.length;s<m;++s)e.disableVertexAttribArray(s);(s=i.getElements(this.elements))?e.bindBuffer(34963,s.buffer.buffer):e.bindBuffer(34963,null)},h.prototype.refresh=function(){var e=t.oes_vertex_array_object;e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=null,e.bindVertexArrayOES(null))},h.prototype.destroy=function(){if(this.vao){var e=t.oes_vertex_array_object;this===l.currentVAO&&(l.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),u[this.id]&&(delete u[this.id],--s.vaoCount)},l}function Fe(e,n,s,o){function d(e,t,n,s){this.name=e,this.id=t,this.location=n,this.info=s}function u(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function h(t,s,o){if(!(i=(o=35632===t?l:a)[s])){var r=n.str(s),i=e.createShader(t);e.shaderSource(i,r),e.compileShader(i),o[s]=i}return i}function f(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function m(t,s,i){var c,l,m,a=h(35632,t.fragId),r=h(35633,t.vertId);if(s=t.program=e.createProgram(),e.attachShader(s,a),e.attachShader(s,r),i)for(a=0;a<i.length;++a)r=i[a],e.bindAttribLocation(s,r[0],r[1]);e.linkProgram(s),r=e.getProgramParameter(s,35718),o.profile&&(t.stats.uniformsCount=r),m=t.uniforms;for(a=0;a<r;++a)if(i=e.getActiveUniform(s,a))if(1<i.size)for(c=0;c<i.size;++c)l=i.name.replace("[0]","["+c+"]"),u(m,new d(l,n.id(l),e.getUniformLocation(s,l),i));else u(m,new d(i.name,n.id(i.name),e.getUniformLocation(s,i.name),i));for(r=e.getProgramParameter(s,35721),o.profile&&(t.stats.attributesCount=r),t=t.attributes,a=0;a<r;++a)(i=e.getActiveAttrib(s,a))&&u(t,new d(i.name,n.id(i.name),e.getAttribLocation(s,i.name),i))}var l={},a={},r={},i=[],p=0;return o.profile&&(s.getMaxUniformsCount=function(){var e=0;return i.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},s.getMaxAttributesCount=function(){var e=0;return i.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);c(l).forEach(t),l={},c(a).forEach(t),a={},i.forEach(function(t){e.deleteProgram(t.program)}),i.length=0,r={},s.shaderCount=0},program:function(n,o,c,d){var u,p,h=r[o];return h||(h=r[o]={}),p=h[n],p&&(p.refCount++,!d)?p:(u=new f(o,n),s.shaderCount++,m(u,c,d),p||(h[n]=u),i.push(u),t(u,{destroy:function(){if(u.refCount--,0>=u.refCount){e.deleteProgram(u.program);var t=i.indexOf(u);i.splice(t,1),s.shaderCount--}0>=h[u.vertId].refCount&&(e.deleteShader(a[u.vertId]),delete a[u.vertId],delete r[u.fragId][u.vertId]),Object.keys(r[u.fragId]).length||(e.deleteShader(l[u.fragId]),delete l[u.fragId],delete r[u.fragId])}}))},restore:function(){l={},a={};for(var e=0;e<i.length;++e)m(i[e],null,i[e].attributes.map(function(e){return[e.location,e.name]}))},shader:h,frag:-1,vert:-1}}function Te(e,t,n,s){function c(o){var r=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type,c=0,l=0,d=s.framebufferWidth,u=s.framebufferHeight,i=null;return a(o)?i=o:o&&(c=0|o.x,l=0|o.y,d=0|(o.width||s.framebufferWidth-c),u=0|(o.height||s.framebufferHeight-l),i=o.data||null),n(),o=d*u*4,i||(5121===r?i=new Uint8Array(o):5126===r&&(i=i||new Float32Array(o))),e.pixelStorei(3333,4),e.readPixels(c,l,d,u,6408,r,i),i}return function(e){return e&&"framebuffer"in e?function(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=c(e)}),n}(e):c(e)}}function f(e,t){return e>>>t|e<<32-t}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function _(e){return Array.prototype.slice.call(e)}function x(e){return _(e).join("")}function Oe(e){function o(){var e=[],n=[];return t(function(){e.push.apply(e,_(arguments))},{def:function(){var t="v"+l++;return n.push(t),0<arguments.length&&(e.push(t,"="),e.push.apply(e,_(arguments)),e.push(";")),t},toString:function(){return x([0<n.length?"var "+n.join(",")+";":"",x(e)])}})}function a(){function s(t,s){n(t,s,"=",e.def(t,s),";")}var e=o(),n=o(),i=e.toString,a=n.toString;return t(function(){e.apply(e,_(arguments))},{def:e.def,entry:e,exit:n,save:s,set:function(t,n,o){s(t,n),e(t,n,"=",o,";")},toString:function(){return i()+a()}})}var n=e&&e.cache,l=0,r=[],s=[],d=[],u=o(),c={};return{global:u,link:function(e,t){var n,o=t&&t.stable;if(!o)for(n=0;n<s.length;++n)if(s[n]===e&&!d[n])return r[n];return n="g"+l++,r.push(n),s.push(e),d.push(o),n},block:o,proc:function(e,n){function i(){var e="a"+o.length;return o.push(e),e}var s,r,o=[];n=n||0;for(s=0;s<n;++s)i();return r=(s=a()).toString,c[e]=t(s,{arg:i,toString:function(){return x(["function(",o.join(),"){",r(),"}"])}})},scope:a,cond:function(){var s=x(arguments),e=a(),n=a(),o=e.toString,i=n.toString;return t(e,{then:function(){return e.apply(e,_(arguments)),this},else:function(){return n.apply(n,_(arguments)),this},toString:function(){var e=i();return e&&(e="else{"+e+"}"),x(["if(",s,"){",o(),"}",e])}})},compile:function(){var e,t,o=['"use strict";',u,"return {"];return Object.keys(c).forEach(function(e){o.push('"',e,'":',c[e].toString(),",")}),o.push("}"),e=x(o).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),n&&(t=function(e){for(var t,s="",n=0;n<e.length;n++)t=e.charCodeAt(n),s+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return s}(function(e){for(var n,s,a,r,c,l,d,u,h,m,p,g,v,o=Array(e.length>>2),t=0;t<o.length;t++)o[t]=0;for(t=0;t<8*e.length;t+=8)o[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32;s=8*e.length;for(e=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],t=Array(64),o[s>>5]|=128<<24-s%32,o[15+(s+64>>9<<4)]=s,g=0;g<o.length;g+=16){for(s=e[0],d=e[1],u=e[2],v=e[3],l=e[4],m=e[5],h=e[6],r=e[7],n=0;64>n;n++)16>n?t[n]=o[n+g]:(a=n,c=i(c=f(c=t[n-2],17)^f(c,19)^c>>>10,t[n-7]),p=f(p=t[n-15],7)^f(p,18)^p>>>3,t[a]=i(i(c,p),t[n-16])),a=i(i(i(i(r,a=f(a=l,6)^f(a,11)^f(a,25)),l&m^~l&h),Ee[n]),t[n]),c=i(r=f(r=s,2)^f(r,13)^f(r,22),s&d^s&u^d&u),r=h,h=m,m=l,l=i(v,a),v=u,u=d,d=s,s=i(a,c);e[0]=i(s,e[0]),e[1]=i(d,e[1]),e[2]=i(u,e[2]),e[3]=i(v,e[3]),e[4]=i(l,e[4]),e[5]=i(m,e[5]),e[6]=i(h,e[6]),e[7]=i(r,e[7])}for(o="",t=0;t<32*e.length;t+=8)o+=String.fromCharCode(e[t>>5]>>>24-t%32&255);return o}(function(e){for(var t,o,n="",s=-1;++s<e.length;)t=e.charCodeAt(s),o=s+1<e.length?e.charCodeAt(s+1):0,55296<=t&&56319>=t&&56320<=o&&57343>=o&&(t=65536+((1023&t)<<10)+(1023&o),s++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}(e))),n[t])?n[t].apply(null,s):(e=Function.apply(null,r.concat(e)),n&&(n[t]=e),e.apply(null,s))}}}function N(e){return Array.isArray(e)||a(e)||g(e)}function me(e){return e.sort(function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1})}function s(e,t,n,s){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=s}function m(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function n(e){return new s(!1,!1,!1,e)}function r(e,t){if(n=e.type,0===n)return new s(!0,1<=(n=e.data.length),2<=n,t);if(4===n)return new s((n=e.data).thisDep,n.contextDep,n.propDep,t);if(5===n)return new s(!1,!1,!1,t);if(6===n){for(var n,o,i=n=!1,a=!1,r=0;r<e.data.length;++r)o=e.data[r],1===o.type?a=!0:2===o.type?i=!0:3===o.type?n=!0:0===o.type?(n=!0,1<=(o=o.data)&&(i=!0),2<=o&&(a=!0)):4===o.type&&(n=n||o.data.thisDep,i=i||o.data.contextDep,a=a||o.data.propDep);return new s(n,i,a,t)}return new s(3===n,2===n,1===n,t)}function ze(e,o,i,a,c,d,h,f,p,g,v,j,y,_,O,x){function H(e){return e.replace(".","_")}function S(e,t,n){var s=H(e);W.push(e),I[s]=F[s]=!!n,L[s]=t}function C(e,t,n){var s=H(e);W.push(e),Array.isArray(n)?(F[s]=n.slice(),I[s]=n.slice()):F[s]=I[s]=n,k[s]=t}function J(){var t,s,a,r,c,l,e=Oe({cache:O}),i=e.link,n=e.global;return e.id=ae++,e.batchId="0",a=i(Q),t=e.shared={props:"a0"},Object.keys(Q).forEach(function(e){t[e]=n.def(a,".",e)}),r=e.next={},c=e.current={},Object.keys(k).forEach(function(e){Array.isArray(F[e])&&(r[e]=n.def(t.next,".",e),c[e]=n.def(t.current,".",e))}),l=e.constants={},Object.keys($).forEach(function(e){l[e]=n.def(JSON.stringify($[e]))}),e.invoke=function(n,s){switch(s.type){case 0:var o=["this",t.context,t.props,e.batchId];return n.def(i(s.data),".call(",o.slice(0,Math.max(s.data.length+1,4)),")");case 1:return n.def(t.props,s.data);case 2:return n.def(t.context,s.data);case 3:return n.def("this",s.data);case 4:return s.data.append(e,n),s.data.ref;case 5:return s.data.toString();case 6:return s.data.map(function(t){return e.invoke(n,t)})}},e.attribCache={},s={},e.scopeAttrib=function(e){if((e=o.id(e))in s)return s[e];var t=g.scope[e];return t||(t=g.scope[e]=new P),s[e]=i(t)},e}function ge(e){var s,o,i=e.static,a=e.dynamic;return"framebuffer"in i?(s=i.framebuffer,s?(s=f.getFramebuffer(s),n(function(e,t){var o=e.link(s),n=e.shared;return t.set(n.framebuffer,".next",o),n=n.context,t.set(n,".framebufferWidth",o+".width"),t.set(n,".framebufferHeight",o+".height"),o})):n(function(e,t){var n=e.shared;return t.set(n.framebuffer,".next","null"),n=n.context,t.set(n,".framebufferWidth",n+".drawingBufferWidth"),t.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"})):"framebuffer"in a?(o=a.framebuffer,r(o,function(e,t){var n=e.invoke(t,o),s=e.shared,i=s.framebuffer;return n=t.def(i,".getFramebuffer(",n,")"),t.set(i,".next",n),s=s.context,t.set(s,".framebufferWidth",n+"?"+n+".width:"+s+".drawingBufferWidth"),t.set(s,".framebufferHeight",n+"?"+n+".height:"+s+".drawingBufferHeight"),n})):null}function pe(e,t,i){function d(e){if(e in u){var t,s=o.id(u[e]);return(e=n(function(){return s})).id=s,e}return e in h?(t=h[e],r(t,function(e,n){var s=e.invoke(n,t);return n.def(e.shared.strings,".id(",s,")")})):null}var u=e.static,h=e.dynamic,a=d("frag"),c=d("vert"),l=null;return m(a)&&m(c)?(l=v.program(c.id,a.id,null,i),e=n(function(e){return e.link(l)})):e=new s(a&&a.thisDep||c&&c.thisDep,a&&a.contextDep||c&&c.contextDep,a&&a.propDep||c&&c.propDep,function(e,t){var s,o,n=e.shared.shader;return s=a?a.append(e,t):t.def(n,".","frag"),o=c?c.append(e,t):t.def(n,".","vert"),t.def(n+".program("+o+","+s+")")}),{frag:a,vert:c,progVar:e,program:l}}function fe(e){function p(e,t){if(e in c){var d,i=0|c[e];return t?l.offset=i:l.instances=i,n(function(e){return t&&(e.OFFSET=i),i})}if(e in a)return d=a[e],r(d,function(e,n){var s=e.invoke(n,d);return t&&(e.OFFSET=s),s});if(t){{if(f)return n(function(e){return e.OFFSET=0});if(u)return new s(o.thisDep,o.contextDep,o.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")})}}else if(u)return new s(o.thisDep,o.contextDep,o.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")});return null}var c=e.static,a=e.dynamic,l={},u=!1,o=function(){if("vao"in c){var t,e=c.vao;return null!==e&&null===g.getVAO(e)&&(e=g.createVAO(e)),u=!0,l.vao=e,n(function(t){var n=g.getVAO(e);return n?t.link(n):"null"})}return"vao"in a?(u=!0,t=a.vao,r(t,function(e,n){var s=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+s+")")})):null}(),f=!1,i=function(){if("elements"in c){var t,i,e=c.elements;return l.elements=e,N(e)?(t=l.elements=d.create(e,!0),e=d.getElements(t),f=!0):e&&(e=d.getElements(e),f=!0),t=n(function(t){if(e){var s=t.link(e);return t.ELEMENTS=s}return t.ELEMENTS=null}),t.value=e,t}return"elements"in a?(f=!0,i=a.elements,r(i,function(e,t){var o=(n=e.shared).isBufferArgs,n=n.elements,s=e.invoke(t,i),a=t.def("null");return o=t.def(o,"(",s,")"),s=e.cond(o).then(a,"=",n,".createStream(",s,");").else(a,"=",n,".getElements(",s,");"),t.entry(s),t.exit(e.cond(o).then(n,".destroyStream(",a,");")),e.ELEMENTS=a})):u?new s(o.thisDep,o.contextDep,o.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")}):null}(),h=p("offset",!0),v=function(){if("primitive"in c){var e,t=c.primitive;return l.primitive=t,n(function(){return D[t]})}return"primitive"in a?(e=a.primitive,r(e,function(t,n){var s=t.constants.primTypes,o=t.invoke(n,e);return n.def(s,"[",o,"]")})):f?m(i)?n(i.value?function(e,t){return t.def(e.ELEMENTS,".primType")}:function(){return 4}):new s(i.thisDep,i.contextDep,i.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)}):u?new s(o.thisDep,o.contextDep,o.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:4")}):null}(),b=function(){if("count"in c){var e,t=0|c.count;return l.count=t,n(function(){return t})}return"count"in a?(e=a.count,r(e,function(t,n){return t.invoke(n,e)})):f?m(i)?i?h?new s(h.thisDep,h.contextDep,h.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):n(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):n(function(){return-1}):new s(i.thisDep||h.thisDep,i.contextDep||h.contextDep,i.propDep||h.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}):u?new s(o.thisDep,o.contextDep,o.propDep,function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}):null}(),j=p("instances",!1);return{elements:i,primitive:v,count:b,instances:j,offset:h,vao:o,vaoActive:u,elementsActive:f,static:l}}function he(e){var i=e.static,a=e.dynamic,s={};return Object.keys(i).forEach(function(e){var a=i[e],d=o.id(e),t=new P;if(N(a))t.state=1,t.buffer=c.getBuffer(c.create(a,34962,!1,!0)),t.type=0;else if(l=c.getBuffer(a))t.state=1,t.buffer=l,t.type=0;else if("constant"in a)r=a.constant,t.buffer="null",t.state=2,"number"==typeof r?t.x=r:w.forEach(function(e,n){n<r.length&&(t[e]=r[n])});else{var r,l=N(a.buffer)?c.getBuffer(c.create(a.buffer,34962,!1,!0)):c.getBuffer(a.buffer),h=0|a.offset,m=0|a.stride,f=0|a.size,p=!!a.normalized,u=0;"type"in a&&(u=A[a.type]),a=0|a.divisor,t.buffer=l,t.state=1,t.size=f,t.normalized=p,t.type=u||l.dtype,t.offset=h,t.stride=m,t.divisor=a}s[e]=n(function(e){var s,o=e.attribCache;return d in o?o[d]:(s={isStream:!1},Object.keys(t).forEach(function(e){s[e]=t[e]}),t.buffer&&(s.buffer=e.link(t.buffer),s.type=s.type||s.buffer+".dtype"),o[d]=s)})}),Object.keys(a).forEach(function(e){var t=a[e];s[e]=r(t,function(e,n){function r(e){n(o[e],"=",s,".",e,"|0;")}var i,c,s=e.invoke(n,t),a=e.shared,u=e.constants,d=a.isBufferArgs,o=(a=a.buffer,{isStream:n.def(!1)}),l=new P;return l.state=1,Object.keys(l).forEach(function(e){o[e]=n.def(""+l[e])}),i=o.buffer,c=o.type,n("if(",d,"(",s,")){",o.isStream,"=true;",i,"=",a,".createStream(",34962,",",s,");",c,"=",i,".dtype;","}else{",i,"=",a,".getBuffer(",s,");","if(",i,"){",c,"=",i,".dtype;",'}else if("constant" in ',s,"){",o.state,"=",2,";","if(typeof "+s+'.constant === "number"){',o[w[0]],"=",s,".constant;",w.slice(1).map(function(e){return o[e]}).join("="),"=0;","}else{",w.map(function(e,t){return o[e]+"="+s+".constant.length>"+t+"?"+s+".constant["+t+"]:0;"}).join(""),"}}else{","if(",d,"(",s,".buffer)){",i,"=",a,".createStream(",34962,",",s,".buffer);","}else{",i,"=",a,".getBuffer(",s,".buffer);","}",c,'="type" in ',s,"?",u.glTypes,"[",s,".type]:",i,".dtype;",o.normalized,"=!!",s,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",o.isStream,"){",a,".destroyStream(",i,");","}"),o})}),s}function de(e,t,o,a){function v(e){var t=_[e];t&&(f[e]=t)}var l,d,j,y,m=function(e,t){if("string"==typeof(n=e.static).frag&&"string"==typeof n.vert){if(0<Object.keys(t.dynamic).length)return null;var o,i,n=t.static,s=Object.keys(n);if(0<s.length&&"number"==typeof n[s[0]]){for(i=[],o=0;o<s.length;++o)i.push([0|n[s[o]],s[o]]);return i}}return null}(e,t),_=function(e,t){function o(e){if(e in i){n=i[e],e=!0;var n,o,c,l,d=0|n.x,u=0|n.y;return"width"in n?c=0|n.width:e=!1,"height"in n?l=0|n.height:e=!1,new s(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,function(e,t){var s,o=e.shared.context,i=c;return"width"in n||(i=t.def(o,".","framebufferWidth","-",d)),s=l,"height"in n||(s=t.def(o,".","framebufferHeight","-",u)),[d,u,i,s]})}return e in a?(o=a[e],e=r(o,function(e,t){var n=e.invoke(t,o),s=e.shared.context,i=t.def(n,".x|0"),a=t.def(n,".y|0");return[i,a,t.def('"width" in ',n,"?",n,".width|0:","(",s,".","framebufferWidth","-",i,")"),n=t.def('"height" in ',n,"?",n,".height|0:","(",s,".","framebufferHeight","-",a,")")]}),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e):t?new s(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".","framebufferWidth"),t.def(n,".","framebufferHeight")]}):null}var c,i=e.static,a=e.dynamic;return(e=o("viewport"))&&(c=e,e=new s(e.thisDep,e.contextDep,e.propDep,function(e,t){var n=c.append(e,t),s=e.shared.context;return t.set(s,".viewportWidth",n[2]),t.set(s,".viewportHeight",n[3]),n})),{viewport:e,scissor_box:o("scissor.box")}}(e,l=ge(e)),h=fe(e),f=function(e){var o=e.static,i=e.dynamic,s={};return W.forEach(function(e){function t(t,c){if(e in o){var l,d=t(o[e]);s[a]=n(function(){return d})}else e in i&&(l=i[e],s[a]=r(l,function(e,t){return c(e,t,e.invoke(t,l))}))}var a=H(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return t(function(e){return e},function(e,t,n){return n});case"depth.func":return t(function(e){return B[e]},function(e,t,n){return t.def(e.constants.compareFuncs,"[",n,"]")});case"depth.range":return t(function(e){return e},function(e,t,n){return[t.def("+",n,"[0]"),t=t.def("+",n,"[1]")]});case"blend.func":return t(function(e){return[E["srcRGB"in e?e.srcRGB:e.src],E["dstRGB"in e?e.dstRGB:e.dst],E["srcAlpha"in e?e.srcAlpha:e.src],E["dstAlpha"in e?e.dstAlpha:e.dst]]},function(e,t,n){function s(e,s){return t.def('"',e,s,'" in ',n,"?",n,".",e,s,":",n,".",e)}e=e.constants.blendFuncs;var o=s("src","RGB"),i=s("dst","RGB"),a=(o=t.def(e,"[",o,"]"),t.def(e,"[",s("src","Alpha"),"]"));return[o,i=t.def(e,"[",i,"]"),a,e=t.def(e,"[",s("dst","Alpha"),"]")]});case"blend.equation":return t(function(e){return"string"==typeof e?[T[e],T[e]]:"object"==typeof e?[T[e.rgb],T[e.alpha]]:void 0},function(e,t,n){var s=e.constants.blendEquations,o=t.def(),i=t.def();return(e=e.cond("typeof ",n,'==="string"')).then(o,"=",i,"=",s,"[",n,"];"),e.else(o,"=",s,"[",n,".rgb];",i,"=",s,"[",n,".alpha];"),t(e),[o,i]});case"blend.color":return t(function(e){return u(4,function(t){return+e[t]})},function(e,t,n){return u(4,function(e){return t.def("+",n,"[",e,"]")})});case"stencil.mask":return t(function(e){return 0|e},function(e,t,n){return t.def(n,"|0")});case"stencil.func":return t(function(e){return[B[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]},function(e,t,n){return[e=t.def('"cmp" in ',n,"?",e.constants.compareFuncs,"[",n,".cmp]",":",7680),t.def(n,".ref|0"),t=t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return t(function(t){return["stencil.opBack"===e?1029:1028,z[t.fail||"keep"],z[t.zfail||"keep"],z[t.zpass||"keep"]]},function(t,n,s){function o(e){return n.def('"',e,'" in ',s,"?",i,"[",s,".",e,"]:",7680)}var i=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,o("fail"),o("zfail"),o("zpass")]});case"polygonOffset.offset":return t(function(e){return[0|e.factor,0|e.units]},function(e,t,n){return[t.def(n,".factor|0"),t=t.def(n,".units|0")]});case"cull.face":return t(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,n){return t.def(n,'==="front"?',1028,":",1029)});case"frontFace":return t(function(e){return oe[e]},function(e,t,n){return t.def(n+'==="cw"?2304:2305')});case"colorMask":return t(function(e){return e.map(function(e){return!!e})},function(e,t,n){return u(4,function(e){return"!!"+n+"["+e+"]"})});case"sample.coverage":return t(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,n){return[t.def('"value" in ',n,"?+",n,".value:1"),t=t.def("!!",n,".invert")]})}}),s}(e),p=pe(e,0,m);return v("viewport"),v(H("scissor.box")),j=0<Object.keys(f).length,((l={framebuffer:l,draw:h,shader:p,state:f,dirty:j,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(e){var t,s,o,i=e.static;return e=e.dynamic,"profile"in i?(s=!!i.profile,(t=n(function(){return s})).enable=s):"profile"in e&&(o=e.profile,t=r(o,function(e,t){return e.invoke(t,o)})),t}(e),l.uniforms=function(e){var o=e.static,i=e.dynamic,s={};return Object.keys(o).forEach(function(e){var i,a,t=o[e];"number"==typeof t||"boolean"==typeof t?i=n(function(){return t}):"function"==typeof t?(a=t._reglType,"texture2d"===a||"textureCube"===a?i=n(function(e){return e.link(t)}):"framebuffer"!==a&&"framebufferCube"!==a||(i=n(function(e){return e.link(t.color[0])}))):b(t)&&(i=n(function(e){return e.global.def("[",u(t.length,function(e){return t[e]}),"]")})),i.value=t,s[e]=i}),Object.keys(i).forEach(function(e){var t=i[e];s[e]=r(t,function(e,n){return e.invoke(n,t)})}),s}(o),l.drawVAO=l.scopeVAO=h.vao,!l.drawVAO&&p.program&&!m&&i.angle_instanced_arrays&&h.static.elements)&&(d=!0,(e=p.program.attributes.map(function(e){return e=t.static[e],d=d&&!!e,e}),d&&0<e.length)&&(y=g.getVAO(g.createVAO({attributes:e,elements:h.static.elements})),l.drawVAO=new s(null,null,null,function(e){return e.link(y)}),l.useVAO=!0)),m?l.useVAO=!0:l.attributes=he(t),l.context=function(e){var s=e.static,o=e.dynamic,t={};return Object.keys(s).forEach(function(e){var o=s[e];t[e]=n(function(e){return"number"==typeof o||"boolean"==typeof o?""+o:e.link(o)})}),Object.keys(o).forEach(function(e){var n=o[e];t[e]=r(n,function(e,t){return e.invoke(t,n)})}),t}(a),l}function G(e,t,n){var s=e.shared.context,o=e.scope();Object.keys(n).forEach(function(i){t.save(s,"."+i);var a=n[i].append(e,t);Array.isArray(a)?o(s,".",i,"=[",a.join(),"];"):o(s,".",i,"=",a,";")}),t(o)}function R(e,t,n,s){var o,i,a,c=(o=e.shared).gl,r=o.framebuffer;U&&(a=t.def(o.extensions,".webgl_draw_buffers")),o=(i=e.constants).drawBuffer,i=i.backBuffer,e=n?n.append(e,t):t.def(r,".next"),s||t("if(",e,"!==",r,".cur){"),t("if(",e,"){",c,".bindFramebuffer(",36160,",",e,".framebuffer);"),U&&t(a,".drawBuffersWEBGL(",o,"[",e,".colorAttachments.length]);"),t("}else{",c,".bindFramebuffer(",36160,",null);"),U&&t(a,".drawBuffersWEBGL(",i,");"),t("}",r,".cur=",e,";"),s||t("}")}function ie(e,t,n){var a=e.shared,i=a.gl,c=e.current,r=e.next,o=a.current,l=a.next,s=e.cond(o,".dirty");W.forEach(function(t){if(!((t=H(t))in n.state))if(t in r){a=r[t],h=c[t];var a,h,d=u(F[t].length,function(e){return s.def(a,"[",e,"]")});s(e.cond(d.map(function(e,t){return e+"!=="+h+"["+t+"]"}).join("||")).then(i,".",k[t],"(",d,");",d.map(function(e,t){return h+"["+t+"]="+e}).join(";"),";"))}else a=s.def(l,".",t),d=e.cond(a,"!==",o,".",t),s(d),t in L?d(e.cond(a).then(i,".enable(",L[t],");").else(i,".disable(",L[t],");"),o,".",t,"=",a,";"):d(i,".",k[t],"(",a,");",o,".",t,"=",a,";")}),0===Object.keys(n.state).length&&s(o,".dirty=false;"),t(s)}function ee(e,t,n,s){var i,r=e.shared,c=e.current,a=r.current,o=r.gl;me(Object.keys(n)).forEach(function(r){var l,d,h,u=n[r];(!s||s(u))&&(l=u.append(e,t),L[r]?(d=L[r],m(u)?(i=e.link(l,{stable:!0}),t(e.cond(i).then(o,".enable(",d,");").else(o,".disable(",d,");")),t(a,".",r,"=",i,";")):(t(e.cond(l).then(o,".enable(",d,");").else(o,".disable(",d,");")),t(a,".",r,"=",l,";"))):b(l)?(h=c[r],t(o,".",k[r],"(",l,");",l.map(function(e,t){return h+"["+t+"]="+e}).join(";"),";")):m(u)?(i=e.link(l,{stable:!0}),t(o,".",k[r],"(",i,");",a,".",r,"=",i,";")):t(o,".",k[r],"(",l,");",a,".",r,"=",l,";"))})}function V(e,t){M&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function K(e,t,n,s,o){function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function f(e){e(d=t.def(),"=",h(),";"),"string"==typeof o?e(i,".count+=",o,";"):e(i,".count++;"),_&&(s?e(u=t.def(),"=",a,".getNumPendingQueries();"):e(a,".beginQuery(",i,");"))}function p(e){e(i,".cpuTime+=",h(),"-",d,";"),_&&(s?e(a,".pushScopeStats(",u,",",a,".getNumPendingQueries(),",i,");"):e(a,".endQuery();"))}function l(e){var n=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",n,";")}var d,u,r=e.shared,i=e.stats,c=r.current,a=r.timer;if(n=n.profile){if(m(n))return void(n.enable?(f(t),p(t.exit),l("true")):l("false"));l(n=n.append(e,t))}else n=t.def(c,".profile");f(r=e.block()),t("if(",n,"){",r,"}"),p(e=e.block()),t.exit("if(",n,"){",e,"}")}function q(e,t,n,s,o){function a(n,s,o){function u(){t("if(!",a,".buffer){",c,".enableVertexAttribArray(",r,");}");var n=o.type,i=o.size?t.def(o.size,"||",s):s;t("if(",a,".type!==",n,"||",a,".size!==",i,"||",h.map(function(e){return a+"."+e+"!=="+o[e]}).join("||"),"){",c,".bindBuffer(",34962,",",m,".buffer);",c,".vertexAttribPointer(",[r,i,n,o.normalized,o.stride,o.offset],");",a,".type=",n,";",a,".size=",i,";",h.map(function(e){return a+"."+e+"="+o[e]+";"}).join(""),"}"),M&&(n=o.divisor,t("if(",a,".divisor!==",n,"){",e.instancing,".vertexAttribDivisorANGLE(",[r,n],");",a,".divisor=",n,";}"))}function d(){t("if(",a,".buffer){",c,".disableVertexAttribArray(",r,");",a,".buffer=null;","}if(",w.map(function(e,t){return a+"."+e+"!=="+l[t]}).join("||"),"){",c,".vertexAttrib4f(",r,",",l,");",w.map(function(e,t){return a+"."+e+"="+l[t]+";"}).join(""),"}")}var c=i.gl,r=t.def(n,".location"),a=t.def(i.attributes,"[",r,"]");n=o.state;var m=o.buffer,l=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];1===n?u():2===n?d():(t("if(",n,"===",1,"){"),u(),t("}else{"),d(),t("}"))}var i=e.shared;s.forEach(function(s){var i,l,c=s.name,r=n.attributes[c];if(r){if(!o(r))return;i=r.append(e,t)}else{if(!o(ue))return;l=e.scopeAttrib(c),i={},Object.keys(new P).forEach(function(e){i[e]=t.def(l,".",e)})}a(e.link(s),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(s.info.type),i)})}function Y(e,t,n,s,i,a){for(var r,y=e.shared,p=y.gl,j=0;j<s.length;++j){var l,g,v,d=(f=s[j]).name,c=f.info.type,h=n.uniforms[d],f=e.link(f)+".location";if(h){if(!i(h))continue;if(m(h)){if(d=h.value,35678===c||35680===c)t(p,".uniform1i(",f,",",(c=e.link(d._texture||d.color[0]._texture))+".bind());"),t.exit(c,".unbind();");else if(35674===c||35675===c||35676===c)h=2,35675===c?h=3:35676===c&&(h=4),t(p,".uniformMatrix",h,"fv(",f,",false,",d=e.global.def("new Float32Array(["+Array.prototype.slice.call(d)+"])"),");");else{switch(c){case 5126:r="1f";break;case 35664:r="2f";break;case 35665:r="3f";break;case 35666:r="4f";break;case 35670:case 5124:r="1i";break;case 35671:case 35667:r="2i";break;case 35672:case 35668:r="3i";break;case 35673:case 35669:r="4i"}t(p,".uniform",r,"(",f,",",b(d)?Array.prototype.slice.call(d):d,");")}continue}l=h.append(e,t)}else{if(!i(ue))continue;l=t.def(y.uniforms,"[",o.id(d),"]")}switch(35678===c?t("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}"):35680===c&&t("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}"),d=1,c){case 35678:case 35680:c=t.def(l,"._texture"),t(p,".uniform1i(",f,",",c,".bind());"),t.exit(c,".unbind();");continue;case 5124:case 35670:r="1i";break;case 35667:case 35671:r="2i",d=2;break;case 35668:case 35672:r="3i",d=3;break;case 35669:case 35673:r="4i",d=4;break;case 5126:r="1f";break;case 35664:r="2f",d=2;break;case 35665:r="3f",d=3;break;case 35666:r="4f",d=4;break;case 35674:r="Matrix2fv";break;case 35675:r="Matrix3fv";break;case 35676:r="Matrix4fv"}if("M"===r.charAt(0))t(p,".uniform",r,"(",f,","),f=Math.pow(c-35674+2,2),v=e.global.def("new Float32Array(",f,")"),Array.isArray(l)?t("false,(",u(f,function(e){return v+"["+e+"]="+l[e]}),",",v,")"):t("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",u(f,function(e){return v+"["+e+"]="+l+"["+e+"]"}),",",v,")"),t(");");else{if(1<d){c=[],g=[];for(h=0;h<d;++h)Array.isArray(l)?g.push(l[h]):g.push(t.def(l+"["+h+"]")),a&&c.push(t.def());a&&t("if(!",e.batchId,"||",c.map(function(e,t){return e+"!=="+g[t]}).join("||"),"){",c.map(function(e,t){return e+"="+g[t]+";"}).join("")),t(p,".uniform",r,"(",f,",",g.join(","),");")}else a&&(c=t.def(),t("if(!",e.batchId,"||",c,"!==",l,"){",c,"=",l,";")),t(p,".uniform",r,"(",f,",",l,");");a&&t("}")}}}function X(e,t,n,s){function f(o){var i=r[o];return i?i.contextDep&&s.contextDynamic||i.propDep?i.append(e,n):i.append(e,t):t.def(p,".",o)}function j(){function e(){n(g,".drawElementsInstancedANGLE(",[h,a,c,d+"<<(("+c+"-5121)>>1)",o],");")}function t(){n(g,".drawArraysInstancedANGLE(",[h,d,a,o],");")}i&&"null"!==i?v?e():(n("if(",i,"){"),e(),n("}else{"),t(),n("}")):t()}function b(){function e(){n(l+".drawElements("+[h,a,c,d+"<<(("+c+"-5121)>>1)"]+");")}function t(){n(l+".drawArrays("+[h,d,a]+");")}i&&"null"!==i?v?e():(n("if(",i,"){"),e(),n("}else{"),t(),n("}")):t()}var o,c,g,v,u=e.shared,l=u.gl,p=u.draw,r=s.draw,i=function(){var o=r.elements,i=t;return o?((o.contextDep&&s.contextDynamic||o.propDep)&&(i=n),o=o.append(e,i),r.elementsActive&&i("if("+o+")"+l+".bindBuffer(34963,"+o+".buffer.buffer);")):(o=i.def(),i(o,"=",p,".","elements",";","if(",o,"){",l,".bindBuffer(",34963,",",o,".buffer.buffer);}","else if(",u.vao,".currentVAO){",o,"=",e.shared.elements+".getElements("+u.vao,".currentVAO.elements);",le?"":"if("+o+")"+l+".bindBuffer(34963,"+o+".buffer.buffer);","}")),o}(),h=f("primitive"),d=f("offset"),a=function(){var o=r.count,i=t;return o?((o.contextDep&&s.contextDynamic||o.propDep)&&(i=n),o=o.append(e,i)):o=i.def(p,".","count"),o}();if("number"==typeof a){if(0===a)return}else n("if(",a,"){"),n.exit("}");M&&(o=f("instances"),g=e.instancing),c=i+".type",v=r.elements&&m(r.elements)&&!r.vaoActive,M&&("number"!=typeof o||0<=o)?"string"==typeof o?(n("if(",o,">0){"),j(),n("}else if(",o,"<0){"),b(),n("}")):j():b()}function te(e,t,n,s,o){return o=(t=J()).proc("body",o),M&&(t.instancing=o.def(t.shared.extensions,".angle_instanced_arrays")),e(t,o,n,s),t.compile().body}function se(e,t,n,s){V(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),q(e,t,n,s.attributes,function(){return!0})),Y(e,t,n,s.uniforms,function(){return!0},!1),X(e,t,t,n)}function ce(e,t,n,s){function o(){return!0}e.batchId="a1",V(e,t),q(e,t,n,s.attributes,o),Y(e,t,n,s.uniforms,o,!1),X(e,t,t,n)}function Z(e,t,n,s){function r(e){return e.contextDep&&d||e.propDep}function l(e){return!r(e)}V(e,t);var o,i,d=n.contextDep,a=t.def(),c=t.def();e.shared.props=c,e.batchId=a,i=e.scope(),o=e.scope(),t(i.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",c,"=","a0","[",a,"];",o,"}",i.exit),n.needsContext&&G(e,o,n.context),n.needsFramebuffer&&R(e,o,n.framebuffer),ee(e,o,n.state,r),n.profile&&r(n.profile)&&K(e,o,n,!1,!0),s?(n.useVAO?n.drawVAO?r(n.drawVAO)?o(e.shared.vao,".setVAO(",n.drawVAO.append(e,o),");"):i(e.shared.vao,".setVAO(",n.drawVAO.append(e,i),");"):i(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(i(e.shared.vao,".setVAO(null);"),q(e,i,n,s.attributes,l),q(e,o,n,s.attributes,r)),Y(e,i,n,s.uniforms,l,!1),Y(e,o,n,s.uniforms,r,!0),X(e,i,o,n)):(t=e.global.def("{}"),s=n.shader.progVar.append(e,o),c=o.def(s,".id"),i=o.def(t,"[",c,"]"),o(e.shared.gl,".useProgram(",s,".program);","if(!",i,"){",i,"=",t,"[",c,"]=",e.link(function(t){return te(ce,e,n,t,2)}),"(",s,");}",i,".call(this,a0[",a,"],",a,");"))}function re(e,t){function a(o){var i=t.shader[o];i&&(i=i.append(e,n),isNaN(i)?n.set(s.shader,"."+o,i):n.set(s.shader,"."+o,e.link(i,{stable:!0})))}n=e.proc("scope",3),e.batchId="a2";var n,i,s=e.shared,r=s.current;(G(e,n,t.context),t.framebuffer&&t.framebuffer.append(e,n),me(Object.keys(t.state)).forEach(function(o){var a=t.state[o],i=a.append(e,n);b(i)?i.forEach(function(t,s){isNaN(t)?n.set(e.next[o],"["+s+"]",t):n.set(e.next[o],"["+s+"]",e.link(t,{stable:!0}))}):m(a)?n.set(s.next,"."+o,e.link(i,{stable:!0})):n.set(s.next,"."+o,i)}),K(e,n,t,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(o){var i=t.draw[o];i&&(i=i.append(e,n),isNaN(i)?n.set(s.draw,"."+o,i):n.set(s.draw,"."+o,e.link(i),{stable:!0}))}),Object.keys(t.uniforms).forEach(function(i){var a=t.uniforms[i].append(e,n);Array.isArray(a)&&(a="["+a.map(function(t){return isNaN(t)?t:e.link(t,{stable:!0})})+"]"),n.set(s.uniforms,"["+e.link(o.id(i),{stable:!0})+"]",a)}),Object.keys(t.attributes).forEach(function(s){var o=t.attributes[s].append(e,n),i=e.scopeAttrib(s);Object.keys(new P).forEach(function(e){n.set(i,"."+e,o[e])})}),t.scopeVAO)&&(i=t.scopeVAO.append(e,n),isNaN(i)?n.set(s.vao,".targetVAO",i):n.set(s.vao,".targetVAO",e.link(i,{stable:!0}))),a("vert"),a("frag"),0<Object.keys(t.state).length&&(n(r,".dirty=true;"),n.exit(r,".dirty=true;")),n("a1(",e.shared.context,",a0,",e.batchId,");")}function ne(e,t,n){if(s=t.static[n],s&&function(e){if("object"==typeof e&&!b(e)){for(var n=Object.keys(e),t=0;t<n.length;++t)if(l.isDynamic(e[n[t]]))return!0;return!1}}(s)){var s,o=e.global,u=Object.keys(s),i=!1,a=!1,c=!1,d=e.global.def("{}");u.forEach(function(t){var n=s[t];if(l.isDynamic(n))"function"==typeof n&&(n=s[t]=l.unbox(n)),t=r(n,null),i=i||t.thisDep,c=c||t.propDep,a=a||t.contextDep;else{switch(o(d,".",t,"="),typeof n){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(e.link(n))}o(";")}}),t.dynamic[n]=new l.DynamicVariable(4,{thisDep:i,contextDep:a,propDep:c,ref:d,append:function(e,t){u.forEach(function(n){var o=s[n];l.isDynamic(o)&&(o=e.invoke(t,o),t(d,".",n,"=",o,";"))})}}),delete t.static[n]}}P=g.Record,T={add:32774,subtract:32778,"reverse subtract":32779},i.ext_blend_minmax&&(T.min=32775,T.max=32776);var T,P,$,Q,M=i.angle_instanced_arrays,U=i.webgl_draw_buffers,le=i.oes_vertex_array_object,F={dirty:!0,profile:x.profile},I={},W=[],L={},k={},ae;return S("dither",3024),S("blend.enable",3042),C("blend.color","blendColor",[0,0,0,0]),C("blend.equation","blendEquationSeparate",[32774,32774]),C("blend.func","blendFuncSeparate",[1,0,1,0]),S("depth.enable",2929,!0),C("depth.func","depthFunc",513),C("depth.range","depthRange",[0,1]),C("depth.mask","depthMask",!0),C("colorMask","colorMask",[!0,!0,!0,!0]),S("cull.enable",2884),C("cull.face","cullFace",1029),C("frontFace","frontFace",2305),C("lineWidth","lineWidth",1),S("polygonOffset.enable",32823),C("polygonOffset.offset","polygonOffset",[0,0]),S("sample.alpha",32926),S("sample.enable",32928),C("sample.coverage","sampleCoverage",[1,!1]),S("stencil.enable",2960),C("stencil.mask","stencilMask",-1),C("stencil.func","stencilFunc",[519,0,-1]),C("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),C("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),S("scissor.enable",3089),C("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),C("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),Q={gl:e,context:y,strings:o,next:I,current:F,draw:j,elements:d,buffer:c,shader:v,attributes:g.state,vao:g,uniforms:p,framebuffer:f,extensions:i,timer:_,isBufferArgs:N},$={primTypes:D,compareFuncs:B,blendFuncs:E,blendEquations:T,stencilOps:z,glTypes:A,orientationType:oe},U&&($.backBuffer=[1029],$.drawBuffer=u(a.maxDrawbuffers,function(e){return 0===e?[0]:u(e,function(e){return 36064+e})})),ae=0,{next:I,current:F,procs:function(){var h,e=J(),l=e.proc("poll"),n=e.proc("refresh"),c=e.block();l(c),n(c);var m,s=(r=e.shared).gl,d=r.next,o=r.current;c(o,".dirty=false;"),R(e,l),R(e,n,null,!0),M&&(m=e.link(M)),i.oes_vertex_array_object&&n(e.link(i.oes_vertex_array_object),".bindVertexArrayOES(null);");var r=n.def(r.attributes),t=n.def(0),f=e.cond(t,".buffer");return f.then(s,".enableVertexAttribArray(i);",s,".bindBuffer(",34962,",",t,".buffer.buffer);",s,".vertexAttribPointer(i,",t,".size,",t,".type,",t,".normalized,",t,".stride,",t,".offset);").else(s,".disableVertexAttribArray(i);",s,".vertexAttrib4f(i,",t,".x,",t,".y,",t,".z,",t,".w);",t,".buffer=null;"),h=e.link(a.maxAttributes,{stable:!0}),n("for(var i=0;i<",h,";++i){",t,"=",r,"[i];",f,"}"),M&&n("for(var i=0;i<",h,";++i){",m,".vertexAttribDivisorANGLE(i,",r,"[i].divisor);","}"),n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(L).forEach(function(t){var r=L[t],i=c.def(d,".",t),a=e.block();a("if(",i,"){",s,".enable(",r,")}else{",s,".disable(",r,")}",o,".",t,"=",i,";"),n(a),l("if(",i,"!==",o,".",t,"){",a,"}")}),Object.keys(k).forEach(function(t){var i,r,h=k[t],m=F[t],a=e.block();a(s,".",h,"("),b(m)?(h=m.length,i=e.global.def(d,".",t),r=e.global.def(o,".",t),a(u(h,function(e){return i+"["+e+"]"}),");",u(h,function(e){return r+"["+e+"]="+i+"["+e+"];"}).join("")),l("if(",u(h,function(e){return i+"["+e+"]!=="+r+"["+e+"]"}).join("||"),"){",a,"}")):(i=c.def(d,".",t),r=c.def(o,".",t),a(i,");",o,".",t,"=",i,";"),l("if(",i,"!==",r,"){",a,"}")),n(a)}),e.compile()}(),compile:function(e,n,s,o,i){var r,a=J();return a.stats=a.link(i),Object.keys(n.static).forEach(function(e){ne(a,n,e)}),Ae.forEach(function(t){ne(a,e,t)}),r=de(e,n,s,o),r.shader.program&&(r.shader.program.attributes.sort(function(e,t){return e.name<t.name?-1:1}),r.shader.program.uniforms.sort(function(e,t){return e.name<t.name?-1:1})),function(e,t){if(n=e.proc("draw",1),V(e,n),G(e,n,t.context),R(e,n,t.framebuffer),ie(e,n,t),ee(e,n,t.state),K(e,n,t,!1,!0),s=t.shader.progVar.append(e,n),n(e.shared.gl,".useProgram(",s,".program);"),t.shader.program)se(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var n,s,i=e.global.def("{}"),a=n.def(s,".id"),o=n.def(i,"[",a,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link(function(n){return te(se,e,t,n,1)}),"(",s,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(a,r),re(a,r),function(e,t){function c(e){return e.contextDep&&s||e.propDep}n=e.proc("batch",2),e.batchId="0",V(e,n);var n,i,a,r,s=!1,o=!0;Object.keys(t.context).forEach(function(e){s=s||t.context[e].propDep}),s||(G(e,n,t.context),o=!1),i=!1,(a=t.framebuffer)?(a.propDep?s=i=!0:a.contextDep&&s&&(i=!0),i||R(e,n,a)):R(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(s=!0),ie(e,n,t),ee(e,n,t.state,function(e){return!c(e)}),t.profile&&c(t.profile)||K(e,n,t,!1,"a1"),t.contextDep=s,t.needsContext=o,t.needsFramebuffer=i,(o=t.shader.progVar).contextDep&&s||o.propDep?Z(e,n,t,null):(o=o.append(e,n),n(e.shared.gl,".useProgram(",o,".program);"),t.shader.program?Z(e,n,t,t.shader.program):(n(e.shared.vao,".setVAO(null);"),a=e.global.def("{}"),r=(i=n.def(o,".id"),n.def(a,"[",i,"]")),n(e.cond(r).then(r,".call(this,a0,a1);").else(r,"=",a,"[",i,"]=",e.link(function(n){return te(Z,e,t,n,2)}),"(",o,");",r,".call(this,a0,a1);")))),0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(a,r),t(a.compile(),{destroy:function(){r.shader.program.destroy()}})}}}function te(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var t=function(e,t){for(var s=Object.keys(t),n=0;n<s.length;++n)e[s[n]]=t[s[n]];return e},xe=0,l={DynamicVariable:j,define:function(e,t){return new j(e,ne(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof j},unbox:function e(t,n){return"function"==typeof t?new j(0,t):"number"==typeof t||"boolean"==typeof t?new j(5,t):Array.isArray(t)?new j(6,t.map(function(t,s){return e(t,n+"["+s+"]")})):t instanceof j?t:void 0},accessor:ne},W={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},X="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},e=Q();e.zero=Q();var o,d,C,M,G,we=function(t,n){a=1,n.ext_texture_filter_anisotropic&&(a=t.getParameter(34047));var s,o,i,a,r=1,c=1;return n.webgl_draw_buffers&&(r=t.getParameter(34852),c=t.getParameter(36063)),s=!!n.oes_texture_float,s&&(s=t.createTexture(),t.bindTexture(3553,s),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null),i=t.createFramebuffer(),t.bindFramebuffer(36160,i),t.framebufferTexture2D(36160,36064,3553,s,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160)?s=!1:(t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384),o=e.allocType(5126,4),t.readPixels(0,0,1,1,6408,5126,o),t.getError()?s=!1:(t.deleteFramebuffer(i),t.deleteTexture(s),s=1===o[0]),e.freeType(o))),o=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(o=t.createTexture(),i=e.allocType(5121,36),t.activeTexture(33984),t.bindTexture(34067,o),t.texImage2D(34069,0,6408,3,3,0,6408,5121,i),e.freeType(i),t.bindTexture(34067,null),t.deleteTexture(o),o=!t.getError()),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(n).filter(function(e){return!!n[e]}),maxAnisotropic:a,maxDrawbuffers:r,maxColorAttachments:c,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:s,npotTextureCube:o}},a=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},c=function(e){return Object.keys(e).map(function(t){return e[t]})},T={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(t,n,s,o){if(a=1,n.length)for(i=0;i<n.length;++i)a*=n[i];else a=0;switch(s=o||e.allocType(s,a),n.length){case 0:break;case 1:for(o=n[0],n=0;n<o;++n)s[n]=t[n];break;case 2:for(o=n[0],n=n[1],i=a=0;i<o;++i)for(var i,a,c=t[i],r=0;r<n;++r)s[a++]=c[r];break;case 3:ae(t,n[0],n[1],n[2],s,0);break;default:Z(t,n,0,s,0)}return s}},L={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},A={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},se={dynamic:35048,stream:35040,static:35044},H=T.flatten,ie=T.shape,v=[];v[5120]=1,v[5122]=2,v[5124]=4,v[5121]=1,v[5123]=2,v[5125]=4,v[5126]=4;var D={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fe=new Float32Array(1),be=new Uint32Array(fe.buffer),ve=[9984,9986,9985,9987],R=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1,h[34041]=h[6410]=2,h[6407]=h[35904]=3,h[6408]=h[35906]=4;var P=y("HTMLCanvasElement"),I=y("OffscreenCanvas"),pe=y("CanvasRenderingContext2D"),U=y("ImageBitmap"),de=y("HTMLImageElement"),le=y("HTMLVideoElement"),je=Object.keys(L).concat([P,I,pe,U,de,le]),O=[];O[5121]=1,O[5126]=4,O[36193]=2,O[5123]=2,O[5125]=4,o=[],o[32854]=2,o[32855]=2,o[36194]=2,o[34041]=4,o[33776]=.5,o[33777]=.5,o[33778]=1,o[33779]=1,o[35986]=.5,o[35987]=1,o[34798]=1,o[35840]=.5,o[35841]=.25,o[35842]=.5,o[35843]=.25,o[36196]=.5,d=[],d[32854]=2,d[32855]=2,d[36194]=2,d[33189]=2,d[36168]=1,d[34041]=4,d[35907]=4,d[34836]=16,d[34842]=8,d[34843]=6,G=function(e,t,n,s,o){function l(e){this.id=h++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,o.profile&&(this.stats={size:0})}function u(t){var n=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete a[t.id],s.renderbufferCount--}i={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041},t.ext_srgb&&(i.srgba=35907),t.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),t.webgl_color_buffer_float&&(i.rgba32f=34836),r=[],Object.keys(i).forEach(function(e){r[i[e]]=e});var i,r,h=0,a={};return l.prototype.decRef=function(){0>=--this.refCount&&u(this)},o.profile&&(s.getTotalRenderbufferSize=function(){var e=0;return Object.keys(a).forEach(function(t){e+=a[t].stats.size}),e}),{create:function(t,n){function u(t,n){var a=0,s=0,l=32854;if("object"==typeof t&&t?("shape"in t?(a=0|(s=t.shape)[0],s=0|s[1]):("radius"in t&&(a=s=0|t.radius),"width"in t&&(a=0|t.width),"height"in t&&(s=0|t.height)),"format"in t&&(l=i[t.format])):"number"==typeof t?(a=0|t,s="number"==typeof n?0|n:a):t||(a=s=1),a!==c.width||s!==c.height||l!==c.format)return u.width=c.width=a,u.height=c.height=s,c.format=l,e.bindRenderbuffer(36161,c.renderbuffer),e.renderbufferStorage(36161,l,a,s),o.profile&&(c.stats.size=d[c.format]*c.width*c.height),u.format=r[c.format],u}var c=new l(e.createRenderbuffer());return a[c.id]=c,s.renderbufferCount++,u(t,n),u.resize=function(t,n){var s=0|t,i=0|n||s;return s===c.width&&i===c.height||(u.width=c.width=s,u.height=c.height=i,e.bindRenderbuffer(36161,c.renderbuffer),e.renderbufferStorage(36161,c.format,s,i),o.profile&&(c.stats.size=d[c.format]*c.width*c.height)),u},u._reglType="renderbuffer",u._renderbuffer=c,o.profile&&(u.stats=c.stats),u.destroy=function(){c.decRef()},u},clear:function(){c(a).forEach(u)},restore:function(){c(a).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},M=[],M[6408]=4,M[6407]=3,C=[],C[5121]=1,C[5126]=4,C[36193]=2;var Ee=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],w=["x","y","z","w"],Ae="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),E={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},B={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},oe={cw:2304,ccw:2305},ue=new s(!1,!1,!1,function(){});return function(e){function M(){if(0===s.length)o&&o.update(),p=null;else{p=W.next(M),z();for(var t,e=s.length-1;0<=e;--e)t=s[e],t&&t(i,null,0);n.flush(),o&&o.update()}}function T(){!p&&0<s.length&&(p=W.next(M))}function x(){p&&(W.cancel(M),p=null)}function F(e){e.preventDefault(),x(),H.forEach(function(e){e()})}function N(){n.getError(),y.restore(),O.restore(),f.restore(),u.restore(),w.restore(),d.restore(),v.restore(),o&&o.restore(),r.procs.refresh(),T(),I.forEach(function(e){e()})}function E(e){function n(e,t){var s={},n={};return Object.keys(e).forEach(function(o){var a,i=e[o];if(l.isDynamic(i))n[o]=l.unbox(i,o);else{if(t&&Array.isArray(i))for(a=0;a<i.length;++a)if(l.isDynamic(i[a]))return void(n[o]=l.unbox(i,o));s[o]=i}}),{dynamic:n,static:s}}var u=n(e.context||{},!0),h=n(e.uniforms||{},!0),m=n(e.attributes||{},!1);e=n(function(e){function s(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(s){n[e+"."+s]=t[s]})}}var n=t({},e);return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),s("blend"),s("depth"),s("cull"),s("stencil"),s("polygonOffset"),s("scissor"),s("sample"),"vao"in e&&(n.vao=e.vao),n}(e),!1);var c={gpuTime:0,cpuTime:0,count:0},o=r.compile(e,m,h,u,c),d=o.draw,a=o.batch,s=o.scope,i=[];return t(function(e,t){var n;if("function"==typeof e)return s.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)s.call(this,null,t,n);else{if(!Array.isArray(e))return s.call(this,e,t,0);for(n=0;n<e.length;++n)s.call(this,e[n],t,n)}else if("number"==typeof e){if(0<e)return a.call(this,function(e){for(;i.length<e;)i.push(null);return i}(0|e),0|e)}else{if(!Array.isArray(e))return d.call(this,e);if(e.length)return a.call(this,e,e.length)}},{stats:c,destroy:function(){o.destroy()}})}function A(e,t){var s,o=0;r.procs.poll(),s=t.color,s&&(n.clearColor(+s[0]||0,+s[1]||0,+s[2]||0,+s[3]||0),o|=16384),"depth"in t&&(n.clearDepth(+t.depth),o|=256),"stencil"in t&&(n.clearStencil(0|t.stencil),o|=1024),n.clear(o)}function V(e){return s.push(e),T(),{cancel:function(){var t=te(s,e);s[t]=function e(){var t=te(s,e);s[t]=s[s.length-1],--s.length,0>=s.length&&x()}}}}function R(){var e=L.viewport,t=L.scissor_box;e[0]=e[1]=t[0]=t[1]=0,i.viewportWidth=i.framebufferWidth=i.drawingBufferWidth=e[2]=t[2]=n.drawingBufferWidth,i.viewportHeight=i.framebufferHeight=i.drawingBufferHeight=e[3]=t[3]=n.drawingBufferHeight}function z(){i.tick+=1,i.time=P(),R(),r.procs.poll()}function D(){u.refresh(),R(),r.procs.refresh(),o&&o.update()}function P(){return(X()-$)/1e3}if(!(e=Ce(e)))return null;if(n=e.gl,b=n.getContextAttributes(),n.isContextLost(),y=function(e,t){function s(t){var s;t=t.toLowerCase();try{s=n[t]=e.getExtension(t)}catch{}return!!s}for(var i,n={},o=0;o<t.extensions.length;++o)if(i=t.extensions[o],!s(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null;return t.optionalExtensions.forEach(s),{extensions:n,restore:function(){Object.keys(n).forEach(function(e){if(n[e]&&!s(e))throw Error("(regl): error restoring extension "+e)})}}}(n,e),!y)return null;var n,b,y,k,_=function(){var t={"":0},e=[""];return{id:function(n){var s=t[n];return s||(s=t[n]=e.length,e.push(n),s)},str:function(t){return e[t]}}}(),a={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},S=e.cachedCode||{},c=y.extensions,o=function(e,t){function l(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function c(e,t,n){var s=r.pop()||new l;s.startQueryIndex=e,s.endQueryIndex=t,s.sum=0,s.stats=n,a.push(s)}if(!t.ext_disjoint_timer_query)return null;var s=[],n=[],r=[],a=[],o=[],i=[];return{beginQuery:function(e){var o=s.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,o),n.push(o),c(n.length-1,n.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){if(0!==(c=n.length)){i.length=Math.max(i.length,c+1),o.length=Math.max(o.length,c+1),o[0]=0;var c,l,d,u,e=i[0]=0;for(l=c=0;l<n.length;++l)d=n[l],t.ext_disjoint_timer_query.getQueryObjectEXT(d,34919)?(e+=t.ext_disjoint_timer_query.getQueryObjectEXT(d,34918),s.push(d)):n[c++]=d,o[l+1]=e,i[l+1]=c;for(n.length=c,l=c=0;l<a.length;++l)u=(e=a[l]).startQueryIndex,d=e.endQueryIndex,e.sum+=o[d]-o[u],u=i[u],(d=i[d])===u?(e.stats.gpuTime+=e.sum/1e6,r.push(e)):(e.startQueryIndex=u,e.endQueryIndex=d,a[c++]=e);a.length=c}},getNumPendingQueries:function(){return n.length},clear:function(){s.push.apply(s,n);for(var e=0;e<s.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(s[e]);n.length=0,s.length=0},restore:function(){n.length=0,s.length=0}}}(0,c),$=X(),h=n.drawingBufferWidth,C=n.drawingBufferHeight,i={tick:0,time:0,viewportWidth:h,viewportHeight:C,framebufferWidth:h,framebufferHeight:C,drawingBufferWidth:h,drawingBufferHeight:C,pixelRatio:e.pixelRatio},g=(h={elements:null,primitive:4,count:-1,offset:0,instances:-1},we(n,c)),f=ye(n,a,e,function(e){return v.destroyBuffer(e)}),j=_e(n,c,f,a),v=Me(n,c,g,a,f,j,h),O=Fe(n,_,a,e),u=ke(n,c,g,function(){r.procs.poll()},i,a,e),w=G(n,c,0,a,e),d=Se(n,c,g,u,w,a),r=ze(n,_,c,g,f,j,0,d,{},v,O,h,i,o,S,e),L=(_=Te(n,d,r.procs.poll,i),r.next),m=n.canvas,s=[],H=[],I=[],B=[e.onDestroy],p=null;return m&&(m.addEventListener("webglcontextlost",F,!1),m.addEventListener("webglcontextrestored",N,!1)),k=d.setFBO=E({framebuffer:l.define.call(null,1,"framebuffer")}),D(),b=t(E,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;6>n;++n)k(t({framebuffer:e.framebuffer.faces[n]},e),A);else k(e,A);else A(0,e)},prop:l.define.bind(null,1),context:l.define.bind(null,2),this:l.define.bind(null,3),draw:E({}),buffer:function(e){return f.create(e,34962,!1,!1)},elements:function(e){return j.create(e,!1)},texture:u.create2D,cube:u.createCube,renderbuffer:w.create,framebuffer:d.create,framebufferCube:d.createCube,vao:v.createVAO,attributes:b,frame:V,on:function(e,t){var n;switch(e){case"frame":return V(t);case"lost":n=H;break;case"restore":n=I;break;case"destroy":n=B}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t){n[e]=n[n.length-1],n.pop();break}}}},limits:g,hasExtension:function(e){return 0<=g.extensions.indexOf(e.toLowerCase())},read:_,destroy:function(){s.length=0,x(),m&&(m.removeEventListener("webglcontextlost",F),m.removeEventListener("webglcontextrestored",N)),O.clear(),d.clear(),w.clear(),v.clear(),u.clear(),j.clear(),f.clear(),o&&o.clear(),B.forEach(function(e){e()})},_gl:n,_refresh:D,poll:function(){z(),o&&o.update()},now:P,stats:a,getCachedCode:function(){return S},preloadCachedCode:function(e){Object.entries(e).forEach(function(e){S[e[0]]=e[1]})}}),e.onDone(null,b),b}}()},30456:function(e,t,n){var i=n(33576),s=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return s(e,t,n)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),o.prototype=Object.create(s.prototype),a(s,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=s(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},14500:function(e,t,n){"use strict";var s=n(53664),o=n(64348),r=n(39640)(),i=n(2304),a=s("%TypeError%"),c=s("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||c(t)!==t)throw new a("`length` must be a positive 32-bit integer");var n,d=arguments.length>2&&!!arguments[2],s=!0,l=!0;return"length"in e&&i&&(n=i(e,"length"),n&&!n.configurable&&(s=!1),n&&!n.writable&&(l=!1)),(s||l||!d)&&(r?o(e,"length",t,!0,!0):o(e,"length",t)),e}},29936:function(e,t,n){e.exports=s;var o=n(61252).EventEmitter;function s(){o.call(this)}n(6768)(s,o),s.Readable=n(12348),s.Writable=n(11288),s.Duplex=n(15316),s.Transform=n(22477),s.PassThrough=n(27136),s.finished=n(15932),s.pipeline=n(38180),s.Stream=s,s.prototype.pipe=function(e,t){var i,n=this;function d(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",d),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",c),n.on("close",l)),i=!1;function c(){i||(i=!0,e.end())}function l(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(s(),0===o.listenerCount(this,"error"))throw e}function s(){n.removeListener("data",d),e.removeListener("drain",r),n.removeListener("end",c),n.removeListener("close",l),n.removeListener("error",a),e.removeListener("error",a),n.removeListener("end",s),n.removeListener("close",s),e.removeListener("close",s)}return n.on("error",a),e.on("error",a),n.on("end",s),n.on("close",s),e.on("close",s),e.emit("pipe",n),e}},92784:function(e){"use strict";var n={};function t(e,t,s){s||(s=Error);var o=function(e){var n,s;function o(n,s,o){return e.call(this,function(e,n,s){return"string"==typeof t?t:t(e,n,s)}(n,s,o))||this}return s=e,(n=o).prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s,o}(s);o.prototype.name=s.name,o.prototype.code=e,n[e]=o}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}t("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(e,t,n){if("string"==typeof t&&(r="not ",t.substr(0,4)===r)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))a="The ".concat(e," ").concat(o," ").concat(s(t,"type"));else{var o,i,a,r,c,l=("number"!=typeof i&&(i=0),i+1>(c=e).length||-1===c.indexOf(".",i)?"argument":"property");a='The "'.concat(e,'" ').concat(l," ").concat(o," ").concat(s(t,"type"))}return a+". Received type ".concat(typeof n)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.i=n},15316:function(e,t,n){"use strict";var o,i,a,r,c,l=n(4168),d=Object.keys||function(e){var n,t=[];for(n in e)t.push(n);return t};e.exports=s,r=n(12348),i=n(11288),n(6768)(s,r);for(c=d(i.prototype),a=0;a<c.length;a++)o=c[a],s.prototype[o]||(s.prototype[o]=i.prototype[o]);function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||l.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},27136:function(e,t,n){"use strict";e.exports=s;var o=n(22477);function s(e){if(!(this instanceof s))return new s(e);o.call(this,e)}n(6768)(s,o),s.prototype._transform=function(e,t,n){n(null,e)}},12348:function(e,t,n){"use strict";i=n(4168),e.exports=o,o.ReadableState=x,n(61252).EventEmitter;var i,a,r,c,m,g,v,w,C=function(e,t){return e.listeners(t).length},l=n(4776),u=n(33576).Buffer,B=n.g.Uint8Array||function(){},j=n(19768),s=j&&j.debuglog?j.debuglog("stream"):function(){},H=n(47264),p=n(55324),P=n(24888).getHighWaterMark,h=n(92784).i,R=h.ERR_INVALID_ARG_TYPE,D=h.ERR_STREAM_PUSH_AFTER_EOF,T=h.ERR_METHOD_NOT_IMPLEMENTED,F=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(6768)(o,l),r=p.errorOrDestroy,m=["error","close","destroy","pause","resume"];function x(e,t,s){c=c||n(15316),e=e||{},"boolean"!=typeof s&&(s=t instanceof c),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=P(this,e,"readableHighWaterMark",s),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(a||(a=n(86032).o),this.decoder=new a(e.encoding),this.encoding=e.encoding)}function o(e){if(c=c||n(15316),!(this instanceof o))return new o(e);var t=this instanceof c;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function E(e,t,n,o,i){s("readableAddChunk",t);var c,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(s("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?d(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,k(e)))}}(e,a);else if(i||(c=function(e,t){var n,s;return n=t,u.isBuffer(n)||n instanceof B||"string"==typeof t||void 0===t||e.objectMode||(s=new R("chunk",["string","Buffer","Uint8Array"],t)),s}(a,t)),c)r(e,c);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),o)a.endEmitted?r(e,new F):_(e,a,t,!0);else if(a.ended)r(e,new D);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?_(e,a,t,!1):y(e,a)):_(e,a,t,!1)}else o||(a.reading=!1,y(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function _(e,t,n,s){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,s?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e)),y(e,t)}Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=p.destroy,o.prototype._undestroy=p.undestroy,o.prototype._destroy=function(e,t){t(e)},o.prototype.push=function(e,t){var n,s=this._readableState;return s.objectMode?n=!0:"string"==typeof e&&((t=t||s.defaultEncoding)!==s.encoding&&(e=u.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},o.prototype.unshift=function(e){return E(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(e){a||(a=n(86032).o),o=new a(e),this._readableState.decoder=o,this._readableState.encoding=this._readableState.decoder.encoding;for(var o,t=this._readableState.buffer.head,s="";null!==t;)s+=o.write(t.data),t=t.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this},w=1073741824;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function d(e){var t=e._readableState;s("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(s("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(k,e))}function k(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,b(e)}function y(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(z,e,t))}function z(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(s("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){s("readable nexttick read 0"),e.read(0)}function L(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function f(e){var t=e._readableState;s("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(I,t,e))}function I(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function M(e,t){for(var n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1}o.prototype.read=function(e){s("read",e),e=parseInt(e,10);var n,o,t=this._readableState,i=e;return 0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended)?(s("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?f(this):d(this),null):0===(e=S(e,t))&&t.ended?(0===t.length&&f(this),null):(n=t.needReadable,s("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&s("length less than watermark",n=!0),t.ended||t.reading?s("reading or ended",n=!1):n&&(s("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(i,t))),null===(o=e>0?A(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&f(this)),null!==o&&this.emit("data",o),o)},o.prototype._read=function(){r(this,new T("_read()"))},o.prototype.pipe=function(e,t){var c,l,u,o=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,s("pipe count=%d opts=%j",n.pipesCount,t),l=t&&!1===t.end||e===i.stdout||e===i.stderr?a:p;function p(){s("onend"),e.end()}n.endEmitted?i.nextTick(l):o.once("end",l),e.on("unpipe",function t(i,r){s("onunpipe"),i===o&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,s("cleanup"),e.removeListener("close",m),e.removeListener("finish",d),e.removeListener("drain",c),e.removeListener("error",h),e.removeListener("unpipe",t),o.removeListener("end",p),o.removeListener("end",a),o.removeListener("data",f),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}),c=function(e){return function(){var t=e._readableState;s("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&C(e,"data")&&(t.flowing=!0,b(e))}}(o),e.on("drain",c),u=!1;function f(t){s("ondata");var i=e.write(t);s("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==M(n.pipes,e))&&!u&&(s("false write response, pause",n.awaitDrain),n.awaitDrain++),o.pause())}function h(t){s("onerror",t),a(),e.removeListener("error",h),0===C(e,"error")&&r(e,t)}function m(){e.removeListener("finish",d),a()}function d(){s("onfinish"),e.removeListener("close",m),a()}function a(){s("unpipe"),o.unpipe(e)}return o.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",m),e.once("finish",d),e.emit("pipe",o),n.flowing||(s("pipe resume"),o.resume()),e},o.prototype.unpipe=function(e){var n,s,i,a,t=this._readableState,o={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,o)),this;if(!e){i=t.pipes,a=t.pipesCount,t.pipes=null,t.pipesCount=0,t.flowing=!1;for(n=0;n<a;n++)i[n].emit("unpipe",this,{hasUnpiped:!1});return this}return s=M(t.pipes,e),-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,o)),this},o.prototype.on=function(e,t){var o=l.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,s("on readable",n.length,n.reading),n.length?d(this):n.reading||i.nextTick(N,this))),o},o.prototype.addListener=o.prototype.on,o.prototype.removeListener=function(e,t){var n=l.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(O,this),n},o.prototype.removeAllListeners=function(e){var t=l.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(O,this),t},o.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(L,e,t))}(this,e)),e.paused=!1,this},o.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},o.prototype.wrap=function(e){var n,o,i=this,t=this._readableState,a=!1;for(o in e.on("end",function(){if(s("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(n){s("wrapped data"),t.decoder&&(n=t.decoder.write(n)),t.objectMode&&n==null||(t.objectMode||n&&n.length)&&(i.push(n)||(a=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(n=0;n<m.length;n++)e.on(m[n],this.emit.bind(this,m[n]));return this._read=function(t){s("wrapped _read",t),a&&(a=!1,e.resume())},this},"function"==typeof Symbol&&(o.prototype[Symbol.asyncIterator]=function(){return void 0===v&&(v=n(60328)),v(this)}),Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(o.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(o.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),o._fromList=A,Object.defineProperty(o.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(o.from=function(e,t){return void 0===g&&(g=n(90555)),g(o,e,t)})},22477:function(e,t,n){"use strict";e.exports=s;var o=n(92784).i,d=o.ERR_METHOD_NOT_IMPLEMENTED,r=o.ERR_MULTIPLE_CALLBACK,h=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=o.ERR_TRANSFORM_WITH_LENGTH_0,i=n(15316);function l(e,t){var n,o,s=this._transformState;if(s.transforming=!1,o=s.writecb,null===o)return this.emit("error",new r);s.writechunk=null,s.writecb=null,t!=null&&this.push(t),o(e),n=this._readableState,n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);i.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?a(this,null,null):this._flush(function(t,n){a(e,t,n)})}function a(e,t,n){if(t)return e.emit("error",t);if(n!=null&&e.push(n),e._writableState.length)throw new c;if(e._transformState.transforming)throw new h;return e.push(null)}n(6768)(s,i),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){n(new d("_transform()"))},s.prototype._write=function(e,t,n){var o,s=this._transformState;s.writecb=n,s.writechunk=e,s.writeencoding=t,!s.transforming&&(o=this._readableState,(s.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark))},s.prototype._read=function(){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},s.prototype._destroy=function(e,t){i.prototype._destroy.call(this,e,function(e){t(e)})}},11288:function(e,t,n){"use strict";i=n(4168);function b(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var o,s=e.entry;for(e.entry=null;s;)o=s.callback,t.pendingcb--,o(void 0),s=s.next;t.corkedRequestsFree.next=e}(t,e)}}e.exports=s,s.WritableState=r;var i,c,d,w={deprecate:n(96656)},v=n(4776),u=n(33576).Buffer,j=n.g.Uint8Array||function(){},h=n(55324),S=n(24888).getHighWaterMark,o=n(92784).i,A=o.ERR_INVALID_ARG_TYPE,k=o.ERR_METHOD_NOT_IMPLEMENTED,E=o.ERR_MULTIPLE_CALLBACK,F=o.ERR_STREAM_CANNOT_PIPE,C=o.ERR_STREAM_DESTROYED,x=o.ERR_STREAM_NULL_VALUES,y=o.ERR_STREAM_WRITE_AFTER_END,_=o.ERR_UNKNOWN_ENCODING,a=h.errorOrDestroy;function O(){}function r(e,t,s){c=c||n(15316),e=e||{},"boolean"!=typeof s&&(s=t instanceof c),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=S(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var o,n=e._writableState,r=n.sync,s=n.writecb;if("function"!=typeof s)throw new E;(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0})(n),t?!function(e,t,n,s,o){--t.pendingcb,n?(i.nextTick(o,s),i.nextTick(l,e,t),e._writableState.errorEmitted=!0,a(e,s)):(o(s),e._writableState.errorEmitted=!0,a(e,s),l(e,t))}(e,n,r,t,s):(o=f(n)||e.destroyed,o||n.corked||n.bufferProcessing||!n.bufferedRequest||p(e,n),r?i.nextTick(g,e,n,o,s):g(e,n,o,s))}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function s(e){var t=this instanceof(c=c||n(15316));if(!t&&!d.call(s,this))return new s(e);this._writableState=new r(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),v.call(this)}function m(e,t,n,s,o,i,a){t.writelen=s,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new C("write")):n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function g(e,t,n,s){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,s(),l(e,t)}function p(e,t){if(t.bufferProcessing=!0,n=t.bufferedRequest,e._writev&&n&&n.next){var n,i,a,c=t.bufferedRequestCount,o=new Array(c),s=t.corkedRequestsFree;s.entry=n;for(i=0,a=!0;n;)o[i]=n,n.isBuf||(a=!1),n=n.next,i+=1;o.allBuffers=a,m(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new b(t),t.bufferedRequestCount=0}else{for(;n;){var r=n.chunk,l=n.encoding,d=n.callback;if(m(e,t,!1,t.objectMode?1:r.length,r,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function f(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function M(e,t){e._final(function(n){t.pendingcb--,n&&a(e,n),t.prefinished=!0,e.emit("prefinish"),l(e,t)})}function l(e,t){var n,s=f(t);return s&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(M,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))&&(n=e._readableState,(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()),s}n(6768)(s,v),r.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(r.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===s&&e&&e._writableState instanceof r}})):d=function(e){return e instanceof this},s.prototype.pipe=function(){a(this,new F)},s.prototype.write=function(e,t,n){var r,s=this._writableState,c=!1,o=!s.objectMode&&(r=e,u.isBuffer(r)||r instanceof j);return o&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=O),s.ending?function(e,t){var n=new y;a(e,n),i.nextTick(t,n)}(this,n):(o||function(e,t,n,s){var o;return null===n?o=new x:"string"==typeof n||t.objectMode||(o=new A("chunk",["string","Buffer"],n)),!o||(a(e,o),i.nextTick(s,o),!1)}(this,s,e,n))&&(s.pendingcb++,c=function(e,t,n,s,o,i){if(!n){var a,r,c,l=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n)),t}(t,s,o);s!==l&&(n=!0,o="buffer",s=l)}return a=t.objectMode?1:s.length,t.length+=a,r=t.length<t.highWaterMark,r||(t.needDrain=!0),t.writing||t.corked?(c=t.lastBufferedRequest,t.lastBufferedRequest={chunk:s,encoding:o,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):m(e,t,!1,a,s,o,i),r}(this,s,o,e,t,n)),c},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||p(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),s.prototype._write=function(e,t,n){n(new k("_write()"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var s=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),e!=null&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,t,n){t.ending=!0,l(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,s,n),this},Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),s.prototype.destroy=h.destroy,s.prototype._undestroy=h.undestroy,s.prototype._destroy=function(e,t){t(e)}},60328:function(e,t,n){"use strict";u=n(4168);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u,m,f,p,g=n(15932),i=Symbol("lastResolve"),r=Symbol("lastReject"),l=Symbol("error"),d=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),a=Symbol("stream");function o(e,t){return{value:e,done:t}}function v(e){var t,n=e[i];null!==n&&(t=e[a].read(),null!==t&&(e[c]=null,e[i]=null,e[r]=null,n(o(t,!1))))}function b(e){u.nextTick(v,e)}f=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((s(m={get stream(){return this[a]},next:function(){var e,t,n,s=this,i=this[l];if(null!==i)return Promise.reject(i);if(this[d])return Promise.resolve(o(void 0,!0));if(this[a].destroyed)return new Promise(function(e,t){u.nextTick(function(){s[l]?t(s[l]):e(o(void 0,!0))})});if(t=this[c],t)e=new Promise(function(e,t){return function(n,s){e.then(function(){t[d]?n(o(void 0,!0)):t[h](n,s)},s)}}(t,this));else{if(n=this[a].read(),null!==n)return Promise.resolve(o(n,!1));e=new Promise(this[h])}return this[c]=e,e}},Symbol.asyncIterator,function(){return this}),s(m,"return",function(){var e=this;return new Promise(function(t,n){e[a].destroy(null,function(e){e?n(e):t(o(void 0,!0))})})}),m),f),e.exports=function(e){var n,t=Object.create(p,(s(n={},a,{value:e,writable:!0}),s(n,i,{value:null,writable:!0}),s(n,r,{value:null,writable:!0}),s(n,l,{value:null,writable:!0}),s(n,d,{value:e._readableState.endEmitted,writable:!0}),s(n,h,{value:function(e,n){var s=t[a].read();s?(t[c]=null,t[i]=null,t[r]=null,e(o(s,!1))):(t[i]=e,t[r]=n)},writable:!0}),n));return t[c]=null,g(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var n,s=t[r];return null!==s&&(t[c]=null,t[i]=null,t[r]=null,s(e)),void(t[l]=e)}n=t[i],null!==n&&(t[c]=null,t[i]=null,t[r]=null,n(o(void 0,!0))),t[d]=!0}),e.on("readable",b.bind(null,t)),t}},47264:function(e,t,n){"use strict";function i(e,t){var n,s=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)),s}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var s=n(33576).Buffer,o=n(21576).inspect,c=o&&o.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return n=e,t=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var n,o,i,a=s.allocUnsafe(e>>>0),t=this.head,r=0;t;)n=t.data,o=a,i=r,s.prototype.copy.call(n,o,i),r+=t.data.length,t=t.next;return a}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var n,s,t=this.head,i=1,o=t.data;for(e-=o.length;t=t.next;){if(n=t.data,s=e>n.length?n.length:e,s===n.length?o+=n:o+=n.slice(0,e),0==(e-=s)){s===n.length?(++i,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(s));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(e){var n,o,i=s.allocUnsafe(e),t=this.head,a=1;for(t.data.copy(i),e-=t.data.length;t=t.next;){if(n=t.data,o=e>n.length?n.length:e,n.copy(i,i.length-e,0,o),0==(e-=o)){o===n.length?(++a,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(o));break}++a}return this.length-=a,i}},{key:c,value:function(e,t){return o(this,function(e){for(var t,n=1;n<arguments.length;n++)t=null!=arguments[n]?arguments[n]:{},n%2?i(Object(t),!0).forEach(function(n){a(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}({},t,{depth:0,customInspect:!1}))}}],t&&r(n.prototype,t),e}()},55324:function(e,t,n){"use strict";var s=n(4168);function a(e,t){i(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return r||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,s.nextTick(i,this,e)):s.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?s.nextTick(o,n):(n._writableState.errorEmitted=!0,s.nextTick(a,n,e)):s.nextTick(a,n,e):t?(s.nextTick(o,n),t(e)):s.nextTick(o,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,s=e._writableState;n&&n.autoDestroy||s&&s.autoDestroy?e.destroy(t):e.emit("error",t)}}},15932:function(e,t,n){"use strict";var s=n(92784).i.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,n,i){if("function"==typeof n)return e(t,null,n);n||(n={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];e.apply(this,o)}}}(i||o);var d=n.readable||!1!==n.readable&&t.readable,r=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||a()},p=t._writableState&&t._writableState.finished,a=function(){r=!1,p=!0,d||i.call(t)},h=t._readableState&&t._readableState.endEmitted,m=function(){d=!1,h=!0,r||i.call(t)},f=function(e){i.call(t,e)},l=function(){var e;return d&&!h?(t._readableState&&t._readableState.ended||(e=new s),i.call(t,e)):r&&!p?(t._writableState&&t._writableState.ended||(e=new s),i.call(t,e)):void 0},u=function(){t.req.on("finish",a)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",a),t.on("abort",l),t.req?u():t.on("request",u)):r&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",m),t.on("finish",a),!1!==n.error&&t.on("error",f),t.on("close",l),function(){t.removeListener("complete",a),t.removeListener("abort",l),t.removeListener("request",u),t.req&&t.req.removeListener("finish",a),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",a),t.removeListener("end",m),t.removeListener("error",f),t.removeListener("close",l)}}},90555:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(e,t,n){"use strict";var s,o=n(92784).i,r=o.ERR_MISSING_ARGS,c=o.ERR_STREAM_DESTROYED;function i(e){if(e)throw e}function a(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var o,d,h,u=arguments.length,e=new Array(u),t=0;t<u;t++)e[t]=arguments[t];if(h=function(e){return e.length?"function"!=typeof e[e.length-1]?i:e.pop():i}(e),Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new r("streams");return d=e.map(function(t,i){var r=i<e.length-1;return function(e,t,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var r,a=!1;return e.on("close",function(){a=!0}),void 0===s&&(s=n(15932)),s(e,{readable:t,writable:o},function(e){if(e)return i(e);a=!0,i()}),r=!1,function(t){if(!a&&!r)return r=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new c("pipe"))}}(t,r,i>0,function(e){o||(o=e),e&&d.forEach(a),r||(d.forEach(a),h(o))})}),e.reduce(l)}},24888:function(e,t,n){"use strict";var s=n(92784).i.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,o){var i=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,o,n);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new s(o?n:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},4776:function(e,t,n){e.exports=n(61252).EventEmitter},86032:function(e,t,n){"use strict";var o=n(30456).Buffer,a=o.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(o.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=r,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=h,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function r(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var s,n=e.toString("utf16le",t);return n&&(s=n.charCodeAt(n.length-1),s>=55296&&s<=56319)?(this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)):n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var n,t=e&&e.length?this.write(e):"";return this.lastNeed?(n=this.lastTotal-this.lastNeed,t+this.lastChar.toString("utf16le",0,n)):t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}t.o=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(n=this.fillLast(e)))return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?n?n+this.text(e,t):this.text(e,t):n||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n,s=function(e,t,n){var s,o=t.length-1;return o<n?0:(s=i(t[o]),s>=0?(s>0&&(e.lastNeed=s-1),s):--o<n||-2===s?0:(s=i(t[o]))>=0?(s>0&&(e.lastNeed=s-2),s):--o<n||-2===s?0:(s=i(t[o]))>=0?(s>0&&(2===s?s=0:e.lastNeed=s-3),s):0)}(this,e,t);return this.lastNeed?(this.lastTotal=s,n=e.length-(s-this.lastNeed),e.copy(this.lastChar,0,n),e.toString("utf8",t,n)):e.toString("utf8",t)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},55619:function(e,t,n){o=n(45408),s=n(86844)("stream-parser"),e.exports=function(e){var t=e&&"function"==typeof e._transform,n=e&&"function"==typeof e._write;if(!t&&!n)throw new Error("must pass a Writable or Transform stream in");s("extending Parser into stream"),e._bytes=v,e._skipBytes=p,t&&(e._passthrough=h),t?e._transform=f:e._write=m};var s,o,r,c=-1,a=0,g=1,l=2;function i(e){s("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=c,e._parserCallback=null,"function"==typeof e.push&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function v(e,t){o(!this._parserCallback,'there is already a "callback" set!'),o(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||i(this),s("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=a}function p(e,t){o(!this._parserCallback,'there is already a "callback" set!'),o(e>0,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||i(this),s("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=g}function h(e,t){o(!this._parserCallback,'There is already a "callback" set!'),o(e>0,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||i(this),s("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=l}function m(e,t,n){this._parserInit||i(this),s("write(%o bytes)",e.length),"function"==typeof t&&(n=t),r(this,e,null,n)}function f(e,t,n){this._parserInit||i(this),s("transform(%o bytes)",e.length),"function"!=typeof t&&(t=this._parserOutput),r(this,e,t,n)}function d(e,t,n,o){if(e._parserBytesLeft-=t.length,s("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===a?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===l&&n(t),0!==e._parserBytesLeft)return o;var i,d,h,r=e._parserCallback;if(r&&e._parserState===a&&e._parserBuffers.length>1&&(t=Buffer.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==a&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=c,e._parserBuffers.splice(0),r&&(i=[],t&&i.push(t),n&&i.push(n),d=r.length>i.length,d&&i.push(u(o)),h=r.apply(e,i),!d||o===h))return o}r=u(function e(t,n,s,o){return t._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):n.length<=t._parserBytesLeft?function(){return d(t,n,s,o)}:function(){var i=n.slice(0,t._parserBytesLeft);return d(t,i,s,function(a){return a?o(a):n.length>i.length?function(){return e(t,n.slice(i.length),s,o)}:void 0})}});function u(e){return function(){for(var t=e.apply(this,arguments);"function"==typeof t;)t=t();return t}}},86844:function(e,t,n){var s=n(4168);function o(){var e;try{e=t.storage.debug}catch{}return!e&&void 0!==s&&"env"in s&&(e=s.env.DEBUG),e}(t=e.exports=n(89416)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){if(n=this.useColors,e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){s="color: "+this.color,e.splice(1,0,s,"color: inherit");var n,s,o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,s)}},t.save=function(e){try{e==null?t.storage.removeItem("debug"):t.storage.debug=e}catch{}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())},89416:function(e,t,n){var s;function o(e){function n(){if(n.enabled){var e,i,a,o=n,r=+new Date,c=r-(s||r);o.diff=c,o.prev=s,o.curr=r,s=r;for(e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O"),a=0,e[0]=e[0].replace(/%([a-zA-Z%])/g,function(n,s){if("%%"===n)return n;a++;var r,i=t.formatters[s];return"function"==typeof i&&(r=e[a],n=i.call(o,r),e.splice(a,1),a--),n}),t.formatArgs.call(o,e),(n.log||t.log||console.log.bind(console)).apply(o,e)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var s,n=0;for(s in e)n=(n<<5)-n+e.charCodeAt(s),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var s=("string"==typeof e?e:"").split(/[\s,]+/),o=s.length,n=0;n<o;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(93744),t.names=[],t.skips=[],t.formatters={}},93744:function(e){var t=1e3,n=60*t,s=60*n,o=24*s;function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,a){a=a||{};var r,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i,a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(a)switch(i=parseFloat(a[1]),(a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*s;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}(e);if("number"===c&&!1===isNaN(e))return a.long?i(r=e,o,"day")||i(r,s,"hour")||i(r,n,"minute")||i(r,t,"second")||r+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=s?Math.round(e/s)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},39956:function(e,t,n){"use strict";var s=n(32868);e.exports=function(e,t,n){if(e==null)throw Error("First argument should be a string");if(t==null)throw Error("Separator should be a string or a RegExp");n?("string"==typeof n||Array.isArray(n))&&(n={ignore:n}):n={},null==n.escape&&(n.escape=!0),null==n.ignore?n.ignore=["[]","()","{}","<>",'""',"''","``","“”","«»"]:("string"==typeof n.ignore&&(n.ignore=[n.ignore]),n.ignore=n.ignore.map(function(e){return 1===e.length&&(e+=e),e}));var o,a,r,l,c=s.parse(e,{flat:!0,brackets:n.ignore}),i=c[0].split(t);if(n.escape){for(r=[],o=0;o<i.length;o++)a=i[o],l=i[o+1],"\\"===a[a.length-1]&&"\\"!==a[a.length-2]?(r.push(a+t+l),o++):r.push(a);i=r}for(o=0;o<i.length;o++)c[0]=i[o],i[o]=s.stringify(c,{flat:!0});return i}},78484:function(e){"use strict";e.exports=function(e){for(var n,i,s=e.length,a=new Array(s),o=new Array(s),r=new Array(s),l=new Array(s),h=new Array(s),d=new Array(s),t=0;t<s;++t)a[t]=-1,o[t]=0,r[t]=!1,l[t]=0,h[t]=-1,d[t]=[];var f,u=0,m=[],c=[];function p(t){p=[t],f=[t];for(a[t]=o[t]=u,r[t]=!0,u+=1;f.length>0;)if(t=f[f.length-1],v=e[t],l[t]<v.length){for(n=l[t];n<v.length;++n){if(s=v[n],a[s]<0){a[s]=o[s]=u,r[s]=!0,u+=1,p.push(s),f.push(s);break}r[s]&&(o[t]=0|Math.min(o[t],o[s])),h[s]>=0&&d[t].push(h[s])}l[t]=n}else{if(o[t]===a[t]){var n,s,i,f,p,v,b,y,_=[],g=[],j=0;for(n=p.length-1;n>=0;--n)if(i=p[n],r[i]=!1,_.push(i),g.push(d[i]),j+=d[i].length,h[i]=m.length,i===t){p.length=n;break}m.push(_),y=new Array(j);for(n=0;n<g.length;n++)for(b=0;b<g[n].length;b++)y[--j]=g[n][b];c.push(y)}f.pop()}}for(t=0;t<s;++t)a[t]<0&&p(t);for(t=0;t<c.length;t++)if(n=c[t],0!==n.length){n.sort(function(e,t){return e-t}),f=[n[0]];for(i=1;i<n.length;i++)n[i]!==n[i-1]&&f.push(n[i]);c[t]=f}return{components:m,adjacencyList:c}}},92848:function(e,t,n){"use strict";n.r(t);var s=2*Math.PI,o=function(e,t,n,s,o,i,a){var r=e.x,c=e.y;return{x:s*(r*=t)-o*(c*=n)+i,y:o*r+s*c+a}},a=function(e,t){var n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),i=Math.cos(e),a=Math.sin(e),s=Math.cos(e+t),o=Math.sin(e+t);return[{x:i-a*n,y:a+i*n},{x:s+o*n,y:o-s*n},{x:s,y:o}]},i=function(e,t,n,s){var o=e*n+t*s;return o>1&&(o=1),o<-1&&(o=-1),(e*s-t*n<0?-1:1)*Math.acos(o)};t.default=function(e){var d,g,w,_=e.px,j=e.py,b=e.cx,v=e.cy,t=e.rx,n=e.ry,C=e.xAxisRotation,x=void 0===C?0:C,k=e.largeArcFlag,S=void 0===k?0:k,A=e.sweepFlag,F=void 0===A?0:A,O=[];if(0===t||0===n)return[];var c=Math.sin(x*s/360),r=Math.cos(x*s/360),y=r*(_-b)/2+c*(j-v)/2,h=-c*(_-b)/2+r*(j-v)/2;if(0===y&&0===h)return[];t=Math.abs(t),n=Math.abs(n),d=Math.pow(y,2)/Math.pow(t,2)+Math.pow(h,2)/Math.pow(n,2),d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var M=function(e,t,n,o,a,r,c,l,d,u,h,m){var j=Math.pow(a,2),b=Math.pow(r,2),_=Math.pow(h,2),y=Math.pow(m,2),f=j*b-j*y-b*_;f<0&&(f=0),f/=j*y+b*_;var g=(f=Math.sqrt(f)*(c===l?-1:1))*a/r*m,v=f*-r/a*h,A=u*g-d*v+(e+n)/2,x=d*g+u*v+(t+o)/2,w=(h-g)/a,O=(m-v)/r,C=(-h-g)/a,E=(-m-v)/r,k=i(1,0,w,O),p=i(w,O,C,E);return 0===l&&p>0&&(p-=s),1===l&&p<0&&(p+=s),[A,x,k,p]}(_,j,b,v,t,n,S,F,c,r,y,h),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n,r,s=[],o=!0,i=!1,a=void 0;try{for(n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&n.return&&n.return()}finally{if(i)throw a}}return s}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(M,4),p=u[0],f=u[1],E=u[2],l=u[3],m=Math.abs(l)/(s/4);Math.abs(1-m)<1e-7&&(m=1),g=Math.max(Math.ceil(m),1),l/=g;for(w=0;w<g;w++)O.push(a(E,l)),E+=l;return O.map(function(e){var s=o(e[0],t,n,r,c,p,f),l=s.x,d=s.y,i=o(e[1],t,n,r,c,p,f),u=i.x,h=i.y,a=o(e[2],t,n,r,c,p,f);return{x1:l,y1:d,x2:u,y2:h,x:a.x,y:a.y}})}},74840:function(e,t,n){"use strict";var o=n(21984),i=n(49972),a=n(41976),r=n(53520),s=n(45408);e.exports=function(e){if(Array.isArray(e)&&1===e.length&&"string"==typeof e[0]&&(e=e[0]),"string"==typeof e&&(s(r(e),"String is not an SVG path."),e=o(e)),s(Array.isArray(e),"Argument should be a string or an array of path segments."),e=i(e),!(e=a(e)).length)return[0,0,0,0];for(var t,n,c=[1/0,1/0,-1/0,-1/0],l=0,d=e.length;l<d;l++)for(n=e[l].slice(1),t=0;t<n.length;t+=2)n[t+0]<c[0]&&(c[0]=n[t+0]),n[t+1]<c[1]&&(c[1]=n[t+1]),n[t+0]>c[2]&&(c[2]=n[t+0]),n[t+1]>c[3]&&(c[3]=n[t+1]);return c}},41976:function(e,t,n){"use strict";e.exports=function(e){for(var t,r,c,l,h,m,f,v,j=[],p=0,b=0,_=0,y=0,d=null,u=null,n=0,a=0,g=0,w=e.length;g<w;g++){switch(t=e[g],v=t[0],v){case"M":_=t[1],y=t[2];break;case"A":if(l=i({px:n,py:a,cx:t[6],cy:t[7],rx:t[1],ry:t[2],xAxisRotation:t[3],largeArcFlag:t[4],sweepFlag:t[5]}),!l.length)continue;for(c=0;c<l.length;c++)t=["C",(r=l[c]).x1,r.y1,r.x2,r.y2,r.x,r.y],c<l.length-1&&j.push(t);break;case"S":m=n,f=a,"C"!=h&&"S"!=h||(m+=m-p,f+=f-b),t=["C",m,f,t[1],t[2],t[3],t[4]];break;case"T":"Q"==h||"T"==h?(d=2*n-d,u=2*a-u):(d=n,u=a),t=o(n,a,d,u,t[1],t[2]);break;case"Q":d=t[1],u=t[2],t=o(n,a,t[1],t[2],t[3],t[4]);break;case"L":t=s(n,a,t[1],t[2]);break;case"H":t=s(n,a,t[1],a);break;case"V":t=s(n,a,n,t[1]);break;case"Z":t=s(n,a,_,y)}h=v,n=t[t.length-2],a=t[t.length-1],t.length>4?(p=t[t.length-4],b=t[t.length-3]):(p=n,b=a),j.push(t)}return j};var i=n(92848);function s(e,t,n,s){return["C",e,t,n,s,n,s]}function o(e,t,n,s,o,i){return["C",e/3+2/3*n,t/3+2/3*s,o/3+2/3*n,i/3+2/3*s,o,i]}},20472:function(e,t,n){"use strict";var o,d=n(74840),a=n(21984),r=n(22235),c=n(53520),l=n(29620),i=document.createElement("canvas"),s=i.getContext("2d");e.exports=function(e,t){if(!c(e))throw Error("Argument should be valid svg path string");t||(t={}),t.shape?(u=t.shape[0],h=t.shape[1]):(u=i.width=t.w||t.width||200,h=i.height=t.h||t.height||200);var u,h,f,p,b=Math.min(u,h),n=t.stroke||0,m=t.viewbox||t.viewBox||d(e),g=[u/(m[2]-m[0]),h/(m[3]-m[1])],v=Math.min(g[0]||0,g[1]||0)/2;return s.fillStyle="black",s.fillRect(0,0,u,h),s.fillStyle="white",n&&("number"!=typeof n&&(n=1),s.strokeStyle=n>0?"white":"black",s.lineWidth=Math.abs(n)),s.translate(.5*u,.5*h),s.scale(v,v),function(){if(o!=null)return o;var t,n,e=document.createElement("canvas").getContext("2d");return e.canvas.width=e.canvas.height=1,window.Path2D?(n=new Path2D("M0,0h1v1h-1v-1Z"),e.fillStyle="black",e.fill(n),t=e.getImageData(0,0,1,1),o=t&&t.data&&255===t.data[3]):o=!1}()?(f=new Path2D(e),s.fill(f),n&&s.stroke(f)):(p=a(e),r(s,p),s.fill(),n&&s.stroke()),s.setTransform(1,0,0,1,0,0),l(s,{cutoff:null!=t.cutoff?t.cutoff:.5,radius:null!=t.radius?t.radius:.5*b})}},49760:function(e,t,n){var s;!function(o){var l,f,v,b,j,A,W=/^\s+/,$=/\s+$/,V=0,a=o.round,u=o.min,h=o.max,y=o.random;function i(e,t){if(t=t||{},(e=e||"")instanceof i)return e;if(!(this instanceof i))return new i(e,t);var n=function(e){var d,f,b,t={r:0,g:0,b:0},s=1,i=null,g=null,v=null,n=!1,a=!1;return"string"==typeof e&&(e=function(e){e=e.replace(W,"").replace($,"").toLowerCase();var t,n=!1;if(j[e])e=j[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=l.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=l.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=l.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=l.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=l.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=l.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=l.hex8.exec(e))?{r:c(t[1]),g:c(t[2]),b:c(t[3]),a:_(t[4]),format:n?"name":"hex8"}:(t=l.hex6.exec(e))?{r:c(t[1]),g:c(t[2]),b:c(t[3]),format:n?"name":"hex"}:(t=l.hex4.exec(e))?{r:c(t[1]+""+t[1]),g:c(t[2]+""+t[2]),b:c(t[3]+""+t[3]),a:_(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=l.hex3.exec(e))&&{r:c(t[1]+""+t[1]),g:c(t[2]+""+t[2]),b:c(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==typeof e&&(m(e.r)&&m(e.g)&&m(e.b)?(d=e.r,f=e.g,b=e.b,t={r:255*r(d,255),g:255*r(f,255),b:255*r(b,255)},n=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):m(e.h)&&m(e.s)&&m(e.v)?(i=p(e.s),g=p(e.v),t=function(e,t,n){e=6*r(e,360),t=r(t,100),n=r(n,100);var l=o.floor(e),d=e-l,s=n*(1-t),i=n*(1-d*t),a=n*(1-(1-d)*t),c=l%6;return{r:255*[n,i,s,s,a,n][c],g:255*[a,n,n,i,s,s][c],b:255*[s,s,a,n,n,i][c]}}(e.h,i,g),n=!0,a="hsv"):m(e.h)&&m(e.s)&&m(e.l)&&(i=p(e.s),v=p(e.l),t=function(e,t,n){function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=r(e,360),t=r(t,100),n=r(n,100),0===t)o=i=a=n;else{var o,i,a,s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;o=c(l,s,e+1/3),i=c(l,s,e),a=c(l,s,e-1/3)}return{r:255*o,g:255*i,b:255*a}}(e.h,i,v),n=!0,a="hsl"),e.hasOwnProperty("a")&&(s=e.a)),s=k(s),{ok:n,format:e.format||a,r:u(255,h(t.r,0)),g:u(255,h(t.g,0)),b:u(255,h(t.b,0)),a:s}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=V++}function C(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var s,i,c,o=h(e,t,n),a=u(e,t,n),l=(o+a)/2;if(o==a)s=c=0;else{switch(i=o-a,c=l>.5?i/(2-o-a):i/(o+a),o){case e:s=(t-n)/i+(t<n?6:0);break;case t:s=(n-e)/i+2;break;case n:s=(e-t)/i+4}s/=6}return{h:s,s:c,l}}function x(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var s,a,o=h(e,t,n),c=u(e,t,n),l=o,i=o-c;if(a=0===o?0:i/o,o==c)s=0;else{switch(o){case e:s=(t-n)/i+(t<n?6:0);break;case t:s=(n-e)/i+2;break;case n:s=(e-t)/i+4}s/=6}return{h:s,s:a,v:l}}function O(e,t,n,s){var o=[d(a(e).toString(16)),d(a(t).toString(16)),d(a(n).toString(16))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function w(e,t,n,s){return[d(E(s)),d(a(e).toString(16)),d(a(t).toString(16)),d(a(n).toString(16))].join("")}function B(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s-=t/100,n.s=g(n.s),i(n)}function I(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s+=t/100,n.s=g(n.s),i(n)}function H(e){return i(e).desaturate(100)}function P(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l+=t/100,n.l=g(n.l),i(n)}function R(e,t){t=0===t?0:t||10;var n=i(e).toRgb();return n.r=h(0,u(255,n.r-a(-t/100*255))),n.g=h(0,u(255,n.g-a(-t/100*255))),n.b=h(0,u(255,n.b-a(-t/100*255))),i(n)}function L(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l-=t/100,n.l=g(n.l),i(n)}function N(e,t){var n=i(e).toHsl(),s=(n.h+t)%360;return n.h=s<0?360+s:s,i(n)}function D(e){var t=i(e).toHsl();return t.h=(t.h+180)%360,i(t)}function S(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+120)%360,s:t.s,l:t.l}),i({h:(n+240)%360,s:t.s,l:t.l})]}function z(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+90)%360,s:t.s,l:t.l}),i({h:(n+180)%360,s:t.s,l:t.l}),i({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+72)%360,s:t.s,l:t.l}),i({h:(n+216)%360,s:t.s,l:t.l})]}function F(e,t,n){t=t||6,n=n||30;var s=i(e).toHsl(),o=360/n,a=[i(e)];for(s.h=(s.h-(o*t>>1)+720)%360;--t;)s.h=(s.h+o)%360,a.push(i(s));return a}function M(e,t){t=t||6;for(var n=i(e).toHsv(),a=n.h,r=n.s,s=n.v,o=[],c=1/t;t--;)o.push(i({h:a,s:r,v:s})),s=(s+c)%1;return o}i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,s=this.toRgb();return e=s.r/255,t=s.g/255,n=s.b/255,.2126*(e<=.03928?e/12.92:o.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:o.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=k(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=x(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=x(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),s=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+s+"%)":"hsva("+t+", "+n+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=C(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=C(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),s=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+s+"%)":"hsla("+t+", "+n+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return O(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,s,o){var i=[d(a(e).toString(16)),d(a(t).toString(16)),d(a(n).toString(16)),d(E(s))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*r(this._r,255))+"%",g:a(100*r(this._g,255))+"%",b:a(100*r(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*r(this._r,255))+"%, "+a(100*r(this._g,255))+"%, "+a(100*r(this._b,255))+"%)":"rgba("+a(100*r(this._r,255))+"%, "+a(100*r(this._g,255))+"%, "+a(100*r(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[O(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t,n="#"+w(this._r,this._g,this._b,this._a),s=n,o=this._gradientType?"GradientType = 1, ":"";return e&&(t=i(e),s="#"+w(t._r,t._g,t._b,t._a)),"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+n+",endColorstr="+s+")"},toString:function(e){n=!!e,e=e||this._format;var n,t=!1,s=this._a<1&&this._a>=0;return n||!s||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(t=this.toRgbString()),"prgb"===e&&(t=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(t=this.toHexString()),"hex3"===e&&(t=this.toHexString(!0)),"hex4"===e&&(t=this.toHex8String(!0)),"hex8"===e&&(t=this.toHex8String()),"name"===e&&(t=this.toName()),"hsl"===e&&(t=this.toHslString()),"hsv"===e&&(t=this.toHsvString()),t||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return i(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(P,arguments)},brighten:function(){return this._applyModification(R,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(B,arguments)},saturate:function(){return this._applyModification(I,arguments)},greyscale:function(){return this._applyModification(H,arguments)},spin:function(){return this._applyModification(N,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(D,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(z,arguments)}},i.fromRatio=function(e,t){if("object"==typeof e){var n,s={};for(n in e)e.hasOwnProperty(n)&&(s[n]="a"===n?e[n]:p(e[n]));e=s}return i(e,t)},i.equals=function(e,t){return!!e&&!!t&&i(e).toRgbString()==i(t).toRgbString()},i.random=function(){return i.fromRatio({r:y(),g:y(),b:y()})},i.mix=function(e,t,n){n=0===n?0:n||50;var s=i(e).toRgb(),o=i(t).toRgb(),a=n/100;return i({r:(o.r-s.r)*a+s.r,g:(o.g-s.g)*a+s.g,b:(o.b-s.b)*a+s.b,a:(o.a-s.a)*a+s.a})},i.readability=function(e,t){var n=i(e),s=i(t);return(o.max(n.getLuminance(),s.getLuminance())+.05)/(o.min(n.getLuminance(),s.getLuminance())+.05)},i.isReadable=function(e,t,n){var s,o,a,r,l,c=i.readability(e,t);switch(s=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(r=(o.size||"small").toLowerCase())&&"large"!==r&&(r="small"),l={level:a,size:r}).level+l.size){case"AAsmall":case"AAAlarge":s=c>=4.5;break;case"AAlarge":s=c>=3;break;case"AAAsmall":s=c>=7}return s},i.mostReadable=function(e,t,n){for(var r,o=null,a=0,c=(n=n||{}).includeFallbackColors,l=n.level,d=n.size,s=0;s<t.length;s++)(r=i.readability(e,t[s]))>a&&(a=r,o=i(t[s]));return i.isReadable(e,o,{level:l,size:d})||!c?o:(n.includeFallbackColors=!1,i.mostReadable(e,["#fff","#000"],n))},j=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=i.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(j);function k(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function r(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=u(t,h(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),o.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function g(e){return u(1,h(0,e))}function c(e){return parseInt(e,16)}function d(e){return 1==e.length?"0"+e:""+e}function p(e){return e<=1&&(e=100*e+"%"),e}function E(e){return o.round(255*parseFloat(e)).toString(16)}function _(e){return c(e)/255}l=(b="[\\s|\\(]+("+(f="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+f+")[,|\\s]+("+f+")\\s*\\)?",v="[\\s|\\(]+("+f+")[,|\\s]+("+f+")[,|\\s]+("+f+")[,|\\s]+("+f+")\\s*\\)?",{CSS_UNIT:new RegExp(f),rgb:new RegExp("rgb"+b),rgba:new RegExp("rgba"+v),hsl:new RegExp("hsl"+b),hsla:new RegExp("hsla"+v),hsv:new RegExp("hsv"+b),hsva:new RegExp("hsva"+v),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function m(e){return!!l.CSS_UNIT.exec(e)}e.exports?e.exports=i:void 0===(s=function(){return i}.call(t,n,t,e))||(e.exports=s)}(Math)},37816:function(e){"use strict";e.exports=t,e.exports.float32=e.exports.float=t,e.exports.fract32=e.exports.fract=function(e,n){if(e.length){if(e instanceof Float32Array)return new Float32Array(e.length);n instanceof Float32Array||(n=t(e));for(var s=0,o=n.length;s<o;s++)n[s]=e[s]-n[s];return n}return t(e-t(e))};var n=new Float32Array(1);function t(e){return e.length?e instanceof Float32Array?e:new Float32Array(e):(n[0]=e,n[0])}},23464:function(e,t,n){"use strict";var s,a=n(65819);e.exports=i,s=96;function o(e,t){var n=a(getComputedStyle(e).getPropertyValue(t));return n[0]*i(n[1],e)}function i(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var s,n=document.createElement("div");return n.style["font-size"]="128"+e,t.appendChild(n),s=o(n,"font-size")/128,t.removeChild(n),s}(e,t);case"em":return o(t,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return s;case"cm":return s/2.54;case"mm":return s/25.4;case"pt":return s/72;case"pc":return s/6}return 1}},55712:function(e,t,n){"use strict";function o(e){return e}function i(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return s(e,t)})}:s(e,t)}function s(e,t){var n=t.id,s=t.bbox,i=null==t.properties?{}:t.properties,a=function(e,t){var s=function(e){if(e==null)return o;var t,n,s=e.scale[0],i=e.scale[1],a=e.translate[0],r=e.translate[1];return function(e,o){o||(t=n=0);var c=2,d=e.length,l=new Array(d);for(l[0]=(t+=e[0])*s+a,l[1]=(n+=e[1])*i+r;c<d;)l[c]=e[c],++c;return l}}(e.transform),r=e.arcs;function c(e,t){t.length&&t.pop();for(var o=r[e<0?~e:e],n=0,i=o.length;n<i;++n)t.push(s(o[n],n));e<0&&function(e,t){for(var o,n=e.length,s=n-t;s<--n;)o=e[s],e[s++]=e[n],e[n]=o}(t,i)}function i(e){return s(e)}function n(e){for(var t=[],n=0,s=e.length;n<s;++n)c(e[n],t);return t.length<2&&t.push(t[0]),t}function l(e){for(var t=n(e);t.length<4;)t.push(t[0]);return t}function a(e){return e.map(l)}return function e(t){var s,o=t.type;switch(o){case"GeometryCollection":return{type:o,geometries:t.geometries.map(e)};case"Point":s=i(t.coordinates);break;case"MultiPoint":s=t.coordinates.map(i);break;case"LineString":s=n(t.arcs);break;case"MultiLineString":s=t.arcs.map(n);break;case"Polygon":s=a(t.arcs);break;case"MultiPolygon":s=t.arcs.map(a);break;default:return null}return{type:o,coordinates:s}}(t)}(e,t);return n==null&&s==null?{type:"Feature",properties:i,geometry:a}:s==null?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:s,properties:i,geometry:a}}n.d(t,{NO:function(){return i}})},73384:function(e,t,n){"use strict";var s=n(54612);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch{return!1}return!s(e)}},57980:function(e,t,n){"use strict";var s=n(81680),i=n(7328),a=n(33940),r=n(18856),o=function(e,t){return e.replace("%v",r(t))};e.exports=function(e,t,n){if(!i(n))throw new TypeError(o(t,e));if(!s(e)){if("default"in n)return n.default;if(n.isOptional)return null}var r=a(n.errorMessage);throw s(r)||(r=t),new TypeError(o(r,e))}},32336:function(e){"use strict";e.exports=function(e){try{return e.toString()}catch{try{return String(e)}catch{return null}}}},18856:function(e,t,n){"use strict";var s=n(32336),o=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=s(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"…"),t=t.replace(o,function(e){switch(e){case`
`:return`\\n`;case``:return`\\r`;case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(e,t,n){"use strict";var s=n(81680),o={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!s(e)&&hasOwnProperty.call(o,typeof e)}},87396:function(e,t,n){"use strict";var s=n(57980),o=n(85488);e.exports=function(e){return o(e)?e:s(e,"%v is not a plain function",arguments[1])}},85488:function(e,t,n){"use strict";var s=n(73384),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!s(e)&&!o.test(i.call(e))}},54612:function(e,t,n){"use strict";var s=n(7328);e.exports=function(e){if(!s(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch{return!1}}},33940:function(e,t,n){"use strict";var s=n(81680),o=n(7328),i=Object.prototype.toString;e.exports=function(e){if(!s(e))return null;if(o(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===i)return null}try{return""+e}catch{return null}}},18496:function(e,t,n){"use strict";var s=n(57980),o=n(81680);e.exports=function(e){return o(e)?e:s(e,"Cannot use %v",arguments[1])}},81680:function(e){"use strict";e.exports=function(e){return e!=null}},14144:function(e,t,n){"use strict";var a=n(308),o=n(10352),p=n(33576).Buffer;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var r,c,E="undefined"!=typeof Uint8ClampedArray,C="undefined"!=typeof BigUint64Array,x="undefined"!=typeof BigInt64Array,s=n.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=o([32,0])),s.BIGUINT64||(s.BIGUINT64=o([32,0])),s.BIGINT64||(s.BIGINT64=o([32,0])),s.BUFFER||(s.BUFFER=o([32,0])),c=s.DATA,r=s.BUFFER;function h(e){if(e){var t=e.length||e.byteLength,n=a.log2(t);c[n].push(e)}}function i(e){e=a.nextPow2(e);var n=a.log2(e),t=c[n];return t.length>0?t.pop():new ArrayBuffer(e)}function l(e){return new Uint8Array(i(e),0,e)}function d(e){return new Uint16Array(i(2*e),0,e)}function g(e){return new Uint32Array(i(4*e),0,e)}function v(e){return new Int8Array(i(e),0,e)}function b(e){return new Int16Array(i(2*e),0,e)}function j(e){return new Int32Array(i(4*e),0,e)}function y(e){return new Float32Array(i(4*e),0,e)}function _(e){return new Float64Array(i(8*e),0,e)}function w(e){return E?new Uint8ClampedArray(i(e),0,e):l(e)}function u(e){return C?new BigUint64Array(i(8*e),0,e):null}function m(e){return x?new BigInt64Array(i(8*e),0,e):null}function f(e){return new DataView(i(e),0,e)}function O(e){e=a.nextPow2(e);var n=a.log2(e),t=r[n];return t.length>0?t.pop():new p(e)}t.free=function(e){if(p.isBuffer(e))r[a.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|a.log2(t);c[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){h(e.buffer)},t.freeArrayBuffer=h,t.freeBuffer=function(e){r[a.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return i(e);switch(t){case"uint8":return l(e);case"uint16":return d(e);case"uint32":return g(e);case"int8":return v(e);case"int16":return b(e);case"int32":return j(e);case"float":case"float32":return y(e);case"double":case"float64":return _(e);case"uint8_clamped":return w(e);case"bigint64":return m(e);case"biguint64":return u(e);case"buffer":return O(e);case"data":case"dataview":return f(e);default:return null}return null},t.mallocArrayBuffer=i,t.mallocUint8=l,t.mallocUint16=d,t.mallocUint32=g,t.mallocInt8=v,t.mallocInt16=b,t.mallocInt32=j,t.mallocFloat32=t.mallocFloat=y,t.mallocFloat64=t.mallocDouble=_,t.mallocUint8Clamped=w,t.mallocBigUint64=u,t.mallocBigInt64=m,t.mallocDataView=f,t.mallocBuffer=O,t.clearCache=function(){for(var e=0;e<32;++e)s.UINT8[e].length=0,s.UINT16[e].length=0,s.UINT32[e].length=0,s.INT8[e].length=0,s.INT16[e].length=0,s.INT32[e].length=0,s.FLOAT[e].length=0,s.DOUBLE[e].length=0,s.BIGUINT64[e].length=0,s.BIGINT64[e].length=0,s.UINT8C[e].length=0,c[e].length=0,r[e].length=0}},92384:function(e){var t=/['"]/;e.exports=function(e){return e?(t.test(e.charAt(0))&&(e=e.substr(1)),t.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(e){"use strict";e.exports=function(e,t,n){Array.isArray(n)||(n=[].slice.call(arguments,2));for(var s,o,a,i=0,r=n.length;i<r;i++){o=n[i];for(s in o)if((void 0===t[s]||Array.isArray(t[s])||e[s]!==t[s])&&s in t){if(!0===o[s])a=t[s];else{if(!1===o[s])continue;if("function"==typeof o[s]&&void 0===(a=o[s](t[s],e,t)))continue}e[s]=a}}return e}},96656:function(e,t,n){function s(e){try{if(!n.g.localStorage)return!1}catch{return!1}var t=n.g.localStorage[e];return t!=null&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(s("noDeprecation"))return e;var n=!1;return function(){if(!n){if(s("throwDeprecation"))throw new Error(t);s("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},75272:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},41088:function(e,t,n){"use strict";var T=n(91148),F=n(84420),o=n(96632),_=n(7728);function i(e){return e.call.bind(e)}var m,p,C,j="undefined"!=typeof BigInt,b="undefined"!=typeof Symbol,s=i(Object.prototype.toString),M=i(Number.prototype.valueOf),S=i(String.prototype.valueOf),A=i(Boolean.prototype.valueOf);j&&(C=i(BigInt.prototype.valueOf)),b&&(p=i(Symbol.prototype.valueOf));function r(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch{return!1}}function u(e){return"[object Map]"===s(e)}function l(e){return"[object Set]"===s(e)}function c(e){return"[object WeakMap]"===s(e)}function f(e){return"[object WeakSet]"===s(e)}function h(e){return"[object ArrayBuffer]"===s(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(h.working?h(e):e instanceof ArrayBuffer)}function d(e){return"[object DataView]"===s(e)}function x(e){return"undefined"!=typeof DataView&&(d.working?d(e):e instanceof DataView)}t.isArgumentsObject=T,t.isGeneratorFunction=F,t.isTypedArray=_,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):_(e)||x(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},u.working="undefined"!=typeof Map&&u(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(u.working?u(e):e instanceof Map)},l.working="undefined"!=typeof Set&&l(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(l.working?l(e):e instanceof Set)},c.working="undefined"!=typeof WeakMap&&c(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(c.working?c(e):e instanceof WeakMap)},f.working="undefined"!=typeof WeakSet&&f(new WeakSet),t.isWeakSet=function(e){return f(e)},h.working="undefined"!=typeof ArrayBuffer&&h(new ArrayBuffer),t.isArrayBuffer=w,d.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&d(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=x,m="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function a(e){return"[object SharedArrayBuffer]"===s(e)}function k(e){return void 0!==m&&(void 0===a.working&&(a.working=a(new m)),a.working?a(e):e instanceof m)}function y(e){return r(e,M)}function g(e){return r(e,S)}function v(e){return r(e,A)}function O(e){return j&&r(e,C)}function E(e){return b&&r(e,p)}t.isSharedArrayBuffer=k,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===s(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===s(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===s(e)},t.isGeneratorObject=function(e){return"[object Generator]"===s(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===s(e)},t.isNumberObject=y,t.isStringObject=g,t.isBooleanObject=v,t.isBigIntObject=O,t.isSymbolObject=E,t.isBoxedPrimitive=function(e){return y(e)||g(e)||v(e)||O(e)||E(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||k(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})},35840:function(e,t,n){var o,c,f,v,k,s=n(4168),x=Object.getOwnPropertyDescriptors||function(e){for(var n=Object.keys(e),s={},t=0;t<n.length;t++)s[n[t]]=Object.getOwnPropertyDescriptor(e,n[t]);return s},A=/%[sdj%]/g;t.format=function(e){if(!p(e)){for(o=[],t=0;t<arguments.length;t++)o.push(i(arguments[t]));return o.join(" ")}t=1;for(var t,o,n=arguments,c=n.length,a=String(e).replace(A,function(e){if("%%"===e)return"%";if(t>=c)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return e}}),s=n[t];t<c;s=n[++t])g(s)||!r(s)?a+=" "+s:a+=" "+i(s);return a},t.deprecate=function(e,n){if(void 0!==s&&!0===s.noDeprecation)return e;if(void 0===s)return function(){return t.deprecate(e,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(s.throwDeprecation)throw new Error(n);s.traceDeprecation?console.trace(n):console.error(n),o=!0}return e.apply(this,arguments)}},c={},v=/^$/,s.env.NODE_DEBUG&&(f=s.env.NODE_DEBUG,f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),v=new RegExp("^"+f+"$","i"));function i(e,n){var s={seen:[],stylize:M};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),w(n)?s.showHidden=n:n&&t._extend(s,n),a(s.showHidden)&&(s.showHidden=!1),a(s.depth)&&(s.depth=2),a(s.colors)&&(s.colors=!1),a(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=S),m(s,e,s.depth)}function S(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function M(e){return e}function m(e,n,s){if(e.customInspect&&n&&u(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n))return r=n.inspect(s,e),p(r)||(r=m(e,r,s)),r;if(b=function(e,t){if(a(t))return e.stylize("undefined","undefined");if(p(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return E(t)?e.stylize(""+t,"number"):w(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,n),b)return b;if(o=Object.keys(n),v=function(e){var t={};return e.forEach(function(e){t[e]=!0}),t}(o),e.showHidden&&(o=Object.getOwnPropertyNames(n)),l(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return _(n);if(0===o.length){if(u(n))return j=n.name?": "+n.name:"",e.stylize("[Function"+j+"]","special");if(d(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(h(n))return e.stylize(Date.prototype.toString.call(n),"date");if(l(n))return _(n)}var o,r,v,b,j,x,i="",c=!1,f=["{","}"];return C(n)&&(c=!0,f=["[","]"]),u(n)&&(i=" [Function"+(n.name?": "+n.name:"")+"]"),d(n)&&(i=" "+RegExp.prototype.toString.call(n)),h(n)&&(i=" "+Date.prototype.toUTCString.call(n)),l(n)&&(i=" "+_(n)),0!==o.length||c&&0!=n.length?s<0?d(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),x=c?function(e,t,n,s,o){for(var i=[],a=0,r=t.length;a<r;++a)O(t,String(a))?i.push(y(e,t,n,s,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(y(e,t,n,s,o,!0))}),i}(e,n,s,v,o):o.map(function(t){return y(e,n,s,v,t,c)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf(`
`),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(x,i,f)):f[0]+i+f[1]}function _(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,t,n,s,o,i){var r,c,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?c=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(c=e.stylize("[Setter]","special")),O(s,o)||(r="["+o+"]"),c||(e.seen.indexOf(l.value)<0?(c=g(n)?m(e,l.value,null):m(e,l.value,n-1)).indexOf(`
`)>-1&&(c=i?c.split(`
`).map(function(e){return"  "+e}).join(`
`).slice(2):`
`+c.split(`
`).map(function(e){return"   "+e}).join(`
`)):c=e.stylize("[Circular]","special")),a(r)){if(i&&o.match(/^\d+$/))return c;(r=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.slice(1,-1),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+c}function C(e){return Array.isArray(e)}function w(e){return"boolean"==typeof e}function g(e){return null===e}function E(e){return"number"==typeof e}function p(e){return"string"==typeof e}function a(e){return void 0===e}function d(e){return r(e)&&"[object RegExp]"===j(e)}function r(e){return"object"==typeof e&&null!==e}function h(e){return r(e)&&"[object Date]"===j(e)}function l(e){return r(e)&&("[object Error]"===j(e)||e instanceof Error)}function u(e){return"function"==typeof e}function j(e){return Object.prototype.toString.call(e)}function b(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!c[e])if(v.test(e)){var n=s.pid;c[e]=function(){var s=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,s)}}else c[e]=function(){};return c[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(41088),t.isArray=C,t.isBoolean=w,t.isNull=g,t.isNullOrUndefined=function(e){return e==null},t.isNumber=E,t.isString=p,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=a,t.isRegExp=d,t.types.isRegExp=d,t.isObject=r,t.isDate=h,t.types.isDate=h,t.isError=l,t.types.isNativeError=l,t.isFunction=u,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(75272),k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[b((e=new Date).getHours()),b(e.getMinutes()),b(e.getSeconds())].join(":"),[e.getDate(),k[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(6768),t._extend=function(e,t){if(!t||!r(t))return e;for(var n=Object.keys(t),s=n.length;s--;)e[n[s]]=t[n[s]];return e},o="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function F(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(o&&e[o]){var t;if("function"!=typeof(t=e[o]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,o,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,o,i=new Promise(function(e,n){o=e,t=n}),n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);n.push(function(e,n){e?t(e):o(n)});try{e.apply(this,n)}catch(e){t(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),o&&Object.defineProperty(t,o,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,x(e))},t.promisify.custom=o,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var o,i,a,t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);if(o=t.pop(),"function"!=typeof o)throw new TypeError("The last argument must be of type Function");a=this,i=function(){return o.apply(a,arguments)},e.apply(this,t).then(function(e){s.nextTick(i.bind(null,null,e))},function(e){s.nextTick(F.bind(null,e,i))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,x(e)),t}},5408:function(e,t,n){var s=n(13380);e.exports=function(e){return s("webgl",e)}},96632:function(e,t,n){"use strict";var c=n(46492),m=n(63436),h=n(57916),r=n(99676),o=n(2304),p=r("Object.prototype.toString"),l=n(46672)(),d="undefined"==typeof globalThis?n.g:globalThis,u=m(),a=r("String.prototype.slice"),i=Object.getPrototypeOf,f=r("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},s={__proto__:null};c(u,l&&o&&i?function(e){if(t=new d[e],Symbol.toStringTag in t){var t,r,a=i(t),n=o(a,Symbol.toStringTag);n||(r=i(a),n=o(r,Symbol.toStringTag)),s["$"+e]=h(n.get)}}:function(e){var t=new d[e],n=t.slice||t.set;n&&(s["$"+e]=h(n))}),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!l){var t=a(p(e),8,-1);return f(u,t)>-1?t:"Object"===t&&function(e){var t=!1;return c(s,function(n,s){if(!t)try{n(e),t=a(s,1)}catch{}}),t}(e)}return o?function(e){var t=!1;return c(s,function(n,s){if(!t)try{"$"+n(e)===s&&(t=a(s,1))}catch{}}),t}(e):null}},67020:function(e,t,n){var i=n(38700),c=n(50896),r=i.instance();function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e)return s=e.match(d),s?s[0]:"";var s,o=this._validateYear(e),i=e.month(),n=""+this.toChineseMonth(o,i);return t&&n.length<2&&(n="0"+n),this.isIntercalaryMonth(o,i)&&(n+="i"),n},monthNames:function(e){if("string"==typeof e)return t=e.match(u),t?t[0]:"";var t,s=this._validateYear(e),o=e.month(),n=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][this.toChineseMonth(s,o)-1];return this.isIntercalaryMonth(s,o)&&(n="闰"+n),n},monthNamesShort:function(e){if("string"==typeof e)return t=e.match(h),t?t[0]:"";var t,s=this._validateYear(e),o=e.month(),n=["一","二","三","四","五","六","七","八","九","十","十一","十二"][this.toChineseMonth(s,o)-1];return this.isIntercalaryMonth(s,o)&&(n="闰"+n),n},parseMonth:function(e,t){e=this._validateYear(e);var n,o,s=parseInt(t);return isNaN(s)?("闰"===t[0]&&(n=!0,t=t.substring(1)),"月"===t[t.length-1]&&(t=t.substring(0,t.length-1)),s=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(t)):(o=t[t.length-1],n="i"===o||"I"===o),this.toMonthIndex(e,s,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),"number"!=typeof e||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){var s=this.intercalaryMonth(e);if(n&&t!==s||t<1||t>12)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?!n&&t<=s?t-1:t:t-1},toChineseMonth:function(e,t){e.year&&(t=(e=e.year()).month());var n=this.intercalaryMonth(e);if(t<0||t>(n?12:11))throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return n?t<n?t+1:t:t+1},intercalaryMonth:function(e){return e=this._validateYear(e),s[e-s[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(t=(e=e.year()).month());var n=this.intercalaryMonth(e);return!!n&&n===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var s,c,l=this._validateYear(e,i.local.invalidyear),a=o[l-o[0]],d=a>>9&4095,u=a>>5&15,h=31&a;return(s=r.newDate(d,u,h)).add(4-(s.dayOfWeek()||7),"d"),c=this.toJD(e,t,n)-s.toJD(),1+Math.floor(c/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var n=s[e-s[0]];if(t>(n>>13?12:11))throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return n&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){a=this._validate(e,l,n,i.local.invalidDate),e=this._validateYear(a.year()),t=a.month(),n=a.day();var a,d=this.isIntercalaryMonth(e,t),l=this.toChineseMonth(e,t),c=function(e,t,n,i){if("object"==typeof e)r=e,c=t||{};else{if(!("number"==typeof e&&e>=1888&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof t&&t>=1&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof n&&n>=1&&n<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof i?(h=!1,c=i):(h=!!i,c={}),r={year:e,month:t,day:n,isIntercalary:h}}for(var r,c,l,d,h,p=r.day-1,m=s[r.year-s[0]],f=m>>13,g=f&&(r.month>f||r.isIntercalary)?r.month:r.month-1,u=0;u<g;u++)p+=m&1<<12-u?30:29;return l=o[r.year-o[0]],d=new Date(l>>9&4095,(l>>5&15)-1,(31&l)+p),c.year=d.getFullYear(),c.month=1+d.getMonth(),c.day=d.getDate(),c}(e,l,n,d);return r.toJD(c.year,c.month,c.day)},fromJD:function(e){var n=r.fromJD(e),t=function(e,t,n){if("object"==typeof e)r=e,a=t||{};else{if(!("number"==typeof e&&e>=1888&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof t&&t>=1&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof n&&n>=1&&n<=31))throw new Error("Solar day outside range 1 - 31");r={year:e,month:t,day:n},a={}}var a,r,c,d,u,h,m,f,p,l=o[r.year-o[0]],g=r.year<<9|r.month<<5|r.day;a.year=g>=l?r.year:r.year-1,l=o[a.year-o[0]],f=new Date(l>>9&4095,(l>>5&15)-1,31&l),p=new Date(r.year,r.month-1,r.day),d=Math.round((p-f)/864e5),m=s[a.year-s[0]];for(c=0;c<13;c++){if(h=m&1<<12-c?30:29,d<h)break;d-=h}return u=m>>13,!u||c<u?(a.isIntercalary=!1,a.month=1+c):c===u?(a.isIntercalary=!0,a.month=c):(a.isIntercalary=!1,a.month=c),a.day=1+d,a}(n.year(),n.month(),n.day()),i=this.toMonthIndex(t.year,t.month,t.isIntercalary);return this.newDate(t.year,i,t.day)},fromString:function(e){var t=e.match(l),n=this._validateYear(+t[1]),s=+t[2],o=!!t[3],i=this.toMonthIndex(n,s,o),a=+t[4];return this.newDate(n,i,a)},add:function(e,t,n){var r=e.year(),c=e.month(),h=this.isIntercalaryMonth(r,c),o=this.toChineseMonth(r,c),s=Object.getPrototypeOf(a.prototype).add.call(this,e,t,n);if("y"===n){var i=s.year(),d=s.month(),u=this.isIntercalaryMonth(i,o),l=h&&u?this.toMonthIndex(i,o,!0):this.toMonthIndex(i,o,!1);l!==d&&s.month(l)}return s}});var s,o,l=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,d=/^\d?\d[iI]?/m,u=/^闰?十?[一二三四五六七八九]?月/m,h=/^闰?十?[一二三四五六七八九]?/m;i.calendars.chinese=a,s=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],o=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(e,t,n){var s=n(38700),i=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new s.baseCalendar,i(o.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return(e=o.year())<0&&e++,o.day()+30*(o.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var s,o,t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;return n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),s=Math.floor(t/30)+1,o=t-30*(s-1)+1,this.newDate(n,s,o)}}),s.calendars.coptic=o},55668:function(e,t,n){var i,s=n(38700),a=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new s.baseCalendar,a(o.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),400},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,s.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){var s=this.dayOfWeek(e,t,n);return s>=2&&s<=6},extraInfo:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return{century:i[Math.floor((o.year()-1)/100)+1]||""}},toJD:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return e=o.year()+(o.year()<0?1:0),t=o.month(),(n=o.day())+(t>1?16:0)+(t>2?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1,t=Math.floor(e/400)+1,e-=400*(t-1),e+=e>15?16:0;var t,n=Math.floor(e/32)+1,s=e-32*(n-1)+1;return this.newDate(t<=0?t-1:t,n,s)}}),i={20:"Fruitbat",21:"Anchovy"},s.calendars.discworld=o},65168:function(e,t,n){var s=n(38700),i=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new s.baseCalendar,i(o.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return(e=o.year())<0&&e++,o.day()+30*(o.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var s,o,t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;return n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),s=Math.floor(t/30)+1,o=t-30*(s-1)+1,this.newDate(n,s,o)}}),s.calendars.ethiopian=o},2084:function(e,t,n){var s=n(38700),a=n(50896);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function o(e,t){return e-t*Math.floor(e/t)}i.prototype=new s.baseCalendar,a(i.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return o(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),12===t&&this.leapYear(e)||8===t&&5===o(this.daysInYear(e),10)?30:9===t&&3===o(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(e,t,n){i=this._validate(e,t,n,s.local.invalidDate),e=i.year(),t=i.month(),n=i.day();var o,i,r=e<=0?e+1:e,a=this.jdEpoch+this._delay1(r)+this._delay2(r)+n+1;if(t<7){for(o=7;o<=this.monthsInYear(e);o++)a+=this.daysInMonth(e,o);for(o=1;o<t;o++)a+=this.daysInMonth(e,o)}else for(o=7;o<t;o++)a+=this.daysInMonth(e,o);return a},_delay1:function(e){var n=Math.floor((235*e-234)/19),s=12084+13753*n,t=29*n+Math.floor(s/25920);return o(3*(t+1),7)<3&&t++,t},_delay2:function(e){var n=this._delay1(e-1),t=this._delay1(e);return this._delay1(e+1)-t==356?2:t-n==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var n,s,t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;return s=e-this.toJD(t,n,1)+1,this.newDate(t,n,s)}}),s.calendars.hebrew=i},26368:function(e,t,n){var s=n(38700),i=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new s.baseCalendar,i(o.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return e=o.year(),t=o.month(),e=e<=0?e+1:e,(n=o.day())+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631),t=t<=0?t-1:t,n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),s=e-this.toJD(t,n,1)+1;return this.newDate(t,n,s)}}),s.calendars.islamic=o},24747:function(e,t,n){var s=n(38700),i=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new s.baseCalendar,i(o.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return(e=t.year()<0?t.year()+1:t.year())%4==0},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return e=o.year(),t=o.month(),n=o.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5)+1524,o=Math.floor((t-122.1)/365.25),i=Math.floor(365.25*o),n=Math.floor((t-i)/30.6001),a=n-Math.floor(n<14?1:13),s=o-Math.floor(a>2?4716:4715),r=t-i-Math.floor(30.6001*n);return s<=0&&s--,this.newDate(s,a,r)}}),s.calendars.julian=o},65616:function(e,t,n){var s=n(38700),r=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}function a(e,t){return i(e-1,t)+1}o.prototype=new s.baseCalendar,r(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year();var t=Math.floor(e/400);return e%=400,e+=e<0?400:0,t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var n,s=0,t=0;t<e.length;t++){if(n=parseInt(e[t],10),Math.abs(n)>19||t>0&&n<0)throw"Invalid Mayan year";s=20*s+n}return s},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,s.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,s.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,s.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,s.local.invalidDate),!0},extraInfo:function(e,t,n){var a=this._validate(e,t,n,s.local.invalidDate).toJD(),o=this._toHaab(a),i=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(e){var t=i(8+(e-=this.jdEpoch)+340,365);return[Math.floor(t/20)+1,i(t,20)]},_toTzolkin:function(e){return[a(20+(e-=this.jdEpoch),20),a(e+4,13)]},toJD:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch,t=Math.floor(e/360),e%=360,e+=e<0?360:0;var t,n=Math.floor(e/20),s=e%20;return this.newDate(t,n,s)}}),s.calendars.mayan=o},30632:function(e,t,n){var i,s=n(38700),a=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new s.baseCalendar,i=s.instance("gregorian"),a(o.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return i.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(1-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){o=this._validate(e,t,n,s.local.invalidMonth),(e=o.year())<0&&e++;for(var o,r=o.day(),a=1;a<o.month();a++)r+=this.daysPerMonth[a-1];return r+i.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var t,s=e-Math.floor(this.toJD(t,1,1)+.5)+1,n=1;s>this.daysInMonth(t,n);)s-=this.daysInMonth(t,n),n++;return this.newDate(t,n,s)}}),s.calendars.nanakshahi=o},73040:function(e,t,n){var s=n(38700),i=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new s.baseCalendar,i(o.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var n=0,t=this.minMonth;t<=12;t++)n+=this.NEPALI_CALENDAR_DATA[e][t];return n},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){r=this._validate(e,t,n,s.local.invalidDate),e=r.year(),t=r.month(),n=r.day();var r,c,l=s.instance(),i=0,o=t,a=e;this._createMissingCalendarData(e),c=e-(o>9||9===o&&n>=this.NEPALI_CALENDAR_DATA[a][0]?56:57);for(9!==t&&(i=n,o--);9!==o;)o<=0&&(o=12,a--),i+=this.NEPALI_CALENDAR_DATA[a][o],o--;return 9===t?(i+=n-this.NEPALI_CALENDAR_DATA[a][0])<0&&(i+=l.daysInYear(c)):i+=this.NEPALI_CALENDAR_DATA[a][9]-this.NEPALI_CALENDAR_DATA[a][0],l.newDate(c,1,1).add(i,"d").toJD()},fromJD:function(e){var i,r=s.instance().fromJD(e),l=r.year(),a=r.dayOfYear(),t=l+56;this._createMissingCalendarData(t);for(var n=9,c=this.NEPALI_CALENDAR_DATA[t][0],o=this.NEPALI_CALENDAR_DATA[t][n]-c+1;a>o;)++n>12&&(n=1,t++),o+=this.NEPALI_CALENDAR_DATA[t][n];return i=this.NEPALI_CALENDAR_DATA[t][n]-(o-a),this.newDate(t,n,i)},_createMissingCalendarData:function(e){var t,n=this.daysPerMonth.slice(0);n.unshift(17);for(t=e-1;t<e+2;t++)void 0===this.NEPALI_CALENDAR_DATA[t]&&(this.NEPALI_CALENDAR_DATA[t]=n)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),s.calendars.nepali=o},1104:function(e,t,n){var s=n(38700),a=n(50896);function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}o.prototype=new s.baseCalendar,a(o.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 682*((t.year()-(t.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-(s.dayOfWeek()+1)%7,"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){o=this._validate(e,t,n,s.local.invalidDate),e=o.year(),t=o.month(),n=o.day();var o,a=e-(e>=0?474:473),r=474+i(a,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(a/2820)+this.jdEpoch-1},fromJD:function(e){var o,r,c=(e=Math.floor(e)+.5)-this.toJD(475,1,1),d=Math.floor(c/1029983),s=i(c,1029983),a=2820;1029982!==s&&(o=Math.floor(s/366),r=i(s,366),a=Math.floor((2134*o+2816*r+2815)/1028522)+o+1);var t=a+2820*d+474,t=t<=0?t-1:t,n=e-this.toJD(t,1,1)+1,l=n<=186?Math.ceil(n/31):Math.ceil((n-6)/30),u=e-this.toJD(t,l,1)+1;return this.newDate(t,l,u)}}),s.calendars.persian=o,s.calendars.jalali=o},51456:function(e,t,n){var s=n(38700),a=n(50896),o=s.instance();function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new s.baseCalendar,a(i.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return e=this._t2gYear(t.year()),o.leapYear(e)},weekOfYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return e=this._t2gYear(i.year()),o.weekOfYear(e,i.month(),i.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,s.local.invalidDate);return e=this._t2gYear(i.year()),o.toJD(e,i.month(),i.day())},fromJD:function(e){var t=o.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),s.calendars.taiwan=i},4592:function(e,t,n){var s=n(38700),a=n(50896),o=s.instance();function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new s.baseCalendar,a(i.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return e=this._t2gYear(t.year()),o.leapYear(e)},weekOfYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return e=this._t2gYear(i.year()),o.weekOfYear(e,i.month(),i.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var i=this._validate(e,t,n,s.local.invalidDate);return e=this._t2gYear(i.year()),o.toJD(e,i.month(),i.day())},fromJD:function(e){var t=o.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),s.calendars.thai=i},45348:function(e,t,n){var s,o=n(38700),a=n(50896);function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new o.baseCalendar,a(i.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return 355===this.daysInYear(t.year())},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var n=0,t=1;t<=12;t++)n+=this.daysInMonth(e,t);return n},daysInMonth:function(e,t){for(var a=this._validate(e,t,this.minDay,o.local.invalidMonth).toJD()-24e5+.5,n=0,i=0;i<s.length;i++){if(s[i]>a)return s[n]-s[n-1];n++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var i=this._validate(e,t,n,o.local.invalidDate),a=12*(i.year()-1)+i.month()-15292;return i.day()+s[a-1]-1+24e5-.5},fromJD:function(e){for(var o=e-24e5+.5,t=0,n=0;n<s.length&&!(s[n]>o);n++)t++;var i=t+15292,a=Math.floor((i-1)/12),r=a+1,c=i-12*a,l=o-s[t-1]+1;return this.newDate(r,c,l)},isValid:function(e){var s=o.baseCalendar.prototype.isValid.apply(this,arguments);return s&&(s=(e=null!=e.year?e.year:e)>=1276&&e<=1500),s},_validate:function(e,t,n,s){var i=o.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw s.replace(/\{0\}/,this.local.name);return i}}),o.calendars.ummalqura=i,s=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(e,t,n){var s,i=n(50896);function l(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function a(e,t,n,o){if(this._calendar=e,this._year=t,this._month=n,this._day=o,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function o(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function r(){this.shortYearCutoff="+10"}function c(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}i(l.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var n=this._localCals[e+"-"+t];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,s,o){return(s=(e!=null&&e.year?e.calendar():"string"==typeof s?this.instance(s,o):s)||this.instance()).newDate(e,t,n)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(t){return e[t]})}},substituteChineseDigits:function(e,t){return function(n){for(var o,s="",i=0;n>0;)o=n%10,s=(0===o?"":e[o]+t[i])+s,i++,n=Math.floor(n/10);return 0===s.indexOf(e[1]+t[1])&&(s=s.substr(1)),s||e[0]}}}),i(a.prototype,{newDate:function(e,t,n){return this._calendar.newDate(e??this,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o(Math.abs(this.year()),4)+"-"+o(this.month(),2)+"-"+o(this.day(),2)}}),i(r.prototype,{_validateLevel:0,newDate:function(e,t,n){return e==null?this.today():(e.year&&(this._validate(e,t,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new a(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(e,t){var n=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,n,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),n},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return o.toJD()-this.newDate(o.year(),this.fromMonthOfYear(o.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(o))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var s,o,a,r=e.toJD()+t*("w"===n?this.daysInWeek():1),i=e.calendar().fromJD(r);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{return s=e.year()+("y"===n?t:0),o=e.monthOfYear()+("m"===n?t:0),i=e.day(),"y"===n?(e.month()!==this.fromMonthOfYear(s,o)&&(o=this.newDate(s,e.month(),this.minDay).monthOfYear()),o=Math.min(o,this.monthsInYear(s)),i=Math.min(i,this.daysInMonth(s,this.fromMonthOfYear(s,o)))):"m"===n&&(function(e){for(;o<e.minMonth;)s--,o+=e.monthsInYear(s);for(var t=e.monthsInYear(s);o>t-1+e.minMonth;)s++,o-=t,t=e.monthsInYear(s)}(this),i=Math.min(i,this.daysInMonth(s,this.fromMonthOfYear(s,o)))),a=[s,this.fromMonthOfYear(s,o),i],this._validateLevel--,a}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,s){if(!(this.hasYearZero||"y"!==s&&"m"!==s||0!==t[0]&&e.year()>0==t[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],i=n<0?-1:1;t=this._add(e,n*o[0]+i*o[1],o[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var i="y"===n?t:e.year(),a="m"===n?t:e.month(),o="d"===n?t:e.day();return"y"!==n&&"m"!==n||(o=Math.min(o,this.daysInMonth(i,a))),e.date(i,a,o)},isValid:function(e,t,n){this._validateLevel++;var o,s=this.hasYearZero||0!==e;return s&&(o=this.newDate(e,t,this.minDay),s=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(o)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(o)),this._validateLevel--,s},toJSDate:function(e,t,n){var o=this._validate(e,t,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(o)).toJSDate()},fromJSDate:function(e){return this.fromJD(s.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,o){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw o.replace(/\{0\}/,this.local.name);var i=this.newDate(e,t,n);return this._validateLevel--,i}catch(e){throw this._validateLevel--,e}}}),c.prototype=new r,i(c.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){var s=this.newDate(e,t,n);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){o=this._validate(e,t,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),e=o.year(),t=o.month(),n=o.day(),e<0&&e++,t<3&&(t+=12,e--);var o,i=Math.floor(e/100),a=2-i+Math.floor(i/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+a-1524.5},fromJD:function(e){var i=Math.floor(e+.5),t=Math.floor((i-1867216.25)/36524.25),n=1524+(t=i+1+t-Math.floor(t/4)),a=Math.floor((n-122.1)/365.25),r=Math.floor(365.25*a),s=Math.floor((n-r)/30.6001),l=n-r-Math.floor(30.6001*s),c=s-(s>13.5?13:1),o=a-(c>2.5?4716:4715);return o<=0&&o--,this.newDate(o,c,l)},toJSDate:function(e,t,n){var i=this._validate(e,t,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),o=new Date(i.year(),i.month()-1,i.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}}),s=e.exports=new l,s.cdate=a,s.baseCalendar=r,s.calendars.gregorian=c},15168:function(e,t,n){var o=n(50896),s=n(38700);o(s.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),s.local=s.regionalOptions[""],o(s.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),o(s.baseCalendar.prototype,{UNIX_EPOCH:s.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:s.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,n){if("string"!=typeof e&&(n=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw s.local.invalidFormat||s.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat;for(var l,f,p,j=(n=n||{}).dayNamesShort||this.local.dayNamesShort,y=n.dayNames||this.local.dayNames,m=n.monthNumbers||this.local.monthNumbers,d=n.monthNamesShort||this.local.monthNamesShort,u=n.monthNames||this.local.monthNames,a=(n.calculateWeek||this.local.calculateWeek,function(t,n){for(var s=1;i+s<e.length&&e.charAt(i+s)===t;)s++;return i+=s-1,Math.floor(s/(n||1))>1}),c=function(e,t,n,s){var o=""+t;if(a(e,s))for(;o.length<n;)o="0"+o;return o},r=this,_=function(e){return"function"==typeof m?m.call(r,e,a("m")):g(c("m",e.month(),2))},b=function(e,t){return t?"function"==typeof u?u.call(r,e):u[e.month()-r.minMonth]:"function"==typeof d?d.call(r,e):d[e.month()-r.minMonth]},v=this.local.digits,g=function(e){return n.localNumbers&&v?v(e):e},o="",h=!1,i=0;i<e.length;i++)if(h)"'"!==e.charAt(i)||a("'")?o+=e.charAt(i):h=!1;else switch(e.charAt(i)){case"d":o+=g(c("d",t.day(),2));break;case"D":o+=("D",l=t.dayOfWeek(),p=j,f=y,a("D")?f[l]:p[l]);break;case"o":o+=c("o",t.dayOfYear(),3);break;case"w":o+=c("w",t.weekOfYear(),2);break;case"m":o+=_(t);break;case"M":o+=b(t,a("M"));break;case"y":o+=a("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":a("Y",2),o+=t.formatYear();break;case"J":o+=t.toJD();break;case"@":o+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":o+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":a("'")?o+="'":h=!0;break;default:o+=e.charAt(i)}return o},parseDate:function(e,t,n){if(t==null)throw s.local.invalidArguments||s.regionalOptions[""].invalidArguments;if(""===(t="object"==typeof t?t.toString():t+""))return null;e=e||this.local.dateFormat,l=(n=n||{}).shortYearCutoff||this.shortYearCutoff,l="string"!=typeof l?l:this.today().year()%100+parseInt(l,10);for(var l,f,_,k=n.dayNamesShort||this.local.dayNamesShort,E=n.dayNames||this.local.dayNames,A=n.parseMonth||this.local.parseMonth,y=n.monthNumbers||this.local.monthNumbers,j=n.monthNamesShort||this.local.monthNamesShort,g=n.monthNames||this.local.monthNames,h=-1,i=-1,r=-1,u=-1,p=-1,O=!1,v=!1,d=function(t,n){for(var s=1;a+s<e.length&&e.charAt(a+s)===t;)s++;return a+=s-1,Math.floor(s/(n||1))>1},c=function(e,n){var a=d(e,n),r=[2,3,a?4:2,a?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],c=new RegExp("^-?\\d{1,"+r+"}"),i=t.substring(o).match(c);if(!i)throw(s.local.missingNumberAt||s.regionalOptions[""].missingNumberAt).replace(/\{0\}/,o);return o+=i[0].length,parseInt(i[0],10)},m=this,C=function(){if("function"==typeof y){d("m");var e=y.call(m,t.substring(o));return o+=e.length,e}return c("m")},w=function(e,n,i,a){for(var c=d(e,a)?i:n,r=0;r<c.length;r++)if(t.substr(o,c[r].length).toLowerCase()===c[r].toLowerCase())return o+=c[r].length,r+m.minMonth;throw(s.local.unknownNameAt||s.regionalOptions[""].unknownNameAt).replace(/\{0\}/,o)},x=function(){if("function"==typeof g){var e=d("M")?g.call(m,t.substring(o)):j.call(m,t.substring(o));return o+=e.length,e}return w("M",j,g)},b=function(){if(t.charAt(o)!==e.charAt(a))throw(s.local.unexpectedLiteralAt||s.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,o);o++},o=0,a=0;a<e.length;a++)if(v)"'"!==e.charAt(a)||d("'")?b():v=!1;else switch(e.charAt(a)){case"d":u=c("d");break;case"D":w("D",k,E);break;case"o":p=c("o");break;case"w":c("w");break;case"m":r=C();break;case"M":r=x();break;case"y":_=a,O=!d("y",2),a=_,i=c("y",2);break;case"Y":i=c("Y",2);break;case"J":h=c("J")+.5,"."===t.charAt(o)&&(o++,c("J"));break;case"@":h=c("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":h=c("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":o=t.length;break;case"'":d("'")?b():v=!0;break;default:b()}if(o<t.length)throw s.local.unexpectedText||s.regionalOptions[""].unexpectedText;if(-1===i?i=this.today().year():i<100&&O&&(i+=-1===l?1900:this.today().year()-this.today().year()%100-(i<=l?0:100)),"string"==typeof r&&(r=A.call(this,i,r)),p>-1){r=1,u=p;for(f=this.daysInMonth(i,r);u>f;f=this.daysInMonth(i,r))r++,u-=f}return h>-1?this.fromJD(h):this.newDate(i,r,u)},determineDate:function(e,t,n,s,o){n&&"object"!=typeof n&&(o=s,s=n,n=null),"string"!=typeof s&&(o=s,s="");var i=this;return t=t?t.newDate():null,e==null?t:"string"==typeof e?function(e){try{return i.parseDate(s,e,o)}catch{}for(var a=((e=e.toLowerCase()).match(/^c/)&&n?n.newDate():null)||i.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,t=r.exec(e);t;)a.add(parseInt(t[1],10),t[2]||"d"),t=r.exec(e);return a}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:i.today().add(e,"d"):i.newDate(e)}})},21576:function(){},19768:function(){},63436:function(e,t,n){"use strict";var s=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var t=[],e=0;e<s.length;e++)"function"==typeof o[s[e]]&&(t[t.length]=s[e]);return t}},67756:function(e,t,n){"use strict";function E(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function L(e,t){var s,n=Object.create(e.prototype);for(s in t)n[s]=t[s];return n}function u(){}n.d(t,{qy:function(){return x},Gz:function(){return m}});var g,j,y,k,h=.7,_=1/h,c="\\s*([+-]?\\d+)\\s*",d="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y=/^#([0-9a-f]{3,8})$/,q=new RegExp("^rgb\\(".concat(c,",").concat(c,",").concat(c,"\\)$")),K=new RegExp("^rgb\\(".concat(i,",").concat(i,",").concat(i,"\\)$")),U=new RegExp("^rgba\\(".concat(c,",").concat(c,",").concat(c,",").concat(d,"\\)$")),W=new RegExp("^rgba\\(".concat(i,",").concat(i,",").concat(i,",").concat(d,"\\)$")),B=new RegExp("^hsl\\(".concat(d,",").concat(i,",").concat(i,"\\)$")),Q=new RegExp("^hsla\\(".concat(d,",").concat(i,",").concat(i,",").concat(d,"\\)$")),N={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function z(){return this.rgb().formatHex()}function M(){return this.rgb().formatRgb()}function l(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Y.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?I(t):3===n?new s(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?v(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?v(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=q.exec(e))?new s(t[1],t[2],t[3],1):(t=K.exec(e))?new s(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=U.exec(e))?v(t[1],t[2],t[3],t[4]):(t=W.exec(e))?v(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=B.exec(e))?F(t[1],t[2]/100,t[3]/100,1):(t=Q.exec(e))?F(t[1],t[2]/100,t[3]/100,t[4]):N.hasOwnProperty(e)?I(N[e]):"transparent"===e?new s(NaN,NaN,NaN,0):null}function I(e){return new s(e>>16&255,e>>8&255,255&e,1)}function v(e,t,n,o){return o<=0&&(e=t=n=NaN),new s(e,t,n,o)}function p(e,t,n,o){return 1===arguments.length?((i=e)instanceof u||(i=l(i)),i?new s((i=i.rgb()).r,i.g,i.b,i.opacity):new s):new s(e,t,n,o??1);var i}function s(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}function S(){return"#".concat(r(this.r)).concat(r(this.g)).concat(r(this.b))}function A(){var e=w(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(a(this.r),", ").concat(a(this.g),", ").concat(a(this.b)).concat(1===e?")":", ".concat(e,")"))}function w(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function a(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function r(e){return((e=a(e))<16?"0":"")+e.toString(16)}function F(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new o(e,t,n,s)}function T(e){if(e instanceof o)return new o(e.h,e.s,e.l,e.opacity);if(e instanceof u||(e=l(e)),!e)return new o;if(e instanceof o)return e;var a=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(a,n,i),s=Math.max(a,n,i),c=NaN,t=s-r,d=(s+r)/2;return t?(c=a===s?(n-i)/t+6*(n<i):n===s?(i-a)/t+2:(a-n)/t+4,t/=d<.5?s+r:2-s-r,c*=60):t=d>0&&d<1?0:c,new o(c,t,d,e.opacity)}function o(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}function D(e){return(e=(e||0)%360)<0?e+360:e}function b(e){return Math.max(0,Math.min(1,e||0))}function O(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function R(e,t,n,s,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*s+a*o)/6}E(u,l,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:z,formatHex:z,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return T(this).formatHsl()},formatRgb:M,toString:M}),E(s,p,L(u,{brighter:function(e){return e=e==null?_:Math.pow(_,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?h:Math.pow(h,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new s(a(this.r),a(this.g),a(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatHex8:function(){return"#".concat(r(this.r)).concat(r(this.g)).concat(r(this.b)).concat(r(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:A,toString:A})),E(o,function(e,t,n,s){return 1===arguments.length?T(e):new o(e,t,n,s??1)},L(u,{brighter:function(e){return e=e==null?_:Math.pow(_,e),new o(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?h:Math.pow(h,e),new o(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),i=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*i,o=2*t-n;return new s(O(e>=240?e-240:e+120,o,n),O(e,o,n),O(e<120?e+240:e-120,o,n),this.opacity)},clamp:function(){return new o(D(this.h),b(this.s),b(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=w(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(D(this.h),", ").concat(100*b(this.s),"%, ").concat(100*b(this.l),"%").concat(1===e?")":", ".concat(e,")"))}})),g=function(e){return function(){return e}};function H(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):g(isNaN(e)?t:e)}k=function e(t){var n=function(e){return 1==(e=+e)?H:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}(t,n,e):g(isNaN(t)?n:t)}}(t);function s(e,t){var s=n((e=p(e)).r,(t=p(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=H(e.opacity,t.opacity);return function(t){return e.r=s(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return s.gamma=e,s}(1);function P(e){return function(t){var n,s,o=t.length,i=new Array(o),a=new Array(o),r=new Array(o);for(s=0;s<o;++s)n=p(t[s]),i[s]=n.r||0,a[s]=n.g||0,r[s]=n.b||0;return i=e(i),a=e(a),r=e(r),n.opacity=1,function(e){return n.r=i(e),n.g=a(e),n.b=r(e),n+""}}}function V(e,t){var n,s=t?t.length:0,o=e?Math.min(s,e.length):0,a=new Array(o),i=new Array(s);for(n=0;n<o;++n)a[n]=x(e[n],t[n]);for(;n<s;++n)i[n]=t[n];return function(e){for(n=0;n<o;++n)i[n]=a[n](e);return i}}function $(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function m(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function Z(e,t){var n,s={},o={};for(n in null!==e&&"object"===f(e)||(e={}),null!==t&&"object"===f(t)||(t={}),t)n in e?s[n]=x(e[n],t[n]):o[n]=t[n];return function(e){for(n in s)o[n]=s[n](e);return o}}P(function(e){var t=e.length-1;return function(n){var s=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[s],i=e[s+1],a=s>0?e[s-1]:2*o-i,r=s<t-1?e[s+2]:2*i-o;return R((n-s/t)*t,a,o,i,r)}}),P(function(e){var t=e.length;return function(n){var s=Math.floor(((n%=1)<0?++n:n)*t),o=e[(s+t-1)%t],i=e[s%t],a=e[(s+1)%t],r=e[(s+2)%t];return R((n-s/t)*t,o,i,a,r)}}),j=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,y=new RegExp(j.source,"g");function G(e,t){var o,i,c,r=j.lastIndex=y.lastIndex=0,s=-1,n=[],a=[];for(e+="",t+="";(c=j.exec(e))&&(i=y.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),n[s]?n[s]+=o:n[++s]=o),(c=c[0])===(i=i[0])?n[s]?n[s]+=i:n[++s]=i:(n[++s]=null,a.push({i:s,x:m(c,i)})),r=y.lastIndex;return r<t.length&&(o=t.slice(r),n[s]?n[s]+=o:n[++s]=o),n.length<2?a[0]?function(e){return function(t){return e(t)+""}}(a[0].x):function(e){return function(){return e}}(t):(t=a.length,function(e){for(var o,s=0;s<t;++s)n[(o=a[s]).i]=o.x(e);return n.join("")})}function X(e,t){t||(t=[]);var n,o=e?Math.min(t.length,e.length):0,s=t.slice();return function(i){for(n=0;n<o;++n)s[n]=e[n]*(1-i)+t[n]*i;return s}}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function x(e,t){var n,o,s=C(t);return t==null||"boolean"===s?g(t):("number"===s?m:"string"===s?(o=l(t))?(t=o,k):G:t instanceof l?k:t instanceof Date?$:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?V:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Z:m:X))(e,t)}},30584:function(e){"use strict";e.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(e){"use strict";e.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(e){"use strict";e.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(e){"use strict";e.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(e){"use strict";e.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(e){"use strict";e.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},t={};function e(s){var o,i=t[s];return void 0!==i?i.exports:(o=t[s]={exports:{}},n[s].call(o.exports,o,o.exports,e),o.exports)}return e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e(13792)}()})</script><div id=d3c50b02-70ae-4c9d-9ace-ad1e9cb05ebb class=plotly-graph-div style=height:1600px;width:100%></div><script type=text/javascript>window.PLOTLYENV=window.PLOTLYENV||{},document.getElementById("d3c50b02-70ae-4c9d-9ace-ad1e9cb05ebb")&&Plotly.newPlot("d3c50b02-70ae-4c9d-9ace-ad1e9cb05ebb",[{line:{color:"#2E91E5"},mode:"lines+markers",name:"NZ Unemployment",x:["2017-01-01T00:00:00","2017-04-01T00:00:00","2017-07-01T00:00:00","2017-10-01T00:00:00","2018-01-01T00:00:00","2018-04-01T00:00:00","2018-07-01T00:00:00","2018-10-01T00:00:00","2019-01-01T00:00:00","2019-04-01T00:00:00","2019-07-01T00:00:00","2019-10-01T00:00:00","2020-01-01T00:00:00","2020-04-01T00:00:00","2020-07-01T00:00:00","2020-10-01T00:00:00","2021-01-01T00:00:00","2021-04-01T00:00:00","2021-07-01T00:00:00","2021-10-01T00:00:00","2022-01-01T00:00:00","2022-04-01T00:00:00","2022-07-01T00:00:00","2022-10-01T00:00:00","2023-01-01T00:00:00","2023-04-01T00:00:00","2023-07-01T00:00:00","2023-10-01T00:00:00","2024-01-01T00:00:00"],y:[4.9,4.9,4.7,4.5,4.4,4.6,4,4.3,4.2,4.1,4.1,4.1,4.2,4.1,5.2,4.9,4.6,4,3.3,3.2,3.2,3.3,3.3,3.4,3.4,3.6,3.9,4,4.3],type:"scatter",xaxis:"x",yaxis:"y"},{line:{color:"#E15F99"},mode:"lines+markers",name:"HH_Deposits_nzd_mil \u0394(YoY) %",x:["2016-12-31T00:00:00","2017-01-31T00:00:00","2017-02-28T00:00:00","2017-03-31T00:00:00","2017-04-30T00:00:00","2017-05-31T00:00:00","2017-06-30T00:00:00","2017-07-31T00:00:00","2017-08-31T00:00:00","2017-09-30T00:00:00","2017-10-31T00:00:00","2017-11-30T00:00:00","2017-12-31T00:00:00","2018-01-31T00:00:00","2018-02-28T00:00:00","2018-03-31T00:00:00","2018-04-30T00:00:00","2018-05-31T00:00:00","2018-06-30T00:00:00","2018-07-31T00:00:00","2018-08-31T00:00:00","2018-09-30T00:00:00","2018-10-31T00:00:00","2018-11-30T00:00:00","2018-12-31T00:00:00","2019-01-31T00:00:00","2019-02-28T00:00:00","2019-03-31T00:00:00","2019-04-30T00:00:00","2019-05-31T00:00:00","2019-06-30T00:00:00","2019-07-31T00:00:00","2019-08-31T00:00:00","2019-09-30T00:00:00","2019-10-31T00:00:00","2019-11-30T00:00:00","2019-12-31T00:00:00","2020-01-31T00:00:00","2020-02-29T00:00:00","2020-03-31T00:00:00","2020-04-30T00:00:00","2020-05-31T00:00:00","2020-06-30T00:00:00","2020-07-31T00:00:00","2020-08-31T00:00:00","2020-09-30T00:00:00","2020-10-31T00:00:00","2020-11-30T00:00:00","2020-12-31T00:00:00","2021-01-31T00:00:00","2021-02-28T00:00:00","2021-03-31T00:00:00","2021-04-30T00:00:00","2021-05-31T00:00:00","2021-06-30T00:00:00","2021-07-31T00:00:00","2021-08-31T00:00:00","2021-09-30T00:00:00","2021-10-31T00:00:00","2021-11-30T00:00:00","2021-12-31T00:00:00","2022-01-31T00:00:00","2022-02-28T00:00:00","2022-03-31T00:00:00","2022-04-30T00:00:00","2022-05-31T00:00:00","2022-06-30T00:00:00","2022-07-31T00:00:00","2022-08-31T00:00:00","2022-09-30T00:00:00","2022-10-31T00:00:00","2022-11-30T00:00:00","2022-12-31T00:00:00","2023-01-31T00:00:00","2023-02-28T00:00:00","2023-03-31T00:00:00","2023-04-30T00:00:00","2023-05-31T00:00:00","2023-06-30T00:00:00","2023-07-31T00:00:00","2023-08-31T00:00:00","2023-09-30T00:00:00","2023-10-31T00:00:00","2023-11-30T00:00:00","2023-12-31T00:00:00","2024-01-31T00:00:00","2024-02-29T00:00:00","2024-03-31T00:00:00","2024-04-30T00:00:00","2024-05-31T00:00:00","2024-06-30T00:00:00","2024-07-31T00:00:00","2024-08-31T00:00:00","2024-09-30T00:00:00","2024-10-31T00:00:00","2024-11-30T00:00:00","2024-12-31T00:00:00","2025-01-31T00:00:00","2025-02-28T00:00:00","2025-03-31T00:00:00","2025-04-30T00:00:00","2025-05-31T00:00:00"],y:[null,null,null,null,null,null,null,null,null,null,null,null,7.0999383730484755,7.0168440286696,7.075946526464261,7.0675900873785835,6.57102640475562,6.381807720211152,6.734616413721861,7.187550435138856,6.988197491194459,6.90575858386222,6.839869519705943,6.035734159146444,6.178522621017057,6.069186927350123,5.935293800635932,5.330437407159727,5.8846074471535115,5.998965290189062,5.402553489185569,5.252002293299052,4.986744754214811,5.063930689601714,4.718749109965548,5.035622408177476,4.4263424106941285,4.3043298361362,4.280635114434772,6.192268794246547,7.305582625643892,7.623960066555746,7.903892210600838,8.02658655486228,8.656401115677248,9.427683026126687,9.68347303890904,9.144722193560305,9.786198880990348,9.730411203069211,9.262491462766832,8.344400294178334,6.353596894558211,5.119404677241479,5.498572431786841,5.022054254484698,4.836259797071518,4.432570101625499,4.335427814779735,5.464777239299834,6.6921728511778245,6.80642014193249,7.4210959746792815,6.880823550094739,7.081200564075796,7.916462398274349,8.05338801053379,8.24951259493487,8.106828938471944,7.575040287680346,7.06045640569819,6.754072683182288,5.325850682345767,5.328950113830788,5.224145973131122,4.787948570331979,5.038072627353052,5.0838602994621285,4.678288944147413,5.104299206107421,5.366635990815105,5.320454121140461,5.8920159654053395,5.940948483495889,5.88557482067662,6.355320385272312,6.002326142772496,6.271447320801782,6.148673564564766,6.395497127343619,5.8120304304682735,6.4796225015665065,5.695351883964572,6.699418818136915,6.7129823737568595,6.562656432504599,7.221571605331656,6.9498884524484605,7.092550958301769,6.540184799199089,7.134274434154286,6.56527692563984],type:"scatter",xaxis:"x2",yaxis:"y2"},{line:{color:"#1CA71C"},mode:"lines+markers",name:"Deposits_Gross_nzd_mil \u0394(YoY) %",x:["2016-12-31T00:00:00","2017-01-31T00:00:00","2017-02-28T00:00:00","2017-03-31T00:00:00","2017-04-30T00:00:00","2017-05-31T00:00:00","2017-06-30T00:00:00","2017-07-31T00:00:00","2017-08-31T00:00:00","2017-09-30T00:00:00","2017-10-31T00:00:00","2017-11-30T00:00:00","2017-12-31T00:00:00","2018-01-31T00:00:00","2018-02-28T00:00:00","2018-03-31T00:00:00","2018-04-30T00:00:00","2018-05-31T00:00:00","2018-06-30T00:00:00","2018-07-31T00:00:00","2018-08-31T00:00:00","2018-09-30T00:00:00","2018-10-31T00:00:00","2018-11-30T00:00:00","2018-12-31T00:00:00","2019-01-31T00:00:00","2019-02-28T00:00:00","2019-03-31T00:00:00","2019-04-30T00:00:00","2019-05-31T00:00:00","2019-06-30T00:00:00","2019-07-31T00:00:00","2019-08-31T00:00:00","2019-09-30T00:00:00","2019-10-31T00:00:00","2019-11-30T00:00:00","2019-12-31T00:00:00","2020-01-31T00:00:00","2020-02-29T00:00:00","2020-03-31T00:00:00","2020-04-30T00:00:00","2020-05-31T00:00:00","2020-06-30T00:00:00","2020-07-31T00:00:00","2020-08-31T00:00:00","2020-09-30T00:00:00","2020-10-31T00:00:00","2020-11-30T00:00:00","2020-12-31T00:00:00","2021-01-31T00:00:00","2021-02-28T00:00:00","2021-03-31T00:00:00","2021-04-30T00:00:00","2021-05-31T00:00:00","2021-06-30T00:00:00","2021-07-31T00:00:00","2021-08-31T00:00:00","2021-09-30T00:00:00","2021-10-31T00:00:00","2021-11-30T00:00:00","2021-12-31T00:00:00","2022-01-31T00:00:00","2022-02-28T00:00:00","2022-03-31T00:00:00","2022-04-30T00:00:00","2022-05-31T00:00:00","2022-06-30T00:00:00","2022-07-31T00:00:00","2022-08-31T00:00:00","2022-09-30T00:00:00","2022-10-31T00:00:00","2022-11-30T00:00:00","2022-12-31T00:00:00","2023-01-31T00:00:00","2023-02-28T00:00:00","2023-03-31T00:00:00","2023-04-30T00:00:00","2023-05-31T00:00:00","2023-06-30T00:00:00","2023-07-31T00:00:00","2023-08-31T00:00:00","2023-09-30T00:00:00","2023-10-31T00:00:00","2023-11-30T00:00:00","2023-12-31T00:00:00","2024-01-31T00:00:00","2024-02-29T00:00:00","2024-03-31T00:00:00","2024-04-30T00:00:00","2024-05-31T00:00:00","2024-06-30T00:00:00","2024-07-31T00:00:00","2024-08-31T00:00:00","2024-09-30T00:00:00","2024-10-31T00:00:00","2024-11-30T00:00:00","2024-12-31T00:00:00","2025-01-31T00:00:00","2025-02-28T00:00:00","2025-03-31T00:00:00","2025-04-30T00:00:00","2025-05-31T00:00:00"],y:[null,null,null,null,null,null,null,null,null,null,null,null,6.877204395068248,6.282071745619899,6.930178174476387,7.00914820358276,6.061327382428305,6.138403244033763,7.889737319292633,7.674823277095588,7.971283124035988,7.68006380005799,7.076196981124738,6.582702747822511,5.873569886541952,6.082024572222844,5.9203102401500285,5.640892156001853,5.886680236527031,5.901142399037984,5.29993708907448,6.425448846608561,5.256510476540832,6.078597595125368,5.124205294709827,5.658354092178297,5.75462235197246,5.065228064785288,5.747554168417257,8.475753662555107,9.069044492984869,9.13410926983902,9.094050735970294,8.235449462069289,10.470595773433677,9.8103082670975,10.48678152490561,9.674090292269621,10.56473213021738,10.320379581714722,9.242221288865181,6.547237866920641,5.984869136655502,5.44327360517638,4.756970357524448,5.4884873044751314,3.874475023925461,4.422532768989451,4.367007722560445,5.092980093889876,5.3053970725311705,4.782187249059899,5.667391456828219,5.403128451442218,5.015343477430445,5.208017473981763,4.832840456555942,3.679633545104166,4.9078804768539985,4.747239918279433,4.276554515595654,4.221133369115426,3.3339331657044946,4.1209806426011575,2.7815269634055007,2.1536871963076853,3.159063848155408,2.6921207473065367,3.460161091215763,3.8606377896811983,3.1199798710976,3.008743274404302,2.8247533632286936,3.2859872082398933,3.175066362934653,3.0841715874146303,3.365473163520849,4.309119187794019,3.296692963732606,4.66583737474402,4.067668462338148,3.6160387005794714,3.944800015015293,3.704360073313029,4.057115477652484,4.5469898508999185,4.362175773445132,5.1297574456580675,5.98765674933297,4.7076392509856735,5.468117063401756,4.279682585852718],type:"scatter",xaxis:"x3",yaxis:"y3"},{line:{color:"#FB0D0D"},mode:"lines+markers",name:"Loans_Gross_nzd_mil \u0394(YoY) %",x:["2016-12-31T00:00:00","2017-01-31T00:00:00","2017-02-28T00:00:00","2017-03-31T00:00:00","2017-04-30T00:00:00","2017-05-31T00:00:00","2017-06-30T00:00:00","2017-07-31T00:00:00","2017-08-31T00:00:00","2017-09-30T00:00:00","2017-10-31T00:00:00","2017-11-30T00:00:00","2017-12-31T00:00:00","2018-01-31T00:00:00","2018-02-28T00:00:00","2018-03-31T00:00:00","2018-04-30T00:00:00","2018-05-31T00:00:00","2018-06-30T00:00:00","2018-07-31T00:00:00","2018-08-31T00:00:00","2018-09-30T00:00:00","2018-10-31T00:00:00","2018-11-30T00:00:00","2018-12-31T00:00:00","2019-01-31T00:00:00","2019-02-28T00:00:00","2019-03-31T00:00:00","2019-04-30T00:00:00","2019-05-31T00:00:00","2019-06-30T00:00:00","2019-07-31T00:00:00","2019-08-31T00:00:00","2019-09-30T00:00:00","2019-10-31T00:00:00","2019-11-30T00:00:00","2019-12-31T00:00:00","2020-01-31T00:00:00","2020-02-29T00:00:00","2020-03-31T00:00:00","2020-04-30T00:00:00","2020-05-31T00:00:00","2020-06-30T00:00:00","2020-07-31T00:00:00","2020-08-31T00:00:00","2020-09-30T00:00:00","2020-10-31T00:00:00","2020-11-30T00:00:00","2020-12-31T00:00:00","2021-01-31T00:00:00","2021-02-28T00:00:00","2021-03-31T00:00:00","2021-04-30T00:00:00","2021-05-31T00:00:00","2021-06-30T00:00:00","2021-07-31T00:00:00","2021-08-31T00:00:00","2021-09-30T00:00:00","2021-10-31T00:00:00","2021-11-30T00:00:00","2021-12-31T00:00:00","2022-01-31T00:00:00","2022-02-28T00:00:00","2022-03-31T00:00:00","2022-04-30T00:00:00","2022-05-31T00:00:00","2022-06-30T00:00:00","2022-07-31T00:00:00","2022-08-31T00:00:00","2022-09-30T00:00:00","2022-10-31T00:00:00","2022-11-30T00:00:00","2022-12-31T00:00:00","2023-01-31T00:00:00","2023-02-28T00:00:00","2023-03-31T00:00:00","2023-04-30T00:00:00","2023-05-31T00:00:00","2023-06-30T00:00:00","2023-07-31T00:00:00","2023-08-31T00:00:00","2023-09-30T00:00:00","2023-10-31T00:00:00","2023-11-30T00:00:00","2023-12-31T00:00:00","2024-01-31T00:00:00","2024-02-29T00:00:00","2024-03-31T00:00:00","2024-04-30T00:00:00","2024-05-31T00:00:00","2024-06-30T00:00:00","2024-07-31T00:00:00","2024-08-31T00:00:00","2024-09-30T00:00:00","2024-10-31T00:00:00","2024-11-30T00:00:00","2024-12-31T00:00:00","2025-01-31T00:00:00","2025-02-28T00:00:00","2025-03-31T00:00:00","2025-04-30T00:00:00","2025-05-31T00:00:00"],y:[null,null,null,null,null,null,null,null,null,null,null,null,5.086726857228485,5.062803133938565,5.178058494489335,4.982153846153836,4.933324171644249,5.155147579404806,5.162461629695891,4.946608497944993,5.046888814807304,5.029927468205808,5.073590801746142,5.344825123891406,5.3942608885783505,5.538286715356122,5.557938093801851,5.540106450327098,5.4453141626344514,5.28549472286326,5.293372653064998,6.022127580779557,5.707945268483394,5.5463737007294345,5.545099766390682,5.50498100912602,5.444020755019063,5.420604353082892,5.234044168037655,5.385698861187516,4.620953200511879,4.162146190009963,3.6110940394560087,3.080395932392843,3.254066495384733,2.3897600277224207,2.129256792800227,2.4551071325316753,3.0836118827804126,3.2566324229089894,3.3787424324060567,3.480900581836588,4.675270713734525,5.469264364360771,6.236442056739988,6.81261754290845,6.392993264212676,7.396447200869805,7.687609387472283,7.6177496660806865,7.2376664868677665,6.8951447547648925,7.011035280888733,6.585016053064741,6.375235433501425,5.838194146149545,5.545507660218507,5.197339070260831,5.34643504986414,5.197736552161514,4.766244738942005,4.598205701433233,4.252795957493327,4.017126476445321,3.5613617275854548,3.350369651144125,3.1314671708085218,2.9276220964634225,3.020988216445586,2.839710713659671,2.7689531364550657,2.589162177899351,2.7007097600406205,2.5794435562190854,2.3889847649798623,2.5125702646751957,2.741039869502515,2.797910213139776,2.7188631282802023,3.186512506333772,2.643562014132006,2.559323183281914,2.804646058167193,2.785523962477643,2.611694092968886,2.783942594194966,3.203181070167682,3.3182432872195022,3.017529568870292,2.991433002191224,3.1231522667026113,3.1331079838362585],type:"scatter",xaxis:"x4",yaxis:"y4"},{line:{color:"#DA16FF"},mode:"lines+markers",name:"HH_Deposits_nzd_mil",x:["2016-12-31T00:00:00","2017-01-31T00:00:00","2017-02-28T00:00:00","2017-03-31T00:00:00","2017-04-30T00:00:00","2017-05-31T00:00:00","2017-06-30T00:00:00","2017-07-31T00:00:00","2017-08-31T00:00:00","2017-09-30T00:00:00","2017-10-31T00:00:00","2017-11-30T00:00:00","2017-12-31T00:00:00","2018-01-31T00:00:00","2018-02-28T00:00:00","2018-03-31T00:00:00","2018-04-30T00:00:00","2018-05-31T00:00:00","2018-06-30T00:00:00","2018-07-31T00:00:00","2018-08-31T00:00:00","2018-09-30T00:00:00","2018-10-31T00:00:00","2018-11-30T00:00:00","2018-12-31T00:00:00","2019-01-31T00:00:00","2019-02-28T00:00:00","2019-03-31T00:00:00","2019-04-30T00:00:00","2019-05-31T00:00:00","2019-06-30T00:00:00","2019-07-31T00:00:00","2019-08-31T00:00:00","2019-09-30T00:00:00","2019-10-31T00:00:00","2019-11-30T00:00:00","2019-12-31T00:00:00","2020-01-31T00:00:00","2020-02-29T00:00:00","2020-03-31T00:00:00","2020-04-30T00:00:00","2020-05-31T00:00:00","2020-06-30T00:00:00","2020-07-31T00:00:00","2020-08-31T00:00:00","2020-09-30T00:00:00","2020-10-31T00:00:00","2020-11-30T00:00:00","2020-12-31T00:00:00","2021-01-31T00:00:00","2021-02-28T00:00:00","2021-03-31T00:00:00","2021-04-30T00:00:00","2021-05-31T00:00:00","2021-06-30T00:00:00","2021-07-31T00:00:00","2021-08-31T00:00:00","2021-09-30T00:00:00","2021-10-31T00:00:00","2021-11-30T00:00:00","2021-12-31T00:00:00","2022-01-31T00:00:00","2022-02-28T00:00:00","2022-03-31T00:00:00","2022-04-30T00:00:00","2022-05-31T00:00:00","2022-06-30T00:00:00","2022-07-31T00:00:00","2022-08-31T00:00:00","2022-09-30T00:00:00","2022-10-31T00:00:00","2022-11-30T00:00:00","2022-12-31T00:00:00","2023-01-31T00:00:00","2023-02-28T00:00:00","2023-03-31T00:00:00","2023-04-30T00:00:00","2023-05-31T00:00:00","2023-06-30T00:00:00","2023-07-31T00:00:00","2023-08-31T00:00:00","2023-09-30T00:00:00","2023-10-31T00:00:00","2023-11-30T00:00:00","2023-12-31T00:00:00","2024-01-31T00:00:00","2024-02-29T00:00:00","2024-03-31T00:00:00","2024-04-30T00:00:00","2024-05-31T00:00:00","2024-06-30T00:00:00","2024-07-31T00:00:00","2024-08-31T00:00:00","2024-09-30T00:00:00","2024-10-31T00:00:00","2024-11-30T00:00:00","2024-12-31T00:00:00","2025-01-31T00:00:00","2025-02-28T00:00:00","2025-03-31T00:00:00","2025-04-30T00:00:00","2025-05-31T00:00:00"],y:[155776,155426,155965,157819,159138,159892,160707,161098,161830,162922,164316,165332,166836,166332,167001,168973,169595,170096,171530,172677,173139,174173,175555,175311,177144,176427,176913,177980,179575,180300,180797,181746,181773,182993,183839,184139,184985,184021,184486,189001,192694,194046,195087,196334,197508,200245,201641,200978,203088,201927,201574,204772,204937,203980,205814,206194,207060,209121,210383,211961,216679,215671,216533,218862,219449,220128,222389,223204,223846,224962,225237,226277,228219,227164,227845,229341,230505,231319,232793,234597,235859,236931,238508,239720,241651,241601,241521,243724,244678,246113,246323,249798,249292,252804,254519,255452,259102,258392,258651,259664,262134,262271],type:"scatter",xaxis:"x5",yaxis:"y5"},{line:{color:"#72B7B2"},mode:"lines+markers",name:"Deposits_Gross_nzd_mil",x:["2016-12-31T00:00:00","2017-01-31T00:00:00","2017-02-28T00:00:00","2017-03-31T00:00:00","2017-04-30T00:00:00","2017-05-31T00:00:00","2017-06-30T00:00:00","2017-07-31T00:00:00","2017-08-31T00:00:00","2017-09-30T00:00:00","2017-10-31T00:00:00","2017-11-30T00:00:00","2017-12-31T00:00:00","2018-01-31T00:00:00","2018-02-28T00:00:00","2018-03-31T00:00:00","2018-04-30T00:00:00","2018-05-31T00:00:00","2018-06-30T00:00:00","2018-07-31T00:00:00","2018-08-31T00:00:00","2018-09-30T00:00:00","2018-10-31T00:00:00","2018-11-30T00:00:00","2018-12-31T00:00:00","2019-01-31T00:00:00","2019-02-28T00:00:00","2019-03-31T00:00:00","2019-04-30T00:00:00","2019-05-31T00:00:00","2019-06-30T00:00:00","2019-07-31T00:00:00","2019-08-31T00:00:00","2019-09-30T00:00:00","2019-10-31T00:00:00","2019-11-30T00:00:00","2019-12-31T00:00:00","2020-01-31T00:00:00","2020-02-29T00:00:00","2020-03-31T00:00:00","2020-04-30T00:00:00","2020-05-31T00:00:00","2020-06-30T00:00:00","2020-07-31T00:00:00","2020-08-31T00:00:00","2020-09-30T00:00:00","2020-10-31T00:00:00","2020-11-30T00:00:00","2020-12-31T00:00:00","2021-01-31T00:00:00","2021-02-28T00:00:00","2021-03-31T00:00:00","2021-04-30T00:00:00","2021-05-31T00:00:00","2021-06-30T00:00:00","2021-07-31T00:00:00","2021-08-31T00:00:00","2021-09-30T00:00:00","2021-10-31T00:00:00","2021-11-30T00:00:00","2021-12-31T00:00:00","2022-01-31T00:00:00","2022-02-28T00:00:00","2022-03-31T00:00:00","2022-04-30T00:00:00","2022-05-31T00:00:00","2022-06-30T00:00:00","2022-07-31T00:00:00","2022-08-31T00:00:00","2022-09-30T00:00:00","2022-10-31T00:00:00","2022-11-30T00:00:00","2022-12-31T00:00:00","2023-01-31T00:00:00","2023-02-28T00:00:00","2023-03-31T00:00:00","2023-04-30T00:00:00","2023-05-31T00:00:00","2023-06-30T00:00:00","2023-07-31T00:00:00","2023-08-31T00:00:00","2023-09-30T00:00:00","2023-10-31T00:00:00","2023-11-30T00:00:00","2023-12-31T00:00:00","2024-01-31T00:00:00","2024-02-29T00:00:00","2024-03-31T00:00:00","2024-04-30T00:00:00","2024-05-31T00:00:00","2024-06-30T00:00:00","2024-07-31T00:00:00","2024-08-31T00:00:00","2024-09-30T00:00:00","2024-10-31T00:00:00","2024-11-30T00:00:00","2024-12-31T00:00:00","2025-01-31T00:00:00","2025-02-28T00:00:00","2025-03-31T00:00:00","2025-04-30T00:00:00","2025-05-31T00:00:00"],y:[295149,294457,294206,297982,302475,300860,300555,304007,302122,303448,308923,311483,315447,312955,314595,318868,320809,319328,324268,327339,326205,326753,330783,331987,333975,331989,333220,336855,339694,338172,341454,348372,343352,346615,347733,350772,353194,348805,352372,365406,370501,369061,372506,377062,379303,380619,384199,384706,390508,384803,384939,389330,392675,389150,390226,397757,393999,397452,400977,404299,411226,403205,406755,410366,412369,409417,409085,412393,413336,416320,418125,421365,424936,419821,418069,419204,425396,420439,423240,428314,426232,428846,429936,435211,438428,432769,432139,437268,439420,440056,440456,443802,443046,444732,447379,455e3,457553,454969,458014,457853,463448,458889],type:"scatter",xaxis:"x6",yaxis:"y6"},{line:{color:"#B68100"},mode:"lines+markers",name:"Loans_Gross_nzd_mil",x:["2016-12-31T00:00:00","2017-01-31T00:00:00","2017-02-28T00:00:00","2017-03-31T00:00:00","2017-04-30T00:00:00","2017-05-31T00:00:00","2017-06-30T00:00:00","2017-07-31T00:00:00","2017-08-31T00:00:00","2017-09-30T00:00:00","2017-10-31T00:00:00","2017-11-30T00:00:00","2017-12-31T00:00:00","2018-01-31T00:00:00","2018-02-28T00:00:00","2018-03-31T00:00:00","2018-04-30T00:00:00","2018-05-31T00:00:00","2018-06-30T00:00:00","2018-07-31T00:00:00","2018-08-31T00:00:00","2018-09-30T00:00:00","2018-10-31T00:00:00","2018-11-30T00:00:00","2018-12-31T00:00:00","2019-01-31T00:00:00","2019-02-28T00:00:00","2019-03-31T00:00:00","2019-04-30T00:00:00","2019-05-31T00:00:00","2019-06-30T00:00:00","2019-07-31T00:00:00","2019-08-31T00:00:00","2019-09-30T00:00:00","2019-10-31T00:00:00","2019-11-30T00:00:00","2019-12-31T00:00:00","2020-01-31T00:00:00","2020-02-29T00:00:00","2020-03-31T00:00:00","2020-04-30T00:00:00","2020-05-31T00:00:00","2020-06-30T00:00:00","2020-07-31T00:00:00","2020-08-31T00:00:00","2020-09-30T00:00:00","2020-10-31T00:00:00","2020-11-30T00:00:00","2020-12-31T00:00:00","2021-01-31T00:00:00","2021-02-28T00:00:00","2021-03-31T00:00:00","2021-04-30T00:00:00","2021-05-31T00:00:00","2021-06-30T00:00:00","2021-07-31T00:00:00","2021-08-31T00:00:00","2021-09-30T00:00:00","2021-10-31T00:00:00","2021-11-30T00:00:00","2021-12-31T00:00:00","2022-01-31T00:00:00","2022-02-28T00:00:00","2022-03-31T00:00:00","2022-04-30T00:00:00","2022-05-31T00:00:00","2022-06-30T00:00:00","2022-07-31T00:00:00","2022-08-31T00:00:00","2022-09-30T00:00:00","2022-10-31T00:00:00","2022-11-30T00:00:00","2022-12-31T00:00:00","2023-01-31T00:00:00","2023-02-28T00:00:00","2023-03-31T00:00:00","2023-04-30T00:00:00","2023-05-31T00:00:00","2023-06-30T00:00:00","2023-07-31T00:00:00","2023-08-31T00:00:00","2023-09-30T00:00:00","2023-10-31T00:00:00","2023-11-30T00:00:00","2023-12-31T00:00:00","2024-01-31T00:00:00","2024-02-29T00:00:00","2024-03-31T00:00:00","2024-04-30T00:00:00","2024-05-31T00:00:00","2024-06-30T00:00:00","2024-07-31T00:00:00","2024-08-31T00:00:00","2024-09-30T00:00:00","2024-10-31T00:00:00","2024-11-30T00:00:00","2024-12-31T00:00:00","2025-01-31T00:00:00","2025-02-28T00:00:00","2025-03-31T00:00:00","2025-04-30T00:00:00","2025-05-31T00:00:00"],y:[400395,402050,403491,406250,407494,409610,411451,411676,413958,416507,419210,420126,420762,422405,424384,426490,427597,430726,432692,432040,434850,437457,440479,442581,443459,445799,447971,450118,450881,453492,455596,458058,459671,461720,464904,466945,467601,469964,471418,474360,471716,472367,472048,472168,474629,472754,474803,478409,482020,485269,487346,490872,493770,498202,501487,504335,504972,507721,511304,514853,516907,518729,521514,523196,525249,527288,529297,530547,531970,534111,535674,538527,538890,539567,540087,540725,541697,542725,545287,545613,546700,547940,550141,552418,551764,553124,554891,555854,556425,560019,559702,559577,562033,563203,564509,567797,569438,571478,571635,572482,573803,577565],type:"scatter",xaxis:"x7",yaxis:"y7"}],{template:{data:{barpolar:[{marker:{line:{color:"rgb(17,17,17)",width:.5},pattern:{fillmode:"overlay",size:10,solidity:.2}},type:"barpolar"}],bar:[{error_x:{color:"#f2f5fa"},error_y:{color:"#f2f5fa"},marker:{line:{color:"rgb(17,17,17)",width:.5},pattern:{fillmode:"overlay",size:10,solidity:.2}},type:"bar"}],carpet:[{aaxis:{endlinecolor:"#A2B1C6",gridcolor:"#506784",linecolor:"#506784",minorgridcolor:"#506784",startlinecolor:"#A2B1C6"},baxis:{endlinecolor:"#A2B1C6",gridcolor:"#506784",linecolor:"#506784",minorgridcolor:"#506784",startlinecolor:"#A2B1C6"},type:"carpet"}],choropleth:[{colorbar:{outlinewidth:0,ticks:""},type:"choropleth"}],contourcarpet:[{colorbar:{outlinewidth:0,ticks:""},type:"contourcarpet"}],contour:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"contour"}],heatmapgl:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"heatmapgl"}],heatmap:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"heatmap"}],histogram2dcontour:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"histogram2dcontour"}],histogram2d:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"histogram2d"}],histogram:[{marker:{pattern:{fillmode:"overlay",size:10,solidity:.2}},type:"histogram"}],mesh3d:[{colorbar:{outlinewidth:0,ticks:""},type:"mesh3d"}],parcoords:[{line:{colorbar:{outlinewidth:0,ticks:""}},type:"parcoords"}],pie:[{automargin:!0,type:"pie"}],scatter3d:[{line:{colorbar:{outlinewidth:0,ticks:""}},marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatter3d"}],scattercarpet:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scattercarpet"}],scattergeo:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scattergeo"}],scattergl:[{marker:{line:{color:"#283442"}},type:"scattergl"}],scattermapbox:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scattermapbox"}],scatterpolargl:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatterpolargl"}],scatterpolar:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatterpolar"}],scatter:[{marker:{line:{color:"#283442"}},type:"scatter"}],scatterternary:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatterternary"}],surface:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"surface"}],table:[{cells:{fill:{color:"#506784"},line:{color:"rgb(17,17,17)"}},header:{fill:{color:"#2a3f5f"},line:{color:"rgb(17,17,17)"}},type:"table"}]},layout:{annotationdefaults:{arrowcolor:"#f2f5fa",arrowhead:0,arrowwidth:1},autotypenumbers:"strict",coloraxis:{colorbar:{outlinewidth:0,ticks:""}},colorscale:{diverging:[[0,"#8e0152"],[.1,"#c51b7d"],[.2,"#de77ae"],[.3,"#f1b6da"],[.4,"#fde0ef"],[.5,"#f7f7f7"],[.6,"#e6f5d0"],[.7,"#b8e186"],[.8,"#7fbc41"],[.9,"#4d9221"],[1,"#276419"]],sequential:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],sequentialminus:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]]},colorway:["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],font:{color:"#f2f5fa"},geo:{bgcolor:"rgb(17,17,17)",lakecolor:"rgb(17,17,17)",landcolor:"rgb(17,17,17)",showlakes:!0,showland:!0,subunitcolor:"#506784"},hoverlabel:{align:"left"},hovermode:"closest",mapbox:{style:"dark"},paper_bgcolor:"rgb(17,17,17)",plot_bgcolor:"rgb(17,17,17)",polar:{angularaxis:{gridcolor:"#506784",linecolor:"#506784",ticks:""},bgcolor:"rgb(17,17,17)",radialaxis:{gridcolor:"#506784",linecolor:"#506784",ticks:""}},scene:{xaxis:{backgroundcolor:"rgb(17,17,17)",gridcolor:"#506784",gridwidth:2,linecolor:"#506784",showbackground:!0,ticks:"",zerolinecolor:"#C8D4E3"},yaxis:{backgroundcolor:"rgb(17,17,17)",gridcolor:"#506784",gridwidth:2,linecolor:"#506784",showbackground:!0,ticks:"",zerolinecolor:"#C8D4E3"},zaxis:{backgroundcolor:"rgb(17,17,17)",gridcolor:"#506784",gridwidth:2,linecolor:"#506784",showbackground:!0,ticks:"",zerolinecolor:"#C8D4E3"}},shapedefaults:{line:{color:"#f2f5fa"}},sliderdefaults:{bgcolor:"#C8D4E3",bordercolor:"rgb(17,17,17)",borderwidth:1,tickwidth:0},ternary:{aaxis:{gridcolor:"#506784",linecolor:"#506784",ticks:""},baxis:{gridcolor:"#506784",linecolor:"#506784",ticks:""},bgcolor:"rgb(17,17,17)",caxis:{gridcolor:"#506784",linecolor:"#506784",ticks:""}},title:{x:.05},updatemenudefaults:{bgcolor:"#506784",borderwidth:0},xaxis:{automargin:!0,gridcolor:"#283442",linecolor:"#506784",ticks:"",title:{standoff:15},zerolinecolor:"#283442",zerolinewidth:2},yaxis:{automargin:!0,gridcolor:"#283442",linecolor:"#506784",ticks:"",title:{standoff:15},zerolinecolor:"#283442",zerolinewidth:2}}},xaxis:{anchor:"y",domain:[0,1]},yaxis:{anchor:"x",domain:[.9085714285714286,1]},xaxis2:{anchor:"y2",domain:[0,1]},yaxis2:{anchor:"x2",domain:[.7571428571428571,.8485714285714285]},xaxis3:{anchor:"y3",domain:[0,1]},yaxis3:{anchor:"x3",domain:[.6057142857142856,.6971428571428571]},xaxis4:{anchor:"y4",domain:[0,1]},yaxis4:{anchor:"x4",domain:[.4542857142857143,.5457142857142857]},xaxis5:{anchor:"y5",domain:[0,1]},yaxis5:{anchor:"x5",domain:[.3028571428571428,.39428571428571424]},xaxis6:{anchor:"y6",domain:[0,1]},yaxis6:{anchor:"x6",domain:[.1514285714285714,.24285714285714283]},xaxis7:{anchor:"y7",domain:[0,1]},yaxis7:{anchor:"x7",domain:[0,.09142857142857143]},annotations:[{font:{size:16},showarrow:!1,text:"NZ Unemployment",x:.5,xanchor:"center",xref:"paper",y:1,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"HH Deposits nzd mil \u0394(YoY) %",x:.5,xanchor:"center",xref:"paper",y:.8485714285714285,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"Deposits Gross nzd mil \u0394(YoY) %",x:.5,xanchor:"center",xref:"paper",y:.6971428571428571,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"Loans Gross nzd mil \u0394(YoY) %",x:.5,xanchor:"center",xref:"paper",y:.5457142857142857,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"HH Deposits (nzd mil)",x:.5,xanchor:"center",xref:"paper",y:.39428571428571424,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"Deposits Gross (nzd mil)",x:.5,xanchor:"center",xref:"paper",y:.24285714285714283,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"Loans Gross (nzd mil)",x:.5,xanchor:"center",xref:"paper",y:.09142857142857143,yanchor:"bottom",yref:"paper"}],title:{text:"NZ Loans, Deposits, and Unemployment Trends"},height:1600,showlegend:!1},{responsive:!0})</script></div></body></html><p>What&rsquo;s interesting is the COVID pandemic showed up a few impulse
response functions that we&rsquo;d not have seen otherwise. Tricky to know if
the CNN-LSTM should be feed such abnormal data, huh? I&rsquo;d err to the side of
<em>do use</em> those responses, since banking behaviour responds to economic
fundamentals, not the flu virus.</p><p>🤣 I probably won&rsquo;t do that again in these pages. What I will do is make
up a separate OhangaPai dashboard which collects all the MMT empirical
data visualizations we may want. I will not share the scripts for generating
these plots for now, since I cannot guarantee their robustness. But if you
send me a polite email, promising never to complain, I&rsquo;ll post them to you.</p><h2 id=nz-credit-data><a class=anchor href=#nz-credit-data title='Anchor for: NZ Credit Data.'><svg aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#hashtag"/></svg></a>NZ Credit Data</h2><p>FRED: Total credit to Households and NPISHs &lsquo;QNZHAM770A&rsquo; (%GDP)
BIS: Q.NZ.H.A.M.770.A</p><p>FRED: Total credit to Nonfinancial Corporations &lsquo;QNZNAM770A&rsquo; (%GDP)
BIS: Credit from All sectors to Non-financial corporations (%GDP) <a href=https://data.bis.org/topics/TOTAL_CREDIT/BIS,WS_TC,2.0/Q.NZ.N.A.M.770.A target=_blank>https://data.bis.org/topics/TOTAL_CREDIT/BIS,WS_TC,2.0/Q.NZ.N.A.M.770.A</a></p><p>To get the RBNZ PVD_LS rough equivalent sum the above two? But the only
way I could see to check these had anything to do with the <strong>S40</strong> &lsquo;Deposits
by sector&rsquo; was to plot them and look.</p><p>As another check, these values should be comparable, though not the same,
to &ldquo;Debts, Loans + Securities&rdquo; from the IMF datamapper:</p><pre aria-label="Box containing code sample." tabindex=0><code># &#34;Total stock of loans and debt securities issued by households and nonfinancial corporations as a share of GDP.&#34;
https://www.imf.org/external/datamapper/api/v1//PVD_LS/NZL

# &#34;Total stock of loans and debt securities issued by households as a share of GDP.&#34;
https://www.imf.org/external/datamapper/api/v1//HH_LS/NZL
</code></pre><p><strong>Robust Fetch?:</strong><br>The RBNZ bank data is more up-to-date, but we can only automate if the
XLXS URl is constant. I&rsquo;ll be assuming it is until it isn&rsquo;t.
The quarterly cron job will then need a fail report too email. Provided I
remember how to set-up postmail, it&rsquo;s been a while.</p><p>In any case, eye-balling the series is always good. I also want rates of
change, say year-over-year, for the CNN-LSTM. The flows are more important
for comparing with correlation to unemployment.</p><p>For basic Visuals I always want to compare with unemployment, which can
be gathered from
<a href=https://www.stats.govt.nz/indicators/unemployment-rate/ target=_blank>Stats-NZ</a>
but
the same data fro longer period is also at the FRED &lsquo;LRUNTTTTNZQ156S&rsquo;.</p><table style="border-collapse:collapse;border=0"><col span=1 style=width:25%><col span=1 style=width:10%><col span=1 style=width:25%><tr style="border:1px solid color:#0f0f0f"><td style="border:1px solid color:#0f0f0f"><a href=../099_2_funds_flows>Previous chapter</a></td><td style="border:1px solid color:#0f0f0f;text-align:center"><a href=./>Back to</a></td><td style="border:1px solid color:#0f0f0f;text-align:right"><a href=../101_nzecon_ii>Next chapter</a></td></tr><tr style="border:1px solid color:#0f0f0f"><td style="border:1px solid color:#0f0f0f"><a href=../099_2_funds_flows>Fund sFlow</a></td><td style="border:1px solid color:#0f0f0f;text-align:center"><a href=./>TOC</a></td><td style="border:1px solid color:#0f0f0f;text-align:right"><a href=../101_nzecon_ii>NZ Econ II</a></td></tr></table></article></main></div><footer><div class=req-js><button class=outline-dashed title="Change to light/dark mode."><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><use xlink:href="/ohanga-pai/img/bundle.min.fc89b321aa39dfb355170fc007ce5b94.svg#adjust"/></svg></button><input class=outline-dashed type=color list=presets value=#1585d5 title="Change accent color." aria-label="Change accent color."><datalist id=presets><option value=#1f676b><option value=#1585d5><option value=#225670><option value=#dd587c><option value=#902b37><option value=#f3a530><option value=#754e85><option value=#7fc121><option value=#a8314a><option value=#ff7433><option value=#3e6728><option value=#c063bd><option value=#805080><option value=#9d629d><option value=#a064a0><option value=#7daa50><option value=#284531><option value=#285790><option value=#F5A83D><option value=#88aa33><option value=#015660><option value=#bf274e><option value=#bf4242><option value=#51b37c></datalist></div><noscript><p class=noscript>Unable to execute JavaScript. Some features were disabled.</p></noscript></footer><link rel=stylesheet href=https://smithwillsuffice.github.io/ohanga-pai/libs/katex@0.16.0/dist/katex.min.6950e59dbd8dfddd111390d85888bb5f9dc2e9c334da7ac1c3bacc92a695610d.css integrity="sha256-aVDlnb2N/d0RE5DYWIi7X53C6cM02nrBw7rMkqaVYQ0=" crossorigin=anonymous><script defer src=https://smithwillsuffice.github.io/ohanga-pai/libs/katex@0.16.0/dist/katex.min.4268ce940bc6faa510d7b638acc3f08a63501d9504dd3155bfc48d6838ade320.js integrity="sha256-QmjOlAvG+qUQ17Y4rMPwimNQHZUE3TFVv8SNaDit4yA=" crossorigin=anonymous></script>
<script defer src=https://smithwillsuffice.github.io/ohanga-pai/js/katex-custom-render.min.cdeaf561a454e015b169c385f95c72d57d41f906a9bc4100636b18e1e4c15da3.js integrity="sha256-zer1YaRU4BWxacOF+Vxy1X1B+QapvEEAY2sY4eTBXaM=" crossorigin=anonymous></script></body></html>